---
uid: web-forms/overview/data-access/custom-button-actions-with-the-datalist-and-repeater/custom-buttons-in-the-datalist-and-repeater-cs
title: Vlastní tlačítka v DataList a opakovače (C#) | Microsoft Docs
author: rick-anderson
description: V tomto kurzu využijeme rozhraní, které používá prvku Repeater seznam kategorií v systému, s každou kategorii poskytování tlačítko zobrazíte jeho associ...
ms.author: aspnetcontent
manager: wpickett
ms.date: 11/13/2006
ms.topic: article
ms.assetid: 1f42e332-78dc-438b-9e35-0c97aa0ad929
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/custom-button-actions-with-the-datalist-and-repeater/custom-buttons-in-the-datalist-and-repeater-cs
msc.type: authoredcontent
ms.openlocfilehash: d6d07f1dc3f97523da6d9ee1d45302cac06b45d2
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/06/2018
ms.locfileid: "30876485"
---
<a name="custom-buttons-in-the-datalist-and-repeater-c"></a><span data-ttu-id="9ff08-103">Vlastní tlačítka v DataList a opakovače (C#)</span><span class="sxs-lookup"><span data-stu-id="9ff08-103">Custom Buttons in the DataList and Repeater (C#)</span></span>
====================
<span data-ttu-id="9ff08-104">podle [Scott Meisnerová](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="9ff08-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="9ff08-105">[Stáhněte si ukázkovou aplikaci](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_46_CS.exe) nebo [stáhnout PDF](custom-buttons-in-the-datalist-and-repeater-cs/_static/datatutorial46cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="9ff08-105">[Download Sample App](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_46_CS.exe) or [Download PDF](custom-buttons-in-the-datalist-and-repeater-cs/_static/datatutorial46cs1.pdf)</span></span>

> <span data-ttu-id="9ff08-106">V tomto kurzu využijeme rozhraní, které používá k zobrazení seznamu kategorií v systému, s každou kategorii poskytování tlačítko zobrazíte její přidružené produkty pomocí ovládacího prvku BulletedList prvku Repeater.</span><span class="sxs-lookup"><span data-stu-id="9ff08-106">In this tutorial we'll build an interface that uses a Repeater to list the categories in the system, with each category providing a button to show its associated products using a BulletedList control.</span></span>


## <a name="introduction"></a><span data-ttu-id="9ff08-107">Úvod</span><span class="sxs-lookup"><span data-stu-id="9ff08-107">Introduction</span></span>

<span data-ttu-id="9ff08-108">V průběhu posledních sedmnáct DataList a opakovače kurzy jsme vytvořili jste příklady jen pro čtení a úpravy i odstranění příklady.</span><span class="sxs-lookup"><span data-stu-id="9ff08-108">Throughout the past seventeen DataList and Repeater tutorials, we ve created both read-only examples and editing and deleting examples.</span></span> <span data-ttu-id="9ff08-109">Pro usnadnění úpravy a odstraňování možnosti v rámci DataList, jsme přidali tlačítka pro DataList s `ItemTemplate` která po kliknutí na způsobeno zpětné volání a vyvolá událost související s DataList odpovídající tlačítko s `CommandName` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="9ff08-109">To facilitate editing and deleting capabilities within a DataList, we added buttons to the DataList s `ItemTemplate` that, when clicked, caused a postback and raised a DataList event corresponding to the button s `CommandName` property.</span></span> <span data-ttu-id="9ff08-110">Například přidání tlačítka do `ItemTemplate` s `CommandName` vlastnost hodnota úpravy způsobí, že DataList s `EditCommand` má provést při zpětném odeslání; s `CommandName` odstranit vyvolá `DeleteCommand`.</span><span class="sxs-lookup"><span data-stu-id="9ff08-110">For example, adding a button to the `ItemTemplate` with a `CommandName` property value of Edit causes the DataList s `EditCommand` to fire on postback; one with the `CommandName` Delete raises the `DeleteCommand`.</span></span>

<span data-ttu-id="9ff08-111">Kromě toho upravovat a odstraňovat tlačítka, ovládací prvky DataList a opakovače může také zahrnovat tlačítka, LinkButtons nebo ImageButtons která po kliknutí na provádět některé vlastní logiky na straně serveru.</span><span class="sxs-lookup"><span data-stu-id="9ff08-111">In addition to Edit and Delete buttons, the DataList and Repeater controls can also include Buttons, LinkButtons, or ImageButtons that, when clicked, perform some custom server-side logic.</span></span> <span data-ttu-id="9ff08-112">V tomto kurzu využijeme rozhraní, které používá prvku Repeater seznam kategorií v systému.</span><span class="sxs-lookup"><span data-stu-id="9ff08-112">In this tutorial we'll build an interface that uses a Repeater to list the categories in the system.</span></span> <span data-ttu-id="9ff08-113">Pro každou kategorii opakovače bude obsahovat tlačítko zobrazíte kategorie produktů spojené s pomocí ovládacího prvku BulletedList (viz obrázek 1).</span><span class="sxs-lookup"><span data-stu-id="9ff08-113">For each category, the Repeater will include a button to show the category s associated products using a BulletedList control (see Figure 1).</span></span>


<span data-ttu-id="9ff08-114">[![Kliknutím na tlačítko Zobrazit produkty odkaz zobrazí kategorie s produkty v seznamu s odrážkami](custom-buttons-in-the-datalist-and-repeater-cs/_static/image2.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="9ff08-114">[![Clicking the Show Products Link Displays the Category s Products in a Bulleted List](custom-buttons-in-the-datalist-and-repeater-cs/_static/image2.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image1.png)</span></span>

<span data-ttu-id="9ff08-115">**Obrázek 1**: Kliknutím na tlačítko zobrazí zobrazit odkaz produkty kategorie s produkty v seznamu s odrážkami ([Kliknutím zobrazit obrázek v plné velikosti](custom-buttons-in-the-datalist-and-repeater-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="9ff08-115">**Figure 1**: Clicking the Show Products Link Displays the Category s Products in a Bulleted List ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image3.png))</span></span>


## <a name="step-1-adding-the-custom-button-tutorial-web-pages"></a><span data-ttu-id="9ff08-116">Krok 1: Přidání vlastního tlačítka kurz webové stránky</span><span class="sxs-lookup"><span data-stu-id="9ff08-116">Step 1: Adding the Custom Button Tutorial Web Pages</span></span>

<span data-ttu-id="9ff08-117">Předtím, než se podíváme na tom, jak přidat vlastní tlačítka, umožní s nejprve pozorně vytváření stránek ASP.NET v našem webu projekt, který budeme potřebovat pro účely tohoto kurzu.</span><span class="sxs-lookup"><span data-stu-id="9ff08-117">Before we look at how to add a custom button, let s first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial.</span></span> <span data-ttu-id="9ff08-118">Nejprve přidejte novou složku s názvem `CustomButtonsDataListRepeater`.</span><span class="sxs-lookup"><span data-stu-id="9ff08-118">Start by adding a new folder named `CustomButtonsDataListRepeater`.</span></span> <span data-ttu-id="9ff08-119">Dál přidejte následující dvě stránky ASP.NET do této složky, a zkontrolujte, zda přidružit každou stránku s `Site.master` hlavní stránky:</span><span class="sxs-lookup"><span data-stu-id="9ff08-119">Next, add the following two ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `CustomButtons.aspx`


![Přidání stránky ASP.NET pro vlastní kurzy související tlačítka](custom-buttons-in-the-datalist-and-repeater-cs/_static/image4.png)

<span data-ttu-id="9ff08-121">**Obrázek 2**: Přidání stránky ASP.NET pro vlastní kurzy související tlačítka</span><span class="sxs-lookup"><span data-stu-id="9ff08-121">**Figure 2**: Add the ASP.NET Pages for the Custom Buttons-Related Tutorials</span></span>


<span data-ttu-id="9ff08-122">V jiných složkách, jako `Default.aspx` v `CustomButtonsDataListRepeater` složky zobrazí seznam kurzů k v jeho části.</span><span class="sxs-lookup"><span data-stu-id="9ff08-122">Like in the other folders, `Default.aspx` in the `CustomButtonsDataListRepeater` folder will list the tutorials in its section.</span></span> <span data-ttu-id="9ff08-123">Odvolat, který `SectionLevelTutorialListing.ascx` tuto funkci zajišťuje uživatelský ovládací prvek.</span><span class="sxs-lookup"><span data-stu-id="9ff08-123">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="9ff08-124">Přidat tento uživatelský ovládací prvek `Default.aspx` přetažením z Průzkumníka řešení na stránku s zobrazení návrhu.</span><span class="sxs-lookup"><span data-stu-id="9ff08-124">Add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page s Design view.</span></span>


<span data-ttu-id="9ff08-125">[![Přidání SectionLevelTutorialListing.ascx uživatelského ovládacího prvku do Default.aspx](custom-buttons-in-the-datalist-and-repeater-cs/_static/image6.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="9ff08-125">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](custom-buttons-in-the-datalist-and-repeater-cs/_static/image6.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image5.png)</span></span>

<span data-ttu-id="9ff08-126">**Obrázek 3**: Přidat `SectionLevelTutorialListing.ascx` uživatelského ovládacího prvku na `Default.aspx` ([Kliknutím zobrazit obrázek v plné velikosti](custom-buttons-in-the-datalist-and-repeater-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="9ff08-126">**Figure 3**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image7.png))</span></span>


<span data-ttu-id="9ff08-127">Nakonec přidejte stránky jako položky na `Web.sitemap` souboru.</span><span class="sxs-lookup"><span data-stu-id="9ff08-127">Lastly, add the pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="9ff08-128">Konkrétně, přidejte následující kód po stránkování a řazení s DataList a opakovače `<siteMapNode>`:</span><span class="sxs-lookup"><span data-stu-id="9ff08-128">Specifically, add the following markup after the Paging and Sorting with the DataList and Repeater `<siteMapNode>`:</span></span>


[!code-xml[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample1.xml)]

<span data-ttu-id="9ff08-129">Po aktualizaci `Web.sitemap`, pozorně Zobrazit kurzy web prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="9ff08-129">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="9ff08-130">V nabídce na levé straně teď obsahuje položky pro úpravy, vkládání a odstraňování kurzy.</span><span class="sxs-lookup"><span data-stu-id="9ff08-130">The menu on the left now includes items for the editing, inserting, and deleting tutorials.</span></span>


![Mapy webu nyní obsahuje položku pro tento kurz vlastních tlačítek](custom-buttons-in-the-datalist-and-repeater-cs/_static/image8.png)

<span data-ttu-id="9ff08-132">**Obrázek 4**: mapy webu nyní obsahuje položku pro tento kurz vlastních tlačítek</span><span class="sxs-lookup"><span data-stu-id="9ff08-132">**Figure 4**: The Site Map Now Includes the Entry for the Custom Buttons Tutorial</span></span>


## <a name="step-2-adding-the-list-of-categories"></a><span data-ttu-id="9ff08-133">Krok 2: Přidání seznamu kategorií</span><span class="sxs-lookup"><span data-stu-id="9ff08-133">Step 2: Adding the List of Categories</span></span>

<span data-ttu-id="9ff08-134">V tomto kurzu budeme muset vytvořit opakovače, který obsahuje seznam všech kategorií společně s produkty LinkButton zobrazit, po kliknutí na, zobrazí kategorie související s produkty v seznamu s odrážkami.</span><span class="sxs-lookup"><span data-stu-id="9ff08-134">For this tutorial we need to create a Repeater that lists all categories along with a Show Products LinkButton that, when clicked, displays the associated category s products in a bulleted list.</span></span> <span data-ttu-id="9ff08-135">Umožní s nejprve vytvořit jednoduché opakovače, který obsahuje seznam kategorií v systému.</span><span class="sxs-lookup"><span data-stu-id="9ff08-135">Let s first create a simple Repeater that lists the categories in the system.</span></span> <span data-ttu-id="9ff08-136">Začněte otevřením `CustomButtons.aspx` stránku `CustomButtonsDataListRepeater` složky.</span><span class="sxs-lookup"><span data-stu-id="9ff08-136">Start by opening the `CustomButtons.aspx` page in the `CustomButtonsDataListRepeater` folder.</span></span> <span data-ttu-id="9ff08-137">Přetáhněte prvku Repeater z panelu nástrojů na Designer a sadu jeho `ID` vlastnost `Categories`.</span><span class="sxs-lookup"><span data-stu-id="9ff08-137">Drag a Repeater from the Toolbox onto the Designer and set its `ID` property to `Categories`.</span></span> <span data-ttu-id="9ff08-138">Dále vytvořte nový ovládací prvek zdroje dat z opakovače s inteligentním.</span><span class="sxs-lookup"><span data-stu-id="9ff08-138">Next, create a new data source control from the Repeater s smart tag.</span></span> <span data-ttu-id="9ff08-139">Konkrétně vytvoření nového ovládacího prvku ObjectDataSource s názvem `CategoriesDataSource` , vybere data z `CategoriesBLL` třídu s `GetCategories()` metoda.</span><span class="sxs-lookup"><span data-stu-id="9ff08-139">Specifically, create a new ObjectDataSource control named `CategoriesDataSource` that selects its data from the `CategoriesBLL` class s `GetCategories()` method.</span></span>


<span data-ttu-id="9ff08-140">[![Konfigurace ObjectDataSource lze pomocí této metody GetCategories() s CategoriesBLL – třída](custom-buttons-in-the-datalist-and-repeater-cs/_static/image10.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="9ff08-140">[![Configure the ObjectDataSource to Use the CategoriesBLL Class s GetCategories() Method](custom-buttons-in-the-datalist-and-repeater-cs/_static/image10.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image9.png)</span></span>

<span data-ttu-id="9ff08-141">**Obrázek 5**: Konfigurace ObjectDataSource pro použití `CategoriesBLL` třídu s `GetCategories()` – metoda ([Kliknutím zobrazit obrázek v plné velikosti](custom-buttons-in-the-datalist-and-repeater-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="9ff08-141">**Figure 5**: Configure the ObjectDataSource to Use the `CategoriesBLL` Class s `GetCategories()` Method ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image11.png))</span></span>


<span data-ttu-id="9ff08-142">Na rozdíl od řízení DataList, pro který Visual Studio vytvoří výchozí `ItemTemplate` založené na zdroji dat, šablony opakovače s musí být ručně definován.</span><span class="sxs-lookup"><span data-stu-id="9ff08-142">Unlike the DataList control, for which Visual Studio creates a default `ItemTemplate` based on the data source, the Repeater s templates must be manually defined.</span></span> <span data-ttu-id="9ff08-143">Kromě toho musí být opakovače s šablony vytvořit a upravit deklarativně (to znamená, že s žádné šablony upravit možnost opakovače s inteligentním).</span><span class="sxs-lookup"><span data-stu-id="9ff08-143">Furthermore, the Repeater s templates must be created and edited declaratively (that is, there s no Edit Templates option in the Repeater s smart tag).</span></span>

<span data-ttu-id="9ff08-144">Klikněte na kartě Zdroj v levém dolním rohu a přidejte `ItemTemplate` který zobrazí název kategorie s v `<h3>` elementu a jeho popis v odstavec značka; patří `SeparatorTemplate` který zobrazí vodorovné pravítko (`<hr />`) mezi jednotlivými kategorie.</span><span class="sxs-lookup"><span data-stu-id="9ff08-144">Click on the Source tab in the bottom left corner and add an `ItemTemplate` that displays the category s name in an `<h3>` element and its description in a paragraph tag; include a `SeparatorTemplate` that displays a horizontal rule (`<hr />`) between each category.</span></span> <span data-ttu-id="9ff08-145">Také přidat LinkButton s jeho `Text` vlastnost nastavena na hodnotu zobrazit produkty.</span><span class="sxs-lookup"><span data-stu-id="9ff08-145">Also add a LinkButton with its `Text` property set to Show Products.</span></span> <span data-ttu-id="9ff08-146">Po dokončení těchto kroků, vaše stránka s deklarativní by měl vypadat následovně:</span><span class="sxs-lookup"><span data-stu-id="9ff08-146">After completing these steps, your page s declarative markup should look like the following:</span></span>


[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample2.aspx)]

<span data-ttu-id="9ff08-147">Obrázek 6 zobrazuje stránku při zobrazení prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="9ff08-147">Figure 6 shows the page when viewed through a browser.</span></span> <span data-ttu-id="9ff08-148">Každý název kategorie a popis je uveden.</span><span class="sxs-lookup"><span data-stu-id="9ff08-148">Each category name and description is listed.</span></span> <span data-ttu-id="9ff08-149">Tlačítko Zobrazit produkty, po kliknutí na způsobí, že zpětné volání, ale ještě neprovede žádnou akci.</span><span class="sxs-lookup"><span data-stu-id="9ff08-149">The Show Products button, when clicked, causes a postback but does not yet perform any action.</span></span>


<span data-ttu-id="9ff08-150">[![Každou kategorii s název a popis se zobrazí, společně s produkty LinkButton zobrazit](custom-buttons-in-the-datalist-and-repeater-cs/_static/image13.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="9ff08-150">[![Each Category s Name and Description is Displayed, Along with a Show Products LinkButton](custom-buttons-in-the-datalist-and-repeater-cs/_static/image13.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image12.png)</span></span>

<span data-ttu-id="9ff08-151">**Obrázek 6**: s každou kategorii název a popis se zobrazí, společně s produkty LinkButton zobrazit ([Kliknutím zobrazit obrázek v plné velikosti](custom-buttons-in-the-datalist-and-repeater-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="9ff08-151">**Figure 6**: Each Category s Name and Description is Displayed, Along with a Show Products LinkButton ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image14.png))</span></span>


## <a name="step-3-executing-server-side-logic-when-the-show-products-linkbutton-is-clicked"></a><span data-ttu-id="9ff08-152">Krok 3: Provádění serverové logiku při the zobrazit produkty LinkButton po kliknutí</span><span class="sxs-lookup"><span data-stu-id="9ff08-152">Step 3: Executing Server-Side Logic When the Show Products LinkButton is Clicked</span></span>

<span data-ttu-id="9ff08-153">Kdykoliv po kliknutí na tlačítko, LinkButton nebo ImageButton v rámci šablony v DataList nebo opakovače, dojde k zpětné volání a DataList nebo opakovače s `ItemCommand` je aktivována událost.</span><span class="sxs-lookup"><span data-stu-id="9ff08-153">Anytime a Button, LinkButton, or ImageButton within a template in a DataList or Repeater is clicked, a postback occurs and the DataList or Repeater s `ItemCommand` event fires.</span></span> <span data-ttu-id="9ff08-154">Kromě `ItemCommand` událostí, DataList řízení může také vyvolat jiné, více konkrétních událostí, pokud tlačítko s `CommandName` je nastavena na jednu vyhrazenou řetězce (odstranit, upravit, zrušení, aktualizace nebo vyberte), ale `ItemCommand` událostí je *vždy* aktivováno.</span><span class="sxs-lookup"><span data-stu-id="9ff08-154">In addition to the `ItemCommand` event, the DataList control may also raise another, more specific event if the button s `CommandName` property is set to one of the reserved strings ( Delete, Edit, Cancel, Update, or Select ), but the `ItemCommand` event is *always* fired.</span></span>

<span data-ttu-id="9ff08-155">Při stisknutí tlačítka v rámci DataList nebo opakovače často musíme (například předají které tlačítko bylo kliknuto (v případě, že může existovat více tlačítek v ovládacím prvku, jako je například obě upravíte a tlačítko Odstranit) a případně nějaké další informace primární hodnota klíče položky, jejichž tlačítko označeného).</span><span class="sxs-lookup"><span data-stu-id="9ff08-155">When a button is clicked within a DataList or Repeater, oftentimes we need to pass along which button was clicked (in the case that there may be multiple buttons within the control, such as both an Edit and Delete button) and perhaps some additional information (such as the primary key value of the item whose button was clicked).</span></span> <span data-ttu-id="9ff08-156">Tlačítko, LinkButton a ImageButton poskytují dvě vlastnosti, jejichž hodnoty jsou předávány `ItemCommand` obslužné rutiny události:</span><span class="sxs-lookup"><span data-stu-id="9ff08-156">The Button, LinkButton, and ImageButton provide two properties whose values are passed to the `ItemCommand` event handler:</span></span>

- <span data-ttu-id="9ff08-157">`CommandName` řetězec se obvykle používá k identifikaci každé tlačítko v šabloně</span><span class="sxs-lookup"><span data-stu-id="9ff08-157">`CommandName` a string typically used to identify each button in the template</span></span>
- <span data-ttu-id="9ff08-158">`CommandArgument` běžně používané pro udržení hodnotu některé pole data, jako je například hodnotu primárního klíče</span><span class="sxs-lookup"><span data-stu-id="9ff08-158">`CommandArgument` commonly used to hold the value of some data field, such as the primary key value</span></span>

<span data-ttu-id="9ff08-159">V tomto příkladu nastavit LinkButton s `CommandName` vlastnost ShowProducts a vazby aktuální záznam s hodnotu primárního klíče `CategoryID` k `CommandArgument` vlastnost pomocí syntaxe datové vazby `CategoryArgument='<%# Eval("CategoryID") %>'`.</span><span class="sxs-lookup"><span data-stu-id="9ff08-159">For this example, set the LinkButton s `CommandName` property to ShowProducts and bind the current record s primary key value `CategoryID` to the `CommandArgument` property using the databinding syntax `CategoryArgument='<%# Eval("CategoryID") %>'`.</span></span> <span data-ttu-id="9ff08-160">Po zadání tyto dvě vlastnosti, deklarativní syntaxi s LinkButton by měl vypadat následovně:</span><span class="sxs-lookup"><span data-stu-id="9ff08-160">After specifying these two properties, the LinkButton s declarative syntax should look like the following:</span></span>


[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample3.aspx)]

<span data-ttu-id="9ff08-161">Pokud po kliknutí na tlačítko, dojde k zpětné volání a DataList nebo opakovače s `ItemCommand` je aktivována událost.</span><span class="sxs-lookup"><span data-stu-id="9ff08-161">When the button is clicked, a postback occurs and the DataList or Repeater s `ItemCommand` event fires.</span></span> <span data-ttu-id="9ff08-162">Obslužné rutiny události je předána na tlačítko s `CommandName` a `CommandArgument` hodnoty.</span><span class="sxs-lookup"><span data-stu-id="9ff08-162">The event handler is passed the button s `CommandName` and `CommandArgument` values.</span></span>

<span data-ttu-id="9ff08-163">Vytvoření obslužné rutiny události pro opakovače s `ItemCommand` událostí a Poznámka: druhý parametr předaný do obslužné rutiny události (s názvem `e`).</span><span class="sxs-lookup"><span data-stu-id="9ff08-163">Create an event handler for the Repeater s `ItemCommand` event and note the second parameter passed into the event handler (named `e`).</span></span> <span data-ttu-id="9ff08-164">Tento druhý parametr je typu [ `RepeaterCommandEventArgs` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeatercommandeventargs.aspx) a má následující čtyři vlastnosti:</span><span class="sxs-lookup"><span data-stu-id="9ff08-164">This second parameter is of type [`RepeaterCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeatercommandeventargs.aspx) and has the following four properties:</span></span>

- <span data-ttu-id="9ff08-165">`CommandArgument` Hodnota tlačítka s `CommandArgument` vlastnost</span><span class="sxs-lookup"><span data-stu-id="9ff08-165">`CommandArgument` the value of the clicked button s `CommandArgument` property</span></span>
- <span data-ttu-id="9ff08-166">`CommandName` Hodnota tlačítko s `CommandName` vlastnost</span><span class="sxs-lookup"><span data-stu-id="9ff08-166">`CommandName` the value of the button s `CommandName` property</span></span>
- <span data-ttu-id="9ff08-167">`CommandSource` odkaz na ovládací prvek tlačítko, který označeného kliknutím</span><span class="sxs-lookup"><span data-stu-id="9ff08-167">`CommandSource` a reference to the button control that was clicked</span></span>
- <span data-ttu-id="9ff08-168">`Item` odkaz na [ `RepeaterItem` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem.aspx) obsahující tlačítko označeného; každý záznam vázána na opakovače označované jako `RepeaterItem`</span><span class="sxs-lookup"><span data-stu-id="9ff08-168">`Item` a reference to the [`RepeaterItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem.aspx) that contains the button that was clicked; each record bound to the Repeater is manifested as a `RepeaterItem`</span></span>

<span data-ttu-id="9ff08-169">Od vybrané kategorie s `CategoryID` je předaná prostřednictvím `CommandArgument` vlastnost nám získat sadu produktů, které jsou spojené s vybranou kategorii v `ItemCommand` obslužné rutiny události.</span><span class="sxs-lookup"><span data-stu-id="9ff08-169">Since the selected category s `CategoryID` is passed in via the `CommandArgument` property, we can get the set of products associated with the selected category in the `ItemCommand` event handler.</span></span> <span data-ttu-id="9ff08-170">Tyto produkty mohou být vázány pak do ovládacího prvku BulletedList v `ItemTemplate` (které jsme jste ještě chcete-li přidat).</span><span class="sxs-lookup"><span data-stu-id="9ff08-170">These products can then be bound to a BulletedList control in the `ItemTemplate` (which we ve yet to add).</span></span> <span data-ttu-id="9ff08-171">Všechny, které zůstává a pak je přidání BulletedList, v odkazovat `ItemCommand` obslužné rutiny události a vytvořit vazbu k němu sadu produktů pro vybranou kategorii, které jsme budete řešení v kroku 4.</span><span class="sxs-lookup"><span data-stu-id="9ff08-171">All that remains, then, is to add the BulletedList, reference it in the `ItemCommand` event handler, and bind to it the set of products for the selected category, which we'll tackle in Step 4.</span></span>

> [!NOTE]
> <span data-ttu-id="9ff08-172">DataList s `ItemCommand` obslužné rutiny události se předá objekt typu [ `DataListCommandEventArgs` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistcommandeventargs.aspx), který nabízí stejné čtyři vlastnosti, jako `RepeaterCommandEventArgs` třídy.</span><span class="sxs-lookup"><span data-stu-id="9ff08-172">The DataList s `ItemCommand` event handler is passed an object of type [`DataListCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistcommandeventargs.aspx), which offers the same four properties as the `RepeaterCommandEventArgs` class.</span></span>


## <a name="step-4-displaying-the-selected-category-s-products-in-a-bulleted-list"></a><span data-ttu-id="9ff08-173">Krok 4: Zobrazení vybrané kategorie s produkty v seznamu s odrážkami</span><span class="sxs-lookup"><span data-stu-id="9ff08-173">Step 4: Displaying the Selected Category s Products in a Bulleted List</span></span>

<span data-ttu-id="9ff08-174">Vybrané kategorie s produkty, může se zobrazit v rámci opakovače s `ItemTemplate` pomocí libovolný počet ovládacích prvků.</span><span class="sxs-lookup"><span data-stu-id="9ff08-174">The selected category s products can be displayed within the Repeater s `ItemTemplate` using any number of controls.</span></span> <span data-ttu-id="9ff08-175">Jsme může přidat že další vnořené opakovače, DataList, rozevírací seznam, rutina GridView a tak dále.</span><span class="sxs-lookup"><span data-stu-id="9ff08-175">We could add another nested Repeater, a DataList, a DropDownList, a GridView, and so on.</span></span> <span data-ttu-id="9ff08-176">Vzhledem k tomu, že chceme zobrazit tyto produkty jako seznam s odrážkami, ale použijeme ovládací prvek BulletedList.</span><span class="sxs-lookup"><span data-stu-id="9ff08-176">Since we want to display the products as a bulleted list, though, we'll use the BulletedList control.</span></span> <span data-ttu-id="9ff08-177">Vrácením `CustomButtons.aspx` stránky s deklarativní, přidání ovládacího prvku BulletedList `ItemTemplate` po LinkButton zobrazit produkty.</span><span class="sxs-lookup"><span data-stu-id="9ff08-177">Returning to the `CustomButtons.aspx` page s declarative markup, add a BulletedList control to the `ItemTemplate` after the Show Products LinkButton.</span></span> <span data-ttu-id="9ff08-178">Nastavit BulletedLists s `ID` k `ProductsInCategory`.</span><span class="sxs-lookup"><span data-stu-id="9ff08-178">Set the BulletedLists s `ID` to `ProductsInCategory`.</span></span> <span data-ttu-id="9ff08-179">BulletedList zobrazuje hodnotu pole dat, který je zadaný prostřednictvím `DataTextField` vzhledem k tomu, že bude mít tento ovládací prvek informace o produktu na něj navázaná, nastavte vlastnost `DataTextField` vlastnost `ProductName`.</span><span class="sxs-lookup"><span data-stu-id="9ff08-179">The BulletedList displays the value of the data field specified via the `DataTextField` property; since this control will have product information bound to it, set the `DataTextField` property to `ProductName`.</span></span>


[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample4.aspx)]

<span data-ttu-id="9ff08-180">V `ItemCommand` obslužné rutiny události, odkazovat na tento ovládací prvek pomocí `e.Item.FindControl("ProductsInCategory")` a navázat jej na sadu produktů, které jsou spojené s vybranou kategorii.</span><span class="sxs-lookup"><span data-stu-id="9ff08-180">In the `ItemCommand` event handler, reference this control using `e.Item.FindControl("ProductsInCategory")` and bind it to the set of products associated with the selected category.</span></span>


[!code-csharp[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample5.cs)]

<span data-ttu-id="9ff08-181">Před provedením jakékoli akce v `ItemCommand` obslužné rutiny události, je doporučeno nejprve zkontrolujte hodnotu příchozí zprávy s `CommandName`.</span><span class="sxs-lookup"><span data-stu-id="9ff08-181">Before performing any action in the `ItemCommand` event handler, it s prudent to first check the value of the incoming `CommandName`.</span></span> <span data-ttu-id="9ff08-182">Vzhledem k tomu, `ItemCommand` obslužné rutiny události aktivuje se při *žádné* po kliknutí na tlačítko, pokud jsou více tlačítek v použití šablony `CommandName` hodnotu rozpoznat jakou akci chcete provést.</span><span class="sxs-lookup"><span data-stu-id="9ff08-182">Since the `ItemCommand` event handler fires when *any* button is clicked, if there are multiple buttons in the template use the `CommandName` value to discern what action to take.</span></span> <span data-ttu-id="9ff08-183">Kontrola `CommandName` tady je moot, protože máme pouze jedno tlačítko, ale je dobrým která podporují do formuláře.</span><span class="sxs-lookup"><span data-stu-id="9ff08-183">Checking the `CommandName` here is moot, since we only have a single button, but it is a good habit to form.</span></span> <span data-ttu-id="9ff08-184">Dále `CategoryID` vybrané kategorie se načítají `CommandArgument` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="9ff08-184">Next, the `CategoryID` of the selected category is retrieved from the `CommandArgument` property.</span></span> <span data-ttu-id="9ff08-185">Ovládací prvek BulletedList v šabloně je pak odkazovat a vázaný k výsledky `ProductsBLL` třídu s `GetProductsByCategoryID(categoryID)` metoda.</span><span class="sxs-lookup"><span data-stu-id="9ff08-185">The BulletedList control in the template is then referenced and bound to the results of the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method.</span></span>

<span data-ttu-id="9ff08-186">V předchozí kurzy, které používají tlačítka v rámci DataList, jako například [přehled o úpravy a odstraňování dat v prvku DataList](../editing-and-deleting-data-through-the-datalist/an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md), zjistili jsme hodnotu primárního klíče dané položky prostřednictvím `DataKeys` kolekce.</span><span class="sxs-lookup"><span data-stu-id="9ff08-186">In previous tutorials that used the buttons within a DataList, such as [An Overview of Editing and Deleting Data in the DataList](../editing-and-deleting-data-through-the-datalist/an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md), we determined the primary key value of a given item via the `DataKeys` collection.</span></span> <span data-ttu-id="9ff08-187">Tento přístup funguje dobře u prvku DataList, opakovače nemá `DataKeys` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="9ff08-187">While this approach works well with the DataList, the Repeater does not have a `DataKeys` property.</span></span> <span data-ttu-id="9ff08-188">Místo toho jsme musíte použít alternativní způsob pro zadávání hodnotu primárního klíče, například prostřednictvím tlačítko s `CommandArgument` vlastnost nebo přiřazení k skrytý ovládací prvek popisek Web v rámci šablony hodnotu primárního klíče a čtení její hodnota zpět v `ItemCommand`pomocí obslužných rutin událostí `e.Item.FindControl("LabelID")`.</span><span class="sxs-lookup"><span data-stu-id="9ff08-188">Instead, we must use an alternative approach for supplying the primary key value, such as through the button s `CommandArgument` property or by assigning the primary key value to a hidden Label Web control within the template and reading its value back in the `ItemCommand` event handler using `e.Item.FindControl("LabelID")`.</span></span>

<span data-ttu-id="9ff08-189">Po dokončení `ItemCommand` obslužné rutiny události, za chvíli k otestování této stránce v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="9ff08-189">After completing the `ItemCommand` event handler, take a moment to test out this page in a browser.</span></span> <span data-ttu-id="9ff08-190">Jak je vidět na obrázku 7, kliknutím na tlačítko Zobrazit produkty odkaz způsobí, že zpětné volání a zobrazí produkty pro vybranou kategorii v BulletedList.</span><span class="sxs-lookup"><span data-stu-id="9ff08-190">As Figure 7 shows, clicking the Show Products link causes a postback and displays the products for the selected category in a BulletedList.</span></span> <span data-ttu-id="9ff08-191">Kromě toho Všimněte si, že tyto informace produktu zůstane, i v případě ostatních kategorií odkazy zobrazit produkty jsou zrušili.</span><span class="sxs-lookup"><span data-stu-id="9ff08-191">Furthermore, note that this product information remains, even if other categories Show Products links are clicked.</span></span>

> [!NOTE]
> <span data-ttu-id="9ff08-192">Pokud chcete změnit chování této sestavy tak, aby pouze jednu kategorii s produkty jsou uvedeny v čase, jednoduše nastavit ovládací prvek BulletedList s `EnableViewState` vlastnost `False`.</span><span class="sxs-lookup"><span data-stu-id="9ff08-192">If you want to modify the behavior of this report, such that the only one category s products are listed at a time, simply set the BulletedList control s `EnableViewState` property to `False`.</span></span>


<span data-ttu-id="9ff08-193">[![BulletedList se používá k zobrazení vybrané kategorie produktů](custom-buttons-in-the-datalist-and-repeater-cs/_static/image16.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="9ff08-193">[![A BulletedList is used to Display the Products of the Selected Category](custom-buttons-in-the-datalist-and-repeater-cs/_static/image16.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image15.png)</span></span>

<span data-ttu-id="9ff08-194">**Obrázek 7**: A BulletedList slouží k zobrazení vybrané kategorie produktů ([Kliknutím zobrazit obrázek v plné velikosti](custom-buttons-in-the-datalist-and-repeater-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="9ff08-194">**Figure 7**: A BulletedList is used to Display the Products of the Selected Category ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image17.png))</span></span>


## <a name="summary"></a><span data-ttu-id="9ff08-195">Souhrn</span><span class="sxs-lookup"><span data-stu-id="9ff08-195">Summary</span></span>

<span data-ttu-id="9ff08-196">Ovládací prvky DataList a opakovače může obsahovat libovolný počet tlačítek, LinkButtons nebo ImageButtons v rámci své šablony.</span><span class="sxs-lookup"><span data-stu-id="9ff08-196">The DataList and Repeater controls can include any number of Buttons, LinkButtons, or ImageButtons within their templates.</span></span> <span data-ttu-id="9ff08-197">Tlačítka, po kliknutí na způsobit zpětné volání a zvýšit `ItemCommand` událostí.</span><span class="sxs-lookup"><span data-stu-id="9ff08-197">Such buttons, when clicked, cause a postback and raise the `ItemCommand` event.</span></span> <span data-ttu-id="9ff08-198">Chcete-li přidružit se kliknutí na tlačítko Vlastní akce na straně serveru, vytvořit obslužnou rutinu události pro `ItemCommand` událostí.</span><span class="sxs-lookup"><span data-stu-id="9ff08-198">To associate custom server-side action with a button being clicked, create an event handler for the `ItemCommand` event.</span></span> <span data-ttu-id="9ff08-199">V této obslužné rutiny události nejprve zkontrolujte příchozí `CommandName` hodnotu, která určí, které tlačítko bylo kliknuto.</span><span class="sxs-lookup"><span data-stu-id="9ff08-199">In this event handler first check the incoming `CommandName` value to determine which button was clicked.</span></span> <span data-ttu-id="9ff08-200">Další informace můžete volitelně zadat prostřednictvím tlačítko s `CommandArgument` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="9ff08-200">Additional information can optionally be supplied through the button s `CommandArgument` property.</span></span>

<span data-ttu-id="9ff08-201">Radostí programování!</span><span class="sxs-lookup"><span data-stu-id="9ff08-201">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="9ff08-202">O autorovi</span><span class="sxs-lookup"><span data-stu-id="9ff08-202">About the Author</span></span>

<span data-ttu-id="9ff08-203">[Scott Meisnerová](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor sedm ASP/ASP.NET knih a zakladatele z [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracuje s technologií Microsoft Web od 1998.</span><span class="sxs-lookup"><span data-stu-id="9ff08-203">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="9ff08-204">Scott funguje jako nezávislé poradce, trainer a zapisovače.</span><span class="sxs-lookup"><span data-stu-id="9ff08-204">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="9ff08-205">Jeho nejnovější seznam k [ *Edice nakladatelství Sams naučit sami technologii ASP.NET 2.0 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="9ff08-205">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="9ff08-206">Dosažitelný v [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) nebo prostřednictvím svého blogu, který najdete na [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="9ff08-206">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="9ff08-207">Zvláštní poděkování</span><span class="sxs-lookup"><span data-stu-id="9ff08-207">Special Thanks To</span></span>

<span data-ttu-id="9ff08-208">Tento kurz řady byla zkontrolovány uživatelem mnoho užitečné kontrolorů.</span><span class="sxs-lookup"><span data-stu-id="9ff08-208">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="9ff08-209">Vést kontrolorem pro tento kurz byl společnosti Dennis Patterson.</span><span class="sxs-lookup"><span data-stu-id="9ff08-209">Lead reviewer for this tutorial was Dennis Patterson.</span></span> <span data-ttu-id="9ff08-210">Kontrola Moje nadcházející články MSDN máte zájem?</span><span class="sxs-lookup"><span data-stu-id="9ff08-210">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="9ff08-211">Pokud ano, vyřaďte mi řádek v [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="9ff08-211">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="9ff08-212">Next</span><span class="sxs-lookup"><span data-stu-id="9ff08-212">Next</span></span>](custom-buttons-in-the-datalist-and-repeater-vb.md)
