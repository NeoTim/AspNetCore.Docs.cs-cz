---
uid: web-forms/overview/data-access/displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-vb
title: "Formátování DataList a opakovače na základě údajů o (VB) | Microsoft Docs"
author: rick-anderson
description: "V tomto kurzu jsme projdete kroky příklady, jak jsme formátování vzhledu DataList ovládacích prvků a opakovače, buď pomocí formátování funkce s..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 09/13/2006
ms.topic: article
ms.assetid: e2f401ae-37bb-4b19-aa97-d6b385d40f88
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-vb
msc.type: authoredcontent
ms.openlocfilehash: 460fc36062f3338ffd178aceda2b3b224752a089
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 01/24/2018
---
<a name="formatting-the-datalist-and-repeater-based-upon-data-vb"></a><span data-ttu-id="a25c4-103">Formátování DataList a opakovače na základě údajů o (VB)</span><span class="sxs-lookup"><span data-stu-id="a25c4-103">Formatting the DataList and Repeater Based Upon Data (VB)</span></span>
====================
<span data-ttu-id="a25c4-104">podle [Scott Meisnerová](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="a25c4-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="a25c4-105">[Stáhněte si ukázkovou aplikaci](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_30_VB.exe) nebo [stáhnout PDF](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/datatutorial30vb1.pdf)</span><span class="sxs-lookup"><span data-stu-id="a25c4-105">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_30_VB.exe) or [Download PDF](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/datatutorial30vb1.pdf)</span></span>

> <span data-ttu-id="a25c4-106">V tomto kurzu jsme projdete kroky příklady, jak jsme formátování vzhledu DataList ovládacích prvků a opakovače, buď pomocí formátování funkce v rámci šablony nebo zpracování události vycentrovat.</span><span class="sxs-lookup"><span data-stu-id="a25c4-106">In this tutorial we'll step through examples of how we format the appearance of the DataList and Repeater controls, either by using formatting functions within templates or by handling the DataBound event.</span></span>


## <a name="introduction"></a><span data-ttu-id="a25c4-107">Úvod</span><span class="sxs-lookup"><span data-stu-id="a25c4-107">Introduction</span></span>

<span data-ttu-id="a25c4-108">Jak jsme viděli v předchozím kurzu, DataList nabízí řadu vlastnosti související se styly, které ovlivňují její vzhled.</span><span class="sxs-lookup"><span data-stu-id="a25c4-108">As we saw in the preceding tutorial, the DataList offers a number of style-related properties that affect its appearance.</span></span> <span data-ttu-id="a25c4-109">Konkrétně jsme viděli, jak přiřadit výchozí tříd CSS DataList s `HeaderStyle`, `ItemStyle`, `AlternatingItemStyle`, a `SelectedItemStyle` vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="a25c4-109">In particular, we saw how to assign default CSS classes to the DataList s `HeaderStyle`, `ItemStyle`, `AlternatingItemStyle`, and `SelectedItemStyle` properties.</span></span> <span data-ttu-id="a25c4-110">Kromě těchto čtyř vlastností prvku DataList obsahuje několik jiných vlastností související se styly, jako `Font`, `ForeColor`, `BackColor`, a `BorderWidth`, a další.</span><span class="sxs-lookup"><span data-stu-id="a25c4-110">In addition to these four properties, the DataList includes a number of other style-related properties, such as `Font`, `ForeColor`, `BackColor`, and `BorderWidth`, to name a few.</span></span> <span data-ttu-id="a25c4-111">Ovládacím prvku Repeater neobsahuje žádné vlastnosti související se styly.</span><span class="sxs-lookup"><span data-stu-id="a25c4-111">The Repeater control does not contain any style-related properties.</span></span> <span data-ttu-id="a25c4-112">Taková nastavení stylu musí být provedeny přímo v kódu v šablonách s opakovače.</span><span class="sxs-lookup"><span data-stu-id="a25c4-112">Any such style settings must be made directly within the markup in the Repeater s templates.</span></span>

<span data-ttu-id="a25c4-113">Často ale způsob formátování data, závisí na samotná data.</span><span class="sxs-lookup"><span data-stu-id="a25c4-113">Often, though, how data should be formatted depends on the data itself.</span></span> <span data-ttu-id="a25c4-114">Například při výpisu produkty jsme chtít zobrazit informace o produktu v Barva světla šedé písma, pokud se zastaví, nebo může chceme, abyste měli na očích `UnitsInStock` hodnotu, pokud je nula.</span><span class="sxs-lookup"><span data-stu-id="a25c4-114">For example, when listing products we might want to display the product information in a light gray font color if it is discontinued, or we may want to highlight the `UnitsInStock` value if it is zero.</span></span> <span data-ttu-id="a25c4-115">Jak jsme viděli v předchozí kurzy, rutina GridView, DetailsView a FormView nabízejí dvou různých způsobů, jak formátu jejich vzhled na základě jejich dat:</span><span class="sxs-lookup"><span data-stu-id="a25c4-115">As we saw in previous tutorials, the GridView, DetailsView, and FormView offer two distinct ways to format their appearance based on their data:</span></span>

- <span data-ttu-id="a25c4-116">**`DataBound` Událostí** vytvoření obslužné rutiny události pro příslušné `DataBound` událost, která aktivuje se po data byla svázána na jednotlivé položky (pro GridView bylo `RowDataBound` událostí; DataList a opakovače je `ItemDataBound`událostí).</span><span class="sxs-lookup"><span data-stu-id="a25c4-116">**The `DataBound` event** create an event handler for the appropriate `DataBound` event, which fires after the data has been bound to each item (for the GridView it was the `RowDataBound` event; for the DataList and Repeater it is the `ItemDataBound` event).</span></span> <span data-ttu-id="a25c4-117">V takovém případě může být prověřen obslužnou rutinu, pouze data vázaná a formátování rozhodnutí udělali.</span><span class="sxs-lookup"><span data-stu-id="a25c4-117">In that event handler, the data just bound can be examined and formatting decisions made.</span></span> <span data-ttu-id="a25c4-118">Jsme se zaměřili na tato technika v [vlastní formátování dat na základě po](../custom-formatting/custom-formatting-based-upon-data-vb.md) kurzu.</span><span class="sxs-lookup"><span data-stu-id="a25c4-118">We examined this technique in the [Custom Formatting Based Upon Data](../custom-formatting/custom-formatting-based-upon-data-vb.md) tutorial.</span></span>
- <span data-ttu-id="a25c4-119">**Formátování funkce v šablonách** při použití TemplateFields v ovládacích prvcích DetailsView nebo GridView nebo šablony v ovládacím prvku FormView, jsme formátování funkci přidat do třídy kódu stránky s ASP.NET, vrstvu obchodní logiky nebo všechny Další knihovny tříd, které je dostupné z webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="a25c4-119">**Formatting Functions in Templates** when using TemplateFields in the DetailsView or GridView controls, or a template in the FormView control, we can add a formatting function to the ASP.NET page s code-behind class, the Business Logic Layer, or any other class library that is accessible from the web application.</span></span> <span data-ttu-id="a25c4-120">Tato funkce formátování lze zadat libovolný počet vstupních parametrů, ale musí vracet HTML pro vykreslení v šabloně.</span><span class="sxs-lookup"><span data-stu-id="a25c4-120">This formatting function can accept an arbitrary number of input parameters, but must return the HTML to render in the template.</span></span> <span data-ttu-id="a25c4-121">Formátování funkce byly prozkoumány nejprve v [pomocí TemplateFields v ovládacím prvku GridView](../custom-formatting/using-templatefields-in-the-gridview-control-vb.md) kurzu.</span><span class="sxs-lookup"><span data-stu-id="a25c4-121">Formatting functions were first examined in the [Using TemplateFields in the GridView Control](../custom-formatting/using-templatefields-in-the-gridview-control-vb.md) tutorial.</span></span>

<span data-ttu-id="a25c4-122">Obě tyto formátování techniky jsou k dispozici s ovládacími prvky DataList a opakovače.</span><span class="sxs-lookup"><span data-stu-id="a25c4-122">Both of these formatting techniques are available with the DataList and Repeater controls.</span></span> <span data-ttu-id="a25c4-123">V tomto kurzu jsme projdete kroky příklady použití obě metody pro oba ovládací prvky.</span><span class="sxs-lookup"><span data-stu-id="a25c4-123">In this tutorial we'll step through examples using both techniques for both controls.</span></span>

## <a name="using-theitemdataboundevent-handler"></a><span data-ttu-id="a25c4-124">Pomocí`ItemDataBound`obslužné rutiny události</span><span class="sxs-lookup"><span data-stu-id="a25c4-124">Using the`ItemDataBound`Event Handler</span></span>

<span data-ttu-id="a25c4-125">Data je vázána k DataList, buď z prvku zdroje dat, nebo prostřednictvím prostřednictvím kódu programu přiřazování dat k ovládacímu prvku s `DataSource` vlastnost a volání jeho `DataBind()` metoda DataList s `DataBinding` aktivuje událost, výčet, zdroj dat a každý záznam dat je vázána DataList.</span><span class="sxs-lookup"><span data-stu-id="a25c4-125">When data is bound to a DataList, either from a data source control or through programmatically assigning data to the control s `DataSource` property and calling its `DataBind()` method, the DataList s `DataBinding` event fires, the data source enumerated, and each data record is bound to the DataList.</span></span> <span data-ttu-id="a25c4-126">Pro každý záznam ve zdroji dat prvku DataList vytvoří [ `DataListItem` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.aspx) objektu, který je pak vázána na aktuální záznam.</span><span class="sxs-lookup"><span data-stu-id="a25c4-126">For each record in the data source, the DataList creates a [`DataListItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.aspx) object that is then bound to the current record.</span></span> <span data-ttu-id="a25c4-127">Během tohoto procesu DataList vyvolává dvě události:</span><span class="sxs-lookup"><span data-stu-id="a25c4-127">During this process, the DataList raises two events:</span></span>

- <span data-ttu-id="a25c4-128">**`ItemCreated`**Aktivuje se po `DataListItem` byla vytvořena</span><span class="sxs-lookup"><span data-stu-id="a25c4-128">**`ItemCreated`** fires after the `DataListItem` has been created</span></span>
- <span data-ttu-id="a25c4-129">**`ItemDataBound`**Aktivuje se po záznam na aktuální záznam byla svázána se`DataListItem`</span><span class="sxs-lookup"><span data-stu-id="a25c4-129">**`ItemDataBound`** fires after the current record has been bound to the `DataListItem`</span></span>

<span data-ttu-id="a25c4-130">Následující kroky popisují proces vytváření vazby dat pro ovládací prvek DataList.</span><span class="sxs-lookup"><span data-stu-id="a25c4-130">The following steps outline the data binding process for the DataList control.</span></span>

1. <span data-ttu-id="a25c4-131">DataList s [ `DataBinding` událostí](https://msdn.microsoft.com/library/system.web.ui.control.databinding.aspx) aktivuje</span><span class="sxs-lookup"><span data-stu-id="a25c4-131">The DataList s [`DataBinding` event](https://msdn.microsoft.com/library/system.web.ui.control.databinding.aspx) fires</span></span>
2. <span data-ttu-id="a25c4-132">Data je vázána DataList</span><span class="sxs-lookup"><span data-stu-id="a25c4-132">The data is bound to the DataList</span></span>  
  
 <span data-ttu-id="a25c4-133">Pro každý záznam ve zdroji dat.</span><span class="sxs-lookup"><span data-stu-id="a25c4-133">For each record in the data source</span></span> 

    1. <span data-ttu-id="a25c4-134">Vytvoření `DataListItem` objektu</span><span class="sxs-lookup"><span data-stu-id="a25c4-134">Create a `DataListItem` object</span></span>
    2. <span data-ttu-id="a25c4-135">Ještě efektivněji [ `ItemCreated` událostí](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemcreated.aspx)</span><span class="sxs-lookup"><span data-stu-id="a25c4-135">Fire the [`ItemCreated` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemcreated.aspx)</span></span>
    3. <span data-ttu-id="a25c4-136">Záznam, který chcete vytvořit vazbu`DataListItem`</span><span class="sxs-lookup"><span data-stu-id="a25c4-136">Bind the record to the `DataListItem`</span></span>
    4. <span data-ttu-id="a25c4-137">Ještě efektivněji [ `ItemDataBound` událostí](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx)</span><span class="sxs-lookup"><span data-stu-id="a25c4-137">Fire the [`ItemDataBound` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx)</span></span>
    5. <span data-ttu-id="a25c4-138">Přidat `DataListItem` k `Items` kolekce</span><span class="sxs-lookup"><span data-stu-id="a25c4-138">Add the `DataListItem` to the `Items` collection</span></span>

<span data-ttu-id="a25c4-139">Při vytváření vazby dat k ovládacím prvku Repeater, prochází přesné stejné pořadí kroků.</span><span class="sxs-lookup"><span data-stu-id="a25c4-139">When binding data to the Repeater control, it progresses through the exact same sequence of steps.</span></span> <span data-ttu-id="a25c4-140">Jediným rozdílem je, že místo `DataListItem` vytváří instance, používá opakovače [ `RepeaterItem` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem(VS.80).aspx)s.</span><span class="sxs-lookup"><span data-stu-id="a25c4-140">The only difference is that instead of `DataListItem` instances being created, the Repeater uses [`RepeaterItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem(VS.80).aspx)s.</span></span>

> [!NOTE]
> <span data-ttu-id="a25c4-141">Astute čtečky jste si nejspíše všimli mírné anomálií mezi pořadí kroků, které transpire při DataList a opakovače je vázána na data a když GridView vázané na data.</span><span class="sxs-lookup"><span data-stu-id="a25c4-141">The astute reader may have noticed a slight anomaly between the sequence of steps that transpire when the DataList and Repeater are bound to data versus when the GridView is bound to data.</span></span> <span data-ttu-id="a25c4-142">Na konci procesu vázání dat tail GridView vyvolá `DataBound` událostí; ale ovládací prvek DataList ani opakovače mít takové události.</span><span class="sxs-lookup"><span data-stu-id="a25c4-142">At the tail end of the data binding process, the GridView raises the `DataBound` event; however, neither the DataList nor Repeater control have such an event.</span></span> <span data-ttu-id="a25c4-143">Je to proto, že ovládací prvky DataList a opakovače byly vytvořeny zpět v určeném časovém rozmezí ASP.NET 1.x před vzoru obslužná rutina události před a po úrovně stalo běžné.</span><span class="sxs-lookup"><span data-stu-id="a25c4-143">This is because the DataList and Repeater controls were created back in the ASP.NET 1.x timeframe, before the pre- and post-level event handler pattern had become common.</span></span>


<span data-ttu-id="a25c4-144">Jako s GridView, je vytvoření obslužné rutiny události pro jednu možnost pro formátování na základě dat `ItemDataBound` událostí.</span><span class="sxs-lookup"><span data-stu-id="a25c4-144">Like with the GridView, one option for formatting based on the data is to create an event handler for the `ItemDataBound` event.</span></span> <span data-ttu-id="a25c4-145">Tuto obslužnou rutinu události by kontrolovat data, která měla právě vázána na `DataListItem` nebo `RepeaterItem` a ovlivnit formátování ovládacího prvku podle potřeby.</span><span class="sxs-lookup"><span data-stu-id="a25c4-145">This event handler would inspect the data that had just been bound to the `DataListItem` or `RepeaterItem` and affect the formatting of the control as needed.</span></span>

<span data-ttu-id="a25c4-146">Pro ovládací prvek DataList změny formátování pro celou položku lze implementovat pomocí `DataListItem` s vlastnosti související se styly, mezi které patří standardní `Font`, `ForeColor`, `BackColor`, `CssClass`a tak dále.</span><span class="sxs-lookup"><span data-stu-id="a25c4-146">For the DataList control, formatting changes for the entire item can be implemented using the `DataListItem` s style-related properties, which include the standard `Font`, `ForeColor`, `BackColor`, `CssClass`, and so on.</span></span> <span data-ttu-id="a25c4-147">Pokud chcete ovlivnit formátování konkrétní ovládací prvky webového v rámci šablony s DataList, musíme prostřednictvím kódu programu přístup a úpravy stylu tyto ovládací prvky webového.</span><span class="sxs-lookup"><span data-stu-id="a25c4-147">To affect the formatting of particular Web controls within the DataList s template, we need to programmatically access and modify the style of those Web controls.</span></span> <span data-ttu-id="a25c4-148">Jsme viděli, jak provést tuto zpět v *vlastní formátování dat na základě po* kurzu.</span><span class="sxs-lookup"><span data-stu-id="a25c4-148">We saw how to accomplish this back in the *Custom Formatting Based Upon Data* tutorial.</span></span> <span data-ttu-id="a25c4-149">Ovládacím prvku Repeater, jako `RepeaterItem` třída nemá žádné vlastnosti související s styl; proto provedeny všechny změny související se styly `RepeaterItem` v `ItemDataBound` obslužné rutiny události musí provést programově přístup k a aktualizace ovládacích prvků v rámci Šablona.</span><span class="sxs-lookup"><span data-stu-id="a25c4-149">Like the Repeater control, the `RepeaterItem` class has no style-related properties; therefore, all style-related changes made to a `RepeaterItem` in the `ItemDataBound` event handler must be done by programmatically accessing and updating Web controls within the template.</span></span>

<span data-ttu-id="a25c4-150">Vzhledem k tomu `ItemDataBound` formátování technika pro jsou téměř stejné, našem příkladu se soustředí na pomocí prvku DataList DataList a opakovače.</span><span class="sxs-lookup"><span data-stu-id="a25c4-150">Since the `ItemDataBound` formatting technique for the DataList and Repeater are virtually identical, our example will focus on using the DataList.</span></span>

## <a name="step-1-displaying-product-information-in-the-datalist"></a><span data-ttu-id="a25c4-151">Krok 1: Zobrazení informací o produktu v prvku DataList</span><span class="sxs-lookup"><span data-stu-id="a25c4-151">Step 1: Displaying Product Information in the DataList</span></span>

<span data-ttu-id="a25c4-152">Než budeme starosti formátování, umožňují s vytvořit stránky, která používá k zobrazení informací o produktu DataList.</span><span class="sxs-lookup"><span data-stu-id="a25c4-152">Before we worry about the formatting, let s first create a page that uses a DataList to display product information.</span></span> <span data-ttu-id="a25c4-153">V [předchozí kurzu](displaying-data-with-the-datalist-and-repeater-controls-vb.md) jsme vytvořili DataList jejichž `ItemTemplate` zobrazí každý název produktu s, kategorie, dodavatele, množství jednotky a cena.</span><span class="sxs-lookup"><span data-stu-id="a25c4-153">In the [previous tutorial](displaying-data-with-the-datalist-and-repeater-controls-vb.md) we created a DataList whose `ItemTemplate` displayed each product s name, category, supplier, quantity per unit, and price.</span></span> <span data-ttu-id="a25c4-154">Umožní s opakováním zde tato funkce v tomto kurzu.</span><span class="sxs-lookup"><span data-stu-id="a25c4-154">Let s repeat this functionality here in this tutorial.</span></span> <span data-ttu-id="a25c4-155">K tomu, můžete buď znovu vytvořit DataList a jeho ObjectDataSource od nuly nebo můžete zkopírovat přes tyto ovládací prvky na stránce vytvořili v předchozí kurzu (`Basics.aspx`) a vložit je na stránce pro účely tohoto kurzu (`Formatting.aspx`).</span><span class="sxs-lookup"><span data-stu-id="a25c4-155">To accomplish this, you can either recreate the DataList and its ObjectDataSource from scratch, or you can copy over those controls from the page created in the previous tutorial (`Basics.aspx`) and paste them into the page for this tutorial (`Formatting.aspx`).</span></span>

<span data-ttu-id="a25c4-156">Jakmile replikace funkce DataList a ObjectDataSource `Basics.aspx` do `Formatting.aspx`, pozorně změnit DataList s `ID` vlastnost z `DataList1` k více popisný `ItemDataBoundFormattingExample`.</span><span class="sxs-lookup"><span data-stu-id="a25c4-156">Once you have replicated the DataList and ObjectDataSource functionality from `Basics.aspx` into `Formatting.aspx`, take a moment to change the DataList s `ID` property from `DataList1` to a more descriptive `ItemDataBoundFormattingExample`.</span></span> <span data-ttu-id="a25c4-157">V dalším kroku zobrazte DataList v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="a25c4-157">Next, view the DataList in a browser.</span></span> <span data-ttu-id="a25c4-158">Jak ukazuje obrázek 1, formátování jediným rozdílem mezi každý produkt je, že střídavě barvu pozadí.</span><span class="sxs-lookup"><span data-stu-id="a25c4-158">As Figure 1 shows, the only formatting difference between each product is that the background color alternates.</span></span>


<span data-ttu-id="a25c4-159">[![Produkty, které jsou uvedeny v ovládacím prvku DataList](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image2.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="a25c4-159">[![The Products are Listed in the DataList Control](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image2.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image1.png)</span></span>

<span data-ttu-id="a25c4-160">**Obrázek 1**: produkty jsou uvedeny v ovládacím prvku DataList ([Kliknutím zobrazit obrázek v plné velikosti](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="a25c4-160">**Figure 1**: The Products are Listed in the DataList Control ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image3.png))</span></span>


<span data-ttu-id="a25c4-161">V tomto kurzu mohli s formátu prvku DataList tak, aby všechny produkty s cenu nižší než 20,00 bude mít i jeho název a zvýrazněná žlutý cena jednotky.</span><span class="sxs-lookup"><span data-stu-id="a25c4-161">For this tutorial, let s format the DataList such that any products with a price less than $20.00 will have both its name and unit price highlighted yellow.</span></span>

## <a name="step-2-programmatically-determining-the-value-of-the-data-in-the-itemdatabound-event-handler"></a><span data-ttu-id="a25c4-162">Krok 2: Určení prostřednictvím kódu programu hodnotu Data v obslužná rutina události ItemDataBound</span><span class="sxs-lookup"><span data-stu-id="a25c4-162">Step 2: Programmatically Determining the Value of the Data in the ItemDataBound Event Handler</span></span>

<span data-ttu-id="a25c4-163">Vzhledem k tomu jenom produkty s cenou pod 20,00 bude mít vlastní formátování, které se použijí, jsme musí být schopní určit, každý s cena produktu.</span><span class="sxs-lookup"><span data-stu-id="a25c4-163">Since only those products with a price under $20.00 will have the custom formatting applied, we must be able to determine each product s price.</span></span> <span data-ttu-id="a25c4-164">Při vytváření vazby dat k DataList, prvku DataList zobrazí záznamy v zdrojem dat a pro každý záznam vytvoří `DataListItem` instance, vazba záznamu zdroje dat `DataListItem`.</span><span class="sxs-lookup"><span data-stu-id="a25c4-164">When binding data to a DataList, the DataList enumerates the records in its data source and, for each record, creates a `DataListItem` instance, binding the data source record to the `DataListItem`.</span></span> <span data-ttu-id="a25c4-165">Po konkrétní záznam s dat byla svázána se aktuální `DataListItem` objekt, DataList s `ItemDataBound` událost je aktivována.</span><span class="sxs-lookup"><span data-stu-id="a25c4-165">After the particular record s data has been bound to the current `DataListItem` object, the DataList s `ItemDataBound` event is fired.</span></span> <span data-ttu-id="a25c4-166">Můžeme vytvořit obslužnou rutinu události pro tuto událost, chcete-li zkontrolovat hodnoty dat pro aktuální `DataListItem` a na základě těchto hodnot, proveďte změny formátování nezbytné.</span><span class="sxs-lookup"><span data-stu-id="a25c4-166">We can create an event handler for this event to inspect the data values for the current `DataListItem` and, based upon those values, make any formatting changes necessary.</span></span>

<span data-ttu-id="a25c4-167">Vytvoření `ItemDataBound` událost pro prvku DataList a přidejte následující kód:</span><span class="sxs-lookup"><span data-stu-id="a25c4-167">Create an `ItemDataBound` event for the DataList and add the following code:</span></span>


[!code-vb[Main](formatting-the-datalist-and-repeater-based-upon-data-vb/samples/sample1.vb)]

<span data-ttu-id="a25c4-168">Při koncept a sémantiku za DataList s `ItemDataBound` obslužné rutiny události jsou stejné jako v případě rutina GridView s `RowDataBound` obslužné rutiny událostí v *vlastní formátování dat na základě při* se liší syntaxe kurzu mírně.</span><span class="sxs-lookup"><span data-stu-id="a25c4-168">While the concept and semantics behind the DataList s `ItemDataBound` event handler are the same as those used by the GridView s `RowDataBound` event handler in the *Custom Formatting Based Upon Data* tutorial, the syntax differs slightly.</span></span> <span data-ttu-id="a25c4-169">Při `ItemDataBound` aktivuje událost `DataListItem` jenom vazby na data je předána do odpovídající obslužné rutiny události prostřednictvím `e.Item` (místo `e.Row`, stejně jako u GridView s `RowDataBound` obslužné rutiny události).</span><span class="sxs-lookup"><span data-stu-id="a25c4-169">When the `ItemDataBound` event fires, the `DataListItem` just bound to data is passed into corresponding event handler via `e.Item` (instead of `e.Row`, as with the GridView s `RowDataBound` event handler).</span></span> <span data-ttu-id="a25c4-170">DataList s `ItemDataBound` aktivuje obslužné rutiny události pro *každý* řádek přidán do DataList, včetně řádky záhlaví, zápatí řádků a Oddělovač řádků.</span><span class="sxs-lookup"><span data-stu-id="a25c4-170">The DataList s `ItemDataBound` event handler fires for *each* row added to the DataList, including header rows, footer rows, and separator rows.</span></span> <span data-ttu-id="a25c4-171">Informace o produktu je však vázaný jenom na řádky data.</span><span class="sxs-lookup"><span data-stu-id="a25c4-171">However, the product information is only bound to the data rows.</span></span> <span data-ttu-id="a25c4-172">Proto při použití `ItemDataBound` událost a kontrolovat data vázaná na prvku DataList, je potřeba nejdřív zkontrolujte, zda jsme re práce s datovou položku.</span><span class="sxs-lookup"><span data-stu-id="a25c4-172">Therefore, when using the `ItemDataBound` event to inspect the data bound to the DataList, we need to first ensure that we re working with a data item.</span></span> <span data-ttu-id="a25c4-173">To lze provést pomocí kontroly `DataListItem` s [ `ItemType` vlastnost](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.itemtype.aspx), která může mít jednu z [následující hodnoty osm](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listitemtype.aspx):</span><span class="sxs-lookup"><span data-stu-id="a25c4-173">This can be accomplished by checking the `DataListItem` s [`ItemType` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.itemtype.aspx), which can have one of [the following eight values](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listitemtype.aspx):</span></span>

- `AlternatingItem`
- `EditItem`
- `Footer`
- `Header`
- `Item`
- `Pager`
- `SelectedItem`
- `Separator`

<span data-ttu-id="a25c4-174">Obě `Item` a `AlternatingItem``DataListItem` s způsob vytvoření DataList s datových položek.</span><span class="sxs-lookup"><span data-stu-id="a25c4-174">Both `Item` and `AlternatingItem``DataListItem` s makeup the DataList s data items.</span></span> <span data-ttu-id="a25c4-175">Za předpokladu, že jsme re práce `Item` nebo `AlternatingItem`, jsme získat přístup skutečnou `ProductsRow` instance, která byla vázána na aktuální `DataListItem`.</span><span class="sxs-lookup"><span data-stu-id="a25c4-175">Assuming we re working with an `Item` or `AlternatingItem`, we access the actual `ProductsRow` instance that was bound to the current `DataListItem`.</span></span> <span data-ttu-id="a25c4-176">`DataListItem` s [ `DataItem` vlastnost](https://msdn.microsoft.com/system.web.ui.webcontrols.datalistitem.dataitem.aspx) obsahuje odkaz na `DataRowView` objekt, jehož `Row` vlastnost poskytuje odkaz na skutečnou `ProductsRow` objektu.</span><span class="sxs-lookup"><span data-stu-id="a25c4-176">The `DataListItem` s [`DataItem` property](https://msdn.microsoft.com/system.web.ui.webcontrols.datalistitem.dataitem.aspx) contains a reference to the `DataRowView` object, whose `Row` property provides a reference to the actual `ProductsRow` object.</span></span>

<span data-ttu-id="a25c4-177">Dále zkontrolujte jsme `ProductsRow` instance s `UnitPrice` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="a25c4-177">Next, we check the `ProductsRow` instance s `UnitPrice` property.</span></span> <span data-ttu-id="a25c4-178">Od tabulky produktů s `UnitPrice` pole umožňuje `NULL` hodnoty, před pokusem o přístup `UnitPrice` vlastnost jsme měli nejdřív zkontrolovat, zjistěte, zda má `NULL` hodnotu pomocí `IsUnitPriceNull()` metoda.</span><span class="sxs-lookup"><span data-stu-id="a25c4-178">Since the Products table s `UnitPrice` field allows `NULL` values, before attempting to access the `UnitPrice` property we should first check to see if it has a `NULL` value using the `IsUnitPriceNull()` method.</span></span> <span data-ttu-id="a25c4-179">Pokud `UnitPrice` hodnota není `NULL`, jsme potom zkontrolujte, zda ji s menší než 20,00.</span><span class="sxs-lookup"><span data-stu-id="a25c4-179">If the `UnitPrice` value is not `NULL`, we then check to see if it s less than $20.00.</span></span> <span data-ttu-id="a25c4-180">Pokud je skutečně v části 20,00, potřebujeme poté použijte vlastní formátování.</span><span class="sxs-lookup"><span data-stu-id="a25c4-180">If it is indeed under $20.00, we then need to apply the custom formatting.</span></span>

## <a name="step-3-highlighting-the-product-s-name-and-price"></a><span data-ttu-id="a25c4-181">Krok 3: Zvýraznění s názvem produktu a ceny</span><span class="sxs-lookup"><span data-stu-id="a25c4-181">Step 3: Highlighting the Product s Name and Price</span></span>

<span data-ttu-id="a25c4-182">Jakmile víme, že je cena produktu s méně než 20,00, zbývá zvýrazněte jeho název a cena.</span><span class="sxs-lookup"><span data-stu-id="a25c4-182">Once we know that a product s price is less than $20.00, all that remains is to highlight its name and price.</span></span> <span data-ttu-id="a25c4-183">K tomu, jsme musí nejprve prostřednictvím kódu programu odkazovat ovládací prvky popisek v `ItemTemplate` , zobrazení, název produktu s a ceny.</span><span class="sxs-lookup"><span data-stu-id="a25c4-183">To accomplish this, we must first programmatically reference the Label controls in the `ItemTemplate` that display the product s name and price.</span></span> <span data-ttu-id="a25c4-184">Dále je potřeba je lze zobrazit žlutý pozadí.</span><span class="sxs-lookup"><span data-stu-id="a25c4-184">Next, we need to have them display a yellow background.</span></span> <span data-ttu-id="a25c4-185">Informace o formátování lze použít přímou úpravou popisků `BackColor` vlastnosti (`LabelID.BackColor = Color.Yellow`); v ideálním případě by ale všechny záležitosti související s zobrazení by měla být vyjádřena prostřednictvím šablony stylů CSS.</span><span class="sxs-lookup"><span data-stu-id="a25c4-185">This formatting information can be applied by directly modifying the Labels `BackColor` properties (`LabelID.BackColor = Color.Yellow`); ideally, though, all display-related matters should be expressed through cascading stylesheets.</span></span> <span data-ttu-id="a25c4-186">Ve skutečnosti jsme už máte šablonu stylů, která obsahuje požadovanou formátování definované v `Styles.css`  -  `AffordablePriceEmphasis`, který byl vytvořen a zabývá *vlastní formátování dat na základě po* kurzu.</span><span class="sxs-lookup"><span data-stu-id="a25c4-186">In fact, we already have a stylesheet that provides the desired formatting defined in `Styles.css` - `AffordablePriceEmphasis`, which was created and discussed in the *Custom Formatting Based Upon Data* tutorial.</span></span>

<span data-ttu-id="a25c4-187">Chcete-li použít formátování, jednoduše nastavte dva ovládací prvky popisek webového `CssClass` vlastnosti, které chcete `AffordablePriceEmphasis`, jak je znázorněno v následujícím kódu:</span><span class="sxs-lookup"><span data-stu-id="a25c4-187">To apply the formatting, simply set the two Label Web controls `CssClass` properties to `AffordablePriceEmphasis`, as shown in the following code:</span></span>


[!code-vb[Main](formatting-the-datalist-and-repeater-based-upon-data-vb/samples/sample2.vb)]

<span data-ttu-id="a25c4-188">S `ItemDataBound` obslužné rutiny události dokončen, pokroku `Formatting.aspx` stránku v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="a25c4-188">With the `ItemDataBound` event handler completed, revisit the `Formatting.aspx` page in a browser.</span></span> <span data-ttu-id="a25c4-189">Jak ukazuje obrázek 2, tyto produkty s cenou pod 20,00 mít jejich název a cena zvýrazněná.</span><span class="sxs-lookup"><span data-stu-id="a25c4-189">As Figure 2 illustrates, those products with a price under $20.00 have both their name and price highlighted.</span></span>


<span data-ttu-id="a25c4-190">[![Tyto produkty nižší než 20,00 jsou vyznačené](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image5.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="a25c4-190">[![Those Products Less than $20.00 are Highlighted](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image5.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image4.png)</span></span>

<span data-ttu-id="a25c4-191">**Obrázek 2**: těch, které produkty nižší než 20,00 jsou vyznačené ([Kliknutím zobrazit obrázek v plné velikosti](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="a25c4-191">**Figure 2**: Those Products Less than $20.00 are Highlighted ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image6.png))</span></span>


> [!NOTE]
> <span data-ttu-id="a25c4-192">Vzhledem k tomu, že DataList se vykresluje jako HTML `<table>`, jeho `DataListItem` instance mít vlastnosti související se styly, které lze nastavit chcete konkrétní styl celého položkou provést.</span><span class="sxs-lookup"><span data-stu-id="a25c4-192">Since the DataList is rendered as an HTML `<table>`, its `DataListItem` instances have style-related properties that can be set to apply a specific style to the entire item.</span></span> <span data-ttu-id="a25c4-193">Například, pokud jsme chtěli zvýrazněte *celý* položky žlutý při jeho cena byla menší než 20,00 jsme může nahradit kód, který odkazuje štítky a nastavte jejich `CssClass` vlastnosti s následující kód: `e.Item.CssClass = "AffordablePriceEmphasis"` (viz obrázek 3).</span><span class="sxs-lookup"><span data-stu-id="a25c4-193">For example, if we wanted to highlight the *entire* item yellow when its price was less than $20.00, we could have replaced the code that referenced the Labels and set their `CssClass` properties with the following line of code: `e.Item.CssClass = "AffordablePriceEmphasis"` (see Figure 3).</span></span>


<span data-ttu-id="a25c4-194">`RepeaterItem` S, který vytváří ovládacím prvku Repeater však tento t nabízí takové úrovni styl vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="a25c4-194">The `RepeaterItem` s that make up the Repeater control, however, don t offer such style-level properties.</span></span> <span data-ttu-id="a25c4-195">Proto vlastní formátování opakovače vyžaduje použití vlastnosti stylu pro ovládací prvky webového v rámci šablony opakovače s, stejně jako jsme provedli na obrázku 2.</span><span class="sxs-lookup"><span data-stu-id="a25c4-195">Therefore, applying custom formatting to the Repeater requires the application of style properties to the Web controls within the Repeater s templates, just like we did in Figure 2.</span></span>


<span data-ttu-id="a25c4-196">[![Celý položka produktu je označený pro produkty v rámci 20,00](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image8.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="a25c4-196">[![The Entire Product Item is Highlighted for Products Under $20.00](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image8.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image7.png)</span></span>

<span data-ttu-id="a25c4-197">**Obrázek 3**: položka celé produktu je označený pro produkty v rámci 20,00 ([Kliknutím zobrazit obrázek v plné velikosti](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="a25c4-197">**Figure 3**: The Entire Product Item is Highlighted for Products Under $20.00 ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image9.png))</span></span>


## <a name="using-formatting-functions-from-within-the-template"></a><span data-ttu-id="a25c4-198">Pomocí formátování funkcí z v rámci šablony</span><span class="sxs-lookup"><span data-stu-id="a25c4-198">Using Formatting Functions from Within the Template</span></span>

<span data-ttu-id="a25c4-199">V *pomocí TemplateFields v ovládacím prvku GridView* kurzu jsme viděli, jak použít vlastní formátování na základě dat pomocí formátování funkce v rámci GridView TemplateField vázaným na řádky s GridView.</span><span class="sxs-lookup"><span data-stu-id="a25c4-199">In the *Using TemplateFields in the GridView Control* tutorial we saw how to use a formatting function within a GridView TemplateField to apply custom formatting based upon the data bound to the GridView s rows.</span></span> <span data-ttu-id="a25c4-200">Formátování funkce je metoda, která můžete vyvolat z šablony a vrátí kód HTML pro vypuštění na příslušné místo.</span><span class="sxs-lookup"><span data-stu-id="a25c4-200">A formatting function is a method that can be invoked from a template and returns the HTML to be emitted in its place.</span></span> <span data-ttu-id="a25c4-201">Formátování funkce mohou být uloženy ve třídě kódu stránky s ASP.NET, nebo můžete centralizované do třídy souborů v `App_Code` složku nebo v samostatné projektu knihovny tříd.</span><span class="sxs-lookup"><span data-stu-id="a25c4-201">Formatting functions can reside in the ASP.NET page s code-behind class or can be centralized into class files in the `App_Code` folder or in a separate Class Library project.</span></span> <span data-ttu-id="a25c4-202">Přesunutí formátování funkce mimo třídy s kódu stránky ASP.NET je ideální, pokud máte v úmyslu používat funkci stejné formátování na více stránkách ASP.NET nebo v jiných webových aplikací ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="a25c4-202">Moving the formatting function out of the ASP.NET page s code-behind class is ideal if you plan on using the same formatting function in multiple ASP.NET pages or in other ASP.NET web applications.</span></span>

<span data-ttu-id="a25c4-203">K předvedení funkcí formátování, umožňují s mít informace o produktu, které zahrnují text [nákup UKONČEN] vedle názvu produktu s, pokud ji s zastaveny.</span><span class="sxs-lookup"><span data-stu-id="a25c4-203">To demonstrate formatting functions, let s have the product information include the text [DISCONTINUED] next to the product s name if it s discontinued.</span></span> <span data-ttu-id="a25c4-204">Navíc umožňují s mít zvýrazněná žlutý pokud cena ho s menší než 20,00 (jako jsme to udělali `ItemDataBound` příklad obslužná rutina události); Pokud cenu je 20,00 nebo vyšší, umožňují s nezobrazí skutečná cena, ale místo toho volat text, prosím cena uvozovky.</span><span class="sxs-lookup"><span data-stu-id="a25c4-204">Also, let s have the price highlighted yellow if it s less than $20.00 (as we did in the `ItemDataBound` event handler example); if the price is $20.00 or higher, let s not display the actual price, but instead the text, Please call for a price quote.</span></span> <span data-ttu-id="a25c4-205">Obrázek 4 ukazuje snímek obrazovky s produkty zobrazení seznamu pomocí těchto pravidel formátování použít.</span><span class="sxs-lookup"><span data-stu-id="a25c4-205">Figure 4 shows a screen shot of the products listing with these formatting rules applied.</span></span>


<span data-ttu-id="a25c4-206">[![Nákladné produktů ceny se nahradí Text, volejte uvozovky cena](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image11.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="a25c4-206">[![For Expensive Products, the Price is Replaced with the Text, Please call for a price quote](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image11.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image10.png)</span></span>

<span data-ttu-id="a25c4-207">**Obrázek 4**: nákladné produktů, ceny se nahradí Text, volejte cena uvozovky ([Kliknutím zobrazit obrázek v plné velikosti](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="a25c4-207">**Figure 4**: For Expensive Products, the Price is Replaced with the Text, Please call for a price quote ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image12.png))</span></span>


## <a name="step-1-create-the-formatting-functions"></a><span data-ttu-id="a25c4-208">Krok 1: Vytvoření formátování funkce</span><span class="sxs-lookup"><span data-stu-id="a25c4-208">Step 1: Create the Formatting Functions</span></span>

<span data-ttu-id="a25c4-209">V tomto příkladu budeme potřebovat dvě funkce formátování, ten, který zobrazí název produktu spolu s textem [nákup UKONČEN], v případě potřeby a jiné zobrazující zvýrazněná ceny, pokud ji s menší než 20,00 nebo text, volejte o cenovou nabídku, jinak hodnota.</span><span class="sxs-lookup"><span data-stu-id="a25c4-209">For this example we need two formatting functions, one that displays the product name along with the text [DISCONTINUED], if needed, and another that displays either a highlighted price if it s less than $20.00, or the text, Please call for a price quote otherwise.</span></span> <span data-ttu-id="a25c4-210">Umožní s vytvořte tyto funkce ve třídě kódu stránky s ASP.NET a pojmenujte je `DisplayProductNameAndDiscontinuedStatus` a `DisplayPrice`.</span><span class="sxs-lookup"><span data-stu-id="a25c4-210">Let s create these functions in the ASP.NET page s code-behind class and name them `DisplayProductNameAndDiscontinuedStatus` and `DisplayPrice`.</span></span> <span data-ttu-id="a25c4-211">Obě metody musíte vrátit k vykreslení jako řetězec HTML a obě musí být označen `Protected` (nebo `Public`) Chcete-li být volána z části ASP.NET stránky s deklarativní syntaxe.</span><span class="sxs-lookup"><span data-stu-id="a25c4-211">Both methods need to return the HTML to render as a string and both need to be marked `Protected` (or `Public`) in order to be invoked from the ASP.NET page s declarative syntax portion.</span></span> <span data-ttu-id="a25c4-212">Následuje kód pro tyto dvě metody:</span><span class="sxs-lookup"><span data-stu-id="a25c4-212">The code for these two methods follows:</span></span>


[!code-vb[Main](formatting-the-datalist-and-repeater-based-upon-data-vb/samples/sample3.vb)]

<span data-ttu-id="a25c4-213">Všimněte si, že `DisplayProductNameAndDiscontinuedStatus` metoda přijímá hodnoty `productName` a `discontinued` data polí jako skalárních hodnot, zatímco `DisplayPrice` metoda přijímá `ProductsRow` instance (ne `unitPrice` skalární hodnotu).</span><span class="sxs-lookup"><span data-stu-id="a25c4-213">Note that the `DisplayProductNameAndDiscontinuedStatus` method accepts the values of the `productName` and `discontinued` data fields as scalar values, whereas the `DisplayPrice` method accepts a `ProductsRow` instance (rather than a `unitPrice` scalar value).</span></span> <span data-ttu-id="a25c4-214">Bude fungovat buď přístup; ale pokud formátování funkce pracuje s skalárních hodnot, které mohou obsahovat databáze `NULL` hodnoty (například `UnitPrice`; ani `ProductName` ani `Discontinued` povolit `NULL` hodnoty), musí dát zvláštní pozor při zpracování těchto Skalární vstupy.</span><span class="sxs-lookup"><span data-stu-id="a25c4-214">Either approach will work; however, if the formatting function is working with scalar values that can contain database `NULL` values (such as `UnitPrice`; neither `ProductName` nor `Discontinued` allow `NULL` values), special care must be taken in handling these scalar inputs.</span></span>

<span data-ttu-id="a25c4-215">Konkrétně musí být vstupní parametr typu `Object` vzhledem k tomu může být hodnota příchozí `DBNull` instance namísto očekávaného datového typu.</span><span class="sxs-lookup"><span data-stu-id="a25c4-215">In particular, the input parameter must be of type `Object` since the incoming value might be a `DBNull` instance instead of the expected data type.</span></span> <span data-ttu-id="a25c4-216">Kromě toho musí být provedena kontrola k určení, zda je hodnota příchozí databáze `NULL` hodnotu.</span><span class="sxs-lookup"><span data-stu-id="a25c4-216">Additionally, a check must be made to determine whether or not the incoming value is a database `NULL` value.</span></span> <span data-ttu-id="a25c4-217">To znamená pokud jsme chtěli `DisplayPrice` metoda tak, aby přijímal cenu jako skalární hodnota, jsme d muset použít následující kód:</span><span class="sxs-lookup"><span data-stu-id="a25c4-217">That is, if we wanted the `DisplayPrice` method to accept the price as a scalar value, we d have to use the following code:</span></span>


[!code-vb[Main](formatting-the-datalist-and-repeater-based-upon-data-vb/samples/sample4.vb)]

<span data-ttu-id="a25c4-218">Všimněte si, že `unitPrice` vstupní parametr není typu `Object` a která byla upravena podmíněného příkaz pro zjištění, pokud `unitPrice` je `DBNull` nebo ne.</span><span class="sxs-lookup"><span data-stu-id="a25c4-218">Note that the `unitPrice` input parameter is of type `Object` and that the conditional statement has been modified to ascertain if `unitPrice` is `DBNull` or not.</span></span> <span data-ttu-id="a25c4-219">Kromě toho od `unitPrice` vstupní parametr, je předaná jako `Object`, musí být převedena na desítkovou hodnotu.</span><span class="sxs-lookup"><span data-stu-id="a25c4-219">Furthermore, since the `unitPrice` input parameter is passed in as an `Object`, it must be cast to a decimal value.</span></span>

## <a name="step-2-calling-the-formatting-function-from-the-datalist-s-itemtemplate"></a><span data-ttu-id="a25c4-220">Krok 2: Volání funkce formátování z vlastnosti s ItemTemplate</span><span class="sxs-lookup"><span data-stu-id="a25c4-220">Step 2: Calling the Formatting Function from the DataList s ItemTemplate</span></span>

<span data-ttu-id="a25c4-221">S formátování funkce přidané do Naše třída kódu stránky s ASP.NET, zbývá k vyvolání těchto formátování funkce z DataList s `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="a25c4-221">With the formatting functions added to our ASP.NET page s code-behind class, all that remains is to invoke these formatting functions from the DataList s `ItemTemplate`.</span></span> <span data-ttu-id="a25c4-222">K volání funkce formátování ze šablony, umístíte volání funkce v rámci datové vazby syntaxe:</span><span class="sxs-lookup"><span data-stu-id="a25c4-222">To call a formatting function from a template, place the function call within the databinding syntax:</span></span>


[!code-aspx[Main](formatting-the-datalist-and-repeater-based-upon-data-vb/samples/sample5.aspx)]

<span data-ttu-id="a25c4-223">V DataList s `ItemTemplate` `ProductNameLabel` ovládací prvek popisek webu aktuálně zobrazuje název produktu s přiřazením jeho `Text` vlastnost výsledek z `<%# Eval("ProductName") %>`.</span><span class="sxs-lookup"><span data-stu-id="a25c4-223">In the DataList s `ItemTemplate` the `ProductNameLabel` Label Web control currently displays the product s name by assigning its `Text` property the result of `<%# Eval("ProductName") %>`.</span></span> <span data-ttu-id="a25c4-224">Aby bylo možné používat, se zobrazí název a text [nákup UKONČEN], v případě potřeby, aktualizujte deklarativní syntaxi tak, aby místo toho přiřadí `Text` hodnotu vlastnosti o `DisplayProductNameAndDiscontinuedStatus` metoda.</span><span class="sxs-lookup"><span data-stu-id="a25c4-224">In order to have it display the name plus the text [DISCONTINUED], if needed, update the declarative syntax so that it instead assigns the `Text` property the value of the `DisplayProductNameAndDiscontinuedStatus` method.</span></span> <span data-ttu-id="a25c4-225">Pokud to uděláte, jsme musí předat název produktu s a – starší formáty hodnot pomocí `Eval("columnName")` syntaxe.</span><span class="sxs-lookup"><span data-stu-id="a25c4-225">When doing so, we must pass in the product s name and discontinued values using the `Eval("columnName")` syntax.</span></span> <span data-ttu-id="a25c4-226">`Eval`Vrátí hodnotu typu `Object`, ale `DisplayProductNameAndDiscontinuedStatus` metoda očekává vstupní parametry typu `String` a `Boolean`; proto jsme hodnot vrácených přetypovat `Eval` metodu pro typy očekávané vstupní parametr, například takto:</span><span class="sxs-lookup"><span data-stu-id="a25c4-226">`Eval` returns a value of type `Object`, but the `DisplayProductNameAndDiscontinuedStatus` method expects input parameters of type `String` and `Boolean`; therefore, we must cast the values returned by the `Eval` method to the expected input parameter types, like so:</span></span>


[!code-aspx[Main](formatting-the-datalist-and-repeater-based-upon-data-vb/samples/sample6.aspx)]

<span data-ttu-id="a25c4-227">Chcete-li zobrazit cenu, můžeme jednoduše nastavit `UnitPriceLabel` štítek s `Text` vlastnost na hodnotu vrácenou `DisplayPrice` metoda, stejně jako jsme to udělali pro zobrazení názvu produktu s a [ZASTAVÍ] text.</span><span class="sxs-lookup"><span data-stu-id="a25c4-227">To display the price, we can simply set the `UnitPriceLabel` Label s `Text` property to the value returned by the `DisplayPrice` method, just like we did for displaying the product s name and [DISCONTINUED] text.</span></span> <span data-ttu-id="a25c4-228">Ale namísto předávání `UnitPrice` jako skalární vstupní parametr jsme místo předat celý `ProductsRow` instance:</span><span class="sxs-lookup"><span data-stu-id="a25c4-228">However, instead of passing in the `UnitPrice` as a scalar input parameter, we instead pass in the entire `ProductsRow` instance:</span></span>


[!code-aspx[Main](formatting-the-datalist-and-repeater-based-upon-data-vb/samples/sample7.aspx)]

<span data-ttu-id="a25c4-229">Pomocí volání formátování funkce zavedené pozorně naše postup zobrazit v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="a25c4-229">With the calls to the formatting functions in place, take a moment to view our progress in a browser.</span></span> <span data-ttu-id="a25c4-230">Obrazovce měla vypadat podobně jako obrázek 5 – starší formáty produkty, včetně textu [nákup UKONČEN] a tyto produkty výpočet nákladů více než 20,00 s jejich cena nahrazen textem prosím volání cena uvozovky.</span><span class="sxs-lookup"><span data-stu-id="a25c4-230">Your screen should look similar to Figure 5, with the discontinued products including the text [DISCONTINUED] and those products costing more than $20.00 having their price replaced with the text Please call for a price quote .</span></span>


<span data-ttu-id="a25c4-231">[![Nákladné produktů ceny se nahradí Text, volejte uvozovky cena](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image14.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="a25c4-231">[![For Expensive Products, the Price is Replaced with the Text, Please call for a price quote](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image14.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image13.png)</span></span>

<span data-ttu-id="a25c4-232">**Obrázek 5**: nákladné produktů, ceny se nahradí Text, volejte cena uvozovky ([Kliknutím zobrazit obrázek v plné velikosti](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="a25c4-232">**Figure 5**: For Expensive Products, the Price is Replaced with the Text, Please call for a price quote ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image15.png))</span></span>


## <a name="summary"></a><span data-ttu-id="a25c4-233">Souhrn</span><span class="sxs-lookup"><span data-stu-id="a25c4-233">Summary</span></span>

<span data-ttu-id="a25c4-234">Formátování obsah ovládacího prvku DataList nebo opakovače na základě dat, lze provést pomocí dvě techniky.</span><span class="sxs-lookup"><span data-stu-id="a25c4-234">Formatting the contents of a DataList or Repeater control based upon the data can be accomplished using two techniques.</span></span> <span data-ttu-id="a25c4-235">První způsob je vytvoření obslužné rutiny události pro `ItemDataBound` událost, která aktivuje jako jednotlivé záznamy ve zdroji dat je vázána na nový `DataListItem` nebo `RepeaterItem`.</span><span class="sxs-lookup"><span data-stu-id="a25c4-235">The first technique is to create an event handler for the `ItemDataBound` event, which fires as each record in the data source is bound to a new `DataListItem` or `RepeaterItem`.</span></span> <span data-ttu-id="a25c4-236">V `ItemDataBound` obslužná rutina události, může být prověřen aktuální položka s data a pak formátování lze použít pro obsah šablony, nebo pro `DataListItem` s na celý samotnou položku.</span><span class="sxs-lookup"><span data-stu-id="a25c4-236">In the `ItemDataBound` event handler, the current item s data can be examined and then formatting can be applied to the contents of the template or, for `DataListItem` s, to the entire item itself.</span></span>

<span data-ttu-id="a25c4-237">Vlastní formátování Alternativně může být dosaženo pomocí formátování funkce.</span><span class="sxs-lookup"><span data-stu-id="a25c4-237">Alternatively, custom formatting can be realized through formatting functions.</span></span> <span data-ttu-id="a25c4-238">Formátování funkce je metoda, která se může vyvolat z prvku DataList nebo opakovače s šablony, které vrátí kód HTML pro vydávání na příslušné místo.</span><span class="sxs-lookup"><span data-stu-id="a25c4-238">A formatting function is a method that can be invoked from the DataList or Repeater s templates that returns the HTML to emit in its place.</span></span> <span data-ttu-id="a25c4-239">Často vrácené funkcí formátování HTML je určen podle hodnoty je svázán s aktuální položkou.</span><span class="sxs-lookup"><span data-stu-id="a25c4-239">Often, the HTML returned by a formatting function is determined by the values being bound to the current item.</span></span> <span data-ttu-id="a25c4-240">Tyto hodnoty mohou být předány do formátování funkce, jako skalárních hodnot nebo pomocí předávání celý objekt je vázána na položku (například `ProductsRow` instance).</span><span class="sxs-lookup"><span data-stu-id="a25c4-240">These values can be passed into the formatting function, either as scalar values or by passing in the entire object being bound to the item (such as the `ProductsRow` instance).</span></span>

<span data-ttu-id="a25c4-241">Radostí programování!</span><span class="sxs-lookup"><span data-stu-id="a25c4-241">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="a25c4-242">O autorovi</span><span class="sxs-lookup"><span data-stu-id="a25c4-242">About the Author</span></span>

<span data-ttu-id="a25c4-243">[Scott Meisnerová](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor sedm ASP/ASP.NET knih a zakladatele z [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracuje s technologií Microsoft Web od 1998.</span><span class="sxs-lookup"><span data-stu-id="a25c4-243">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="a25c4-244">Scott funguje jako nezávislé poradce, trainer a zapisovače.</span><span class="sxs-lookup"><span data-stu-id="a25c4-244">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="a25c4-245">Jeho nejnovější seznam k [ *Edice nakladatelství Sams naučit sami technologii ASP.NET 2.0 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="a25c4-245">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="a25c4-246">Dosažitelný v [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) nebo prostřednictvím svého blogu, který najdete na [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="a25c4-246">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="a25c4-247">Zvláštní poděkování</span><span class="sxs-lookup"><span data-stu-id="a25c4-247">Special Thanks To</span></span>

<span data-ttu-id="a25c4-248">Tento kurz řady byla zkontrolovány uživatelem mnoho užitečné kontrolorů.</span><span class="sxs-lookup"><span data-stu-id="a25c4-248">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="a25c4-249">Vést kontroloři v tomto kurzu se Yaakov Ellis Randy Schmidt a Liz Shulok.</span><span class="sxs-lookup"><span data-stu-id="a25c4-249">Lead reviewers for this tutorial were Yaakov Ellis, Randy Schmidt, and Liz Shulok.</span></span> <span data-ttu-id="a25c4-250">Kontrola Moje nadcházející články MSDN máte zájem?</span><span class="sxs-lookup"><span data-stu-id="a25c4-250">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="a25c4-251">Pokud ano, vyřaďte mi řádek v [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="a25c4-251">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="a25c4-252">[Předchozí](displaying-data-with-the-datalist-and-repeater-controls-vb.md)
[další](showing-multiple-records-per-row-with-the-datalist-control-vb.md)</span><span class="sxs-lookup"><span data-stu-id="a25c4-252">[Previous](displaying-data-with-the-datalist-and-repeater-controls-vb.md)
[Next](showing-multiple-records-per-row-with-the-datalist-control-vb.md)</span></span>
