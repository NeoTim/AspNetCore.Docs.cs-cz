---
uid: web-forms/overview/data-access/working-with-binary-files/displaying-binary-data-in-the-data-web-controls-cs
title: "Ovládací prvky zobrazení binární Data v dat webu (C#) | Microsoft Docs"
author: rick-anderson
description: "V tomto kurzu podíváme na možnosti pro binární data k dispozici na webové stránce, včetně zobrazení souboru bitové kopie a poskytování odkaz 'Stažení' f..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 03/27/2007
ms.topic: article
ms.assetid: 5cbeb9f8-5f92-4ba8-87ae-0b4d460ae6d4
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/working-with-binary-files/displaying-binary-data-in-the-data-web-controls-cs
msc.type: authoredcontent
ms.openlocfilehash: d66079f784792a2514eefabf57f70826aab5dcf1
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 01/24/2018
---
<a name="displaying-binary-data-in-the-data-web-controls-c"></a><span data-ttu-id="ecebc-103">Zobrazení binární Data v ovládací prvky webového dat (C#)</span><span class="sxs-lookup"><span data-stu-id="ecebc-103">Displaying Binary Data in the Data Web Controls (C#)</span></span>
====================
<span data-ttu-id="ecebc-104">podle [Scott Meisnerová](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="ecebc-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="ecebc-105">[Stáhněte si ukázkovou aplikaci](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_55_CS.exe) nebo [stáhnout PDF](displaying-binary-data-in-the-data-web-controls-cs/_static/datatutorial55cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="ecebc-105">[Download Sample App](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_55_CS.exe) or [Download PDF](displaying-binary-data-in-the-data-web-controls-cs/_static/datatutorial55cs1.pdf)</span></span>

> <span data-ttu-id="ecebc-106">V tomto kurzu podíváme na možnosti pro binární data k dispozici na webové stránce, včetně zobrazení souboru bitové kopie a poskytování odkaz 'Stažení' pro soubor PDF.</span><span class="sxs-lookup"><span data-stu-id="ecebc-106">In this tutorial we look at the options to present binary data on a Web page, including the display of an image file and the provision of a 'Download' link for a PDF file.</span></span>


## <a name="introduction"></a><span data-ttu-id="ecebc-107">Úvod</span><span class="sxs-lookup"><span data-stu-id="ecebc-107">Introduction</span></span>

<span data-ttu-id="ecebc-108">V předchozím kurzu jsme prozkoumali dvě techniky pro binární data možné přidružit aplikaci s základní datový model a použít ovládacího prvku odesílání souborů při odpovědích k ukládání souborů z prohlížeče do systému souborů webového serveru s.</span><span class="sxs-lookup"><span data-stu-id="ecebc-108">In the preceding tutorial we explored the two techniques for associating binary data with an application s underlying data model and used the FileUpload control to upload files from a browser to the web server s file system.</span></span> <span data-ttu-id="ecebc-109">Jsme jste ještě chcete zjistit, jak přidružit nahrané binární data v datovém modelu.</span><span class="sxs-lookup"><span data-stu-id="ecebc-109">We ve yet to see how to associate the uploaded binary data with the data model.</span></span> <span data-ttu-id="ecebc-110">To znamená po soubor má byl nahrán a uložit do systému souborů, cesta k souboru musí být uložen v databázi záznamu.</span><span class="sxs-lookup"><span data-stu-id="ecebc-110">That is, after a file has been uploaded and saved to the file system, a path to the file must be stored in the appropriate database record.</span></span> <span data-ttu-id="ecebc-111">Pokud se data ukládají přímo do databáze, pak nahrané binární data nemusí být uloženy do systému souborů, ale musí být vloženy do databáze.</span><span class="sxs-lookup"><span data-stu-id="ecebc-111">If the data is being stored directly in the database, then the uploaded binary data need not be saved to the file system, but must be injected into the database.</span></span>

<span data-ttu-id="ecebc-112">Předtím, než se podíváme na to přidružením data v datovém modelu, ale umožní s první pohled na to, jak zajistit binární data pro koncového uživatele.</span><span class="sxs-lookup"><span data-stu-id="ecebc-112">Before we look at associating the data with the data model, though, let s first look at how to provide the binary data to the end user.</span></span> <span data-ttu-id="ecebc-113">Prezentace textová data je dostatečně jednoduchá, ale jak by měla předkládané binární data?</span><span class="sxs-lookup"><span data-stu-id="ecebc-113">Presenting text data is simple enough, but how should binary data be presented?</span></span> <span data-ttu-id="ecebc-114">To závisí, samozřejmě na typ binární data.</span><span class="sxs-lookup"><span data-stu-id="ecebc-114">It depends, of course, on the type of binary data.</span></span> <span data-ttu-id="ecebc-115">Pro Image chceme pravděpodobně umožňuje zobrazit obrázek; pro soubory PDF je pravděpodobně vhodnější Microsoft Word dokumenty, soubory ZIP a dalších typů binárních dat, poskytuje odkaz ke stažení.</span><span class="sxs-lookup"><span data-stu-id="ecebc-115">For images, we likely want to display the image; for PDFs, Microsoft Word documents, ZIP files, and other types of binary data, providing a Download link is probably more appropriate.</span></span>

<span data-ttu-id="ecebc-116">V tomto kurzu se podíváme na to, jak k dispozici binární data souběžně s jeho přidružené textová data pomocí dat webové ovládací prvky jako GridView a DetailsView.</span><span class="sxs-lookup"><span data-stu-id="ecebc-116">In this tutorial we will look at how to present the binary data alongside its associated text data using data Web controls like the GridView and DetailsView.</span></span> <span data-ttu-id="ecebc-117">V dalším kurzu jsme budete zapněte naše pozornost přidružení nahrávaný soubor s databází.</span><span class="sxs-lookup"><span data-stu-id="ecebc-117">In the next tutorial we'll turn our attention to associating an uploaded file with the database.</span></span>

## <a name="step-1-providingbrochurepathvalues"></a><span data-ttu-id="ecebc-118">Krok 1: Poskytnutí`BrochurePath`hodnoty</span><span class="sxs-lookup"><span data-stu-id="ecebc-118">Step 1: Providing`BrochurePath`Values</span></span>

<span data-ttu-id="ecebc-119">`Picture` Sloupec v `Categories` tabulka již obsahuje binární data pro různé kategorie Image.</span><span class="sxs-lookup"><span data-stu-id="ecebc-119">The `Picture` column in the `Categories` table already contains binary data for the various category images.</span></span> <span data-ttu-id="ecebc-120">Konkrétně `Picture` sloupec pro každý záznam obsahuje binární obsah, nízké kvality se 16 barev rastrového obrázku.</span><span class="sxs-lookup"><span data-stu-id="ecebc-120">Specifically, the `Picture` column for each record holds the binary contents of a grainy, low-quality, 16-color bitmap image.</span></span> <span data-ttu-id="ecebc-121">Každé kategorie bitové kopie je 172 pixelů široké a 120 pixelů vysoký a odebírá zhruba 11 KB.</span><span class="sxs-lookup"><span data-stu-id="ecebc-121">Each category image is 172 pixels wide and 120 pixels tall and consumes roughly 11 KB.</span></span> <span data-ttu-id="ecebc-122">Jaké s další, binární obsah `Picture` sloupec obsahuje 78 bajtů [OLE](http://en.wikipedia.org/wiki/Object_Linking_and_Embedding) hlavičky, která musí se odstraní a před zobrazením bitovou kopii.</span><span class="sxs-lookup"><span data-stu-id="ecebc-122">What s more, the binary content in the `Picture` column includes a 78-byte [OLE](http://en.wikipedia.org/wiki/Object_Linking_and_Embedding) header that must be stripped before displaying the image.</span></span> <span data-ttu-id="ecebc-123">Tyto informace hlavičky nachází, protože databáze Northwind má jeho kořeny v aplikaci Microsoft Access.</span><span class="sxs-lookup"><span data-stu-id="ecebc-123">This header information is present because the Northwind database has its roots in Microsoft Access.</span></span> <span data-ttu-id="ecebc-124">Binární data v přístup, jsou uložena pomocí datového typu OLE objekt, který se přiřadí k této hlavičce.</span><span class="sxs-lookup"><span data-stu-id="ecebc-124">In Access, binary data is stored using the OLE Object data type, which tacks on this header.</span></span> <span data-ttu-id="ecebc-125">Prozatím jsme zobrazí postup odebrání hlaviček z těchto bitových kopií nízké kvality, aby bylo možné zobrazit na obrázku.</span><span class="sxs-lookup"><span data-stu-id="ecebc-125">For now, we'll see how to strip the headers from these low-quality images in order to display the picture.</span></span> <span data-ttu-id="ecebc-126">V budoucích kurzu budete využijeme rozhraní pro aktualizace kategorie s `Picture` sloupce a nahraďte tyto rastrové obrázky, které pomocí OLE hlavičky ekvivalentní obrázků JPG bez nepotřebné hlavičky OLE.</span><span class="sxs-lookup"><span data-stu-id="ecebc-126">In a future tutorial we'll build an interface for updating a category s `Picture` column and replace these bitmap images that use OLE headers with equivalent JPG images without the unnecessary OLE headers.</span></span>

<span data-ttu-id="ecebc-127">V předchozím kurzu jsme viděli, jak pomocí ovládacího prvku odesílání souborů při odpovědích.</span><span class="sxs-lookup"><span data-stu-id="ecebc-127">In the preceding tutorial we saw how to use the FileUpload control.</span></span> <span data-ttu-id="ecebc-128">Proto můžete přejít k tématu a přidat soubory – příručka k systému souborů webového serveru s.</span><span class="sxs-lookup"><span data-stu-id="ecebc-128">Therefore, you can go ahead and add brochure files to the web server s file system.</span></span> <span data-ttu-id="ecebc-129">To uděláte, ale neaktualizuje `BrochurePath` sloupec v `Categories` tabulky.</span><span class="sxs-lookup"><span data-stu-id="ecebc-129">Doing so, however, does not update the `BrochurePath` column in the `Categories` table.</span></span> <span data-ttu-id="ecebc-130">V dalším kurzu ukážeme, jak to provést, ale nyní je nutné ručně zadat hodnoty pro tento sloupec.</span><span class="sxs-lookup"><span data-stu-id="ecebc-130">In the next tutorial we'll see how to accomplish this, but for now we need to manually provide values for this column.</span></span>

<span data-ttu-id="ecebc-131">V tomto kurzu s ke stažení najdete sedm – příručka soubory PDF v `~/Brochures` složky, jednu pro každou kategorii kromě ryby.</span><span class="sxs-lookup"><span data-stu-id="ecebc-131">In this tutorial s download you'll find seven PDF brochure files in the `~/Brochures` folder, one for each of the categories except Seafood.</span></span> <span data-ttu-id="ecebc-132">I záměrně vynechán, přidávání ryby – Příručka pro ukazují, jak zpracovávat scénáře, kde není všechny záznamy přidruženy binární data.</span><span class="sxs-lookup"><span data-stu-id="ecebc-132">I purposefully omitted adding a Seafood brochure to illustrate how to handle scenarios where not all records have associated binary data.</span></span> <span data-ttu-id="ecebc-133">Chcete-li aktualizovat `Categories` tabulky s těmito hodnotami, klikněte pravým tlačítkem na `Categories` uzlu z Průzkumníka serveru a zvolte Zobrazit Data tabulky.</span><span class="sxs-lookup"><span data-stu-id="ecebc-133">To update the `Categories` table with these values, right-click on the `Categories` node from Server Explorer and choose Show Table Data.</span></span> <span data-ttu-id="ecebc-134">Potom zadejte virtuální cesty k souborům – Příručka pro každou kategorii, která má – příručka, jak ukazuje obrázek 1.</span><span class="sxs-lookup"><span data-stu-id="ecebc-134">Then, enter the virtual paths to the brochure files for each category that has a brochure, as Figure 1 shows.</span></span> <span data-ttu-id="ecebc-135">Vzhledem k tomu, že neexistuje žádná – Příručka pro kategorii ryby, nechte jeho `BrochurePath` hodnota sloupce s jako `NULL`.</span><span class="sxs-lookup"><span data-stu-id="ecebc-135">Since there is no brochure for the Seafood category, leave its `BrochurePath` column s value as `NULL`.</span></span>


<span data-ttu-id="ecebc-136">[![Ručně zadejte hodnoty pro sloupec BrochurePath tabulky s kategorií](displaying-binary-data-in-the-data-web-controls-cs/_static/image1.gif)](displaying-binary-data-in-the-data-web-controls-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="ecebc-136">[![Manually Enter the Values for the Categories Table s BrochurePath Column](displaying-binary-data-in-the-data-web-controls-cs/_static/image1.gif)](displaying-binary-data-in-the-data-web-controls-cs/_static/image1.png)</span></span>

<span data-ttu-id="ecebc-137">**Obrázek 1**: ručně zadejte hodnoty položek `Categories` tabulky s `BrochurePath` sloupce ([Kliknutím zobrazit obrázek v plné velikosti](displaying-binary-data-in-the-data-web-controls-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="ecebc-137">**Figure 1**: Manually Enter the Values for the `Categories` Table s `BrochurePath` Column ([Click to view full-size image](displaying-binary-data-in-the-data-web-controls-cs/_static/image2.png))</span></span>


## <a name="step-2-providing-a-download-link-for-the-brochures-in-a-gridview"></a><span data-ttu-id="ecebc-138">Krok 2: Poskytuje odkaz ke stažení pro brožury v GridView</span><span class="sxs-lookup"><span data-stu-id="ecebc-138">Step 2: Providing a Download Link for the Brochures in a GridView</span></span>

<span data-ttu-id="ecebc-139">S `BrochurePath` zadané hodnoty `Categories` tabulky, jsme re připravené k vytvoření GridView, který uvádí každou kategorii spolu s odkazem ke stažení – příručka kategorie s.</span><span class="sxs-lookup"><span data-stu-id="ecebc-139">With the `BrochurePath` values provided for the `Categories` table, we re ready to create a GridView that lists each category along with a link to download the category s brochure.</span></span> <span data-ttu-id="ecebc-140">V kroku 4 rozšiřujeme Tato rutina GridView také zobrazíte kategorie s bitové kopie.</span><span class="sxs-lookup"><span data-stu-id="ecebc-140">In Step 4 we'll extend this GridView to also display the category s image.</span></span>

<span data-ttu-id="ecebc-141">Začněte tím, že přetáhnete GridView z panelu nástrojů na Návrhář `DisplayOrDownloadData.aspx` stránku `BinaryData` složky.</span><span class="sxs-lookup"><span data-stu-id="ecebc-141">Start by dragging a GridView from the Toolbox onto the Designer of the `DisplayOrDownloadData.aspx` page in the `BinaryData` folder.</span></span> <span data-ttu-id="ecebc-142">Nastavit GridView s `ID` k `Categories` a pomocí inteligentních značek GridView s vyberte pro vytvoření vazby ke zdroji dat nové.</span><span class="sxs-lookup"><span data-stu-id="ecebc-142">Set the GridView s `ID` to `Categories` and through the GridView s smart tag, choose to bind it to a new data source.</span></span> <span data-ttu-id="ecebc-143">Konkrétně navázat jej ObjectDataSource s názvem `CategoriesDataSource` , načte data pomocí `CategoriesBLL` objekt s `GetCategories()` metoda.</span><span class="sxs-lookup"><span data-stu-id="ecebc-143">Specifically, bind it to an ObjectDataSource named `CategoriesDataSource` that retrieves data using the `CategoriesBLL` object s `GetCategories()` method.</span></span>


<span data-ttu-id="ecebc-144">[![Vytvořit nový ObjectDataSource s názvem CategoriesDataSource](displaying-binary-data-in-the-data-web-controls-cs/_static/image2.gif)](displaying-binary-data-in-the-data-web-controls-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="ecebc-144">[![Create a New ObjectDataSource Named CategoriesDataSource](displaying-binary-data-in-the-data-web-controls-cs/_static/image2.gif)](displaying-binary-data-in-the-data-web-controls-cs/_static/image3.png)</span></span>

<span data-ttu-id="ecebc-145">**Obrázek 2**: vytvoření nové ObjectDataSource s názvem `CategoriesDataSource` ([Kliknutím zobrazit obrázek v plné velikosti](displaying-binary-data-in-the-data-web-controls-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="ecebc-145">**Figure 2**: Create a New ObjectDataSource Named `CategoriesDataSource` ([Click to view full-size image](displaying-binary-data-in-the-data-web-controls-cs/_static/image4.png))</span></span>


<span data-ttu-id="ecebc-146">[![Konfigurace ObjectDataSource použití třídy CategoriesBLL](displaying-binary-data-in-the-data-web-controls-cs/_static/image3.gif)](displaying-binary-data-in-the-data-web-controls-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="ecebc-146">[![Configure the ObjectDataSource to Use the CategoriesBLL Class](displaying-binary-data-in-the-data-web-controls-cs/_static/image3.gif)](displaying-binary-data-in-the-data-web-controls-cs/_static/image5.png)</span></span>

<span data-ttu-id="ecebc-147">**Obrázek 3**: Konfigurace ObjectDataSource pro použití `CategoriesBLL` – třída ([Kliknutím zobrazit obrázek v plné velikosti](displaying-binary-data-in-the-data-web-controls-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="ecebc-147">**Figure 3**: Configure the ObjectDataSource to Use the `CategoriesBLL` Class ([Click to view full-size image](displaying-binary-data-in-the-data-web-controls-cs/_static/image6.png))</span></span>


<span data-ttu-id="ecebc-148">[![Načtení seznamu kategorií metodou GetCategories()](displaying-binary-data-in-the-data-web-controls-cs/_static/image4.gif)](displaying-binary-data-in-the-data-web-controls-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="ecebc-148">[![Retrieve the List of Categories Using the GetCategories() Method](displaying-binary-data-in-the-data-web-controls-cs/_static/image4.gif)](displaying-binary-data-in-the-data-web-controls-cs/_static/image7.png)</span></span>

<span data-ttu-id="ecebc-149">**Obrázek 4**: načtení seznamu kategorií pomocí `GetCategories()` – metoda ([Kliknutím zobrazit obrázek v plné velikosti](displaying-binary-data-in-the-data-web-controls-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="ecebc-149">**Figure 4**: Retrieve the List of Categories Using the `GetCategories()` Method ([Click to view full-size image](displaying-binary-data-in-the-data-web-controls-cs/_static/image8.png))</span></span>


<span data-ttu-id="ecebc-150">Po dokončení průvodce Konfigurace zdroje dat, Visual Studio automaticky přidá BoundField k `Categories` GridView pro `CategoryID`, `CategoryName`, `Description`, `NumberOfProducts`, a `BrochurePath` `DataColumn` s.</span><span class="sxs-lookup"><span data-stu-id="ecebc-150">After completing the Configure Data Source wizard, Visual Studio will automatically add a BoundField to the `Categories` GridView for the `CategoryID`, `CategoryName`, `Description`, `NumberOfProducts`, and `BrochurePath` `DataColumn` s.</span></span> <span data-ttu-id="ecebc-151">Pokračujte a odebrat `NumberOfProducts` BoundField od `GetCategories()` metoda s dotazu není načtení těchto informací.</span><span class="sxs-lookup"><span data-stu-id="ecebc-151">Go ahead and remove the `NumberOfProducts` BoundField since the `GetCategories()` method s query does not retrieve this information.</span></span> <span data-ttu-id="ecebc-152">K odebrání `CategoryID` BoundField a přejmenujte `CategoryName` a `BrochurePath` BoundFields `HeaderText` vlastností kategorie a – příručka, v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="ecebc-152">Also remove the `CategoryID` BoundField and rename the `CategoryName` and `BrochurePath` BoundFields `HeaderText` properties to Category and Brochure, respectively.</span></span> <span data-ttu-id="ecebc-153">Po provedení těchto změn, vaše GridView a ObjectDataSource s deklarativní značek by měl vypadat následovně:</span><span class="sxs-lookup"><span data-stu-id="ecebc-153">After making these changes, your GridView and ObjectDataSource s declarative markup should look like the following:</span></span>


[!code-aspx[Main](displaying-binary-data-in-the-data-web-controls-cs/samples/sample1.aspx)]

<span data-ttu-id="ecebc-154">Zobrazit tuto stránku prostřednictvím prohlížeče (viz obrázek 5).</span><span class="sxs-lookup"><span data-stu-id="ecebc-154">View this page through a browser (see Figure 5).</span></span> <span data-ttu-id="ecebc-155">Každou kategorii osm je uveden.</span><span class="sxs-lookup"><span data-stu-id="ecebc-155">Each of the eight categories is listed.</span></span> <span data-ttu-id="ecebc-156">Sedm kategorií s `BrochurePath` hodnoty mají `BrochurePath` hodnoty zobrazené v příslušných BoundField.</span><span class="sxs-lookup"><span data-stu-id="ecebc-156">The seven categories with `BrochurePath` values have the `BrochurePath` value displayed in the respective BoundField.</span></span> <span data-ttu-id="ecebc-157">Ryby, který má `NULL` hodnotu pro jeho `BrochurePath`, zobrazí prázdné buňky.</span><span class="sxs-lookup"><span data-stu-id="ecebc-157">Seafood, which has a `NULL` value for its `BrochurePath`, displays an empty cell.</span></span>


<span data-ttu-id="ecebc-158">[![Každá kategorie s název, popis a hodnotu BrochurePath je uveden.](displaying-binary-data-in-the-data-web-controls-cs/_static/image5.gif)](displaying-binary-data-in-the-data-web-controls-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="ecebc-158">[![Each Category s Name, Description, and BrochurePath Value is Listed](displaying-binary-data-in-the-data-web-controls-cs/_static/image5.gif)](displaying-binary-data-in-the-data-web-controls-cs/_static/image9.png)</span></span>

<span data-ttu-id="ecebc-159">**Obrázek 5**: každou kategorii s název, popis a `BrochurePath` je uvedena hodnota ([Kliknutím zobrazit obrázek v plné velikosti](displaying-binary-data-in-the-data-web-controls-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="ecebc-159">**Figure 5**: Each Category s Name, Description, and `BrochurePath` Value is Listed ([Click to view full-size image](displaying-binary-data-in-the-data-web-controls-cs/_static/image10.png))</span></span>


<span data-ttu-id="ecebc-160">Místo zobrazení textu `BrochurePath` sloupce, chceme vytvořit odkaz – příručka.</span><span class="sxs-lookup"><span data-stu-id="ecebc-160">Rather than displaying the text of the `BrochurePath` column, we want to create a link to the brochure.</span></span> <span data-ttu-id="ecebc-161">Chcete-li dosáhnout, odeberte `BrochurePath` BoundField a nahraďte ji metodou HyperLinkField.</span><span class="sxs-lookup"><span data-stu-id="ecebc-161">To accomplish this, remove the `BrochurePath` BoundField and replace it with a HyperLinkField.</span></span> <span data-ttu-id="ecebc-162">Nastavit nový s HyperLinkField `HeaderText` vlastnost – příručka, jeho `Text` vlastnost – příručka zobrazení a jeho `DataNavigateUrlFields` vlastnost `BrochurePath`.</span><span class="sxs-lookup"><span data-stu-id="ecebc-162">Set the new HyperLinkField s `HeaderText` property to Brochure, its `Text` property to View Brochure, and its `DataNavigateUrlFields` property to `BrochurePath`.</span></span>


![Přidání HyperLinkField pro BrochurePath](displaying-binary-data-in-the-data-web-controls-cs/_static/image6.gif)

<span data-ttu-id="ecebc-164">**Obrázek 6**: přidejte HyperLinkField pro`BrochurePath`</span><span class="sxs-lookup"><span data-stu-id="ecebc-164">**Figure 6**: Add a HyperLinkField for `BrochurePath`</span></span>


<span data-ttu-id="ecebc-165">Sloupec odkazů se přidá do GridView, jak je vidět na obrázku 7.</span><span class="sxs-lookup"><span data-stu-id="ecebc-165">This will add a column of links to the GridView, as Figure 7 shows.</span></span> <span data-ttu-id="ecebc-166">Kliknutím na odkaz zobrazit – příručka se přímo v prohlížeči zobrazit PDF nebo vyzvat uživatele k stažení souboru, v závislosti na tom, jestli je nainstalovaná čtečka PDF a prohlížeč s nastavení.</span><span class="sxs-lookup"><span data-stu-id="ecebc-166">Clicking a View Brochure link will either display the PDF directly in the browser or prompt the user to download the file, depending on whether a PDF reader is installed and the browser s settings.</span></span>


<span data-ttu-id="ecebc-167">[![– Příručka kategorie s lze zobrazit kliknutím na odkaz zobrazit – příručka](displaying-binary-data-in-the-data-web-controls-cs/_static/image7.gif)](displaying-binary-data-in-the-data-web-controls-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="ecebc-167">[![A Category s Brochure Can Be Viewed by Clicking the View Brochure Link](displaying-binary-data-in-the-data-web-controls-cs/_static/image7.gif)](displaying-binary-data-in-the-data-web-controls-cs/_static/image11.png)</span></span>

<span data-ttu-id="ecebc-168">**Obrázek 7**: kategorie A s – příručka lze zobrazit kliknutím na odkaz zobrazit – příručka ([Kliknutím zobrazit obrázek v plné velikosti](displaying-binary-data-in-the-data-web-controls-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="ecebc-168">**Figure 7**: A Category s Brochure Can Be Viewed by Clicking the View Brochure Link ([Click to view full-size image](displaying-binary-data-in-the-data-web-controls-cs/_static/image12.png))</span></span>


<span data-ttu-id="ecebc-169">[![Kategorie s PDF – příručka se zobrazí.](displaying-binary-data-in-the-data-web-controls-cs/_static/image8.gif)](displaying-binary-data-in-the-data-web-controls-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="ecebc-169">[![The Category s Brochure PDF is Displayed](displaying-binary-data-in-the-data-web-controls-cs/_static/image8.gif)](displaying-binary-data-in-the-data-web-controls-cs/_static/image13.png)</span></span>

<span data-ttu-id="ecebc-170">**Obrázek 8**: kategorii s PDF – příručka se zobrazí ([Kliknutím zobrazit obrázek v plné velikosti](displaying-binary-data-in-the-data-web-controls-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="ecebc-170">**Figure 8**: The Category s Brochure PDF is Displayed ([Click to view full-size image](displaying-binary-data-in-the-data-web-controls-cs/_static/image14.png))</span></span>


## <a name="hiding-the-view-brochure-text-for-categories-without-a-brochure"></a><span data-ttu-id="ecebc-171">Skrývání textu – příručka zobrazení kategorií bez – příručka</span><span class="sxs-lookup"><span data-stu-id="ecebc-171">Hiding the View Brochure Text for Categories Without a Brochure</span></span>

<span data-ttu-id="ecebc-172">Jak je vidět na obrázku 7, `BrochurePath` HyperLinkField zobrazí jeho `Text` hodnota vlastnosti (zobrazení – příručka) pro všechny záznamy, bez ohledu na to, jestli se zde s jinou hodnotu než`NULL` hodnota `BrochurePath`.</span><span class="sxs-lookup"><span data-stu-id="ecebc-172">As Figure 7 shows, the `BrochurePath` HyperLinkField displays its `Text` property value ( View Brochure ) for all records, regardless of whether there s a non-`NULL` value for `BrochurePath`.</span></span> <span data-ttu-id="ecebc-173">Samozřejmě pokud `BrochurePath` je `NULL`, potom na odkaz se zobrazí jako text, jako je tomu u ryby kategorie (odkazuje zpět na obrázku 7).</span><span class="sxs-lookup"><span data-stu-id="ecebc-173">Of course, if `BrochurePath` is `NULL`, then the link is displayed as text only, as is the case with the Seafood category (refer back to Figure 7).</span></span> <span data-ttu-id="ecebc-174">Místo zobrazení textu – příručka zobrazení, může být dobrý tak, aby měl těchto kategorií bez `BrochurePath` hodnota zobrazí alternativní text, například není k dispozici – příručka.</span><span class="sxs-lookup"><span data-stu-id="ecebc-174">Rather than displaying the text View Brochure, it might be nice to have those categories without a `BrochurePath` value display some alternate text, like No Brochure Available.</span></span>

<span data-ttu-id="ecebc-175">Chcete-li provést toto chování, je potřeba použít TemplateField, jehož obsah je generovaný prostřednictvím volání metody stránky, který vysílá odpovídající výstup na základě `BrochurePath` hodnotu.</span><span class="sxs-lookup"><span data-stu-id="ecebc-175">In order to provide this behavior, we need to use a TemplateField whose content is generated via a call to a page method that emits the appropriate output based on the `BrochurePath` value.</span></span> <span data-ttu-id="ecebc-176">Nám nejdřív prozkoumali toto formátování technika zpět v [pomocí TemplateFields v ovládacím prvku GridView](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) kurzu.</span><span class="sxs-lookup"><span data-stu-id="ecebc-176">We first explored this formatting technique back in the [Using TemplateFields in the GridView Control](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) tutorial.</span></span>

<span data-ttu-id="ecebc-177">Zapnout HyperLinkField do TemplateField výběrem `BrochurePath` HyperLinkField a kliknete na převést toto pole do TemplateField na odkaz v dialogovém okně Upravit sloupce.</span><span class="sxs-lookup"><span data-stu-id="ecebc-177">Turn the HyperLinkField into a TemplateField by selecting the `BrochurePath` HyperLinkField and then clicking on the Convert this field into a TemplateField link in the Edit Columns dialog box.</span></span>


![Převést HyperLinkField TemplateField](displaying-binary-data-in-the-data-web-controls-cs/_static/image9.gif)

<span data-ttu-id="ecebc-179">**Obrázek 9**: převést HyperLinkField TemplateField</span><span class="sxs-lookup"><span data-stu-id="ecebc-179">**Figure 9**: Convert the HyperLinkField into a TemplateField</span></span>


<span data-ttu-id="ecebc-180">Tím se vytvoří TemplateField s `ItemTemplate` obsahující hypertextový odkaz webové řídit, jehož `NavigateUrl` vlastnost je vázána na `BrochurePath` hodnotu.</span><span class="sxs-lookup"><span data-stu-id="ecebc-180">This will create a TemplateField with an `ItemTemplate` that contains a HyperLink Web control whose `NavigateUrl` property is bound to the `BrochurePath` value.</span></span> <span data-ttu-id="ecebc-181">Nahraďte tento kód volání do metody `GenerateBrochureLink`a předejte hodnotu `BrochurePath`:</span><span class="sxs-lookup"><span data-stu-id="ecebc-181">Replace this markup with a call to the method `GenerateBrochureLink`, passing in the value of `BrochurePath`:</span></span>


[!code-aspx[Main](displaying-binary-data-in-the-data-web-controls-cs/samples/sample2.aspx)]

<span data-ttu-id="ecebc-182">Dále vytvořte `protected` metoda v prostředí ASP.NET stránky s názvem třídu s kódem v pozadí `GenerateBrochureLink` , který vrací `string` a přijímá `object` jako vstupní parametr.</span><span class="sxs-lookup"><span data-stu-id="ecebc-182">Next, create a `protected` method in the ASP.NET page s code-behind class named `GenerateBrochureLink` that returns a `string` and accepts an `object` as an input parameter.</span></span>


[!code-csharp[Main](displaying-binary-data-in-the-data-web-controls-cs/samples/sample3.cs)]

<span data-ttu-id="ecebc-183">Tato metoda určuje, zda předané `object` hodnota je databáze `NULL` a pokud ano, vrátí zpráva označující, že chybí kategorii – příručka.</span><span class="sxs-lookup"><span data-stu-id="ecebc-183">This method determines if the passed-in `object` value is a database `NULL` and, if so, returns a message indicating that the category lacks a brochure.</span></span> <span data-ttu-id="ecebc-184">Jinak, pokud je `BrochurePath` hodnotu, se zobrazí v hypertextový odkaz s.</span><span class="sxs-lookup"><span data-stu-id="ecebc-184">Otherwise, if there is a `BrochurePath` value, it s displayed in a hyperlink.</span></span> <span data-ttu-id="ecebc-185">Všimněte si, že pokud `BrochurePath` hodnota je k dispozici s předaný do [ `ResolveUrl(url)` metoda](https://msdn.microsoft.com/library/system.web.ui.control.resolveurl.aspx).</span><span class="sxs-lookup"><span data-stu-id="ecebc-185">Note that if the `BrochurePath` value is present it s passed into the [`ResolveUrl(url)` method](https://msdn.microsoft.com/library/system.web.ui.control.resolveurl.aspx).</span></span> <span data-ttu-id="ecebc-186">Tato metoda přeloží předané *adresa url*, a nahraďte `~` znak s příslušnou virtuální cestu.</span><span class="sxs-lookup"><span data-stu-id="ecebc-186">This method resolves the passed-in *url*, replacing the `~` character with the appropriate virtual path.</span></span> <span data-ttu-id="ecebc-187">Například pokud aplikace se zobrazuje v `/Tutorial55`, `ResolveUrl("~/Brochures/Meats.pdf")` vrátí `/Tutorial55/Brochures/Meat.pdf`.</span><span class="sxs-lookup"><span data-stu-id="ecebc-187">For example, if the application is rooted at `/Tutorial55`, `ResolveUrl("~/Brochures/Meats.pdf")` will return `/Tutorial55/Brochures/Meat.pdf`.</span></span>

<span data-ttu-id="ecebc-188">Obrázek 10 ukazuje na stránku po použití těchto změn.</span><span class="sxs-lookup"><span data-stu-id="ecebc-188">Figure 10 shows the page after these changes have been applied.</span></span> <span data-ttu-id="ecebc-189">Všimněte si, že ryby kategorie s `BrochurePath` pole nyní zobrazí text není – příručka k dispozici.</span><span class="sxs-lookup"><span data-stu-id="ecebc-189">Note that the Seafood category s `BrochurePath` field now displays the text No Brochure Available .</span></span>


<span data-ttu-id="ecebc-190">[![Dostupné Text ne – příručka se zobrazí u těch kategorií bez – příručka](displaying-binary-data-in-the-data-web-controls-cs/_static/image10.gif)](displaying-binary-data-in-the-data-web-controls-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="ecebc-190">[![The Text No Brochure Available is Displayed for Those Categories Without a Brochure](displaying-binary-data-in-the-data-web-controls-cs/_static/image10.gif)](displaying-binary-data-in-the-data-web-controls-cs/_static/image15.png)</span></span>

<span data-ttu-id="ecebc-191">**Obrázek 10**: textu není – příručka k dispozici se zobrazí u těch kategorií bez – příručka ([Kliknutím zobrazit obrázek v plné velikosti](displaying-binary-data-in-the-data-web-controls-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="ecebc-191">**Figure 10**: The Text No Brochure Available is Displayed for Those Categories Without a Brochure ([Click to view full-size image](displaying-binary-data-in-the-data-web-controls-cs/_static/image16.png))</span></span>


## <a name="step-3-adding-a-web-page-to-display-a-category-s-picture"></a><span data-ttu-id="ecebc-192">Krok 3: Přidání na webové stránce zobrazení kategorie s obrázku</span><span class="sxs-lookup"><span data-stu-id="ecebc-192">Step 3: Adding a Web Page to Display a Category s Picture</span></span>

<span data-ttu-id="ecebc-193">Pokud uživatel navštíví stránku ASP.NET, obdrží ASP.NET stránky s HTML.</span><span class="sxs-lookup"><span data-stu-id="ecebc-193">When a user visits an ASP.NET page, they receive the ASP.NET page s HTML.</span></span> <span data-ttu-id="ecebc-194">Přijaté HTML je jenom text a neobsahuje žádné binární data.</span><span class="sxs-lookup"><span data-stu-id="ecebc-194">The received HTML is just text and does not contain any binary data.</span></span> <span data-ttu-id="ecebc-195">Žádné další binárních dat, například bitové kopie, zvukové soubory, aplikace Macromedia Flash, vložená videa program Windows Media Player a tak dále, existovat jako samostatné prostředky na webovém serveru.</span><span class="sxs-lookup"><span data-stu-id="ecebc-195">Any additional binary data, such as images, sound files, Macromedia Flash applications, embedded Windows Media Player videos, and so forth, exist as separate resources on the web server.</span></span> <span data-ttu-id="ecebc-196">Obsahuje odkazy na tyto soubory HTML, ale nezahrnuje skutečný obsah souborů.</span><span class="sxs-lookup"><span data-stu-id="ecebc-196">The HTML contains references to these files, but does not include the actual contents of the files.</span></span>

<span data-ttu-id="ecebc-197">Například ve formátu HTML `<img>` element se používá k odkazování obrázek s `src` atribut odkazující na soubor obrázku takto:</span><span class="sxs-lookup"><span data-stu-id="ecebc-197">For example, in HTML the `<img>` element is used to reference a picture, with the `src` attribute pointing to the image file like so:</span></span>


[!code-html[Main](displaying-binary-data-in-the-data-web-controls-cs/samples/sample4.html)]

<span data-ttu-id="ecebc-198">Pokud prohlížeč obdrží tuto HTML, zadá další žádost na webový server k načtení binární obsah souboru bitové kopie, který se potom zobrazí v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="ecebc-198">When a browser receives this HTML, it makes another request to the web server to retrieve the binary contents of the image file, which it then displays in the browser.</span></span> <span data-ttu-id="ecebc-199">Totéž platí pro všechny binární data.</span><span class="sxs-lookup"><span data-stu-id="ecebc-199">The same concept applies to any binary data.</span></span> <span data-ttu-id="ecebc-200">V kroku 2 – Příručka nebyla odeslána do prohlížeče jako součást kód HTML stránky s.</span><span class="sxs-lookup"><span data-stu-id="ecebc-200">In Step 2, the brochure was not sent down to the browser as part of the page s HTML markup.</span></span> <span data-ttu-id="ecebc-201">Místo toho vykreslené HTML zadat hypertextové odkazy, při kliknutí na, způsobila prohlížeče přímo požadovat dokumentu PDF.</span><span class="sxs-lookup"><span data-stu-id="ecebc-201">Rather, the rendered HTML provided hyperlinks that, when clicked, caused the browser to request the PDF document directly.</span></span>

<span data-ttu-id="ecebc-202">Pokud chcete zobrazit nebo povolit uživatelům stahovat binární data, která se nachází v databázi, musíme vytvořit samostatné webové stránky, která vrací data.</span><span class="sxs-lookup"><span data-stu-id="ecebc-202">To display or allow users to download binary data that resides within the database, we need to create a separate web page that returns the data.</span></span> <span data-ttu-id="ecebc-203">Pro naši aplikaci pouze jedno pole binární data s ní uložena přímo v databázi s kategorie obrázek.</span><span class="sxs-lookup"><span data-stu-id="ecebc-203">For our application, there s only one binary data field stored directly in the database the category s picture.</span></span> <span data-ttu-id="ecebc-204">Proto je třeba na stránce, pokud je volána, vrátí data bitové kopie pro určité kategorie.</span><span class="sxs-lookup"><span data-stu-id="ecebc-204">Therefore, we need a page that, when called, returns the image data for a particular category.</span></span>

<span data-ttu-id="ecebc-205">Přidat novou stránku ASP.NET do `BinaryData` složku s názvem `DisplayCategoryPicture.aspx`.</span><span class="sxs-lookup"><span data-stu-id="ecebc-205">Add a new ASP.NET page to the `BinaryData` folder named `DisplayCategoryPicture.aspx`.</span></span> <span data-ttu-id="ecebc-206">Když to uděláte, nechte políčko vyberte stránku předlohy nezaškrtnuté.</span><span class="sxs-lookup"><span data-stu-id="ecebc-206">When doing so, leave the Select master page checkbox unchecked.</span></span> <span data-ttu-id="ecebc-207">Tato stránka očekává `CategoryID` hodnota v řetězci dotazu a vrací binární data této kategorie s `Picture` sloupce.</span><span class="sxs-lookup"><span data-stu-id="ecebc-207">This page expects a `CategoryID` value in the querystring and returns the binary data of that category s `Picture` column.</span></span> <span data-ttu-id="ecebc-208">Vzhledem k tomu, že tato stránka vrátí binární data a nic jiného, to není vyžadováno žádné značky v části HTML.</span><span class="sxs-lookup"><span data-stu-id="ecebc-208">Since this page returns binary data and nothing else, it does not need any markup in the HTML section.</span></span> <span data-ttu-id="ecebc-209">Proto klikněte na kartě Zdroj v levém dolním a odeberte všechny stránky s značky s výjimkou `<%@ Page %>` – direktiva.</span><span class="sxs-lookup"><span data-stu-id="ecebc-209">Therefore, click on the Source tab in the lower left corner and remove all of the page s markup except for the `<%@ Page %>` directive.</span></span> <span data-ttu-id="ecebc-210">To znamená `DisplayCategoryPicture.aspx` s deklarativní by měla obsahovat jeden řádek:</span><span class="sxs-lookup"><span data-stu-id="ecebc-210">That is, `DisplayCategoryPicture.aspx` s declarative markup should consist of a single line:</span></span>


[!code-aspx[Main](displaying-binary-data-in-the-data-web-controls-cs/samples/sample5.aspx)]

<span data-ttu-id="ecebc-211">Pokud se zobrazí `MasterPageFile` atribut `<%@ Page %>` – direktiva, odeberte ji.</span><span class="sxs-lookup"><span data-stu-id="ecebc-211">If you see the `MasterPageFile` attribute in the `<%@ Page %>` directive, remove it.</span></span>

<span data-ttu-id="ecebc-212">Ve třídě, stránku s kódem v pozadí, přidejte následující kód, který `Page_Load` obslužné rutiny události:</span><span class="sxs-lookup"><span data-stu-id="ecebc-212">In the page s code-behind class, add the following code to the `Page_Load` event handler:</span></span>


[!code-csharp[Main](displaying-binary-data-in-the-data-web-controls-cs/samples/sample6.cs)]

<span data-ttu-id="ecebc-213">Tento kód začíná čtení v `CategoryID` hodnotu querystring do proměnné s názvem `categoryID`.</span><span class="sxs-lookup"><span data-stu-id="ecebc-213">This code starts by reading in the `CategoryID` querystring value into a variable named `categoryID`.</span></span> <span data-ttu-id="ecebc-214">V dalším kroku jsou načtena data obrázek prostřednictvím volání `CategoriesBLL` třídu s `GetCategoryWithBinaryDataByCategoryID(categoryID)` metoda.</span><span class="sxs-lookup"><span data-stu-id="ecebc-214">Next, the picture data is retrieved via a call to the `CategoriesBLL` class s `GetCategoryWithBinaryDataByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="ecebc-215">Tato data je vrácen do klienta pomocí `Response.BinaryWrite(data)` metoda, ale předtím, než je tomu se říká, `Picture` záhlaví OLE hodnotu s sloupce musí být odebrány.</span><span class="sxs-lookup"><span data-stu-id="ecebc-215">This data is returned to the client by using the `Response.BinaryWrite(data)` method, but before this is called, the `Picture` column value s OLE header must be removed.</span></span> <span data-ttu-id="ecebc-216">Toho dosahuje tak, že vytvoříte `byte` pole s názvem `strippedImageData` , bude obsahovat přesně 78 znaky menší než co je v `Picture` sloupce.</span><span class="sxs-lookup"><span data-stu-id="ecebc-216">This is accomplished by creating a `byte` array named `strippedImageData` that will hold precisely 78 characters less than what is in the `Picture` column.</span></span> <span data-ttu-id="ecebc-217">[ `Array.Copy` Metoda](https://msdn.microsoft.com/library/z50k9bft.aspx) se používá ke zkopírování dat z `category.Picture` začínající na pozici 78 přes k `strippedImageData`.</span><span class="sxs-lookup"><span data-stu-id="ecebc-217">The [`Array.Copy` method](https://msdn.microsoft.com/library/z50k9bft.aspx) is used to copy the data from `category.Picture` starting at position 78 over to `strippedImageData`.</span></span>

<span data-ttu-id="ecebc-218">`Response.ContentType` Určuje vlastnost [typ MIME](http://en.wikipedia.org/wiki/MIME) obsahu nevrátila tak, aby prohlížeč umí vykreslit ho.</span><span class="sxs-lookup"><span data-stu-id="ecebc-218">The `Response.ContentType` property specifies the [MIME type](http://en.wikipedia.org/wiki/MIME) of the content being returned so that the browser knows how to render it.</span></span> <span data-ttu-id="ecebc-219">Vzhledem k tomu `Categories` tabulky s `Picture` sloupec rastrový obrázek, zobrazí typ MIME rastrový obrázek zde (bitovou kopii nebo bmp).</span><span class="sxs-lookup"><span data-stu-id="ecebc-219">Since the `Categories` table s `Picture` column is a bitmap image, the bitmap MIME type is used here (image/bmp).</span></span> <span data-ttu-id="ecebc-220">Pokud vynecháte typ MIME, většina prohlížečů bude stále umožňuje zobrazit obrázek správně vzhledem k tomu, že můžete odvození typu na základě obsahu binární data bitové kopie souboru s.</span><span class="sxs-lookup"><span data-stu-id="ecebc-220">If you omit the MIME type, most browsers will still display the image correctly because they can infer the type based on the contents of the image file s binary data.</span></span> <span data-ttu-id="ecebc-221">Nicméně je doporučeno zahrnout MIME s zadejte, pokud je to možné.</span><span class="sxs-lookup"><span data-stu-id="ecebc-221">However, it s prudent to include the MIME type when possible.</span></span> <span data-ttu-id="ecebc-222">Najdete v článku [webu s Internet Assigned Numbers Authority](http://www.iana.org/) pro úplný seznam všech [typy MIME média](http://www.iana.org/assignments/media-types/).</span><span class="sxs-lookup"><span data-stu-id="ecebc-222">See the [Internet Assigned Numbers Authority s website](http://www.iana.org/) for a complete listing of [MIME media types](http://www.iana.org/assignments/media-types/).</span></span>

<span data-ttu-id="ecebc-223">Navštivte stránky mohou zobrazit tuto stránku vytvořit, obrázku určité kategorie s `DisplayCategoryPicture.aspx?CategoryID=categoryID`.</span><span class="sxs-lookup"><span data-stu-id="ecebc-223">With this page created, a particular category s picture can be viewed by visiting `DisplayCategoryPicture.aspx?CategoryID=categoryID`.</span></span> <span data-ttu-id="ecebc-224">Obrázek 11 ukazuje na nápoje kategorie s obrázku, který lze zobrazit z `DisplayCategoryPicture.aspx?CategoryID=1`.</span><span class="sxs-lookup"><span data-stu-id="ecebc-224">Figure 11 shows the Beverages category s picture, which can be viewed from `DisplayCategoryPicture.aspx?CategoryID=1`.</span></span>


<span data-ttu-id="ecebc-225">[![Kategorie nápoje s, se zobrazí obrázek](displaying-binary-data-in-the-data-web-controls-cs/_static/image11.gif)](displaying-binary-data-in-the-data-web-controls-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="ecebc-225">[![The Beverages Category s Picture is Displayed](displaying-binary-data-in-the-data-web-controls-cs/_static/image11.gif)](displaying-binary-data-in-the-data-web-controls-cs/_static/image17.png)</span></span>

<span data-ttu-id="ecebc-226">**Obrázek 11**: kategorii nápoje s zobrazí obrázek ([Kliknutím zobrazit obrázek v plné velikosti](displaying-binary-data-in-the-data-web-controls-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="ecebc-226">**Figure 11**: The Beverages Category s Picture is Displayed ([Click to view full-size image](displaying-binary-data-in-the-data-web-controls-cs/_static/image18.png))</span></span>


<span data-ttu-id="ecebc-227">Pokud při návštěvě `DisplayCategoryPicture.aspx?CategoryID=categoryID`, dojde k výjimce, který čte nelze vrátit objekt typu 'Hodnotu ' System.DBNull na typ 'System.Byte []', dva postupy, které může být příčinou to.</span><span class="sxs-lookup"><span data-stu-id="ecebc-227">If, when visiting `DisplayCategoryPicture.aspx?CategoryID=categoryID`, you get an exception that reads Unable to cast object of type 'System.DBNull' to type 'System.Byte[]', there are two things that may be causing this.</span></span> <span data-ttu-id="ecebc-228">Nejdřív `Categories` tabulky s `Picture` sloupec povolit `NULL` hodnoty.</span><span class="sxs-lookup"><span data-stu-id="ecebc-228">First, the `Categories` table s `Picture` column does allow `NULL` values.</span></span> <span data-ttu-id="ecebc-229">`DisplayCategoryPicture.aspx` Stránky, ale předpokládá existuje jinou hodnotu než`NULL` hodnota.</span><span class="sxs-lookup"><span data-stu-id="ecebc-229">The `DisplayCategoryPicture.aspx` page, however, assumes there is a non-`NULL` value present.</span></span> <span data-ttu-id="ecebc-230">`Picture` Vlastnost `CategoriesDataTable` nelze přistupovat přímo, pokud má `NULL` hodnotu.</span><span class="sxs-lookup"><span data-stu-id="ecebc-230">The `Picture` property of the `CategoriesDataTable` cannot be directly accessed if it has a `NULL` value.</span></span> <span data-ttu-id="ecebc-231">Pokud chcete povolit `NULL` hodnoty `Picture` sloupce d chcete zahrnout následující podmínka:</span><span class="sxs-lookup"><span data-stu-id="ecebc-231">If you do want to allow `NULL` values for the `Picture` column, you d want to include the following condition:</span></span>


[!code-csharp[Main](displaying-binary-data-in-the-data-web-controls-cs/samples/sample7.cs)]

<span data-ttu-id="ecebc-232">Ve výše uvedeném kódu předpokládá tom, že s některé bitové kopie souboru s názvem `NoPictureAvailable.gif` v `Images` složky, kterou chcete zobrazit pro tyto kategorie bez obrázku.</span><span class="sxs-lookup"><span data-stu-id="ecebc-232">The above code assumes that there s some image file named `NoPictureAvailable.gif` in the `Images` folder that you want to display for those categories without a picture.</span></span>

<span data-ttu-id="ecebc-233">Tato výjimka může také dojít, pokud `CategoriesTableAdapter` s `GetCategoryWithBinaryDataByCategoryID` metoda s `SELECT` příkaz vrátil zpět do hlavní dotazu s seznam sloupců, které může dojít, pokud používáte ad-hoc příkazů SQL a jste již znovu spusťte Průvodce nastavením TableAdapter s hlavní dotazu.</span><span class="sxs-lookup"><span data-stu-id="ecebc-233">This exception could also be caused if the `CategoriesTableAdapter` s `GetCategoryWithBinaryDataByCategoryID` method s `SELECT` statement has reverted back to the main query s column list, which can happen if you are using ad-hoc SQL statements and you ve re-run the wizard for the TableAdapter s main query.</span></span> <span data-ttu-id="ecebc-234">Zkontrolujte, ujistěte se, že `GetCategoryWithBinaryDataByCategoryID` metoda s `SELECT` stále zahrnuje příkaz `Picture` sloupce.</span><span class="sxs-lookup"><span data-stu-id="ecebc-234">Check to ensure that `GetCategoryWithBinaryDataByCategoryID` method s `SELECT` statement still includes the `Picture` column.</span></span>

> [!NOTE]
> <span data-ttu-id="ecebc-235">Pokaždé, když `DisplayCategoryPicture.aspx` je navštívili, databázi přistupuje a data zadaná kategorie s obrázku se vrátí.</span><span class="sxs-lookup"><span data-stu-id="ecebc-235">Every time the `DisplayCategoryPicture.aspx` is visited, the database is accessed and the specified category s picture data is returned.</span></span> <span data-ttu-id="ecebc-236">Pokud se ještě t kategorie s obrázek změnila vzhledem k tomu, že se má zobrazit poslední uživatele, ale toto je nevyužité úsilí.</span><span class="sxs-lookup"><span data-stu-id="ecebc-236">If the category s picture hasn t changed since the user has last viewed it, though, this is wasted effort.</span></span> <span data-ttu-id="ecebc-237">Naštěstí protokolu HTTP umožňuje *podmíněného získá*.</span><span class="sxs-lookup"><span data-stu-id="ecebc-237">Fortunately, HTTP allows for *conditional GETs*.</span></span> <span data-ttu-id="ecebc-238">Pomocí podmíněného GET, pošle klient vytvoření požadavku HTTP společně [ `If-Modified-Since` hlavičky protokolu HTTP](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html) datum a čas klienta poslední načíst tento prostředek z webového serveru, který poskytuje.</span><span class="sxs-lookup"><span data-stu-id="ecebc-238">With a conditional GET, the client making the HTTP request sends along an [`If-Modified-Since` HTTP header](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html) that provides the date and time the client last retrieved this resource from the web server.</span></span> <span data-ttu-id="ecebc-239">Je-li obsah se nezměnila, protože toto nastavení zadané datum, webový server odpoví [nedojde ke změně stavový kód (304)](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html) a forgo zpět zasílání daného obsahu požadovaný prostředek s.</span><span class="sxs-lookup"><span data-stu-id="ecebc-239">If the content has not changed since this specified date, the web server may respond with a [Not Modified status code (304)](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html) and forgo sending back the requested resource s content.</span></span> <span data-ttu-id="ecebc-240">Zbavuje stručně řečeno, tato technika kterou přináší nutnost webový server z má odeslat zpět obsahu pro prostředek, pokud se nezměnil od klienta posledního použití.</span><span class="sxs-lookup"><span data-stu-id="ecebc-240">In short, this technique relieves the web server from having to send back content for a resource if it has not been modified since the client last accessed it.</span></span>


<span data-ttu-id="ecebc-241">Implementovat toto chování však vyžaduje, abyste přidali `PictureLastModified` sloupec, který se `Categories` tabulky k zachycení, kdy `Picture` sloupec poslední aktualizace a zároveň i kód zkontrolujte `If-Modified-Since` záhlaví.</span><span class="sxs-lookup"><span data-stu-id="ecebc-241">To implement this behavior, however, requires that you add a `PictureLastModified` column to the `Categories` table to capture when the `Picture` column was last updated as well as code to check for the `If-Modified-Since` header.</span></span> <span data-ttu-id="ecebc-242">Další informace o `If-Modified-Since` záhlaví a podmíněného pracovní postup GET, najdete v části [podmíněného GET protokolu HTTP pro hackery RSS](http://fishbowl.pastiche.org/2002/10/21/http_conditional_get_for_rss_hackers) a [A hlubší podívejte se na provádění požadavků HTTP na stránku ASP.NET](http://aspnet.4guysfromrolla.com/articles/122204-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="ecebc-242">For more information on the `If-Modified-Since` header and the conditional GET workflow, see [HTTP Conditional GET for RSS Hackers](http://fishbowl.pastiche.org/2002/10/21/http_conditional_get_for_rss_hackers) and [A Deeper Look at Performing HTTP Requests in an ASP.NET Page](http://aspnet.4guysfromrolla.com/articles/122204-1.aspx).</span></span>

## <a name="step-4-displaying-the-category-pictures-in-a-gridview"></a><span data-ttu-id="ecebc-243">Krok 4: Zobrazení obrázků kategorie v GridView</span><span class="sxs-lookup"><span data-stu-id="ecebc-243">Step 4: Displaying the Category Pictures in a GridView</span></span>

<span data-ttu-id="ecebc-244">Teď, když máme na webové stránce zobrazení určité kategorie s obrázku, jsme můžete zobrazit pomocí [ovládací prvek webu Image](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/standard/image.aspx) nebo HTML `<img>` element odkazující na `DisplayCategoryPicture.aspx?CategoryID=categoryID`.</span><span class="sxs-lookup"><span data-stu-id="ecebc-244">Now that we have a web page to display a particular category s picture, we can display it using the [Image Web control](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/standard/image.aspx) or an HTML `<img>` element pointing to `DisplayCategoryPicture.aspx?CategoryID=categoryID`.</span></span> <span data-ttu-id="ecebc-245">Obrázky, jehož adresa URL je určen podle data databáze lze zobrazit v GridView nebo DetailsView pomocí ImageField.</span><span class="sxs-lookup"><span data-stu-id="ecebc-245">Images whose URL is determined by database data can be displayed in the GridView or DetailsView using the ImageField.</span></span> <span data-ttu-id="ecebc-246">Obsahuje ImageField `DataImageUrlField` a `DataImageUrlFormatString` vlastnosti, které fungují jako HyperLinkField s `DataNavigateUrlFields` a `DataNavigateUrlFormatString` vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="ecebc-246">The ImageField contains `DataImageUrlField` and `DataImageUrlFormatString` properties that work like the HyperLinkField s `DataNavigateUrlFields` and `DataNavigateUrlFormatString` properties.</span></span>

<span data-ttu-id="ecebc-247">Umožní s posílení `Categories` GridView v `DisplayOrDownloadData.aspx` přidáním ImageField pro zobrazení každého kategorie s obrázku.</span><span class="sxs-lookup"><span data-stu-id="ecebc-247">Let s augment the `Categories` GridView in `DisplayOrDownloadData.aspx` by adding an ImageField to show each category s picture.</span></span> <span data-ttu-id="ecebc-248">Stačí přidat ImageField a nastavit jeho `DataImageUrlField` a `DataImageUrlFormatString` vlastnosti, které chcete `CategoryID` a `DisplayCategoryPicture.aspx?CategoryID={0}`, v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="ecebc-248">Simply add the ImageField and set its `DataImageUrlField` and `DataImageUrlFormatString` properties to `CategoryID` and `DisplayCategoryPicture.aspx?CategoryID={0}`, respectively.</span></span> <span data-ttu-id="ecebc-249">Tím se vytvoří rutina GridView sloupec, který vykreslí `<img>` element jejichž `src` atribut odkazy `DisplayCategoryPicture.aspx?CategoryID={0}`, kde je {0} nahrazena GridView řádek s `CategoryID` hodnotu.</span><span class="sxs-lookup"><span data-stu-id="ecebc-249">This will create a GridView column that renders an `<img>` element whose `src` attribute references `DisplayCategoryPicture.aspx?CategoryID={0}`, where {0} is replaced with the GridView row s `CategoryID` value.</span></span>


![Přidat ImageField do GridView](displaying-binary-data-in-the-data-web-controls-cs/_static/image12.gif)

<span data-ttu-id="ecebc-251">**Obrázek 12**: přidejte ImageField do GridView</span><span class="sxs-lookup"><span data-stu-id="ecebc-251">**Figure 12**: Add an ImageField to the GridView</span></span>


<span data-ttu-id="ecebc-252">Po přidání ImageField, deklarativní syntaxi s GridView by měl vypadat jako soothe následující:</span><span class="sxs-lookup"><span data-stu-id="ecebc-252">After adding the ImageField, your GridView s declarative syntax should look like soothe following:</span></span>


[!code-aspx[Main](displaying-binary-data-in-the-data-web-controls-cs/samples/sample8.aspx)]

<span data-ttu-id="ecebc-253">Chcete-li zobrazit tuto stránku prostřednictvím prohlížeče chvíli trvat.</span><span class="sxs-lookup"><span data-stu-id="ecebc-253">Take a moment to view this page through a browser.</span></span> <span data-ttu-id="ecebc-254">Všimněte si, jak každý záznam nyní zahrnuje obrázku pro kategorii.</span><span class="sxs-lookup"><span data-stu-id="ecebc-254">Note how each record now includes a picture for the category.</span></span>


<span data-ttu-id="ecebc-255">[![Kategorie s obrázku se zobrazí pro každý řádek](displaying-binary-data-in-the-data-web-controls-cs/_static/image13.gif)](displaying-binary-data-in-the-data-web-controls-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="ecebc-255">[![The Category s Picture is Displayed for Each Row](displaying-binary-data-in-the-data-web-controls-cs/_static/image13.gif)](displaying-binary-data-in-the-data-web-controls-cs/_static/image19.png)</span></span>

<span data-ttu-id="ecebc-256">**Obrázek 13**: kategorii s zobrazí obrázek pro každý řádek ([Kliknutím zobrazit obrázek v plné velikosti](displaying-binary-data-in-the-data-web-controls-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="ecebc-256">**Figure 13**: The Category s Picture is Displayed for Each Row ([Click to view full-size image](displaying-binary-data-in-the-data-web-controls-cs/_static/image20.png))</span></span>


## <a name="summary"></a><span data-ttu-id="ecebc-257">Souhrn</span><span class="sxs-lookup"><span data-stu-id="ecebc-257">Summary</span></span>

<span data-ttu-id="ecebc-258">V tomto kurzu jsme se zaměřili na tom, jak binární data k dispozici.</span><span class="sxs-lookup"><span data-stu-id="ecebc-258">In this tutorial we examined how to present binary data.</span></span> <span data-ttu-id="ecebc-259">Jak se data zobrazí závisí na typu dat.</span><span class="sxs-lookup"><span data-stu-id="ecebc-259">How the data is presented depends on the type of data.</span></span> <span data-ttu-id="ecebc-260">– Příručka soubory PDF, jsme nabízená uživatele – příručka zobrazení odkaz, který, po kliknutí na trvalo uživatele přímo do souboru PDF.</span><span class="sxs-lookup"><span data-stu-id="ecebc-260">For the PDF brochure files, we offered the user a View Brochure link that, when clicked, took the user directly to the PDF file.</span></span> <span data-ttu-id="ecebc-261">Pro obrázek s kategorie jsme nejprve vytvořit stránku, kterou chcete načíst a vrátit binární data z databáze a pak použít této stránce zobrazení obrázku s každou kategorii v GridView.</span><span class="sxs-lookup"><span data-stu-id="ecebc-261">For the category s picture, we first created a page to retrieve and return the binary data from the database and then used that page to display each category s picture in a GridView.</span></span>

<span data-ttu-id="ecebc-262">Nyní který jsme sunout podívat, jak zobrazit binárních dat, můžeme znovu připravena k prozkoumání jak provést vložení, aktualizace a odstranění v databázi s binární data.</span><span class="sxs-lookup"><span data-stu-id="ecebc-262">Now that we ve looked at how to display binary data, we re ready to examine how to perform insert, updates, and deletes against the database with the binary data.</span></span> <span data-ttu-id="ecebc-263">V dalším kurzu podíváme přidružení nahrávaný soubor k jeho odpovídající záznam v databázi.</span><span class="sxs-lookup"><span data-stu-id="ecebc-263">In the next tutorial we'll look at how to associate an uploaded file with its corresponding database record.</span></span> <span data-ttu-id="ecebc-264">V tomto kurzu potom uvidíme, jak aktualizovat existující binární data a také jak odstranit binární data, když dojde k odebrání jeho přidružený záznam.</span><span class="sxs-lookup"><span data-stu-id="ecebc-264">In the tutorial after that, we'll see how to update existing binary data as well as how to delete the binary data when its associated record is removed.</span></span>

<span data-ttu-id="ecebc-265">Radostí programování!</span><span class="sxs-lookup"><span data-stu-id="ecebc-265">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="ecebc-266">O autorovi</span><span class="sxs-lookup"><span data-stu-id="ecebc-266">About the Author</span></span>

<span data-ttu-id="ecebc-267">[Scott Meisnerová](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor sedm ASP/ASP.NET knih a zakladatele z [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracuje s technologií Microsoft Web od 1998.</span><span class="sxs-lookup"><span data-stu-id="ecebc-267">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="ecebc-268">Scott funguje jako nezávislé poradce, trainer a zapisovače.</span><span class="sxs-lookup"><span data-stu-id="ecebc-268">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="ecebc-269">Jeho nejnovější seznam k [ *Edice nakladatelství Sams naučit sami technologii ASP.NET 2.0 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="ecebc-269">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="ecebc-270">Dosažitelný v [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) nebo prostřednictvím svého blogu, který najdete na [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="ecebc-270">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="ecebc-271">Zvláštní poděkování</span><span class="sxs-lookup"><span data-stu-id="ecebc-271">Special Thanks To</span></span>

<span data-ttu-id="ecebc-272">Tento kurz řady byla zkontrolovány uživatelem mnoho užitečné kontrolorů.</span><span class="sxs-lookup"><span data-stu-id="ecebc-272">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="ecebc-273">Vést kontroloři v tomto kurzu se Teresy Murphy a Dave Gardner.</span><span class="sxs-lookup"><span data-stu-id="ecebc-273">Lead reviewers for this tutorial were Teresa Murphy and Dave Gardner.</span></span> <span data-ttu-id="ecebc-274">Kontrola Moje nadcházející články MSDN máte zájem?</span><span class="sxs-lookup"><span data-stu-id="ecebc-274">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="ecebc-275">Pokud ano, vyřaďte mi řádek v [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="ecebc-275">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="ecebc-276">[Předchozí](uploading-files-cs.md)
[další](including-a-file-upload-option-when-adding-a-new-record-cs.md)</span><span class="sxs-lookup"><span data-stu-id="ecebc-276">[Previous](uploading-files-cs.md)
[Next](including-a-file-upload-option-when-adding-a-new-record-cs.md)</span></span>
