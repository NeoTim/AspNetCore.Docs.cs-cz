---
uid: web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs
title: "Seznam záznamů hlavní s odrážkami pomocí podrobnosti DataList (C#) podrobností | Microsoft Docs"
author: rick-anderson
description: "V tomto kurzu jsme budete komprimovat dvě stránky a podrobností sestavy předchozí kurzu do jediné stránce s odrážkami seznam názvů kategorie na t..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 10/17/2006
ms.topic: article
ms.assetid: c727bb73-7b59-41a1-8dc3-623c6d69e7c2
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs
msc.type: authoredcontent
ms.openlocfilehash: cb943941ea4dbfbdc9230df4598ad406d4dee0b6
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 01/24/2018
---
<a name="masterdetail-using-a-bulleted-list-of-master-records-with-a-details-datalist-c"></a><span data-ttu-id="1f56e-103">Seznam podrobnosti s odrážkami seznam záznamů hlavní pomocí podrobnosti DataList (C#)</span><span class="sxs-lookup"><span data-stu-id="1f56e-103">Master/Detail Using a Bulleted List of Master Records with a Details DataList (C#)</span></span>
====================
<span data-ttu-id="1f56e-104">podle [Scott Meisnerová](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="1f56e-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="1f56e-105">[Stáhněte si ukázkovou aplikaci](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_35_CS.exe) nebo [stáhnout PDF](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/datatutorial35cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="1f56e-105">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_35_CS.exe) or [Download PDF](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/datatutorial35cs1.pdf)</span></span>

> <span data-ttu-id="1f56e-106">V tomto kurzu jsme budete komprimovat dvě stránky a podrobností sestavy předchozí kurzu do jediné stránce s odrážkami seznam názvů kategorie zobrazuje na levé straně obrazovky a vybrané kategorie produktů na pravé straně obrazovky.</span><span class="sxs-lookup"><span data-stu-id="1f56e-106">In this tutorial we'll compress the two-page master/detail report of the previous tutorial into a single page, showing a bulleted list of category names on the left side of the screen and the selected category's products on the right of the screen.</span></span>


## <a name="introduction"></a><span data-ttu-id="1f56e-107">Úvod</span><span class="sxs-lookup"><span data-stu-id="1f56e-107">Introduction</span></span>

<span data-ttu-id="1f56e-108">V [předchozí kurzu](master-detail-filtering-acess-two-pages-datalist-cs.md) jsme se podívali na tom, jak jednotlivé sestavy a podrobností mezi dvěma stránkami.</span><span class="sxs-lookup"><span data-stu-id="1f56e-108">In the [preceding tutorial](master-detail-filtering-acess-two-pages-datalist-cs.md) we looked at how to separate a master/detail report across two pages.</span></span> <span data-ttu-id="1f56e-109">Na hlavní stránce jsme prvku Repeater použít k vykreslení seznamu s odrážkami kategorií.</span><span class="sxs-lookup"><span data-stu-id="1f56e-109">In the master page we used a Repeater control to render a bulleted list of categories.</span></span> <span data-ttu-id="1f56e-110">Každý název kategorie byl hypertextový odkaz, že při kliknutí na, by proveďte uživatele na stránku podrobností, kde vám ukázal DataList dva sloupce, tyto produkty patřící do vybrané kategorie.</span><span class="sxs-lookup"><span data-stu-id="1f56e-110">Each category name was a hyperlink that, when clicked, would take the user to the details page, where a two-column DataList showed those products belonging to the selected category.</span></span>

<span data-ttu-id="1f56e-111">V tomto kurzu jsme budete komprimovat kurzu dvě stránky do jediné stránce zobrazuje seznam názvů kategorie s odrážkami na levé straně obrazovky s každý název kategorie se vykresluje jako LinkButton.</span><span class="sxs-lookup"><span data-stu-id="1f56e-111">In this tutorial we'll compress the two-page tutorial into a single page, showing a bulleted list of category names on the left side of the screen with each category name rendered as a LinkButton.</span></span> <span data-ttu-id="1f56e-112">Kliknutím na název kategorie LinkButtons indukuje zpětné volání a sváže s produkty vybrané kategorie DataList dva sloupce na pravé straně obrazovky.</span><span class="sxs-lookup"><span data-stu-id="1f56e-112">Clicking one of the category name LinkButtons induces a postback and binds the selected category s products to a two-column DataList on the right of the screen.</span></span> <span data-ttu-id="1f56e-113">Kromě zobrazování každý název kategorie s, opakovače na levé straně se zobrazí, kolik existuje celkový počet produktů pro danou kategorii (viz obrázek 1).</span><span class="sxs-lookup"><span data-stu-id="1f56e-113">In addition to displaying each category s name, the Repeater on the left shows how many total products there are for a given category (see Figure 1).</span></span>


<span data-ttu-id="1f56e-114">[![Kategorie s názvem a celkový počet produktů, které se zobrazují na levé straně](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image2.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="1f56e-114">[![The Category s Name and Total Number of Products are Displayed on the Left](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image2.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image1.png)</span></span>

<span data-ttu-id="1f56e-115">**Obrázek 1**: kategorii s názvem a celkový počet produktů, které se zobrazují na levé straně ([Kliknutím zobrazit obrázek v plné velikosti](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="1f56e-115">**Figure 1**: The Category s Name and Total Number of Products are Displayed on the Left ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image3.png))</span></span>


## <a name="step-1-displaying-a-repeater-in-the-left-portion-of-the-screen"></a><span data-ttu-id="1f56e-116">Krok 1: Zobrazení prvku Repeater v levé části obrazovky</span><span class="sxs-lookup"><span data-stu-id="1f56e-116">Step 1: Displaying a Repeater in the Left Portion of the Screen</span></span>

<span data-ttu-id="1f56e-117">Pro účely tohoto kurzu je potřeba mít s odrážkami seznamu kategorií se zobrazí vlevo produkty s vybranou kategorii.</span><span class="sxs-lookup"><span data-stu-id="1f56e-117">For this tutorial we need to have the bulleted list of categories appear to the left of the selected category s products.</span></span> <span data-ttu-id="1f56e-118">Obsah na webové stránce můžete umístit pomocí standardní značky HTML pro elementy odstavce, pevné mezery, `<table>` s a tak dále, nebo prostřednictvím techniky kaskádových stylů (CSS).</span><span class="sxs-lookup"><span data-stu-id="1f56e-118">Content within a web page can be positioned using standard HTML elements paragraph tags, non-breaking spaces, `<table>` s, and so on or through cascading stylesheet (CSS) techniques.</span></span> <span data-ttu-id="1f56e-119">Všechny naše kurzy doposud použili šablon stylů CSS techniky pro umístění.</span><span class="sxs-lookup"><span data-stu-id="1f56e-119">All of our tutorials thus far have used CSS techniques for positioning.</span></span> <span data-ttu-id="1f56e-120">Pokud jsme vytvořili uživatelské rozhraní navigace v našem hlavní stránce [hlavní stránky a navigace na webu](../introduction/master-pages-and-site-navigation-cs.md) kurzu jsme použili *absolutní umístění*, označující posun přesné pixelů pro navigaci seznam a hlavní obsah.</span><span class="sxs-lookup"><span data-stu-id="1f56e-120">When we built the navigation user interface in our master page in the [Master Pages and Site Navigation](../introduction/master-pages-and-site-navigation-cs.md) tutorial we used *absolute positioning*, indicating the precise pixel offset for the navigation list and the main content.</span></span> <span data-ttu-id="1f56e-121">Alternativně lze na pozici jeden element práva nebo nalevo od jiného prostřednictvím šablon stylů CSS *plovoucí*.</span><span class="sxs-lookup"><span data-stu-id="1f56e-121">Alternatively, CSS can be used to position one element to the right or left of another through *floating*.</span></span> <span data-ttu-id="1f56e-122">Máme s odrážkami seznamu kategorií se zobrazí vlevo produkty s vybranou kategorii podle plovoucí opakovače nalevo od prvku DataList</span><span class="sxs-lookup"><span data-stu-id="1f56e-122">We can have the bulleted list of categories appear to the left of the selected category s products by floating the Repeater to the left of the DataList</span></span>

<span data-ttu-id="1f56e-123">Otevřete `CategoriesAndProducts.aspx` stránku z `DataListRepeaterFiltering` složky a přidat na stránku prvku Repeater a DataList.</span><span class="sxs-lookup"><span data-stu-id="1f56e-123">Open the `CategoriesAndProducts.aspx` page from the `DataListRepeaterFiltering` folder and add to the page a Repeater and a DataList.</span></span> <span data-ttu-id="1f56e-124">Nastavit opakovače s `ID` k `Categories` a DataList s k `CategoryProducts`.</span><span class="sxs-lookup"><span data-stu-id="1f56e-124">Set the Repeater s `ID` to `Categories` and the DataList s to `CategoryProducts`.</span></span> <span data-ttu-id="1f56e-125">Přejděte do zobrazení zdroje a opakovače a DataList ovládací prvky v rámci své vlastní `<div>` elementy.</span><span class="sxs-lookup"><span data-stu-id="1f56e-125">Go to the Source view and put the Repeater and DataList controls within their own `<div>` elements.</span></span> <span data-ttu-id="1f56e-126">To znamená, uzavřete opakovače v rámci `<div>` element první a pak DataList ve svém vlastním `<div>` element přímo po opakovače.</span><span class="sxs-lookup"><span data-stu-id="1f56e-126">That is, enclose the Repeater within a `<div>` element first and then the DataList in its own `<div>` element directly after the Repeater.</span></span> <span data-ttu-id="1f56e-127">Váš kód v tomto okamžiku by měl vypadat takto:</span><span class="sxs-lookup"><span data-stu-id="1f56e-127">Your markup at this point should look similar to the following:</span></span>


[!code-aspx[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample1.aspx)]

<span data-ttu-id="1f56e-128">Chcete-li uvolnit opakovače nalevo od prvku DataList, je potřeba použít `float` atribut stylu CSS, například takto:</span><span class="sxs-lookup"><span data-stu-id="1f56e-128">To float the Repeater to the left of the DataList, we need to use the `float` CSS style attribute, like so:</span></span>


[!code-html[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample2.html)]

<span data-ttu-id="1f56e-129">`float: left;` Jako plovoucí první `<div>` elementu vlevo na druhou.</span><span class="sxs-lookup"><span data-stu-id="1f56e-129">The `float: left;` floats the first `<div>` element to the left of the second one.</span></span> <span data-ttu-id="1f56e-130">`width` a `padding-right` nastavení udávají první `<div>` s `width` a kolik odsazení se přidá mezi `<div>` element s obsahu a jeho pravý okraj.</span><span class="sxs-lookup"><span data-stu-id="1f56e-130">The `width` and `padding-right` settings indicate the first `<div>` s `width` and how much padding is added between the `<div>` element s content and its right margin.</span></span> <span data-ttu-id="1f56e-131">Další informace o plovoucí elementy v jazyce CSS podívejte se [Floatutorial](http://css.maxdesign.com.au/floatutorial/).</span><span class="sxs-lookup"><span data-stu-id="1f56e-131">For more information on floating elements in CSS check out the [Floatutorial](http://css.maxdesign.com.au/floatutorial/).</span></span>

<span data-ttu-id="1f56e-132">Spíše než nastavení styl přímo přes první `<p>` element s `style` atribut, aby s místo toho vytvořte novou třídu CSS v `Styles.css` s názvem `FloatLeft`:</span><span class="sxs-lookup"><span data-stu-id="1f56e-132">Rather than specify the style setting directly through the first `<p>` element s `style` attribute, let s instead create a new CSS class in `Styles.css` named `FloatLeft`:</span></span>


[!code-css[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample3.css)]

<span data-ttu-id="1f56e-133">Potom můžete nahradit jsme `<div>` s `<div class="FloatLeft">`.</span><span class="sxs-lookup"><span data-stu-id="1f56e-133">Then we can replace the `<div>` with `<div class="FloatLeft">`.</span></span>

<span data-ttu-id="1f56e-134">Po přidání třídy CSS a kódu značek v konfiguraci `CategoriesAndProducts.aspx` stránky, přejděte do návrháře.</span><span class="sxs-lookup"><span data-stu-id="1f56e-134">After adding the CSS class and configuring the markup in the `CategoriesAndProducts.aspx` page, go to the Designer.</span></span> <span data-ttu-id="1f56e-135">Měli byste vidět opakovače plovoucí na levé straně DataList (i když vpravo nyní obě právě zobrazí jako šedý polí od jsme jste zatím ke konfiguraci jejich zdroje dat nebo šablony).</span><span class="sxs-lookup"><span data-stu-id="1f56e-135">You should see the Repeater floating to the left of the DataList (although right now both just appear as gray boxes since we ve yet to configure their data sources or templates).</span></span>


<span data-ttu-id="1f56e-136">[![Opakovače obtékané nalevo od prvku DataList](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image5.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="1f56e-136">[![The Repeater is Floated to the Left of the DataList](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image5.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image4.png)</span></span>

<span data-ttu-id="1f56e-137">**Obrázek 2**: opakovače obtékané nalevo od prvku DataList ([Kliknutím zobrazit obrázek v plné velikosti](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="1f56e-137">**Figure 2**: The Repeater is Floated to the Left of the DataList ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image6.png))</span></span>


## <a name="step-2-determining-the-number-of-products-for-each-category"></a><span data-ttu-id="1f56e-138">Krok 2: Určení počtu produktů pro každou kategorii</span><span class="sxs-lookup"><span data-stu-id="1f56e-138">Step 2: Determining the Number of Products for Each Category</span></span>

<span data-ttu-id="1f56e-139">Opakovače a DataList s, které obaluje značek dokončení jsme re připravené k vytvoření vazby dat kategorie opakovače kontrolu.</span><span class="sxs-lookup"><span data-stu-id="1f56e-139">With the Repeater and DataList s surrounding markup complete, we re ready to bind the category data to the Repeater control.</span></span> <span data-ttu-id="1f56e-140">Ale jak seznamu s odrážkami kategorií obrázek 1 ukazuje, kromě každý název kategorie s také potřebujeme zobrazíte počet produktů, které jsou spojené s kategorií.</span><span class="sxs-lookup"><span data-stu-id="1f56e-140">However, as the bulleted list of categories in Figure 1 shows, in addition to each category s name we also need to display the number of products associated with the category.</span></span> <span data-ttu-id="1f56e-141">Chcete-li přistupovat k těmto informacím jsme provést jeden z následujících kroků:</span><span class="sxs-lookup"><span data-stu-id="1f56e-141">To access this information we can either:</span></span>

- <span data-ttu-id="1f56e-142">**Určete tyto informace z třídy s kódu stránky ASP.NET.**</span><span class="sxs-lookup"><span data-stu-id="1f56e-142">**Determine this information from the ASP.NET page s code-behind class.**</span></span> <span data-ttu-id="1f56e-143">Zadané konkrétní  *`categoryID`*  jsme můžete určit počet produktů, přidružené voláním `ProductsBLL` třídu s `GetProductsByCategoryID(categoryID)` metoda.</span><span class="sxs-lookup"><span data-stu-id="1f56e-143">Given a particular *`categoryID`* we can determine the number of associated products by calling the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="1f56e-144">Tato metoda vrátí hodnotu `ProductsDataTable` objekt, jehož `Count` vlastnost udává, kolik `ProductsRow` s existuje, což je počet produktů, pro zadané  *`categoryID`* .</span><span class="sxs-lookup"><span data-stu-id="1f56e-144">This method returns a `ProductsDataTable` object whose `Count` property indicates how many `ProductsRow` s exists, which is the number of products for the specified *`categoryID`*.</span></span> <span data-ttu-id="1f56e-145">Můžeme vytvořit `ItemDataBound` obslužné rutiny události pro opakovače, která pro každou kategorii vázána na opakovače, zavolá `ProductsBLL` třídu s `GetProductsByCategoryID(categoryID)` metoda i jeho počet ve výstupu.</span><span class="sxs-lookup"><span data-stu-id="1f56e-145">We can create an `ItemDataBound` event handler for the Repeater that, for each category bound to the Repeater, calls the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method and includes its count in the output.</span></span>
- <span data-ttu-id="1f56e-146">**Aktualizace `CategoriesDataTable` v datové sadě zadali zahrnout `NumberOfProducts` sloupce.**</span><span class="sxs-lookup"><span data-stu-id="1f56e-146">**Update the `CategoriesDataTable` in the Typed DataSet to include a `NumberOfProducts` column.**</span></span> <span data-ttu-id="1f56e-147">Jsme může aktualizovat `GetCategories()` metoda v `CategoriesDataTable` zahrnout tyto informace, nebo můžete taky nechat `GetCategories()` jako-je a vytvořte novou `CategoriesDataTable` metodu s názvem `GetCategoriesAndNumberOfProducts()`.</span><span class="sxs-lookup"><span data-stu-id="1f56e-147">We can then update the `GetCategories()` method in the `CategoriesDataTable` to include this information or, alternatively, leave `GetCategories()` as-is and create a new `CategoriesDataTable` method called `GetCategoriesAndNumberOfProducts()`.</span></span>

<span data-ttu-id="1f56e-148">Umožní s prozkoumat obě z následujících postupů.</span><span class="sxs-lookup"><span data-stu-id="1f56e-148">Let s explore both of these techniques.</span></span> <span data-ttu-id="1f56e-149">Prvním přístupem je jednodušší implementace vzhledem k tomu, že jsme nejsou zobrazeny t potřeba aktualizovat Data Access Layer; to ale vyžaduje další komunikaci s databází.</span><span class="sxs-lookup"><span data-stu-id="1f56e-149">The first approach is simpler to implement since we don t need to update the Data Access Layer; however, it requires more communications with the database.</span></span> <span data-ttu-id="1f56e-150">Volání `ProductsBLL` třídu s `GetProductsByCategoryID(categoryID)` metoda v `ItemDataBound` obslužné rutiny události přidá volání další databáze pro každou kategorii zobrazí v Opakovači.</span><span class="sxs-lookup"><span data-stu-id="1f56e-150">The call to the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method in the `ItemDataBound` event handler adds an extra database call for each category displayed in the Repeater.</span></span> <span data-ttu-id="1f56e-151">Při této technice existují *N* + volání 1 databáze, kde *N* je počet kategorií zobrazí v Opakovači.</span><span class="sxs-lookup"><span data-stu-id="1f56e-151">With this technique there are *N* + 1 database calls, where *N* is the number of categories displayed in the Repeater.</span></span> <span data-ttu-id="1f56e-152">Druhý přístup, je vrácen počet produktů s informace o každé kategorie z `CategoriesBLL` třídu s `GetCategories()` (nebo `GetCategoriesAndNumberOfProducts()`) metoda, což by vedlo k jenom jednu cestu k databázi.</span><span class="sxs-lookup"><span data-stu-id="1f56e-152">With the second approach, the product count is returned with information about each category from the `CategoriesBLL` class s `GetCategories()` (or `GetCategoriesAndNumberOfProducts()`) method, thereby resulting in just one trip to the database.</span></span>

## <a name="determining-the-number-of-products-in-the-itemdatabound-event-handler"></a><span data-ttu-id="1f56e-153">Určení počtu produktů v obslužná rutina události ItemDataBound</span><span class="sxs-lookup"><span data-stu-id="1f56e-153">Determining the Number of Products in the ItemDataBound Event Handler</span></span>

<span data-ttu-id="1f56e-154">Určení počtu produktů pro každou kategorii v opakovače s `ItemDataBound` obslužné rutiny události nevyžaduje žádné úpravy naše existující Data Access Layer.</span><span class="sxs-lookup"><span data-stu-id="1f56e-154">Determining the number of products for each category in the Repeater s `ItemDataBound` event handler does not require any modifications to our existing Data Access Layer.</span></span> <span data-ttu-id="1f56e-155">Můžete provést všechny úpravy přímo v rámci `CategoriesAndProducts.aspx` stránky.</span><span class="sxs-lookup"><span data-stu-id="1f56e-155">All modifications can be made directly within the `CategoriesAndProducts.aspx` page.</span></span> <span data-ttu-id="1f56e-156">Začněte přidáním nové ObjectDataSource s názvem `CategoriesDataSource` pomocí inteligentních značek opakovače s.</span><span class="sxs-lookup"><span data-stu-id="1f56e-156">Start by adding a new ObjectDataSource named `CategoriesDataSource` via the Repeater s smart tag.</span></span> <span data-ttu-id="1f56e-157">V dalším kroku nakonfigurujte `CategoriesDataSource` ObjectDataSource, které se načte data z `CategoriesBLL` třídu s `GetCategories()` metoda.</span><span class="sxs-lookup"><span data-stu-id="1f56e-157">Next, configure the `CategoriesDataSource` ObjectDataSource so that it retrieves its data from the `CategoriesBLL` class s `GetCategories()` method.</span></span>


<span data-ttu-id="1f56e-158">[![Konfigurace ObjectDataSource použití třídy CategoriesBLL s GetCategories() – metoda](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image8.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="1f56e-158">[![Configure the ObjectDataSource to Use the CategoriesBLL class s GetCategories() Method](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image8.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image7.png)</span></span>

<span data-ttu-id="1f56e-159">**Obrázek 3**: Konfigurace ObjectDataSource pro použití `CategoriesBLL` třídu s `GetCategories()` – metoda ([Kliknutím zobrazit obrázek v plné velikosti](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="1f56e-159">**Figure 3**: Configure the ObjectDataSource to Use the `CategoriesBLL` class s `GetCategories()` Method ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image9.png))</span></span>


<span data-ttu-id="1f56e-160">Každá položka v `Categories` opakovače musí být lze klepnout, a při kliknutí na, způsobit, že `CategoryProducts` DataList k zobrazení těchto produktů pro vybranou kategorii.</span><span class="sxs-lookup"><span data-stu-id="1f56e-160">Each item in the `Categories` Repeater needs to be clickable and, when clicked, cause the `CategoryProducts` DataList to display those products for the selected category.</span></span> <span data-ttu-id="1f56e-161">To lze provést tak, že každou kategorii hypertextový odkaz, propojení zpět na této stránce stejné (`CategoriesAndProducts.aspx`), ale předejte `CategoryID` pomocí řetězce dotazu, jako jsme viděli v předchozí kurzu.</span><span class="sxs-lookup"><span data-stu-id="1f56e-161">This can be accomplished by making each category a hyperlink, linking back to this same page (`CategoriesAndProducts.aspx`), but passing the `CategoryID` through the querystring, much like we saw in the previous tutorial.</span></span> <span data-ttu-id="1f56e-162">Výhodou tohoto přístupu je, že na stránce zobrazení určité kategorie s produkty může být aktuálně přihlášeni a indexovat pomocí vyhledávacího webu.</span><span class="sxs-lookup"><span data-stu-id="1f56e-162">The advantage of this approach is that a page displaying a particular category s products can be bookmarked and indexed by a search engine.</span></span>

<span data-ttu-id="1f56e-163">Alternativně bychom mohli každou kategorii LinkButton, což je přístupů, které v tomto kurzu použijeme.</span><span class="sxs-lookup"><span data-stu-id="1f56e-163">Alternatively, we can make each category a LinkButton, which is the approach we'll use for this tutorial.</span></span> <span data-ttu-id="1f56e-164">LinkButton vykreslení v prohlížeči uživatele s jako hypertextový odkaz, ale po kliknutí na indukuje zpětné volání; na zpětné volání DataList s ObjectDataSource, je potřeba aktualizovat zobrazíte těchto produktů, které patří do vybrané kategorie.</span><span class="sxs-lookup"><span data-stu-id="1f56e-164">The LinkButton renders in the user s browser as a hyperlink but, when clicked, induces a postback; on postback, the DataList s ObjectDataSource needs to be refreshed to display those products belonging to the selected category.</span></span> <span data-ttu-id="1f56e-165">V tomto kurzu pomocí hypertextový odkaz smysl více než použití LinkButton; však může být dalších scénářích, kdy pomocí LinkButton výhodnější.</span><span class="sxs-lookup"><span data-stu-id="1f56e-165">For this tutorial, using a hyperlink makes more sense than using a LinkButton; however, there may be other scenarios where using a LinkButton is more advantageous.</span></span> <span data-ttu-id="1f56e-166">Hypertextový odkaz přístup by být ideální pro tento příklad, mohli s místo prozkoumat pomocí LinkButton.</span><span class="sxs-lookup"><span data-stu-id="1f56e-166">While the hyperlink approach would be ideal for this example, let s instead explore using the LinkButton.</span></span> <span data-ttu-id="1f56e-167">Jako uvidíme, použití LinkButton zavádí některé běžné problémy, které by jinak nastat u hypertextový odkaz.</span><span class="sxs-lookup"><span data-stu-id="1f56e-167">As we'll see, using a LinkButton introduces some challenges that would not otherwise arise with a hyperlink.</span></span> <span data-ttu-id="1f56e-168">Proto používat LinkButton v tomto kurzu bude zvýrazněte tyto problémy a pomáhají zajistit řešení pro tyto scénáře, kde může chceme používat LinkButton místo hypertextový odkaz.</span><span class="sxs-lookup"><span data-stu-id="1f56e-168">Therefore, using a LinkButton in this tutorial will highlight these challenges and help provide solutions for those scenarios where we may want to use a LinkButton instead of a hyperlink.</span></span>

> [!NOTE]
> <span data-ttu-id="1f56e-169">Doporučujeme opakujte tento kurz pomocí ovládacího prvku hypertextový odkaz nebo `<a>` element místo LinkButton.</span><span class="sxs-lookup"><span data-stu-id="1f56e-169">You are encouraged to repeat this tutorial using a HyperLink control or `<a>` element in lieu of the LinkButton.</span></span>


<span data-ttu-id="1f56e-170">Následující kód ukazuje deklarativní syntaxi pro opakovače a ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="1f56e-170">The following markup shows the declarative syntax for the Repeater and the ObjectDataSource.</span></span> <span data-ttu-id="1f56e-171">Všimněte si, že šablony opakovače s vykreslení seznamu s odrážkami s každou položku jako LinkButton:</span><span class="sxs-lookup"><span data-stu-id="1f56e-171">Note that the Repeater s templates render a bulleted list with each item as a LinkButton:</span></span>


[!code-aspx[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample4.aspx)]

> [!NOTE]
> <span data-ttu-id="1f56e-172">V tomto kurzu opakovače musí mít svůj stav zobrazení, které jsou povolené (Všimněte si, vynechání `EnableViewState="False"` z deklarativní syntaxi opakovače s).</span><span class="sxs-lookup"><span data-stu-id="1f56e-172">For this tutorial the Repeater must have its view state enabled (note the omission of the `EnableViewState="False"` from the Repeater s declarative syntax).</span></span> <span data-ttu-id="1f56e-173">V kroku 3 jsme budete vytvářet obslužné rutiny události pro opakovače s `ItemCommand` událostí, ve kterém budete mít aktualizujeme DataList s ObjectDataSource s `SelectParameters` kolekce.</span><span class="sxs-lookup"><span data-stu-id="1f56e-173">In step 3 we'll be creating an event handler for the Repeater s `ItemCommand` event in which we'll be updating the DataList s ObjectDataSource s `SelectParameters` collection.</span></span> <span data-ttu-id="1f56e-174">Opakovače s `ItemCommand`, ale won t ještě efektivněji, pokud je stav zobrazení zakázán.</span><span class="sxs-lookup"><span data-stu-id="1f56e-174">The Repeater s `ItemCommand`, however, won t fire if view state is disabled.</span></span> <span data-ttu-id="1f56e-175">V tématu [těžkou otázku A otázky ASP.NET](http://scottonwriting.net/sowblog/posts/1263.aspx) a [jeho řešení](http://scottonwriting.net/sowBlog/posts/1268.aspx) Další informace o důvod, proč musí být povolen stav zobrazení pro opakovače s `ItemCommand` na aktivaci události.</span><span class="sxs-lookup"><span data-stu-id="1f56e-175">See [A Stumper of an ASP.NET Question](http://scottonwriting.net/sowblog/posts/1263.aspx) and [its solution](http://scottonwriting.net/sowBlog/posts/1268.aspx) for more information on why view state must be enabled for a Repeater s `ItemCommand` event to fire.</span></span>


<span data-ttu-id="1f56e-176">LinkButton s `ID` hodnota vlastnosti `ViewCategory` nemá jeho `Text` sadu vlastností.</span><span class="sxs-lookup"><span data-stu-id="1f56e-176">The LinkButton with the `ID` property value of `ViewCategory` does not have its `Text` property set.</span></span> <span data-ttu-id="1f56e-177">Právě měl jsme chtěli zobrazovaný název kategorie, jsme by mít pro vlastnost Text deklarativně, prostřednictvím syntaxe vazby dat, například takto:</span><span class="sxs-lookup"><span data-stu-id="1f56e-177">If we had just wanted to display the category name, we would have set the Text property declaratively, through databinding syntax, like so:</span></span>


[!code-aspx[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample5.aspx)]

<span data-ttu-id="1f56e-178">Ale chceme zobrazit název kategorie s *a* počet produktů, které patří do této kategorie spadají.</span><span class="sxs-lookup"><span data-stu-id="1f56e-178">However, we want to show both the category s name *and* the number of products belonging to that category.</span></span> <span data-ttu-id="1f56e-179">Tyto informace lze načíst z opakovače s `ItemDataBound` obslužné rutiny události tak, že volání `ProductBLL` třídu s `GetCategoriesByProductID(categoryID)` metoda a zjištění počet záznamů, jsou vráceny v výsledná `ProductsDataTable`, jako následující kód znázorňuje:</span><span class="sxs-lookup"><span data-stu-id="1f56e-179">This information can be retrieved from the Repeater s `ItemDataBound` event handler by making a call to the `ProductBLL` class s `GetCategoriesByProductID(categoryID)` method and determining how many records are returned in the resulting `ProductsDataTable`, as the following code illustrates:</span></span>


[!code-csharp[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample6.cs)]

<span data-ttu-id="1f56e-180">Začneme zajištěním, který jsme re práce s datovou položku (jeden jejichž `ItemType` je `Item` nebo `AlternatingItem`) a pak odkazovat `CategoriesRow` instanci, která právě bylo svázáno se aktuální `RepeaterItem`.</span><span class="sxs-lookup"><span data-stu-id="1f56e-180">We start out by ensuring that we re working with a data item (one whose `ItemType` is `Item` or `AlternatingItem`) and then reference the `CategoriesRow` instance that has just been bound to the current `RepeaterItem`.</span></span> <span data-ttu-id="1f56e-181">V dalším kroku jsme určit počet produktů pro tuto kategorii tak, že vytvoříte instanci `ProductsBLL` třídy, volání jeho `GetCategoriesByProductID(categoryID)` metoda a zjištění počet záznamů vrácených pomocí `Count` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="1f56e-181">Next, we determine the number of products for this category by creating an instance of the `ProductsBLL` class, calling its `GetCategoriesByProductID(categoryID)` method, and determining the number of records returned using the `Count` property.</span></span> <span data-ttu-id="1f56e-182">Nakonec `ViewCategory` LinkButton v ItemTemplate je odkazy a jeho `Text` je nastavena na *CategoryName* (*NumberOfProductsInCategory*), kde  *NumberOfProductsInCategory* je formátovaný jako číslo nulový počet desetinných míst.</span><span class="sxs-lookup"><span data-stu-id="1f56e-182">Finally, the `ViewCategory` LinkButton in the ItemTemplate is references and its `Text` property is set to *CategoryName* (*NumberOfProductsInCategory*), where *NumberOfProductsInCategory* is formatted as a number with zero decimal places.</span></span>

> [!NOTE]
> <span data-ttu-id="1f56e-183">Alternativně může přidali jsme *formátování funkce* do třídy kódu stránky s ASP.NET, která přijímá kategorie s `CategoryName` a `CategoryID` hodnoty a vrátí `CategoryName` zřetězen s počet produkty v kategorii (počítáno od volání `GetCategoriesByProductID(categoryID)` metoda).</span><span class="sxs-lookup"><span data-stu-id="1f56e-183">Alternatively, we could have added a *formatting function* to the ASP.NET page s code-behind class that accepts a category s `CategoryName` and `CategoryID` values and returns the `CategoryName` concatenated with the number of products in the category (as determined by calling the `GetCategoriesByProductID(categoryID)` method).</span></span> <span data-ttu-id="1f56e-184">Výsledky formátování funkce může být deklarativně přiřazovány s LinkButton Text – vlastnost nahrazuje potřebu `ItemDataBound` obslužné rutiny události.</span><span class="sxs-lookup"><span data-stu-id="1f56e-184">The results of such a formatting function could be declaratively assigned to the LinkButton s Text property replacing the need for the `ItemDataBound` event handler.</span></span> <span data-ttu-id="1f56e-185">Odkazovat [pomocí TemplateFields v ovládacím prvku GridView](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) nebo [formátování DataList a opakovače dat na základě při](../displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-cs.md) kurzy pro další informace o použití formátování funkce.</span><span class="sxs-lookup"><span data-stu-id="1f56e-185">Refer to the [Using TemplateFields in the GridView Control](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) or [Formatting the DataList and Repeater Based Upon Data](../displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-cs.md) tutorials for more information on using formatting functions.</span></span>


<span data-ttu-id="1f56e-186">Po přidání této obslužné rutiny události, pozorně testovací stránka prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="1f56e-186">After adding this event handler, take a moment to test the page through a browser.</span></span> <span data-ttu-id="1f56e-187">Všimněte si, jak jednotlivé kategorie je uveden v seznamu s odrážkami, zobrazí název kategorie s a počet produktů, které jsou spojené s kategorií (viz obrázek 4).</span><span class="sxs-lookup"><span data-stu-id="1f56e-187">Note how each category is listed in a bulleted list, displaying the category s name and the number of products associated with the category (see Figure 4).</span></span>


<span data-ttu-id="1f56e-188">[![Zobrazí se každý kategorie s název a číslo produkty](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image11.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="1f56e-188">[![Each Category s Name and Number of Products are Displayed](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image11.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image10.png)</span></span>

<span data-ttu-id="1f56e-189">**Obrázek 4**: Zobrazí se s každou kategorii název a číslo produkty ([Kliknutím zobrazit obrázek v plné velikosti](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="1f56e-189">**Figure 4**: Each Category s Name and Number of Products are Displayed ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image12.png))</span></span>


## <a name="updating-thecategoriesdatatableandcategoriestableadapterto-include-the-number-of-products-for-each-category"></a><span data-ttu-id="1f56e-190">Aktualizace`CategoriesDataTable`a`CategoriesTableAdapter`zahrnout počet produktů, pro každou kategorii</span><span class="sxs-lookup"><span data-stu-id="1f56e-190">Updating the`CategoriesDataTable`and`CategoriesTableAdapter`to Include the Number of Products for Each Category</span></span>

<span data-ttu-id="1f56e-191">Namísto určení počtu produktů pro jednotlivé kategorie, jako je vázán s opakovače, jsme zjednoduší se tento proces úpravou `CategoriesDataTable` a `CategoriesTableAdapter` v Data Access Layer nativně zahrnout tyto informace.</span><span class="sxs-lookup"><span data-stu-id="1f56e-191">Rather than determining the number of products for each category as it s bound to the Repeater, we can streamline this process by adjusting the `CategoriesDataTable` and `CategoriesTableAdapter` in the Data Access Layer to include this information natively.</span></span> <span data-ttu-id="1f56e-192">Jak toho docílit, jsme musíte přidat nový sloupec na `CategoriesDataTable` k uložení všech přidružených produktů.</span><span class="sxs-lookup"><span data-stu-id="1f56e-192">To achieve this, we must add a new column to `CategoriesDataTable` to hold the number of associated products.</span></span> <span data-ttu-id="1f56e-193">Chcete-li přidat nový sloupec do DataTable, otevřete typové datové sady (`App_Code\DAL\Northwind.xsd`), klikněte pravým tlačítkem na DataTable upravit a zvolte možnost Přidat nebo sloupec.</span><span class="sxs-lookup"><span data-stu-id="1f56e-193">To add a new column to a DataTable, open the Typed DataSet (`App_Code\DAL\Northwind.xsd`), right-click on the DataTable to modify, and choose Add / Column.</span></span> <span data-ttu-id="1f56e-194">Přidat nový sloupec, který má `CategoriesDataTable` (viz obrázek 5).</span><span class="sxs-lookup"><span data-stu-id="1f56e-194">Add a new column to the `CategoriesDataTable` (see Figure 5).</span></span>


<span data-ttu-id="1f56e-195">[![Přidejte nový sloupec CategoriesDataSource](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image14.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="1f56e-195">[![Add a New Column to the CategoriesDataSource](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image14.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image13.png)</span></span>

<span data-ttu-id="1f56e-196">**Obrázek 5**: Přidat nový sloupec, který má `CategoriesDataSource` ([Kliknutím zobrazit obrázek v plné velikosti](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="1f56e-196">**Figure 5**: Add a New Column to the `CategoriesDataSource` ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image15.png))</span></span>


<span data-ttu-id="1f56e-197">To bude přidat nový sloupec s názvem `Column1`, které můžete změnit zadáním jednoduše v jiný název.</span><span class="sxs-lookup"><span data-stu-id="1f56e-197">This will add a new column named `Column1`, which you can change by simply typing in a different name.</span></span> <span data-ttu-id="1f56e-198">Přejmenujte tento nový sloupec `NumberOfProducts`.</span><span class="sxs-lookup"><span data-stu-id="1f56e-198">Rename this new column to `NumberOfProducts`.</span></span> <span data-ttu-id="1f56e-199">Dále je potřeba nakonfigurovat tento sloupec s vlastností.</span><span class="sxs-lookup"><span data-stu-id="1f56e-199">Next, we need to configure this column s properties.</span></span> <span data-ttu-id="1f56e-200">Klikněte na nový sloupec a přejít do okna vlastností.</span><span class="sxs-lookup"><span data-stu-id="1f56e-200">Click on the new column and go to the Properties window.</span></span> <span data-ttu-id="1f56e-201">Sloupec s změnit `DataType` vlastnost z `System.String` k `System.Int32` a nastavte `ReadOnly` vlastnost `True`, jak je znázorněno na obrázku 6.</span><span class="sxs-lookup"><span data-stu-id="1f56e-201">Change the column s `DataType` property from `System.String` to `System.Int32` and set the `ReadOnly` property to `True`, as shown in Figure 6.</span></span>


![Nastavit vlastnosti jen pro čtení nového sloupce a datový typ](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image16.png)

<span data-ttu-id="1f56e-203">**Obrázek 6**: nastavte `DataType` a `ReadOnly` vlastnosti nového sloupce</span><span class="sxs-lookup"><span data-stu-id="1f56e-203">**Figure 6**: Set the `DataType` and `ReadOnly` Properties of the New Column</span></span>


<span data-ttu-id="1f56e-204">Když `CategoriesDataTable` má nyní `NumberOfProducts` sloupce, jeho hodnota není nastaven žádný odpovídající dotazů TableAdapter s.</span><span class="sxs-lookup"><span data-stu-id="1f56e-204">While the `CategoriesDataTable` now has a `NumberOfProducts` column, its value is not set by any of the corresponding TableAdapter s queries.</span></span> <span data-ttu-id="1f56e-205">Jsme můžete aktualizovat `GetCategories()` metoda vrátit tyto informace v případě chceme, aby tyto informace vrátila pokaždé, když je načíst informace o kategoriích.</span><span class="sxs-lookup"><span data-stu-id="1f56e-205">We can update the `GetCategories()` method to return this information if we want such information returned every time category information is retrieved.</span></span> <span data-ttu-id="1f56e-206">Pokud, ale musíme získat počet související produkty kategorií ve výjimečných případech (například jako pouze pro účely tohoto kurzu), pak můžete nechat jsme `GetCategories()` jako-je a vytvoření nové metody, která vrací tyto informace.</span><span class="sxs-lookup"><span data-stu-id="1f56e-206">If, however, we only need to grab the number of associated products for the categories in rare instances (such as just for this tutorial), then we can leave `GetCategories()` as-is and create a new method that returns this information.</span></span> <span data-ttu-id="1f56e-207">Umožňují s použít tento pozdější přístup, vytvoření nové metody s názvem `GetCategoriesAndNumberOfProducts()`.</span><span class="sxs-lookup"><span data-stu-id="1f56e-207">Let s use this latter approach, creating a new method named `GetCategoriesAndNumberOfProducts()`.</span></span>

<span data-ttu-id="1f56e-208">To přidat nové `GetCategoriesAndNumberOfProducts()` metoda, klikněte pravým tlačítkem na `CategoriesTableAdapter` a vyberte nový dotaz.</span><span class="sxs-lookup"><span data-stu-id="1f56e-208">To add this new `GetCategoriesAndNumberOfProducts()` method, right-click on the `CategoriesTableAdapter` and choose New Query.</span></span> <span data-ttu-id="1f56e-209">To přináší až TableAdapter dotaz Průvodce konfigurací, které jsme sunout použít mnohokrát v předchozí kurzy.</span><span class="sxs-lookup"><span data-stu-id="1f56e-209">This brings up the TableAdapter Query Configuration Wizard, which we ve used numerous times in previous tutorials.</span></span> <span data-ttu-id="1f56e-210">Tuto metodu která určuje, že dotaz používá příkaz SQL ad-hoc, která vrací řádky spusťte průvodce.</span><span class="sxs-lookup"><span data-stu-id="1f56e-210">For this method, start the wizard by indicating that the query uses an ad-hoc SQL statement that returns rows.</span></span>


<span data-ttu-id="1f56e-211">[![Create – metoda příkazu SQL Ad-Hoc](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image18.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="1f56e-211">[![Create the Method Using an Ad-Hoc SQL Statement](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image18.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image17.png)</span></span>

<span data-ttu-id="1f56e-212">**Obrázek 7**: vytvoření metody, pomocí příkazu SQL Ad-Hoc ([Kliknutím zobrazit obrázek v plné velikosti](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image19.png))</span><span class="sxs-lookup"><span data-stu-id="1f56e-212">**Figure 7**: Create the Method Using an Ad-Hoc SQL Statement ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image19.png))</span></span>


<span data-ttu-id="1f56e-213">[![Příkaz jazyka SQL vrací řádky](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image21.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image20.png)</span><span class="sxs-lookup"><span data-stu-id="1f56e-213">[![The SQL Statement Returns Rows](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image21.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image20.png)</span></span>

<span data-ttu-id="1f56e-214">**Obrázek 8**: řádků vrátí příkaz SQL ([Kliknutím zobrazit obrázek v plné velikosti](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="1f56e-214">**Figure 8**: The SQL Statement Returns Rows ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image22.png))</span></span>


<span data-ttu-id="1f56e-215">Na další obrazovce Průvodce zobrazí výzvu nám pro dotaz, který bude použit.</span><span class="sxs-lookup"><span data-stu-id="1f56e-215">The next wizard screen prompts us for the query to use.</span></span> <span data-ttu-id="1f56e-216">Vrátit každou kategorii s `CategoryID`, `CategoryName`, a `Description` pole, spolu s počtem produkty spojené s kategorií, použijte následující `SELECT` příkaz:</span><span class="sxs-lookup"><span data-stu-id="1f56e-216">To return each category s `CategoryID`, `CategoryName`, and `Description` fields, along with the number of products associated with the category, use the following `SELECT` statement:</span></span>


[!code-sql[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample7.sql)]


<span data-ttu-id="1f56e-217">[![Zadejte dotaz pro použití](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image24.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="1f56e-217">[![Specify the Query to Use](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image24.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image23.png)</span></span>

<span data-ttu-id="1f56e-218">**Obrázek 9**: Zadejte dotaz pro použití ([Kliknutím zobrazit obrázek v plné velikosti](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image25.png))</span><span class="sxs-lookup"><span data-stu-id="1f56e-218">**Figure 9**: Specify the Query to Use ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image25.png))</span></span>


<span data-ttu-id="1f56e-219">Upozorňujeme, že je poddotaz, která vypočítá počet produktů, které jsou spojené s kategorií alias jako `NumberOfProducts`.</span><span class="sxs-lookup"><span data-stu-id="1f56e-219">Note that the subquery that computes the number of products associated with the category is aliased as `NumberOfProducts`.</span></span> <span data-ttu-id="1f56e-220">Tato pojmenování shody hodnoty vrácené tento poddotazu má být spojen s způsobí, že `CategoriesDataTable` s `NumberOfProducts` sloupce.</span><span class="sxs-lookup"><span data-stu-id="1f56e-220">This naming match causes the value returned by this subquery to be associated with the `CategoriesDataTable` s `NumberOfProducts` column.</span></span>

<span data-ttu-id="1f56e-221">Po zadání tohoto dotazu je posledním krokem je vybrat název pro novou metodu.</span><span class="sxs-lookup"><span data-stu-id="1f56e-221">After entering this query, the last step is to choose the name for the new method.</span></span> <span data-ttu-id="1f56e-222">Použití `FillWithNumberOfProducts` a `GetCategoriesAndNumberOfProducts` výplně DataTable a vraťte se DataTable vzory, v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="1f56e-222">Use `FillWithNumberOfProducts` and `GetCategoriesAndNumberOfProducts` for the Fill a DataTable and Return a DataTable patterns, respectively.</span></span>


<span data-ttu-id="1f56e-223">[![Název nové FillWithNumberOfProducts metody s TableAdapter a GetCategoriesAndNumberOfProducts](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image27.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image26.png)</span><span class="sxs-lookup"><span data-stu-id="1f56e-223">[![Name the New TableAdapter s Methods FillWithNumberOfProducts and GetCategoriesAndNumberOfProducts](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image27.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image26.png)</span></span>

<span data-ttu-id="1f56e-224">**Obrázek 10**: název nové TableAdapter s metody `FillWithNumberOfProducts` a `GetCategoriesAndNumberOfProducts` ([Kliknutím zobrazit obrázek v plné velikosti](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image28.png))</span><span class="sxs-lookup"><span data-stu-id="1f56e-224">**Figure 10**: Name the New TableAdapter s Methods `FillWithNumberOfProducts` and `GetCategoriesAndNumberOfProducts` ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image28.png))</span></span>


<span data-ttu-id="1f56e-225">V tomto okamžiku Data Access Layer rozšířilo a zahrnují počet produktů, na kategorie.</span><span class="sxs-lookup"><span data-stu-id="1f56e-225">At this point the Data Access Layer has been extended to include the number of products per category.</span></span> <span data-ttu-id="1f56e-226">Vzhledem k tomu, že naše prezentační vrstvy směruje všechna volání DAL prostřednictvím samostatné vrstvy obchodní logiky, je potřeba přidat odpovídající `GetCategoriesAndNumberOfProducts` metodu `CategoriesBLL` třídy:</span><span class="sxs-lookup"><span data-stu-id="1f56e-226">Since all our presentation layer routes all calls to the DAL through a separate Business Logic Layer we need to add a corresponding `GetCategoriesAndNumberOfProducts` method to the `CategoriesBLL` class:</span></span>


[!code-csharp[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample8.cs)]

<span data-ttu-id="1f56e-227">DAL a BLL dokončení, jsme re připravené k vytvoření vazby na dat `Categories` opakovače v `CategoriesAndProducts.aspx`!</span><span class="sxs-lookup"><span data-stu-id="1f56e-227">With the DAL and BLL complete, we re ready to bind this data to the `Categories` Repeater in `CategoriesAndProducts.aspx`!</span></span> <span data-ttu-id="1f56e-228">Pokud jste již ObjectDataSource vytvořeny již pro opakovače z určení počtu produktů v `ItemDataBound` části obslužné rutiny události odstranit tento ObjectDataSource a odeberte opakovače s `DataSourceID` vlastnost nastavení; také unwire Opakovače s `ItemDataBound` událost z obslužné rutiny události odebráním `Handles Categories.OnItemDataBound` syntaxe ve třídě kódu ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="1f56e-228">If you ve already created an ObjectDataSource for the Repeater from the Determining the Number of Products in the `ItemDataBound` Event Handler section, delete this ObjectDataSource and remove the Repeater s `DataSourceID` property setting; also unwire the Repeater s `ItemDataBound` event from the event handler by removing the `Handles Categories.OnItemDataBound` syntax in the ASP.NET code-behind class.</span></span>

<span data-ttu-id="1f56e-229">S opakovače zpět do původního stavu, přidejte nový ObjectDataSource s názvem `CategoriesDataSource` pomocí inteligentních značek opakovače s.</span><span class="sxs-lookup"><span data-stu-id="1f56e-229">With the Repeater back in its original state, add a new ObjectDataSource named `CategoriesDataSource` via the Repeater s smart tag.</span></span> <span data-ttu-id="1f56e-230">Konfigurace ObjectDataSource používat `CategoriesBLL` třídy, ale místo nutnosti ho použít `GetCategories()` metoda, mají se používat `GetCategoriesAndNumberOfProducts()` místo (viz obrázek 11).</span><span class="sxs-lookup"><span data-stu-id="1f56e-230">Configure the ObjectDataSource to use the `CategoriesBLL` class, but instead of having it use the `GetCategories()` method, have it use `GetCategoriesAndNumberOfProducts()` instead (see Figure 11).</span></span>


<span data-ttu-id="1f56e-231">[![Konfigurace ObjectDataSource lze pomocí této metody GetCategoriesAndNumberOfProducts](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image30.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="1f56e-231">[![Configure the ObjectDataSource to Use the GetCategoriesAndNumberOfProducts Method](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image30.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image29.png)</span></span>

<span data-ttu-id="1f56e-232">**Obrázek 11**: Konfigurace ObjectDataSource pro použití `GetCategoriesAndNumberOfProducts` – metoda ([Kliknutím zobrazit obrázek v plné velikosti](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image31.png))</span><span class="sxs-lookup"><span data-stu-id="1f56e-232">**Figure 11**: Configure the ObjectDataSource to Use the `GetCategoriesAndNumberOfProducts` Method ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image31.png))</span></span>


<span data-ttu-id="1f56e-233">Potom aktualizujte `ItemTemplate` tak, aby LinkButton s `Text` vlastnost přiřazena deklarativně pomocí syntaxe datové vazby a zahrnuje i `CategoryName` a `NumberOfProducts` datová pole.</span><span class="sxs-lookup"><span data-stu-id="1f56e-233">Next, update the `ItemTemplate` so that the LinkButton s `Text` property is declaratively assigned using databinding syntax and includes both the `CategoryName` and `NumberOfProducts` data fields.</span></span> <span data-ttu-id="1f56e-234">Dokončení deklarativní opakovače a `CategoriesDataSource` ObjectDataSource postupujte podle kroků:</span><span class="sxs-lookup"><span data-stu-id="1f56e-234">The complete declarative markup for the Repeater and the `CategoriesDataSource` ObjectDataSource follow:</span></span>


[!code-aspx[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample9.aspx)]

<span data-ttu-id="1f56e-235">Výstup poskytnutý aktualizace DAL zahrnout `NumberOfProducts` sloupec je stejná jako `ItemDataBound` přístup obslužné rutiny události (odkazuje zpět na obrázku 4 zobrazíte obrazovky snímek opakovače s názvy kategorií a počet produktů,).</span><span class="sxs-lookup"><span data-stu-id="1f56e-235">The output rendered by updating the DAL to include a `NumberOfProducts` column is the same as using the `ItemDataBound` event handler approach (refer back to Figure 4 to see a screen shot of the Repeater showing the category names and number of products).</span></span>

## <a name="step-3-displaying-the-selected-category-s-products"></a><span data-ttu-id="1f56e-236">Krok 3: Zobrazení vybrané kategorie s produkty</span><span class="sxs-lookup"><span data-stu-id="1f56e-236">Step 3: Displaying the Selected Category s Products</span></span>

<span data-ttu-id="1f56e-237">V tomto okamžiku máme `Categories` opakovače zobrazení seznamu kategorií spolu s počtem produkty v každé kategorii.</span><span class="sxs-lookup"><span data-stu-id="1f56e-237">At this point we have the `Categories` Repeater displaying the list of categories along with the number of products in each category.</span></span> <span data-ttu-id="1f56e-238">Opakovače používá LinkButton pro každou kategorii, že po kliknutí na příčiny a zpětné volání, ve kterém bodu budeme potřebovat zobrazit tyto produkty pro vybrané kategorie v `CategoryProducts` DataList.</span><span class="sxs-lookup"><span data-stu-id="1f56e-238">The Repeater uses a LinkButton for each category that, when clicked, causes a postback, at which point we need to display those products for the selected category in the `CategoryProducts` DataList.</span></span>

<span data-ttu-id="1f56e-239">Problémy čelí nám je jak vám má DataList zobrazit právě produkty pro vybrané kategorie.</span><span class="sxs-lookup"><span data-stu-id="1f56e-239">One challenge facing us is how to have the DataList display just those products for the selected category.</span></span> <span data-ttu-id="1f56e-240">V [hlavní/podrobností volitelný GridView hlavní pomocí DetailsView podrobnosti](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md) kurzu jsme viděli, jak sestavit GridView jejichž řádky může vybrat, s vybraný řádek s podrobností se zobrazí v DetailsView na stejné stránce.</span><span class="sxs-lookup"><span data-stu-id="1f56e-240">In the [Master/Detail Using a Selectable Master GridView with a Details DetailsView](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md) tutorial we saw how to build a GridView whose rows could be selected, with the selected row s details being displayed in a DetailsView on the same page.</span></span> <span data-ttu-id="1f56e-241">Rutina GridView s ObjectDataSource vrátí informace o všech produktů pomocí `ProductsBLL` s `GetProducts()` metoda při DetailsView s ObjectDataSource načíst informace o používání vybrané produktu `GetProductsByProductID(productID)` metoda.</span><span class="sxs-lookup"><span data-stu-id="1f56e-241">The GridView s ObjectDataSource returned information about all products using the `ProductsBLL` s `GetProducts()` method while the DetailsView s ObjectDataSource retrieved information about the selected product using the `GetProductsByProductID(productID)` method.</span></span> <span data-ttu-id="1f56e-242">*`productID`*  Hodnota parametru zadaná deklarativně tím, že přidružíte s hodnotou GridView s `SelectedValue` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="1f56e-242">The *`productID`* parameter value was provided declaratively by associating it with the value of the GridView s `SelectedValue` property.</span></span> <span data-ttu-id="1f56e-243">Bohužel opakovače nemá `SelectedValue` vlastnost a nemůže sloužit jako zdroj parametru.</span><span class="sxs-lookup"><span data-stu-id="1f56e-243">Unfortunately, the Repeater does not have a `SelectedValue` property and cannot serve as a parameter source.</span></span>

> [!NOTE]
> <span data-ttu-id="1f56e-244">Toto je jedna z těchto problémů, které se zobrazí při použití LinkButton v prvku Repeater.</span><span class="sxs-lookup"><span data-stu-id="1f56e-244">This is one of those challenges that appear when using the LinkButton in a Repeater.</span></span> <span data-ttu-id="1f56e-245">Měli jsme použili hypertextový odkaz předávat `CategoryID` prostřednictvím řetězec dotazu místo toho jsme může použít toto pole řetězce dotazu jako zdroj pro s hodnotu parametru.</span><span class="sxs-lookup"><span data-stu-id="1f56e-245">Had we used a hyperlink to pass in the `CategoryID` through the querystring instead, we could use that QueryString field as the source for the parameter s value.</span></span>


<span data-ttu-id="1f56e-246">Před jsme starat o chybějícím `SelectedValue` vlastnost opakovače, ale nechat s nejprve vytvořit vazbu DataList ObjectDataSource a zadejte jeho `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="1f56e-246">Before we worry about the lack of a `SelectedValue` property for the Repeater, though, let s first bind the DataList to an ObjectDataSource and specify its `ItemTemplate`.</span></span>

<span data-ttu-id="1f56e-247">Z inteligentních značek DataList s opt přidat nové ObjectDataSource s názvem `CategoryProductsDataSource` a nakonfigurujte ho na používání `ProductsBLL` třídu s `GetProductsByCategoryID(categoryID)` metoda.</span><span class="sxs-lookup"><span data-stu-id="1f56e-247">From the DataList s smart tag, opt to add a new ObjectDataSource named `CategoryProductsDataSource` and configure it to use the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="1f56e-248">Vzhledem k tomu, že DataList v tomto kurzu nabízí rozhraní, které je jen pro čtení, klidně si nastavte rozevírací seznamy v příkaz INSERT, UPDATE a odstranit karty na (žádný).</span><span class="sxs-lookup"><span data-stu-id="1f56e-248">Since the DataList in this tutorial offers a read-only interface, feel free to set the drop-down lists in the INSERT, UPDATE, and DELETE tabs to (None).</span></span>


<span data-ttu-id="1f56e-249">[![Konfigurace ObjectDataSource lze pomocí metody GetProductsByCategoryID(categoryID) s ProductsBLL – třída](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image33.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image32.png)</span><span class="sxs-lookup"><span data-stu-id="1f56e-249">[![Configure the ObjectDataSource to Use ProductsBLL Class s GetProductsByCategoryID(categoryID) Method](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image33.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image32.png)</span></span>

<span data-ttu-id="1f56e-250">**Obrázek 12**: Konfigurace ObjectDataSource pro použití `ProductsBLL` třídu s `GetProductsByCategoryID(categoryID)` – metoda ([Kliknutím zobrazit obrázek v plné velikosti](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image34.png))</span><span class="sxs-lookup"><span data-stu-id="1f56e-250">**Figure 12**: Configure the ObjectDataSource to Use `ProductsBLL` Class s `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image34.png))</span></span>


<span data-ttu-id="1f56e-251">Vzhledem k tomu `GetProductsByCategoryID(categoryID)` metoda očekává vstupní parametr (*`categoryID`*), Průvodce konfigurace zdroje dat umožňuje určit zdroj s parametr.</span><span class="sxs-lookup"><span data-stu-id="1f56e-251">Since the `GetProductsByCategoryID(categoryID)` method expects an input parameter (*`categoryID`*), the Configure Data Source wizard allows us to specify the parameter s source.</span></span> <span data-ttu-id="1f56e-252">Měl kategorie uvedené v GridView nebo DataList, jsme d parametr zdroj rozevíracím seznamu nastavte řízení a ControlID k `ID` dat ovládací prvek webu.</span><span class="sxs-lookup"><span data-stu-id="1f56e-252">Had the categories been listed in a GridView or a DataList, we d set the Parameter source drop-down list to Control and the ControlID to the `ID` of the data Web control.</span></span> <span data-ttu-id="1f56e-253">Ale, protože chybí opakovače `SelectedValue` vlastnost nelze zadat jako parametr zdroj.</span><span class="sxs-lookup"><span data-stu-id="1f56e-253">However, since the Repeater lacks a `SelectedValue` property it cannot be used as a parameter source.</span></span> <span data-ttu-id="1f56e-254">Pokud zaškrtnete, zjistíte, že rozevíracího seznamu ControlID obsahuje pouze jeden prvek `ID``CategoryProducts`, `ID` z prvku DataList.</span><span class="sxs-lookup"><span data-stu-id="1f56e-254">If you check, you'll find that the ControlID drop-down list only contains one control `ID``CategoryProducts`, the `ID` of the DataList.</span></span>

<span data-ttu-id="1f56e-255">Nyní nastavena na hodnotu None parametr zdrojového rozevíracího seznamu.</span><span class="sxs-lookup"><span data-stu-id="1f56e-255">For now, set the Parameter source drop-down list to None.</span></span> <span data-ttu-id="1f56e-256">Budete jsme skončili prostřednictvím kódu programu přiřazení tento parametr hodnotu, pokud kategorie, kterou LinkButton po kliknutí na v Opakovači.</span><span class="sxs-lookup"><span data-stu-id="1f56e-256">We'll end up programmatically assigning this parameter value when a category LinkButton is clicked in the Repeater.</span></span>


<span data-ttu-id="1f56e-257">[![Proveďte není uveden zdroj parametru pro parametr categoryID](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image36.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="1f56e-257">[![Do Not Specify a Parameter Source for the categoryID Parameter](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image36.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image35.png)</span></span>

<span data-ttu-id="1f56e-258">**Obrázek 13**: není zadán parametr zdroje  *`categoryID`*  parametr ([Kliknutím zobrazit obrázek v plné velikosti](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image37.png))</span><span class="sxs-lookup"><span data-stu-id="1f56e-258">**Figure 13**: Do Not Specify a Parameter Source for the *`categoryID`* Parameter ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image37.png))</span></span>


<span data-ttu-id="1f56e-259">Po dokončení průvodce Konfigurace zdroje dat, Visual Studio automaticky generuje DataList s `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="1f56e-259">After completing the Configure Data Source wizard, Visual Studio auto-generates the DataList s `ItemTemplate`.</span></span> <span data-ttu-id="1f56e-260">Nahraďte toto výchozí nastavení `ItemTemplate` se šablonou jsme použili v předchozí kurzu; také nastavit DataList s `RepeatColumns` vlastnost na hodnotu 2.</span><span class="sxs-lookup"><span data-stu-id="1f56e-260">Replace this default `ItemTemplate` with the template we used in the preceding tutorial; also, set the DataList s `RepeatColumns` property to 2.</span></span> <span data-ttu-id="1f56e-261">Po provedení těchto změn deklarativní vaší DataList a jeho přidružené ObjectDataSource by měl vypadat následovně:</span><span class="sxs-lookup"><span data-stu-id="1f56e-261">After making these changes the declarative markup for your DataList and its associated ObjectDataSource should look like the following:</span></span>


[!code-aspx[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample10.aspx)]

<span data-ttu-id="1f56e-262">V současné době `CategoryProductsDataSource` ObjectDataSource s  *`categoryID`*  parametr nikdy nastaven, tak při prohlížení stránky, se nezobrazí žádné produkty.</span><span class="sxs-lookup"><span data-stu-id="1f56e-262">Currently, the `CategoryProductsDataSource` ObjectDataSource s *`categoryID`* parameter is never set, so no products are displayed when viewing the page.</span></span> <span data-ttu-id="1f56e-263">Co je potřeba udělat je mít tento parametr hodnotu nastavit na základě `CategoryID` kliknutelnou kategorie v Opakovači.</span><span class="sxs-lookup"><span data-stu-id="1f56e-263">What we need to do is have this parameter value set based on the `CategoryID` of the clicked category in the Repeater.</span></span> <span data-ttu-id="1f56e-264">Vzniká dva problémy: nejdřív, jak jsme je zjistit při LinkButton v opakovače s `ItemTemplate` kliknutelnou; a druhé, jak jsme zjistit `CategoryID` odpovídající kategorie, jejichž LinkButton označeného?</span><span class="sxs-lookup"><span data-stu-id="1f56e-264">This introduces two challenges: first, how do we determine when a LinkButton in the Repeater s `ItemTemplate` has been clicked; and second, how can we determine the `CategoryID` of the corresponding category whose LinkButton was clicked?</span></span>

<span data-ttu-id="1f56e-265">Má LinkButton jako a ImageButton ovládacích prvků `Click` událostí a [ `Command` událostí](https://msdn.microsoft.com/library/system.web.ui.webcontrols.linkbutton.command.aspx).</span><span class="sxs-lookup"><span data-stu-id="1f56e-265">The LinkButton like the Button and ImageButton controls has a `Click` event and a [`Command` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.linkbutton.command.aspx).</span></span> <span data-ttu-id="1f56e-266">`Click` Událostí slouží k jednoduše Všimněte si, že LinkButton klepnutí na.</span><span class="sxs-lookup"><span data-stu-id="1f56e-266">The `Click` event is designed to simply note that the LinkButton has been clicked.</span></span> <span data-ttu-id="1f56e-267">V některých případech ale kromě poznamenat, že bylo stisknuto LinkButton také potřebujeme předat některé doplňující informace k obslužné rutině událostí.</span><span class="sxs-lookup"><span data-stu-id="1f56e-267">At times, however, in addition to noting that the LinkButton has been clicked we also need to pass some extra information to the event handler.</span></span> <span data-ttu-id="1f56e-268">Pokud ano, LinkButton s [ `CommandName` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.linkbutton.commandname.aspx) a [ `CommandArgument` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.linkbutton.commandargument.aspx) vlastnosti lze přiřadit tyto doplňující informace.</span><span class="sxs-lookup"><span data-stu-id="1f56e-268">If this is the case, the LinkButton s [`CommandName`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.linkbutton.commandname.aspx) and [`CommandArgument`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.linkbutton.commandargument.aspx) properties can be assigned this extra information.</span></span> <span data-ttu-id="1f56e-269">Potom po kliknutí LinkButton jeho `Command` aktivuje událost (místo jeho `Click` událostí) a obslužné rutiny události je předána hodnoty `CommandName` a `CommandArgument` vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="1f56e-269">Then, when the LinkButton is clicked, its `Command` event fires (instead of its `Click` event) and the event handler is passed the values of the `CommandName` and `CommandArgument` properties.</span></span>

<span data-ttu-id="1f56e-270">Když `Command` událost se vyvolá z v rámci šablonu opakovače s opakovače [ `ItemCommand` událostí](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeater.itemcommand.aspx) aktivuje a je předána `CommandName` a `CommandArgument` hodnoty kliknutelnou LinkButton (nebo tlačítko nebo ImageButton).</span><span class="sxs-lookup"><span data-stu-id="1f56e-270">When a `Command` event is raised from within a template in the Repeater, the Repeater s [`ItemCommand` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeater.itemcommand.aspx) fires and is passed the `CommandName` and `CommandArgument` values of the clicked LinkButton (or Button or ImageButton).</span></span> <span data-ttu-id="1f56e-271">Proto pokud chcete zjistit, kdy bylo stisknuto kategorii LinkButton v Opakovači, potřebujeme postupujte takto:</span><span class="sxs-lookup"><span data-stu-id="1f56e-271">Therefore, to determine when a category LinkButton in the Repeater has been clicked, we need to do the following:</span></span>

1. <span data-ttu-id="1f56e-272">Nastavte `CommandName` vlastnost LinkButton v opakovače s `ItemTemplate` na určitou hodnotu (I sunout používá ListProducts).</span><span class="sxs-lookup"><span data-stu-id="1f56e-272">Set the `CommandName` property of the LinkButton in the Repeater s `ItemTemplate` to some value (I ve used ListProducts ).</span></span> <span data-ttu-id="1f56e-273">Pomocí tohoto nastavení `CommandName` hodnoty, LinkButton s `Command` událost aktivuje se při kliknutí na LinkButton.</span><span class="sxs-lookup"><span data-stu-id="1f56e-273">By setting this `CommandName` value, the LinkButton s `Command` event fires when the LinkButton is clicked.</span></span>
2. <span data-ttu-id="1f56e-274">Nastavit LinkButton s `CommandArgument` vlastnost na hodnotu aktuální položky s `CategoryID`.</span><span class="sxs-lookup"><span data-stu-id="1f56e-274">Set the LinkButton s `CommandArgument` property to the value of the current item s `CategoryID`.</span></span>
3. <span data-ttu-id="1f56e-275">Vytvoření obslužné rutiny události pro opakovače s `ItemCommand` událostí.</span><span class="sxs-lookup"><span data-stu-id="1f56e-275">Create an event handler for the Repeater s `ItemCommand` event.</span></span> <span data-ttu-id="1f56e-276">Události obslužnou rutinu, nastavte `CategoryProductsDataSource` ObjectDataSource s `CategoryID` parametr na hodnotu předané `CommandArgument`.</span><span class="sxs-lookup"><span data-stu-id="1f56e-276">In the event handler, set the `CategoryProductsDataSource` ObjectDataSource s `CategoryID` parameter to the value of the passed-in `CommandArgument`.</span></span>

<span data-ttu-id="1f56e-277">Následující `ItemTemplate` kód pro opakovače kategorií implementuje kroky 1 a 2.</span><span class="sxs-lookup"><span data-stu-id="1f56e-277">The following `ItemTemplate` markup for the Categories Repeater implements steps 1 and 2.</span></span> <span data-ttu-id="1f56e-278">Poznámka: Jak `CommandArgument` hodnota je přiřazena položku dat s `CategoryID` pomocí syntaxe vazby dat:</span><span class="sxs-lookup"><span data-stu-id="1f56e-278">Note how the `CommandArgument` value is assigned the data item s `CategoryID` using databinding syntax:</span></span>


[!code-aspx[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample11.aspx)]

<span data-ttu-id="1f56e-279">Při každém vytvoření `ItemCommand` obslužné rutiny události je doporučeno vždy nejprve zkontrolujte příchozí `CommandName` hodnota, protože *žádné* `Command` událostí aktivováno *žádné* tlačítko, LinkButton, nebo Způsobí, že ImageButton v rámci opakovače `ItemCommand` na aktivaci události.</span><span class="sxs-lookup"><span data-stu-id="1f56e-279">Whenever creating an `ItemCommand` event handler it is prudent to always first check the incoming `CommandName` value because *any* `Command` event raised by *any* Button, LinkButton, or ImageButton within the Repeater will cause the `ItemCommand` event to fire.</span></span> <span data-ttu-id="1f56e-280">Když jsme aktuálně k dispozici pouze jeden takový LinkButton nyní, v budoucnu jsme (nebo jiné vývojáře na náš tým) může přidání další tlačítko na opakovače, při kliknutí na, vyvolá stejné `ItemCommand` obslužné rutiny události.</span><span class="sxs-lookup"><span data-stu-id="1f56e-280">While we currently only have one such LinkButton now, in the future we (or another developer on our team) might add additional button Web controls to the Repeater that, when clicked, raises the same `ItemCommand` event handler.</span></span> <span data-ttu-id="1f56e-281">Proto je nejlepší vždy ujistěte se, abyste zkontrolovat s `CommandName` vlastnost a pouze pokračujte programové logiky, pokud odpovídá na hodnotu očekávanou pro.</span><span class="sxs-lookup"><span data-stu-id="1f56e-281">Therefore, it s best to always make sure you check the `CommandName` property and only proceed with your programmatic logic if it matches up to the value expected.</span></span>

<span data-ttu-id="1f56e-282">Po zajištění, že předané `CommandName` hodnota rovná ListProducts, obslužné rutiny události poté přiřadí `CategoryProductsDataSource` ObjectDataSource s `CategoryID` parametr na hodnotu předané `CommandArgument`.</span><span class="sxs-lookup"><span data-stu-id="1f56e-282">After ensuring that the passed-in `CommandName` value equals ListProducts, the event handler then assigns the `CategoryProductsDataSource` ObjectDataSource s `CategoryID` parameter to the value of the passed-in `CommandArgument`.</span></span> <span data-ttu-id="1f56e-283">Tuto změnu ObjectDataSource s `SelectParameters` automaticky způsobí, že DataList k sám rebind ke zdroji dat obsahující produkty pro nově zvolené kategorii.</span><span class="sxs-lookup"><span data-stu-id="1f56e-283">This modification to the ObjectDataSource s `SelectParameters` automatically causes the DataList to rebind itself to the data source, showing the products for the newly selected category.</span></span>


[!code-csharp[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample12.cs)]

<span data-ttu-id="1f56e-284">S těmito přídavky našem kurzu je dokončena.</span><span class="sxs-lookup"><span data-stu-id="1f56e-284">With these additions, our tutorial is complete!</span></span> <span data-ttu-id="1f56e-285">Za chvíli otestování v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="1f56e-285">Take a moment to test it out in a browser.</span></span> <span data-ttu-id="1f56e-286">Obrázek 14 zobrazuje obrazovky, když nejdřív na stránce.</span><span class="sxs-lookup"><span data-stu-id="1f56e-286">Figure 14 shows the screen when first visiting the page.</span></span> <span data-ttu-id="1f56e-287">Vzhledem k tomu, že kategorii ještě má být vybrána, zobrazí se žádné produkty.</span><span class="sxs-lookup"><span data-stu-id="1f56e-287">Since a category has yet to be selected, no products are displayed.</span></span> <span data-ttu-id="1f56e-288">Kliknutím na kategorii, například produktu, se zobrazí těchto produktů v kategorii produktu v zobrazení dvou sloupců (viz obrázek 15).</span><span class="sxs-lookup"><span data-stu-id="1f56e-288">Clicking on a category, such as Produce, displays those products in the Product category in a two-column view (see Figure 15).</span></span>


<span data-ttu-id="1f56e-289">[![Žádné produkty se zobrazí při první návštěvě stránky](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image39.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="1f56e-289">[![No Products are Displayed When First Visiting the Page](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image39.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image38.png)</span></span>

<span data-ttu-id="1f56e-290">**Obrázek 14**: Ne produkty se zobrazí při prvním na stránce ([Kliknutím zobrazit obrázek v plné velikosti](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="1f56e-290">**Figure 14**: No Products are Displayed When First Visiting the Page ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image40.png))</span></span>


<span data-ttu-id="1f56e-291">[![Kliknutím na seznamy kategorie produktů odpovídající produkty vpravo](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image42.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="1f56e-291">[![Clicking the Produce Category Lists the Matching Products to the Right](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image42.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image41.png)</span></span>

<span data-ttu-id="1f56e-292">**Obrázek 15**: Kliknutím na kategorii produktu jsou uvedeny produkty odpovídající vpravo ([Kliknutím zobrazit obrázek v plné velikosti](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image43.png))</span><span class="sxs-lookup"><span data-stu-id="1f56e-292">**Figure 15**: Clicking the Produce Category Lists the Matching Products to the Right ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image43.png))</span></span>


## <a name="summary"></a><span data-ttu-id="1f56e-293">Souhrn</span><span class="sxs-lookup"><span data-stu-id="1f56e-293">Summary</span></span>

<span data-ttu-id="1f56e-294">Jak jsme viděli v tomto kurzu a ten předchozí, a podrobností sestavy může být rozloženy dvě stránky, nebo konsolidovat v jednom.</span><span class="sxs-lookup"><span data-stu-id="1f56e-294">As we saw in this tutorial and the preceding one, master/detail reports can be spread out across two pages, or consolidated on one.</span></span> <span data-ttu-id="1f56e-295">Zobrazení hlavní/podrobnosti sestavy na jedné stránce, ale zavádí některé běžné problémy, o tom, co nejlépe rozložení hlavní a podrobnosti záznamy na stránce.</span><span class="sxs-lookup"><span data-stu-id="1f56e-295">Displaying a master/details report on a single page, however, introduces some challenges on how best to layout the master and details records on the page.</span></span> <span data-ttu-id="1f56e-296">V *hlavní/podrobností volitelný GridView hlavní pomocí DetailsView podrobnosti* kurzu jsme měli podrobnosti záznamy se nad hlavní záznamy; v tomto kurzu jsme použili šablon stylů CSS techniky tak, aby měl float hlavní záznamy do nalevo od podrobnosti.</span><span class="sxs-lookup"><span data-stu-id="1f56e-296">In the *Master/Detail Using a Selectable Master GridView with a Details DetailsView* tutorial we had the details records appear above the master records; in this tutorial we used CSS techniques to have the master records float to the left of the details.</span></span>

<span data-ttu-id="1f56e-297">Společně s zobrazení hlavní/podrobnosti sestavy, jsme také měli možnost zjistit, jak načíst počet produktů, které jsou spojené s každou kategorii a jak provádět logiku na straně serveru, když LinkButton (nebo tlačítka nebo ImageButton) po kliknutí na uvnitř Opakovače.</span><span class="sxs-lookup"><span data-stu-id="1f56e-297">Along with displaying master/details reports, we also had the opportunity to explore how to retrieve the number of products associated with each category as well as how to perform server-side logic when a LinkButton (or Button or ImageButton) is clicked from within a Repeater.</span></span>

<span data-ttu-id="1f56e-298">V tomto kurzu dokončení naše prozkoumání a podrobností sestavy s DataList a opakovače.</span><span class="sxs-lookup"><span data-stu-id="1f56e-298">This tutorial completes our examination of master/detail reports with the DataList and Repeater.</span></span> <span data-ttu-id="1f56e-299">Naše další sadu kurzy ilustruje způsob přidání, úpravy a odstraňování možnosti do ovládacího prvku DataList.</span><span class="sxs-lookup"><span data-stu-id="1f56e-299">Our next set of tutorials will illustrate how to add editing and deleting capabilities to the DataList control.</span></span>

<span data-ttu-id="1f56e-300">Radostí programování!</span><span class="sxs-lookup"><span data-stu-id="1f56e-300">Happy Programming!</span></span>

## <a name="further-reading"></a><span data-ttu-id="1f56e-301">Další čtení</span><span class="sxs-lookup"><span data-stu-id="1f56e-301">Further Reading</span></span>

<span data-ttu-id="1f56e-302">Další informace o tématech popsané v tomto kurzu najdete v následujících zdrojích informací:</span><span class="sxs-lookup"><span data-stu-id="1f56e-302">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- <span data-ttu-id="1f56e-303">[Floatutorial](http://css.maxdesign.com.au/floatutorial/) kurz týkající se plovoucí elementů šablon stylů CSS pomocí šablon stylů CSS</span><span class="sxs-lookup"><span data-stu-id="1f56e-303">[Floatutorial](http://css.maxdesign.com.au/floatutorial/) a tutorial on floating CSS elements with CSS</span></span>
- <span data-ttu-id="1f56e-304">[Umístění šablon stylů CSS](http://www.brainjar.com/css/positioning/) Další informace o umístění elementů pomocí šablon stylů CSS</span><span class="sxs-lookup"><span data-stu-id="1f56e-304">[CSS Positioning](http://www.brainjar.com/css/positioning/) more information on positioning elements with CSS</span></span>
- <span data-ttu-id="1f56e-305">[Kterým se obsah s HTML](http://www.w3schools.com/html/html_layout.asp) pomocí `<table>` s a další elementy HTML pro umístění</span><span class="sxs-lookup"><span data-stu-id="1f56e-305">[Laying Out Content with HTML](http://www.w3schools.com/html/html_layout.asp) using `<table>` s and other HTML elements for positioning</span></span>

## <a name="about-the-author"></a><span data-ttu-id="1f56e-306">O autorovi</span><span class="sxs-lookup"><span data-stu-id="1f56e-306">About the Author</span></span>

<span data-ttu-id="1f56e-307">[Scott Meisnerová](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor sedm ASP/ASP.NET knih a zakladatele z [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracuje s technologií Microsoft Web od 1998.</span><span class="sxs-lookup"><span data-stu-id="1f56e-307">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="1f56e-308">Scott funguje jako nezávislé poradce, trainer a zapisovače.</span><span class="sxs-lookup"><span data-stu-id="1f56e-308">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="1f56e-309">Jeho nejnovější seznam k [ *Edice nakladatelství Sams naučit sami technologii ASP.NET 2.0 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="1f56e-309">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="1f56e-310">Dosažitelný v [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) nebo prostřednictvím svého blogu, který najdete na [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="1f56e-310">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="1f56e-311">Zvláštní poděkování</span><span class="sxs-lookup"><span data-stu-id="1f56e-311">Special Thanks To</span></span>

<span data-ttu-id="1f56e-312">Tento kurz řady byla zkontrolovány uživatelem mnoho užitečné kontrolorů.</span><span class="sxs-lookup"><span data-stu-id="1f56e-312">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="1f56e-313">Vést kontrolorem pro tento kurz byl Zack Petr.</span><span class="sxs-lookup"><span data-stu-id="1f56e-313">Lead reviewer for this tutorial was Zack Jones.</span></span> <span data-ttu-id="1f56e-314">Kontrola Moje nadcházející články MSDN máte zájem?</span><span class="sxs-lookup"><span data-stu-id="1f56e-314">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="1f56e-315">Pokud ano, vyřaďte mi řádek v [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="1f56e-315">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="1f56e-316">[Předchozí](master-detail-filtering-acess-two-pages-datalist-cs.md)
[další](master-detail-filtering-with-a-dropdownlist-datalist-vb.md)</span><span class="sxs-lookup"><span data-stu-id="1f56e-316">[Previous](master-detail-filtering-acess-two-pages-datalist-cs.md)
[Next](master-detail-filtering-with-a-dropdownlist-datalist-vb.md)</span></span>
