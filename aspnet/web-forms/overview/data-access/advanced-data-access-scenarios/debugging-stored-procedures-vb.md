---
uid: web-forms/overview/data-access/advanced-data-access-scenarios/debugging-stored-procedures-vb
title: Ladění uložené procedury (VB) | Microsoft Docs
author: rick-anderson
description: Edice Visual Studio Professional a Team System umožňují nastavit zarážky a krok v k uloženým procedurám v systému SQL Server, vytváření, ladění, uložené...
ms.author: aspnetcontent
manager: wpickett
ms.date: 08/03/2007
ms.topic: article
ms.assetid: 9ed8ccb5-5f31-4eb4-976d-cabf4b45ca09
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/advanced-data-access-scenarios/debugging-stored-procedures-vb
msc.type: authoredcontent
ms.openlocfilehash: 3391a78eaeb0add46e75048069a614ba00628f67
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/06/2018
ms.locfileid: "30876446"
---
<a name="debugging-stored-procedures-vb"></a><span data-ttu-id="4c06e-103">Ladění uložené procedury (VB)</span><span class="sxs-lookup"><span data-stu-id="4c06e-103">Debugging Stored Procedures (VB)</span></span>
====================
<span data-ttu-id="4c06e-104">podle [Scott Meisnerová](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="4c06e-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="4c06e-105">[Stáhněte si kód](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_74_VB.zip) nebo [stáhnout PDF](debugging-stored-procedures-vb/_static/datatutorial74vb1.pdf)</span><span class="sxs-lookup"><span data-stu-id="4c06e-105">[Download Code](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_74_VB.zip) or [Download PDF](debugging-stored-procedures-vb/_static/datatutorial74vb1.pdf)</span></span>

> <span data-ttu-id="4c06e-106">Edice Visual Studio Professional a Team System umožňují nastavit zarážky a kroku k uloženým procedurám v systému SQL Server, vytváření, ladění uložené procedury stejně snadná jako ladění kódu aplikace.</span><span class="sxs-lookup"><span data-stu-id="4c06e-106">Visual Studio Professional and Team System editions allow you to set breakpoints and step in to stored procedures within SQL Server, making debugging stored procedures as easy as debugging application code.</span></span> <span data-ttu-id="4c06e-107">Tento kurz představuje přímé databáze ladění, trasování a ladění aplikací uložených procedur.</span><span class="sxs-lookup"><span data-stu-id="4c06e-107">This tutorial demonstrates direct database debugging and application debugging of stored procedures.</span></span>


## <a name="introduction"></a><span data-ttu-id="4c06e-108">Úvod</span><span class="sxs-lookup"><span data-stu-id="4c06e-108">Introduction</span></span>

<span data-ttu-id="4c06e-109">Visual Studio poskytuje bohaté prostředí ladění.</span><span class="sxs-lookup"><span data-stu-id="4c06e-109">Visual Studio provides a rich debugging experience.</span></span> <span data-ttu-id="4c06e-110">S několika stisknutí kláves nebo kliknutí myší je možné použít zarážky zastavit provádění programu a zkontrolujte jeho stavu a řízení toku s.</span><span class="sxs-lookup"><span data-stu-id="4c06e-110">With a few keystrokes or clicks of the mouse, it s possible to use breakpoints to stop execution of a program and examine its state and control flow.</span></span> <span data-ttu-id="4c06e-111">Společně s ladění kódu aplikace, Visual Studio nabízí podporu pro ladění uložené procedury z v systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="4c06e-111">Along with debugging application code, Visual Studio offers support for debugging stored procedures from within SQL Server.</span></span> <span data-ttu-id="4c06e-112">Stejně jako lze nastavit zarážky v kódu aplikace ASP.NET kódu nebo třída vrstvu obchodní logiky, takže příliš jejich se může v rámci uložené procedury.</span><span class="sxs-lookup"><span data-stu-id="4c06e-112">Just like breakpoints can be set within the code of an ASP.NET code-behind class or Business Logic Layer class, so too can they be placed within stored procedures.</span></span>

<span data-ttu-id="4c06e-113">V tomto kurzu se podíváme na zanoříte se do uložené procedury z Průzkumníka serveru Visual Studia a jak nastavit zarážky, které jsou dosáhl Pokud uložená procedura je volána z spuštěná aplikace ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="4c06e-113">In this tutorial we will look at stepping into stored procedures from the Server Explorer within Visual Studio as well as how to set breakpoints that are hit when the stored procedure is called from the running ASP.NET application.</span></span>

> [!NOTE]
> <span data-ttu-id="4c06e-114">Uložené procedury bohužel pouze může být stupeň do a ladit prostřednictvím verze Professional a systémy týmu sady Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4c06e-114">Unfortunately, stored procedures can only be stepped into and debugged through the Professional and Team Systems versions of Visual Studio.</span></span> <span data-ttu-id="4c06e-115">Pokud používáte Visual Web Developer nebo standardní verzi sady Visual Studio, jste Vítejte přečtěte společně, protože jsme vás provede kroky potřebnými k ladění uložené procedury, ale nebudete moct replikovat na váš počítač tyto kroky.</span><span class="sxs-lookup"><span data-stu-id="4c06e-115">If you are using Visual Web Developer or the standard version of Visual Studio, you are welcome to read along as we walk through the steps necessary to debug stored procedures, but you will not be able to replicate these steps on your machine.</span></span>


## <a name="sql-server-debugging-concepts"></a><span data-ttu-id="4c06e-116">Koncepty ladění SQL serveru</span><span class="sxs-lookup"><span data-stu-id="4c06e-116">SQL Server Debugging Concepts</span></span>

<span data-ttu-id="4c06e-117">Microsoft SQL Server 2005 byla navržená tak, aby nabízí integraci s [Common Language Runtime (CLR)](https://msdn.microsoft.com/netframework/aa497266.aspx), což je modul runtime používá všechna sestavení .NET.</span><span class="sxs-lookup"><span data-stu-id="4c06e-117">Microsoft SQL Server 2005 was designed to provide integration with the [Common Language Runtime (CLR)](https://msdn.microsoft.com/netframework/aa497266.aspx), which is the runtime used by all .NET assemblies.</span></span> <span data-ttu-id="4c06e-118">V důsledku toho systému SQL Server 2005 podporuje spravované databázové objekty.</span><span class="sxs-lookup"><span data-stu-id="4c06e-118">Consequently, SQL Server 2005 supports managed database objects.</span></span> <span data-ttu-id="4c06e-119">To znamená můžete vytvořit databázové objekty, jako jsou uložené procedury a uživatelem definované funkce (UDF) jako metody ve třídě jazyka Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="4c06e-119">That is, you can create database objects like stored procedures and User-Defined Functions (UDFs) as methods in a Visual Basic class.</span></span> <span data-ttu-id="4c06e-120">To umožňuje tyto uložené procedury a funkce UDF, abyste mohli využívat funkce v rozhraní .NET Framework a z vlastní třídy.</span><span class="sxs-lookup"><span data-stu-id="4c06e-120">This enables these stored procedures and UDFs to utilize functionality in the .NET Framework and from your own custom classes.</span></span> <span data-ttu-id="4c06e-121">Samozřejmě SQL Server 2005 taky poskytuje podporu pro databázové objekty T-SQL.</span><span class="sxs-lookup"><span data-stu-id="4c06e-121">Of course, SQL Server 2005 also provides support for T-SQL database objects.</span></span>

<span data-ttu-id="4c06e-122">SQL Server 2005 nabízí podporu ladění pro T-SQL a spravované databázové objekty.</span><span class="sxs-lookup"><span data-stu-id="4c06e-122">SQL Server 2005 offers debugging support for both T-SQL and managed database objects.</span></span> <span data-ttu-id="4c06e-123">Však můžete tyto objekty ladit pouze prostřednictvím edice Visual Studio 2005 Professional a systémy týmu.</span><span class="sxs-lookup"><span data-stu-id="4c06e-123">However, these objects can only be debugged through Visual Studio 2005 Professional and Team Systems editions.</span></span> <span data-ttu-id="4c06e-124">V tomto kurzu vyzkoušíme ladění T-SQL databázové objekty.</span><span class="sxs-lookup"><span data-stu-id="4c06e-124">In this tutorial we will examine debugging T-SQL database objects.</span></span> <span data-ttu-id="4c06e-125">Další kurz zjistí ladění spravovaného databázové objekty.</span><span class="sxs-lookup"><span data-stu-id="4c06e-125">The subsequent tutorial looks at debugging managed database objects.</span></span>

<span data-ttu-id="4c06e-126">[Přehled T-SQL a CLR ladění SQL Server 2005](https://blogs.msdn.com/sqlclr/archive/2006/06/29/651644.aspx) položku blogu z [integrace modulu CLR s aplikací SQL Server 2005 team](https://blogs.msdn.com/sqlclr/default.aspx) klade důraz tři způsoby, jak ladit objektů systému SQL Server 2005 ze sady Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="4c06e-126">The [Overview of T-SQL and CLR Debugging in SQL Server 2005](https://blogs.msdn.com/sqlclr/archive/2006/06/29/651644.aspx) blog entry from the [SQL Server 2005 CLR Integration team](https://blogs.msdn.com/sqlclr/default.aspx) highlights the three ways to debug SQL Server 2005 objects from Visual Studio:</span></span>

- <span data-ttu-id="4c06e-127">**Přímé ladění databáze (DDD)** – z Průzkumníka serveru můžete jsme krok do libovolného objektu databáze T-SQL, jako je například uložené procedury a funkce UDF.</span><span class="sxs-lookup"><span data-stu-id="4c06e-127">**Direct Database Debugging (DDD)** - from Server Explorer we can step into any T-SQL database object, such as stored procedures and UDFs.</span></span> <span data-ttu-id="4c06e-128">Vyzkoušíme DDD v kroku 1.</span><span class="sxs-lookup"><span data-stu-id="4c06e-128">We will examine DDD in Step 1.</span></span>
- <span data-ttu-id="4c06e-129">**Ladění aplikace** -jsme nastavte zarážky v rámci objektu databáze a poté spusťte naše aplikace ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="4c06e-129">**Application Debugging** - we can set breakpoints within a database object and then run our ASP.NET application.</span></span> <span data-ttu-id="4c06e-130">Po provedení databázový objekt zarážce bude dosaženo a řízení předat k ladicího programu.</span><span class="sxs-lookup"><span data-stu-id="4c06e-130">When the database object is executed, the breakpoint will be hit and control turned over to the debugger.</span></span> <span data-ttu-id="4c06e-131">Všimněte si, že s laděním aplikace jsme nelze kroku do objektu databáze z kódu aplikace.</span><span class="sxs-lookup"><span data-stu-id="4c06e-131">Note that with application debugging we cannot step into a database object from application code.</span></span> <span data-ttu-id="4c06e-132">Jsme musí explicitně nastavte zarážky v těchto uložené procedury nebo funkce UDF kde chceme, aby ladicí program na Zastavit.</span><span class="sxs-lookup"><span data-stu-id="4c06e-132">We must explicitly set breakpoints in those stored procedures or UDFs where we want the debugger to stop.</span></span> <span data-ttu-id="4c06e-133">Ladění aplikace je zkontrolován spouštění v kroku 2.</span><span class="sxs-lookup"><span data-stu-id="4c06e-133">Application debugging is examined starting in Step 2.</span></span>
- <span data-ttu-id="4c06e-134">**Ladění z projektu serveru SQL** -edice Visual Studio Professional a systémy Team zahrnují typ projekt SQL Server, který se běžně používá k vytvoření spravovaného databázové objekty.</span><span class="sxs-lookup"><span data-stu-id="4c06e-134">**Debugging from a SQL Server Project** - Visual Studio Professional and Team Systems editions include a SQL Server Project type that is commonly used to create managed database objects.</span></span> <span data-ttu-id="4c06e-135">Vyzkoušíme pomocí SQL serveru projekty a ladění jejich obsah v dalším kurzu.</span><span class="sxs-lookup"><span data-stu-id="4c06e-135">We will examine using SQL Server Projects and debugging their contents in the next tutorial.</span></span>

<span data-ttu-id="4c06e-136">Visual Studio můžete ladit uložené procedury na místní a vzdálené instance systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="4c06e-136">Visual Studio can debug stored procedures on local and remote SQL Server instances.</span></span> <span data-ttu-id="4c06e-137">Místní instance systému SQL Server je ten, který je nainstalován na stejném počítači jako Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4c06e-137">A local SQL Server instance is one that is installed on the same machine as Visual Studio.</span></span> <span data-ttu-id="4c06e-138">Pokud není na počítači pro vývoj databázi systému SQL Server, který používáte, považuje vzdálenou instanci.</span><span class="sxs-lookup"><span data-stu-id="4c06e-138">If the SQL Server database you are using is not located on your development machine, then it is considered a remote instance.</span></span> <span data-ttu-id="4c06e-139">Tyto kurzy jsme již používáte místní instance systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="4c06e-139">For these tutorials we have been using local SQL Server instances.</span></span> <span data-ttu-id="4c06e-140">Ladění uložené procedury na vzdálené instance systému SQL server vyžaduje další konfigurační kroky než při ladění uložené procedury na místní instance.</span><span class="sxs-lookup"><span data-stu-id="4c06e-140">Debugging stored procedures on a remote SQL server instance requires more configuration steps than when debugging stored procedures on a local instance.</span></span>

<span data-ttu-id="4c06e-141">Pokud používáte místní instanci systému SQL Server, můžete začněte krokem 1 a fungovat až do konce tohoto kurzu.</span><span class="sxs-lookup"><span data-stu-id="4c06e-141">If you are using a local SQL Server instance, you can start with Step 1 and work through this tutorial to the end.</span></span> <span data-ttu-id="4c06e-142">Pokud používáte vzdálenou instanci systému SQL Server, ale budete nejprve zajistit, aby při ladění jste přihlášeni na počítači pro vývoj pomocí uživatelského účtu systému Windows, který má přihlášení systému SQL Server ve vzdálené instanci.</span><span class="sxs-lookup"><span data-stu-id="4c06e-142">If you are using a remote SQL Server instance, however, you will first need to ensure that when debugging you are logged to your development machine with a Windows user account that has a SQL Server login on the remote instance.</span></span> <span data-ttu-id="4c06e-143">Moveover, toto přihlášení databáze a přihlášení k databázi používá k připojení k databázi z spuštěná aplikace ASP.NET musí být členy `sysadmin` role.</span><span class="sxs-lookup"><span data-stu-id="4c06e-143">Moveover, both this database login and the database login used to connect to the database from the running ASP.NET application must be members of the `sysadmin` role.</span></span> <span data-ttu-id="4c06e-144">Zobrazí objekty ladění T-SQL databáze v oddílu vzdálené instance na konci tohoto kurzu pro další informace o konfiguraci sady Visual Studio a ladění vzdálené instance systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="4c06e-144">See the Debugging T-SQL Database Objects on Remote Instances section at the end of this tutorial for more information on configuring Visual Studio and SQL Server to debug a remote instance.</span></span>

<span data-ttu-id="4c06e-145">Nakonec uvědomit, že ladění podporu pro databázové objekty T-SQL není jako funkce bohaté jako ladění podporu pro aplikace .NET.</span><span class="sxs-lookup"><span data-stu-id="4c06e-145">Finally, understand that debugging support for T-SQL database objects is not as feature rich as debugging support for .NET applications.</span></span> <span data-ttu-id="4c06e-146">Například zarážek podmínky a filtry nejsou podporovány, jen podmnožinu ladění windows jsou k dispozici, nemůžete použít upravit a pokračovat, vykreslení hodnot proměnných nemá a podobně.</span><span class="sxs-lookup"><span data-stu-id="4c06e-146">For example, breakpoint conditions and filters are not supported, only a subset of the debugging windows are available, you cannot use Edit and Continue, the Immediate window is rendered useless, and so forth.</span></span> <span data-ttu-id="4c06e-147">V tématu [omezení příkazů ladicího programu a funkce](https://msdn.microsoft.com/library/ms165035(VS.80).aspx) Další informace.</span><span class="sxs-lookup"><span data-stu-id="4c06e-147">See [Limitations on Debugger Commands and Features](https://msdn.microsoft.com/library/ms165035(VS.80).aspx) for more information.</span></span>

## <a name="step-1-directly-stepping-into-a-stored-procedure"></a><span data-ttu-id="4c06e-148">Krok 1: Přímo Zanoříte se do uložené procedury</span><span class="sxs-lookup"><span data-stu-id="4c06e-148">Step 1: Directly Stepping Into a Stored Procedure</span></span>

<span data-ttu-id="4c06e-149">Visual Studio snadno přímo ladění objekt databáze.</span><span class="sxs-lookup"><span data-stu-id="4c06e-149">Visual Studio makes it easy to directly debug a database object.</span></span> <span data-ttu-id="4c06e-150">Umožní s, podívejte se na tom, jak použít funkci přímé ladění databáze (DDD) pro krok do `Products_SelectByCategoryID` uloženou proceduru v databázi Northwind.</span><span class="sxs-lookup"><span data-stu-id="4c06e-150">Let s look at how to use the Direct Database Debugging (DDD) feature to step into the `Products_SelectByCategoryID` stored procedure in the Northwind database.</span></span> <span data-ttu-id="4c06e-151">Jak již název napovídá, `Products_SelectByCategoryID` vrátí informace o produktu pro určité kategorie; byl vytvořen [použití existující uložené procedury, pro typové datové sady s TableAdapters](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-vb.md) kurzu.</span><span class="sxs-lookup"><span data-stu-id="4c06e-151">As its name implies, `Products_SelectByCategoryID` returns product information for a particular category; it was created in the [Using Existing Stored Procedures for the Typed DataSet s TableAdapters](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-vb.md) tutorial.</span></span> <span data-ttu-id="4c06e-152">Začněte tím, že přejdete na Průzkumníka serveru a rozbalte uzel databáze Northwind.</span><span class="sxs-lookup"><span data-stu-id="4c06e-152">Start by going to the Server Explorer and expand the Northwind database node.</span></span> <span data-ttu-id="4c06e-153">Dále přejděte do složky, uložené procedury, klikněte pravým tlačítkem na `Products_SelectByCategoryID` uložené procedury a vyberte možnost krok do uloženou proceduru v místní nabídce.</span><span class="sxs-lookup"><span data-stu-id="4c06e-153">Next, drill down into the Stored Procedures folder, right-click on the `Products_SelectByCategoryID` stored procedure, and choose the Step Into Stored Procedure option from the context menu.</span></span> <span data-ttu-id="4c06e-154">Tato akce spustí ladicí program.</span><span class="sxs-lookup"><span data-stu-id="4c06e-154">This will start the debugger.</span></span>

<span data-ttu-id="4c06e-155">Vzhledem k tomu `Products_SelectByCategoryID` uložená procedura očekává, že `@CategoryID` vstupní parametr, jsme vyzváni k zadání tuto hodnotu.</span><span class="sxs-lookup"><span data-stu-id="4c06e-155">Since the `Products_SelectByCategoryID` stored procedure expects a `@CategoryID` input parameter, we are asked to provide this value.</span></span> <span data-ttu-id="4c06e-156">Zadejte 1, který vrátí informace o nápoje.</span><span class="sxs-lookup"><span data-stu-id="4c06e-156">Enter 1, which will return information about the beverages.</span></span>


![Použijte hodnotu 1 pro @CategoryID parametr](debugging-stored-procedures-vb/_static/image1.png)

<span data-ttu-id="4c06e-158">**Obrázek 1**: použijte hodnotu 1 pro `@CategoryID` parametr</span><span class="sxs-lookup"><span data-stu-id="4c06e-158">**Figure 1**: Use the Value 1 for the `@CategoryID` Parameter</span></span>


<span data-ttu-id="4c06e-159">Po poskytnutí hodnota `@CategoryID` se spustí parametr uložené procedury.</span><span class="sxs-lookup"><span data-stu-id="4c06e-159">After supplying the value for the `@CategoryID` parameter, the stored procedure is executed.</span></span> <span data-ttu-id="4c06e-160">Namísto spuštění dokončen, ale ladicí program zastaví zpracování na první příkaz.</span><span class="sxs-lookup"><span data-stu-id="4c06e-160">Rather than running to completion, though, the debugger halts execution on the first statement.</span></span> <span data-ttu-id="4c06e-161">Poznámka: žlutá šipka na okraji označující aktuální umístění v uložené proceduře.</span><span class="sxs-lookup"><span data-stu-id="4c06e-161">Note the yellow arrow in the margin, indicating the current location in the stored procedure.</span></span> <span data-ttu-id="4c06e-162">Můžete zobrazit a upravit hodnoty parametrů pomocí okna kukátka nebo podržením ukazatele nad název parametru v uložené proceduře.</span><span class="sxs-lookup"><span data-stu-id="4c06e-162">You can view and edit parameter values through the Watch window or by hovering over the parameter name in the stored procedure.</span></span>


<span data-ttu-id="4c06e-163">[![Na první příkaz uložená procedura se zastavil ladicí program](debugging-stored-procedures-vb/_static/image3.png)](debugging-stored-procedures-vb/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="4c06e-163">[![The Debugger has Halted on the First Statement of the Stored Procedure](debugging-stored-procedures-vb/_static/image3.png)](debugging-stored-procedures-vb/_static/image2.png)</span></span>

<span data-ttu-id="4c06e-164">**Obrázek 2**: na první příkaz uložená procedura se zastavil ladicím programu ([Kliknutím zobrazit obrázek v plné velikosti](debugging-stored-procedures-vb/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="4c06e-164">**Figure 2**: The Debugger has Halted on the First Statement of the Stored Procedure ([Click to view full-size image](debugging-stored-procedures-vb/_static/image4.png))</span></span>


<span data-ttu-id="4c06e-165">Projděte jeden příkaz uložené procedury najednou, klikněte na tlačítko Krokovat s přeskočením na panelu nástrojů nebo stiskněte klávesu F10.</span><span class="sxs-lookup"><span data-stu-id="4c06e-165">To step through the stored procedure one statement at a time, click the Step Over button in the Toolbar or hit the F10 key.</span></span> <span data-ttu-id="4c06e-166">`Products_SelectByCategoryID` Uložené procedury obsahuje jediný `SELECT` příkaz tak, aby stiskne F10 krok přes jediný příkaz a dokončit provádění uložené procedury.</span><span class="sxs-lookup"><span data-stu-id="4c06e-166">The `Products_SelectByCategoryID` stored procedure contains a single `SELECT` statement, so hitting F10 will step over the single statement and complete the execution of the stored procedure.</span></span> <span data-ttu-id="4c06e-167">Po dokončení uložené procedury, v okně výstupu se zobrazí jeho výstup a ladicí program bude ukončen.</span><span class="sxs-lookup"><span data-stu-id="4c06e-167">After the stored procedure has completed, its output will appear in the Output window and the debugger will terminate.</span></span>

> [!NOTE]
> <span data-ttu-id="4c06e-168">Ladění T-SQL dochází na úrovni příkaz; nelze krok do `SELECT` příkaz.</span><span class="sxs-lookup"><span data-stu-id="4c06e-168">T-SQL debugging occurs at the statement level; you cannot step into a `SELECT` statement.</span></span>


## <a name="step-2-configuring-the-website-for-application-debugging"></a><span data-ttu-id="4c06e-169">Krok 2: Konfigurace webu pro ladění aplikace</span><span class="sxs-lookup"><span data-stu-id="4c06e-169">Step 2: Configuring the Website for Application Debugging</span></span>

<span data-ttu-id="4c06e-170">Při ladění uložené procedury přímo z Průzkumníka serveru je užitečný, v mnoha scénářích jsme zajímá více ladění uložené procedury, když je volána z našich aplikace ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="4c06e-170">While debugging a stored procedure directly from the Server Explorer is handy, in many scenarios we are more interested in debugging the stored procedure when it is called from our ASP.NET application.</span></span> <span data-ttu-id="4c06e-171">Můžeme přidat zarážky uložené procedury z Visual Studia a pak spusťte ladění aplikace ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="4c06e-171">We can add breakpoints to a stored procedure from within Visual Studio and then start debugging the ASP.NET application.</span></span> <span data-ttu-id="4c06e-172">Po vyvolání uložená procedura s zarážky z aplikace provádění se zastaví u zarážky a jsme můžete zobrazit a změnit hodnoty parametru uložené procedury s a projděte jeho příkazy, stejně jako jsme provedli v kroku 1.</span><span class="sxs-lookup"><span data-stu-id="4c06e-172">When a stored procedure with breakpoints is invoked from the application, execution will halt at the breakpoint and we can view and change the stored procedure s parameter values and step through its statements, just like we did in Step 1.</span></span>

<span data-ttu-id="4c06e-173">Můžeme začít ladění uložené procedury volané z aplikace, potřebujeme dáte pokyn, aby webové aplikace ASP.NET pro integraci s ladicím programem systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="4c06e-173">Before we can start debugging stored procedures called from the application, we need to instruct the ASP.NET web application to integrate with the SQL Server debugger.</span></span> <span data-ttu-id="4c06e-174">Začněte tím, že pravým tlačítkem myši na název webu v Průzkumníku řešení (`ASPNET_Data_Tutorial_74_VB`).</span><span class="sxs-lookup"><span data-stu-id="4c06e-174">Start by right-clicking on the website name in the Solution Explorer (`ASPNET_Data_Tutorial_74_VB`).</span></span> <span data-ttu-id="4c06e-175">Zvolte možnost stránky vlastností v místní nabídce vyberte položku Možnosti spuštění na levé straně a zaškrtnutím políčka systému SQL Server v části ladicí programy (viz obrázek 3).</span><span class="sxs-lookup"><span data-stu-id="4c06e-175">Choose the Property Pages option from the context menu, select the Start Options item on the left, and check the SQL Server checkbox in the Debuggers section (see Figure 3).</span></span>


<span data-ttu-id="4c06e-176">[![Zaškrtnutím políčka SQL serveru na stránkách vlastností s aplikací](debugging-stored-procedures-vb/_static/image6.png)](debugging-stored-procedures-vb/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="4c06e-176">[![Check the SQL Server Checkbox in the Application s Property Pages](debugging-stored-procedures-vb/_static/image6.png)](debugging-stored-procedures-vb/_static/image5.png)</span></span>

<span data-ttu-id="4c06e-177">**Obrázek 3**: Zaškrtnutím políčka SQL Server v aplikaci s stránky vlastností ([Kliknutím zobrazit obrázek v plné velikosti](debugging-stored-procedures-vb/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="4c06e-177">**Figure 3**: Check the SQL Server Checkbox in the Application s Property Pages ([Click to view full-size image](debugging-stored-procedures-vb/_static/image7.png))</span></span>


<span data-ttu-id="4c06e-178">Kromě toho je potřeba aktualizovat připojovací řetězec databáze používá aplikace tak, aby sdružování připojení je zakázána.</span><span class="sxs-lookup"><span data-stu-id="4c06e-178">Additionally, we need to update the database connection string used by the application so that connection pooling is disabled.</span></span> <span data-ttu-id="4c06e-179">Při připojení k databázi je ukončeno, odpovídající `SqlConnection` objekt je umístěn v rámci fondu dostupné připojení.</span><span class="sxs-lookup"><span data-stu-id="4c06e-179">When a connection to a database is closed, the corresponding `SqlConnection` object is placed in a pool of available connections.</span></span> <span data-ttu-id="4c06e-180">Při navazování připojení k databázi, objekt dostupné připojení lze načíst z tohoto fondu namísto nutnosti vytvořit a vytvořit nové připojení.</span><span class="sxs-lookup"><span data-stu-id="4c06e-180">When establishing a connection to a database, an available connection object can be retrieved from this pool rather than having to create and establish a new connection.</span></span> <span data-ttu-id="4c06e-181">Tato sdružování připojení objektů je vylepšení výkonu a ve výchozím nastavení zapnutá.</span><span class="sxs-lookup"><span data-stu-id="4c06e-181">This pooling of connection objects is a performance enhancement and is enabled by default.</span></span> <span data-ttu-id="4c06e-182">Ale při ladění budeme rádi vypnout sdružování připojení, protože ladění infrastruktury není správně obnovila při práci s připojením, který byl odebrán z fondu.</span><span class="sxs-lookup"><span data-stu-id="4c06e-182">However, when debugging we want to turn off connection pooling because the debugging infrastructure is not correctly reestablished when working with a connection that was taken from the pool.</span></span>

<span data-ttu-id="4c06e-183">Chcete-li sdružování připojení zakázáno, aktualizujte `NORTHWNDConnectionString` v `Web.config` tak, že obsahují nastavení `Pooling=false` .</span><span class="sxs-lookup"><span data-stu-id="4c06e-183">To disabled connection pooling, update the `NORTHWNDConnectionString` in `Web.config` so that it includes the setting `Pooling=false` .</span></span>


[!code-xml[Main](debugging-stored-procedures-vb/samples/sample1.xml)]

> [!NOTE]
> <span data-ttu-id="4c06e-184">Po dokončení ladění systému SQL Server prostřednictvím aplikace ASP.NET je nutné obnovit vyřazenou aplikaci sdružování připojení odebráním `Pooling` nastavení z připojovacího řetězce (nebo nastavením na `Pooling=true` ).</span><span class="sxs-lookup"><span data-stu-id="4c06e-184">Once you have finished debugging SQL Server through the ASP.NET application be sure to reinstate connection pooling by removing the `Pooling` setting from the connection string (or by setting it to `Pooling=true` ).</span></span>


<span data-ttu-id="4c06e-185">V tomto okamžiku má aplikace ASP.NET nakonfigurované umožňuje sadě Visual Studio k ladění objekty databáze systému SQL Server při vyvolání prostřednictvím webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="4c06e-185">At this point the ASP.NET application has been configured to allow Visual Studio to debug SQL Server database objects when invoked through the web application.</span></span> <span data-ttu-id="4c06e-186">Všechny, které zůstává nyní je přidat zarážky uložené procedury a spuštění ladění!</span><span class="sxs-lookup"><span data-stu-id="4c06e-186">All that remains now is to add a breakpoint to a stored procedure and start debugging!</span></span>

## <a name="step-3-adding-a-breakpoint-and-debugging"></a><span data-ttu-id="4c06e-187">Krok 3: Přidání zarážku a ladění</span><span class="sxs-lookup"><span data-stu-id="4c06e-187">Step 3: Adding a Breakpoint and Debugging</span></span>

<span data-ttu-id="4c06e-188">Otevřete `Products_SelectByCategoryID` uložené procedury a nastavit zarážky na začátku `SELECT` příkaz kliknutím na okraji na příslušné místo nebo umístěním kurzoru na začátku `SELECT` příkaz a pak stisknete F9.</span><span class="sxs-lookup"><span data-stu-id="4c06e-188">Open the `Products_SelectByCategoryID` stored procedure and set a breakpoint at the start of the `SELECT` statement by clicking in the margin at the appropriate place or by placing your cursor at the start of the `SELECT` statement and hitting F9.</span></span> <span data-ttu-id="4c06e-189">Jak ukazuje obrázek 4, se zobrazí jako červené kolečko u okraje zarážku.</span><span class="sxs-lookup"><span data-stu-id="4c06e-189">As Figure 4 illustrates, the breakpoint appears as a red circle in the margin.</span></span>


<span data-ttu-id="4c06e-190">[![Nastavte zarážky v Products_SelectByCategoryID uložené procedury](debugging-stored-procedures-vb/_static/image9.png)](debugging-stored-procedures-vb/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="4c06e-190">[![Set a Breakpoint in the Products_SelectByCategoryID Stored Procedure](debugging-stored-procedures-vb/_static/image9.png)](debugging-stored-procedures-vb/_static/image8.png)</span></span>

<span data-ttu-id="4c06e-191">**Obrázek 4**: Nastavte zarážky v `Products_SelectByCategoryID` uloženou proceduru ([Kliknutím zobrazit obrázek v plné velikosti](debugging-stored-procedures-vb/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="4c06e-191">**Figure 4**: Set a Breakpoint in the `Products_SelectByCategoryID` Stored Procedure ([Click to view full-size image](debugging-stored-procedures-vb/_static/image10.png))</span></span>


<span data-ttu-id="4c06e-192">Aby objekt databáze SQL chcete ladit prostřednictvím klientskou aplikaci je nutné, aby databáze nakonfigurovat podporu ladění aplikace.</span><span class="sxs-lookup"><span data-stu-id="4c06e-192">In order for a SQL database object to be debugged through a client application, it is imperative that the database be configured to support application debugging.</span></span> <span data-ttu-id="4c06e-193">Při prvním nastavení boru přerušení, toto nastavení by měl automaticky být zapnutá, ale je doporučeno znovu zkontrolovat.</span><span class="sxs-lookup"><span data-stu-id="4c06e-193">When you first set a breakpoint, this setting should automatically be switched on, but it is prudent to double-check.</span></span> <span data-ttu-id="4c06e-194">Klikněte pravým tlačítkem na `NORTHWND.MDF` uzlu v Průzkumníku serveru.</span><span class="sxs-lookup"><span data-stu-id="4c06e-194">Right-click on the `NORTHWND.MDF` node in the Server Explorer.</span></span> <span data-ttu-id="4c06e-195">V místní nabídce by měla obsahovat zaškrtnuté nabídky položka s názvem ladění aplikace.</span><span class="sxs-lookup"><span data-stu-id="4c06e-195">The context menu should include a checked menu item named Application Debugging .</span></span>


![Ujistěte se, že je povolena možnost ladění aplikace](debugging-stored-procedures-vb/_static/image11.png)

<span data-ttu-id="4c06e-197">**Obrázek 5**: Ujistěte se, že je povolena možnost ladění aplikace</span><span class="sxs-lookup"><span data-stu-id="4c06e-197">**Figure 5**: Ensure that the Application Debugging Option is Enabled</span></span>


<span data-ttu-id="4c06e-198">Sada zarážek a povolená možnost ladění aplikace jsou připravené k ladění uložené procedury při volání z aplikace ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="4c06e-198">With the breakpoint set and the Application Debugging option enabled, we are ready to debug the stored procedure when called from the ASP.NET application.</span></span> <span data-ttu-id="4c06e-199">Spuštění ladicího programu přechodem do nabídky ladění a výběr spustit ladění, stále mačkat F5, nebo klepněte na tlačítko se zeleným přehrání ikonu na panelu nástrojů.</span><span class="sxs-lookup"><span data-stu-id="4c06e-199">Start the debugger by going to the Debug menu and choosing Start Debugging, by hitting F5, or by clicking the green play icon in the Toolbar.</span></span> <span data-ttu-id="4c06e-200">Tato akce spuštění ladicího programu a spusťte web.</span><span class="sxs-lookup"><span data-stu-id="4c06e-200">This will start the debugger and launch the website.</span></span>

<span data-ttu-id="4c06e-201">`Products_SelectByCategoryID` Uloženou proceduru byl vytvořen v [použití existující uložené procedury, pro typové datové sady s TableAdapters](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-vb.md) kurzu.</span><span class="sxs-lookup"><span data-stu-id="4c06e-201">The `Products_SelectByCategoryID` stored procedure was created in the [Using Existing Stored Procedures for the Typed DataSet s TableAdapters](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-vb.md) tutorial.</span></span> <span data-ttu-id="4c06e-202">Jeho odpovídající webové stránky (`~/AdvancedDAL/ExistingSprocs.aspx`) obsahuje GridView, která zobrazuje výsledky vrácené tuto uloženou proceduru.</span><span class="sxs-lookup"><span data-stu-id="4c06e-202">Its corresponding web page (`~/AdvancedDAL/ExistingSprocs.aspx`) contains a GridView that displays the results returned by this stored procedure.</span></span> <span data-ttu-id="4c06e-203">Navštivte tuto stránku prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="4c06e-203">Visit this page through the browser.</span></span> <span data-ttu-id="4c06e-204">Na stránce zarážka v dosažení `Products_SelectByCategoryID` bude dosaženo uložené procedury a ovládací prvek vrátí k sadě Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4c06e-204">Upon reaching the page, the breakpoint in the `Products_SelectByCategoryID` stored procedure will be hit and control returned to Visual Studio.</span></span> <span data-ttu-id="4c06e-205">Stejně jako v kroku 1, můžete krok pomocí uložené procedury s příkazy a zobrazit a upravit hodnoty parametru.</span><span class="sxs-lookup"><span data-stu-id="4c06e-205">Just like in Step 1, you can step through the stored procedure s statements and view and modify the parameter values.</span></span>


<span data-ttu-id="4c06e-206">[![Na stránce ExistingSprocs.aspx původně zobrazuje nápoje](debugging-stored-procedures-vb/_static/image13.png)](debugging-stored-procedures-vb/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="4c06e-206">[![The ExistingSprocs.aspx Page Initially Displays the Beverages](debugging-stored-procedures-vb/_static/image13.png)](debugging-stored-procedures-vb/_static/image12.png)</span></span>

<span data-ttu-id="4c06e-207">**Obrázek 6**: `ExistingSprocs.aspx` stránky jeho otevření zobrazí nápoje ([Kliknutím zobrazit obrázek v plné velikosti](debugging-stored-procedures-vb/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="4c06e-207">**Figure 6**: The `ExistingSprocs.aspx` Page Initially Displays the Beverages ([Click to view full-size image](debugging-stored-procedures-vb/_static/image14.png))</span></span>


<span data-ttu-id="4c06e-208">[![Bylo dosaženo uloženou proceduru s zarážek](debugging-stored-procedures-vb/_static/image16.png)](debugging-stored-procedures-vb/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="4c06e-208">[![The Stored Procedure s Breakpoint has been Reached](debugging-stored-procedures-vb/_static/image16.png)](debugging-stored-procedures-vb/_static/image15.png)</span></span>

<span data-ttu-id="4c06e-209">**Obrázek 7**: uloženou proceduru s bylo dosaženo zarážky ([Kliknutím zobrazit obrázek v plné velikosti](debugging-stored-procedures-vb/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="4c06e-209">**Figure 7**: The Stored Procedure s Breakpoint has been Reached ([Click to view full-size image](debugging-stored-procedures-vb/_static/image17.png))</span></span>


<span data-ttu-id="4c06e-210">Jako okna kukátka v obrázek 7 znázorňuje, hodnota `@CategoryID` parametru je 1.</span><span class="sxs-lookup"><span data-stu-id="4c06e-210">As the Watch window in Figure 7 shows, the value of the `@CategoryID` parameter is 1.</span></span> <span data-ttu-id="4c06e-211">Důvodem je, že `ExistingSprocs.aspx` stránky jeho otevření zobrazí produkty v kategorii Nápoje, který má `CategoryID` hodnotu 1.</span><span class="sxs-lookup"><span data-stu-id="4c06e-211">This is because the `ExistingSprocs.aspx` page initially displays products in the beverages category, which has a `CategoryID` value of 1.</span></span> <span data-ttu-id="4c06e-212">Zvolte jinou kategorii z rozevíracího seznamu.</span><span class="sxs-lookup"><span data-stu-id="4c06e-212">Choose a different category from the drop-down list.</span></span> <span data-ttu-id="4c06e-213">To způsobí, že zpětné volání a znovu spustí `Products_SelectByCategoryID` uložené procedury.</span><span class="sxs-lookup"><span data-stu-id="4c06e-213">Doing so causes a postback and re-executes the `Products_SelectByCategoryID` stored procedure.</span></span> <span data-ttu-id="4c06e-214">Zarážce je dosáhl znovu, ale tentokrát `@CategoryID` parametr s hodnotou se vztahuje k položce vybrané rozevíracího seznamu s `CategoryID`.</span><span class="sxs-lookup"><span data-stu-id="4c06e-214">The breakpoint is hit again, but this time the `@CategoryID` parameter s value reflects the selected drop-down list item s `CategoryID`.</span></span>


<span data-ttu-id="4c06e-215">[![Zvolte jinou kategorii z rozevíracího seznamu](debugging-stored-procedures-vb/_static/image19.png)](debugging-stored-procedures-vb/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="4c06e-215">[![Choose a Different Category from the Drop-Down List](debugging-stored-procedures-vb/_static/image19.png)](debugging-stored-procedures-vb/_static/image18.png)</span></span>

<span data-ttu-id="4c06e-216">**Obrázek 8**: Zvolte jiný kategorii z rozevíracího seznamu ([Kliknutím zobrazit obrázek v plné velikosti](debugging-stored-procedures-vb/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="4c06e-216">**Figure 8**: Choose a Different Category from the Drop-Down List ([Click to view full-size image](debugging-stored-procedures-vb/_static/image20.png))</span></span>


<span data-ttu-id="4c06e-217">[![@CategoryID Parametr odráží kategorii vybrané z webové stránky](debugging-stored-procedures-vb/_static/image22.png)](debugging-stored-procedures-vb/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="4c06e-217">[![The @CategoryID Parameter Reflects the Category Selected from the Web Page](debugging-stored-procedures-vb/_static/image22.png)](debugging-stored-procedures-vb/_static/image21.png)</span></span>

<span data-ttu-id="4c06e-218">**Obrázek 9**: `@CategoryID` parametr odráží vybrat kategorii z webové stránky ([Kliknutím zobrazit obrázek v plné velikosti](debugging-stored-procedures-vb/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="4c06e-218">**Figure 9**: The `@CategoryID` Parameter Reflects the Category Selected from the Web Page ([Click to view full-size image](debugging-stored-procedures-vb/_static/image23.png))</span></span>


> [!NOTE]
> <span data-ttu-id="4c06e-219">Pokud zarážka v `Products_SelectByCategoryID` uložená procedura není dosáhl při návštěvě `ExistingSprocs.aspx` se ujistěte, že políčka systému SQL Server se změnami části ladicí programy aplikace ASP.NET s stránku vlastností, že byl sdružování připojení zakázáno, a že je povolena databáze s možností ladění aplikace.</span><span class="sxs-lookup"><span data-stu-id="4c06e-219">If the breakpoint in the `Products_SelectByCategoryID` stored procedure is not hit when visiting the `ExistingSprocs.aspx` page, make sure that the SQL Server checkbox has been checked in the Debuggers section of the ASP.NET application s Properties Page, that connection pooling has been disabled, and that the database s Application Debugging option is enabled.</span></span> <span data-ttu-id="4c06e-220">Pokud znovu stále dochází k problémům, restartujte Visual Studio a akci opakujte.</span><span class="sxs-lookup"><span data-stu-id="4c06e-220">If you re still having problems, restart Visual Studio and try again.</span></span>


## <a name="debugging-t-sql-database-objects-on-remote-instances"></a><span data-ttu-id="4c06e-221">T-SQL databázové objekty v instancích vzdáleného ladění</span><span class="sxs-lookup"><span data-stu-id="4c06e-221">Debugging T-SQL Database Objects on Remote Instances</span></span>

<span data-ttu-id="4c06e-222">Ladění databázových objektů pomocí sady Visual Studio je poměrně jasné, pokud je instance databáze systému SQL Server na stejném počítači jako Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4c06e-222">Debugging database objects through Visual Studio is fairly straightforward when the SQL Server database instance is on the same machine as Visual Studio.</span></span> <span data-ttu-id="4c06e-223">Ale pokud SQL Server a Visual Studio jsou umístěny na různých počítačích pak některé pečlivě konfigurace se používá k získání všechno funguje správně.</span><span class="sxs-lookup"><span data-stu-id="4c06e-223">However, if SQL Server and Visual Studio reside on different machines then some careful configuration is required to get everything working properly.</span></span> <span data-ttu-id="4c06e-224">Existují dvě klíčové úlohy, které jsme se potýkají s:</span><span class="sxs-lookup"><span data-stu-id="4c06e-224">There are two core tasks we are faced with:</span></span>

- <span data-ttu-id="4c06e-225">Ujistěte se, že přihlášení použité pro připojení k databázi pomocí ADO.NET patří k `sysadmin` role.</span><span class="sxs-lookup"><span data-stu-id="4c06e-225">Ensure that the login used to connect to the database via ADO.NET belongs to the `sysadmin` role.</span></span>
- <span data-ttu-id="4c06e-226">Zkontrolujte, zda je uživatelský účet systému Windows, sada Visual Studio na vývojovém počítači platný účet přihlášení serveru SQL Server, který patří do `sysadmin` role.</span><span class="sxs-lookup"><span data-stu-id="4c06e-226">Ensure that the Windows user account used by Visual Studio on the development machine is a valid SQL Server login account that belongs to the `sysadmin` role.</span></span>

<span data-ttu-id="4c06e-227">Prvním krokem je poměrně jednoduché.</span><span class="sxs-lookup"><span data-stu-id="4c06e-227">The first step is relatively straightforward.</span></span> <span data-ttu-id="4c06e-228">Nejprve určete uživatelský účet použitý k připojení k databázi z aplikace ASP.NET a pak z SQL Server Management Studio, přidejte daný účet přihlášení k `sysadmin` role.</span><span class="sxs-lookup"><span data-stu-id="4c06e-228">First, identify the user account used to connect to the database from the ASP.NET application and then, from SQL Server Management Studio, add that login account to the `sysadmin` role.</span></span>

<span data-ttu-id="4c06e-229">V druhé úloze vyžaduje, aby uživatelský účet systému Windows, které používáte k ladění aplikace platného přihlášení na vzdálené databáze.</span><span class="sxs-lookup"><span data-stu-id="4c06e-229">The second task requires that the Windows user account you use to debug the application be a valid login on the remote database.</span></span> <span data-ttu-id="4c06e-230">Ale pravděpodobné, že účet systému Windows, které přihlášení do pracovní stanice s není platného přihlášení na serveru SQL Server.</span><span class="sxs-lookup"><span data-stu-id="4c06e-230">However, chances are the Windows account you logged on to your workstation with is not a valid login on SQL Server.</span></span> <span data-ttu-id="4c06e-231">Místo přidávání účtu konkrétní přihlášení k systému SQL Server, může být vhodnější určit některé uživatelský účet systému Windows jako ladění účet systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="4c06e-231">Rather than adding your particular login account to SQL Server, a better choice would be to designate some Windows user account as the SQL Server debugging account.</span></span> <span data-ttu-id="4c06e-232">K ladění databázové objekty vzdálené instance systému SQL Server, potom by spusťte Visual Studio pomocí pověření účtu s přihlášení tohoto systému Windows.</span><span class="sxs-lookup"><span data-stu-id="4c06e-232">Then, to debug the database objects of a remote SQL Server instance, you would run Visual Studio using that Windows login account s credentials.</span></span>

<span data-ttu-id="4c06e-233">Příklad by měly pomoci vysvětlení věcí.</span><span class="sxs-lookup"><span data-stu-id="4c06e-233">An example should help clarify things.</span></span> <span data-ttu-id="4c06e-234">Představte si, že je účet systému Windows s názvem `SQLDebug` v doméně systému Windows.</span><span class="sxs-lookup"><span data-stu-id="4c06e-234">Imagine that there is a Windows account named `SQLDebug` within the Windows domain.</span></span> <span data-ttu-id="4c06e-235">Tento účet by bylo potřeba přidat do vzdálené instance systému SQL Server jako platné přihlašovací údaje a jako člena `sysadmin` role.</span><span class="sxs-lookup"><span data-stu-id="4c06e-235">This account would need to be added to the remote SQL Server instance as a valid login and as a member of the `sysadmin` role.</span></span> <span data-ttu-id="4c06e-236">Potom k ladění vzdálené instance systému SQL Server ze sady Visual Studio, by potřebujeme spuštění sady Visual Studio, jako `SQLDebug` uživatele.</span><span class="sxs-lookup"><span data-stu-id="4c06e-236">Then, to debug the remote SQL Server instance from Visual Studio, we would need to run Visual Studio as the `SQLDebug` user.</span></span> <span data-ttu-id="4c06e-237">To může provést protokolování z našich pracovní stanice, přihlaste se zpět jako `SQLDebug`, a opětovném spuštění sady Visual Studio, ale jednodušší by mohla být přihlášení k naší pracovní stanice pomocí vlastních přihlašovacích údajů a pak použijte `runas.exe` ke spuštění sady Visual Studio jako `SQLDebug` uživatele.</span><span class="sxs-lookup"><span data-stu-id="4c06e-237">This could be done by logging out of our workstation, logging back in as `SQLDebug`, and then launching Visual Studio, but a simpler approach would be to login to our workstation using our own credentials and then use `runas.exe` to launch Visual Studio as the `SQLDebug` user.</span></span> <span data-ttu-id="4c06e-238">`runas.exe` Umožňuje provést v rámci guise z jiného uživatelského účtu konkrétní aplikace.</span><span class="sxs-lookup"><span data-stu-id="4c06e-238">`runas.exe` allows a particular application to be executed under the guise of a different user account.</span></span> <span data-ttu-id="4c06e-239">Spusťte Visual Studio jako `SQLDebug`, můžete zadat následující příkaz na příkazovém řádku:</span><span class="sxs-lookup"><span data-stu-id="4c06e-239">To launch Visual Studio as `SQLDebug`, you could enter the following statement at the command line:</span></span>


[!code-console[Main](debugging-stored-procedures-vb/samples/sample2.cmd)]

<span data-ttu-id="4c06e-240">Podrobnější vysvětlení tohoto postupu najdete v tématu [William R. Vaughn](http://betav.com/BLOG/billva/) s *Hitchhiker s příručka k sadě Visual Studio a SQL Server, sedmého edice* a také [postupy: nastavení oprávnění serveru SQL pro ladění](https://msdn.microsoft.com/library/w1bhybwz(VS.80).aspx).</span><span class="sxs-lookup"><span data-stu-id="4c06e-240">For a more detailed explanation on this process, see [William R. Vaughn](http://betav.com/BLOG/billva/) s *Hitchhiker s Guide to Visual Studio and SQL Server, Seventh Edition* as well as [How To: Set SQL Server Permissions for Debugging](https://msdn.microsoft.com/library/w1bhybwz(VS.80).aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="4c06e-241">Pokud vývojovém počítači se systémem Windows XP Service Pack 2, budete muset nakonfigurovat bránu povolit vzdálené ladění.</span><span class="sxs-lookup"><span data-stu-id="4c06e-241">If your development machine is running Windows XP Service Pack 2 you will need to configure the Internet Connection Firewall to allow remote debugging.</span></span> <span data-ttu-id="4c06e-242">[Pokynů k: Povolit ladění na SQL Server 2005](https://msdn.microsoft.com/library/s0fk6z6e(VS.80).aspx) článku značí, že to zahrnuje dva kroky: (a) na hostitelském počítači Visual Studio, je nutné přidat `Devenv.exe` do seznamu výjimek a otevřete port TCP 135; a (b) ve vzdáleném počítači (SQL), musíte otevřít TCP 135 portu a přidat `sqlservr.exe` do seznamu výjimek.</span><span class="sxs-lookup"><span data-stu-id="4c06e-242">[The How To: Enable SQL Server 2005 Debugging](https://msdn.microsoft.com/library/s0fk6z6e(VS.80).aspx) article notes that this involves two steps: (a) On the Visual Studio host machine, you must add `Devenv.exe` to the Exceptions list and open the TCP 135 port; and (b) On the remote (SQL) machine, you must open the TCP 135 port and add `sqlservr.exe` to the Exceptions list.</span></span> <span data-ttu-id="4c06e-243">Pokud zásady vaší domény vyžaduje komunikaci sítě s provést prostřednictvím protokolu IPSec, musíte otevřít porty UDP 4500 a UDP 500.</span><span class="sxs-lookup"><span data-stu-id="4c06e-243">If your domain policy requires network communication to be done through IPSec, you must open the UDP 4500 and UDP 500 ports.</span></span>


## <a name="summary"></a><span data-ttu-id="4c06e-244">Souhrn</span><span class="sxs-lookup"><span data-stu-id="4c06e-244">Summary</span></span>

<span data-ttu-id="4c06e-245">Kromě zajištění ladění podpory pro kód aplikace .NET, Visual Studio také poskytuje celou řadu možností pro SQL Server 2005 ladění.</span><span class="sxs-lookup"><span data-stu-id="4c06e-245">In addition to providing debugging support for .NET application code, Visual Studio also provides a variety of debugging options for SQL Server 2005.</span></span> <span data-ttu-id="4c06e-246">V tomto kurzu jsme se podívali na dva z těchto možností: přímé databáze ladění, trasování a ladění aplikací.</span><span class="sxs-lookup"><span data-stu-id="4c06e-246">In this tutorial we looked at two of those options: Direct Database Debugging and application debugging.</span></span> <span data-ttu-id="4c06e-247">K ladění přímo databázového objektu T-SQL, najít objekt pomocí Průzkumníka serveru pak klikněte pravým tlačítkem myši na něm a zvolte Krokovat s vnořením.</span><span class="sxs-lookup"><span data-stu-id="4c06e-247">To directly debug a T-SQL database object, locate the object through the Server Explorer then right-click on it and choose Step Into.</span></span> <span data-ttu-id="4c06e-248">Tím se spustí ladicí program a zastaví na prvním příkazem v databázi objekt, v tomto okamžiku můžete krok prostřednictvím objektu s příkazy a zobrazit a upravit hodnoty parametrů.</span><span class="sxs-lookup"><span data-stu-id="4c06e-248">This starts the debugger and halts on the first statement in the database object, at which point you can step through the object s statements and view and modify parameter values.</span></span> <span data-ttu-id="4c06e-249">V kroku 1 jsme použili tento postup pro krok do `Products_SelectByCategoryID` uložené procedury.</span><span class="sxs-lookup"><span data-stu-id="4c06e-249">In Step 1 we used this approach to step into the `Products_SelectByCategoryID` stored procedure.</span></span>

<span data-ttu-id="4c06e-250">Ladění aplikací umožňuje zarážky nastavit přímo v databázové objekty.</span><span class="sxs-lookup"><span data-stu-id="4c06e-250">Application debugging allows breakpoints to be set directly within the database objects.</span></span> <span data-ttu-id="4c06e-251">Po vyvolání objektu databáze se zarážkami z klientské aplikace (například webovou aplikaci ASP.NET) program zastaví jako převezme ladicího programu.</span><span class="sxs-lookup"><span data-stu-id="4c06e-251">When a database object with breakpoints is invoked from a client application (such as an ASP.NET web application), the program halts as the debugger takes over.</span></span> <span data-ttu-id="4c06e-252">Ladění aplikace je užitečné, protože více jasně ukazuje, jaké aplikace akce způsobí, že objekt konkrétní databáze má být volána.</span><span class="sxs-lookup"><span data-stu-id="4c06e-252">Application debugging is useful because it more clearly shows what application action causes a particular database object to be invoked.</span></span> <span data-ttu-id="4c06e-253">To ale vyžaduje trochu další konfigurace a instalace než přímé ladění databáze.</span><span class="sxs-lookup"><span data-stu-id="4c06e-253">However, it requires a bit more configuration and setup than Direct Database Debugging.</span></span>

<span data-ttu-id="4c06e-254">Databázové objekty můžete ladit prostřednictvím projekty SQL Server.</span><span class="sxs-lookup"><span data-stu-id="4c06e-254">Database objects can also be debugged through SQL Server Projects.</span></span> <span data-ttu-id="4c06e-255">Podíváme se na použití SQL serveru projektů a jak je používat k vytváření a ladění spravované objekty databáze v dalším kurzu.</span><span class="sxs-lookup"><span data-stu-id="4c06e-255">We will look at using SQL Server Projects and how to use them to create and debug managed database objects in the next tutorial.</span></span>

<span data-ttu-id="4c06e-256">Radostí programování!</span><span class="sxs-lookup"><span data-stu-id="4c06e-256">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="4c06e-257">O autorovi</span><span class="sxs-lookup"><span data-stu-id="4c06e-257">About the Author</span></span>

<span data-ttu-id="4c06e-258">[Scott Meisnerová](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor sedm ASP/ASP.NET knih a zakladatele z [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracuje s technologií Microsoft Web od 1998.</span><span class="sxs-lookup"><span data-stu-id="4c06e-258">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="4c06e-259">Scott funguje jako nezávislé poradce, trainer a zapisovače.</span><span class="sxs-lookup"><span data-stu-id="4c06e-259">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="4c06e-260">Jeho nejnovější seznam k [ *Edice nakladatelství Sams naučit sami technologii ASP.NET 2.0 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="4c06e-260">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="4c06e-261">Dosažitelný v [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) nebo prostřednictvím svého blogu, který najdete na [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="4c06e-261">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="4c06e-262">[Předchozí](protecting-connection-strings-and-other-configuration-information-vb.md)
> [další](creating-stored-procedures-and-user-defined-functions-with-managed-code-vb.md)</span><span class="sxs-lookup"><span data-stu-id="4c06e-262">[Previous](protecting-connection-strings-and-other-configuration-information-vb.md)
[Next](creating-stored-procedures-and-user-defined-functions-with-managed-code-vb.md)</span></span>
