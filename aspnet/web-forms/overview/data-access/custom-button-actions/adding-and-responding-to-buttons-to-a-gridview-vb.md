---
uid: web-forms/overview/data-access/custom-button-actions/adding-and-responding-to-buttons-to-a-gridview-vb
title: "Přidání a reagovat na tlačítka na GridView (VB) | Microsoft Docs"
author: rick-anderson
description: "V tomto kurzu budeme zabývat postup přidání vlastních tlačítek do šablony i na pole GridView nebo DetailsView ovládacího prvku. Konkrétně jsme budete bui..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 09/13/2006
ms.topic: article
ms.assetid: 06c6bbd2-4bdc-435b-87a3-df2c868f4baa
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/custom-button-actions/adding-and-responding-to-buttons-to-a-gridview-vb
msc.type: authoredcontent
ms.openlocfilehash: ba66c867df93a9e1a0bb7897052ace7300b672af
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 11/10/2017
---
<a name="adding-and-responding-to-buttons-to-a-gridview-vb"></a><span data-ttu-id="860b0-104">Přidání a reagovat na tlačítka na GridView (VB)</span><span class="sxs-lookup"><span data-stu-id="860b0-104">Adding and Responding to Buttons to a GridView (VB)</span></span>
====================
<span data-ttu-id="860b0-105">podle [Scott Meisnerová](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="860b0-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="860b0-106">[Stáhněte si ukázkovou aplikaci](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_28_VB.exe) nebo [stáhnout PDF](adding-and-responding-to-buttons-to-a-gridview-vb/_static/datatutorial28vb1.pdf)</span><span class="sxs-lookup"><span data-stu-id="860b0-106">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_28_VB.exe) or [Download PDF](adding-and-responding-to-buttons-to-a-gridview-vb/_static/datatutorial28vb1.pdf)</span></span>

> <span data-ttu-id="860b0-107">V tomto kurzu budeme zabývat postup přidání vlastních tlačítek do šablony i na pole GridView nebo DetailsView ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="860b0-107">In this tutorial we'll look at how to add custom buttons, both to a template and to the fields of a GridView or DetailsView control.</span></span> <span data-ttu-id="860b0-108">Konkrétně jsme budete sestavení rozhraní, které má FormView, která umožňuje uživatelům procházet dodavatelů.</span><span class="sxs-lookup"><span data-stu-id="860b0-108">In particular, we'll build an interface that has a FormView that allows the user to page through the suppliers.</span></span>


## <a name="introduction"></a><span data-ttu-id="860b0-109">Úvod</span><span class="sxs-lookup"><span data-stu-id="860b0-109">Introduction</span></span>

<span data-ttu-id="860b0-110">Při přístup jen pro čtení k datům sestavy, zahrnují mnoho scénáře vytváření sestav je s není neobvyklé pro sestav, které zahrnují možnost provádět akce na základě dat, které zobrazuje.</span><span class="sxs-lookup"><span data-stu-id="860b0-110">While many reporting scenarios involve read-only access to the report data, it s not uncommon for reports to include the ability to perform actions based upon the data displayed.</span></span> <span data-ttu-id="860b0-111">Obvykle to podílejí přidání ovládacího prvku tlačítko, LinkButton nebo ImageButton Web s každý záznam zobrazí v sestavě, která po kliknutí na způsobí, že zpětné volání a vyvolá některé kódu na straně serveru.</span><span class="sxs-lookup"><span data-stu-id="860b0-111">Typically this involved adding a Button, LinkButton, or ImageButton Web control with each record displayed in the report that, when clicked, causes a postback and invokes some server-side code.</span></span> <span data-ttu-id="860b0-112">Úpravy a odstraňování dat na základě záznamu podle je nejběžnější příklad.</span><span class="sxs-lookup"><span data-stu-id="860b0-112">Editing and deleting the data on a record-by-record basis is the most common example.</span></span> <span data-ttu-id="860b0-113">Ve skutečnosti, jak jsme viděli počínaje [Přehled vložení, aktualizace a odstranění dat](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-vb.md) kurzu, úpravy a odstranění je běžné, že rutina GridView DetailsView a FormView ovládacích prvků může podporovat takové funkce bez nutnost napsat jediný řádek kódu.</span><span class="sxs-lookup"><span data-stu-id="860b0-113">In fact, as we saw starting with the [Overview of Inserting, Updating, and Deleting Data](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-vb.md) tutorial, editing and deleting is so common that the GridView, DetailsView, and FormView controls can support such functionality without the need for writing a single line of code.</span></span>

<span data-ttu-id="860b0-114">Kromě toho upravovat a odstraňovat tlačítka, rutina GridView, DetailsView a FormView ovládací prvky můžete také zahrnovat tlačítka, LinkButtons nebo ImageButtons, po kliknutí na provádět některé vlastní logiky na straně serveru.</span><span class="sxs-lookup"><span data-stu-id="860b0-114">In addition to Edit and Delete buttons, the GridView, DetailsView, and FormView controls can also include Buttons, LinkButtons, or ImageButtons that, when clicked, perform some custom server-side logic.</span></span> <span data-ttu-id="860b0-115">V tomto kurzu budeme zabývat postup přidání vlastních tlačítek do šablony i na pole GridView nebo DetailsView ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="860b0-115">In this tutorial we'll look at how to add custom buttons, both to a template and to the fields of a GridView or DetailsView control.</span></span> <span data-ttu-id="860b0-116">Konkrétně jsme budete sestavení rozhraní, které má FormView, která umožňuje uživatelům procházet dodavatelů.</span><span class="sxs-lookup"><span data-stu-id="860b0-116">In particular, we'll build an interface that has a FormView that allows the user to page through the suppliers.</span></span> <span data-ttu-id="860b0-117">Pro danou jiného dodavatele FormView zobrazí informace o dodavateli společně s ovládacího prvku tlačítko Web, který kliknutí na označí všechny jejich přidružené produkty jako zastaví.</span><span class="sxs-lookup"><span data-stu-id="860b0-117">For a given supplier, the FormView will show information about the supplier along with a Button Web control that, if clicked, will mark all of their associated products as discontinued.</span></span> <span data-ttu-id="860b0-118">Kromě toho GridView uvádí tyto produkty poskytnuté dodavatelem vybrané, se každý řádek obsahující zvýšit ceny a slevách cena tlačítka, která, pokud klikli, zvýšit nebo snížit produktu s `UnitPrice` 10 % (viz obrázek 1).</span><span class="sxs-lookup"><span data-stu-id="860b0-118">Additionally, a GridView lists those products provided by the selected supplier, with each row containing Increase Price and Discount Price Buttons that, if clicked, raise or reduce the product s `UnitPrice` by 10% (see Figure 1).</span></span>


<span data-ttu-id="860b0-119">[![Rutina GridView i FormView obsahovat tlačítek, provedení vlastní akce](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image2.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="860b0-119">[![Both the FormView and GridView Contain Buttons That Perform Custom Actions](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image2.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image1.png)</span></span>

<span data-ttu-id="860b0-120">**Obrázek 1**: obě FormView a GridView obsahovat tlačítka, provedení vlastní akce ([Kliknutím zobrazit obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="860b0-120">**Figure 1**: Both the FormView and GridView Contain Buttons That Perform Custom Actions ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image3.png))</span></span>


## <a name="step-1-adding-the-button-tutorial-web-pages"></a><span data-ttu-id="860b0-121">Krok 1: Přidání tlačítka kurz webové stránky</span><span class="sxs-lookup"><span data-stu-id="860b0-121">Step 1: Adding the Button Tutorial Web Pages</span></span>

<span data-ttu-id="860b0-122">Předtím, než se podíváme na tom, jak přidat vlastní tlačítka, umožní s nejprve pozorně vytváření stránek ASP.NET v našem webu projekt, který budeme potřebovat pro účely tohoto kurzu.</span><span class="sxs-lookup"><span data-stu-id="860b0-122">Before we look at how to add a custom buttons, let s first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial.</span></span> <span data-ttu-id="860b0-123">Nejprve přidejte novou složku s názvem `CustomButtons`.</span><span class="sxs-lookup"><span data-stu-id="860b0-123">Start by adding a new folder named `CustomButtons`.</span></span> <span data-ttu-id="860b0-124">Dál přidejte následující dvě stránky ASP.NET do této složky, a zkontrolujte, zda přidružit každou stránku s `Site.master` hlavní stránky:</span><span class="sxs-lookup"><span data-stu-id="860b0-124">Next, add the following two ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `CustomButtons.aspx`


![Přidání stránky ASP.NET pro vlastní kurzy související tlačítka](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image4.png)

<span data-ttu-id="860b0-126">**Obrázek 2**: Přidání stránky ASP.NET pro vlastní kurzy související tlačítka</span><span class="sxs-lookup"><span data-stu-id="860b0-126">**Figure 2**: Add the ASP.NET Pages for the Custom Buttons-Related Tutorials</span></span>


<span data-ttu-id="860b0-127">V jiných složkách, jako `Default.aspx` v `CustomButtons` složky zobrazí seznam kurzů k v jeho části.</span><span class="sxs-lookup"><span data-stu-id="860b0-127">Like in the other folders, `Default.aspx` in the `CustomButtons` folder will list the tutorials in its section.</span></span> <span data-ttu-id="860b0-128">Odvolat, který `SectionLevelTutorialListing.ascx` tuto funkci zajišťuje uživatelský ovládací prvek.</span><span class="sxs-lookup"><span data-stu-id="860b0-128">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="860b0-129">Proto přidat tento uživatelský ovládací prvek pro `Default.aspx` přetažením z Průzkumníka řešení na stránku s zobrazení návrhu.</span><span class="sxs-lookup"><span data-stu-id="860b0-129">Therefore, add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page s Design view.</span></span>


<span data-ttu-id="860b0-130">[![Přidání SectionLevelTutorialListing.ascx uživatelského ovládacího prvku do Default.aspx](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image6.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="860b0-130">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image6.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image5.png)</span></span>

<span data-ttu-id="860b0-131">**Obrázek 3**: Přidat `SectionLevelTutorialListing.ascx` uživatelského ovládacího prvku na `Default.aspx` ([Kliknutím zobrazit obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="860b0-131">**Figure 3**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image7.png))</span></span>


<span data-ttu-id="860b0-132">Nakonec přidejte stránky jako položky na `Web.sitemap` souboru.</span><span class="sxs-lookup"><span data-stu-id="860b0-132">Lastly, add the pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="860b0-133">Konkrétně, přidejte následující kód po stránkování a řazení `<siteMapNode>`:</span><span class="sxs-lookup"><span data-stu-id="860b0-133">Specifically, add the following markup after the Paging and Sorting `<siteMapNode>`:</span></span>


[!code-xml[Main](adding-and-responding-to-buttons-to-a-gridview-vb/samples/sample1.xml)]

<span data-ttu-id="860b0-134">Po aktualizaci `Web.sitemap`, pozorně Zobrazit kurzy web prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="860b0-134">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="860b0-135">V nabídce na levé straně teď obsahuje položky pro úpravy, vkládání a odstraňování kurzy.</span><span class="sxs-lookup"><span data-stu-id="860b0-135">The menu on the left now includes items for the editing, inserting, and deleting tutorials.</span></span>


![Mapy webu nyní obsahuje položku pro tento kurz vlastních tlačítek](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image8.png)

<span data-ttu-id="860b0-137">**Obrázek 4**: mapy webu nyní obsahuje položku pro tento kurz vlastních tlačítek</span><span class="sxs-lookup"><span data-stu-id="860b0-137">**Figure 4**: The Site Map Now Includes the Entry for the Custom Buttons Tutorial</span></span>


## <a name="step-2-adding-a-formview-that-lists-the-suppliers"></a><span data-ttu-id="860b0-138">Krok 2: Přidání FormView, který obsahuje seznam dodavatelů</span><span class="sxs-lookup"><span data-stu-id="860b0-138">Step 2: Adding a FormView that Lists the Suppliers</span></span>

<span data-ttu-id="860b0-139">Umožní s Začínáme v tomto kurzu přidáním FormView, který obsahuje seznam dodavatelů.</span><span class="sxs-lookup"><span data-stu-id="860b0-139">Let s get started with this tutorial by adding the FormView that lists the suppliers.</span></span> <span data-ttu-id="860b0-140">Popsané v úvodu tohoto FormView umožní uživateli procházení dodavatelů, zobrazuje tyto produkty, které poskytuje dodavatel v GridView.</span><span class="sxs-lookup"><span data-stu-id="860b0-140">As discussed in the Introduction, this FormView will allow the user to page through the suppliers, showing the products provided by the supplier in a GridView.</span></span> <span data-ttu-id="860b0-141">Kromě toho tato FormView bude obsahovat tlačítko, při kliknutí na, označí všechny produkty dodavatele s jako zastaveny.</span><span class="sxs-lookup"><span data-stu-id="860b0-141">Additionally, this FormView will include a Button that, when clicked, will mark all of the supplier s products as discontinued.</span></span> <span data-ttu-id="860b0-142">Před jsme si týkají přidávání tlačítko Vlastní k třídě FormView, umožní s nejprve jenom vytvářet FormView tak, aby obsahovalo informace dodavatele.</span><span class="sxs-lookup"><span data-stu-id="860b0-142">Before we concern ourselves with adding the custom button to the FormView, let s first just create the FormView so that it displays the supplier information.</span></span>

<span data-ttu-id="860b0-143">Začněte otevřením `CustomButtons.aspx` stránku `CustomButtons` složky.</span><span class="sxs-lookup"><span data-stu-id="860b0-143">Start by opening the `CustomButtons.aspx` page in the `CustomButtons` folder.</span></span> <span data-ttu-id="860b0-144">Přidat FormView na stránku přetažením z panelu nástrojů na Designer a sadu jeho `ID` vlastnost `Suppliers`.</span><span class="sxs-lookup"><span data-stu-id="860b0-144">Add a FormView to the page by dragging it from the Toolbox onto the Designer and set its `ID` property to `Suppliers`.</span></span> <span data-ttu-id="860b0-145">Ze inteligentní značky s FormView opt k vytvoření nové ObjectDataSource s názvem `SuppliersDataSource`.</span><span class="sxs-lookup"><span data-stu-id="860b0-145">From the FormView s smart tag, opt to create a new ObjectDataSource named `SuppliersDataSource`.</span></span>


<span data-ttu-id="860b0-146">[![Vytvořit nový ObjectDataSource s názvem SuppliersDataSource](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image10.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="860b0-146">[![Create a New ObjectDataSource Named SuppliersDataSource](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image10.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image9.png)</span></span>

<span data-ttu-id="860b0-147">**Obrázek 5**: vytvoření nové ObjectDataSource s názvem `SuppliersDataSource` ([Kliknutím zobrazit obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="860b0-147">**Figure 5**: Create a New ObjectDataSource Named `SuppliersDataSource` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image11.png))</span></span>


<span data-ttu-id="860b0-148">Konfigurace této nové ObjectDataSource tak, že odešle dotaz z `SuppliersBLL` třídu s `GetSuppliers()` – metoda (viz obrázek 6).</span><span class="sxs-lookup"><span data-stu-id="860b0-148">Configure this new ObjectDataSource such that it queries from the `SuppliersBLL` class s `GetSuppliers()` method (see Figure 6).</span></span> <span data-ttu-id="860b0-149">Vzhledem k tomu, že tento FormView neposkytuje rozhraní pro aktualizaci dodavatele informace, vyberte možnost (žádná) z rozevíracího seznamu na kartě aktualizace.</span><span class="sxs-lookup"><span data-stu-id="860b0-149">Since this FormView does not provide an interface for updating the supplier information, select the (None) option from the drop-down list in the UPDATE tab.</span></span>


<span data-ttu-id="860b0-150">[![Nakonfigurujte zdroj dat pro použití třídy SuppliersBLL s GetSuppliers() – metoda](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image13.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="860b0-150">[![Configure the Data Source to use the SuppliersBLL Class s GetSuppliers() Method](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image13.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image12.png)</span></span>

<span data-ttu-id="860b0-151">**Obrázek 6**: Konfigurace zdroje dat pro použití `SuppliersBLL` třídu s `GetSuppliers()` – metoda ([Kliknutím zobrazit obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="860b0-151">**Figure 6**: Configure the Data Source to use the `SuppliersBLL` Class s `GetSuppliers()` Method ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image14.png))</span></span>


<span data-ttu-id="860b0-152">Po dokončení konfigurace ObjectDataSource, Visual Studio vytvoří `InsertItemTemplate`, `EditItemTemplate`, a `ItemTemplate` pro FormView.</span><span class="sxs-lookup"><span data-stu-id="860b0-152">After configuring the ObjectDataSource, Visual Studio will generate an `InsertItemTemplate`, `EditItemTemplate`, and `ItemTemplate` for the FormView.</span></span> <span data-ttu-id="860b0-153">Odeberte `InsertItemTemplate` a `EditItemTemplate` a upravovat `ItemTemplate` tak, aby zobrazil jenom dodavatele s společnosti jméno a telefonní číslo.</span><span class="sxs-lookup"><span data-stu-id="860b0-153">Remove the `InsertItemTemplate` and `EditItemTemplate` and modify the `ItemTemplate` so that it displays just the supplier s company name and phone number.</span></span> <span data-ttu-id="860b0-154">Nakonec zapnutí podpory stránkování pro FormView zaškrtnutím políčka Povolit stránkování z jeho inteligentní značky (nebo nastavením jeho `AllowPaging` vlastnost `True`).</span><span class="sxs-lookup"><span data-stu-id="860b0-154">Finally, turn on paging support for the FormView by checking the Enable Paging checkbox from its smart tag (or by setting its `AllowPaging` property to `True`).</span></span> <span data-ttu-id="860b0-155">Po provedení těchto změn značky s deklarativní stránky s by měl vypadat takto:</span><span class="sxs-lookup"><span data-stu-id="860b0-155">After these changes your page s declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-vb/samples/sample2.aspx)]

<span data-ttu-id="860b0-156">Obrázek 7 znázorňuje stránce CustomButtons.aspx při zobrazení prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="860b0-156">Figure 7 shows the CustomButtons.aspx page when viewed through a browser.</span></span>


<span data-ttu-id="860b0-157">[![FormView uvádí NázevSpolečnosti a pole Phone z aktuálně vybraného dodavatele](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image16.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="860b0-157">[![The FormView Lists the CompanyName and Phone Fields from the Currently Selected Supplier](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image16.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image15.png)</span></span>

<span data-ttu-id="860b0-158">**Obrázek 7**: uvádí FormView `CompanyName` a `Phone` pole z aktuálně vybrané dodavatele ([Kliknutím zobrazit obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="860b0-158">**Figure 7**: The FormView Lists the `CompanyName` and `Phone` Fields from the Currently Selected Supplier ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image17.png))</span></span>


## <a name="step-3-adding-a-gridview-that-lists-the-selected-supplier-s-products"></a><span data-ttu-id="860b0-159">Krok 3: Přidání GridView, obsahující seznam produktů s vybrané dodavatele</span><span class="sxs-lookup"><span data-stu-id="860b0-159">Step 3: Adding a GridView that Lists the Selected Supplier s Products</span></span>

<span data-ttu-id="860b0-160">Tlačítko ukončí všechny produkty jsme mohli přidat do šablony s FormView, umožní s nejprve přidat GridView pod FormView, které jsou uvedeny produkty, které poskytuje dodavatel vybrané.</span><span class="sxs-lookup"><span data-stu-id="860b0-160">Before we add the Discontinue All Products Button to the FormView s template, let s first add a GridView beneath the FormView that lists the products provided by the selected supplier.</span></span> <span data-ttu-id="860b0-161">GridView dosáhnout, přidat na stránku, nastavte jeho `ID` vlastnost `SuppliersProducts`, a přidejte nový ObjectDataSource s názvem `SuppliersProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="860b0-161">To accomplish this, add a GridView to the page, set its `ID` property to `SuppliersProducts`, and add a new ObjectDataSource named `SuppliersProductsDataSource`.</span></span>


<span data-ttu-id="860b0-162">[![Vytvořit nový ObjectDataSource s názvem SuppliersProductsDataSource](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image19.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="860b0-162">[![Create a New ObjectDataSource Named SuppliersProductsDataSource](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image19.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image18.png)</span></span>

<span data-ttu-id="860b0-163">**Obrázek 8**: vytvoření nové ObjectDataSource s názvem `SuppliersProductsDataSource` ([Kliknutím zobrazit obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="860b0-163">**Figure 8**: Create a New ObjectDataSource Named `SuppliersProductsDataSource` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image20.png))</span></span>


<span data-ttu-id="860b0-164">Konfigurace této ObjectDataSource použití třídy ProductsBLL s `GetProductsBySupplierID(supplierID)` – metoda (viz obrázek 9).</span><span class="sxs-lookup"><span data-stu-id="860b0-164">Configure this ObjectDataSource to use the ProductsBLL class s `GetProductsBySupplierID(supplierID)` method (see Figure 9).</span></span> <span data-ttu-id="860b0-165">Když tato rutina GridView vám umožní produktu s cenu být upravena, won t používat integrované úpravy nebo odstranění funkce z GridView.</span><span class="sxs-lookup"><span data-stu-id="860b0-165">While this GridView will allow for a product s price to be adjusted, it won t be using the built-in editing or deleting features from the GridView.</span></span> <span data-ttu-id="860b0-166">Proto jsme lze nastavit rozevíracím seznamu (None) pro ObjectDataSource s karty UPDATE, INSERT a DELETE.</span><span class="sxs-lookup"><span data-stu-id="860b0-166">Therefore, we can set the drop-down list to (None) for the ObjectDataSource s UPDATE, INSERT, and DELETE tabs.</span></span>


<span data-ttu-id="860b0-167">[![Nakonfigurujte zdroj dat pro použití třídy ProductsBLL s GetProductsBySupplierID(supplierID) – metoda](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image22.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="860b0-167">[![Configure the Data Source to use the ProductsBLL Class s GetProductsBySupplierID(supplierID) Method](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image22.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image21.png)</span></span>

<span data-ttu-id="860b0-168">**Obrázek 9**: Konfigurace zdroje dat pro použití `ProductsBLL` třídu s `GetProductsBySupplierID(supplierID)` – metoda ([Kliknutím zobrazit obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="860b0-168">**Figure 9**: Configure the Data Source to use the `ProductsBLL` Class s `GetProductsBySupplierID(supplierID)` Method ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image23.png))</span></span>


<span data-ttu-id="860b0-169">Vzhledem k tomu `GetProductsBySupplierID(supplierID)` metoda přijímá vstupní parametr, Průvodce ObjectDataSource nám výzvy pro zdroj této hodnoty parametru.</span><span class="sxs-lookup"><span data-stu-id="860b0-169">Since the `GetProductsBySupplierID(supplierID)` method accepts an input parameter, the ObjectDataSource wizard prompts us for the source of this parameter value.</span></span> <span data-ttu-id="860b0-170">Předávat `SupplierID` z FormView hodnoty, nastavte parametr zdrojového rozevíracího seznamu na ovládací prvek a rozevírací seznam ControlID na `Suppliers` (ID FormView vytvořili v kroku 2).</span><span class="sxs-lookup"><span data-stu-id="860b0-170">To pass in the `SupplierID` value from the FormView, set the Parameter source drop-down list to Control and the ControlID drop-down list to `Suppliers` (the ID of the FormView created in Step 2).</span></span>


<span data-ttu-id="860b0-171">[![Označuje pole supplierID parametr musí pocházet z ovládacího prvku FormView dodavatelů](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image25.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="860b0-171">[![Indicate that the supplierID Parameter Should Come from the Suppliers FormView Control](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image25.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image24.png)</span></span>

<span data-ttu-id="860b0-172">**Obrázek 10**: označuje, že  *`supplierID`*  parametr musí pocházet z `Suppliers` FormView řízení ([Kliknutím zobrazit obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="860b0-172">**Figure 10**: Indicate that the *`supplierID`* Parameter Should Come from the `Suppliers` FormView Control ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image26.png))</span></span>


<span data-ttu-id="860b0-173">Po dokončení Průvodce ObjectDataSource, bude GridView obsahovat BoundField nebo vlastnost CheckBoxField pro každý produkt s datová pole.</span><span class="sxs-lookup"><span data-stu-id="860b0-173">After completing the ObjectDataSource wizard, the GridView will contain a BoundField or CheckBoxField for each of the product s data fields.</span></span> <span data-ttu-id="860b0-174">Umožňují s to trim dolů k zobrazení jenom na `ProductName` a `UnitPrice` BoundFields spolu s `Discontinued` Vlastnost CheckBoxField; kromě toho mohli formátu s `UnitPrice` BoundField tak, aby jeho text je formátován jako měny.</span><span class="sxs-lookup"><span data-stu-id="860b0-174">Let s trim this down to show just the `ProductName` and `UnitPrice` BoundFields along with the `Discontinued` CheckBoxField; furthermore, let s format the `UnitPrice` BoundField such that its text is formatted as a currency.</span></span> <span data-ttu-id="860b0-175">Vaše GridView a `SuppliersProductsDataSource` ObjectDataSource s deklarativní by měl vypadat podobně jako následující kód:</span><span class="sxs-lookup"><span data-stu-id="860b0-175">Your GridView and `SuppliersProductsDataSource` ObjectDataSource s declarative markup should look similar to the following markup:</span></span>


[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-vb/samples/sample3.aspx)]

<span data-ttu-id="860b0-176">V tomto okamžiku zobrazí našem kurzu hlavní/podrobnosti sestavy, uživatel vybrala dodavatele z FormView v horní části a produkty od dodavatele prostřednictvím GridView v dolní části.</span><span class="sxs-lookup"><span data-stu-id="860b0-176">At this point our tutorial displays a master/details report, allowing the user to pick a supplier from the FormView at the top and to view the products provided by that supplier through the GridView at the bottom.</span></span> <span data-ttu-id="860b0-177">Obrázek 11 zobrazuje snímek obrazovky části této stránky, když vyberete dodavatele Tokio Traders z FormView.</span><span class="sxs-lookup"><span data-stu-id="860b0-177">Figure 11 shows a screen shot of this page when selecting the Tokyo Traders supplier from the FormView.</span></span>


<span data-ttu-id="860b0-178">[![Vybrané dodavatele s produkty se zobrazují v prvku GridView.](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image28.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="860b0-178">[![The Selected Supplier s Products are Displayed in the GridView](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image28.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image27.png)</span></span>

<span data-ttu-id="860b0-179">**Obrázek 11**: vybrané dodavatele s produkty jsou zobrazeny v GridView ([Kliknutím zobrazit obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image29.png))</span><span class="sxs-lookup"><span data-stu-id="860b0-179">**Figure 11**: The Selected Supplier s Products are Displayed in the GridView ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image29.png))</span></span>


## <a name="step-4-creating-dal-and-bll-methods-to-discontinue-all-products-for-a-supplier"></a><span data-ttu-id="860b0-180">Krok 4: Vytvoření DAL a metody BLL ukončí všechny produkty pro dodavatele</span><span class="sxs-lookup"><span data-stu-id="860b0-180">Step 4: Creating DAL and BLL Methods to Discontinue All Products for a Supplier</span></span>

<span data-ttu-id="860b0-181">Před jsme přidání tlačítka do FormView, po kliknutí na ze všech produktů s jiného dodavatele, musíme nejprve přidejte metodu DAL i BLL, který provádí tuto akci.</span><span class="sxs-lookup"><span data-stu-id="860b0-181">Before we can add a Button to the FormView that, when clicked, discontinues all of the supplier s products, we first need to add a method to both the DAL and BLL that performs this action.</span></span> <span data-ttu-id="860b0-182">Konkrétně tato metoda bude mít název `DiscontinueAllProductsForSupplier(supplierID)`.</span><span class="sxs-lookup"><span data-stu-id="860b0-182">In particular, this method will be named `DiscontinueAllProductsForSupplier(supplierID)`.</span></span> <span data-ttu-id="860b0-183">Při kliknutí na s FormView tlačítko jsme budete volat tuto metodu v vrstvy obchodní logiky, předávání ve vybrané dodavatele s `SupplierID`; BLL pak zavolá odpovídající Data Access Layer metody, která bude vydávat `UPDATE` na – příkaz databáze, která ze zadaného dodavatele s produkty.</span><span class="sxs-lookup"><span data-stu-id="860b0-183">When the FormView s Button is clicked, we'll invoke this method in the Business Logic Layer, passing in the selected supplier s `SupplierID`; the BLL will then call down to the corresponding Data Access Layer method, which will issue an `UPDATE` statement to the database that discontinues the specified supplier s products.</span></span>

<span data-ttu-id="860b0-184">Jak je uvedeno v v našem předchozí kurzy, použijeme přístupu zdola nahoru, počínaje vytvoření metodu DAL, pak metodu BLL a nakonec implementace funkce na stránce technologie ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="860b0-184">As we have done in our previous tutorials, we'll use a bottom-up approach, starting with creating the DAL method, then the BLL method, and finally implementing the functionality in the ASP.NET page.</span></span> <span data-ttu-id="860b0-185">Otevřete `Northwind.xsd` typové datové sady v `App_Code/DAL` složky a přidat nové metody pro `ProductsTableAdapter` (klikněte pravým tlačítkem na `ProductsTableAdapter` a zvolte Přidat dotazu).</span><span class="sxs-lookup"><span data-stu-id="860b0-185">Open the `Northwind.xsd` Typed DataSet in the `App_Code/DAL` folder and add a new method to the `ProductsTableAdapter` (right-click on the `ProductsTableAdapter` and choose Add Query).</span></span> <span data-ttu-id="860b0-186">Tím zobrazíte Průvodce konfigurací dotazu TableAdapter, nám provede proces přidávání nové metody.</span><span class="sxs-lookup"><span data-stu-id="860b0-186">Doing so will bring up the TableAdapter Query Configuration wizard, which walks us through the process of adding the new method.</span></span> <span data-ttu-id="860b0-187">Spustit tak, že zadáte, tato metoda naše DAL pomocí příkazu SQL ad hoc.</span><span class="sxs-lookup"><span data-stu-id="860b0-187">Start by indicating that our DAL method will use an ad-hoc SQL statement.</span></span>


<span data-ttu-id="860b0-188">[![Create – metoda DAL příkazu SQL Ad-Hoc](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image31.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image30.png)</span><span class="sxs-lookup"><span data-stu-id="860b0-188">[![Create the DAL Method Using an Ad-Hoc SQL Statement](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image31.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image30.png)</span></span>

<span data-ttu-id="860b0-189">**Obrázek 12**: vytvoření DAL metoda pomocí příkazu SQL Ad-Hoc ([Kliknutím zobrazit obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image32.png))</span><span class="sxs-lookup"><span data-stu-id="860b0-189">**Figure 12**: Create the DAL Method Using an Ad-Hoc SQL Statement ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image32.png))</span></span>


<span data-ttu-id="860b0-190">Dále požádáni o nám, jaký typ dotaz k vytvoření.</span><span class="sxs-lookup"><span data-stu-id="860b0-190">Next, the wizard prompts us as to what type of query to create.</span></span> <span data-ttu-id="860b0-191">Vzhledem k tomu, `DiscontinueAllProductsForSupplier(supplierID)` metoda bude nutné provést aktualizaci `Products` databázové tabulky, nastavení `Discontinued` pole 1 pro všechny produkty, které poskytuje zadaný  *`supplierID`* , musíme vytvořit dotaz, který aktualizuje data.</span><span class="sxs-lookup"><span data-stu-id="860b0-191">Since the `DiscontinueAllProductsForSupplier(supplierID)` method will need to update the `Products` database table, setting the `Discontinued` field to 1 for all products provided by the specified *`supplierID`*, we need to create a query that updates data.</span></span>


<span data-ttu-id="860b0-192">[![Vyberte typ dotazu aktualizace](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image34.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="860b0-192">[![Choose the UPDATE Query Type](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image34.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image33.png)</span></span>

<span data-ttu-id="860b0-193">**Obrázek 13**: Vyberte typ dotazu aktualizace ([Kliknutím zobrazit obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image35.png))</span><span class="sxs-lookup"><span data-stu-id="860b0-193">**Figure 13**: Choose the UPDATE Query Type ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image35.png))</span></span>


<span data-ttu-id="860b0-194">Na další obrazovce Průvodce poskytuje TableAdapter s existující `UPDATE` příkaz, který aktualizuje každé pole definovaná v `Products` DataTable.</span><span class="sxs-lookup"><span data-stu-id="860b0-194">The next wizard screen provides the TableAdapter s existing `UPDATE` statement, which updates each of the fields defined in the `Products` DataTable.</span></span> <span data-ttu-id="860b0-195">Text dotazu nahraďte následující příkaz:</span><span class="sxs-lookup"><span data-stu-id="860b0-195">Replace this query text with the following statement:</span></span>


[!code-sql[Main](adding-and-responding-to-buttons-to-a-gridview-vb/samples/sample4.sql)]

<span data-ttu-id="860b0-196">Po zadání tohoto dotazu a kliknutím na tlačítko Další, poslední obrazovka průvodce požádá o nový název metody s pomocí `DiscontinueAllProductsForSupplier`.</span><span class="sxs-lookup"><span data-stu-id="860b0-196">After entering this query and clicking Next, the last wizard screen asks for the new method s name use `DiscontinueAllProductsForSupplier`.</span></span> <span data-ttu-id="860b0-197">Dokončete průvodce kliknutím na tlačítko Dokončit.</span><span class="sxs-lookup"><span data-stu-id="860b0-197">Complete the wizard by clicking the Finish button.</span></span> <span data-ttu-id="860b0-198">Při vrácení k návrháře DataSet byste měli vidět nové metody v `ProductsTableAdapter` s názvem `DiscontinueAllProductsForSupplier(@SupplierID)`.</span><span class="sxs-lookup"><span data-stu-id="860b0-198">Upon returning to the DataSet Designer you should see a new method in the `ProductsTableAdapter` named `DiscontinueAllProductsForSupplier(@SupplierID)`.</span></span>


<span data-ttu-id="860b0-199">[![Název nové DiscontinueAllProductsForSupplier DAL – metoda](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image37.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image36.png)</span><span class="sxs-lookup"><span data-stu-id="860b0-199">[![Name the New DAL Method DiscontinueAllProductsForSupplier](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image37.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image36.png)</span></span>

<span data-ttu-id="860b0-200">**Obrázek 14**: název nová metoda DAL `DiscontinueAllProductsForSupplier` ([Kliknutím zobrazit obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image38.png))</span><span class="sxs-lookup"><span data-stu-id="860b0-200">**Figure 14**: Name the New DAL Method `DiscontinueAllProductsForSupplier` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image38.png))</span></span>


<span data-ttu-id="860b0-201">Pomocí `DiscontinueAllProductsForSupplier(supplierID)` metoda vytvořené v Data Access Layer, naše dalším krokem je vytvoření `DiscontinueAllProductsForSupplier(supplierID)` metoda v vrstvu obchodní logiky.</span><span class="sxs-lookup"><span data-stu-id="860b0-201">With the `DiscontinueAllProductsForSupplier(supplierID)` method created in the Data Access Layer, our next task is to create the `DiscontinueAllProductsForSupplier(supplierID)` method in the Business Logic Layer.</span></span> <span data-ttu-id="860b0-202">Chcete-li dosáhnout, otevřete `ProductsBLL` třídy souboru a přidejte následující:</span><span class="sxs-lookup"><span data-stu-id="860b0-202">To accomplish this, open the `ProductsBLL` class file and add the following:</span></span>


[!code-vb[Main](adding-and-responding-to-buttons-to-a-gridview-vb/samples/sample5.vb)]

<span data-ttu-id="860b0-203">Tato metoda jednoduše volá dolů na `DiscontinueAllProductsForSupplier(supplierID)` metoda v vrstvy DAL předávání podél poskytnutého  *`supplierID`*  hodnota parametru.</span><span class="sxs-lookup"><span data-stu-id="860b0-203">This method simply calls down to the `DiscontinueAllProductsForSupplier(supplierID)` method in the DAL, passing along the provided *`supplierID`* parameter value.</span></span> <span data-ttu-id="860b0-204">Kdyby všechny obchodních pravidel, která je povoleno pouze dodavatele s produkty přerušeny za určitých okolností by měl být tato pravidla zde prováděn BLL.</span><span class="sxs-lookup"><span data-stu-id="860b0-204">If there were any business rules that only allowed a supplier s products to be discontinued under certain circumstances, those rules should be implemented here, in the BLL.</span></span>

> [!NOTE]
> <span data-ttu-id="860b0-205">Na rozdíl od `UpdateProduct` přetížení v `ProductsBLL` třídy, `DiscontinueAllProductsForSupplier(supplierID)` podpis metody nezahrnuje `DataObjectMethodAttribute` atribut (`<System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Update, Boolean)>`).</span><span class="sxs-lookup"><span data-stu-id="860b0-205">Unlike the `UpdateProduct` overloads in the `ProductsBLL` class, the `DiscontinueAllProductsForSupplier(supplierID)` method signature does not include the `DataObjectMethodAttribute` attribute (`<System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Update, Boolean)>`).</span></span> <span data-ttu-id="860b0-206">To vylučuje `DiscontinueAllProductsForSupplier(supplierID)` z rozevíracího seznamu ObjectDataSource s s Průvodce konfigurace zdroje dat na kartě aktualizace. I sunout vynechána tento atribut, protože jsme budete volání `DiscontinueAllProductsForSupplier(supplierID)` metoda přímo z obslužné rutiny události v naší stránce s ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="860b0-206">This precludes the `DiscontinueAllProductsForSupplier(supplierID)` method from the ObjectDataSource s Configure Data Source wizard s drop-down list in the UPDATE tab. I ve omitted this attribute because we'll be calling the `DiscontinueAllProductsForSupplier(supplierID)` method directly from an event handler in our ASP.NET page.</span></span>


## <a name="step-5-adding-a-discontinue-all-products-button-to-the-formview"></a><span data-ttu-id="860b0-207">Krok 5: Přidání odebrání ze všech produktů tlačítko FormView</span><span class="sxs-lookup"><span data-stu-id="860b0-207">Step 5: Adding a Discontinue All Products Button to the FormView</span></span>

<span data-ttu-id="860b0-208">Pomocí `DiscontinueAllProductsForSupplier(supplierID)` dokončit metodu v BLL a DAL, v posledním kroku pro přidání možnost ukončí všechny produkty pro vybrané dodavatele, je přidání ovládacího prvku tlačítko pro FormView s `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="860b0-208">With the `DiscontinueAllProductsForSupplier(supplierID)` method in the BLL and DAL complete, the final step for adding the ability to discontinue all products for the selected supplier is to add a Button Web control to the FormView s `ItemTemplate`.</span></span> <span data-ttu-id="860b0-209">Umožňují s přidat tlačítko níže telefonní číslo dodavatele s text tlačítka, ukončí všechny produkty a `ID` hodnota vlastnosti `DiscontinueAllProductsForSupplier`.</span><span class="sxs-lookup"><span data-stu-id="860b0-209">Let s add such a Button below the supplier s phone number with the button text, Discontinue All Products and an `ID` property value of `DiscontinueAllProductsForSupplier`.</span></span> <span data-ttu-id="860b0-210">Tento ovládací prvek tlačítko webu prostřednictvím návrháře můžete přidat kliknutím na odkaz Upravit šablony v FormView s inteligentním (viz obrázek 15), nebo přímo pomocí deklarativní syntaxe.</span><span class="sxs-lookup"><span data-stu-id="860b0-210">You can add this Button Web control through the Designer by clicking on the Edit Templates link in the FormView s smart tag (see Figure 15), or directly through the declarative syntax.</span></span>


<span data-ttu-id="860b0-211">[![Přidání odebrání ze všech produktů webové ovládacího prvku tlačítka FormView s ItemTemplate](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image40.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="860b0-211">[![Add a Discontinue All Products Button Web Control to the FormView s ItemTemplate](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image40.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image39.png)</span></span>

<span data-ttu-id="860b0-212">**Obrázek 15**: Přidání ukončí všechny produkty tlačítko ovládacího prvku do FormView s `ItemTemplate` ([Kliknutím zobrazit obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image41.png))</span><span class="sxs-lookup"><span data-stu-id="860b0-212">**Figure 15**: Add a Discontinue All Products Button Web Control to the FormView s `ItemTemplate` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image41.png))</span></span>


<span data-ttu-id="860b0-213">Když po kliknutí na tlačítko tak, že uživatel navštívíte, vyplývá stránce zpětné volání a FormView s [ `ItemCommand` událostí](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.formview.itemcommand.aspx) aktivuje.</span><span class="sxs-lookup"><span data-stu-id="860b0-213">When the Button is clicked by a user visiting the page, a postback ensues and the FormView s [`ItemCommand` event](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.formview.itemcommand.aspx) fires.</span></span> <span data-ttu-id="860b0-214">Spuštění vlastního kódu v reakci na toto tlačítko se klikli, můžeme vytvořit obslužnou rutinu události pro tuto událost.</span><span class="sxs-lookup"><span data-stu-id="860b0-214">To execute custom code in response to this Button being clicked, we can create an event handler for this event.</span></span> <span data-ttu-id="860b0-215">Pochopení, ale který `ItemCommand` událost se aktivuje vždy, když *žádné* ve třídě FormView kliknutí na tlačítko, LinkButton nebo ImageButton webové ovládací prvek.</span><span class="sxs-lookup"><span data-stu-id="860b0-215">Understand, though, that the `ItemCommand` event fires whenever *any* Button, LinkButton, or ImageButton Web control is clicked within the FormView.</span></span> <span data-ttu-id="860b0-216">To znamená, že když se uživatel přesune z jedné stránky na druhou v FormView, `ItemCommand` aktivuje událost; samé, když uživatel klikne na tlačítko Nový, upravit, nebo odstranit v FormView, který podporuje vkládání, aktualizaci nebo odstranění.</span><span class="sxs-lookup"><span data-stu-id="860b0-216">That means that when the user moves from one page to another in the FormView, the `ItemCommand` event fires; same thing when the user clicks New, Edit, or Delete in a FormView that supports inserting, updating, or deleting.</span></span>

<span data-ttu-id="860b0-217">Vzhledem k tomu `ItemCommand` aktivuje se bez ohledu na to, jaké po kliknutí na tlačítko, v případě, že obslužná rutina budeme potřebovat způsob, jak určit, pokud bylo stisknuto tlačítko ukončí všechny produkty, nebo pokud se jednalo o některé další tlačítko.</span><span class="sxs-lookup"><span data-stu-id="860b0-217">Since the `ItemCommand` fires regardless of what button is clicked, in the event handler we need a way to determine if the Discontinue All Products Button was clicked or if it was some other button.</span></span> <span data-ttu-id="860b0-218">K tomu, jsme můžete nastavit ovládací prvek tlačítko webového s `CommandName` vlastnost některé identifikační hodnotu.</span><span class="sxs-lookup"><span data-stu-id="860b0-218">To accomplish this, we can set the Button Web control s `CommandName` property to some identifying value.</span></span> <span data-ttu-id="860b0-219">Pokud po kliknutí na tlačítko, to `CommandName` do byla předána hodnota `ItemCommand` obslužné rutiny události, povolení ke zjištění, zda byla tlačítko ukončí všechny produkty kliknutí na tlačítko.</span><span class="sxs-lookup"><span data-stu-id="860b0-219">When the Button is clicked, this `CommandName` value is passed into the `ItemCommand` event handler, enabling us to determine whether the Discontinue All Products Button was the button clicked.</span></span> <span data-ttu-id="860b0-220">Nastavit ukončí všechny produkty tlačítko s `CommandName` vlastnost DiscontinueProducts.</span><span class="sxs-lookup"><span data-stu-id="860b0-220">Set the Discontinue All Products Button s `CommandName` property to DiscontinueProducts .</span></span>

<span data-ttu-id="860b0-221">Nakonec umožní s pomůže zajistit, že opravdu chce uživatel ukončí vybrané dodavatele s produkty dialogového okna potvrdit na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="860b0-221">Finally, let s use a client-side confirm dialog box to ensure that the user really wants to discontinue the selected supplier s products.</span></span> <span data-ttu-id="860b0-222">Jak jsme viděli v [přidání Client-Side potvrzení při odstranění](../editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-vb.md) kurz, můžete to provést pomocí verze jazyka JavaScript.</span><span class="sxs-lookup"><span data-stu-id="860b0-222">As we saw in the [Adding Client-Side Confirmation When Deleting](../editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-vb.md) tutorial, this can be accomplished with a bit of JavaScript.</span></span> <span data-ttu-id="860b0-223">Konkrétně nastavte vlastnost tlačítko webové ovládací prvek s OnClientClick na`return confirm('This will mark _all_ of this supplier\'s products as discontinued. Are you certain you want to do this?');`</span><span class="sxs-lookup"><span data-stu-id="860b0-223">In particular, set the Button Web control s OnClientClick property to `return confirm('This will mark _all_ of this supplier\'s products as discontinued. Are you certain you want to do this?');`</span></span>

<span data-ttu-id="860b0-224">Po provedení těchto změn, deklarativní syntaxi s FormView by měl vypadat následovně:</span><span class="sxs-lookup"><span data-stu-id="860b0-224">After making these changes, the FormView s declarative syntax should look like the following:</span></span>


[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-vb/samples/sample6.aspx)]

<span data-ttu-id="860b0-225">Dále vytvořte obslužnou rutinu události pro FormView s `ItemCommand` událostí.</span><span class="sxs-lookup"><span data-stu-id="860b0-225">Next, create an event handler for the FormView s `ItemCommand` event.</span></span> <span data-ttu-id="860b0-226">V této obslužné rutiny události je třeba nejprve určit, zda bylo stisknuto tlačítko ukončí všechny produkty.</span><span class="sxs-lookup"><span data-stu-id="860b0-226">In this event handler we need to first determine whether the Discontinue All Products Button was clicked.</span></span> <span data-ttu-id="860b0-227">Pokud tedy chcete vytvořit instanci `ProductsBLL` třídy a vyvolání jeho `DiscontinueAllProductsForSupplier(supplierID)` předávání v případě metody `SupplierID` z vybrané FormView:</span><span class="sxs-lookup"><span data-stu-id="860b0-227">If so, we want to create an instance of the `ProductsBLL` class and invoke its `DiscontinueAllProductsForSupplier(supplierID)` method, passing in the `SupplierID` of the selected FormView:</span></span>


[!code-vb[Main](adding-and-responding-to-buttons-to-a-gridview-vb/samples/sample7.vb)]

<span data-ttu-id="860b0-228">Všimněte si, že `SupplierID` aktuální vybrané dodavatele ve třídě FormView lze přistupovat pomocí FormView s [ `SelectedValue` vlastnost](https://msdn.microsoft.com/en-US/library/system.web.ui.webcontrols.formview.selectedvalue.aspx).</span><span class="sxs-lookup"><span data-stu-id="860b0-228">Note that the `SupplierID` of the current selected supplier in the FormView can be accessed using the FormView s [`SelectedValue` property](https://msdn.microsoft.com/en-US/library/system.web.ui.webcontrols.formview.selectedvalue.aspx).</span></span> <span data-ttu-id="860b0-229">`SelectedValue` Vlastnost vrací hodnotu pro záznam se zobrazuje ve třídě FormView klíče první data.</span><span class="sxs-lookup"><span data-stu-id="860b0-229">The `SelectedValue` property returns the first data key value for the record being displayed in the FormView.</span></span> <span data-ttu-id="860b0-230">FormView s [ `DataKeyNames` vlastnost](https://msdn.microsoft.com/en-us/system.web.ui.webcontrols.formview.datakeynames.aspx), což naznačuje data pole, ze kterých data hodnoty klíče načítána, byla automaticky nastavena na `SupplierID` Visual Studio při vazbě ObjectDataSource na FormView zpět v kroku 2.</span><span class="sxs-lookup"><span data-stu-id="860b0-230">The FormView s [`DataKeyNames` property](https://msdn.microsoft.com/en-us/system.web.ui.webcontrols.formview.datakeynames.aspx), which indicates the data fields from which the data key values are pulled from, was automatically set to `SupplierID` by Visual Studio when binding the ObjectDataSource to the FormView back in Step 2.</span></span>

<span data-ttu-id="860b0-231">Pomocí `ItemCommand` vytvoření obslužné rutiny události za chvíli k otestování stránky.</span><span class="sxs-lookup"><span data-stu-id="860b0-231">With the `ItemCommand` event handler created, take a moment to test out the page.</span></span> <span data-ttu-id="860b0-232">Přejděte do Cooperativa de Quesos, Las Cabras' dodavatele (ho s páté dodavatele v FormView pro mě nejlepší).</span><span class="sxs-lookup"><span data-stu-id="860b0-232">Browse to the Cooperativa de Quesos 'Las Cabras' supplier (it s the fifth supplier in the FormView for me).</span></span> <span data-ttu-id="860b0-233">Tato dodavatele poskytuje dva produkty, Queso Cabrales a Queso Manchego La Pastora, obě tyto položky jsou *není* zastaveny.</span><span class="sxs-lookup"><span data-stu-id="860b0-233">This supplier provides two products, Queso Cabrales and Queso Manchego La Pastora, both of which are *not* discontinued.</span></span>

<span data-ttu-id="860b0-234">Představte si, že Cooperativa de Quesos, Las Cabras' byla mimo obchodní, a proto jeho produktů jsou přerušeny.</span><span class="sxs-lookup"><span data-stu-id="860b0-234">Imagine that Cooperativa de Quesos 'Las Cabras' has gone out of business and therefore its products are to be discontinued.</span></span> <span data-ttu-id="860b0-235">Klikněte na tlačítko ukončí všechny produkty tlačítko.</span><span class="sxs-lookup"><span data-stu-id="860b0-235">Click the Discontinue All Products Button.</span></span> <span data-ttu-id="860b0-236">Zobrazí se dialogové okno potvrzení na straně klienta (viz obrázek 16).</span><span class="sxs-lookup"><span data-stu-id="860b0-236">This will display the client-side confirm dialog box (see Figure 16).</span></span>


<span data-ttu-id="860b0-237">[![Cooperativa de Quesos Las Cabras zdroje dva Active produkty](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image43.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image42.png)</span><span class="sxs-lookup"><span data-stu-id="860b0-237">[![Cooperativa de Quesos Las Cabras Supplies Two Active Products](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image43.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image42.png)</span></span>

<span data-ttu-id="860b0-238">**Obrázek 16**: Cooperativa de Quesos Las Cabras zdroje dva Active produkty ([Kliknutím zobrazit obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image44.png))</span><span class="sxs-lookup"><span data-stu-id="860b0-238">**Figure 16**: Cooperativa de Quesos Las Cabras Supplies Two Active Products ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image44.png))</span></span>


<span data-ttu-id="860b0-239">Pokud kliknete na tlačítko OK v dialogovém okně potvrďte na straně klienta, bude pokračovat odeslání formuláře, v kterém příčinou zpětné volání FormView s `ItemCommand` událostí bude platit.</span><span class="sxs-lookup"><span data-stu-id="860b0-239">If you click OK in the client-side confirm dialog box, the form submission will proceed, causing a postback in which the FormView s `ItemCommand` event will fire.</span></span> <span data-ttu-id="860b0-240">Obslužné rutiny události jsme vytvořili pak provede, volání `DiscontinueAllProductsForSupplier(supplierID)` metoda a zrušený Queso Cabrales i Queso Manchego La Pastora produkty.</span><span class="sxs-lookup"><span data-stu-id="860b0-240">The event handler we created will then execute, invoking the `DiscontinueAllProductsForSupplier(supplierID)` method and discontinuing both the Queso Cabrales and Queso Manchego La Pastora products.</span></span>

<span data-ttu-id="860b0-241">Pokud je zakázána stav zobrazení s GridView, GridView je právě odrážejí do základní úložiště dat v každé zpětné volání a proto bude okamžitě aktualizovat tak, aby odrážela, aby tyto dva produkty jsou nyní zastaveny (viz obrázek 17).</span><span class="sxs-lookup"><span data-stu-id="860b0-241">If you have disabled the GridView s view state, the GridView is being rebound to the underlying data store on every postback, and therefore will immediately be updated to reflect that these two products are now discontinued (see Figure 17).</span></span> <span data-ttu-id="860b0-242">Pokud však nejsou zakázané stav zobrazení v prvku GridView, musíte ručně rebind data, která mají GridView po provedení této změny.</span><span class="sxs-lookup"><span data-stu-id="860b0-242">If, however, you have not disabled view state in the GridView, you will need to manually rebind the data to the GridView after making this change.</span></span> <span data-ttu-id="860b0-243">K tomu, jednoduše proveďte volání GridView s `DataBind()` metoda ihned po volání `DiscontinueAllProductsForSupplier(supplierID)` metoda.</span><span class="sxs-lookup"><span data-stu-id="860b0-243">To accomplish this, simply make a call to the GridView s `DataBind()` method immediately after invoking the `DiscontinueAllProductsForSupplier(supplierID)` method.</span></span>


<span data-ttu-id="860b0-244">[![Po kliknutí na tlačítko ukončí všechny produkty, jsou tyto produkty dodavatele s odpovídajícím způsobem aktualizovat](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image46.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="860b0-244">[![After Clicking the Discontinue All Products Button, the Supplier s Products are Updated Accordingly](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image46.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image45.png)</span></span>

<span data-ttu-id="860b0-245">**Obrázek 17**: Po kliknutí na tlačítko ukončí všechny produkty, jsou tyto produkty dodavatele s odpovídajícím způsobem aktualizovat ([Kliknutím zobrazit obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image47.png))</span><span class="sxs-lookup"><span data-stu-id="860b0-245">**Figure 17**: After Clicking the Discontinue All Products Button, the Supplier s Products are Updated Accordingly ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image47.png))</span></span>


## <a name="step-6-creating-an-updateproduct-overload-in-the-business-logic-layer-for-adjusting-a-product-s-price"></a><span data-ttu-id="860b0-246">Krok 6: Vytvoření přetížení UpdateProduct v vrstvu obchodní logiky pro úpravu cenu s produktu</span><span class="sxs-lookup"><span data-stu-id="860b0-246">Step 6: Creating an UpdateProduct Overload in the Business Logic Layer for Adjusting a Product s Price</span></span>

<span data-ttu-id="860b0-247">Jako ukončí všechny produkty tlačítkem v FormView, aby bylo možné přidat tlačítka pro zvýšení a snížení ceny pro produkt v GridView musíme nejprve přidejte příslušné metody Data Access Layer a vrstvu obchodní logiky.</span><span class="sxs-lookup"><span data-stu-id="860b0-247">Like with the Discontinue All Products Button in the FormView, in order to add buttons for increasing and decreasing the price for a product in the GridView we need to first add the appropriate Data Access Layer and Business Logic Layer methods.</span></span> <span data-ttu-id="860b0-248">Vzhledem k tomu, že jsme už máte metodu, která aktualizuje jeden produkt řádek v DAL, můžeme poskytnout tyto funkce tak, že vytvoříte novou přetížení pro `UpdateProduct` metoda v BLL.</span><span class="sxs-lookup"><span data-stu-id="860b0-248">Since we already have a method that updates a single product row in the DAL, we can provide such functionality by creating a new overload for the `UpdateProduct` method in the BLL.</span></span>

<span data-ttu-id="860b0-249">Naše minulosti `UpdateProduct` přetížení pořídili v některé kombinaci produktu polí jako skalární vstupní hodnoty a pak jste aktualizovali pouze pole pro daný produkt.</span><span class="sxs-lookup"><span data-stu-id="860b0-249">Our past `UpdateProduct` overloads have taken in some combination of product fields as scalar input values and have then updated just those fields for the specified product.</span></span> <span data-ttu-id="860b0-250">Pro toto přetížení jsme budete mírně lišit od tento standard a místo toho předat v produktu s `ProductID` a procento, o které chcete upravit `UnitPrice` (oproti předávání v novém upravena `UnitPrice` sám sebe).</span><span class="sxs-lookup"><span data-stu-id="860b0-250">For this overload we'll vary slightly from this standard and instead pass in the product s `ProductID` and the percentage by which to adjust the `UnitPrice` (as opposed to passing in the new, adjusted `UnitPrice` itself).</span></span> <span data-ttu-id="860b0-251">Tento přístup zjednoduší kód potřebujeme se zapisovat do třídy kódu stránky ASP.NET, protože jsme nejsou zobrazeny t třeba zabývat určení aktuální produkt s `UnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="860b0-251">This approach will simplify the code we need to write in the ASP.NET page code-behind class, since we don t have to bother with determining the current product s `UnitPrice`.</span></span>

<span data-ttu-id="860b0-252">`UpdateProduct` Přetížení pro tento kurz je zobrazena níže:</span><span class="sxs-lookup"><span data-stu-id="860b0-252">The `UpdateProduct` overload for this tutorial is shown below:</span></span>


[!code-vb[Main](adding-and-responding-to-buttons-to-a-gridview-vb/samples/sample8.vb)]

<span data-ttu-id="860b0-253">Toto přetížení načte informace o zadaný produkt prostřednictvím DAL s `GetProductByProductID(productID)` metoda.</span><span class="sxs-lookup"><span data-stu-id="860b0-253">This overload retrieves information about the specified product through the DAL s `GetProductByProductID(productID)` method.</span></span> <span data-ttu-id="860b0-254">Následně kontroluje, zda produktu s `UnitPrice` je přiřazen databázi `NULL` hodnotu.</span><span class="sxs-lookup"><span data-stu-id="860b0-254">It then checks to see whether the product s `UnitPrice` is assigned a database `NULL` value.</span></span> <span data-ttu-id="860b0-255">Pokud se jedná, ceny, je ponechán beze změny.</span><span class="sxs-lookup"><span data-stu-id="860b0-255">If it is, the price is left unaltered.</span></span> <span data-ttu-id="860b0-256">Pokud je však jinou hodnotu než`NULL` `UnitPrice` hodnotu, metoda aktualizace produktu s `UnitPrice` podle zadaného procenta (`unitPriceAdjustmentPercent`).</span><span class="sxs-lookup"><span data-stu-id="860b0-256">If, however, there is a non-`NULL` `UnitPrice` value, the method updates the product s `UnitPrice` by the specified percent (`unitPriceAdjustmentPercent`).</span></span>

## <a name="step-7-adding-the-increase-and-decrease-buttons-to-the-gridview"></a><span data-ttu-id="860b0-257">Krok 7: Přidání tlačítka snížení a zvýšení do GridView</span><span class="sxs-lookup"><span data-stu-id="860b0-257">Step 7: Adding the Increase and Decrease Buttons to the GridView</span></span>

<span data-ttu-id="860b0-258">Rutina GridView (a DetailsView) i vytvořené v kolekci polí.</span><span class="sxs-lookup"><span data-stu-id="860b0-258">The GridView (and DetailsView) are both made up of a collection of fields.</span></span> <span data-ttu-id="860b0-259">Kromě BoundFields, CheckBoxFields a TemplateFields technologie ASP.NET obsahuje ButtonField, který jak již název napovídá, vykreslí jako sloupec s tlačítko, LinkButton nebo ImageButton pro každý řádek.</span><span class="sxs-lookup"><span data-stu-id="860b0-259">In addition to BoundFields, CheckBoxFields, and TemplateFields, ASP.NET includes the ButtonField, which, as its name implies, renders as a column with a Button, LinkButton, or ImageButton for each row.</span></span> <span data-ttu-id="860b0-260">Podobně jako FormView, kliknutím na tlačítko *žádné* tlačítko GridView stránkování tlačítka, upravit nebo odstranit tlačítka, řazení tlačítka a tak dále způsobí, že zpětné volání a vyvolá rutina GridView s [ `RowCommand` událostí](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx).</span><span class="sxs-lookup"><span data-stu-id="860b0-260">Similar to the FormView, clicking *any* button within the GridView paging buttons, Edit or Delete buttons, sorting buttons, and so on causes a postback and raises the GridView s [`RowCommand` event](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx).</span></span>

<span data-ttu-id="860b0-261">Má ButtonField `CommandName` vlastnost, která přiřadí zadaná hodnota pro každý z jeho tlačítka `CommandName` vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="860b0-261">The ButtonField has a `CommandName` property that assigns the specified value to each of its Buttons `CommandName` properties.</span></span> <span data-ttu-id="860b0-262">S FormView, jako `CommandName` hodnota používá `RowCommand` obslužné rutiny události k určení, které tlačítko bylo kliknuto.</span><span class="sxs-lookup"><span data-stu-id="860b0-262">Like with the FormView, the `CommandName` value is used by the `RowCommand` event handler to determine which button was clicked.</span></span>

<span data-ttu-id="860b0-263">Umožňují s přidejte dva nové ButtonFields do GridView, jeden s text tlačítka cena + 10 % a další s textem cena -10 %.</span><span class="sxs-lookup"><span data-stu-id="860b0-263">Let s add two new ButtonFields to the GridView, one with a button text Price +10% and the other with the text Price -10%.</span></span> <span data-ttu-id="860b0-264">Přidat tyto ButtonFields, klikněte na odkaz Upravit sloupce z GridView s inteligentním, vyberte typ ButtonField pole ze seznamu v levém horním a klikněte na tlačítko Přidat.</span><span class="sxs-lookup"><span data-stu-id="860b0-264">To add these ButtonFields, click on the Edit Columns link from the GridView s smart tag, select the ButtonField field type from the list in the upper left and click the Add button.</span></span>


![Přidejte dva ButtonFields do GridView](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image48.png)

<span data-ttu-id="860b0-266">**Obrázek 18**: Přidejte dva ButtonFields do GridView</span><span class="sxs-lookup"><span data-stu-id="860b0-266">**Figure 18**: Add Two ButtonFields to the GridView</span></span>


<span data-ttu-id="860b0-267">Přesuňte dva ButtonFields, aby se zobrazily jako první dvě pole GridView.</span><span class="sxs-lookup"><span data-stu-id="860b0-267">Move the two ButtonFields so that they appear as the first two GridView fields.</span></span> <span data-ttu-id="860b0-268">Dále nastavte `Text` vlastnosti těchto dvou ButtonFields k cena + 10 % a ceny -10 % a `CommandName` vlastností IncreasePrice a DecreasePrice, v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="860b0-268">Next, set the `Text` properties of these two ButtonFields to Price +10% and Price -10% and the `CommandName` properties to IncreasePrice and DecreasePrice, respectively.</span></span> <span data-ttu-id="860b0-269">Ve výchozím nastavení ButtonField vykreslí jeho sloupec tlačítek jako LinkButtons.</span><span class="sxs-lookup"><span data-stu-id="860b0-269">By default, a ButtonField renders its column of buttons as LinkButtons.</span></span> <span data-ttu-id="860b0-270">To se dá změnit, ale prostřednictvím ButtonField s [ `ButtonType` vlastnost](https://msdn.microsoft.com/en-US/library/system.web.ui.webcontrols.buttonfieldbase.buttontype.aspx).</span><span class="sxs-lookup"><span data-stu-id="860b0-270">This can be changed, however, through the ButtonField s [`ButtonType` property](https://msdn.microsoft.com/en-US/library/system.web.ui.webcontrols.buttonfieldbase.buttontype.aspx).</span></span> <span data-ttu-id="860b0-271">Umožní s mají tyto dva ButtonFields se vykresluje jako regulární tlačítek; proto nastavit `ButtonType` vlastnost `Button`.</span><span class="sxs-lookup"><span data-stu-id="860b0-271">Let s have these two ButtonFields rendered as regular push buttons; therefore, set the `ButtonType` property to `Button`.</span></span> <span data-ttu-id="860b0-272">Obrázek 19 zobrazí pole dialogové po tyto změny byly provedeny; rutina GridView s deklarativní následující, která je.</span><span class="sxs-lookup"><span data-stu-id="860b0-272">Figure 19 shows the Fields dialog box after these changes have been made; following that is the GridView s declarative markup.</span></span>


![Konfigurovat ButtonFields Text, CommandName a ButtonType vlastnosti](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image49.png)

<span data-ttu-id="860b0-274">**Obrázek 19**: Konfigurace ButtonFields `Text`, `CommandName`, a `ButtonType` vlastnosti</span><span class="sxs-lookup"><span data-stu-id="860b0-274">**Figure 19**: Configure the ButtonFields `Text`, `CommandName`, and `ButtonType` Properties</span></span>


[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-vb/samples/sample9.aspx)]

<span data-ttu-id="860b0-275">Pomocí těchto ButtonFields vytvořen, posledním krokem je vytvoření obslužné rutiny události pro GridView s `RowCommand` událostí.</span><span class="sxs-lookup"><span data-stu-id="860b0-275">With these ButtonFields created, the final step is to create an event handler for the GridView s `RowCommand` event.</span></span> <span data-ttu-id="860b0-276">Této obslužné rutiny události, pokud je aktivována, protože buď za cenu + 10 % nebo % tlačítek cena -10 byly klikli, musí určit `ProductID` pro řádek, jehož tlačítko označeného a pak vyvolejte `ProductsBLL` třídu s `UpdateProduct` metody předávání do příslušné `UnitPrice` procento úpravu spolu s `ProductID`.</span><span class="sxs-lookup"><span data-stu-id="860b0-276">This event handler, if fired because either the Price +10% or Price -10% buttons were clicked, needs to determine the `ProductID` for the row whose button was clicked and then invoke the `ProductsBLL` class s `UpdateProduct` method, passing in the appropriate `UnitPrice` percentage adjustment along with the `ProductID`.</span></span> <span data-ttu-id="860b0-277">Tyto úlohy provedou následující kód:</span><span class="sxs-lookup"><span data-stu-id="860b0-277">The following code performs these tasks:</span></span>

[!code-vb[Main](adding-and-responding-to-buttons-to-a-gridview-vb/samples/sample10.vb)]

<span data-ttu-id="860b0-278">Aby bylo možné zjistit `ProductID` pro řádek jejichž cena + 10 % nebo % tlačítko cena -10 označeného, musíme poraďte se GridView s `DataKeys` kolekce.</span><span class="sxs-lookup"><span data-stu-id="860b0-278">In order to determine the `ProductID` for the row whose Price +10% or Price -10% button was clicked, we need to consult the GridView s `DataKeys` collection.</span></span> <span data-ttu-id="860b0-279">Tato kolekce obsahuje hodnoty pole určená v `DataKeyNames` vlastnost pro každý řádek GridView.</span><span class="sxs-lookup"><span data-stu-id="860b0-279">This collection holds the values of the fields specified in the `DataKeyNames` property for each GridView row.</span></span> <span data-ttu-id="860b0-280">Protože rutina GridView s `DataKeyNames` vlastnost byla nastavena na ProductID Visual Studio, při vytváření vazby ObjectDataSource k GridView, `DataKeys(rowIndex).Value` poskytuje `ProductID` pro zadaný *rowIndex*.</span><span class="sxs-lookup"><span data-stu-id="860b0-280">Since the GridView s `DataKeyNames` property was set to ProductID by Visual Studio when binding the ObjectDataSource to the GridView, `DataKeys(rowIndex).Value` provides the `ProductID` for the specified *rowIndex*.</span></span>

<span data-ttu-id="860b0-281">ButtonField automaticky předá *rowIndex* řádku, jehož tlačítko označeného prostřednictvím `e.CommandArgument` parametr.</span><span class="sxs-lookup"><span data-stu-id="860b0-281">The ButtonField automatically passes in the *rowIndex* of the row whose button was clicked through the `e.CommandArgument` parameter.</span></span> <span data-ttu-id="860b0-282">Proto k určení `ProductID` pro řádek jejichž cena + 10 % nebo % tlačítko cena -10 označeného, používáme: `Convert.ToInt32(SuppliersProducts.DataKeys(Convert.ToInt32(e.CommandArgument)).Value)`.</span><span class="sxs-lookup"><span data-stu-id="860b0-282">Therefore, to determine the `ProductID` for the row whose Price +10% or Price -10% button was clicked, we use: `Convert.ToInt32(SuppliersProducts.DataKeys(Convert.ToInt32(e.CommandArgument)).Value)`.</span></span>

<span data-ttu-id="860b0-283">Jako pomocí tlačítka ukončí všechny produkty, pokud je zakázána ke stavu zobrazení s GridView GridView je právě odrážejí do základní úložiště dat v každé zpětné volání a proto bude okamžitě aktualizovat tak, aby odrážely změny ceně, ke kterému dochází z kliknutím na buď tlačítek.</span><span class="sxs-lookup"><span data-stu-id="860b0-283">As with the Discontinue All Products button, if you have disabled the GridView s view state, the GridView is being rebound to the underlying data store on every postback, and therefore will immediately be updated to reflect a price change that occurs from clicking either of the buttons.</span></span> <span data-ttu-id="860b0-284">Pokud však nejsou zakázané stav zobrazení v prvku GridView, musíte ručně rebind data, která mají GridView po provedení této změny.</span><span class="sxs-lookup"><span data-stu-id="860b0-284">If, however, you have not disabled view state in the GridView, you will need to manually rebind the data to the GridView after making this change.</span></span> <span data-ttu-id="860b0-285">K tomu, jednoduše proveďte volání GridView s `DataBind()` metoda ihned po volání `UpdateProduct` metoda.</span><span class="sxs-lookup"><span data-stu-id="860b0-285">To accomplish this, simply make a call to the GridView s `DataBind()` method immediately after invoking the `UpdateProduct` method.</span></span>

<span data-ttu-id="860b0-286">Obrázek 20 zobrazuje stránku při prohlížení produkty poskytované Grandma Jan věci odvál čas.</span><span class="sxs-lookup"><span data-stu-id="860b0-286">Figure 20 shows the page when viewing the products provided by Grandma Kelly's Homestead.</span></span> <span data-ttu-id="860b0-287">Obrázek 21 zobrazuje výsledky po cena + 10 % bylo stisknuto tlačítko dvakrát pro Grandma's Boysenberry Spread a tlačítko cena -10 % jednou pro Northwoods Cranberry omáčka.</span><span class="sxs-lookup"><span data-stu-id="860b0-287">Figure 21 shows the results after the Price +10% button has been clicked twice for Grandma's Boysenberry Spread and the Price -10% button once for Northwoods Cranberry Sauce.</span></span>


<span data-ttu-id="860b0-288">[![GridView zahrnuje cena + 10 % a ceny -10 % tlačítka](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image51.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image50.png)</span><span class="sxs-lookup"><span data-stu-id="860b0-288">[![The GridView Includes Price +10% and Price -10% Buttons](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image51.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image50.png)</span></span>

<span data-ttu-id="860b0-289">**Obrázek 20**: cena zahrnuje GridView + 10 % a % tlačítka cena -10 ([Kliknutím zobrazit obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image52.png))</span><span class="sxs-lookup"><span data-stu-id="860b0-289">**Figure 20**: The GridView Includes Price +10% and Price -10% Buttons ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image52.png))</span></span>


<span data-ttu-id="860b0-290">[![Ceny pro produkt první a třetí byly aktualizovány prostřednictvím cena + 10 % a ceny -10 % tlačítka](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image54.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image53.png)</span><span class="sxs-lookup"><span data-stu-id="860b0-290">[![The Prices for the First and Third Product Have Been Updated via the Price +10% and Price -10% Buttons](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image54.png)](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image53.png)</span></span>

<span data-ttu-id="860b0-291">**Obrázek 21**: ceny pro první a třetí produktu byly aktualizovány prostřednictvím cena + 10 % a % tlačítka cena -10 ([Kliknutím zobrazit obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image55.png))</span><span class="sxs-lookup"><span data-stu-id="860b0-291">**Figure 21**: The Prices for the First and Third Product Have Been Updated via the Price +10% and Price -10% Buttons ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-vb/_static/image55.png))</span></span>


> [!NOTE]
> <span data-ttu-id="860b0-292">Rutina GridView (a DetailsView) může mít tlačítka, LinkButtons nebo ImageButtons přidat do jejich TemplateFields.</span><span class="sxs-lookup"><span data-stu-id="860b0-292">The GridView (and DetailsView) can also have Buttons, LinkButtons, or ImageButtons added to their TemplateFields.</span></span> <span data-ttu-id="860b0-293">Protože tato tlačítka, po kliknutí na s BoundField, způsobí zpětné volání, vyvolání GridView s `RowCommand` událostí.</span><span class="sxs-lookup"><span data-stu-id="860b0-293">As with the BoundField, these Buttons, when clicked, will induce a postback, raising the GridView s `RowCommand` event.</span></span> <span data-ttu-id="860b0-294">Při přidání tlačítka v TemplateField, ale tlačítko s `CommandArgument` není automaticky nastavený na index řádku, jako je při použití ButtonFields.</span><span class="sxs-lookup"><span data-stu-id="860b0-294">When adding buttons in a TemplateField, however, the Button s `CommandArgument` is not automatically set to the index of the row as it is when using ButtonFields.</span></span> <span data-ttu-id="860b0-295">Pokud je potřeba určit index řádku tlačítka, které bylo kliknuto v rámci `RowCommand` obslužné rutiny události, musíte ručně nastavit tlačítko s `CommandArgument` vlastnost v jeho deklarativní syntaxi v rámci TemplateField, pomocí kódu jako:</span><span class="sxs-lookup"><span data-stu-id="860b0-295">If you need to determine the row index of the button that was clicked within the `RowCommand` event handler, you'll need to manually set the Button s `CommandArgument` property in its declarative syntax within the TemplateField, using code like:</span></span>  
> <span data-ttu-id="860b0-296">`<asp:Button runat="server" ... CommandArgument='<%# CType(Container, GridViewRow).RowIndex %>' />`.</span><span class="sxs-lookup"><span data-stu-id="860b0-296">`<asp:Button runat="server" ... CommandArgument='<%# CType(Container, GridViewRow).RowIndex %>' />`.</span></span>


## <a name="summary"></a><span data-ttu-id="860b0-297">Souhrn</span><span class="sxs-lookup"><span data-stu-id="860b0-297">Summary</span></span>

<span data-ttu-id="860b0-298">Všechny prvky GridView, DetailsView a FormView může zahrnovat tlačítka, LinkButtons nebo ImageButtons.</span><span class="sxs-lookup"><span data-stu-id="860b0-298">The GridView, DetailsView, and FormView controls all can include Buttons, LinkButtons, or ImageButtons.</span></span> <span data-ttu-id="860b0-299">Tlačítka, po kliknutí na způsobit zpětné volání a zvýšit `ItemCommand` události v ovládacích prvcích FormView a DetailsView a `RowCommand` událost v GridView.</span><span class="sxs-lookup"><span data-stu-id="860b0-299">Such buttons, when clicked, cause a postback and raise the `ItemCommand` event in the FormView and DetailsView controls and the `RowCommand` event in the GridView.</span></span> <span data-ttu-id="860b0-300">Tyto ovládací prvky webového dat mít integrovanou funkci pro zpracování běžné akce související s příkaz, jako je odstranění nebo úprava záznamů.</span><span class="sxs-lookup"><span data-stu-id="860b0-300">These data Web controls have built-in functionality to handle common command-related actions, such as deleting or editing records.</span></span> <span data-ttu-id="860b0-301">Ale můžeme také pomocí tlačítka, která při kliknutí na, odpoví provádění vlastní vlastní kód.</span><span class="sxs-lookup"><span data-stu-id="860b0-301">However, we can also use buttons that, when clicked, respond with executing our own custom code.</span></span>

<span data-ttu-id="860b0-302">K tomu je potřeba vytvořit obslužnou rutinu události pro `ItemCommand` nebo `RowCommand` událostí.</span><span class="sxs-lookup"><span data-stu-id="860b0-302">To accomplish this, we need to create an event handler for the `ItemCommand` or `RowCommand` event.</span></span> <span data-ttu-id="860b0-303">V této obslužné rutiny události jsme příchozí nejprve zkontrolujte `CommandName` hodnotu k určení, které tlačítko bylo kliknuto a proveďte příslušnou vlastní akci.</span><span class="sxs-lookup"><span data-stu-id="860b0-303">In this event handler we first check the incoming `CommandName` value to determine which button was clicked and then take appropriate custom action.</span></span> <span data-ttu-id="860b0-304">V tomto kurzu jsme viděli postup používání tlačítka a ButtonFields odebrání ze všech produktů pro zadaný dodavatele nebo můžete zvýšit nebo snížit cenu konkrétní produkt 10 %.</span><span class="sxs-lookup"><span data-stu-id="860b0-304">In this tutorial we saw how to use buttons and ButtonFields to discontinue all products for a specified supplier or to increase or decrease the price of a particular product by 10%.</span></span>

<span data-ttu-id="860b0-305">Radostí programování!</span><span class="sxs-lookup"><span data-stu-id="860b0-305">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="860b0-306">O autorovi</span><span class="sxs-lookup"><span data-stu-id="860b0-306">About the Author</span></span>

<span data-ttu-id="860b0-307">[Scott Meisnerová](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor sedm ASP/ASP.NET knih a zakladatele z [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracuje s technologií Microsoft Web od 1998.</span><span class="sxs-lookup"><span data-stu-id="860b0-307">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="860b0-308">Scott funguje jako nezávislé poradce, trainer a zapisovače.</span><span class="sxs-lookup"><span data-stu-id="860b0-308">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="860b0-309">Jeho nejnovější seznam k [ *Edice nakladatelství Sams naučit sami technologii ASP.NET 2.0 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="860b0-309">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="860b0-310">Dosažitelný v [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) nebo prostřednictvím svého blogu, který najdete na [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="860b0-310">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

>[!div class="step-by-step"]
[<span data-ttu-id="860b0-311">Předchozí</span><span class="sxs-lookup"><span data-stu-id="860b0-311">Previous</span></span>](adding-and-responding-to-buttons-to-a-gridview-cs.md)
