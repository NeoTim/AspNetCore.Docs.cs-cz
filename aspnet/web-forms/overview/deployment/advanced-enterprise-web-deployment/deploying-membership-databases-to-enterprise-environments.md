---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments
title: "Nasazení databáze členství do podnikových prostředích | Microsoft Docs"
author: jrjlee
description: "Toto téma vysvětluje klíčové faktory a problémy, které budete potřebovat k překonání při zřizování databázích služby pro aplikace ASP.NET (Další běžné..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: 3cf765df-d311-4f68-a295-c9685ceea830
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments
msc.type: authoredcontent
ms.openlocfilehash: f4d898b6e09b5b9df44b62f9cb4b9d367f288efb
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 11/10/2017
---
<a name="deploying-membership-databases-to-enterprise-environments"></a><span data-ttu-id="dda0d-103">Nasazení databáze členství v podnikových prostředích</span><span class="sxs-lookup"><span data-stu-id="dda0d-103">Deploying Membership Databases to Enterprise Environments</span></span>
====================
<span data-ttu-id="dda0d-104">podle [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="dda0d-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="dda0d-105">Stáhnout PDF</span><span class="sxs-lookup"><span data-stu-id="dda0d-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="dda0d-106">Toto téma vysvětluje klíčové faktory a problémy, které že budete muset vyřešit při zřizování aplikace ASP.NET služeb databáze (více obvykle označuje jako databáze členství) v testu, pracovním nebo produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="dda0d-106">This topic explains the key considerations and challenges you'll need to overcome when you provision ASP.NET application services databases (more commonly referred to as membership databases) in test, staging, or production environments.</span></span> <span data-ttu-id="dda0d-107">Popisuje také přístupy, které můžete použít ke splnění tyto problémy.</span><span class="sxs-lookup"><span data-stu-id="dda0d-107">It also describes approaches you can use to meet these challenges.</span></span>


<span data-ttu-id="dda0d-108">Toto téma je součástí ze série kurzů na základě kolem podnikové požadavky nasazení fiktivní společnost s názvem Fabrikam, Inc. Tento kurz series používá ukázkové řešení & #x 2014; [řešení obraťte se na správce](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)& #x 2014; představující webovou aplikaci s úrovní realistické složitější, včetně aplikace ASP.NET MVC 3 systému Windows Komunikační služby Foundation (WCF) a projekt databáze.</span><span class="sxs-lookup"><span data-stu-id="dda0d-108">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="dda0d-109">Metoda nasazení jádrem tyto kurzy je založena na popsaný přístup souboru projektu rozdělení [vysvětlení souboru projektu](../web-deployment-in-the-enterprise/understanding-the-project-file.md), ve které je řízené procesu sestavení dva projektu soubory & #x 2014; jeden obsahující sestavení pokyny, které platí pro každé cílové prostředí a jeden, který obsahuje nastavení pro konkrétní prostředí sestavení a nasazení.</span><span class="sxs-lookup"><span data-stu-id="dda0d-109">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="dda0d-110">V okamžiku sestavení souboru projektu konkrétní prostředí sloučeny do souboru projektu bez ohledu na prostředí a vytvořit úplnou sadu pokynů sestavení.</span><span class="sxs-lookup"><span data-stu-id="dda0d-110">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="what-are-the-issues-when-you-deploy-a-membership-database"></a><span data-ttu-id="dda0d-111">Jaké jsou problémy při nasazení databáze členství?</span><span class="sxs-lookup"><span data-stu-id="dda0d-111">What Are the Issues When You Deploy a Membership Database?</span></span>

<span data-ttu-id="dda0d-112">Ve většině případů při navrhnout strategie nasazení pro databázi, je první věcí, kterou je potřeba zvážit jaká data, kterou chcete nasadit.</span><span class="sxs-lookup"><span data-stu-id="dda0d-112">In most cases, when you devise a deployment strategy for a database, the first thing you need to consider is what data you want to deploy.</span></span> <span data-ttu-id="dda0d-113">Ve vývojovém nebo testovacím prostředí můžete chtít nasadit data účtu uživatele k usnadnění rychlé a jednoduché testování.</span><span class="sxs-lookup"><span data-stu-id="dda0d-113">In a development or test environment, you might want to deploy user account data to facilitate quick and easy testing.</span></span> <span data-ttu-id="dda0d-114">V pracovním nebo produkčním prostředí je velmi nepravděpodobné, že chcete nasadit data účtu uživatele.</span><span class="sxs-lookup"><span data-stu-id="dda0d-114">In a staging or production environment, it's very unlikely that you'd want to deploy user account data.</span></span>

<span data-ttu-id="dda0d-115">Bohužel databáze členství technologie ASP.NET znamenat určité výzvy, na které lépe rozhodnout mnohem složitější:</span><span class="sxs-lookup"><span data-stu-id="dda0d-115">Unfortunately, ASP.NET membership databases introduce some specific challenges that make this decision a lot more complex:</span></span>

- <span data-ttu-id="dda0d-116">Pouze pro schéma nasazení ponechá databázi členství v nefunkční stavu.</span><span class="sxs-lookup"><span data-stu-id="dda0d-116">A schema-only deployment will leave the membership database in a non-operational state.</span></span> <span data-ttu-id="dda0d-117">Důvodem je, že databáze členství zahrnuje některé konfigurační data (v **aspnet\_SchemaVersions** tabulky), databáze vyžaduje, aby mohl fungovat.</span><span class="sxs-lookup"><span data-stu-id="dda0d-117">This is because the membership database includes some configuration data (in the **aspnet\_SchemaVersions** table) that the database requires in order to function.</span></span> <span data-ttu-id="dda0d-118">Jako takový Pokud provádíte nasazení pouze pro schéma databáze členství chcete-li vyloučit data účtu uživatele, musíte spustit skript po nasazení základní konfigurační data přidat do.</span><span class="sxs-lookup"><span data-stu-id="dda0d-118">As such, if you perform a schema-only deployment of your membership database in order to exclude user account data, you'll need to run a post-deployment script to add the essential configuration data.</span></span>
- <span data-ttu-id="dda0d-119">V závislosti na konfiguraci databáze členství může zprostředkovatel členství pomocí klíče počítače k šifrování hesla a uložit je do databáze.</span><span class="sxs-lookup"><span data-stu-id="dda0d-119">Depending on how your membership database is configured, the membership provider may use the machine key to encrypt passwords and store them in the database.</span></span> <span data-ttu-id="dda0d-120">Účet data uživatelů, které můžete nasadit s databází v takovém případě bude nepoužitelný na cílovém serveru.</span><span class="sxs-lookup"><span data-stu-id="dda0d-120">In this case, any user account data you deploy with the database will become unusable on the destination server.</span></span> <span data-ttu-id="dda0d-121">Z tohoto důvodu nasazení data účtu uživatele není podporováno.</span><span class="sxs-lookup"><span data-stu-id="dda0d-121">For this reason, deploying user account data is not a supported scenario.</span></span>

## <a name="choosing-a-membership-database-strategy"></a><span data-ttu-id="dda0d-122">Výběr strategie databáze členství</span><span class="sxs-lookup"><span data-stu-id="dda0d-122">Choosing a Membership Database Strategy</span></span>

<span data-ttu-id="dda0d-123">Když zvolíte jak zřídit databáze členství v podnikovém prostředí serveru, použijte tyto pokyny:</span><span class="sxs-lookup"><span data-stu-id="dda0d-123">Use these guidelines when you choose how to provision a membership database in an enterprise server environment:</span></span>

- <span data-ttu-id="dda0d-124">Pokud je to možné, nenasazujte databáze členství.</span><span class="sxs-lookup"><span data-stu-id="dda0d-124">Wherever possible, do not deploy membership databases.</span></span> <span data-ttu-id="dda0d-125">Místo toho vytvořte databázi členství ručně na cílovém serveru databáze.</span><span class="sxs-lookup"><span data-stu-id="dda0d-125">Instead, create the membership database manually on the target database server.</span></span> <span data-ttu-id="dda0d-126">Pokud jste schéma databáze členství nepřizpůsobili, můžete jednoduše vytvořit novou na místě v cílovém pomocí [ASP.NET nástroj pro registraci serveru SQL Server (aspnet\_regsql.exe)](https://msdn.microsoft.com/en-us/library/ms229862(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="dda0d-126">If you haven't customized your membership database schema, you can simply create a new one in situ at the destination using the [ASP.NET SQL Server Registration Tool (aspnet\_regsql.exe)](https://msdn.microsoft.com/en-us/library/ms229862(v=vs.100).aspx).</span></span>
- <span data-ttu-id="dda0d-127">Pokud nemáte žádnou možnost, ale chcete nasadit databázi členství & #x 2014; například pokud jste provedli rozsáhlé změny schématu databáze & #x 2014; měli byste provést nasazení pouze pro schéma databáze členství, vyloučit data účtu uživatele, a Spusťte skript po nasazení pro všechny požadované konfigurační data přidat.</span><span class="sxs-lookup"><span data-stu-id="dda0d-127">If you have no option but to deploy a membership database&#x2014;for example, if you've made extensive modifications to the database schema&#x2014;you should perform a schema-only deployment of the membership database, to exclude user account data, and then run a post-deployment script to add any required configuration data.</span></span> <span data-ttu-id="dda0d-128">Obecné pokyny najdete v těchto přístupů [postupy: nasazení ASP.NET členství databáze bez včetně uživatelských účtů](https://msdn.microsoft.com/en-us/library/ff361972(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="dda0d-128">You can find broad guidance on these approaches in [How to: Deploy the ASP.NET Membership Database Without Including User Accounts](https://msdn.microsoft.com/en-us/library/ff361972(v=vs.100).aspx).</span></span>

<span data-ttu-id="dda0d-129">Je důležité nezapomenout, že *schéma databáze členství je pravděpodobně poměrně statické*.</span><span class="sxs-lookup"><span data-stu-id="dda0d-129">It's important to remember that *the schema of your membership database is likely to be fairly static*.</span></span> <span data-ttu-id="dda0d-130">I v případě, že jste přizpůsobili databázi členství, nepravděpodobné, že budete muset aktualizovat schéma v pravidelných intervalech & #x 2014; není chystáte změnit často jako kód na webové aplikace nebo projekt databáze.</span><span class="sxs-lookup"><span data-stu-id="dda0d-130">Even if you've customized the membership database, it's unlikely that you'll need to update the schema on a regular basis&#x2014;it's not going to change with the same frequency as the code in a web application or a database project.</span></span> <span data-ttu-id="dda0d-131">Jako takový neměli byste potřebovat zahrnout do všech procesů nasazení automatizované nebo krokování databáze členství.</span><span class="sxs-lookup"><span data-stu-id="dda0d-131">As such, you shouldn't need to include the membership database in any automated or single-step deployment processes.</span></span>

## <a name="using-vsdbcmd-to-update-a-membership-database-schema"></a><span data-ttu-id="dda0d-132">Pomocí VSDBCMD a aktualizovat schéma databáze členství</span><span class="sxs-lookup"><span data-stu-id="dda0d-132">Using VSDBCMD to Update a Membership Database Schema</span></span>

<span data-ttu-id="dda0d-133">Pokud změníte strukturu databáze členství po prvním nasazení, nemusíte chtít použít nástroj nasazení webu Internetové informační služby (IIS) (Web Deploy) k opětovnému nasazení databáze.</span><span class="sxs-lookup"><span data-stu-id="dda0d-133">If you modify the structure of your membership database after your first deployment, you may not want to use the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to redeploy the database.</span></span> <span data-ttu-id="dda0d-134">Funkce nasazení databáze v nasazení webu nezahrnuje schopnost zajistit rozdílové aktualizace na cílové databázi & #x 2014; místo toho musíte nasazení webu vyřadit a znovu vytvořit databázi.</span><span class="sxs-lookup"><span data-stu-id="dda0d-134">The database deployment functionality in Web Deploy doesn't include the capability to make differential updates to a destination database&#x2014;instead, Web Deploy must drop and re-create the database.</span></span> <span data-ttu-id="dda0d-135">To znamená, že přijdete o stávající data účtu uživatele, který je obvykle žádoucí, v pracovním nebo produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="dda0d-135">This means that you lose any existing user account data, which is typically undesirable in staging or production environments.</span></span>

<span data-ttu-id="dda0d-136">Alternativou je použití nástroje VSDBCMD aktualizovat schéma cílové databáze.</span><span class="sxs-lookup"><span data-stu-id="dda0d-136">The alternative is to use the VSDBCMD utility to update the schema of your destination database.</span></span> <span data-ttu-id="dda0d-137">VSDBCMD obsahuje dvě důležité funkce.</span><span class="sxs-lookup"><span data-stu-id="dda0d-137">VSDBCMD includes two important capabilities.</span></span> <span data-ttu-id="dda0d-138">Nejprve ji můžete importovat do souboru .dbschema schéma existující databázi.</span><span class="sxs-lookup"><span data-stu-id="dda0d-138">First, it can import the schema of an existing database into a .dbschema file.</span></span> <span data-ttu-id="dda0d-139">Druhý ho můžete nasadit .dbschema souboru k existující databázi jako rozdílové aktualizace, což znamená, že se provádí pouze změny nezbytné k přivedení aktuální cílovou databázi a Neztraťte žádná data.</span><span class="sxs-lookup"><span data-stu-id="dda0d-139">Second, it can deploy a .dbschema file to an existing database as a differential update, which means that it only makes the changes required to bring the target database up to date and you don't lose any data.</span></span>

<span data-ttu-id="dda0d-140">Chcete-li aktualizovat schéma databáze členství můžete těchto kroků:</span><span class="sxs-lookup"><span data-stu-id="dda0d-140">You can use these high-level steps to update a membership database schema:</span></span>

1. <span data-ttu-id="dda0d-141">Použít VSDBCMD **Import** akce generovat soubor .dbschema pro vaše zdrojové databáze členství.</span><span class="sxs-lookup"><span data-stu-id="dda0d-141">Use the VSDBCMD **Import** action to generate a .dbschema file for your source membership database.</span></span> <span data-ttu-id="dda0d-142">Tento postup je popsaný v [postupy: Import schématu z příkazového řádku](https://msdn.microsoft.com/en-us/library/dd172135.aspx).</span><span class="sxs-lookup"><span data-stu-id="dda0d-142">This procedure is described in [How to: Import a Schema from a Command Prompt](https://msdn.microsoft.com/en-us/library/dd172135.aspx).</span></span>
2. <span data-ttu-id="dda0d-143">Použít VSDBCMD **nasadit** akce k nasazení souboru .dbschema na vaše cílové databáze členství.</span><span class="sxs-lookup"><span data-stu-id="dda0d-143">Use the VSDBCMD **Deploy** action to deploy the .dbschema file to your destination membership database.</span></span> <span data-ttu-id="dda0d-144">Tento postup je popsaný v [Reference k příkazovému řádku pro VSDBCMD. EXE (nasazení a Import schématu)](https://msdn.microsoft.com/en-us/library/dd193283.aspx).</span><span class="sxs-lookup"><span data-stu-id="dda0d-144">This procedure is described in [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/en-us/library/dd193283.aspx).</span></span>

## <a name="conclusion"></a><span data-ttu-id="dda0d-145">Závěr</span><span class="sxs-lookup"><span data-stu-id="dda0d-145">Conclusion</span></span>

<span data-ttu-id="dda0d-146">Toto téma popisuje některé z problémů, které může být vystaven když potřebujete zřídit databáze členství technologie ASP.NET v různých prostředích cíl.</span><span class="sxs-lookup"><span data-stu-id="dda0d-146">This topic described some of the challenges you may face when you need to provision ASP.NET membership databases in various target environments.</span></span> <span data-ttu-id="dda0d-147">Konkrétně vysvětlit, proč pouze pro schéma nasazení ponechá databázi členství v nefunkční stavu a proč není podporováno nasazení data účtu uživatele.</span><span class="sxs-lookup"><span data-stu-id="dda0d-147">In particular, it explained why schema-only deployments will leave the membership database in a non-operational state and why deploying user account data is not supported.</span></span> <span data-ttu-id="dda0d-148">Téma také zobrazí pokyny o tom, jak zřídit, nasazení a aktualizaci databáze členství v různých scénářích.</span><span class="sxs-lookup"><span data-stu-id="dda0d-148">The topic also presented guidance on how to provision, deploy, and update membership databases in different scenarios.</span></span>

## <a name="further-reading"></a><span data-ttu-id="dda0d-149">Další čtení</span><span class="sxs-lookup"><span data-stu-id="dda0d-149">Further Reading</span></span>

<span data-ttu-id="dda0d-150">Další pokyny a příklady použití VSDBCMD najdete v tématu [Reference k příkazovému řádku pro VSDBCMD. EXE (nasazení a Import schématu)](https://msdn.microsoft.com/en-us/library/dd193283.aspx) a [postupy: Import schématu z příkazového řádku](https://msdn.microsoft.com/en-us/library/dd172135.aspx).</span><span class="sxs-lookup"><span data-stu-id="dda0d-150">For more guidance and examples of how to use VSDBCMD, see [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/en-us/library/dd193283.aspx) and [How to: Import a Schema from a Command Prompt](https://msdn.microsoft.com/en-us/library/dd172135.aspx).</span></span> <span data-ttu-id="dda0d-151">Další informace o používání aspnet\_regsql.exe k vytváření databází členství, najdete v části [ASP.NET nástroj pro registraci serveru SQL Server (aspnet\_regsql.exe)](https://msdn.microsoft.com/en-us/library/ms229862(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="dda0d-151">For more information on using aspnet\_regsql.exe to create membership databases, see [ASP.NET SQL Server Registration Tool (aspnet\_regsql.exe)](https://msdn.microsoft.com/en-us/library/ms229862(v=vs.100).aspx).</span></span> <span data-ttu-id="dda0d-152">Další obecné pokyny pro nasazení databáze členství, najdete v části [postupy: nasazení ASP.NET členství databáze bez včetně uživatelských účtů](https://msdn.microsoft.com/en-us/library/ff361972(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="dda0d-152">For more general guidance on deploying membership databases, see [How to: Deploy the ASP.NET Membership Database Without Including User Accounts](https://msdn.microsoft.com/en-us/library/ff361972(v=vs.100).aspx).</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="dda0d-153">[Předchozí](deploying-database-role-memberships-to-test-environments.md)
[další](excluding-files-and-folders-from-deployment.md)</span><span class="sxs-lookup"><span data-stu-id="dda0d-153">[Previous](deploying-database-role-memberships-to-test-environments.md)
[Next](excluding-files-and-folders-from-deployment.md)</span></span>
