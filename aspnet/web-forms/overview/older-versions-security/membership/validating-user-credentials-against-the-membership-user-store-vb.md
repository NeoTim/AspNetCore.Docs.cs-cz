---
uid: web-forms/overview/older-versions-security/membership/validating-user-credentials-against-the-membership-user-store-vb
title: "Probíhá ověřování pověření uživatele proti úložišti uživatele členství (VB) | Microsoft Docs"
author: rick-anderson
description: "V tomto kurzu vyzkoušíme postup ověření přihlašovacích údajů uživatele proti úložišti uživatele členství pomocí programový znamená a ovládací prvek pro přihlášení..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 01/18/2008
ms.topic: article
ms.assetid: 17772912-b47b-4557-9ce9-80f22df642f7
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-security/membership/validating-user-credentials-against-the-membership-user-store-vb
msc.type: authoredcontent
ms.openlocfilehash: f57bc8c32757c1ea25bf6bbb34539570e4c09aad
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 01/24/2018
---
<a name="validating-user-credentials-against-the-membership-user-store-vb"></a><span data-ttu-id="d09ff-103">Probíhá ověřování pověření uživatele proti úložišti uživatele členství (VB)</span><span class="sxs-lookup"><span data-stu-id="d09ff-103">Validating User Credentials Against the Membership User Store (VB)</span></span>
====================
<span data-ttu-id="d09ff-104">podle [Scott Meisnerová](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="d09ff-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="d09ff-105">[Stáhněte si kód](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_06_VB.zip) nebo [stáhnout PDF](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial06_LoggingIn_vb.pdf)</span><span class="sxs-lookup"><span data-stu-id="d09ff-105">[Download Code](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_06_VB.zip) or [Download PDF](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial06_LoggingIn_vb.pdf)</span></span>

> <span data-ttu-id="d09ff-106">V tomto kurzu vyzkoušíme postup ověření přihlašovacích údajů uživatele proti úložišti uživatele členství pomocí programový znamená a ovládací prvek pro přihlášení.</span><span class="sxs-lookup"><span data-stu-id="d09ff-106">In this tutorial we will examine how to validate a user's credentials against the Membership user store using both programmatic means and the Login control.</span></span> <span data-ttu-id="d09ff-107">Podíváme se také na tom, jak přizpůsobit vzhled a chování ovládacího prvku přihlášení.</span><span class="sxs-lookup"><span data-stu-id="d09ff-107">We will also look at how to customize the login control's appearance and behavior.</span></span>


## <a name="introduction"></a><span data-ttu-id="d09ff-108">Úvod</span><span class="sxs-lookup"><span data-stu-id="d09ff-108">Introduction</span></span>

<span data-ttu-id="d09ff-109">V <a id="Tutorial05"> </a> [předchozí kurzu](creating-user-accounts-vb.md) jsme se podívali na tom, jak vytvořit nový uživatelský účet v rámci členství.</span><span class="sxs-lookup"><span data-stu-id="d09ff-109">In the <a id="Tutorial05"></a>[preceding tutorial](creating-user-accounts-vb.md) we looked at how to create a new user account in the Membership framework.</span></span> <span data-ttu-id="d09ff-110">Jsme nejprve hledá v prostřednictvím kódu programu vytváření uživatelských účtů pomocí `Membership` třídy `CreateUser` metoda a potom zkontrolován pomocí ovládacího prvku webového CreateUserWizard.</span><span class="sxs-lookup"><span data-stu-id="d09ff-110">We first looked at programmatically creating user accounts via the `Membership` class's `CreateUser` method, and then examined using the CreateUserWizard Web control.</span></span> <span data-ttu-id="d09ff-111">Na přihlašovací stránku však ověří aktuálně zadané přihlašovací údaje s pevně zakódovaným seznamu párů uživatelské jméno a heslo.</span><span class="sxs-lookup"><span data-stu-id="d09ff-111">However, the login page currently validates the supplied credentials against a hard-coded list of username and password pairs.</span></span> <span data-ttu-id="d09ff-112">Je potřeba aktualizovat logiku přihlašovací stránku tak, aby se ověřuje pověření proti úložiště framework členství uživatele.</span><span class="sxs-lookup"><span data-stu-id="d09ff-112">We need to update the login page's logic so that it validates credentials against the Membership framework's user store.</span></span>

<span data-ttu-id="d09ff-113">Mnohem jako s vytváření uživatelských účtů, můžete ověřit pověření prostřednictvím kódu programu nebo deklarativně.</span><span class="sxs-lookup"><span data-stu-id="d09ff-113">Much like with creating user accounts, credentials can be validated programmatically or declaratively.</span></span> <span data-ttu-id="d09ff-114">Rozhraní API členství zahrnuje metodu pro ověřování prostřednictvím kódu programu přihlašovacích údajů uživatele proti úložiště uživatele.</span><span class="sxs-lookup"><span data-stu-id="d09ff-114">The Membership API includes a method for programmatically validating a user's credentials against the user store.</span></span> <span data-ttu-id="d09ff-115">A ASP.NET se dodává s ovládacím prvkem webové přihlášení, která vykreslí uživatelské rozhraní s textová pole pro uživatelské jméno a heslo a tlačítko přihlásit.</span><span class="sxs-lookup"><span data-stu-id="d09ff-115">And ASP.NET ships with the Login Web control, which renders a user interface with textboxes for the username and password and a button to log in.</span></span>

<span data-ttu-id="d09ff-116">V tomto kurzu vyzkoušíme postup ověření přihlašovacích údajů uživatele proti úložišti uživatele členství pomocí programový znamená a ovládací prvek pro přihlášení.</span><span class="sxs-lookup"><span data-stu-id="d09ff-116">In this tutorial we will examine how to validate a user's credentials against the Membership user store using both programmatic means and the Login control.</span></span> <span data-ttu-id="d09ff-117">Podíváme se také na tom, jak přizpůsobit vzhled a chování ovládacího prvku přihlášení.</span><span class="sxs-lookup"><span data-stu-id="d09ff-117">We will also look at how to customize the login control's appearance and behavior.</span></span> <span data-ttu-id="d09ff-118">Můžeme začít!</span><span class="sxs-lookup"><span data-stu-id="d09ff-118">Let's get started!</span></span>

## <a name="step-1-validating-credentials-against-the-membership-user-store"></a><span data-ttu-id="d09ff-119">Krok 1: Probíhá ověřování pověření pro úložiště členství uživatele</span><span class="sxs-lookup"><span data-stu-id="d09ff-119">Step 1: Validating Credentials Against the Membership User Store</span></span>

<span data-ttu-id="d09ff-120">Pro webové servery, které používají ověřování pomocí formulářů přihlášení uživatele na web návštěvou přihlašovací stránku a zadat své přihlašovací údaje.</span><span class="sxs-lookup"><span data-stu-id="d09ff-120">For web sites that use forms authentication, a user logs on to the website by visiting a login page and entering their credentials.</span></span> <span data-ttu-id="d09ff-121">Tyto přihlašovací údaje se pak porovnávají úložiště uživatele.</span><span class="sxs-lookup"><span data-stu-id="d09ff-121">These credentials are then compared against the user store.</span></span> <span data-ttu-id="d09ff-122">Pokud jsou platné, uživateli je udělen lístek ověřování formulářů, což je token zabezpečení, který označuje identity a jejich pravost návštěvníka.</span><span class="sxs-lookup"><span data-stu-id="d09ff-122">If they are valid, then the user is granted a forms authentication ticket, which is a security token that indicates the identity and authenticity of the visitor.</span></span>

<span data-ttu-id="d09ff-123">K ověření uživatele vůči rozhraní členství, použijte `Membership` třídy [ `ValidateUser` metoda](https://msdn.microsoft.com/library/system.web.security.membership.validateuser.aspx).</span><span class="sxs-lookup"><span data-stu-id="d09ff-123">To validate a user against the Membership framework, use the `Membership` class's [`ValidateUser` method](https://msdn.microsoft.com/library/system.web.security.membership.validateuser.aspx).</span></span> <span data-ttu-id="d09ff-124">`ValidateUser` Metoda přebírá dva vstupní parametry - `username` a `password` - a vrátí logickou hodnotu udávající, zda byly přihlašovací údaje platná.</span><span class="sxs-lookup"><span data-stu-id="d09ff-124">The `ValidateUser` method takes in two input parameters - `username` and `password` - and returns a Boolean value indicating whether the credentials were valid.</span></span> <span data-ttu-id="d09ff-125">Upozorňujeme `CreateUser` metoda jsme se zaměřili na v tomto kurzu předchozí `ValidateUser` metoda deleguje samotné ověření do nakonfigurovaného zprostředkovatele členství.</span><span class="sxs-lookup"><span data-stu-id="d09ff-125">Like with the `CreateUser` method we examined in the previous tutorial, the `ValidateUser` method delegates the actual validation to the configured Membership provider.</span></span>

<span data-ttu-id="d09ff-126">`SqlMembershipProvider` Ověřuje zadaná pověření tak, že získání hesla zadaného uživatele prostřednictvím `aspnet_Membership_GetPasswordWithFormat` uložené procedury.</span><span class="sxs-lookup"><span data-stu-id="d09ff-126">The `SqlMembershipProvider` validates the supplied credentials by obtaining the specified user's password via the `aspnet_Membership_GetPasswordWithFormat` stored procedure.</span></span> <span data-ttu-id="d09ff-127">Odvolat, který `SqlMembershipProvider` ukládá hesla uživatelů ke službám pomocí jedné ze tří formátů: clear, šifrovaná, nebo s použitím algoritmu hash.</span><span class="sxs-lookup"><span data-stu-id="d09ff-127">Recall that the `SqlMembershipProvider` stores users' passwords using one of three formats: clear, encrypted, or hashed.</span></span> <span data-ttu-id="d09ff-128">`aspnet_Membership_GetPasswordWithFormat` Uložené procedury vrátí heslo v jeho nezpracovaném formátu.</span><span class="sxs-lookup"><span data-stu-id="d09ff-128">The `aspnet_Membership_GetPasswordWithFormat` stored procedure returns the password in its raw format.</span></span> <span data-ttu-id="d09ff-129">Pro šifrovaná, nebo hodnotu hash hesla `SqlMembershipProvider` transformuje `password` hodnoty předané `ValidateUser` metoda do ekvivalentu šifrovat nebo stavu s použitím algoritmu hash a porovná je s co byla vrácena z databáze.</span><span class="sxs-lookup"><span data-stu-id="d09ff-129">For encrypted or hashed passwords, the `SqlMembershipProvider` transforms the `password` value passed into the `ValidateUser` method into its equivalent encrypted or hashed state and then compares it with what was returned from the database.</span></span> <span data-ttu-id="d09ff-130">Pokud heslo, které jsou uloženy v databázi odpovídá formátovaný heslo zadané uživatelem, jsou pověření platná.</span><span class="sxs-lookup"><span data-stu-id="d09ff-130">If the password stored in the database matches the formatted password entered by the user, the credentials are valid.</span></span>

<span data-ttu-id="d09ff-131">Umožňuje aktualizovat naše přihlašovací stránku (~ /`Login.aspx`) tak, aby ověřuje zadaná pověření proti úložiště framework uživatele členství.</span><span class="sxs-lookup"><span data-stu-id="d09ff-131">Let's update our login page (~/`Login.aspx`) so that it validates the supplied credentials against the Membership framework user store.</span></span> <span data-ttu-id="d09ff-132">Jsme vytvořili této přihlašovací stránce zpět v <a id="Tutorial02"> </a> [ *Přehled ověřování založené na formulářích* ](../introduction/an-overview-of-forms-authentication-vb.md) kurzu, vytváření rozhraní se dvě textová pole pro uživatelské jméno a heslo, Zapamatovat uživatele zaškrtávací políčko a tlačítko pro přihlášení (viz obrázek 1).</span><span class="sxs-lookup"><span data-stu-id="d09ff-132">We created this login page back in the <a id="Tutorial02"></a>[*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-vb.md) tutorial, creating an interface with two TextBoxes for the username and password, a Remember Me checkbox, and a Login button (see Figure 1).</span></span> <span data-ttu-id="d09ff-133">Kód ověřuje zadaná pověření proti pevně seznamu párů uživatelské jméno a heslo (Scott a hesla, Jisun a hesla a Sam a hesla).</span><span class="sxs-lookup"><span data-stu-id="d09ff-133">The code validates the entered credentials against a hard-coded list of username and password pairs (Scott/password, Jisun/password, and Sam/password).</span></span> <span data-ttu-id="d09ff-134">V <a id="Tutorial03"> </a> [ *konfiguraci ověřování formulářů a rozšířené témata* ](../introduction/forms-authentication-configuration-and-advanced-topics-vb.md) kurzu aktualizovali jsme přihlašovací stránky kód pro uložení dalších informací ve formulářích lístek ověřování `UserData` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="d09ff-134">In the <a id="Tutorial03"></a>[*Forms Authentication Configuration and Advanced Topics*](../introduction/forms-authentication-configuration-and-advanced-topics-vb.md) tutorial we updated the login page's code to store additional information in the forms authentication ticket's `UserData` property.</span></span>


<span data-ttu-id="d09ff-135">[![Rozhraní přihlašovací stránku obsahuje dvě textová pole, třídy CheckBoxList a tlačítko](validating-user-credentials-against-the-membership-user-store-vb/_static/image2.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="d09ff-135">[![The Login Page's Interface Includes Two TextBoxes, a CheckBoxList, and a Button](validating-user-credentials-against-the-membership-user-store-vb/_static/image2.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image1.png)</span></span>

<span data-ttu-id="d09ff-136">**Obrázek 1**: přihlašovací stránky rozhraní zahrnuje dvě textová pole, třídy CheckBoxList a tlačítko ([Kliknutím zobrazit obrázek v plné velikosti](validating-user-credentials-against-the-membership-user-store-vb/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="d09ff-136">**Figure 1**: The Login Page's Interface Includes Two TextBoxes, a CheckBoxList, and a Button  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image3.png))</span></span>


<span data-ttu-id="d09ff-137">Uživatelské rozhraní přihlašovací stránky může zůstat beze změny, ale je potřeba nahradit přihlašovací tlačítko `Click` obslužné rutiny události s kódem, který ověřuje uživatele před úložiště framework uživatele členství.</span><span class="sxs-lookup"><span data-stu-id="d09ff-137">The login page's user interface can remain unchanged, but we need to replace the Login button's `Click` event handler with code that validates the user against the Membership framework user store.</span></span> <span data-ttu-id="d09ff-138">Aktualizujte obslužné rutiny události tak, aby jeho kód vypadat takto:</span><span class="sxs-lookup"><span data-stu-id="d09ff-138">Update the event handler so that its code appears as follows:</span></span>

[!code-vb[Main](validating-user-credentials-against-the-membership-user-store-vb/samples/sample1.vb)]

<span data-ttu-id="d09ff-139">Tento kód je pozoruhodně jednoduché.</span><span class="sxs-lookup"><span data-stu-id="d09ff-139">This code is remarkably simple.</span></span> <span data-ttu-id="d09ff-140">Začneme voláním `Membership.ValidateUser` metody předávání v zadané uživatelské jméno a heslo.</span><span class="sxs-lookup"><span data-stu-id="d09ff-140">We start by calling the `Membership.ValidateUser` method, passing in the supplied username and password.</span></span> <span data-ttu-id="d09ff-141">Pokud tato metoda vrátí hodnotu True, pak uživatel je přihlášen k webu prostřednictvím `FormsAuthentication` metodu RedirectFromLoginPage třídy.</span><span class="sxs-lookup"><span data-stu-id="d09ff-141">If that method returns True, then the user is signed into the site via the `FormsAuthentication` class's RedirectFromLoginPage method.</span></span> <span data-ttu-id="d09ff-142">(Jak již bylo zmíněno <a id="Tutorial02"> </a> [ *Přehled ověřování založené na formulářích* ](../introduction/an-overview-of-forms-authentication-vb.md) kurzu `FormsAuthentication.RedirectFromLoginPage` vytvoří lístek pro ověřování formuláře a pak přesměruje uživatele na příslušnou stránku.) Pokud přihlašovací údaje jsou neplatné, ale `InvalidCredentialsMessage` zobrazí popisek informující uživatele, jejich uživatelské jméno nebo heslo je nesprávné.</span><span class="sxs-lookup"><span data-stu-id="d09ff-142">(As we discussed in the <a id="Tutorial02"></a>[*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-vb.md) tutorial, the `FormsAuthentication.RedirectFromLoginPage` creates the forms authentication ticket and then redirects the user to the appropriate page.) If the credentials are invalid, however, the `InvalidCredentialsMessage` Label is displayed, informing the user that their username or password was incorrect.</span></span>

<span data-ttu-id="d09ff-143">To je všechno je k němu!</span><span class="sxs-lookup"><span data-stu-id="d09ff-143">That's all there is to it!</span></span>

<span data-ttu-id="d09ff-144">Pokud chcete otestovat, že přihlašovací stránky funguje podle očekávání, pokuste se přihlásit s jedním z uživatelské účty, které jste vytvořili v předchozím kurzu.</span><span class="sxs-lookup"><span data-stu-id="d09ff-144">To test that the login page works as expected, attempt to login with one of the user accounts you created in the preceding tutorial.</span></span> <span data-ttu-id="d09ff-145">Případně, pokud jste ještě nevytvořili účet, pokračujte a vytvořit z `~/Membership/CreatingUserAccounts.aspx` stránky.</span><span class="sxs-lookup"><span data-stu-id="d09ff-145">Or, if you have not yet created an account, go ahead and create one from the `~/Membership/CreatingUserAccounts.aspx` page.</span></span>

> [!NOTE]
> <span data-ttu-id="d09ff-146">Když uživatel zadá své přihlašovací údaje a přihlašovací stránky formulář odešle, přihlašovací údaje, včetně jeho heslo přenášejí přes Internet k webovému serveru v *prostý text*.</span><span class="sxs-lookup"><span data-stu-id="d09ff-146">When the user enters her credentials and submits the login page form, the credentials, including her password, are transmitted over the Internet to the web server in *plain text*.</span></span> <span data-ttu-id="d09ff-147">To znamená, že všechny poskytuje sledování toku dat síťový provoz můžete zobrazit uživatelské jméno a heslo.</span><span class="sxs-lookup"><span data-stu-id="d09ff-147">That means any hacker sniffing the network traffic can see the username and password.</span></span> <span data-ttu-id="d09ff-148">Chcete-li tomu zabránit, je nezbytné k šifrování síťového provozu pomocí [vrstvy SSL (Secure Socket)](http://en.wikipedia.org/wiki/Secure_Sockets_Layer).</span><span class="sxs-lookup"><span data-stu-id="d09ff-148">To prevent this, it is essential to encrypt the network traffic by using [Secure Socket Layers (SSL)](http://en.wikipedia.org/wiki/Secure_Sockets_Layer).</span></span> <span data-ttu-id="d09ff-149">Tím bude zajištěno, že přihlašovací údaje (stejně jako značka jazyka HTML celou stránku) jsou šifrována od okamžiku, kdy opustí prohlížeče, dokud nedorazí k příjemci webový server.</span><span class="sxs-lookup"><span data-stu-id="d09ff-149">This will ensure that the credentials (as well as the entire page's HTML markup) are encrypted from the moment they leave the browser until they are received by the web server.</span></span>


### <a name="how-the-membership-framework-handles-invalid-login-attempts"></a><span data-ttu-id="d09ff-150">Jak Framework členství zpracovává neplatných pokusů o přihlášení</span><span class="sxs-lookup"><span data-stu-id="d09ff-150">How the Membership Framework Handles Invalid Login Attempts</span></span>

<span data-ttu-id="d09ff-151">Návštěvník dosáhne přihlašovací stránku a odešle přihlašovacích údajů, jejich prohlížeč odešle požadavek HTTP na přihlašovací stránku.</span><span class="sxs-lookup"><span data-stu-id="d09ff-151">When a visitor reaches the login page and submits their credentials, their browser makes an HTTP request to the login page.</span></span> <span data-ttu-id="d09ff-152">Pokud jsou pověření platná, odpověď HTTP, která zahrnuje lístek ověřování v souboru cookie.</span><span class="sxs-lookup"><span data-stu-id="d09ff-152">If the credentials are valid, the HTTP response includes the authentication ticket in a cookie.</span></span> <span data-ttu-id="d09ff-153">Proto se hacker pokusu rozdělit na váš web vytvořit program, který podrobně odešle požadavky HTTP na přihlašovací stránku s platné uživatelské jméno a odhad na heslo.</span><span class="sxs-lookup"><span data-stu-id="d09ff-153">Therefore, a hacker attempting to break into your site could create a program that exhaustively sends HTTP requests to the login page with a valid username and a guess at the password.</span></span> <span data-ttu-id="d09ff-154">Pokud odhad heslo je správné, vrátí stránku pro přihlášení ověřovacího lístku souboru cookie, okamžiku program ví, že má stumbled po pár platné uživatelské jméno a heslo.</span><span class="sxs-lookup"><span data-stu-id="d09ff-154">If the password guess is correct, the login page will return the authentication ticket cookie, at which point the program knows it has stumbled upon a valid username/password pair.</span></span> <span data-ttu-id="d09ff-155">Útok hrubou silou může být takového programu moct klopýtnout při heslo uživatele, zejména v případě, že je slabé heslo.</span><span class="sxs-lookup"><span data-stu-id="d09ff-155">Through brute force, such a program might be able to stumble upon a user's password, especially if the password is weak.</span></span>

<span data-ttu-id="d09ff-156">Pokud chcete zabránit takové útoky hrubou silou, členství v rámci zamezí uživatele Pokud je počet pokusů o neúspěšných přihlášení v časovém období.</span><span class="sxs-lookup"><span data-stu-id="d09ff-156">To prevent such brute force attacks, the Membership framework locks out a user if there are a certain number of unsuccessful login attempts within a certain period of time.</span></span> <span data-ttu-id="d09ff-157">Přesné parametry se dají konfigurovat prostřednictvím následující nastavení konfigurace dvou zprostředkovatele členství:</span><span class="sxs-lookup"><span data-stu-id="d09ff-157">The exact parameters are configurable through the following two Membership provider configuration settings:</span></span>

- <span data-ttu-id="d09ff-158">`maxInvalidPasswordAttempts`-Určuje, kolik neplatné heslo pokusy jsou povoleny pro uživatele během časového období před zablokováním účtu. Výchozí hodnota je 5.</span><span class="sxs-lookup"><span data-stu-id="d09ff-158">`maxInvalidPasswordAttempts` - specifies how many invalid password attempts are allowed for the user within the time period before the account is locked out. The default value is 5.</span></span>
- <span data-ttu-id="d09ff-159">`passwordAttemptWindow`-Určuje časové období v minutách, během které způsobí zadaný počet neplatných pokusů o přihlášení, účet bude uzamčen. Výchozí hodnota je 10.</span><span class="sxs-lookup"><span data-stu-id="d09ff-159">`passwordAttemptWindow` - indicates the time period in minutes during which the specified number of invalid login attempts will cause the account to be locked out. The default value is 10.</span></span>

<span data-ttu-id="d09ff-160">Pokud uživatel byl uzamčen, nelze se přihlásit, dokud správce odemkne svůj účet.</span><span class="sxs-lookup"><span data-stu-id="d09ff-160">If a user has been locked out, she cannot login until an administrator unlocks her account.</span></span> <span data-ttu-id="d09ff-161">Pokud je uživatel uzamčen, `ValidateUser` metoda bude *vždy* vrátit `False`i v případě, že jsou zadané platné přihlašovací údaje.</span><span class="sxs-lookup"><span data-stu-id="d09ff-161">When a user is locked out, the `ValidateUser` method will *always* return `False`, even if valid credentials are supplied.</span></span> <span data-ttu-id="d09ff-162">Když toto chování snižuje pravděpodobnost, že se hacker se rozdělit na váš web prostřednictvím metody hrubou silou, se můžou skončit uzamykání platný uživatel, který jednoduše zapomněl svoje heslo nebo omylem má klávesy Caps Lock na či má chybný zadáním den.</span><span class="sxs-lookup"><span data-stu-id="d09ff-162">While this behavior lessens the likelihood that a hacker will break into your site through brute force methods, it can end up locking out a valid user who has simply forgotten her password or accidentally has the Caps Lock on or is having a bad typing day.</span></span>

<span data-ttu-id="d09ff-163">Bohužel neexistuje žádné předdefinované nástroj pro odemknutí uživatelský účet.</span><span class="sxs-lookup"><span data-stu-id="d09ff-163">Unfortunately, there is no built-in tool for unlocking a user account.</span></span> <span data-ttu-id="d09ff-164">Chcete-li odemknout účet, můžete upravit databázi přímo - změnit `IsLockedOut` pole `aspnet_Membership` tabulky pro k odpovídajícímu uživatelskému účtu - nebo vytvořte webové rozhraní, které uvádí uzamčení účtů s možnostmi pro odemčení.</span><span class="sxs-lookup"><span data-stu-id="d09ff-164">In order to unlock an account, you can modify the database directly - change the `IsLockedOut` field in the `aspnet_Membership` table for the appropriate user account - or create a web-based interface that lists locked out accounts with options to unlock them.</span></span> <span data-ttu-id="d09ff-165">Vyzkoušíme vytváření rozhraní pro správu vykonávání běžných úloh souvisejícím s účtem a role uživatele v budoucnu kurzu.</span><span class="sxs-lookup"><span data-stu-id="d09ff-165">We will examine creating administrative interfaces for accomplishing common user account- and role-related tasks in a future tutorial.</span></span>

> [!NOTE]
> <span data-ttu-id="d09ff-166">Jedinou nevýhodou `ValidateUser` metoda je, že když zadané přihlašovací údaje jsou neplatné, neposkytuje žádné vysvětlení, proč.</span><span class="sxs-lookup"><span data-stu-id="d09ff-166">One downside of the `ValidateUser` method is that when the supplied credentials are invalid, it does not provide any explanation as to why.</span></span> <span data-ttu-id="d09ff-167">Přihlašovací údaje zřejmě není platná, protože v úložišti uživatele neexistuje žádné odpovídající uživatelské jméno a heslo pár nebo protože uživatel ještě nebyla schválena, nebo protože uživatel byl uzamčen. V kroku 4 jsme se zobrazí zobrazení více podrobná zpráva uživateli při jeho pokusu o přihlášení selže.</span><span class="sxs-lookup"><span data-stu-id="d09ff-167">The credentials may be invalid because there is no matching username/password pair in the user store, or because the user has not yet been approved, or because the user has been locked out. In Step 4 we will see how to show a more detailed message to the user when their login attempt fails.</span></span>


## <a name="step-2-collecting-credentials-through-the-login-web-control"></a><span data-ttu-id="d09ff-168">Krok 2: Shromažďování přihlašovacích údajů prostřednictvím řízení webové přihlášení</span><span class="sxs-lookup"><span data-stu-id="d09ff-168">Step 2: Collecting Credentials through the Login Web Control</span></span>

<span data-ttu-id="d09ff-169">[Ovládací prvek webu přihlášení](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx) vykreslí velmi podobné jsme vytvořili zpět ve výchozím nastavení uživatelské rozhraní <a id="Tutorial02"> </a> [ *Přehled ověřování založené na formulářích* ](../introduction/an-overview-of-forms-authentication-vb.md) kurzu.</span><span class="sxs-lookup"><span data-stu-id="d09ff-169">The [Login Web control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx) renders a default user interface very similar to the one we created back in the <a id="Tutorial02"></a>[*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-vb.md) tutorial.</span></span> <span data-ttu-id="d09ff-170">Použití ovládacího prvku přihlášení nám šetří práci museli vytvářet rozhraní pro zadání přihlašovacích údajů návštěvníka.</span><span class="sxs-lookup"><span data-stu-id="d09ff-170">Using the Login control saves us the work of having to create the interface to collect the visitor's credentials.</span></span> <span data-ttu-id="d09ff-171">Kromě toho ovládací prvek pro přihlášení automaticky přihlásí uživatel (za předpokladu, že odeslaná přihlašovací údaje jsou platné), a tím ukládání nám z nutnosti psaní jakéhokoli kódu.</span><span class="sxs-lookup"><span data-stu-id="d09ff-171">Moreover, the Login control automatically signs in the user (assuming the submitted credentials are valid), thereby saving us from having to write any code.</span></span>

<span data-ttu-id="d09ff-172">Umožňuje aktualizovat `Login.aspx`, nahraďte ručně vytvořené rozhraní a kódu s ovládacím prvkem přihlášení.</span><span class="sxs-lookup"><span data-stu-id="d09ff-172">Let's update `Login.aspx`, replacing the manually created interface and code with a Login control.</span></span> <span data-ttu-id="d09ff-173">Začněte tím, že odebrání stávající kód a kódu v `Login.aspx`.</span><span class="sxs-lookup"><span data-stu-id="d09ff-173">Start by removing the existing markup and code in `Login.aspx`.</span></span> <span data-ttu-id="d09ff-174">Může odstranit přímý nebo ho jednoduše komentář. Na komentář deklarativní, uzavřete ji s `<%--` a `--%>` oddělovače.</span><span class="sxs-lookup"><span data-stu-id="d09ff-174">You may delete it outright, or simply comment it out. To comment out declarative markup, surround it with the `<%--` and `--%>` delimiters.</span></span> <span data-ttu-id="d09ff-175">Tyto oddělovače lze zadat ručně, nebo, jak je vidět na obrázku 2, můžete si vybrat text poznámky, a potom klikněte na Odkomentujte vybrané řádky ikonu na panelu nástrojů.</span><span class="sxs-lookup"><span data-stu-id="d09ff-175">You can enter these delimiters manually, or, as Figure 2 shows, you may select the text to comment out and then click the Comment out the selected lines icon in the Toolbar.</span></span> <span data-ttu-id="d09ff-176">Podobně můžete Odkomentujte ikonu vybrané řádky komentář na vybraný úsek kódu ve třídě kódu.</span><span class="sxs-lookup"><span data-stu-id="d09ff-176">Similarly, you can use the Comment out the selected lines icon to comment out the selected code in the code-behind class.</span></span>


<span data-ttu-id="d09ff-177">[![Komentář existující deklarativní a zdrojový kód v Login.aspx](validating-user-credentials-against-the-membership-user-store-vb/_static/image5.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="d09ff-177">[![Comment Out the Existing Declarative Markup and Source Code in Login.aspx](validating-user-credentials-against-the-membership-user-store-vb/_static/image5.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image4.png)</span></span>

<span data-ttu-id="d09ff-178">**Obrázek 2**: komentář se existující deklarativní značky a zdrojový kód v Login.aspx ([Kliknutím zobrazit obrázek v plné velikosti](validating-user-credentials-against-the-membership-user-store-vb/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="d09ff-178">**Figure 2**: Comment Out the Existing Declarative Markup and Source Code in Login.aspx  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image6.png))</span></span>


> [!NOTE]
> <span data-ttu-id="d09ff-179">Odkomentujte ikonu vybrané řádky není k dispozici, při zobrazení deklarativní v sadě Visual Studio 2005.</span><span class="sxs-lookup"><span data-stu-id="d09ff-179">The Comment out the selected lines icon is not available when viewing the declarative markup in Visual Studio 2005.</span></span> <span data-ttu-id="d09ff-180">Pokud nepoužíváte Visual Studio 2008 je potřeba ručně přidat `<%--` a `--%>` oddělovače.</span><span class="sxs-lookup"><span data-stu-id="d09ff-180">If you are not using Visual Studio 2008 you will need to manually add the `<%--` and `--%>` delimiters.</span></span>


<span data-ttu-id="d09ff-181">Přetáhněte ovládací prvek přihlášení z panelu nástrojů na stránku a nastavit jeho `ID` vlastnost `myLogin`.</span><span class="sxs-lookup"><span data-stu-id="d09ff-181">Next, drag a Login control from the Toolbox on to the page and set its `ID` property to `myLogin`.</span></span> <span data-ttu-id="d09ff-182">Obrazovky v tomto okamžiku by měla vypadat podobně jako na obrázku 3.</span><span class="sxs-lookup"><span data-stu-id="d09ff-182">At this point your screen should look similar to Figure 3.</span></span> <span data-ttu-id="d09ff-183">Všimněte si, že přihlášení ovládacího prvku výchozí rozhraní obsahuje ovládací prvky textové pole pro uživatelské jméno a heslo, Zapamatovat uživatele při příštím zaškrtávací políčko a tlačítko v protokolu.</span><span class="sxs-lookup"><span data-stu-id="d09ff-183">Note that the Login control's default interface includes TextBox controls for the username and password, a Remember me next time CheckBox, and a Log In Button.</span></span> <span data-ttu-id="d09ff-184">Existují také `RequiredFieldValidator` ovládací prvky pro dvou textových polí.</span><span class="sxs-lookup"><span data-stu-id="d09ff-184">There are also `RequiredFieldValidator` controls for the two TextBoxes.</span></span>


<span data-ttu-id="d09ff-185">[![Přidání ovládacího prvku přihlášení na stránce](validating-user-credentials-against-the-membership-user-store-vb/_static/image8.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="d09ff-185">[![Add a Login Control to the Page](validating-user-credentials-against-the-membership-user-store-vb/_static/image8.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image7.png)</span></span>

<span data-ttu-id="d09ff-186">**Obrázek 3**: Přidání ovládacího prvku přihlášení na stránce ([Kliknutím zobrazit obrázek v plné velikosti](validating-user-credentials-against-the-membership-user-store-vb/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="d09ff-186">**Figure 3**: Add a Login Control to the Page  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image9.png))</span></span>


<span data-ttu-id="d09ff-187">A máme Hotovo!</span><span class="sxs-lookup"><span data-stu-id="d09ff-187">And we're done!</span></span> <span data-ttu-id="d09ff-188">Při kliknutí na tlačítko přihlásit přihlášení ovládacího prvku, dojde ke zpětné volání a bude volat ovládací prvek pro přihlášení `Membership.ValidateUser` metody předávání v zadané uživatelské jméno a heslo.</span><span class="sxs-lookup"><span data-stu-id="d09ff-188">When the Login control's Log In button is clicked, a postback will occur and the Login control will call the `Membership.ValidateUser` method, passing in the entered username and password.</span></span> <span data-ttu-id="d09ff-189">Pokud přihlašovací údaje jsou neplatné, zobrazí se zpráva například ovládací prvek pro přihlášení.</span><span class="sxs-lookup"><span data-stu-id="d09ff-189">If the credentials are invalid, the Login control displays a message stating such.</span></span> <span data-ttu-id="d09ff-190">Pokud však jsou platná pověření, ovládací prvek pro přihlášení vytvoří lístek pro ověřování formuláře a přesměruje uživatele na příslušnou stránku.</span><span class="sxs-lookup"><span data-stu-id="d09ff-190">If, however, the credentials are valid, then the Login control creates the forms authentication ticket and redirects the user to the appropriate page.</span></span>

<span data-ttu-id="d09ff-191">Ovládací prvek pro přihlášení pomocí čtyř faktorů zjistí na příslušnou stránku a přesměruje uživatele na po úspěšném přihlášení:</span><span class="sxs-lookup"><span data-stu-id="d09ff-191">The Login control uses four factors to determine the appropriate page to redirect the user to upon a successful login:</span></span>

- <span data-ttu-id="d09ff-192">Zda je ovládací prvek pro přihlášení na přihlašovací stránce podle definice `loginUrl` nastavení v konfiguraci ověřování formulářů; toto nastavení výchozí hodnota je`Login.aspx`</span><span class="sxs-lookup"><span data-stu-id="d09ff-192">Whether the Login control is on the login page as defined by `loginUrl` setting in the forms authentication configuration; this setting's default value is `Login.aspx`</span></span>
- <span data-ttu-id="d09ff-193">Přítomnost `ReturnUrl` parametr řetězce dotazu</span><span class="sxs-lookup"><span data-stu-id="d09ff-193">The presence of a `ReturnUrl` querystring parameter</span></span>
- <span data-ttu-id="d09ff-194">Hodnota prvku přihlášení [ `DestinationUrl` vlastnost](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.destinationpageurl.aspx)</span><span class="sxs-lookup"><span data-stu-id="d09ff-194">The value of the Login control's [`DestinationUrl` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.destinationpageurl.aspx)</span></span>
- <span data-ttu-id="d09ff-195">`defaultUrl` Zadána hodnota ve formulářích nastavení konfigurace ověřování; toto nastavení výchozí hodnota je Default.aspx</span><span class="sxs-lookup"><span data-stu-id="d09ff-195">The `defaultUrl` value specified in the forms authentication configuration settings; this setting's default value is Default.aspx</span></span>

<span data-ttu-id="d09ff-196">Jak znázorňuje obrázek 4 ovládací prvek pro přihlášení používá tyto čtyři parametry přijaty ve své rozhodnutí příslušnou stránku.</span><span class="sxs-lookup"><span data-stu-id="d09ff-196">Figure 4 depicts the how the Login control uses these four parameters to arrive at its appropriate page decision.</span></span>


<span data-ttu-id="d09ff-197">[![Přidání ovládacího prvku přihlášení na stránce](validating-user-credentials-against-the-membership-user-store-vb/_static/image11.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="d09ff-197">[![Add a Login Control to the Page](validating-user-credentials-against-the-membership-user-store-vb/_static/image11.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image10.png)</span></span>

<span data-ttu-id="d09ff-198">**Obrázek 4**: Přidání ovládacího prvku přihlášení na stránce ([Kliknutím zobrazit obrázek v plné velikosti](validating-user-credentials-against-the-membership-user-store-vb/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="d09ff-198">**Figure 4**: Add a Login Control to the Page  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image12.png))</span></span>


<span data-ttu-id="d09ff-199">K otestování ovládací prvek pro přihlášení návštěvou webu přes prohlížeč a přihlaste se jako stávajícího uživatele v rámci členství chvíli trvat.</span><span class="sxs-lookup"><span data-stu-id="d09ff-199">Take a moment to test out the Login control by visiting the site through a browser and logging in as an existing user in the Membership framework.</span></span>

<span data-ttu-id="d09ff-200">Ovládací prvek přihlášení vykreslené rozhraní je vysoce konfigurovatelné.</span><span class="sxs-lookup"><span data-stu-id="d09ff-200">The Login control's rendered interface is highly configurable.</span></span> <span data-ttu-id="d09ff-201">Existuje několik vlastností, které ovlivňují její vzhled; Navíc ovládací prvek pro přihlášení můžete převést na šablonu pro přesnou kontrolu nad rozložení prvky uživatelského rozhraní.</span><span class="sxs-lookup"><span data-stu-id="d09ff-201">There are a number of properties that influence its appearance; what's more, the Login control can be converted into a template for precise control over the layout the user interface elements.</span></span> <span data-ttu-id="d09ff-202">Zbývající část tohoto kroku prověří tom, jak přizpůsobit vzhled a rozložení.</span><span class="sxs-lookup"><span data-stu-id="d09ff-202">The remainder of this step examines how to customize the appearance and layout.</span></span>

### <a name="customizing-the-login-controls-appearance"></a><span data-ttu-id="d09ff-203">Přizpůsobení vzhledu ovládacího prvku přihlášení</span><span class="sxs-lookup"><span data-stu-id="d09ff-203">Customizing the Login Control's Appearance</span></span>

<span data-ttu-id="d09ff-204">Výchozí nastavení vlastností ovládacího prvku přihlášení vykreslení uživatelského rozhraní s názvem (přihlásit), textové pole a popisek – ovládací prvky pro uživatelské jméno a heslo vstupy, Zapamatovat uživatele další čas zaškrtávací políčko a tlačítko přihlásit.</span><span class="sxs-lookup"><span data-stu-id="d09ff-204">The Login control's default property settings render a user interface with a title ( Log In ), TextBox and Label controls for the username and password inputs, a Remember me next time CheckBox, and a Log In button.</span></span> <span data-ttu-id="d09ff-205">Objevuje z těchto elementů se všechny konfigurovatelné prostřednictvím mnoho vlastností ovládacího prvku přihlášení.</span><span class="sxs-lookup"><span data-stu-id="d09ff-205">The appearances of these elements are all configurable through the Login control's numerous properties.</span></span> <span data-ttu-id="d09ff-206">Kromě toho mohou být přidány další prvky uživatelského rozhraní – například odkaz na stránku, kterou chcete vytvořit nový uživatelský účet - nastavením vlastnosti nebo dvě.</span><span class="sxs-lookup"><span data-stu-id="d09ff-206">Furthermore, additional user interface elements - such as a link to a page to create a new user account - can be added by setting a property or two.</span></span>

<span data-ttu-id="d09ff-207">Věnujte čas na gussy až vzhled ovládacího prvku naše přihlášení.</span><span class="sxs-lookup"><span data-stu-id="d09ff-207">Let's spend a few moments to gussy up the appearance of our Login control.</span></span> <span data-ttu-id="d09ff-208">Vzhledem k tomu `Login.aspx` stránku už má textu v horní části stránky, která uvádí přihlášení, a název prvku přihlášení je nadbytečné.</span><span class="sxs-lookup"><span data-stu-id="d09ff-208">Since the `Login.aspx` page already has text at the top of the page that says Login, the Login control's title is superfluous.</span></span> <span data-ttu-id="d09ff-209">Proto Vyčistit [ `TitleText` vlastnost](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.titletext.aspx) hodnotu, aby bylo možné odebrat nadpis prvek přihlášení.</span><span class="sxs-lookup"><span data-stu-id="d09ff-209">Therefore, clear out the [`TitleText` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.titletext.aspx) value in order to remove the Login control's title.</span></span>

<span data-ttu-id="d09ff-210">Uživatelské jméno: a heslo: popisky nalevo od dvou ovládacích prvků textového pole lze přizpůsobit pomocí [ `UserNameLabelText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.usernamelabeltext.aspx) a [ `PasswordLabelText` vlastnosti](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordlabeltext.aspx), v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="d09ff-210">The User Name: and Password: Labels to the left of the two TextBox controls can be customized through the [`UserNameLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.usernamelabeltext.aspx) and [`PasswordLabelText` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordlabeltext.aspx), respectively.</span></span> <span data-ttu-id="d09ff-211">Změňte uživatelské jméno: štítek, který chcete číst uživatelské jméno:.</span><span class="sxs-lookup"><span data-stu-id="d09ff-211">Let's change the User Name: Label to read Username:.</span></span> <span data-ttu-id="d09ff-212">Styly popisek a textové pole se dají konfigurovat prostřednictvím [ `LabelStyle` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.labelstyle.aspx) a [ `TextBoxStyle` vlastnosti](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textboxstyle.aspx), v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="d09ff-212">The Label and TextBox styles are configurable through the [`LabelStyle`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.labelstyle.aspx) and [`TextBoxStyle` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textboxstyle.aspx), respectively.</span></span>

<span data-ttu-id="d09ff-213">Zapamatovat uživatele další čas políčko Text – vlastnost lze nastavit pomocí prvku přihlášení [ `RememberMeText` vlastnost](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermetext.aspx), a jeho výchozím nastavení zaškrtnuto, stav se dá konfigurovat pomocí [ `RememberMeSet` vlastnost](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermeset.aspx)(které výchozí hodnota je False).</span><span class="sxs-lookup"><span data-stu-id="d09ff-213">The Remember me next time CheckBox's Text property can be set through the Login control's [`RememberMeText` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermetext.aspx), and its default checked state is configurable through the [`RememberMeSet` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermeset.aspx) (which defaults to False).</span></span> <span data-ttu-id="d09ff-214">Pokračovat a nastavit `RememberMeSet` vlastnost na hodnotu True, aby Zapamatovat uživatele zaškrtávací políčko vedle času bude ve výchozím nastavení zaškrtnuto.</span><span class="sxs-lookup"><span data-stu-id="d09ff-214">Go ahead and set the `RememberMeSet` property to True so that the Remember me next time CheckBox will be checked by default.</span></span>

<span data-ttu-id="d09ff-215">Ovládací prvek pro přihlášení nabízí dvě vlastnosti pro úpravu rozložení jeho ovládacích prvků uživatelského rozhraní.</span><span class="sxs-lookup"><span data-stu-id="d09ff-215">The Login control offers two properties for adjusting the layout of its user interface controls.</span></span> <span data-ttu-id="d09ff-216">[ `TextLayout` Vlastnost](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textlayout.aspx) označuje, zda uživatelské jméno: a heslo: popisky se zobrazí vlevo jejich odpovídající textových polí (výchozí), nebo nad nimi.</span><span class="sxs-lookup"><span data-stu-id="d09ff-216">The [`TextLayout` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textlayout.aspx) indicates whether the Username: and Password: Labels appear to the left of their corresponding TextBoxes (the default), or above them.</span></span> <span data-ttu-id="d09ff-217">[ `Orientation` Vlastnost](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.orientation.aspx) označuje, zda vstupy uživatelské jméno a heslo jsou umístěna ve svislém směru (jeden nad sebou) nebo vodorovně.</span><span class="sxs-lookup"><span data-stu-id="d09ff-217">The [`Orientation` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.orientation.aspx) indicates whether the username and password inputs are situated vertically (one above the other) or horizontally.</span></span> <span data-ttu-id="d09ff-218">Přechod do ponechat tyto dvě vlastnosti nastavit na výchozí hodnoty, ale I doporučujeme zkuste nastavit tyto dvě vlastnosti na jiné než výchozí hodnoty zobrazíte výsledný efekt.</span><span class="sxs-lookup"><span data-stu-id="d09ff-218">I am going to leave these two properties set to their defaults, but I encourage you to try setting these two properties to their non-default values to see the resulting effect.</span></span>

> [!NOTE]
> <span data-ttu-id="d09ff-219">V další části Konfigurace rozložení ovládacího prvku přihlášení, podíváme se na definování přesné rozložení rozložení ovládacích prvků uživatelského rozhraní pomocí šablony.</span><span class="sxs-lookup"><span data-stu-id="d09ff-219">In the next section, Configuring the Login Control's Layout, we will look at using templates to define the precise layout of the Layout control's user interface elements.</span></span>


<span data-ttu-id="d09ff-220">Zabalení nastavení vlastností ovládacího prvku přihlášení nastavením [ `CreateUserText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createusertext.aspx) a [ `CreateUserUrl` vlastnosti](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createuserurl.aspx) k není ještě zaregistrována?</span><span class="sxs-lookup"><span data-stu-id="d09ff-220">Wrap up the Login control's property settings by setting the [`CreateUserText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createusertext.aspx) and [`CreateUserUrl` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createuserurl.aspx) to Not registered yet?</span></span> <span data-ttu-id="d09ff-221">Vytvoření účtu!</span><span class="sxs-lookup"><span data-stu-id="d09ff-221">Create an account!</span></span> <span data-ttu-id="d09ff-222">a `~/Membership/CreatingUserAccounts.aspx`, v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="d09ff-222">and `~/Membership/CreatingUserAccounts.aspx`, respectively.</span></span> <span data-ttu-id="d09ff-223">Tím se přidá přihlášení ovládacího prvku rozhraní přejdete na stránku jsme vytvořili v hypertextový odkaz <a id="Tutorial05"> </a> [předchozí kurzu](creating-user-accounts-vb.md).</span><span class="sxs-lookup"><span data-stu-id="d09ff-223">This adds a hyperlink to the Login control's interface pointing to the page we created in the <a id="Tutorial05"></a>[preceding tutorial](creating-user-accounts-vb.md).</span></span> <span data-ttu-id="d09ff-224">Ovládací prvek přihlášení [ `HelpPageText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppagetext.aspx) a [ `HelpPageUrl` vlastnosti](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppageurl.aspx) a [ `PasswordRecoveryText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoverytext.aspx) a [ `PasswordRecoveryUrl` vlastnosti](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoveryurl.aspx) pracovní stejným způsobem, vykreslování odkazů na stránky nápovědy a na stránce obnovení hesla.</span><span class="sxs-lookup"><span data-stu-id="d09ff-224">The Login control's [`HelpPageText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppagetext.aspx) and [`HelpPageUrl` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppageurl.aspx) and [`PasswordRecoveryText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoverytext.aspx) and [`PasswordRecoveryUrl` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoveryurl.aspx) work in the same manner, rendering links to a help page and a password recovery page.</span></span>

<span data-ttu-id="d09ff-225">Po provedení těchto změn vlastnosti, by měla vypadat podobná vidět na obrázku 5 deklarativní a vzhled ovládacího prvku přihlášení.</span><span class="sxs-lookup"><span data-stu-id="d09ff-225">After making these property changes, your Login control's declarative markup and appearance should look similar to that shown in Figure 5.</span></span>


<span data-ttu-id="d09ff-226">[![Hodnoty vlastností ovládacího prvku přihlášení, určují její vzhled](validating-user-credentials-against-the-membership-user-store-vb/_static/image14.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="d09ff-226">[![The Login Control's Properties' Values Dictate Its Appearance](validating-user-credentials-against-the-membership-user-store-vb/_static/image14.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image13.png)</span></span>

<span data-ttu-id="d09ff-227">**Obrázek 5**: přihlášení vlastností ovládacího prvku' hodnoty stanovují její vzhled ([Kliknutím zobrazit obrázek v plné velikosti](validating-user-credentials-against-the-membership-user-store-vb/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="d09ff-227">**Figure 5**: The Login Control's Properties' Values Dictate Its Appearance  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image15.png))</span></span>


### <a name="configuring-the-login-controls-layout"></a><span data-ttu-id="d09ff-228">Konfigurace rozložení ovládacích prvků přihlášení</span><span class="sxs-lookup"><span data-stu-id="d09ff-228">Configuring the Login Control's Layout</span></span>

<span data-ttu-id="d09ff-229">Ovládací prvek webu přihlášení výchozí uživatelské rozhraní rozložen rozhraní v kódu HTML `<table>`.</span><span class="sxs-lookup"><span data-stu-id="d09ff-229">The Login Web control's default user interface lays out the interface in an HTML `<table>`.</span></span> <span data-ttu-id="d09ff-230">Ale co když je třeba lepší kontrolu nad Vykreslený výstup?</span><span class="sxs-lookup"><span data-stu-id="d09ff-230">But what if we need finer control over the rendered output?</span></span> <span data-ttu-id="d09ff-231">Možná chcete nahradit `<table>` s řadou `<div>` značky.</span><span class="sxs-lookup"><span data-stu-id="d09ff-231">Maybe we want to replace the `<table>` with a series of `<div>` tags.</span></span> <span data-ttu-id="d09ff-232">Nebo co v případě naší aplikace vyžaduje další pověření pro ověřování?</span><span class="sxs-lookup"><span data-stu-id="d09ff-232">Or what if our application requires additional credentials for authentication?</span></span> <span data-ttu-id="d09ff-233">Mnohé weby finančních, například vyžadovat, aby zadejte jenom uživatelské jméno a heslo, ale také osobní identifikační číslo (PIN) nebo jiné identifikační údaje uživatelé.</span><span class="sxs-lookup"><span data-stu-id="d09ff-233">Many financial websites, for instance, require users to supply not only a username and password, but also a Personal Identification Number (PIN), or other identifying information.</span></span> <span data-ttu-id="d09ff-234">Ať může být důvodům, je možné převést na šablonu, ze kterého můžete explicitně definujeme rozhraní deklarativní ovládací prvek pro přihlášení.</span><span class="sxs-lookup"><span data-stu-id="d09ff-234">Whatever the reasons may be, it is possible to convert the Login control into a template, from which we can explicitly define the interface's declarative markup.</span></span>

<span data-ttu-id="d09ff-235">Budeme muset udělat dvě věci, aby bylo možné aktualizovat ovládací prvek pro přihlášení ke shromažďování další přihlašovací údaje:</span><span class="sxs-lookup"><span data-stu-id="d09ff-235">We need to do two things in order to update the Login control to collect additional credentials:</span></span>

1. <span data-ttu-id="d09ff-236">Aktualizujte rozhraní ovládacího prvku přihlášení zahrnout webových ovládacích prvků shromažďovat další přihlašovací údaje.</span><span class="sxs-lookup"><span data-stu-id="d09ff-236">Update the Login control's interface to include Web control(s) to collect the additional credentials.</span></span>
2. <span data-ttu-id="d09ff-237">Přepsání logiku interní ověřování přihlášení ovládacího prvku tak, aby pokud uživatelského jména a hesla je platná a jejich další přihlašovací údaje jsou platné, příliš pouze ověření uživatele.</span><span class="sxs-lookup"><span data-stu-id="d09ff-237">Override the Login control's internal authentication logic so that a user is only authenticated if their username and password is valid and their additional credentials are valid, too.</span></span>

<span data-ttu-id="d09ff-238">K provedení první úlohy, je potřeba převést ovládací prvek pro přihlášení do šablony a přidat potřebné ovládací prvky webového.</span><span class="sxs-lookup"><span data-stu-id="d09ff-238">To accomplish the first task, we need to convert the Login control into a template and add the necessary Web controls.</span></span> <span data-ttu-id="d09ff-239">Jako v druhé úloze, může být potlačeno logiku ověřování přihlášení ovládacího prvku tak, že vytvoříte obslužné rutiny události pro ovládací prvek [ `Authenticate` událostí](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span><span class="sxs-lookup"><span data-stu-id="d09ff-239">As for the second task, the Login control's authentication logic can be superseded by creating an event handler for the control's [`Authenticate` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span></span>

<span data-ttu-id="d09ff-240">Umožňuje aktualizovat ovládací prvek pro přihlášení, tak, aby vyzve uživatele pro jejich uživatelské jméno, heslo a e-mailovou adresu a pouze ověřuje uživatele, pokud odpovídá e-mailová adresa zadaná e-mailové adresy na soubor.</span><span class="sxs-lookup"><span data-stu-id="d09ff-240">Let's update the Login control so that it prompts users for their username, password, and email address and only authenticates the user if the email address supplied matches their email address on file.</span></span> <span data-ttu-id="d09ff-241">Nejprve musíme rozhraní ovládacího prvku přihlášení převést na šablonu.</span><span class="sxs-lookup"><span data-stu-id="d09ff-241">We first need to convert the Login control's interface to a template.</span></span> <span data-ttu-id="d09ff-242">Z ovládacího prvku přihlášení inteligentních značek zvolte Převést na šablonu možnost.</span><span class="sxs-lookup"><span data-stu-id="d09ff-242">From the Login control's Smart Tag, choose the Convert to template option.</span></span>


<span data-ttu-id="d09ff-243">[![Převést ovládací prvek pro přihlášení do šablony](validating-user-credentials-against-the-membership-user-store-vb/_static/image17.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="d09ff-243">[![Convert the Login Control to a Template](validating-user-credentials-against-the-membership-user-store-vb/_static/image17.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image16.png)</span></span>

<span data-ttu-id="d09ff-244">**Obrázek 6**: převést ovládací prvek pro přihlášení do šablony ([Kliknutím zobrazit obrázek v plné velikosti](validating-user-credentials-against-the-membership-user-store-vb/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="d09ff-244">**Figure 6**: Convert the Login Control to a Template  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image18.png))</span></span>


> [!NOTE]
> <span data-ttu-id="d09ff-245">Zrušit ovládací prvek pro přihlášení k jeho předem template verze, a klikněte na odkaz resetování ze inteligentní značky ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="d09ff-245">To revert the Login control to its pre-template version, click the Reset link from the control's Smart Tag.</span></span>


<span data-ttu-id="d09ff-246">Převádění ovládací prvek pro přihlášení do šablony přidá `LayoutTemplate` do ovládacího prvku deklarativní s elementů HTML a ovládací prvky webového definování uživatelského rozhraní.</span><span class="sxs-lookup"><span data-stu-id="d09ff-246">Converting the Login control to a template adds a `LayoutTemplate` to the control's declarative markup with HTML elements and Web controls defining the user interface.</span></span> <span data-ttu-id="d09ff-247">Jak je vidět na obrázku 7, převod ovládacího prvku do šablony odebere počet vlastností v okně Vlastnosti, jako `TitleText`, `CreateUserUrl`, a tak dále, protože hodnoty těchto vlastností jsou ignorovány, při použití šablony.</span><span class="sxs-lookup"><span data-stu-id="d09ff-247">As Figure 7 shows, converting the control to a template removes a number of properties from the Properties window, such as `TitleText`, `CreateUserUrl`, and so forth, since these property values are ignored when using a template.</span></span>


<span data-ttu-id="d09ff-248">[![Méně vlastností jsou že k dispozici při přihlášení řídicí je převést na šablonu](validating-user-credentials-against-the-membership-user-store-vb/_static/image20.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="d09ff-248">[![Fewer Properties are Available When the Login Control is Converted to a Template](validating-user-credentials-against-the-membership-user-store-vb/_static/image20.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image19.png)</span></span>

<span data-ttu-id="d09ff-249">**Obrázek 7**: méně vlastnosti jsou k dispozici při přihlášení řídicí je převést na šablonu ([Kliknutím zobrazit obrázek v plné velikosti](validating-user-credentials-against-the-membership-user-store-vb/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="d09ff-249">**Figure 7**: Fewer Properties are Available When the Login Control is Converted to a Template  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image21.png))</span></span>


<span data-ttu-id="d09ff-250">Značka jazyka HTML v `LayoutTemplate` může podle potřeby upravit.</span><span class="sxs-lookup"><span data-stu-id="d09ff-250">The HTML markup in the `LayoutTemplate` may be modified as needed.</span></span> <span data-ttu-id="d09ff-251">Podobně Nebojte se přidat všechny nové prvky, webové šablony.</span><span class="sxs-lookup"><span data-stu-id="d09ff-251">Likewise, feel free to add any new Web controls to the template.</span></span> <span data-ttu-id="d09ff-252">Je však důležité ovládací prvky webového jádra daného ovládacího prvku přihlášení zůstat v šabloně a zachovat jejich přiřazené `ID` hodnoty.</span><span class="sxs-lookup"><span data-stu-id="d09ff-252">However, it is important that Login control's core Web controls remain in the template and keep their assigned `ID` values.</span></span> <span data-ttu-id="d09ff-253">Konkrétně neodebere ani přejmenovat `UserName` nebo `Password` textová pole, `RememberMe` zaškrtávací políčko, `LoginButton` tlačítko `FailureText` štítek, nebo `RequiredFieldValidator` ovládací prvky.</span><span class="sxs-lookup"><span data-stu-id="d09ff-253">In particular, do not remove or rename the `UserName` or `Password` TextBoxes, the `RememberMe` CheckBox, the `LoginButton` Button, the `FailureText` Label, or the `RequiredFieldValidator` controls.</span></span>

<span data-ttu-id="d09ff-254">Shromažďovat návštěvníka e-mailovou adresu, je potřeba přidat textové pole v šabloně.</span><span class="sxs-lookup"><span data-stu-id="d09ff-254">To collect the visitor's email address, we need to add a TextBox to the template.</span></span> <span data-ttu-id="d09ff-255">Přidejte následující kód mezi řádku tabulky (`<tr>`), který obsahuje `Password` textové pole a řádku tabulky, který obsahuje Zapamatovat uživatele vedle čas zaškrtávací políčko:</span><span class="sxs-lookup"><span data-stu-id="d09ff-255">Add the following declarative markup between the table row (`<tr>`) that contains the `Password` TextBox and the table row that holds the Remember me next time CheckBox:</span></span>

[!code-aspx[Main](validating-user-credentials-against-the-membership-user-store-vb/samples/sample2.aspx)]

<span data-ttu-id="d09ff-256">Po přidání `Email` textovému poli, najdete na stránce prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="d09ff-256">After adding the `Email` TextBox, visit the page through a browser.</span></span> <span data-ttu-id="d09ff-257">Jak ukazuje obrázek 8, uživatelské rozhraní ovládacího prvku přihlášení nyní zahrnuje třetí textové pole.</span><span class="sxs-lookup"><span data-stu-id="d09ff-257">As Figure 8 shows, the Login control's user interface now includes a third textbox.</span></span>


<span data-ttu-id="d09ff-258">[![Ovládací prvek pro přihlášení nyní zahrnuje textové pole pro e-mailovou adresu uživatele](validating-user-credentials-against-the-membership-user-store-vb/_static/image23.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="d09ff-258">[![The Login Control Now Includes a Textbox for the User's Email Address](validating-user-credentials-against-the-membership-user-store-vb/_static/image23.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image22.png)</span></span>

<span data-ttu-id="d09ff-259">**Obrázek 8**: ovládací prvek pro přihlášení nyní zahrnuje textové pole pro e-mailovou adresu uživatele ([Kliknutím zobrazit obrázek v plné velikosti](validating-user-credentials-against-the-membership-user-store-vb/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="d09ff-259">**Figure 8**: The Login Control Now Includes a Textbox for the User's Email Address  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image24.png))</span></span>


<span data-ttu-id="d09ff-260">V tomto okamžiku je stále pomocí ovládacího prvku přihlášení `Membership.ValidateUser` metodu za účelem ověření zadané přihlašovací údaje.</span><span class="sxs-lookup"><span data-stu-id="d09ff-260">At this point, the Login control is still using the `Membership.ValidateUser` method to validate the supplied credentials.</span></span> <span data-ttu-id="d09ff-261">Odpovídajícím způsobem, hodnotu zadat do `Email` TextBox nemá žádný vliv na tom, jestli uživatel může přihlásit.</span><span class="sxs-lookup"><span data-stu-id="d09ff-261">Correspondingly, the value entered into the `Email` TextBox has no bearing on whether the user can log in.</span></span> <span data-ttu-id="d09ff-262">V kroku 3 Podíváme se na postup přepsání logiku ověřování přihlášení ovládacího prvku tak, aby přihlašovací údaje jsou pouze považovány za platné Pokud uživatelské jméno a heslo jsou platné a zadané e-mailová adresa odpovídá e-mailovou adresu na soubor.</span><span class="sxs-lookup"><span data-stu-id="d09ff-262">In Step 3 we will look at how to override the Login control's authentication logic so that the credentials are only considered valid if the username and password are valid and the supplied email address matches up with the email address on file.</span></span>

## <a name="step-3-modifying-the-login-controls-authentication-logic"></a><span data-ttu-id="d09ff-263">Krok 3: Úprava logiku ověřování přihlášení ovládacího prvku</span><span class="sxs-lookup"><span data-stu-id="d09ff-263">Step 3: Modifying the Login Control's Authentication Logic</span></span>

<span data-ttu-id="d09ff-264">Když návštěvník dodává jí přihlašovací údaje a klikne na tlačítko, které vyplývá tlačítko přihlásit, zpětné volání a přihlášení řídit proběhnou jeho ověřovací pracovní postup.</span><span class="sxs-lookup"><span data-stu-id="d09ff-264">When a visitor supplies her credentials and clicks the Log In button, a postback ensues and the Login control progresses through its authentication workflow.</span></span> <span data-ttu-id="d09ff-265">Pracovní postup spustí zobrazením [ `LoggingIn` událostí](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggingin.aspx).</span><span class="sxs-lookup"><span data-stu-id="d09ff-265">The workflow starts by raising the [`LoggingIn` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggingin.aspx).</span></span> <span data-ttu-id="d09ff-266">Všechny obslužné rutiny přidružené k této události může zrušit protokolu v operaci nastavením `e.Cancel` vlastnost `True`.</span><span class="sxs-lookup"><span data-stu-id="d09ff-266">Any event handlers associated with this event may cancel the log in operation by setting the `e.Cancel` property to `True`.</span></span>

<span data-ttu-id="d09ff-267">Pokud není v protokolu v operaci zrušit, pracovní postup hodnoty zobrazením [ `Authenticate` událostí](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span><span class="sxs-lookup"><span data-stu-id="d09ff-267">If the log in operation is not cancelled, the workflow progresses by raising the [`Authenticate` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span></span> <span data-ttu-id="d09ff-268">Pokud je obslužné rutiny události pro `Authenticate` událostí a pak je zodpovědný za určení toho, jestli zadané přihlašovací údaje jsou platné, nebo ne.</span><span class="sxs-lookup"><span data-stu-id="d09ff-268">If there is an event handler for the `Authenticate` event, then it is responsible for determining whether the supplied credentials are valid or not.</span></span> <span data-ttu-id="d09ff-269">Pokud je zadána žádná obslužná rutina události, používá ovládací prvek pro přihlášení `Membership.ValidateUser` metoda k určení platnost přihlašovacích údajů.</span><span class="sxs-lookup"><span data-stu-id="d09ff-269">If no event handler is specified, the Login control uses the `Membership.ValidateUser` method to determine the validity of the credentials.</span></span>

<span data-ttu-id="d09ff-270">Pokud zadané přihlašovací údaje jsou platné, pak se vytvoří lístek pro ověřování pomocí formulářů, [ `LoggedIn` událostí](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggedin.aspx) se vyvolá, a uživatel se přesměruje na příslušnou stránku.</span><span class="sxs-lookup"><span data-stu-id="d09ff-270">If the supplied credentials are valid, then the forms authentication ticket is created, the [`LoggedIn` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggedin.aspx) is raised, and the user is redirected to the appropriate page.</span></span> <span data-ttu-id="d09ff-271">Pokud však přihlašovací údaje jsou považovány za neplatné, pak se [ `LoginError` událostí](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loginerror.aspx) se vyvolá, a se zobrazí zpráva informující uživatele, že jejich přihlašovacích údajů byla neplatná.</span><span class="sxs-lookup"><span data-stu-id="d09ff-271">If, however, the credentials are deemed invalid, then the [`LoginError` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loginerror.aspx) is raised and a message is displayed informing the user that their credentials were invalid.</span></span> <span data-ttu-id="d09ff-272">Ve výchozím nastavení, při selhání přihlášení řízení jednoduše nastaví jeho `FailureText` Label Text ovládacího prvku na selhání zprávy (pokus o přihlášení nebylo úspěšné.</span><span class="sxs-lookup"><span data-stu-id="d09ff-272">By default, on failure the Login control simply sets its `FailureText` Label control's Text property to a failure message ( Your login attempt was not successful.</span></span> <span data-ttu-id="d09ff-273">Zkuste to prosím znovu).</span><span class="sxs-lookup"><span data-stu-id="d09ff-273">Please try again ).</span></span> <span data-ttu-id="d09ff-274">Ale pokud přihlášení ovládacího prvku [ `FailureAction` vlastnost](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failureaction.aspx) je nastaven na `RedirectToLoginPage`, pak problémy řízení přihlášení `Response.Redirect` na přihlašovací stránku připojením parametru řetězce dotazu `loginfailure=1` (což způsobí, že přihlášení ovládací prvek zobrazí zpráva o neúspěšném zpracování).</span><span class="sxs-lookup"><span data-stu-id="d09ff-274">However, if the Login control's [`FailureAction` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failureaction.aspx) is set to `RedirectToLoginPage`, then the Login control issues a `Response.Redirect` to the login page appending the querystring parameter `loginfailure=1` (which causes the Login control to display the failure message).</span></span>

<span data-ttu-id="d09ff-275">Obrázek 9 nabízí vývojový diagram pracovního postupu ověřování.</span><span class="sxs-lookup"><span data-stu-id="d09ff-275">Figure 9 offers a flow chart of the authentication workflow.</span></span>


<span data-ttu-id="d09ff-276">[![Pracovní postup ověření přihlášení ovládacího prvku](validating-user-credentials-against-the-membership-user-store-vb/_static/image26.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="d09ff-276">[![The Login Control's Authentication Workflow](validating-user-credentials-against-the-membership-user-store-vb/_static/image26.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image25.png)</span></span>

<span data-ttu-id="d09ff-277">**Obrázek 9**: pracovní postup ověření přihlášení řízení ([Kliknutím zobrazit obrázek v plné velikosti](validating-user-credentials-against-the-membership-user-store-vb/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="d09ff-277">**Figure 9**: The Login Control's Authentication Workflow  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image27.png))</span></span>


> [!NOTE]
> <span data-ttu-id="d09ff-278">Pokud jste zajímá, kdy by mohl použít `FailureAction`na `RedirectToLogin` stránky možnost, vezměte v úvahu následující scénář.</span><span class="sxs-lookup"><span data-stu-id="d09ff-278">If you are wondering when you would use the `FailureAction`'s `RedirectToLogin` page option, consider the following scenario.</span></span> <span data-ttu-id="d09ff-279">Nyní naše `Site.master` stránky předlohy aktuálně má text, Hello, stranger zobrazovaný v levém sloupci při návštěvě anonymního uživatele, ale Představte si, že jsme chtěli nahraďte tento text s ovládacím prvkem přihlášení.</span><span class="sxs-lookup"><span data-stu-id="d09ff-279">Right now our `Site.master` master page currently has the text, Hello, stranger displayed in the left column when visited by an anonymous user, but imagine that we wanted to replace that text with a Login control.</span></span> <span data-ttu-id="d09ff-280">To by umožnilo anonymního uživatele k přihlášení z libovolné stránky na webu, tedy nutné přímo navštívit stránku přihlášení.</span><span class="sxs-lookup"><span data-stu-id="d09ff-280">This would allow an anonymous user to log in from any page on the site, instead of requiring them to visit the login page directly.</span></span> <span data-ttu-id="d09ff-281">Ale pokud uživatele se nepodařilo přihlásit pomocí ovládacího prvku přihlášení pro vykreslení stránky předlohy, může být vhodné k jejich přesměrování na přihlašovací stránku (`Login.aspx`), protože této stránce pravděpodobně obsahuje další pokyny, odkazy a další Nápověda - například odkazy na vytvoření nový účet nebo načtení ztraceného hesla -, které nebyly přidané k hlavní stránce.</span><span class="sxs-lookup"><span data-stu-id="d09ff-281">However, if a user was unable to log in via the Login control rendered by the master page, it might make sense to redirect them to the login page (`Login.aspx`) because that page likely includes additional instructions, links, and other help - such as links to create a new account or retrieve a lost password - that were not added to the master page.</span></span>


### <a name="creating-theauthenticateevent-handler"></a><span data-ttu-id="d09ff-282">Vytváření`Authenticate`obslužné rutiny události</span><span class="sxs-lookup"><span data-stu-id="d09ff-282">Creating the`Authenticate`Event Handler</span></span>

<span data-ttu-id="d09ff-283">Aby bylo možné zařadit logiku vlastního ověřování, je potřeba vytvořit obslužnou rutinu události pro ovládací prvek přihlášení `Authenticate` událostí.</span><span class="sxs-lookup"><span data-stu-id="d09ff-283">In order to plug in our custom authentication logic, we need to create an event handler for the Login control's `Authenticate` event.</span></span> <span data-ttu-id="d09ff-284">Vytvoření obslužné rutiny události pro `Authenticate` událostí vygeneruje následující definice obslužná rutina události:</span><span class="sxs-lookup"><span data-stu-id="d09ff-284">Creating an event handler for the `Authenticate` event will generate the following event handler definition:</span></span>

[!code-vb[Main](validating-user-credentials-against-the-membership-user-store-vb/samples/sample3.vb)]

<span data-ttu-id="d09ff-285">Jak je vidět `Authenticate` obslužné rutiny události se předá objekt typu [ `AuthenticateEventArgs` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.authenticateeventargs.aspx) jako svůj druhý vstupní parametr.</span><span class="sxs-lookup"><span data-stu-id="d09ff-285">As you can see, the `Authenticate` event handler is passed an object of type [`AuthenticateEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.authenticateeventargs.aspx) as its second input parameter.</span></span> <span data-ttu-id="d09ff-286">`AuthenticateEventArgs` Třída obsahuje vlastnost typu Boolean s názvem `Authenticated` používané k určení, zda jsou zadaná pověření platná.</span><span class="sxs-lookup"><span data-stu-id="d09ff-286">The `AuthenticateEventArgs` class contains a Boolean property named `Authenticated` that is used to specify whether the supplied credentials are valid.</span></span> <span data-ttu-id="d09ff-287">Naše úkolů, pak je k zápisu sem kód, který určí, zda jsou zadaná pověření platná nebo není a nastavit `e.Authenticate` vlastnost odpovídajícím způsobem.</span><span class="sxs-lookup"><span data-stu-id="d09ff-287">Our task, then, is to write code here that determines whether the supplied credentials are valid or not, and to set the `e.Authenticate` property accordingly.</span></span>

### <a name="determining-and-validating-the-supplied-credentials"></a><span data-ttu-id="d09ff-288">Určení a ověřování zadané přihlašovací údaje</span><span class="sxs-lookup"><span data-stu-id="d09ff-288">Determining and Validating the Supplied Credentials</span></span>

<span data-ttu-id="d09ff-289">Použití ovládacího prvku přihlášení [ `UserName` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.username.aspx) a [ `Password` vlastnosti](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.password.aspx) určit uživatelské jméno a heslo přihlašovací údaje zadané uživatelem.</span><span class="sxs-lookup"><span data-stu-id="d09ff-289">Use the Login control's [`UserName`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.username.aspx) and [`Password` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.password.aspx) to determine the username and password credentials entered by the user.</span></span> <span data-ttu-id="d09ff-290">Aby bylo možné zjistit hodnot zadaných do jakékoli další ovládací prvky webového (například `Email` TextBox jsme přidali v předchozím kroku), použijte `LoginControlID.FindControl`("*`controlID`*") získat programový odkaz na webu řízení v šabloně, jehož `ID` vlastnost rovná  *`controlID`* .</span><span class="sxs-lookup"><span data-stu-id="d09ff-290">In order to determine the values entered into any additional Web controls (such as the `Email` TextBox we added in the previous step), use `LoginControlID.FindControl`("*`controlID`*") to obtain a programmatic reference to the Web control in the template whose `ID` property is equal to *`controlID`*.</span></span> <span data-ttu-id="d09ff-291">Chcete-li třeba `Email` textovému poli, použijte následující kód:</span><span class="sxs-lookup"><span data-stu-id="d09ff-291">For example, to get a reference to the `Email` TextBox, use the following code:</span></span>

`Dim EmailTextBox As TextBox = CType(myLogin.FindControl("Email"), TextBox)`

<span data-ttu-id="d09ff-292">Aby bylo možné ověření přihlašovacích údajů uživatele je potřeba udělat dvě věci:</span><span class="sxs-lookup"><span data-stu-id="d09ff-292">In order to validate the user's credentials we need to do two things:</span></span>

1. <span data-ttu-id="d09ff-293">Ujistěte se, že zadané uživatelské jméno a heslo jsou platné</span><span class="sxs-lookup"><span data-stu-id="d09ff-293">Ensure that the provided username and password are valid</span></span>
2. <span data-ttu-id="d09ff-294">Zajistěte, aby odpovídal e-mailovou adresu zadali e-mailovou adresu na souboru pro uživatele došlo k pokusu o přihlášení</span><span class="sxs-lookup"><span data-stu-id="d09ff-294">Ensure that email address entered matches the email address on file for the user attempting to log in</span></span>

<span data-ttu-id="d09ff-295">K provedení první kontrola můžeme jednoduše použít `Membership.ValidateUser` metoda jako jsme viděli v kroku 1.</span><span class="sxs-lookup"><span data-stu-id="d09ff-295">To accomplish the first check we can simply use the `Membership.ValidateUser` method like we saw in Step 1.</span></span> <span data-ttu-id="d09ff-296">Pro druhý kontrolu musíme určit e-mailovou adresu uživatele, aby jsme můžete porovnat s e-mailová adresa zadaná do ovládacího prvku textového pole.</span><span class="sxs-lookup"><span data-stu-id="d09ff-296">For the second check, we need to determine the user's email address so that we can compare it to the email address they entered into the TextBox control.</span></span> <span data-ttu-id="d09ff-297">Chcete-li získat informace o konkrétní uživatele, použijte `Membership` třídy [ `GetUser` metoda](https://msdn.microsoft.com/library/system.web.security.membership.getuser.aspx).</span><span class="sxs-lookup"><span data-stu-id="d09ff-297">To get information about a particular user, use the `Membership` class's [`GetUser` method](https://msdn.microsoft.com/library/system.web.security.membership.getuser.aspx).</span></span>

<span data-ttu-id="d09ff-298">`GetUser` Metoda má několik přetížení.</span><span class="sxs-lookup"><span data-stu-id="d09ff-298">The `GetUser` method has a number of overloads.</span></span> <span data-ttu-id="d09ff-299">Pokud se použije bez předávání žádné parametry, vrátí informace o aktuálně přihlášeného uživatele.</span><span class="sxs-lookup"><span data-stu-id="d09ff-299">If used without passing in any parameters, it returns information about the currently logged in user.</span></span> <span data-ttu-id="d09ff-300">Chcete-li získat informace o konkrétní uživatel, volejte `GetUser` předávání v své uživatelské jméno.</span><span class="sxs-lookup"><span data-stu-id="d09ff-300">To get information about a particular user, call `GetUser` passing in their username.</span></span> <span data-ttu-id="d09ff-301">V obou případech `GetUser` vrátí [ `MembershipUser` objekt](https://msdn.microsoft.com/library/system.web.security.membershipuser.aspx), který má vlastnosti, například `UserName`, `Email`, `IsApproved`, `IsOnline`a tak dále.</span><span class="sxs-lookup"><span data-stu-id="d09ff-301">Either way, `GetUser` returns a [`MembershipUser` object](https://msdn.microsoft.com/library/system.web.security.membershipuser.aspx), which has properties like `UserName`, `Email`, `IsApproved`, `IsOnline`, and so on.</span></span>

<span data-ttu-id="d09ff-302">Následující kód implementuje tyto dvě kontroly.</span><span class="sxs-lookup"><span data-stu-id="d09ff-302">The following code implements these two checks.</span></span> <span data-ttu-id="d09ff-303">Pokud obě podmínky, pak `e.Authenticate` je nastaven na `True`, v opačném případě je přiřazen `False`.</span><span class="sxs-lookup"><span data-stu-id="d09ff-303">If both pass, then `e.Authenticate` is set to `True`, otherwise it is assigned `False`.</span></span>

[!code-vb[Main](validating-user-credentials-against-the-membership-user-store-vb/samples/sample4.vb)]

<span data-ttu-id="d09ff-304">S tímto kódem na místě pokuste se přihlásit jako platného uživatele, zadání správné uživatelské jméno, heslo a e-mailovou adresu.</span><span class="sxs-lookup"><span data-stu-id="d09ff-304">With this code in place, attempt to log in as a valid user, entering the correct username, password, and email address.</span></span> <span data-ttu-id="d09ff-305">Zkuste to znovu, ale tentokrát záměrně použít nesprávný e-mailovou adresu (viz obrázek 10).</span><span class="sxs-lookup"><span data-stu-id="d09ff-305">Try it again, but this time purposefully use an incorrect email address (see Figure 10).</span></span> <span data-ttu-id="d09ff-306">Nakonec vyzkoušejte třetí čas pomocí uživatelského jména neexistující.</span><span class="sxs-lookup"><span data-stu-id="d09ff-306">Finally, try it a third time using a non-existent username.</span></span> <span data-ttu-id="d09ff-307">V prvním případě je by měla být úspěšně přihlášen k lokalitě, ale v posledních dvou případech se měla zobrazit zpráva prvek přihlášení neplatné přihlašovací údaje.</span><span class="sxs-lookup"><span data-stu-id="d09ff-307">In the first case you should be successfully logged on to the site, but in the last two cases you should see the Login control's invalid credentials message.</span></span>


<span data-ttu-id="d09ff-308">[![Tito nemůže přihlásit při zadávání nesprávné e-mailová adresa](validating-user-credentials-against-the-membership-user-store-vb/_static/image29.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="d09ff-308">[![Tito Cannot Log In When Supplying an Incorrect Email Address](validating-user-credentials-against-the-membership-user-store-vb/_static/image29.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image28.png)</span></span>

<span data-ttu-id="d09ff-309">**Obrázek 10**: Tito nelze protokolu v při zadávání nesprávné e-mailovou adresu ([Kliknutím zobrazit obrázek v plné velikosti](validating-user-credentials-against-the-membership-user-store-vb/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="d09ff-309">**Figure 10**: Tito Cannot Log In When Supplying an Incorrect Email Address  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image30.png))</span></span>


> [!NOTE]
> <span data-ttu-id="d09ff-310">Jak je popsáno v části Jak členství Framework zpracovává neplatný pokusů o přihlášení v kroku 1, pokud `Membership.ValidateUser` metoda je volána a předán neplatné přihlašovací údaje, uchovává informace o pokus o neplatné přihlášení a zamezí uživatele, pokud se překročí určitou Prahová hodnota neplatných pokusů o zadání v rámci určeného časového období.</span><span class="sxs-lookup"><span data-stu-id="d09ff-310">As discussed in the How the Membership Framework Handles Invalid Login Attempts section in Step 1, when the `Membership.ValidateUser` method is called and passed invalid credentials, it keeps track of the invalid login attempt and locks out the user if they exceed a certain threshold of invalid attempts within a specified time window.</span></span> <span data-ttu-id="d09ff-311">Od našich volání logiku vlastního ověřování `ValidateUser` metoda nesprávné heslo pro platné uživatelské jméno se zvýší čítač pokusů o neplatné přihlášení, ale hodnota tohoto čítače se zvýší v případě, kde uživatelské jméno a heslo jsou platné, ale e-mailová adresa je nesprávný.</span><span class="sxs-lookup"><span data-stu-id="d09ff-311">Since our custom authentication logic calls the `ValidateUser` method, an incorrect password for a valid username will increment the invalid login attempt counter, but this counter is not incremented in the case where the username and password are valid, but the email address is incorrect.</span></span> <span data-ttu-id="d09ff-312">Je možné se, toto chování je vhodná, protože nepravděpodobné, že se hacker znát uživatelské jméno a heslo, ale muset použít techniky hrubou silou k určení e-mailovou adresu uživatele.</span><span class="sxs-lookup"><span data-stu-id="d09ff-312">Chances are, this behavior is suitable, since it's unlikely that a hacker will know the username and password, but have to use brute force techniques to determine the user's email address.</span></span>


## <a name="step-4-improving-the-login-controls-invalid-credentials-message"></a><span data-ttu-id="d09ff-313">Krok 4: Zlepšení zpráv neplatné přihlašovací údaje přihlášení ovládacího prvku</span><span class="sxs-lookup"><span data-stu-id="d09ff-313">Step 4: Improving the Login Control's Invalid Credentials Message</span></span>

<span data-ttu-id="d09ff-314">Když se uživatel pokusí přihlásit s neplatnými přihlašovacími údaji, ovládací prvek pro přihlášení zobrazí zprávu, která vysvětluje, že pokus o přihlášení nebylo úspěšné.</span><span class="sxs-lookup"><span data-stu-id="d09ff-314">When a user attempts to log on with invalid credentials, the Login control displays a message explaining that the login attempt was unsuccessful.</span></span> <span data-ttu-id="d09ff-315">Konkrétně tento ovládací prvek zobrazí zprávu určenou jeho [ `FailureText` vlastnost](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failuretext.aspx), který má výchozí hodnotu pokus o přihlášení nebylo úspěšné.</span><span class="sxs-lookup"><span data-stu-id="d09ff-315">In particular, the control displays the message specified by its [`FailureText` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failuretext.aspx), which has a default value of Your login attempt was not successful.</span></span> <span data-ttu-id="d09ff-316">Zkuste to prosím znovu.</span><span class="sxs-lookup"><span data-stu-id="d09ff-316">Please try again.</span></span>

<span data-ttu-id="d09ff-317">Odvolat, že existuje mnoho důvodů, proč přihlašovacích údajů uživatele je neplatný:</span><span class="sxs-lookup"><span data-stu-id="d09ff-317">Recall that there are many reasons why a user's credentials may be invalid:</span></span>

- <span data-ttu-id="d09ff-318">Uživatelské jméno neexistuje.</span><span class="sxs-lookup"><span data-stu-id="d09ff-318">The username may not exist</span></span>
- <span data-ttu-id="d09ff-319">Uživatelské jméno existuje, ale heslo je neplatné</span><span class="sxs-lookup"><span data-stu-id="d09ff-319">The username exists, but the password is invalid</span></span>
- <span data-ttu-id="d09ff-320">Uživatelské jméno a heslo jsou platné, ale uživatel není ještě schváleny</span><span class="sxs-lookup"><span data-stu-id="d09ff-320">The username and password are valid, but the user is not yet approved</span></span>
- <span data-ttu-id="d09ff-321">Uživatelské jméno a heslo jsou platné, ale uživatel je uzamčen (pravděpodobně vzhledem k tomu, že byl překročen počet neplatných pokusů o přihlášení v rámci zadaného časového rámce) na více systémů</span><span class="sxs-lookup"><span data-stu-id="d09ff-321">The username and password are valid, but the user is locked out (most likely because they exceeded the number of invalid login attempts within the specified time frame)</span></span>

<span data-ttu-id="d09ff-322">A je možné z jiných důvodů při použití vlastní ověřovací logiku.</span><span class="sxs-lookup"><span data-stu-id="d09ff-322">And there may be other reasons when using custom authentication logic.</span></span> <span data-ttu-id="d09ff-323">Například kód jsme napsali v kroku 3, uživatelské jméno a heslo může být platný, ale e-mailová adresa může být nesprávný.</span><span class="sxs-lookup"><span data-stu-id="d09ff-323">For example, with the code we wrote in Step 3, the username and password may be valid, but the email address may be incorrect.</span></span>

<span data-ttu-id="d09ff-324">Bez ohledu na to, proč jsou neplatné přihlašovací údaje zobrazí ovládací prvek pro přihlášení ke stejné chybové zprávě.</span><span class="sxs-lookup"><span data-stu-id="d09ff-324">Regardless of why the credentials are invalid, the Login control displays the same error message.</span></span> <span data-ttu-id="d09ff-325">Může to být matoucí pro uživatele, jehož účet ještě nebyl schválen nebo který byl uzamčen kvůli chybějící zpětnou vazbu. S trocha pracovní jsme ale mít přihlášení řízení zobrazí zprávu vhodnější.</span><span class="sxs-lookup"><span data-stu-id="d09ff-325">This lack of feedback can be confusing for a user whose account has not yet been approved or who has been locked out. With a little bit of work, though, we can have the Login control display a more appropriate message.</span></span>

<span data-ttu-id="d09ff-326">Vždy, když se uživatel pokusí přihlásit s neplatnými přihlašovacími údaji vyvolá ovládací prvek pro přihlášení jeho `LoginError` událostí.</span><span class="sxs-lookup"><span data-stu-id="d09ff-326">Whenever a user attempts to login with invalid credentials the Login control raises its `LoginError` event.</span></span> <span data-ttu-id="d09ff-327">Pokračujte a vytvoření obslužné rutiny události pro tuto událost a přidejte následující kód:</span><span class="sxs-lookup"><span data-stu-id="d09ff-327">Go ahead and create an event handler for this event, and add the following code:</span></span>

[!code-vb[Main](validating-user-credentials-against-the-membership-user-store-vb/samples/sample5.vb)]

<span data-ttu-id="d09ff-328">Výše uvedený kód spustí nastavením prvek přihlášení `FailureText` vlastnost na výchozí hodnotu (pokus o přihlášení nebylo úspěšné.</span><span class="sxs-lookup"><span data-stu-id="d09ff-328">The above code starts by setting the Login control's `FailureText` property to the default value ( Your login attempt was not successful.</span></span> <span data-ttu-id="d09ff-329">Zkuste to prosím znovu).</span><span class="sxs-lookup"><span data-stu-id="d09ff-329">Please try again ).</span></span> <span data-ttu-id="d09ff-330">Pak zkontroluje, pokud uživatelské jméno mapuje existující uživatelský účet.</span><span class="sxs-lookup"><span data-stu-id="d09ff-330">It then checks to see if the username supplied maps to an existing user account.</span></span> <span data-ttu-id="d09ff-331">Pokud ano, zajímají výsledná `MembershipUser` objektu `IsLockedOut` a `IsApproved` vlastnosti, které chcete zjistit, zda účet byl uzamčen či ještě nebyla schválena.</span><span class="sxs-lookup"><span data-stu-id="d09ff-331">If so, it consults the resulting `MembershipUser` object's `IsLockedOut` and `IsApproved` properties to determine if the account has been locked out or has not yet been approved.</span></span> <span data-ttu-id="d09ff-332">V obou případech `FailureText` vlastnost se aktualizuje na odpovídající hodnotu.</span><span class="sxs-lookup"><span data-stu-id="d09ff-332">In either case, the `FailureText` property is updated to a corresponding value.</span></span>

<span data-ttu-id="d09ff-333">K otestování tohoto kódu, záměrně pokuste se přihlásit jako stávajícího uživatele, ale použijte nesprávné heslo.</span><span class="sxs-lookup"><span data-stu-id="d09ff-333">To test this code, purposefully attempt to log in as an existing user, but use an incorrect password.</span></span> <span data-ttu-id="d09ff-334">Proveďte tuto pětkrát v řádku v časovém rámci 10 minut a účet uzamčen. Jak ukazuje obrázek 11, přihlášení následné pokusy o bude vždy selhat (i s správné heslo), ale bude nyní zobrazit více popisný byl váš účet uzamčen kvůli moc velký počet neplatných pokusů o přihlášení.</span><span class="sxs-lookup"><span data-stu-id="d09ff-334">Do this five times in a row within a 10 minute time frame and the account will be locked out. As Figure 11 shows, subsequent login attempts will always fail (even with the correct password), but will now display the more descriptive Your account has been locked out because of too many invalid login attempts.</span></span> <span data-ttu-id="d09ff-335">Obraťte se na správce, aby zprávu odemknout účet.</span><span class="sxs-lookup"><span data-stu-id="d09ff-335">Please contact the administrator to have your account unlocked message.</span></span>


<span data-ttu-id="d09ff-336">[![Tito provést moc velký počet neplatných pokusů o přihlášení a byl uzamčen](validating-user-credentials-against-the-membership-user-store-vb/_static/image32.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="d09ff-336">[![Tito Performed Too Many Invalid Login Attempts and Has Been Locked Out](validating-user-credentials-against-the-membership-user-store-vb/_static/image32.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image31.png)</span></span>

<span data-ttu-id="d09ff-337">**Obrázek 11**: Tito provést příliš mnoho neplatný pokusů o přihlášení a má byl uzamčen Out ([Kliknutím zobrazit obrázek v plné velikosti](validating-user-credentials-against-the-membership-user-store-vb/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="d09ff-337">**Figure 11**: Tito Performed Too Many Invalid Login Attempts and Has Been Locked Out  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image33.png))</span></span>


## <a name="summary"></a><span data-ttu-id="d09ff-338">Souhrn</span><span class="sxs-lookup"><span data-stu-id="d09ff-338">Summary</span></span>

<span data-ttu-id="d09ff-339">Předchozí tohoto kurzu, zadané přihlašovací údaje s pevně zakódovaným seznamu párů uživatelského jména a hesla ověřit naše přihlašovací stránku.</span><span class="sxs-lookup"><span data-stu-id="d09ff-339">Prior this tutorial, our login page validated the supplied credentials against a hard-coded list of username/password pairs.</span></span> <span data-ttu-id="d09ff-340">V tomto kurzu budeme aktualizovat stránku k ověření pověření proti rozhraní členství.</span><span class="sxs-lookup"><span data-stu-id="d09ff-340">In this tutorial, we updated the page to validate credentials against the Membership framework.</span></span> <span data-ttu-id="d09ff-341">V kroku 1 jsme se podívali na pomocí `Membership.ValidateUser` metoda prostřednictvím kódu programu.</span><span class="sxs-lookup"><span data-stu-id="d09ff-341">In Step 1 we looked at using the `Membership.ValidateUser` method programmatically.</span></span> <span data-ttu-id="d09ff-342">V kroku 2 bylo nahrazeno naše ručně vytvořené uživatelské rozhraní a kódu ovládací prvek pro přihlášení.</span><span class="sxs-lookup"><span data-stu-id="d09ff-342">In Step 2 we replaced our manually created user interface and code with the Login control.</span></span>

<span data-ttu-id="d09ff-343">Ovládací prvek pro přihlášení vykreslí přihlášení standardní uživatelské rozhraní a automaticky ověřuje pověření uživatele proti rozhraní členství.</span><span class="sxs-lookup"><span data-stu-id="d09ff-343">The Login control renders a standard login user interface and automatically validates the user's credentials against the Membership framework.</span></span> <span data-ttu-id="d09ff-344">Kromě toho v případě platné přihlašovací údaje, ovládací prvek pro přihlášení se přihlásí uživatele prostřednictvím ověřování pomocí formulářů.</span><span class="sxs-lookup"><span data-stu-id="d09ff-344">Moreover, in the event of valid credentials, the Login control signs the user in via forms authentication.</span></span> <span data-ttu-id="d09ff-345">Plně funkční přihlašování uživatele je stručně řečeno, k dispozici jednoduše přetažením ovládací prvek pro přihlášení na stránce, žádné velmi deklarativní nebo kódu, které jsou nezbytné.</span><span class="sxs-lookup"><span data-stu-id="d09ff-345">In short, a fully functional login user experience is available by simply dragging the Login control onto a page, no extra declarative markup or code necessary.</span></span> <span data-ttu-id="d09ff-346">Co je další, je vysoce přizpůsobitelné, aby vám umožnil jemné stupeň kontroly nad obou vykreslené uživatelské rozhraní a ověřování logiku ovládací prvek pro přihlášení.</span><span class="sxs-lookup"><span data-stu-id="d09ff-346">What's more, the Login control is highly customizable, allowing for a fine degree of control over both the rendered user interface and authentication logic.</span></span>

<span data-ttu-id="d09ff-347">V tomto okamžiku můžete návštěvníkům náš web vytvořit nový uživatelský účet a protokol do lokality, ale musíme ještě podívejte se na omezení přístupu k stránky na základě ověření uživatele.</span><span class="sxs-lookup"><span data-stu-id="d09ff-347">At this point visitors to our website can create a new user account and log into the site, but we have yet to look at restricting access to pages based on the authenticated user.</span></span> <span data-ttu-id="d09ff-348">Každý uživatel ověřený nebo anonymní, v současné době můžete zobrazení všech stránek na svém webovém serveru.</span><span class="sxs-lookup"><span data-stu-id="d09ff-348">Currently, any user, authenticated or anonymous, can view any page on our site.</span></span> <span data-ttu-id="d09ff-349">Společně s řízení přístupu na stránky náš web na základě uživatele podle uživatelů, může máme určité stránky, jejichž funkce závisí na uživatele.</span><span class="sxs-lookup"><span data-stu-id="d09ff-349">Along with controlling access to our site's pages on a user-by-user basis, we might have certain pages whose functionality depends on the user.</span></span> <span data-ttu-id="d09ff-350">V dalším kurzu vypadá na tom, jak omezit přístup a funkce v stránku na základě přihlášeného uživatele.</span><span class="sxs-lookup"><span data-stu-id="d09ff-350">The next tutorial looks at how to limit access and in-page functionality based on the logged in user.</span></span>

<span data-ttu-id="d09ff-351">Radostí programování!</span><span class="sxs-lookup"><span data-stu-id="d09ff-351">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="d09ff-352">Další čtení</span><span class="sxs-lookup"><span data-stu-id="d09ff-352">Further Reading</span></span>

<span data-ttu-id="d09ff-353">Další informace o tématech popsané v tomto kurzu najdete v následujících zdrojích informací:</span><span class="sxs-lookup"><span data-stu-id="d09ff-353">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="d09ff-354">Zobrazení vlastních zpráv, které uzamčen a neschválený uživatelů</span><span class="sxs-lookup"><span data-stu-id="d09ff-354">Displaying Custom Messages to Locked Out and Non-Approved Users</span></span>](http://aspnet.4guysfromrolla.com/articles/050306-1.aspx)
- [<span data-ttu-id="d09ff-355">Zkoumání ASP.NET 2.0 je členství, role a profil</span><span class="sxs-lookup"><span data-stu-id="d09ff-355">Examining ASP.NET 2.0's Membership, Roles, and Profile</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="d09ff-356">Postupy: Vytvoření přihlašovací stránky technologie ASP.NET</span><span class="sxs-lookup"><span data-stu-id="d09ff-356">How To: Create an ASP.NET Login Page</span></span>](https://msdn.microsoft.com/library/ms178331.aspx)
- [<span data-ttu-id="d09ff-357">Technická dokumentace přihlášení ovládací prvek</span><span class="sxs-lookup"><span data-stu-id="d09ff-357">Login Control Technical Documentation</span></span>](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx)
- [<span data-ttu-id="d09ff-358">Použití ovládacích prvků přihlášení</span><span class="sxs-lookup"><span data-stu-id="d09ff-358">Using the Login Controls</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/security/login.aspx)

### <a name="about-the-author"></a><span data-ttu-id="d09ff-359">O autorovi</span><span class="sxs-lookup"><span data-stu-id="d09ff-359">About the Author</span></span>

<span data-ttu-id="d09ff-360">Scott Meisnerová, vytvořit více knih ASP/ASP.NET a zakladatele 4GuysFromRolla.com, má byla od 1998 práce s technologií Microsoft Web.</span><span class="sxs-lookup"><span data-stu-id="d09ff-360">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="d09ff-361">Scott funguje jako nezávislé poradce, trainer a zapisovače.</span><span class="sxs-lookup"><span data-stu-id="d09ff-361">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="d09ff-362">Jeho nejnovější seznam k  *[Edice nakladatelství Sams naučit sami technologii ASP.NET 2.0 za 24 hodin](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span><span class="sxs-lookup"><span data-stu-id="d09ff-362">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="d09ff-363">Scott lze dosáhnout za [ mitchell@4guysfromrolla.com ](mailto:mitchell@4guysfromrolla.com) nebo prostřednictvím svého blogu v [http://ScottOnWriting.NET](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="d09ff-363">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="d09ff-364">Zvláštní poděkování</span><span class="sxs-lookup"><span data-stu-id="d09ff-364">Special Thanks To</span></span>

<span data-ttu-id="d09ff-365">Tento kurz řady byla zkontrolovány uživatelem mnoho užitečné kontrolorů.</span><span class="sxs-lookup"><span data-stu-id="d09ff-365">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="d09ff-366">Vést kontroloři v tomto kurzu se Teresy Murphy a Michael Olivero.</span><span class="sxs-lookup"><span data-stu-id="d09ff-366">Lead reviewers for this tutorial were Teresa Murphy and Michael Olivero.</span></span> <span data-ttu-id="d09ff-367">Kontrola Moje nadcházející články MSDN máte zájem?</span><span class="sxs-lookup"><span data-stu-id="d09ff-367">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="d09ff-368">Pokud ano, vyřaďte mi řádek v [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com).</span><span class="sxs-lookup"><span data-stu-id="d09ff-368">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="d09ff-369">[Předchozí](creating-user-accounts-vb.md)
[další](user-based-authorization-vb.md)</span><span class="sxs-lookup"><span data-stu-id="d09ff-369">[Previous](creating-user-accounts-vb.md)
[Next](user-based-authorization-vb.md)</span></span>
