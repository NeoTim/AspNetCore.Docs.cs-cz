---
uid: web-forms/overview/older-versions-getting-started/master-pages/nested-master-pages-cs
title: Vnořené hlavní stránky (C#) | Microsoft Docs
author: rick-anderson
description: Ukazuje, jak lze vnořit jednu stránku předlohy v rámci jiného.
ms.author: aspnetcontent
manager: wpickett
ms.date: 07/28/2008
ms.topic: article
ms.assetid: 32b7fb6e-d74b-4048-91f8-70631b2523ee
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/nested-master-pages-cs
msc.type: authoredcontent
ms.openlocfilehash: c9497659e0b8ff8164f122e6e3cb382ac0355a32
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/06/2018
---
<a name="nested-master-pages-c"></a><span data-ttu-id="5938b-103">Vnořené hlavní stránky (C#)</span><span class="sxs-lookup"><span data-stu-id="5938b-103">Nested Master Pages (C#)</span></span>
====================
<span data-ttu-id="5938b-104">podle [Scott Meisnerová](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="5938b-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="5938b-105">[Stáhněte si kód](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.zip) nebo [stáhnout PDF](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.pdf)</span><span class="sxs-lookup"><span data-stu-id="5938b-105">[Download Code](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.zip) or [Download PDF](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.pdf)</span></span>

> <span data-ttu-id="5938b-106">Ukazuje, jak lze vnořit jednu stránku předlohy v rámci jiného.</span><span class="sxs-lookup"><span data-stu-id="5938b-106">Shows how to nest one master page within another.</span></span>


## <a name="introduction"></a><span data-ttu-id="5938b-107">Úvod</span><span class="sxs-lookup"><span data-stu-id="5938b-107">Introduction</span></span>

<span data-ttu-id="5938b-108">V průběhu posledních devět kurzy jsme viděli, jak implementovat rozložení na webu s stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="5938b-108">Over the course of the past nine tutorials we have seen how to implement a site-wide layout with master pages.</span></span> <span data-ttu-id="5938b-109">Stručně řečeno hlavní stránky nám umožňují, vývojáři stránky definovat běžné značek na hlavní stránce spolu s určitých oblastí, které se dají přizpůsobit na základě stránky obsahu stránce obsahu.</span><span class="sxs-lookup"><span data-stu-id="5938b-109">In a nutshell, master pages allow us, the page developer, to define common markup in the master page along with specific regions that can be customized on a content page-by-content page basis.</span></span> <span data-ttu-id="5938b-110">Ovládací prvky ContentPlaceHolder na hlavní stránce znamenat přizpůsobitelné oblasti; vlastní kód pro obsahuje rozložení jsou definovány v obsahu stránce prostřednictvím ovládací prvky obsahu.</span><span class="sxs-lookup"><span data-stu-id="5938b-110">The ContentPlaceHolder controls in a master page indicate the customizable regions; the customized markup for the ContentPlaceHolder controls are defined in the content page via Content controls.</span></span>

<span data-ttu-id="5938b-111">Stránky předlohy technik, které jsme jste prozkoumali doposud jsou skvělé, pokud budete mít jedno rozložení použít celého webu.</span><span class="sxs-lookup"><span data-stu-id="5938b-111">The master page techniques we've explored thus far are great if you have a single layout used across the entire site.</span></span> <span data-ttu-id="5938b-112">Mnoho velkých webů však mít rozložení lokality, které je přizpůsobené přes různé části.</span><span class="sxs-lookup"><span data-stu-id="5938b-112">However, many large websites have a site layout that is customized across various sections.</span></span> <span data-ttu-id="5938b-113">Představte si třeba zdravotní péče aplikace měla nemocnice pracovníci slouží ke správě informací o pacientech, aktivity a fakturace.</span><span class="sxs-lookup"><span data-stu-id="5938b-113">For example, consider a health care application used by hospital staff to manage patient information, activities, and billing.</span></span> <span data-ttu-id="5938b-114">Mohou být tři typy webových stránek v této aplikaci:</span><span class="sxs-lookup"><span data-stu-id="5938b-114">There may be three types of web pages in this application:</span></span>

- <span data-ttu-id="5938b-115">Zaměstnanci stránek specifických pro člena kde pracovníků oddělení můžete aktualizovat dostupnosti, zobrazit plány, nebo požádejte dovolená.</span><span class="sxs-lookup"><span data-stu-id="5938b-115">Staff member-specific pages where staff members can update availability, view schedules, or request vacation time.</span></span>
- <span data-ttu-id="5938b-116">Kde pracovníků oddělení umožňuje zobrazit nebo upravit informace o konkrétní pacienta pacienta konkrétní stránky.</span><span class="sxs-lookup"><span data-stu-id="5938b-116">Patient-specific pages where staff members view or edit information for a specific patient.</span></span>
- <span data-ttu-id="5938b-117">Fakturace konkrétní stránky, kde zkontrolovat aktuální účetní deklarací identity stavy a finanční sestavy.</span><span class="sxs-lookup"><span data-stu-id="5938b-117">Billing-specific pages where accountants review current claim statuses and financial reports.</span></span>

<span data-ttu-id="5938b-118">Každé stránce může sdílet běžné rozložení, jako je například nabídce v horní části a řadu často používaných odkazy podél dolního.</span><span class="sxs-lookup"><span data-stu-id="5938b-118">Every page might share a common layout, such as a menu across the top and a series of frequently used links along the bottom.</span></span> <span data-ttu-id="5938b-119">Ale zaměstnanci - pacienta- a stránek specifických pro fakturaci muset přizpůsobit toto Obecné rozložení.</span><span class="sxs-lookup"><span data-stu-id="5938b-119">But the staff-, patient-, and billing-specific pages may need to customize this generic layout.</span></span> <span data-ttu-id="5938b-120">Například možná všech stránek specifických pracovníci by měla obsahovat seznam kalendář a úkoly zobrazuje dostupnost aktuálně přihlášeného uživatele a denní plán.</span><span class="sxs-lookup"><span data-stu-id="5938b-120">For example, perhaps all staff-specific pages should include a calendar and task list showing the currently logged on user's availability and daily schedule.</span></span> <span data-ttu-id="5938b-121">Pravděpodobně muset všech stránek specifických pro pacienta zobrazit název, adresa a informací o pojištění pro pacienta upravována jejichž informace.</span><span class="sxs-lookup"><span data-stu-id="5938b-121">Perhaps all patient-specific pages need to show the name, address, and insurance information for the patient whose information is being edited.</span></span>

<span data-ttu-id="5938b-122">Je možné vytvořit takové vlastní rozložení pomocí *vnořené hlavní stránky*.</span><span class="sxs-lookup"><span data-stu-id="5938b-122">It's possible to create such customized layouts by using *nested master pages*.</span></span> <span data-ttu-id="5938b-123">K implementaci výše uvedené scénáře, jsme by začněte vytvořením stránku předlohy, definovaná na webu obsah rozložení, nabídky a zápatí s ContentPlaceHolders definování přizpůsobitelné oblasti.</span><span class="sxs-lookup"><span data-stu-id="5938b-123">To implement the above scenario, we would start by creating a master page that defined the site-wide layout, the menu and footer content, with ContentPlaceHolders defining the customizable regions.</span></span> <span data-ttu-id="5938b-124">Vytvoříme by pak tři vnořené hlavní stránky, jednu pro každý typ webové stránky.</span><span class="sxs-lookup"><span data-stu-id="5938b-124">We would then create three nested master pages, one for each type of web page.</span></span> <span data-ttu-id="5938b-125">Každé vnořené hlavní stránce nadefinovat obsahu mezi typ stránky obsahu, které používají stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="5938b-125">Each nested master page would define the content among the type of content pages that use the master page.</span></span> <span data-ttu-id="5938b-126">Jinými slovy vnořené stránky předlohy pro konkrétní pacienta stránky obsahu bude zahrnovat značek a programové logiku pro zobrazení informací o pacienta Upravovaný.</span><span class="sxs-lookup"><span data-stu-id="5938b-126">In other words, the nested master page for patient-specific content pages would include markup and programmatic logic for displaying information about the patient being edited.</span></span> <span data-ttu-id="5938b-127">Při vytváření nové stránky pacienta konkrétní jsme by vazby této vnořené hlavní stránky.</span><span class="sxs-lookup"><span data-stu-id="5938b-127">When creating a new patient-specific page we would bind it to this nested master page.</span></span>

<span data-ttu-id="5938b-128">V tomto kurzu se spustí zvýraznění výhod vnořené hlavní stránky.</span><span class="sxs-lookup"><span data-stu-id="5938b-128">This tutorial starts by highlighting the benefits of nested master pages.</span></span> <span data-ttu-id="5938b-129">Potom ukazuje, jak vytvořit a použít vnořené hlavní stránky.</span><span class="sxs-lookup"><span data-stu-id="5938b-129">It then shows how to create and use nested master pages.</span></span>

> [!NOTE]
> <span data-ttu-id="5938b-130">Vnořené hlavní stránky bylo umožněno od rozhraní .NET Framework verze 2.0.</span><span class="sxs-lookup"><span data-stu-id="5938b-130">Nested master pages have been possible since version 2.0 of the .NET Framework.</span></span> <span data-ttu-id="5938b-131">Visual Studio 2005 však nenabízely podporu návrhu pro vnořené hlavní stránky.</span><span class="sxs-lookup"><span data-stu-id="5938b-131">However, Visual Studio 2005 did not include design-time support for nested master pages.</span></span> <span data-ttu-id="5938b-132">Dobrá zpráva je, že Visual Studio 2008 nabízí bohaté prostředí návrhu pro vnořené hlavní stránky.</span><span class="sxs-lookup"><span data-stu-id="5938b-132">The good news is that Visual Studio 2008 offers a rich design-time experience for nested master pages.</span></span> <span data-ttu-id="5938b-133">Pokud mají zájem o pomocí vnořené hlavní stránky, ale stále používáte Visual Studio 2005, podívejte se na [Scott Guthrie](https://weblogs.asp.net/scottgu/)na položku blogu, [tipy pro vnořené hlavní stránky v době návrhu 2005 VS](https://weblogs.asp.net/scottgu/archive/2005/11/11/430382.aspx).</span><span class="sxs-lookup"><span data-stu-id="5938b-133">If you are interested in using nested master pages but are still using Visual Studio 2005, check out [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s blog entry, [Tips for Nested Master Pages in VS 2005 Design-Time](https://weblogs.asp.net/scottgu/archive/2005/11/11/430382.aspx).</span></span>


## <a name="the-benefits-of-nested-master-pages"></a><span data-ttu-id="5938b-134">Výhody vnořené hlavní stránky</span><span class="sxs-lookup"><span data-stu-id="5938b-134">The Benefits of Nested Master Pages</span></span>

<span data-ttu-id="5938b-135">Mnohé weby mají zastřešující návrh lokality, jakož i více přizpůsobené návrhů specifická pro určité typy stránek.</span><span class="sxs-lookup"><span data-stu-id="5938b-135">Many websites have an overarching site design as well as more customized designs specific to certain types of pages.</span></span> <span data-ttu-id="5938b-136">Například v naší ukázkové webové aplikaci jsme vytvořili elementární oddílu Správa (stránky v `~/Admin` složku).</span><span class="sxs-lookup"><span data-stu-id="5938b-136">For instance, in our demo web application we have created a rudimentary Administration section (the pages in the `~/Admin` folder).</span></span> <span data-ttu-id="5938b-137">Aktuálně webové stránky v `~/Admin` složky použít stejnou stránku předlohy jako tyto stránky není v části Správa (konkrétně, `Site.master` nebo `Alternate.master`, v závislosti na výběru uživatele).</span><span class="sxs-lookup"><span data-stu-id="5938b-137">Currently the web pages in the `~/Admin` folder use the same master page as those pages not in the administration section (namely, `Site.master` or `Alternate.master`, depending on the user's selection).</span></span>

> [!NOTE]
> <span data-ttu-id="5938b-138">Prozatím se předstírají, že aby náš web má jenom jednu stránku předlohy, `Site.master`.</span><span class="sxs-lookup"><span data-stu-id="5938b-138">For now, pretend that our site has just one master page, `Site.master`.</span></span> <span data-ttu-id="5938b-139">Jsme budete adres pomocí vnořené hlavní stránky s dva (nebo více) hlavní stránky počínaje "Pomocí vnořené hlavní stránky pro části" později v tomto kurzu.</span><span class="sxs-lookup"><span data-stu-id="5938b-139">We'll address using nested master pages with two (or more) master pages starting with "Using a Nested Master Page for the Administration Section" later in this tutorial.</span></span>


<span data-ttu-id="5938b-140">Představte si, že jsme se výzva k přizpůsobení rozložení stránky správy, které chcete zahrnout další informace nebo odkazy, které by jinak v dalších stránek v lokalitě.</span><span class="sxs-lookup"><span data-stu-id="5938b-140">Imagine that we were asked to customize the layout of the Administration pages to include additional information or links that would not otherwise be present in other pages in the site.</span></span> <span data-ttu-id="5938b-141">Existují čtyři metody k implementaci tento požadavek:</span><span class="sxs-lookup"><span data-stu-id="5938b-141">There are four techniques to implement this requirement:</span></span>

1. <span data-ttu-id="5938b-142">Ručně přidat informace specifické pro správu a odkazy na všechny stránky obsahu `~/Admin` složky.</span><span class="sxs-lookup"><span data-stu-id="5938b-142">Manually add the Administration-specific information and links to every content page in the `~/Admin` folder.</span></span>
2. <span data-ttu-id="5938b-143">Aktualizace `Site.master` o tom, jestli některé stránky Správa přístupu na základě stránky předlohy zahrnout správu části konkrétní informace a odkazy, a pak přidejte kód k hlavní stránce můžete zobrazit nebo skrýt tyto části.</span><span class="sxs-lookup"><span data-stu-id="5938b-143">Update the `Site.master` master page to include the Administration section-specific information and links, and then add code to the master page to show or hide these sections based on whether one of the Administration pages is being visited.</span></span>
3. <span data-ttu-id="5938b-144">Vytvořit novou stránku předlohy speciálně pro části, zkopírovat kód z `Site.master`, přidejte informace specifické pro oddíl správy a odkazy a pak aktualizaci obsahu stránky v `~/Admin` složku, kterou chcete použít tento nový hlavní server stránka.</span><span class="sxs-lookup"><span data-stu-id="5938b-144">Create a new master page specifically for the Administration section, copy over the markup from `Site.master`, add the Administration section-specific information and links, and then update the content pages in the `~/Admin` folder to use this new master page.</span></span>
4. <span data-ttu-id="5938b-145">Vytvoření vnořené hlavní stránky, která se sváže s `Site.master` a stránky obsahu v `~/Admin` složky použijte tento nový vnořené stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="5938b-145">Create a nested master page that binds to `Site.master` and have the content pages in the `~/Admin` folder use this new nested master page.</span></span> <span data-ttu-id="5938b-146">Tato vnořené hlavní stránky by mělo zahrnovat jenom Další informace a odkazy, které jsou specifické pro stránky správy a nebude potřeba opakování kódu již definována v `Site.master`.</span><span class="sxs-lookup"><span data-stu-id="5938b-146">This nested master page would include just the additional information and links specific to the Administration pages and would not need to repeat the markup already defined in `Site.master`.</span></span>

<span data-ttu-id="5938b-147">První možností je nejméně palatable.</span><span class="sxs-lookup"><span data-stu-id="5938b-147">The first option is the least palatable.</span></span> <span data-ttu-id="5938b-148">Celý bod použití hlavní stránky je přesunout mimo museli ručně zkopírujte a vložte běžné značek pro nové stránky ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="5938b-148">The whole point of using master pages is to move away from having to manually copy and paste common markup to new ASP.NET pages.</span></span> <span data-ttu-id="5938b-149">Druhou možností je přijatelné, ale přidá méně udržovatelný, jako je bulks si hlavní stránky s kód, který se zobrazí pouze občas a vyžaduje vývojáře úpravy stránky předlohy, chcete-li vyřešit tento kód a mít na paměti, když aplikace přesně určitých zobrazení značek a když je skrytý.</span><span class="sxs-lookup"><span data-stu-id="5938b-149">The second option is acceptable, but makes the application less maintainable as it bulks up the master pages with markup that is only occasionally displayed and requires developers editing the master page to work around this markup and to have to remember when, exactly, certain markup is displayed versus when it is hidden.</span></span> <span data-ttu-id="5938b-150">Tento postup by méně chráněném jako přizpůsobení z více typů webových stránek musela být obslouženo tento jedné stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="5938b-150">This approach would be less tenable as customizations from more and more types of web pages needed to be accommodated by this single master page.</span></span>

<span data-ttu-id="5938b-151">Odebere třetí možnost zbytečné soubory a složitost problémy surfaced se druhá možnost.</span><span class="sxs-lookup"><span data-stu-id="5938b-151">The third option removes the clutter and complexity issues the surfaced with the second option.</span></span> <span data-ttu-id="5938b-152">Možnost pro tři hlavní nevýhodou je však vyžaduje nám zkopírujte a vložte běžné rozložení z `Site.master` na novou stránku předlohy konkrétní části Správa.</span><span class="sxs-lookup"><span data-stu-id="5938b-152">However, option three's main drawback is that it requires us to copy and paste the common layout from `Site.master` to the new Administration section-specific master page.</span></span> <span data-ttu-id="5938b-153">Pokud jsme se později rozhodnete změnit pro celou lokalitu rozložení máme mějte na paměti, jak ho změnit na dvou místech.</span><span class="sxs-lookup"><span data-stu-id="5938b-153">If we later decide to change the site-wide layout we have to remember to change it in two places.</span></span>

<span data-ttu-id="5938b-154">Možnost čtvrtý vnořené hlavní stránky, sdělte nám nejvhodnější druhý a třetí možnosti.</span><span class="sxs-lookup"><span data-stu-id="5938b-154">The fourth option, nested master pages, give us the best of the second and third options.</span></span> <span data-ttu-id="5938b-155">Informace na webu rozložení postaráno v jednom souboru - nejvyšší úrovně stránky předlohy - i specifické pro konkrétní oblasti obsahu je rozdělené na jiné soubory.</span><span class="sxs-lookup"><span data-stu-id="5938b-155">The site-wide layout information is maintained in one file - the top-level master page - while the content specific to particular regions is separated out into different files.</span></span>

<span data-ttu-id="5938b-156">V tomto kurzu začíná podívejte se na vytvoření a použití jednoduché vnořené hlavní stránky.</span><span class="sxs-lookup"><span data-stu-id="5938b-156">This tutorial starts with a look at creating and using a simple nested master page.</span></span> <span data-ttu-id="5938b-157">Vytvoříme nové hlavní stránku nejvyšší úrovně, dvě vnořené hlavní stránky a dvě obsahu stránky.</span><span class="sxs-lookup"><span data-stu-id="5938b-157">We create a brand new top-level master page, two nested master pages, and two content pages.</span></span> <span data-ttu-id="5938b-158">Počínaje "Pomocí vnořené hlavní stránky pro části", podíváme na aktualizace našich existující architekturu stránky předlohy pro patří použití vnořené hlavní stránky.</span><span class="sxs-lookup"><span data-stu-id="5938b-158">Starting with "Using a Nested Master Page for the Administration Section," we look at updating our existing master page architecture to include the use of nested master pages.</span></span> <span data-ttu-id="5938b-159">Konkrétně jsme vytvoření vnořené hlavní stránky a použít ho k zahrnovat další obsah vlastní obsahu stránky v `~/Admin` složky.</span><span class="sxs-lookup"><span data-stu-id="5938b-159">Specifically, we create a nested master page and use it to include additional custom content for the content pages in the `~/Admin` folder.</span></span>

## <a name="step-1-creating-a-simple-top-level-master-page"></a><span data-ttu-id="5938b-160">Krok 1: Vytvoření jednoduché nejvyšší úrovně stránky předlohy</span><span class="sxs-lookup"><span data-stu-id="5938b-160">Step 1: Creating a Simple Top-Level Master Page</span></span>

<span data-ttu-id="5938b-161">Vytváření vnořené hlavní na základě jedné z existující hlavní stránky a pak aktualizuje existující stránky obsahu používat tento nový vnořené hlavní stránky namísto nejvyšší úrovně stránky předlohy zahrnuje některé složitost, protože existující stránky obsahu již očekávat určité Ovládací prvky ContentPlaceHolder definované v nejvyšší úrovně stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="5938b-161">Creating a nested master based on one of the existing master pages and then updating an existing content page to use this new nested master page instead of the top-level master page entails some complexity because the existing content pages already expect certain ContentPlaceHolder controls defined in the top-level master page.</span></span> <span data-ttu-id="5938b-162">Vnořené hlavní stránce proto musíte taky zahrnout se stejnými ovládacími prvky ContentPlaceHolder se stejnými názvy.</span><span class="sxs-lookup"><span data-stu-id="5938b-162">Therefore, the nested master page must also include the same ContentPlaceHolder controls with the same names.</span></span> <span data-ttu-id="5938b-163">Kromě toho naše konkrétní ukázkové aplikace má dvě hlavní stránky (`Site.master` a `Alternate.master`), jsou dynamicky přiřadit stránku obsahu na základě předvoleb uživatele, který další přidá do této složitost.</span><span class="sxs-lookup"><span data-stu-id="5938b-163">Furthermore, our particular demo application has two master pages (`Site.master` and `Alternate.master`) that are dynamically assigned to a content page based on a user's preferences, which further adds to this complexity.</span></span> <span data-ttu-id="5938b-164">Aktualizace stávající aplikace pro používání vnořené hlavní stránky později v tomto kurzu se podíváme, ale můžeme vnořené první se zaměřují na jednoduchý příklad stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="5938b-164">We will look at updating the existing application to use nested master pages later in this tutorial, but let's first focus on a simple nested master pages example.</span></span>

<span data-ttu-id="5938b-165">Vytvořte novou složku s názvem `NestedMasterPages` a pak přidejte nový soubor předlohové stránky do této složky s názvem `Simple.master`.</span><span class="sxs-lookup"><span data-stu-id="5938b-165">Create a new folder named `NestedMasterPages` and then add a new master page file to that folder named `Simple.master`.</span></span> <span data-ttu-id="5938b-166">(Viz obrázek 1 pro snímek obrazovky Průzkumníka řešení po přidání tuto složku a soubor.) Přetáhněte `AlternateStyles.css` soubor stylů v Průzkumníku řešení do návrháře.</span><span class="sxs-lookup"><span data-stu-id="5938b-166">(See Figure 1 for a screen shot of the Solution Explorer after this folder and file have been added.) Drag the `AlternateStyles.css` style sheet file from the Solution Explorer onto the Designer.</span></span> <span data-ttu-id="5938b-167">Tím se přidá `<link>` soubor stylů v elementu `<head>` elementu, po jejímž uplynutí stránky předlohy `<head>` elementu značek by měl vypadat jako:</span><span class="sxs-lookup"><span data-stu-id="5938b-167">This adds a `<link>` element to the style sheet file in the `<head>` element, after which the master page's `<head>` element's markup should look like:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample1.aspx)]

<span data-ttu-id="5938b-168">Dál přidejte následující kód v rámci webové formu `Simple.master`:</span><span class="sxs-lookup"><span data-stu-id="5938b-168">Next, add the following markup within the Web Form of `Simple.master`:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample2.aspx)]

<span data-ttu-id="5938b-169">Tento kód zobrazí odkaz s názvem "Vnořené hlavní stránky (jednoduchý)" v horní části stránky velkými písmeny bílé na Námořnická modř pozadí.</span><span class="sxs-lookup"><span data-stu-id="5938b-169">This markup displays a link titled "Nested Master Pages (Simple)" at the top of the page in a large white font on a navy background.</span></span> <span data-ttu-id="5938b-170">Pod kterou je `MainContent` ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="5938b-170">Beneath that is the `MainContent` ContentPlaceHolder.</span></span> <span data-ttu-id="5938b-171">Obrázek 1 zobrazuje `Simple.master` stránky předlohy při načítání v návrháři sady Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="5938b-171">Figure 1 shows the `Simple.master` master page when loaded in the Visual Studio Designer.</span></span>


<span data-ttu-id="5938b-172">[![Vnořené stránky předlohy definuje obsahu specifické pro stránky v části Správa](nested-master-pages-cs/_static/image2.png)](nested-master-pages-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="5938b-172">[![The Nested Master Page Defines Content Specific to the Pages in the Administration Section](nested-master-pages-cs/_static/image2.png)](nested-master-pages-cs/_static/image1.png)</span></span>

<span data-ttu-id="5938b-173">**Obrázek 01**: vnořené hlavní stránky definuje obsahu specifické pro stránky v části Správa ([Kliknutím zobrazit obrázek v plné velikosti](nested-master-pages-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="5938b-173">**Figure 01**: The Nested Master Page Defines Content Specific to the Pages in the Administration Section ([Click to view full-size image](nested-master-pages-cs/_static/image3.png))</span></span>


## <a name="step-2-creating-a-simple-nested-master-page"></a><span data-ttu-id="5938b-174">Krok 2: Vytvoření jednoduché vnořené hlavní stránky</span><span class="sxs-lookup"><span data-stu-id="5938b-174">Step 2: Creating a Simple Nested Master Page</span></span>

<span data-ttu-id="5938b-175">`Simple.master` obsahuje dvou ovládacích prvků ContentPlaceHolder: `MainContent` ContentPlaceHolder jsme přidali v rámci ve webovém formuláři spolu s `head` ContentPlaceHolder v `<head>` elementu.</span><span class="sxs-lookup"><span data-stu-id="5938b-175">`Simple.master` contains two ContentPlaceHolder controls: the `MainContent` ContentPlaceHolder we added within the Web Form along with the `head` ContentPlaceHolder in the `<head>` element.</span></span> <span data-ttu-id="5938b-176">Pokud se k vytvoření stránky obsahu a navázat jej na `Simple.master` stránky obsahu by měla mít dva ovládací prvky obsahu odkazující na dvě ContentPlaceHolders.</span><span class="sxs-lookup"><span data-stu-id="5938b-176">If we were to create a content page and bind it to `Simple.master` the content page would have two Content controls referencing the two ContentPlaceHolders.</span></span> <span data-ttu-id="5938b-177">Podobně pokud jsme vytvoření vnořené hlavní stránky a navázat jej na `Simple.master` pak vnořené hlavní stránky bude mít dva ovládací prvky obsahu.</span><span class="sxs-lookup"><span data-stu-id="5938b-177">Similarly, if we create a nested master page and bind it to `Simple.master` then the nested master page will have two Content controls.</span></span>

<span data-ttu-id="5938b-178">Umožňuje přidat nové vnořené hlavní stránky k `NestedMasterPages` složku s názvem `SimpleNested.master`.</span><span class="sxs-lookup"><span data-stu-id="5938b-178">Let's add a new nested master page to the `NestedMasterPages` folder named `SimpleNested.master`.</span></span> <span data-ttu-id="5938b-179">Klikněte pravým tlačítkem na `NestedMasterPages` složky a vyberte Přidat novou položku.</span><span class="sxs-lookup"><span data-stu-id="5938b-179">Right-click on the `NestedMasterPages` folder and choose Add New Item.</span></span> <span data-ttu-id="5938b-180">Otevře dialogové okno Přidat novou položku, na obrázku 2.</span><span class="sxs-lookup"><span data-stu-id="5938b-180">This brings up the Add New Item dialog box shown in Figure 2.</span></span> <span data-ttu-id="5938b-181">Vyberte typ šablony stránky předlohy a zadejte název nové stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="5938b-181">Select the Master Page template type and type in the name of the new master page.</span></span> <span data-ttu-id="5938b-182">K označení, že nová stránka předlohy by měla být vnořené hlavní stránky, zaškrtněte políčko "Vyberte stránku předlohy".</span><span class="sxs-lookup"><span data-stu-id="5938b-182">To indicate that the new master page should be a nested master page, check the "Select master page" checkbox.</span></span>

<span data-ttu-id="5938b-183">Potom klikněte na tlačítko Přidat.</span><span class="sxs-lookup"><span data-stu-id="5938b-183">Next, click the Add button.</span></span> <span data-ttu-id="5938b-184">Bude se zobrazovat stejné vyberte stránku předlohy dialogové okno se zobrazí při vytváření vazby obsahu stránce pro stránky předlohy (viz obrázek 3).</span><span class="sxs-lookup"><span data-stu-id="5938b-184">This will display the same Select a Master Page dialog box you see when binding a content page to a master page (see Figure 3).</span></span> <span data-ttu-id="5938b-185">Vyberte `Simple.master` stránky předlohy v `NestedMasterPages` složky a klikněte na tlačítko OK.</span><span class="sxs-lookup"><span data-stu-id="5938b-185">Choose the `Simple.master` master page in the `NestedMasterPages` folder and click OK.</span></span>

> [!NOTE]
> <span data-ttu-id="5938b-186">Pokud jste vytvořili pomocí modelu projektu webové aplikace místo webový projekt modelu webu ASP.NET neuvidíte políčka "Vyberte stránku předlohy" v dialogovém okně Přidat novou položku na obrázku 2.</span><span class="sxs-lookup"><span data-stu-id="5938b-186">If you created your ASP.NET website using the Web Application Project model instead of the Web Site Project model you will not see the "Select master page" checkbox in the Add New Item dialog box shown in Figure 2.</span></span> <span data-ttu-id="5938b-187">K vytvoření vnořené hlavní stránky při použití modelu projektu webové aplikace, musíte zvolit šablonu vnořené stránky předlohy (namísto šabloně – stránka předlohy).</span><span class="sxs-lookup"><span data-stu-id="5938b-187">To create a nested master page when using the Web Application Project model you must choose the Nested Master Page template (instead of the Master Page template).</span></span> <span data-ttu-id="5938b-188">Po výběru šablony vnořené hlavní stránky a kliknutím na tlačítko Přidat, stejné vyberte stránku předlohy, zobrazí se dialogové okno znázorněný na obrázku 3.</span><span class="sxs-lookup"><span data-stu-id="5938b-188">After selecting the Nested Master Page template and clicking Add, the same Select a Master Page dialog box shown in Figure 3 will appear.</span></span>


<span data-ttu-id="5938b-189">[![Zkontrolujte &quot;vyberte stránku předlohy&quot; zaškrtávací políčko k přidání vnořené hlavní stránky](nested-master-pages-cs/_static/image5.png)](nested-master-pages-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="5938b-189">[![Check the &quot;Select master page&quot; Checkbox to Add a Nested Master Page](nested-master-pages-cs/_static/image5.png)](nested-master-pages-cs/_static/image4.png)</span></span>

<span data-ttu-id="5938b-190">**Obrázek 02**: Zaškrtnutím políčka "Vyberte stránku předlohy" Přidání vnořené hlavní stránky ([Kliknutím zobrazit obrázek v plné velikosti](nested-master-pages-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="5938b-190">**Figure 02**: Check the "Select master page" Checkbox to Add a Nested Master Page ([Click to view full-size image](nested-master-pages-cs/_static/image6.png))</span></span>


<span data-ttu-id="5938b-191">[![Vytvoření vazby vnořené hlavní stránky na stránku předlohy Simple.master](nested-master-pages-cs/_static/image8.png)](nested-master-pages-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="5938b-191">[![Bind the Nested Master Page to the Simple.master Master Page](nested-master-pages-cs/_static/image8.png)](nested-master-pages-cs/_static/image7.png)</span></span>

<span data-ttu-id="5938b-192">**Obrázek 03**: vytvoření vazby vnořené hlavní stránky `Simple.master` – stránka předlohy ([Kliknutím zobrazit obrázek v plné velikosti](nested-master-pages-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="5938b-192">**Figure 03**: Bind the Nested Master Page to the `Simple.master` Master Page ([Click to view full-size image](nested-master-pages-cs/_static/image9.png))</span></span>


<span data-ttu-id="5938b-193">Vnořené hlavní stránky deklarativní kód ukazuje následující příklad obsahuje dva ovládací prvky obsahu odkazující na nejvyšší úrovni stránky předlohy dvou ContentPlaceHolder ovládacích prvků.</span><span class="sxs-lookup"><span data-stu-id="5938b-193">The nested master page's declarative markup, shown below, contains two Content controls referencing the top-level master page's two ContentPlaceHolder controls.</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample3.aspx)]

<span data-ttu-id="5938b-194">S výjimkou `<%@ Master %>` direktivy, deklarativní počáteční vnořené hlavní stránky je stejný jako kód, který původně vytvořil při vazbě obsahu stránce na stejné nejvyšší úrovně stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="5938b-194">Except for the `<%@ Master %>` directive, the nested master page's initial declarative markup is identical to the markup that is initially generated when binding a content page to the same top-level master page.</span></span> <span data-ttu-id="5938b-195">Jako obsahu stránce `<%@ Page %>` – direktiva, `<%@ Master %>` zahrnuje direktiva sem `MasterPageFile` atribut, který určuje vnořené hlavní stránky nadřazená stránka předlohy.</span><span class="sxs-lookup"><span data-stu-id="5938b-195">Like a content page's `<%@ Page %>` directive, the `<%@ Master %>` directive here includes a `MasterPageFile` attribute that specifies the nested master page's parent master page.</span></span> <span data-ttu-id="5938b-196">Hlavní rozdíl mezi vnořené hlavní stránky a stránky obsahu vázána na stejné nejvyšší úrovně stránky předlohy je, že vnořené hlavní stránky může zahrnovat ContentPlaceHolder ovládací prvky.</span><span class="sxs-lookup"><span data-stu-id="5938b-196">The main difference between the nested master page and a content page bound to the same top-level master page is that the nested master page can include ContentPlaceHolder controls.</span></span> <span data-ttu-id="5938b-197">Ovládací prvky ContentPlaceHolder vnořené hlavní stránky definovat oblastech, kde stránky obsahu můžete upravit kód.</span><span class="sxs-lookup"><span data-stu-id="5938b-197">The nested master page's ContentPlaceHolder controls define the regions where the content pages can customize the markup.</span></span>

<span data-ttu-id="5938b-198">Aktualizujte tento vnořené hlavní stránky tak, aby se zobrazí text "Hello, z SimpleNested!"</span><span class="sxs-lookup"><span data-stu-id="5938b-198">Update this nested master page so that it displays the text "Hello, from SimpleNested!"</span></span> <span data-ttu-id="5938b-199">v ovládacím prvku obsahu, která odpovídá `MainContent` ContentPlaceHolder řízení.</span><span class="sxs-lookup"><span data-stu-id="5938b-199">in the Content control that corresponds to the `MainContent` ContentPlaceHolder control.</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample4.aspx)]

<span data-ttu-id="5938b-200">Po provedení tohoto přidání, uložte vnořené hlavní stránky a pak přidejte novou stránku obsahu, aby `NestedMasterPages` složku s názvem `Default.aspx`a navázat jej na `SimpleNested.master` stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="5938b-200">After making this addition, save the nested master page and then add a new content page to the `NestedMasterPages` folder named `Default.aspx`, and bind it to the `SimpleNested.master` master page.</span></span> <span data-ttu-id="5938b-201">Po přidání této stránky může být Překvapený obsahovat žádné ovládací prvky obsahu, (viz obrázek 4)!</span><span class="sxs-lookup"><span data-stu-id="5938b-201">Upon adding this page you may be surprised to see that it contains no Content controls (see Figure 4)!</span></span> <span data-ttu-id="5938b-202">Stránky obsahu přístup jenom k jeho *nadřazené* hlavní stránky ContentPlaceHolders.</span><span class="sxs-lookup"><span data-stu-id="5938b-202">A content page can only access its *parent* master page's ContentPlaceHolders.</span></span> <span data-ttu-id="5938b-203">`SimpleNested.master` neobsahuje všechny ovládací prvky ContentPlaceHolder; proto všechny stránky obsahu vázána na tuto stránku předlohy nemůže obsahovat všechny ovládací prvky obsahu.</span><span class="sxs-lookup"><span data-stu-id="5938b-203">`SimpleNested.master` does not contain any ContentPlaceHolder controls; therefore, any content page bound to this master page cannot contain any Content controls.</span></span>


<span data-ttu-id="5938b-204">[![Nová stránka obsahu obsahuje žádné ovládací prvky obsahu](nested-master-pages-cs/_static/image11.png)](nested-master-pages-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="5938b-204">[![The New Content Page Contains No Content Controls](nested-master-pages-cs/_static/image11.png)](nested-master-pages-cs/_static/image10.png)</span></span>

<span data-ttu-id="5938b-205">**Obrázek 04**: nové obsahu stránce obsahuje Ne ovládací prvky obsahu ([Kliknutím zobrazit obrázek v plné velikosti](nested-master-pages-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="5938b-205">**Figure 04**: The New Content Page Contains No Content Controls ([Click to view full-size image](nested-master-pages-cs/_static/image12.png))</span></span>


<span data-ttu-id="5938b-206">Co je potřeba udělat je aktualizovat vnořené hlavní stránky (`SimpleNested.master`) zahrnout ContentPlaceHolder ovládací prvky.</span><span class="sxs-lookup"><span data-stu-id="5938b-206">What we need to do is update the nested master page (`SimpleNested.master`) to include ContentPlaceHolder controls.</span></span> <span data-ttu-id="5938b-207">Obvykle budete muset svoje vnořené hlavní stránky pro zahrnutí ContentPlaceHolder každý ContentPlaceHolder definované její nadřazená stránka předlohy, a tím umožní její podřízené stránky předlohy nebo obsahu stránce pro práci s žádným z ContentPlaceHolder nejvyšší úrovně stránky předlohy ovládací prvky.</span><span class="sxs-lookup"><span data-stu-id="5938b-207">Typically you'll want your nested master pages to include a ContentPlaceHolder for each ContentPlaceHolder defined by its parent master page, thereby allowing its child master page or content page to work with any of the top-level master page's ContentPlaceHolder controls.</span></span>

<span data-ttu-id="5938b-208">Aktualizace `SimpleNested.master` stránky předlohy mají být zahrnuty ContentPlaceHolder jeho dvou obsahu ovládacích prvků.</span><span class="sxs-lookup"><span data-stu-id="5938b-208">Update the `SimpleNested.master` master page to include a ContentPlaceHolder in its two Content controls.</span></span> <span data-ttu-id="5938b-209">Zadejte obsahuje rozložení stejný název jako ContentPlaceHolder ovládací prvek, který odkazuje ovládací prvek jejich obsahu.</span><span class="sxs-lookup"><span data-stu-id="5938b-209">Give the ContentPlaceHolder controls the same name as the ContentPlaceHolder control their Content control refers to.</span></span> <span data-ttu-id="5938b-210">To znamená, přidání ovládacího prvku ContentPlaceHolder s názvem `MainContent` obsahu řídit ve `SimpleNested.master` odkazující `MainContent` ContentPlaceHolder v `Simple.master`.</span><span class="sxs-lookup"><span data-stu-id="5938b-210">That is, add a ContentPlaceHolder control named `MainContent` to the Content control in `SimpleNested.master` that references the `MainContent` ContentPlaceHolder in `Simple.master`.</span></span> <span data-ttu-id="5938b-211">V ovládacím prvku obsahu, který odkazuje na stejnou věc udělat `head` ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="5938b-211">Do the same thing in the Content control that references the `head` ContentPlaceHolder.</span></span>

> [!NOTE]
> <span data-ttu-id="5938b-212">Při I doporučujeme názvy ovládacích prvků ContentPlaceHolder na hlavní stránce vnořené stejná jako ContentPlaceHolders na hlavní stránce nejvyšší úrovně, tato pojmenování symetrie se nevyžaduje.</span><span class="sxs-lookup"><span data-stu-id="5938b-212">While I recommend naming the ContentPlaceHolder controls in the nested master page the same as the ContentPlaceHolders in the top-level master page, this naming symmetry is not required.</span></span> <span data-ttu-id="5938b-213">Obsahuje rozložení můžete dát do vnořené hlavní stránky libovolný název, který chcete.</span><span class="sxs-lookup"><span data-stu-id="5938b-213">You can give the ContentPlaceHolder controls in your nested master page any name you like.</span></span> <span data-ttu-id="5938b-214">Však lze snadno zapamatovat ContentPlaceHolders odpovídají s co oblastí stránky, pokud Moje nejvyšší úrovně stránky předlohy a vnořené hlavní stránky použijte stejné názvy.</span><span class="sxs-lookup"><span data-stu-id="5938b-214">However, I find it easier to remember what ContentPlaceHolders correspond with what regions of the page if my top-level master page and nested master pages use the same names.</span></span>


<span data-ttu-id="5938b-215">Po provedení těchto dodatky vaší `SimpleNested.master` stránky předlohy deklarativní by mělo vypadat jako následující:</span><span class="sxs-lookup"><span data-stu-id="5938b-215">After making these additions your `SimpleNested.master` master page's declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample5.aspx)]

<span data-ttu-id="5938b-216">Odstranit `Default.aspx` obsahu stránce jsme právě vytvořili a pak znovu přidat, jeho vazby `SimpleNested.master` stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="5938b-216">Delete the `Default.aspx` content page we just created and then re-add it, binding it to the `SimpleNested.master` master page.</span></span> <span data-ttu-id="5938b-217">Tentokrát Visual Studio přidá dva prvky obsah `Default.aspx`, odkazující ContentPlaceHolders nyní definována ve `SimpleNested.master` (viz obrázek 6).</span><span class="sxs-lookup"><span data-stu-id="5938b-217">This time Visual Studio adds two Content controls to the `Default.aspx`, referencing the ContentPlaceHolders now defined in `SimpleNested.master` (see Figure 6).</span></span> <span data-ttu-id="5938b-218">Přidejte text "Hello, z Default.aspx!"</span><span class="sxs-lookup"><span data-stu-id="5938b-218">Add the text, "Hello, from Default.aspx!"</span></span> <span data-ttu-id="5938b-219">obsah řídit, který odkazuje `MainContent`.</span><span class="sxs-lookup"><span data-stu-id="5938b-219">in the Content control that referenced `MainContent`.</span></span>

<span data-ttu-id="5938b-220">Obrázek 5 ukazuje tři entity podílejí zde - `Simple.master`, `SimpleNested.master`, a `Default.aspx` – a jak se vztahují na sebe navzájem.</span><span class="sxs-lookup"><span data-stu-id="5938b-220">Figure 5 shows the three entities involved here - `Simple.master`, `SimpleNested.master`, and `Default.aspx` - and how they relate to one another.</span></span> <span data-ttu-id="5938b-221">Jak ukazuje obrázek, vnořené hlavní stránky implementuje ovládací prvky obsahu pro ContentPlaceHolder nadřazeného objektu.</span><span class="sxs-lookup"><span data-stu-id="5938b-221">As the diagram shows, the nested master page implements Content controls for its parent's ContentPlaceHolder.</span></span> <span data-ttu-id="5938b-222">Pokud tyto oblasti musí být přístupné na stránku obsahu, musí vnořené hlavní stránky přidat vlastní ContentPlaceHolders na ovládací prvky obsahu.</span><span class="sxs-lookup"><span data-stu-id="5938b-222">If these regions need to be accessible to the content page, the nested master page must add its own ContentPlaceHolders to the Content controls.</span></span>


<span data-ttu-id="5938b-223">[![Nejvyšší úrovně a vnořené hlavní stránky, určují rozložení obsahu stránky](nested-master-pages-cs/_static/image14.png)](nested-master-pages-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="5938b-223">[![The Top-Level and Nested Master Pages Dictate the Content Page's Layout](nested-master-pages-cs/_static/image14.png)](nested-master-pages-cs/_static/image13.png)</span></span>

<span data-ttu-id="5938b-224">**Obrázek 05**: nejvyšší úrovně a vnořené hlavní stránky, určují rozložení obsahu stránce ([Kliknutím zobrazit obrázek v plné velikosti](nested-master-pages-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="5938b-224">**Figure 05**: The Top-Level and Nested Master Pages Dictate the Content Page's Layout ([Click to view full-size image](nested-master-pages-cs/_static/image15.png))</span></span>


<span data-ttu-id="5938b-225">Toto chování ukazuje, jak obsahu stránce nebo hlavní stránky je pouze cognizant z nadřazené stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="5938b-225">This behavior illustrates how a content page or master page is only cognizant of its parent master page.</span></span> <span data-ttu-id="5938b-226">Toto chování je také indikován návrháři sady Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="5938b-226">This behavior is also indicated by the Visual Studio Designer.</span></span> <span data-ttu-id="5938b-227">Obrázek 6 ukazuje návrháře pro `Default.aspx`.</span><span class="sxs-lookup"><span data-stu-id="5938b-227">Figure 6 shows the Designer for `Default.aspx`.</span></span> <span data-ttu-id="5938b-228">Při návrháře jasně ukazuje, jaké oblasti je možné upravovat ze stránky obsahu a co části nejsou, není to rozlišení upravovat oblasti jsou z vnořené hlavní stránky a jaké jsou oblasti na hlavní stránce nejvyšší úrovně.</span><span class="sxs-lookup"><span data-stu-id="5938b-228">While the Designer clearly shows what regions are editable from the content page and what portions aren't, it doesn't disambiguate what non-editable regions are from the nested master page and what regions are from the top-level master page.</span></span>


<span data-ttu-id="5938b-229">[![Obsahu stránce nyní zahrnuje ovládací prvky obsahu pro ContentPlaceHolders vnořené stránky předlohy](nested-master-pages-cs/_static/image17.png)](nested-master-pages-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="5938b-229">[![The Content Page Now Includes Content Controls for the Nested Master Page's ContentPlaceHolders](nested-master-pages-cs/_static/image17.png)](nested-master-pages-cs/_static/image16.png)</span></span>

<span data-ttu-id="5938b-230">**Obrázek 06**: obsahu stránce nyní zahrnuje ovládací prvky obsahu pro vnořené hlavní stránky ContentPlaceHolders ([Kliknutím zobrazit obrázek v plné velikosti](nested-master-pages-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="5938b-230">**Figure 06**: The Content Page Now Includes Content Controls for the Nested Master Page's ContentPlaceHolders ([Click to view full-size image](nested-master-pages-cs/_static/image18.png))</span></span>


## <a name="step-3-adding-a-second-simple-nested-master-page"></a><span data-ttu-id="5938b-231">Krok 3: Přidání druhého jednoduché vnořené hlavní stránky</span><span class="sxs-lookup"><span data-stu-id="5938b-231">Step 3: Adding a Second Simple Nested Master Page</span></span>

<span data-ttu-id="5938b-232">Výhodou vnořené hlavní stránky je více zřejmé, pokud existuje více vnořené hlavní stránky.</span><span class="sxs-lookup"><span data-stu-id="5938b-232">The benefit of nested master pages is more evident when there are multiple nested master pages.</span></span> <span data-ttu-id="5938b-233">Příkladem této výhody, vytvořte jiný vnořené hlavní stránky v `NestedMasterPages` složky; Tento nový název vnořené hlavní stránky `SimpleNestedAlternate.master` a navázat jej na `Simple.master` stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="5938b-233">To illustrate this benefit, create another nested master page in the `NestedMasterPages` folder; name this new nested master page `SimpleNestedAlternate.master` and bind it to the `Simple.master` master page.</span></span> <span data-ttu-id="5938b-234">Přidání ovládacích prvků ContentPlaceHolder ve dvou obsahu ovládacích prvků vnořené hlavní stránky, jako jsme provedli v kroku 2.</span><span class="sxs-lookup"><span data-stu-id="5938b-234">Add ContentPlaceHolder controls in the nested master page's two Content controls like we did in Step 2.</span></span> <span data-ttu-id="5938b-235">Také přidáte text "Hello, z SimpleNestedAlternate!"</span><span class="sxs-lookup"><span data-stu-id="5938b-235">Also add the text, "Hello, from SimpleNestedAlternate!"</span></span> <span data-ttu-id="5938b-236">v ovládacím prvku obsahu, která odpovídá nejvyšší úrovně stránky předlohy `MainContent` ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="5938b-236">in the Content control that corresponds to the top-level master page's `MainContent` ContentPlaceHolder.</span></span> <span data-ttu-id="5938b-237">Po provedení těchto změn vaší nové vnořené hlavní stránky deklarativní by měl vypadat takto:</span><span class="sxs-lookup"><span data-stu-id="5938b-237">After making these changes your new nested master page's declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample6.aspx)]

<span data-ttu-id="5938b-238">Vytvoření stránky obsahu s názvem `Alternate.aspx` v `NestedMasterPages` složky a navázat jej na `SimpleNestedAlternate.master` vnořené stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="5938b-238">Create a content page named `Alternate.aspx` in the `NestedMasterPages` folder and bind it to the `SimpleNestedAlternate.master` nested master page.</span></span> <span data-ttu-id="5938b-239">Přidejte text "Hello, z alternativní!"</span><span class="sxs-lookup"><span data-stu-id="5938b-239">Add the text, "Hello, from Alternate!"</span></span> <span data-ttu-id="5938b-240">v ovládacím prvku obsahu, která odpovídá `MainContent`.</span><span class="sxs-lookup"><span data-stu-id="5938b-240">in the Content control that corresponds to `MainContent`.</span></span> <span data-ttu-id="5938b-241">Obrázek 7 znázorňuje `Alternate.aspx` při zobrazení v návrháři sady Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="5938b-241">Figure 7 shows `Alternate.aspx` when viewed through the Visual Studio Designer.</span></span>


<span data-ttu-id="5938b-242">[![Alternate.aspx je vázána na stránku předlohy SimpleNestedAlternate.master](nested-master-pages-cs/_static/image20.png)](nested-master-pages-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="5938b-242">[![Alternate.aspx is Bound to the SimpleNestedAlternate.master Master Page](nested-master-pages-cs/_static/image20.png)](nested-master-pages-cs/_static/image19.png)</span></span>

<span data-ttu-id="5938b-243">**Obrázek 07**: `Alternate.aspx` je vázána `SimpleNestedAlternate.master` – stránka předlohy ([Kliknutím zobrazit obrázek v plné velikosti](nested-master-pages-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="5938b-243">**Figure 07**: `Alternate.aspx` is Bound to the `SimpleNestedAlternate.master` Master Page ([Click to view full-size image](nested-master-pages-cs/_static/image21.png))</span></span>


<span data-ttu-id="5938b-244">Porovnejte návrháře na obrázku 7 do návrháře na obrázku 6.</span><span class="sxs-lookup"><span data-stu-id="5938b-244">Compare the Designer in Figure 7 to the Designer in Figure 6.</span></span> <span data-ttu-id="5938b-245">Obě obsahu stránky sdílet se stejné rozvržení definované v nejvyšší úrovně stránky předlohy (`Simple.master`), konkrétně název "Vnořené hlavní stránky kurzu (jednoduchý)".</span><span class="sxs-lookup"><span data-stu-id="5938b-245">Both content pages share the same layout defined in the top-level master page (`Simple.master`), namely the "Nested Master Pages Tutorial (Simple)" title.</span></span> <span data-ttu-id="5938b-246">Ještě mají odlišné obsah definované v jejich nadřazené hlavní stránky - text "Hello, z SimpleNested!"</span><span class="sxs-lookup"><span data-stu-id="5938b-246">Yet both have distinct content defined in their parent master pages - the text "Hello, from SimpleNested!"</span></span> <span data-ttu-id="5938b-247">Obrázek 6 a "Hello, z SimpleNestedAlternate!"</span><span class="sxs-lookup"><span data-stu-id="5938b-247">in Figure 6 and "Hello, from SimpleNestedAlternate!"</span></span> <span data-ttu-id="5938b-248">na obrázku 7.</span><span class="sxs-lookup"><span data-stu-id="5938b-248">in Figure 7.</span></span> <span data-ttu-id="5938b-249">Udělena, zde tyto rozdíly jsou trivial, ale můžete rozšířit tento příklad zahrnout smysluplnější rozdíly.</span><span class="sxs-lookup"><span data-stu-id="5938b-249">Granted, these differences here are trivial, but you could extend this example to include more meaningful differences.</span></span> <span data-ttu-id="5938b-250">Například `SimpleNested.master` stránky může zahrnovat nabídka s možnostmi, které jsou specifické pro jeho stránky obsahu, zatímco `SimpleNestedAlternate.master` může mít informace týkající se stránky obsahu, které svázat s ní.</span><span class="sxs-lookup"><span data-stu-id="5938b-250">For instance, the `SimpleNested.master` page might include a menu with options specific to its content pages, whereas `SimpleNestedAlternate.master` might have information pertinent to the content pages that bind to it.</span></span>

<span data-ttu-id="5938b-251">Představte si teď jsme musel provést změnu zastřešující rozložení webu.</span><span class="sxs-lookup"><span data-stu-id="5938b-251">Now, imagine that we needed to make a change to the overarching site layout.</span></span> <span data-ttu-id="5938b-252">Představte si například, že jsme chtěli přidat seznam běžných odkazy na všechny stránky obsahu.</span><span class="sxs-lookup"><span data-stu-id="5938b-252">For example, imagine that we wanted to add a list of common links to all content pages.</span></span> <span data-ttu-id="5938b-253">K tomu budeme aktualizovat hlavní stránku nejvyšší úrovně `Simple.master`.</span><span class="sxs-lookup"><span data-stu-id="5938b-253">To accomplish this we update the top-level master page, `Simple.master`.</span></span> <span data-ttu-id="5938b-254">Všechny změny existuje se okamžitě projeví v jeho vnořené hlavní stránky a rozšíření, jejich obsahu stránky.</span><span class="sxs-lookup"><span data-stu-id="5938b-254">Any changes there are immediately reflected in its nested master pages and, by extension, their content pages.</span></span>

<span data-ttu-id="5938b-255">K předvedení usnadnění, pomocí kterého jsme zastřešující lokality rozložení změnit, otevřete `Simple.master` hlavní stránky a přidejte následující kód mezi `topContent` a `mainContent` `<div>` prvky:</span><span class="sxs-lookup"><span data-stu-id="5938b-255">To demonstrate the ease with which we can change the overarching site layout, open the `Simple.master` master page and add the following markup between the `topContent` and `mainContent` `<div>` elements:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample7.aspx)]

<span data-ttu-id="5938b-256">Tento postup přidá dva odkazy do horní části každé stránce, která se sváže s `Simple.master`, `SimpleNested.master`, nebo `SimpleNestedAlternate.master`; tyto změny použít na všechny vnořené hlavní stránky a jejich obsahu stránky okamžitě.</span><span class="sxs-lookup"><span data-stu-id="5938b-256">This adds two links to the top of every page that binds to `Simple.master`, `SimpleNested.master`, or `SimpleNestedAlternate.master`; these changes apply to all nested master pages and their content pages immediately.</span></span> <span data-ttu-id="5938b-257">Obrázek 8 ukazuje `Alternate.aspx` při zobrazení prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="5938b-257">Figure 8 shows `Alternate.aspx` when viewed through a browser.</span></span> <span data-ttu-id="5938b-258">Poznámka: Přidání odkazů v horní části stránky (ve srovnání s obrázek 7).</span><span class="sxs-lookup"><span data-stu-id="5938b-258">Note the addition of the links at the top of the page (compared to Figure 7).</span></span>


<span data-ttu-id="5938b-259">[![Změnit na hlavní stránku nejvyšší úrovně se okamžitě projeví v jeho vnořené hlavní stránky a jejich stránky obsahu](nested-master-pages-cs/_static/image23.png)](nested-master-pages-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="5938b-259">[![Changed to the Top-Level Master Page are Immediately Reflected in its Nested Master Pages and Their Content Pages](nested-master-pages-cs/_static/image23.png)](nested-master-pages-cs/_static/image22.png)</span></span>

<span data-ttu-id="5938b-260">**Obrázek 08**: změnit na hlavní stránku nejvyšší úrovně se okamžitě projeví v jeho vnořené hlavní stránky a jejich stránky obsahu ([Kliknutím zobrazit obrázek v plné velikosti](nested-master-pages-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="5938b-260">**Figure 08**: Changed to the Top-Level Master Page are Immediately Reflected in its Nested Master Pages and Their Content Pages ([Click to view full-size image](nested-master-pages-cs/_static/image24.png))</span></span>


## <a name="using-a-nested-master-page-for-the-administration-section"></a><span data-ttu-id="5938b-261">Použití vnořených stránky předlohy pro části</span><span class="sxs-lookup"><span data-stu-id="5938b-261">Using a Nested Master Page for the Administration Section</span></span>

<span data-ttu-id="5938b-262">V tomto okamžiku jste prohlédli výhod vnořené hlavní stránky a viděli, jak vytvořit a použít ji v aplikaci ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="5938b-262">At this point we have looked at the advantages of nested master pages and have seen how to create and use them in an ASP.NET application.</span></span> <span data-ttu-id="5938b-263">V příkladech v krocích 1, 2 a 3, ale podílejí vytváření novou stránku předlohy nejvyšší úrovně, nové vnořené hlavní stránky a nové stránky obsahu.</span><span class="sxs-lookup"><span data-stu-id="5938b-263">The examples in Steps 1, 2, and 3, however, involved creating a new top-level master page, new nested master pages, and new content pages.</span></span> <span data-ttu-id="5938b-264">Co o přidání nové vnořené hlavní stránky na web s existující nejvyšší úrovně stránky předlohy a stránky obsahu?</span><span class="sxs-lookup"><span data-stu-id="5938b-264">What about adding a new nested master page to a website with an existing top-level master page and content pages?</span></span>

<span data-ttu-id="5938b-265">Vnořené hlavní stránky integraci do stávajícího webu a jeho přidružením k existující stránky obsahu vyžaduje trochu další úsilí než od začátku.</span><span class="sxs-lookup"><span data-stu-id="5938b-265">Integrating a nested master page into an existing website and associating it with existing content pages requires a bit more effort than starting from scratch.</span></span> <span data-ttu-id="5938b-266">Kroky 4, 5, 6 a 7 prozkoumat tyto problémy, jako jsme posílení naše ukázkové aplikace, aby zahrnovala nové vnořené hlavní stránky s názvem `AdminNested.master` , obsahuje pokyny pro správce a je používána stránky ASP.NET v `~/Admin` složky.</span><span class="sxs-lookup"><span data-stu-id="5938b-266">Steps 4, 5, 6, and 7 explore these challenges as we augment our demo application to include a new nested master page named `AdminNested.master` that contains instructions for the administrator and is used by the ASP.NET pages in the `~/Admin` folder.</span></span>

<span data-ttu-id="5938b-267">Integrace vnořené hlavní stránky do naší ukázkovou aplikaci zavádí následující mezní hodnoty:</span><span class="sxs-lookup"><span data-stu-id="5938b-267">Integrating a nested master page into our demo application introduces the following hurdles:</span></span>

- <span data-ttu-id="5938b-268">Existující obsah stránky v `~/Admin` složky mají určité očekávání z jejich stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="5938b-268">The existing content pages in the `~/Admin` folder have certain expectations from their master page.</span></span> <span data-ttu-id="5938b-269">Pro začátek očekávat určité ovládacích prvků ContentPlaceHolder nacházet.</span><span class="sxs-lookup"><span data-stu-id="5938b-269">For starters, they expect certain ContentPlaceHolder controls to be present.</span></span> <span data-ttu-id="5938b-270">Kromě toho `~/Admin/AddProduct.aspx` a `~/Admin/Products.aspx` stránky volat veřejné stránky předlohy `RefreshRecentProductsGrid` nastavena metoda, jeho `GridMessageText` vlastnost, nebo mají obslužné rutiny události pro jeho `PricesDoubled` událostí.</span><span class="sxs-lookup"><span data-stu-id="5938b-270">Furthermore, the `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages call the master page's public `RefreshRecentProductsGrid` method, set its `GridMessageText` property, or have an event handler for its `PricesDoubled` event.</span></span> <span data-ttu-id="5938b-271">V důsledku toho naše vnořené hlavní stránky musíte zadat stejné ContentPlaceHolders a veřejné členy.</span><span class="sxs-lookup"><span data-stu-id="5938b-271">Consequently, our nested master page must provide the same ContentPlaceHolders and public members.</span></span>
- <span data-ttu-id="5938b-272">V předchozím kurzu jsme rozšířené `BasePage` třída dynamicky nastavit `Page` objektu `MasterPageFile` vlastnost podle proměnné relace.</span><span class="sxs-lookup"><span data-stu-id="5938b-272">In the preceding tutorial we enhanced the `BasePage` class to dynamically set the `Page` object's `MasterPageFile` property based on a Session variable.</span></span> <span data-ttu-id="5938b-273">Jak na podporujeme dynamické stránky předlohy při použití vnořené hlavní stránky?</span><span class="sxs-lookup"><span data-stu-id="5938b-273">How to we support dynamic master pages when using nested master pages?</span></span>

<span data-ttu-id="5938b-274">Tyto dva problémy budou surface jako jsme vytvoření vnořené hlavní stránky a použít ho z existujících stránek s obsahem.</span><span class="sxs-lookup"><span data-stu-id="5938b-274">These two challenges will surface as we build the nested master page and use it from our existing content pages.</span></span> <span data-ttu-id="5938b-275">Jsme budete prozkoumat a překonat tyto problémy při jejich vzniku.</span><span class="sxs-lookup"><span data-stu-id="5938b-275">We'll investigate and surmount these issues as they arise.</span></span>

## <a name="step-4-creating-the-nested-master-page"></a><span data-ttu-id="5938b-276">Krok 4: Vytvoření vnořené stránky předlohy</span><span class="sxs-lookup"><span data-stu-id="5938b-276">Step 4: Creating the Nested Master Page</span></span>

<span data-ttu-id="5938b-277">Naše první krokem je vytvoření vnořené hlavní stránky má být používána stránky v části Správa.</span><span class="sxs-lookup"><span data-stu-id="5938b-277">Our first task is to create the nested master page to be used by the pages in the Administration section.</span></span> <span data-ttu-id="5938b-278">Jak jsme viděli v kroku 2, při přidání nového vnořené hlavní stránky, je potřeba zadat vnořené hlavní stránky nadřazená stránka předlohy.</span><span class="sxs-lookup"><span data-stu-id="5938b-278">As we saw in Step 2, when adding a new nested master page we need to specify the nested master page's parent master page.</span></span> <span data-ttu-id="5938b-279">Dva hlavní stránky nejvyšší úrovně, ale: `Site.master` a `Alternate.master`.</span><span class="sxs-lookup"><span data-stu-id="5938b-279">But we have two top-level master pages: `Site.master` and `Alternate.master`.</span></span> <span data-ttu-id="5938b-280">Odvolání, který jsme vytvořili `Alternate.master` v předchozí kurzu a napsali v kódu `BasePage` třídu, která nastavení stránky objektu `MasterPageFile` vlastnost za běhu, aby buď `Site.master` nebo `Alternate.master` v závislosti na hodnotě `MyMasterPage` Proměnné relace.</span><span class="sxs-lookup"><span data-stu-id="5938b-280">Recall that we created `Alternate.master` in the preceding tutorial and wrote code in the `BasePage` class that set the Page object's `MasterPageFile` property at runtime to either `Site.master` or `Alternate.master` depending on the value of the `MyMasterPage` Session variable.</span></span>

<span data-ttu-id="5938b-281">Jak jsme nakonfigurovat naše vnořené hlavní stránky tak, aby používala na příslušnou stránku nejvyšší úrovně hlavní?</span><span class="sxs-lookup"><span data-stu-id="5938b-281">How do we configure our nested master page so that it uses the appropriate top-level master page?</span></span> <span data-ttu-id="5938b-282">Máme dvě možnosti:</span><span class="sxs-lookup"><span data-stu-id="5938b-282">We have two options:</span></span>

- <span data-ttu-id="5938b-283">Vytvořte dva vnořené hlavní stránky, `AdminNestedSite.master` a `AdminNestedAlternate.master`a navázat je na nejvyšší úrovni hlavní stránky `Site.master` a `Alternate.master`, v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="5938b-283">Create two nested master pages, `AdminNestedSite.master` and `AdminNestedAlternate.master`, and bind them to the top-level master pages `Site.master` and `Alternate.master`, respectively.</span></span> <span data-ttu-id="5938b-284">V `BasePage`, pak doporučujeme nastavit `Page` objektu `MasterPageFile` na příslušnou vnořené hlavní stránku.</span><span class="sxs-lookup"><span data-stu-id="5938b-284">In `BasePage`, then, we'd set the `Page` object's `MasterPageFile` to the appropriate nested master page.</span></span>
- <span data-ttu-id="5938b-285">Vytvoření jednoho vnořené hlavní stránky a mít stránky obsahu používat tento konkrétní stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="5938b-285">Create a single nested master page and have the content pages use this particular master page.</span></span> <span data-ttu-id="5938b-286">Poté, v době běhu by potřebujeme nastavení vnořené hlavní stránky `MasterPageFile` vlastnosti k odpovídající nejvyšší úrovně hlavní stránce za běhu.</span><span class="sxs-lookup"><span data-stu-id="5938b-286">Then, at runtime, we'd need to set the nested master page's `MasterPageFile` property to the appropriate top-level master page at runtime.</span></span> <span data-ttu-id="5938b-287">(Jak je nyní, může být započítáno, hlavní stránky také mít `MasterPageFile` vlastnost.)</span><span class="sxs-lookup"><span data-stu-id="5938b-287">(As you might have figured out by now, master pages also have a `MasterPageFile` property.)</span></span>

<span data-ttu-id="5938b-288">Umožňuje použít druhou možnost.</span><span class="sxs-lookup"><span data-stu-id="5938b-288">Let's use the second option.</span></span> <span data-ttu-id="5938b-289">Vytvoření jednoho vnořené hlavní stránky souboru v `~/Admin` složku s názvem `AdminNested.master`.</span><span class="sxs-lookup"><span data-stu-id="5938b-289">Create a single nested master page file in the `~/Admin` folder named `AdminNested.master`.</span></span> <span data-ttu-id="5938b-290">Protože obě `Site.master` a `Alternate.master` mají stejnou sadu ovládacích prvků ContentPlaceHolder, nezávisle na tom, jaké stránky předlohy, můžete vázat, i když I doporučujeme vytvořte mu vazbu k `Site.master` pro saké na konzistence.</span><span class="sxs-lookup"><span data-stu-id="5938b-290">Because both `Site.master` and `Alternate.master` have the same set of ContentPlaceHolder controls, it doesn't matter what master page you bind it to, although I encourage you to bind it to `Site.master` for consistency's sake.</span></span>


<span data-ttu-id="5938b-291">[![Přidejte do složky ~/Admin vnořené stránky předlohy.](nested-master-pages-cs/_static/image26.png)](nested-master-pages-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="5938b-291">[![Add a Nested Master Page to the ~/Admin Folder.](nested-master-pages-cs/_static/image26.png)](nested-master-pages-cs/_static/image25.png)</span></span>

<span data-ttu-id="5938b-292">**Obrázek 09**: přidejte vnořené hlavní stránky `~/Admin` složky.</span><span class="sxs-lookup"><span data-stu-id="5938b-292">**Figure 09**: Add a Nested Master Page to the `~/Admin` Folder.</span></span> <span data-ttu-id="5938b-293">([Kliknutím zobrazit obrázek v plné velikosti](nested-master-pages-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="5938b-293">([Click to view full-size image](nested-master-pages-cs/_static/image27.png))</span></span>


<span data-ttu-id="5938b-294">Protože vnořené hlavní stránky je vázána na hlavní stránku s čtyři ovládací prvky ContentPlaceHolder, Visual Studio. přidá čtyři ovládací prvky pro počáteční značka nový soubor vnořené hlavní stránky obsahu.</span><span class="sxs-lookup"><span data-stu-id="5938b-294">Because the nested master page is bound to a master page with four ContentPlaceHolder controls, Visual Studio adds four Content controls to the new nested master page file's initial markup.</span></span> <span data-ttu-id="5938b-295">Jako jsme provedli v kroku 2 a 3, přidání ovládacího prvku ContentPlaceHolder v každý ovládací prvek předá stejným názvem jako má prvek ContentPlaceHolder nejvyšší úrovně stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="5938b-295">Like we did in Steps 2 and 3, add a ContentPlaceHolder control in each Content control, giving it the same name as the top-level master page's ContentPlaceHolder control.</span></span> <span data-ttu-id="5938b-296">Také přidejte následující kód do ovládacího prvku obsahu, která odpovídá `MainContent` ContentPlaceHolder:</span><span class="sxs-lookup"><span data-stu-id="5938b-296">Also add the following markup to the Content control that corresponds to the `MainContent` ContentPlaceHolder:</span></span>


[!code-html[Main](nested-master-pages-cs/samples/sample8.html)]

<span data-ttu-id="5938b-297">V dalším kroku definovat `instructions` v třídy CSS `Styles.css` a `AlternateStyles.css` soubory šablon stylů CSS.</span><span class="sxs-lookup"><span data-stu-id="5938b-297">Next, define the `instructions` CSS class in the `Styles.css` and `AlternateStyles.css` CSS files.</span></span> <span data-ttu-id="5938b-298">Následující pravidla šablon stylů CSS způsobit elementů HTML stylem `instructions` třída zobrazuje barvu pozadí světla žlutý a černá, plnou ohraničení:</span><span class="sxs-lookup"><span data-stu-id="5938b-298">The following CSS rules cause HTML elements styled with the `instructions` class to be displayed with a light yellow background color and a black, solid border:</span></span>


[!code-css[Main](nested-master-pages-cs/samples/sample9.css)]

<span data-ttu-id="5938b-299">Protože tyto značky se přidal do vnořené hlavní stránky, se zobrazí pouze v těchto stránek, které pomocí této vnořené hlavní stránky (konkrétně, stránky v části Správa).</span><span class="sxs-lookup"><span data-stu-id="5938b-299">Because this markup has been added to the nested master page, it will only appear in those pages that use this nested master page (namely, the pages in the Administration section).</span></span>

<span data-ttu-id="5938b-300">Po provedení těchto dodatky na hlavní stránku vnořené, jeho deklarativní značek by měl vypadat takto:</span><span class="sxs-lookup"><span data-stu-id="5938b-300">After making these additions to your nested master page, its declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample10.aspx)]

<span data-ttu-id="5938b-301">Všimněte si, že každý ovládací prvek má prvek ContentPlaceHolder a že ovládací prvky ContentPlaceHolder `ID` vlastnosti přiřazené stejné hodnoty jako odpovídající ovládacích prvků ContentPlaceHolder na hlavní stránce nejvyšší úrovně.</span><span class="sxs-lookup"><span data-stu-id="5938b-301">Note that each Content control has a ContentPlaceHolder control and that the ContentPlaceHolder controls' `ID` properties are assigned the same values as the corresponding ContentPlaceHolder controls in the top-level master page.</span></span> <span data-ttu-id="5938b-302">Kromě toho se zobrazí v části konkrétní značku správy `MainContent` ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="5938b-302">Moreover, the Administration section-specific markup appears in the `MainContent` ContentPlaceHolder.</span></span>

<span data-ttu-id="5938b-303">Obrázek 10 ukazuje `AdminNested.master` vnořené hlavní stránky při zobrazení v návrháři Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="5938b-303">Figure 10 shows the `AdminNested.master` nested master page when viewed through Visual Studio's Designer.</span></span> <span data-ttu-id="5938b-304">Zobrazí se pokyny žlutý pole v horní části `MainContent` obsahu ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="5938b-304">You can see the instructions in the yellow box at the top of the `MainContent` Content control.</span></span>


<span data-ttu-id="5938b-305">[![Vnořené stránky předlohy rozšiřuje nejvyšší úrovně stránky předlohy zahrnout pokyny pro správce.](nested-master-pages-cs/_static/image29.png)](nested-master-pages-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="5938b-305">[![The Nested Master Page Extends the Top-Level Master Page to Include Instructions for the Administrator.](nested-master-pages-cs/_static/image29.png)](nested-master-pages-cs/_static/image28.png)</span></span>

<span data-ttu-id="5938b-306">**Obrázek 10**: vnořené stránky předlohy rozšiřuje nejvyšší úrovně stránky předlohy zahrnout pokyny pro správce.</span><span class="sxs-lookup"><span data-stu-id="5938b-306">**Figure 10**: The Nested Master Page Extends the Top-Level Master Page to Include Instructions for the Administrator.</span></span> <span data-ttu-id="5938b-307">([Kliknutím zobrazit obrázek v plné velikosti](nested-master-pages-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="5938b-307">([Click to view full-size image](nested-master-pages-cs/_static/image30.png))</span></span>


## <a name="step-5-updating-the-existing-content-pages-to-use-the-new-nested-master-page"></a><span data-ttu-id="5938b-308">Krok 5: Aktualizace existující stránky obsahu používat nové vnořené stránky předlohy</span><span class="sxs-lookup"><span data-stu-id="5938b-308">Step 5: Updating the Existing Content Pages to Use the New Nested Master Page</span></span>

<span data-ttu-id="5938b-309">Kdykoliv přidáme do části Správa musíme vytvořte mu vazbu k nové stránky obsahu `AdminNested.master` stránky předlohy jsme právě vytvořili.</span><span class="sxs-lookup"><span data-stu-id="5938b-309">Anytime we add a new content page to the Administration section we need to bind it to the `AdminNested.master` master page we just created.</span></span> <span data-ttu-id="5938b-310">Ale co o existující stránky obsahu?</span><span class="sxs-lookup"><span data-stu-id="5938b-310">But what about the existing content pages?</span></span> <span data-ttu-id="5938b-311">V současné době jsou odvozeny od všechny stránky obsahu v lokalitě `BasePage` třídy, která prostřednictvím kódu programu nastaví hlavní stránky obsahu stránce za běhu.</span><span class="sxs-lookup"><span data-stu-id="5938b-311">Currently, all content pages in the site derive from the `BasePage` class, which programmatically sets the content page's master page at runtime.</span></span> <span data-ttu-id="5938b-312">Nejedná se o chování, které má být obsah stránky v části Správa.</span><span class="sxs-lookup"><span data-stu-id="5938b-312">This is not the behavior we want for the content pages in the Administration section.</span></span> <span data-ttu-id="5938b-313">Místo toho chceme, aby tyto stránek obsahu vždy nutné použít `AdminNested.master` stránky.</span><span class="sxs-lookup"><span data-stu-id="5938b-313">Instead, we want these content pages to always use the `AdminNested.master` page.</span></span> <span data-ttu-id="5938b-314">Je zodpovědností vnořené hlavní stránky zvolte právo nejvyšší úrovně obsahu stránce za běhu.</span><span class="sxs-lookup"><span data-stu-id="5938b-314">It will be the responsibility of the nested master page to choose the right top-level content page at runtime.</span></span>

<span data-ttu-id="5938b-315">Nejlepší způsob, jak dosáhnout to požadovaných chování je vytvořte novou třídu vlastní základní stránky s názvem `AdminBasePage` který rozšiřuje `BasePage` třídy.</span><span class="sxs-lookup"><span data-stu-id="5938b-315">To best way to achieve this desired behavior is to create a new custom base page class named `AdminBasePage` that extends the `BasePage` class.</span></span> <span data-ttu-id="5938b-316">`AdminBasePage` potom můžete přepsat `SetMasterPageFile` a nastavte `Page` objektu `MasterPageFile` na hodnotu pevně "~ / Admin/AdminNested.master".</span><span class="sxs-lookup"><span data-stu-id="5938b-316">`AdminBasePage` can then override the `SetMasterPageFile` and set the `Page` object's `MasterPageFile` to the hard-coded value "~/Admin/AdminNested.master".</span></span> <span data-ttu-id="5938b-317">Tímto způsobem žádné stránce, která je odvozena od `AdminBasePage` použije `AdminNested.master`, zatímco žádné stránce, která je odvozena od `BasePage` bude mít jeho `MasterPageFile` vlastnost nastavit dynamicky buď "~ / Site.master" nebo "~ / Alternate.master" založené na hodnotu `MyMasterPage` Proměnné relace.</span><span class="sxs-lookup"><span data-stu-id="5938b-317">In this way, any page that derives from `AdminBasePage` will use `AdminNested.master`, whereas any page that derives from `BasePage` will have its `MasterPageFile` property set dynamically to either "~/Site.master" or "~/Alternate.master" based on the value of the `MyMasterPage` Session variable.</span></span>

<span data-ttu-id="5938b-318">Začněte přidáním nového souboru třídy `App_Code` složku s názvem `AdminBasePage.cs`.</span><span class="sxs-lookup"><span data-stu-id="5938b-318">Start by adding a new class file to the `App_Code` folder named `AdminBasePage.cs`.</span></span> <span data-ttu-id="5938b-319">Mít `AdminBasePage` rozšířit `BasePage` a potom přepsáním `SetMasterPageFile` metoda.</span><span class="sxs-lookup"><span data-stu-id="5938b-319">Have `AdminBasePage` extend `BasePage` and then override the `SetMasterPageFile` method.</span></span> <span data-ttu-id="5938b-320">V dané metody přiřadit `MasterPageFile` hodnota "~ / Admin/AdminNested.master".</span><span class="sxs-lookup"><span data-stu-id="5938b-320">In that method assign the `MasterPageFile` the value "~/Admin/AdminNested.master".</span></span> <span data-ttu-id="5938b-321">Po provedení těchto změn třídě soubor by měl vypadat podobně jako následující:</span><span class="sxs-lookup"><span data-stu-id="5938b-321">After making these changes your class file should look similar to the following:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample11.cs)]

<span data-ttu-id="5938b-322">Nyní potřebujeme mít existující stránky obsahu v části Správa části odvozena od `AdminBasePage` místo `BasePage`.</span><span class="sxs-lookup"><span data-stu-id="5938b-322">We now need to have the existing content pages in the Administration section derive from `AdminBasePage` instead of `BasePage`.</span></span> <span data-ttu-id="5938b-323">Přejděte na soubor třídy kódu pro každé obsahu stránce v `~/Admin` složky a tuto změnu provést.</span><span class="sxs-lookup"><span data-stu-id="5938b-323">Go to the code-behind class file for each content page in the `~/Admin` folder and make this change.</span></span> <span data-ttu-id="5938b-324">Například v `~/Admin/Default.aspx` by způsobila změnu deklaraci třídy kódu z:</span><span class="sxs-lookup"><span data-stu-id="5938b-324">For example, in `~/Admin/Default.aspx` you'd change the code-behind class declaration from:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample12.cs)]

<span data-ttu-id="5938b-325">Do:</span><span class="sxs-lookup"><span data-stu-id="5938b-325">To:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample13.cs)]

<span data-ttu-id="5938b-326">Znázorňuje obrázek 11 jak nejvyšší úrovně stránky předlohy (`Site.master` nebo `Alternate.master`), vnořené hlavní stránky (`AdminNested.master`), a na stránkách obsahu části správy souvisí.</span><span class="sxs-lookup"><span data-stu-id="5938b-326">Figure 11 depicts how the top-level master page (`Site.master` or `Alternate.master`), the nested master page (`AdminNested.master`), and the Administration section content pages relate to one another.</span></span>


<span data-ttu-id="5938b-327">[![Vnořené stránky předlohy definuje obsahu specifické pro stránky v části Správa](nested-master-pages-cs/_static/image32.png)](nested-master-pages-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="5938b-327">[![The Nested Master Page Defines Content Specific to the Pages in the Administration Section](nested-master-pages-cs/_static/image32.png)](nested-master-pages-cs/_static/image31.png)</span></span>

<span data-ttu-id="5938b-328">**Obrázek 11**: vnořené hlavní stránky definuje obsahu specifické pro stránky v části Správa ([Kliknutím zobrazit obrázek v plné velikosti](nested-master-pages-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="5938b-328">**Figure 11**: The Nested Master Page Defines Content Specific to the Pages in the Administration Section ([Click to view full-size image](nested-master-pages-cs/_static/image33.png))</span></span>


## <a name="step-6-mirroring-the-master-pages-public-methods-and-properties"></a><span data-ttu-id="5938b-329">Krok 6: Zrcadlení veřejné metody a vlastnosti stránky předlohy</span><span class="sxs-lookup"><span data-stu-id="5938b-329">Step 6: Mirroring the Master Page's Public Methods and Properties</span></span>

<span data-ttu-id="5938b-330">Odvolat, který `~/Admin/AddProduct.aspx` a `~/Admin/Products.aspx` stránky komunikovat prostřednictvím kódu programu se stránkou předlohy: `~/Admin/AddProduct.aspx` volání stránky předlohy je veřejný `RefreshRecentProductsGrid` metoda a nastaví její `GridMessageText` vlastnost; `~/Admin/Products.aspx` má obslužné rutiny události pro `PricesDoubled` událostí.</span><span class="sxs-lookup"><span data-stu-id="5938b-330">Recall that the `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages interact programmatically with the master page: `~/Admin/AddProduct.aspx` calls the master page's public `RefreshRecentProductsGrid` method and sets its `GridMessageText` property; `~/Admin/Products.aspx` has an event handler for the `PricesDoubled` event.</span></span> <span data-ttu-id="5938b-331">V předchozím kurzu jsme vytvořili abstraktní `BaseMasterPage` třídu, která definována tyto veřejné členy.</span><span class="sxs-lookup"><span data-stu-id="5938b-331">In the preceding tutorial we created an abstract `BaseMasterPage` class that defined these public members.</span></span>

<span data-ttu-id="5938b-332">`~/Admin/AddProduct.aspx` a `~/Admin/Products.aspx` stránky předpokládá, že jejich hlavní stránka odvozuje od `BaseMasterPage` třídy.</span><span class="sxs-lookup"><span data-stu-id="5938b-332">The `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages assume that their master page derives from the `BaseMasterPage` class.</span></span> <span data-ttu-id="5938b-333">`AdminNested.master` Stránky, ale aktuálně rozšiřuje `System.Web.UI.MasterPage` třídy.</span><span class="sxs-lookup"><span data-stu-id="5938b-333">The `AdminNested.master` page, however, currently extends the `System.Web.UI.MasterPage` class.</span></span> <span data-ttu-id="5938b-334">V důsledku toho při návštěvě `~/Admin/Products.aspx` `InvalidCastException` je vyvolána se zprávou: "nelze vrátit objekt typu ' ASP.admin\_adminnested\_hlavní ' na typ 'BaseMasterPage'."</span><span class="sxs-lookup"><span data-stu-id="5938b-334">As a result, when visiting `~/Admin/Products.aspx` an `InvalidCastException` is thrown with the message: "Unable to cast object of type 'ASP.admin\_adminnested\_master' to type 'BaseMasterPage'."</span></span>

<span data-ttu-id="5938b-335">Chcete-li tomu je potřeba mít `AdminNested.master` rozšířit třídu kódem v pozadí `BaseMasterPage`.</span><span class="sxs-lookup"><span data-stu-id="5938b-335">To fix this we need to have the `AdminNested.master` code-behind class extend `BaseMasterPage`.</span></span> <span data-ttu-id="5938b-336">Aktualizujte deklaraci třídy kódu vnořené hlavní stránky z:</span><span class="sxs-lookup"><span data-stu-id="5938b-336">Update the nested master page's code-behind class declaration from:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample14.cs)]

<span data-ttu-id="5938b-337">Do:</span><span class="sxs-lookup"><span data-stu-id="5938b-337">To:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample15.cs)]

<span data-ttu-id="5938b-338">Máme ještě nejsou Hotovo.</span><span class="sxs-lookup"><span data-stu-id="5938b-338">We're not done yet.</span></span> <span data-ttu-id="5938b-339">Protože `BaseMasterPage` je abstraktní třída, musíme přepsat `abstract` členy, `RefreshRecentProductsGrid` a `GridMessageText`.</span><span class="sxs-lookup"><span data-stu-id="5938b-339">Because the `BaseMasterPage` class is abstract, we need to override the `abstract` members, `RefreshRecentProductsGrid` and `GridMessageText`.</span></span> <span data-ttu-id="5938b-340">Tito členové jsou používány nejvyšší úrovně hlavní stránky k aktualizaci jejich uživatelské rozhraní.</span><span class="sxs-lookup"><span data-stu-id="5938b-340">These members are used by the top-level master pages to update their user interfaces.</span></span> <span data-ttu-id="5938b-341">(Ve skutečnosti, jen `Site.master` stránky předlohy používá tyto metody, i když obě nejvyšší úrovně hlavní stránky implementovat tyto metody vzhledem k tomu, jak rozšířit `BaseMasterPage`.)</span><span class="sxs-lookup"><span data-stu-id="5938b-341">(Actually, only the `Site.master` master page uses these methods, although both top-level master pages implement these methods, since both extend `BaseMasterPage`.)</span></span>

<span data-ttu-id="5938b-342">Při musíme implementovat tito členové v `AdminNested.master`, tyto implementace udělat stačí jednoduše volání stejného člena v nejvyšší úrovně stránky předlohy používané Vnořené stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="5938b-342">While we need to implement these members in `AdminNested.master`, all these implementations need to do is simply call the same member in the top-level master page used by the nested master page.</span></span> <span data-ttu-id="5938b-343">Například když obsahu stránce v části Správa volání vnořené hlavní stránky `RefreshRecentProductsGrid` metodou, všechny vnořené hlavní stránky je potřeba udělat, je, pak, volejte `Site.master` nebo `Alternate.master`na `RefreshRecentProductsGrid` metoda.</span><span class="sxs-lookup"><span data-stu-id="5938b-343">For instance, when a content page in the Administration section calls the nested master page's `RefreshRecentProductsGrid` method, all the nested master page needs to do is, in turn, call `Site.master` or `Alternate.master`'s `RefreshRecentProductsGrid` method.</span></span>

<span data-ttu-id="5938b-344">Jak toho docílit, začněte přidáním následující `@MasterType` direktivy do horní části `AdminNested.master`:</span><span class="sxs-lookup"><span data-stu-id="5938b-344">To achieve this, start by adding the following `@MasterType` directive to the top of `AdminNested.master`:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample16.aspx)]

<span data-ttu-id="5938b-345">Odvolat, který `@MasterType` – direktiva přidá vlastnost silně typované třídy kódu s názvem `Master`.</span><span class="sxs-lookup"><span data-stu-id="5938b-345">Recall that the `@MasterType` directive adds a strongly-typed property to the code-behind class named `Master`.</span></span> <span data-ttu-id="5938b-346">Potom přepsat `RefreshRecentProductsGrid` a `GridMessageText` členy a jednoduše delegovat volání `Master`je odpovídající metodu:</span><span class="sxs-lookup"><span data-stu-id="5938b-346">Then override the `RefreshRecentProductsGrid` and `GridMessageText` members and simply delegate the call to the `Master`'s corresponding method:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample17.cs)]

<span data-ttu-id="5938b-347">S tímto kódem na místě byste měli navštívit a používat stránky obsahu v části Správa.</span><span class="sxs-lookup"><span data-stu-id="5938b-347">With this code in place, you should be able to visit and use the content pages in the Administration section.</span></span> <span data-ttu-id="5938b-348">Obrázek 12 znázorňuje `~/Admin/Products.aspx` v případě, že zobrazit pomocí prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="5938b-348">Figure 12 shows the `~/Admin/Products.aspx` page when viewed through a browser.</span></span> <span data-ttu-id="5938b-349">Jak vidíte, stránka obsahuje pole pokyny správy, která je definována v vnořené stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="5938b-349">As you can see, the page includes the Administration Instructions box, which is defined in the nested master page.</span></span>


<span data-ttu-id="5938b-350">[![Obsahu stránky v části Správa obsahují pokyny v horní části každé stránce](nested-master-pages-cs/_static/image35.png)](nested-master-pages-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="5938b-350">[![The Content Pages in the Administration Section Include Instructions at the Top of Each Page](nested-master-pages-cs/_static/image35.png)](nested-master-pages-cs/_static/image34.png)</span></span>

<span data-ttu-id="5938b-351">**Obrázek 12**: obsahu stránky v pokyny zahrnují správu část v horní části každé stránky ([Kliknutím zobrazit obrázek v plné velikosti](nested-master-pages-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="5938b-351">**Figure 12**: The Content Pages in the Administration Section Include Instructions at the Top of Each Page ([Click to view full-size image](nested-master-pages-cs/_static/image36.png))</span></span>


## <a name="step-7-using-the-appropriate-top-level-master-page-at-runtime"></a><span data-ttu-id="5938b-352">Krok 7: Pomocí příslušné nejvyšší úrovně stránky předlohy za běhu</span><span class="sxs-lookup"><span data-stu-id="5938b-352">Step 7: Using the Appropriate Top-Level Master Page at Runtime</span></span>

<span data-ttu-id="5938b-353">Všechny stránky obsahu v části Správa jsou plně funkční, všechny používají stejný hlavní stránku nejvyšší úrovně a Ignorovat vybraný uživatelem na hlavní stránce `ChooseMasterPage.aspx`.</span><span class="sxs-lookup"><span data-stu-id="5938b-353">While all the content pages in the Administration section are fully functional, they all use the same top-level master page and ignore the master page selected by the user at `ChooseMasterPage.aspx`.</span></span> <span data-ttu-id="5938b-354">Toto chování je skutečnost, že má vnořené hlavní stránky jeho `MasterPageFile` vlastnost staticky nastavena na hodnotu `Site.master` v jeho `<%@ Master %>` – direktiva.</span><span class="sxs-lookup"><span data-stu-id="5938b-354">This behavior is due to the fact that the nested master page has its `MasterPageFile` property statically set to `Site.master` in its `<%@ Master %>` directive.</span></span>

<span data-ttu-id="5938b-355">Použít hlavní stránku nejvyšší úrovně, vybrané koncovým uživatelem, je potřeba nastavit `AdminNested.master`na `MasterPageFile` vlastnost na hodnotu v `MyMasterPage` proměnné relace.</span><span class="sxs-lookup"><span data-stu-id="5938b-355">To use the top-level master page selected by the end user we need to set the `AdminNested.master`'s `MasterPageFile` property to the value in the `MyMasterPage` Session variable.</span></span> <span data-ttu-id="5938b-356">Vzhledem k tomu, že nastaví stránky obsahu `MasterPageFile` vlastnosti v `BasePage`, si myslíte, že doporučujeme nastavit vnořené hlavní stránky `MasterPageFile` vlastnost v `BaseMasterPage` nebo v `AdminNested.master`na třídu kódem v pozadí.</span><span class="sxs-lookup"><span data-stu-id="5938b-356">Because we set the content pages' `MasterPageFile` properties in `BasePage`, you may think that we would set the nested master page's `MasterPageFile` property in `BaseMasterPage` or in the `AdminNested.master`'s code-behind class.</span></span> <span data-ttu-id="5938b-357">Tato funkce nebude pracovat, ale protože je potřeba mít `MasterPageFile` vlastnost na konci fázi PreInit.</span><span class="sxs-lookup"><span data-stu-id="5938b-357">This won't work, however, because we need to have set the `MasterPageFile` property by the end of the PreInit stage.</span></span> <span data-ttu-id="5938b-358">Nejdřívější čas, který jsme prostřednictvím kódu programu můžou klepnout do životního cyklu stránky ze stránky předlohy je fázi Init (které dochází po fázi PreInit).</span><span class="sxs-lookup"><span data-stu-id="5938b-358">The earliest time that we can programmatically tap into the page lifecycle from a master page is the Init stage (which occurs after the PreInit stage).</span></span>

<span data-ttu-id="5938b-359">Proto je potřeba nastavit vnořené hlavní stránky `MasterPageFile` vlastnosti ze stránky obsahu.</span><span class="sxs-lookup"><span data-stu-id="5938b-359">Therefore, we need to set the nested master page's `MasterPageFile` property from the content pages.</span></span> <span data-ttu-id="5938b-360">Jediný obsah stránky, které používají `AdminNested.master` stránky předlohy odvozena od `AdminBasePage`.</span><span class="sxs-lookup"><span data-stu-id="5938b-360">The only content pages that use the `AdminNested.master` master page derive from `AdminBasePage`.</span></span> <span data-ttu-id="5938b-361">Proto jsme můžou tuto logiku existuje.</span><span class="sxs-lookup"><span data-stu-id="5938b-361">Therefore, we can put this logic there.</span></span> <span data-ttu-id="5938b-362">V kroku 5 jsme overrode `SetMasterPageFile` metodu, nastavení `Page` objektu `MasterPageFile` vlastnost "~ / Admin/AdminNested.master".</span><span class="sxs-lookup"><span data-stu-id="5938b-362">In Step 5 we overrode the `SetMasterPageFile` method, setting the `Page` object's `MasterPageFile` property to "~/Admin/AdminNested.master".</span></span> <span data-ttu-id="5938b-363">Aktualizace `SetMasterPageFile` také nastavit stránky předlohy `MasterPageFile` vlastnost výsledek uložený v relaci:</span><span class="sxs-lookup"><span data-stu-id="5938b-363">Update `SetMasterPageFile` to also set the master page's `MasterPageFile` property to the result stored in Session:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample18.cs)]

<span data-ttu-id="5938b-364">`GetMasterPageFileFromSession` Metodu, která jsme přidali do `BasePage` – třída v předchozím kurzu vrátí cestu k souboru příslušná stránka předlohy založená na hodnotě proměnné relace.</span><span class="sxs-lookup"><span data-stu-id="5938b-364">The `GetMasterPageFileFromSession` method, which we added to the `BasePage` class in the preceding tutorial, returns the appropriate master page file path based on the Session variable value.</span></span>

<span data-ttu-id="5938b-365">Díky této změně zavedené stránky předlohy výběru uživatele se přenesou do části Správa.</span><span class="sxs-lookup"><span data-stu-id="5938b-365">With this change in place, the user's master page selection carries over to the Administration section.</span></span> <span data-ttu-id="5938b-366">Obrázek 13 ukazuje stejné stránce jako obrázek 12, ale po změně jejich výběr stránky předlohy pro uživatele `Alternate.master`.</span><span class="sxs-lookup"><span data-stu-id="5938b-366">Figure 13 shows the same page as Figure 12, but after the user has changed their master page selection to `Alternate.master`.</span></span>


<span data-ttu-id="5938b-367">[![Stránka vnořené správy používá nejvyšší úrovně stránky předlohy vybrané uživatelem.](nested-master-pages-cs/_static/image38.png)](nested-master-pages-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="5938b-367">[![The Nested Administration Page Uses the Top-Level Master Page Selected by the User](nested-master-pages-cs/_static/image38.png)](nested-master-pages-cs/_static/image37.png)</span></span>

<span data-ttu-id="5938b-368">**Obrázek 13**: stránka Správa vnořené používá nejvyšší úrovně hlavní stránky vybraný uživatelem ([Kliknutím zobrazit obrázek v plné velikosti](nested-master-pages-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="5938b-368">**Figure 13**: The Nested Administration Page Uses the Top-Level Master Page Selected by the User ([Click to view full-size image](nested-master-pages-cs/_static/image39.png))</span></span>


## <a name="summary"></a><span data-ttu-id="5938b-369">Souhrn</span><span class="sxs-lookup"><span data-stu-id="5938b-369">Summary</span></span>

<span data-ttu-id="5938b-370">Mnoho například jak obsahu stránky můžete vázat na stránku předlohy, je možné vytvořit vnořené hlavní stránky tak, že podřízená stránka předlohy vytvořit vazbu k nadřazené stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="5938b-370">Much like how content pages can bind to a master page, it is possible to create nested master pages by having a child master page bind to a parent master page.</span></span> <span data-ttu-id="5938b-371">Podřízená stránka předlohy pro každý z jeho nadřazeného objektu ContentPlaceHolders; může definovat ovládací prvky obsahu potom ji můžete přidat vlastní ovládací prvky ContentPlaceHolder (stejně jako ostatní značek) na tyto ovládací prvky obsahu.</span><span class="sxs-lookup"><span data-stu-id="5938b-371">The child master page may define Content controls for each of its parent's ContentPlaceHolders; it can then add its own ContentPlaceHolder controls (as well as other markup) to these Content controls.</span></span> <span data-ttu-id="5938b-372">Vnořené hlavní stránky jsou velmi užitečné v velkých webových aplikací, kde všechny stránky sdílet zastřešující vzhled a chování, ale některé části lokality vyžadovat jedinečné přizpůsobení.</span><span class="sxs-lookup"><span data-stu-id="5938b-372">Nested master pages are quite useful in large web applications where all pages share an overarching look and feel, yet certain sections of the site require unique customizations.</span></span>

<span data-ttu-id="5938b-373">Radostí programování!</span><span class="sxs-lookup"><span data-stu-id="5938b-373">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="5938b-374">Další čtení</span><span class="sxs-lookup"><span data-stu-id="5938b-374">Further Reading</span></span>

<span data-ttu-id="5938b-375">Další informace o tématech popsané v tomto kurzu najdete v následujících zdrojích informací:</span><span class="sxs-lookup"><span data-stu-id="5938b-375">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="5938b-376">Vnořené stránky předlohy technologie ASP.NET</span><span class="sxs-lookup"><span data-stu-id="5938b-376">Nested ASP.NET Master Pages</span></span>](https://msdn.microsoft.com/library/x2b3ktt7.aspx)
- [<span data-ttu-id="5938b-377">Tipy pro vnořené hlavní stránky a VS 2005 návrhu</span><span class="sxs-lookup"><span data-stu-id="5938b-377">Tips for Nested Master Pages and VS 2005 Design-Time</span></span>](https://weblogs.asp.net/scottgu/archive/2005/11/11/430382.aspx)
- [<span data-ttu-id="5938b-378">VS 2008 vnořené hlavní stránky podpory</span><span class="sxs-lookup"><span data-stu-id="5938b-378">VS 2008 Nested Master Page Support</span></span>](https://weblogs.asp.net/scottgu/archive/2007/07/09/vs-2008-nested-master-page-support.aspx)

### <a name="about-the-author"></a><span data-ttu-id="5938b-379">O autorovi</span><span class="sxs-lookup"><span data-stu-id="5938b-379">About the Author</span></span>

<span data-ttu-id="5938b-380">[Scott Meisnerová](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor více knih ASP/ASP.NET a zakladatele 4GuysFromRolla.com, pracuje s technologií Microsoft Web od 1998.</span><span class="sxs-lookup"><span data-stu-id="5938b-380">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="5938b-381">Scott funguje jako nezávislé poradce, trainer a zapisovače.</span><span class="sxs-lookup"><span data-stu-id="5938b-381">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="5938b-382">Jeho nejnovější seznam k [ *Edice nakladatelství Sams naučit sami technologie ASP.NET 3.5 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="5938b-382">His latest book is [*Sams Teach Yourself ASP.NET 3.5 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span></span> <span data-ttu-id="5938b-383">Scott lze dosáhnout za [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com) nebo prostřednictvím svého blogu v [ http://ScottOnWriting.NET ](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="5938b-383">Scott can be reached at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="5938b-384">Zvláštní poděkování</span><span class="sxs-lookup"><span data-stu-id="5938b-384">Special Thanks To</span></span>

<span data-ttu-id="5938b-385">Tento kurz řady byla zkontrolovány uživatelem mnoho užitečné kontrolorů.</span><span class="sxs-lookup"><span data-stu-id="5938b-385">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="5938b-386">Kontrola Moje nadcházející články MSDN máte zájem?</span><span class="sxs-lookup"><span data-stu-id="5938b-386">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="5938b-387">Pokud ano, vyřaďte mi řádek v [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="5938b-387">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="5938b-388">[Předchozí](specifying-the-master-page-programmatically-cs.md)
> [další](creating-a-site-wide-layout-using-master-pages-vb.md)</span><span class="sxs-lookup"><span data-stu-id="5938b-388">[Previous](specifying-the-master-page-programmatically-cs.md)
[Next](creating-a-site-wide-layout-using-master-pages-vb.md)</span></span>
