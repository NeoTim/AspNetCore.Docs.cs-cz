---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-3
title: Začínáme s databáze Entity Framework 4.0 nejprve a ASP.NET 4 webové formuláře – část 3 | Microsoft Docs
author: tdykstra
description: Contoso univerzity ukázkovou webovou aplikaci demonstruje postup vytvoření aplikace webových formulářů ASP.NET používající rozhraní Entity Framework. Vzorová aplikace je...
ms.author: aspnetcontent
manager: wpickett
ms.date: 12/03/2010
ms.topic: article
ms.assetid: ccdc3f8c-2568-40a7-8f8b-3c23d2e05388
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-3
msc.type: authoredcontent
ms.openlocfilehash: 654f3556af5d05ec186e1811421966bbaffd2e21
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/06/2018
---
<a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-3"></a><span data-ttu-id="7c98d-104">Začínáme s databáze Entity Framework 4.0 nejprve a 4 webových formulářů ASP.NET - část 3</span><span class="sxs-lookup"><span data-stu-id="7c98d-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 3</span></span>
====================
<span data-ttu-id="7c98d-105">Podle [tní Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="7c98d-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="7c98d-106">Contoso univerzity ukázkovou webovou aplikaci demonstruje postup vytvoření aplikace webových formulářů ASP.NET pomocí sady Visual Studio 2010 a Entity Framework 4.0.</span><span class="sxs-lookup"><span data-stu-id="7c98d-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="7c98d-107">Informace o kurzu řady najdete v tématu [první kurz v řadě](the-entity-framework-and-aspnet-getting-started-part-1.md)</span><span class="sxs-lookup"><span data-stu-id="7c98d-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>


## <a name="filtering-ordering-and-grouping-data"></a><span data-ttu-id="7c98d-108">Filtrování, řazení a seskupování dat</span><span class="sxs-lookup"><span data-stu-id="7c98d-108">Filtering, Ordering, and Grouping Data</span></span>

<span data-ttu-id="7c98d-109">V předchozích kurzu jste použili `EntityDataSource` ovládací prvek zobrazit a upravit data.</span><span class="sxs-lookup"><span data-stu-id="7c98d-109">In the previous tutorial you used the `EntityDataSource` control to display and edit data.</span></span> <span data-ttu-id="7c98d-110">V tomto kurzu budete filtrování, řazení a seskupit data.</span><span class="sxs-lookup"><span data-stu-id="7c98d-110">In this tutorial you'll filter, order, and group data.</span></span> <span data-ttu-id="7c98d-111">Když to provedete nastavením vlastnosti `EntityDataSource` řízení, se liší od jiných ovládacích prvků zdroje dat syntaxe.</span><span class="sxs-lookup"><span data-stu-id="7c98d-111">When you do this by setting properties of the `EntityDataSource` control, the syntax is different from other data source controls.</span></span> <span data-ttu-id="7c98d-112">Jak zjistíte, ale můžete použít `QueryExtender` ovládací prvek pro minimalizaci tyto rozdíly.</span><span class="sxs-lookup"><span data-stu-id="7c98d-112">As you'll see, however, you can use the `QueryExtender` control to minimize these differences.</span></span>

<span data-ttu-id="7c98d-113">Změníte *Students.aspx* stránky pro filtrování pro studenty, řazení podle názvu a vyhledávání na název.</span><span class="sxs-lookup"><span data-stu-id="7c98d-113">You'll change the *Students.aspx* page to filter for students, sort by name, and search on name.</span></span> <span data-ttu-id="7c98d-114">Budete také změnit *Courses.aspx* stránky zobrazující kurzy pro vybrané oddělení a vyhledejte kurzy podle názvu.</span><span class="sxs-lookup"><span data-stu-id="7c98d-114">You'll also change the *Courses.aspx* page to display courses for the selected department and search for courses by name.</span></span> <span data-ttu-id="7c98d-115">Nakonec student statistické údaje, které přidáte *About.aspx* stránky.</span><span class="sxs-lookup"><span data-stu-id="7c98d-115">Finally, you'll add student statistics to the *About.aspx* page.</span></span>

<span data-ttu-id="7c98d-116">[![Image02](the-entity-framework-and-aspnet-getting-started-part-3/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="7c98d-116">[![Image02](the-entity-framework-and-aspnet-getting-started-part-3/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image1.png)</span></span>

<span data-ttu-id="7c98d-117">[![Image11](the-entity-framework-and-aspnet-getting-started-part-3/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="7c98d-117">[![Image11](the-entity-framework-and-aspnet-getting-started-part-3/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image3.png)</span></span>

<span data-ttu-id="7c98d-118">[![Image10](the-entity-framework-and-aspnet-getting-started-part-3/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="7c98d-118">[![Image10](the-entity-framework-and-aspnet-getting-started-part-3/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image5.png)</span></span>

<span data-ttu-id="7c98d-119">[![Image14](the-entity-framework-and-aspnet-getting-started-part-3/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="7c98d-119">[![Image14](the-entity-framework-and-aspnet-getting-started-part-3/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image7.png)</span></span>

## <a name="using-the-entitydatasource-where-property-to-filter-data"></a><span data-ttu-id="7c98d-120">Pomocí EntityDataSource "Kde" vlastnosti k filtrování dat</span><span class="sxs-lookup"><span data-stu-id="7c98d-120">Using the EntityDataSource "Where" Property to Filter Data</span></span>

<span data-ttu-id="7c98d-121">Otevřete *Students.aspx* stránku, kterou jste vytvořili v předchozí kurzu.</span><span class="sxs-lookup"><span data-stu-id="7c98d-121">Open the *Students.aspx* page that you created in the previous tutorial.</span></span> <span data-ttu-id="7c98d-122">Podle současné konfigurace `GridView` ovládacího prvku stránce zobrazuje všechny názvy z `People` sady entit.</span><span class="sxs-lookup"><span data-stu-id="7c98d-122">As currently configured, the `GridView` control in the page displays all the names from the `People` entity set.</span></span> <span data-ttu-id="7c98d-123">Ale chcete zobrazit jenom studenty, které můžete najít tak, že vyberete `Person` entity, které mají data registrace nesmí být nulová.</span><span class="sxs-lookup"><span data-stu-id="7c98d-123">However, you want to show only students, which you can find by selecting `Person` entities that have non-null enrollment dates.</span></span>

<span data-ttu-id="7c98d-124">Přepnout na **návrhu** zobrazit a vybrat `EntityDataSource` ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="7c98d-124">Switch to **Design** view and select the `EntityDataSource` control.</span></span> <span data-ttu-id="7c98d-125">V **vlastnosti** nastavte `Where` vlastnost `it.EnrollmentDate is not null`.</span><span class="sxs-lookup"><span data-stu-id="7c98d-125">In the **Properties** window, set the `Where` property to `it.EnrollmentDate is not null`.</span></span>

<span data-ttu-id="7c98d-126">[![Image01](the-entity-framework-and-aspnet-getting-started-part-3/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="7c98d-126">[![Image01](the-entity-framework-and-aspnet-getting-started-part-3/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image9.png)</span></span>

<span data-ttu-id="7c98d-127">Syntaxe použijete v `Where` vlastnost `EntityDataSource` řízení je Entity SQL.</span><span class="sxs-lookup"><span data-stu-id="7c98d-127">The syntax you use in the `Where` property of the `EntityDataSource` control is Entity SQL.</span></span> <span data-ttu-id="7c98d-128">Entita SQL je podobná Transact-SQL, ale je přizpůsobené pro použití s entity, nikoli databázové objekty.</span><span class="sxs-lookup"><span data-stu-id="7c98d-128">Entity SQL is similar to Transact-SQL, but it's customized for use with entities rather than database objects.</span></span> <span data-ttu-id="7c98d-129">Ve výrazu `it.EnrollmentDate is not null`, slovo `it` představuje odkaz na entitu vrácených dotazem.</span><span class="sxs-lookup"><span data-stu-id="7c98d-129">In the expression `it.EnrollmentDate is not null`, the word `it` represents a reference to the entity returned by the query.</span></span> <span data-ttu-id="7c98d-130">Proto `it.EnrollmentDate` odkazuje `EnrollmentDate` vlastnost `Person` entity, `EntityDataSource` řízení vrátí.</span><span class="sxs-lookup"><span data-stu-id="7c98d-130">Therefore, `it.EnrollmentDate` refers to the `EnrollmentDate` property of the `Person` entity that the `EntityDataSource` control returns.</span></span>

<span data-ttu-id="7c98d-131">Spuštění stránky.</span><span class="sxs-lookup"><span data-stu-id="7c98d-131">Run the page.</span></span> <span data-ttu-id="7c98d-132">Studenti, kteří seznamu nyní obsahuje pouze studenty.</span><span class="sxs-lookup"><span data-stu-id="7c98d-132">The students list now contains only students.</span></span> <span data-ttu-id="7c98d-133">(Nejsou zjištěny žádné řádky, kde se zobrazí datum registrace.)</span><span class="sxs-lookup"><span data-stu-id="7c98d-133">(There are no rows displayed where there's no enrollment date.)</span></span>

<span data-ttu-id="7c98d-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-3/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="7c98d-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-3/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image11.png)</span></span>

## <a name="using-the-entitydatasource-orderby-property-to-order-data"></a><span data-ttu-id="7c98d-135">Pomocí vlastnosti EntityDataSource "OrderBy" pořadí dat</span><span class="sxs-lookup"><span data-stu-id="7c98d-135">Using the EntityDataSource "OrderBy" Property to Order Data</span></span>

<span data-ttu-id="7c98d-136">Také budete chtít tento seznam, když se napřed zobrazí jako v pořadí název.</span><span class="sxs-lookup"><span data-stu-id="7c98d-136">You also want this list to be in name order when it's first displayed.</span></span> <span data-ttu-id="7c98d-137">S *Students.aspx* stránky stále otevřen v **návrhu** zobrazení a `EntityDataSource` ovládací prvek vybrán, v **vlastnosti** okno sady  **OrderBy** vlastnost `it.LastName`.</span><span class="sxs-lookup"><span data-stu-id="7c98d-137">With the *Students.aspx* page still open in **Design** view, and with the `EntityDataSource` control still selected, in the **Properties** window set the **OrderBy** property to `it.LastName`.</span></span>

<span data-ttu-id="7c98d-138">[![Image05](the-entity-framework-and-aspnet-getting-started-part-3/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="7c98d-138">[![Image05](the-entity-framework-and-aspnet-getting-started-part-3/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image13.png)</span></span>

<span data-ttu-id="7c98d-139">Spuštění stránky.</span><span class="sxs-lookup"><span data-stu-id="7c98d-139">Run the page.</span></span> <span data-ttu-id="7c98d-140">Studenti, kteří seznamu je nyní v pořadí podle příjmení.</span><span class="sxs-lookup"><span data-stu-id="7c98d-140">The students list is now in order by last name.</span></span>

<span data-ttu-id="7c98d-141">[![Image04](the-entity-framework-and-aspnet-getting-started-part-3/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="7c98d-141">[![Image04](the-entity-framework-and-aspnet-getting-started-part-3/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image15.png)</span></span>

## <a name="using-a-control-parameter-to-set-the-where-property"></a><span data-ttu-id="7c98d-142">Pomocí řízení parametru set pro vlastnost "Kde"</span><span class="sxs-lookup"><span data-stu-id="7c98d-142">Using a Control Parameter to Set the "Where" Property</span></span>

<span data-ttu-id="7c98d-143">Jako u jiných ovládacích prvků zdroje dat můžete předat hodnot parametrů, které `Where` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="7c98d-143">As with other data source controls, you can pass parameter values to the `Where` property.</span></span> <span data-ttu-id="7c98d-144">Na *Courses.aspx* stránka, kterou jste vytvořili v části 2 kurzu, tuto metodu můžete použít k zobrazení kurzy, které jsou přidruženy oddělení, které uživatel vybere ze seznamu rozevíracího seznamu.</span><span class="sxs-lookup"><span data-stu-id="7c98d-144">On the *Courses.aspx* page that you created in part 2 of the tutorial, you can use this method to display courses that are associated with the department that a user selects from the drop-down list.</span></span>

<span data-ttu-id="7c98d-145">Otevřete *Courses.aspx* a přepněte do **návrhu** zobrazení.</span><span class="sxs-lookup"><span data-stu-id="7c98d-145">Open *Courses.aspx* and switch to **Design** view.</span></span> <span data-ttu-id="7c98d-146">Přidejte druhý `EntityDataSource` řízení na stránku a pojmenujte ji `CoursesEntityDataSource`.</span><span class="sxs-lookup"><span data-stu-id="7c98d-146">Add a second `EntityDataSource` control to the page, and name it `CoursesEntityDataSource`.</span></span> <span data-ttu-id="7c98d-147">Propojte jej s `SchoolEntities` modelu a vyberte `Courses` jako **EntitySetName** hodnotu.</span><span class="sxs-lookup"><span data-stu-id="7c98d-147">Connect it to the `SchoolEntities` model, and select `Courses` as the **EntitySetName** value.</span></span>

<span data-ttu-id="7c98d-148">V **vlastnosti** okně klikněte na tlačítko se třemi tečkami v **kde** pole vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="7c98d-148">In the **Properties** window, click the ellipsis in the **Where** property box.</span></span> <span data-ttu-id="7c98d-149">(Zajistěte, aby `CoursesEntityDataSource` před použitím je stále vybraný ovládací prvek **vlastnosti** okno.)</span><span class="sxs-lookup"><span data-stu-id="7c98d-149">(Make sure the `CoursesEntityDataSource` control is still selected before using the **Properties** window.)</span></span>

<span data-ttu-id="7c98d-150">[![Image06](the-entity-framework-and-aspnet-getting-started-part-3/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="7c98d-150">[![Image06](the-entity-framework-and-aspnet-getting-started-part-3/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image17.png)</span></span>

<span data-ttu-id="7c98d-151">**Editor výrazů** se zobrazí dialogové okno.</span><span class="sxs-lookup"><span data-stu-id="7c98d-151">The **Expression Editor** dialog box is displayed.</span></span> <span data-ttu-id="7c98d-152">V tomto dialogovém okně vyberte **automaticky generovat Where výraz podle parametrů**a potom klikněte na **přidat parametr**.</span><span class="sxs-lookup"><span data-stu-id="7c98d-152">In this dialog box, select **Automatically generate the Where expression based on the provided parameters**, and then click **Add Parameter**.</span></span> <span data-ttu-id="7c98d-153">Název parametru `DepartmentID`, vyberte **řízení** jako **Zdroj parametru** hodnotu a vyberte **DepartmentsDropDownList** jako **ControlID**  hodnotu.</span><span class="sxs-lookup"><span data-stu-id="7c98d-153">Name the parameter `DepartmentID`, select **Control** as the **Parameter source** value, and select **DepartmentsDropDownList** as the **ControlID** value.</span></span>

<span data-ttu-id="7c98d-154">[![Image07](the-entity-framework-and-aspnet-getting-started-part-3/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="7c98d-154">[![Image07](the-entity-framework-and-aspnet-getting-started-part-3/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image19.png)</span></span>

<span data-ttu-id="7c98d-155">Klikněte na tlačítko **zobrazit rozšířené vlastnosti**a v **vlastnosti** okno **Editor výrazů** dialogové okno, změny `Type` vlastnost `Int32`.</span><span class="sxs-lookup"><span data-stu-id="7c98d-155">Click **Show advanced properties**, and in the **Properties** window of the **Expression Editor** dialog box, change the `Type` property to `Int32`.</span></span>

<span data-ttu-id="7c98d-156">[![Image15](the-entity-framework-and-aspnet-getting-started-part-3/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="7c98d-156">[![Image15](the-entity-framework-and-aspnet-getting-started-part-3/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image21.png)</span></span>

<span data-ttu-id="7c98d-157">Když jste hotovi, klikněte na tlačítko **OK**.</span><span class="sxs-lookup"><span data-stu-id="7c98d-157">When you're done, click **OK**.</span></span>

<span data-ttu-id="7c98d-158">Pod rozevíracím seznamu, přidejte `GridView` řízení na stránku a pojmenujte ji `CoursesGridView`.</span><span class="sxs-lookup"><span data-stu-id="7c98d-158">Below the drop-down list, add a `GridView` control to the page and name it `CoursesGridView`.</span></span> <span data-ttu-id="7c98d-159">Propojte jej s `CoursesEntityDataSource` zdroje dat ovládacího prvku, klikněte na tlačítko **aktualizovat schéma**, klikněte na tlačítko **upravit sloupce**a odeberte `DepartmentID` sloupce.</span><span class="sxs-lookup"><span data-stu-id="7c98d-159">Connect it to the `CoursesEntityDataSource` data source control, click **Refresh Schema**, click **Edit Columns**, and remove the `DepartmentID` column.</span></span> <span data-ttu-id="7c98d-160">`GridView` Značky ovládacího prvku se podobá následujícímu příkladu.</span><span class="sxs-lookup"><span data-stu-id="7c98d-160">The `GridView` control markup resembles the following example.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample1.aspx)]

<span data-ttu-id="7c98d-161">Když uživatel změní vybraného oddělení v rozevíracím seznamu, budete chtít seznam přidružených kurzy změna automaticky.</span><span class="sxs-lookup"><span data-stu-id="7c98d-161">When the user changes the selected department in the drop-down list, you want the list of associated courses to change automatically.</span></span> <span data-ttu-id="7c98d-162">Chcete udělat, vyberte v rozevíracím seznamu a v **vlastnosti** sadu okno `AutoPostBack` vlastnost `True`.</span><span class="sxs-lookup"><span data-stu-id="7c98d-162">To make this happen, select the drop-down list, and in the **Properties** window set the `AutoPostBack` property to `True`.</span></span>

<span data-ttu-id="7c98d-163">[![Image08](the-entity-framework-and-aspnet-getting-started-part-3/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="7c98d-163">[![Image08](the-entity-framework-and-aspnet-getting-started-part-3/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image23.png)</span></span>

<span data-ttu-id="7c98d-164">Teď, když jste hotovi, pomocí návrháře, přepněte do **zdroj** zobrazení a nahraďte `ConnectionString` a `DefaultContainer` název vlastnosti `CoursesEntityDataSource` řízení s `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` atribut.</span><span class="sxs-lookup"><span data-stu-id="7c98d-164">Now that you're finished using the designer, switch to **Source** view and replace the `ConnectionString` and `DefaultContainer` name properties of the `CoursesEntityDataSource` control with the `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` attribute.</span></span> <span data-ttu-id="7c98d-165">Když jste hotovi, zápis pro ovládací prvek bude vypadat jako v následujícím příkladu.</span><span class="sxs-lookup"><span data-stu-id="7c98d-165">When you're done, the markup for the control will look like the following example.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample2.aspx)]

<span data-ttu-id="7c98d-166">Spuštění stránky a pomocí rozevíracího seznamu vyberte různá oddělení.</span><span class="sxs-lookup"><span data-stu-id="7c98d-166">Run the page and use the drop-down list to select different departments.</span></span> <span data-ttu-id="7c98d-167">Pouze kurzy, které nabízí vybrané oddělení se zobrazují v `GridView` ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="7c98d-167">Only courses that are offered by the selected department are displayed in the `GridView` control.</span></span>

<span data-ttu-id="7c98d-168">[![Image09](the-entity-framework-and-aspnet-getting-started-part-3/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="7c98d-168">[![Image09](the-entity-framework-and-aspnet-getting-started-part-3/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image25.png)</span></span>

## <a name="using-the-entitydatasource-groupby-property-to-group-data"></a><span data-ttu-id="7c98d-169">Pomocí vlastnosti EntityDataSource "GroupBy" k seskupení dat</span><span class="sxs-lookup"><span data-stu-id="7c98d-169">Using the EntityDataSource "GroupBy" Property to Group Data</span></span>

<span data-ttu-id="7c98d-170">Předpokládejme, že univerzity Contoso chce statistikami student textu na stránce s jejím o.</span><span class="sxs-lookup"><span data-stu-id="7c98d-170">Suppose Contoso University wants to put some student-body statistics on its About page.</span></span> <span data-ttu-id="7c98d-171">Konkrétně chce zobrazit rozpis počtu studenty podle data, kdy je zaregistrovat.</span><span class="sxs-lookup"><span data-stu-id="7c98d-171">Specifically, it wants to show a breakdown of numbers of students by the date they enrolled.</span></span>

<span data-ttu-id="7c98d-172">Otevřete *About.aspx*a v **zdroj** zobrazit, nahradit existující obsah `BodyContent` řízení s "Statistika Student text" mezi `h2` značky:</span><span class="sxs-lookup"><span data-stu-id="7c98d-172">Open *About.aspx*, and in **Source** view, replace the existing contents of the `BodyContent` control with "Student Body Statistics" between `h2` tags:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample3.aspx)]

<span data-ttu-id="7c98d-173">Za záhlaví, přidejte `EntityDataSource` řízení a pojmenujte ji `StudentStatisticsEntityDataSource`.</span><span class="sxs-lookup"><span data-stu-id="7c98d-173">After the heading, add an `EntityDataSource` control and name it `StudentStatisticsEntityDataSource`.</span></span> <span data-ttu-id="7c98d-174">Propojte jej s `SchoolEntities`, vyberte `People` entity nastavit a nechat **vyberte** pole v Průvodci beze změny.</span><span class="sxs-lookup"><span data-stu-id="7c98d-174">Connect it to `SchoolEntities`, select the `People` entity set, and leave the **Select** box in the wizard unchanged.</span></span> <span data-ttu-id="7c98d-175">Nastavte následující vlastnosti **vlastnosti** okno:</span><span class="sxs-lookup"><span data-stu-id="7c98d-175">Set the following properties in the **Properties** window:</span></span>

- <span data-ttu-id="7c98d-176">Chcete-li filtrovat pro studenty pouze, nastavte `Where` vlastnost `it.EnrollmentDate is not null`.</span><span class="sxs-lookup"><span data-stu-id="7c98d-176">To filter for students only, set the `Where` property to `it.EnrollmentDate is not null`.</span></span>
- <span data-ttu-id="7c98d-177">Chcete-li seskupit výsledky podle data registrace, nastavte `GroupBy` vlastnost `it.EnrollmentDate`.</span><span class="sxs-lookup"><span data-stu-id="7c98d-177">To group the results by the enrollment date, set the `GroupBy` property to `it.EnrollmentDate`.</span></span>
- <span data-ttu-id="7c98d-178">Chcete-li vybrat datum registrace a počet studenty, nastavte `Select` vlastnost `it.EnrollmentDate, Count(it.EnrollmentDate) AS NumberOfStudents`.</span><span class="sxs-lookup"><span data-stu-id="7c98d-178">To select the enrollment date and the number of students, set the `Select` property to `it.EnrollmentDate, Count(it.EnrollmentDate) AS NumberOfStudents`.</span></span>
- <span data-ttu-id="7c98d-179">Chcete-li k datu registrace řazení výsledků, nastavte `OrderBy` vlastnost `it.EnrollmentDate`.</span><span class="sxs-lookup"><span data-stu-id="7c98d-179">To order the results by the enrollment date, set the `OrderBy` property to `it.EnrollmentDate`.</span></span>

<span data-ttu-id="7c98d-180">V **zdroj** zobrazení, nahraďte `ConnectionString` a `DefaultContainer` název vlastnosti `ContextTypeName` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="7c98d-180">In **Source** view, replace the `ConnectionString` and `DefaultContainer` name properties with a `ContextTypeName` property.</span></span> <span data-ttu-id="7c98d-181">`EntityDataSource` Značky ovládacího prvku nyní podobá následujícímu příkladu.</span><span class="sxs-lookup"><span data-stu-id="7c98d-181">The `EntityDataSource` control markup now resembles the following example.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample4.aspx)]

<span data-ttu-id="7c98d-182">Syntaxe `Select`, `GroupBy`, a `Where` vlastnosti se podobá Transact-SQL s výjimkou `it` klíčové slovo, které určuje aktuální entity.</span><span class="sxs-lookup"><span data-stu-id="7c98d-182">The syntax of the `Select`, `GroupBy`, and `Where` properties resembles Transact-SQL except for the `it` keyword that specifies the current entity.</span></span>

<span data-ttu-id="7c98d-183">Přidejte následující kód k vytvoření `GridView` ovládací prvek zobrazí data.</span><span class="sxs-lookup"><span data-stu-id="7c98d-183">Add the following markup to create a `GridView` control to display the data.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample5.aspx)]

<span data-ttu-id="7c98d-184">Spuštění stránky pro zobrazení seznamu zobrazuje počet studenty datu registrace.</span><span class="sxs-lookup"><span data-stu-id="7c98d-184">Run the page to see a list showing the number of students by enrollment date.</span></span>

<span data-ttu-id="7c98d-185">[![Image10](the-entity-framework-and-aspnet-getting-started-part-3/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="7c98d-185">[![Image10](the-entity-framework-and-aspnet-getting-started-part-3/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image27.png)</span></span>

## <a name="using-the-queryextender-control-for-filtering-and-ordering"></a><span data-ttu-id="7c98d-186">Použití ovládacího prvku QueryExtender pro filtrování a řazení</span><span class="sxs-lookup"><span data-stu-id="7c98d-186">Using the QueryExtender Control for Filtering and Ordering</span></span>

<span data-ttu-id="7c98d-187">`QueryExtender` Řízení poskytuje způsob, jak zadat filtrování a řazení v kódu.</span><span class="sxs-lookup"><span data-stu-id="7c98d-187">The `QueryExtender` control provides a way to specify filtering and sorting in markup.</span></span> <span data-ttu-id="7c98d-188">Syntaxe je nezávislé na používáte systému správy databáze (databázového systému).</span><span class="sxs-lookup"><span data-stu-id="7c98d-188">The syntax is independent of the database management system (DBMS) you're using.</span></span> <span data-ttu-id="7c98d-189">Je také obecně nezávislé na rozhraní Entity Framework, s tím rozdílem, že syntaxe, které můžete použít pro navigační vlastnosti je jedinečné pro rozhraní Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="7c98d-189">It's also generally independent of the Entity Framework, with the exception that syntax you use for navigation properties is unique to the Entity Framework.</span></span>

<span data-ttu-id="7c98d-190">V této části kurzu budete používat `QueryExtender` řízení filtrovat a řadit data a jedno pole Order bude navigační vlastnost.</span><span class="sxs-lookup"><span data-stu-id="7c98d-190">In this part of the tutorial you'll use a `QueryExtender` control to filter and order data, and one of the order-by fields will be a navigation property.</span></span>

<span data-ttu-id="7c98d-191">(Pokud byste radši chtěli použít kód místo značek rozšířit dotazy, které jsou automaticky generované `EntityDataSource` ovládací prvek, můžete to udělat zpracování `QueryCreated` událostí.</span><span class="sxs-lookup"><span data-stu-id="7c98d-191">(If you prefer to use code instead of markup to extend the queries that are automatically generated by the `EntityDataSource` control, you can do that by handling the `QueryCreated` event.</span></span> <span data-ttu-id="7c98d-192">Jedná se jak `QueryExtender` ovládací prvek rozšiřuje `EntityDataSource` také řídit dotazy.)</span><span class="sxs-lookup"><span data-stu-id="7c98d-192">This is how the `QueryExtender` control extends `EntityDataSource` control queries also.)</span></span>

<span data-ttu-id="7c98d-193">Otevřete *Courses.aspx* stránky a pod kód, který jste přidali dříve, vložte následující kód k vytvoření záhlaví, textové pole pro zadání hledání řetězců, tlačítko vyhledat a `EntityDataSource` ovládací prvek, který je vázána `Courses` sady entit.</span><span class="sxs-lookup"><span data-stu-id="7c98d-193">Open the *Courses.aspx* page, and below the markup you added previously, insert the following markup to create a heading, a text box for entering search strings, a search button, and an `EntityDataSource` control that's bound to the `Courses` entity set.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample6.aspx)]

<span data-ttu-id="7c98d-194">Všimněte si, že `EntityDataSource` ovládacího prvku `Include` je nastavena na `Department`.</span><span class="sxs-lookup"><span data-stu-id="7c98d-194">Notice that the `EntityDataSource` control's `Include` property is set to `Department`.</span></span> <span data-ttu-id="7c98d-195">V databázi `Course` tabulka neobsahuje název oddělení; obsahuje `DepartmentID` sloupec cizího klíče.</span><span class="sxs-lookup"><span data-stu-id="7c98d-195">In the database, the `Course` table does not contain the department name; it contains a `DepartmentID` foreign key column.</span></span> <span data-ttu-id="7c98d-196">Pokud byly dotazuje databázi přímo, získat název oddělení spolu s daty kurzu, budete muset připojit `Course` a `Department` tabulky.</span><span class="sxs-lookup"><span data-stu-id="7c98d-196">If you were querying the database directly, to get the department name along with course data, you would have to join the `Course` and `Department` tables.</span></span> <span data-ttu-id="7c98d-197">Nastavením `Include` vlastnost `Department`, určíte, že rozhraní Entity Framework musí provádět práci při získávání související `Department` entity při získá `Course` entity.</span><span class="sxs-lookup"><span data-stu-id="7c98d-197">By setting the `Include` property to `Department`, you specify that the Entity Framework should do the work of getting the related `Department` entity when it gets a `Course` entity.</span></span> <span data-ttu-id="7c98d-198">`Department` Entity je pak uloženy v `Department` vlastnost navigace `Course` entity.</span><span class="sxs-lookup"><span data-stu-id="7c98d-198">The `Department` entity is then stored in the `Department` navigation property of the `Course` entity.</span></span> <span data-ttu-id="7c98d-199">(Ve výchozím nastavení, `SchoolEntities` třídu, která byla generována pomocí návrháře dat modelu související data načte, když je to potřeba, a je vázaný prvek zdroje dat do třídy, takže nastavení `Include` vlastnost není nutné.</span><span class="sxs-lookup"><span data-stu-id="7c98d-199">(By default, the `SchoolEntities` class that was generated by the data model designer retrieves related data when it's needed, and you've bound the data source control to that class, so setting the `Include` property is not necessary.</span></span> <span data-ttu-id="7c98d-200">Však jeho nastavení zlepšuje výkon stránky, protože jinak rozhraní Entity Framework by samostatné volání do databáze k načtení dat `Course` entity a související `Department` entity.)</span><span class="sxs-lookup"><span data-stu-id="7c98d-200">However, setting it improves performance of the page, because otherwise the Entity Framework would make separate calls to the database to retrieve data for the `Course` entities and for the related `Department` entities.)</span></span>

<span data-ttu-id="7c98d-201">Po `EntityDataSource` řízení, které jste právě vytvořili, vložte následující kód k vytvoření `QueryExtender` ovládací prvek, který je vázaný na který `EntityDataSource` ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="7c98d-201">After the `EntityDataSource` control you just created, insert the following markup to create a `QueryExtender` control that's bound to that `EntityDataSource` control.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample7.aspx)]

<span data-ttu-id="7c98d-202">`SearchExpression` Element určuje, zda chcete vybrat kurzy, jejichž názvy odpovídají hodnotě zadané v textovém poli.</span><span class="sxs-lookup"><span data-stu-id="7c98d-202">The `SearchExpression` element specifies that you want to select courses whose titles match the value entered in the text box.</span></span> <span data-ttu-id="7c98d-203">Pouze podle počtu znaků se zadávají do textového pole budou porovnány, protože `SearchType` určuje vlastnost `StartsWith`.</span><span class="sxs-lookup"><span data-stu-id="7c98d-203">Only as many characters as are entered in the text box will be compared, because the `SearchType` property specifies `StartsWith`.</span></span>

<span data-ttu-id="7c98d-204">`OrderByExpression` Element určuje, že sadu výsledků dotazu bude seřazené podle kurzu název v rámci název oddělení.</span><span class="sxs-lookup"><span data-stu-id="7c98d-204">The `OrderByExpression` element specifies that the result set will be ordered by course title within department name.</span></span> <span data-ttu-id="7c98d-205">Všimněte si, jak je zadán název oddělení: `Department.Name`.</span><span class="sxs-lookup"><span data-stu-id="7c98d-205">Notice how department name is specified: `Department.Name`.</span></span> <span data-ttu-id="7c98d-206">Protože přidružení mezi `Course` entity a `Department` entita je 1: 1, `Department` obsahuje navigační vlastnost `Department` entity.</span><span class="sxs-lookup"><span data-stu-id="7c98d-206">Because the association between the `Course` entity and the `Department` entity is one-to-one, the `Department` navigation property contains a `Department` entity.</span></span> <span data-ttu-id="7c98d-207">(Pokud to byly vztah jeden mnoho, vlastnost by obsahuje kolekci.) Chcete-li získat název oddělení, musíte zadat `Name` vlastnost `Department` entity.</span><span class="sxs-lookup"><span data-stu-id="7c98d-207">(If this were a one-to-many relationship, the property would contain a collection.) To get the department name, you must specify the `Name` property of the `Department` entity.</span></span>

<span data-ttu-id="7c98d-208">Nakonec přidejte `GridView` prvek, který zobrazí seznam kurzů:</span><span class="sxs-lookup"><span data-stu-id="7c98d-208">Finally, add a `GridView` control to display the list of courses:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample8.aspx)]

<span data-ttu-id="7c98d-209">První sloupec je šablona pole, které zobrazuje název oddělení.</span><span class="sxs-lookup"><span data-stu-id="7c98d-209">The first column is a template field that displays the department name.</span></span> <span data-ttu-id="7c98d-210">Určuje výraz datové vazby `Department.Name`, stejně jako jste viděli v `QueryExtender` ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="7c98d-210">The databinding expression specifies `Department.Name`, just as you saw in the `QueryExtender` control.</span></span>

<span data-ttu-id="7c98d-211">Spuštění stránky.</span><span class="sxs-lookup"><span data-stu-id="7c98d-211">Run the page.</span></span> <span data-ttu-id="7c98d-212">Počáteční zobrazení zobrazuje seznam všech kurzů v pořadí podle oddělení a poté podle názvu kurzu.</span><span class="sxs-lookup"><span data-stu-id="7c98d-212">The initial display shows a list of all courses in order by department and then by course title.</span></span>

<span data-ttu-id="7c98d-213">[![Image11](the-entity-framework-and-aspnet-getting-started-part-3/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="7c98d-213">[![Image11](the-entity-framework-and-aspnet-getting-started-part-3/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image29.png)</span></span>

<span data-ttu-id="7c98d-214">Zadejte "m" a klikněte na **vyhledávání** zobrazíte všechny kurzy, jejichž názvy začínají řetězcem "m" (hledání není případ citlivé).</span><span class="sxs-lookup"><span data-stu-id="7c98d-214">Enter an "m" and click **Search** to see all courses whose titles begin with "m" (the search is not case sensitive).</span></span>

<span data-ttu-id="7c98d-215">[![Image12](the-entity-framework-and-aspnet-getting-started-part-3/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="7c98d-215">[![Image12](the-entity-framework-and-aspnet-getting-started-part-3/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image31.png)</span></span>

## <a name="using-the-like-operator-to-filter-data"></a><span data-ttu-id="7c98d-216">Pomocí operátoru "Jako" k filtrování dat</span><span class="sxs-lookup"><span data-stu-id="7c98d-216">Using the "Like" Operator to Filter Data</span></span>

<span data-ttu-id="7c98d-217">Můžete dosáhnout podobný vliv `QueryExtender` ovládacího prvku `StartsWith`, `Contains`, a `EndsWith` hledat typy pomocí `Like` operátor `EntityDataSource` ovládacího prvku `Where` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="7c98d-217">You can achieve an effect similar to the `QueryExtender` control's `StartsWith`, `Contains`, and `EndsWith` search types by using a `Like` operator in the `EntityDataSource` control's `Where` property.</span></span> <span data-ttu-id="7c98d-218">V této části kurzu, uvidíte, jak používat `Like` operátor hledání student podle názvu.</span><span class="sxs-lookup"><span data-stu-id="7c98d-218">In this part of the tutorial, you'll see how to use the `Like` operator to search for a student by name.</span></span>

<span data-ttu-id="7c98d-219">Otevřete *Students.aspx* v **zdroj** zobrazení.</span><span class="sxs-lookup"><span data-stu-id="7c98d-219">Open *Students.aspx* in **Source** view.</span></span> <span data-ttu-id="7c98d-220">Po `GridView` řídit, přidejte následující kód:</span><span class="sxs-lookup"><span data-stu-id="7c98d-220">After the `GridView` control, add the following markup:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample9.aspx)]

<span data-ttu-id="7c98d-221">Tento kód je podobná co jste se seznámili s dříve s výjimkou `Where` hodnotu vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="7c98d-221">This markup is similar to what you've seen earlier except for the `Where` property value.</span></span> <span data-ttu-id="7c98d-222">Druhá část `Where` výraz definuje dílčí řetězec hledání (`LIKE %FirstMidName% or LIKE %LastName%`), vyhledá první a poslední názvy pro ať je zadána v textovém poli.</span><span class="sxs-lookup"><span data-stu-id="7c98d-222">The second part of the `Where` expression defines a substring search (`LIKE %FirstMidName% or LIKE %LastName%`) that searches both the first and last names for whatever is entered in the text box.</span></span>

<span data-ttu-id="7c98d-223">Spuštění stránky.</span><span class="sxs-lookup"><span data-stu-id="7c98d-223">Run the page.</span></span> <span data-ttu-id="7c98d-224">Původně se všechny na studentů zobrazit, protože výchozí hodnota `StudentName` parametr je "%".</span><span class="sxs-lookup"><span data-stu-id="7c98d-224">Initially you see all of the students because the default value for the `StudentName` parameter is "%".</span></span>

<span data-ttu-id="7c98d-225">[![Image13](the-entity-framework-and-aspnet-getting-started-part-3/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="7c98d-225">[![Image13](the-entity-framework-and-aspnet-getting-started-part-3/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image33.png)</span></span>

<span data-ttu-id="7c98d-226">Do textového pole zadejte písmeno "g" a klikněte na **vyhledávání**.</span><span class="sxs-lookup"><span data-stu-id="7c98d-226">Enter the letter "g" in the text box and click **Search**.</span></span> <span data-ttu-id="7c98d-227">Zobrazí seznam studenty, kteří mají "g" buď jméno nebo příjmení.</span><span class="sxs-lookup"><span data-stu-id="7c98d-227">You see a list of students that have a "g" in either the first or last name.</span></span>

<span data-ttu-id="7c98d-228">[![Image14](the-entity-framework-and-aspnet-getting-started-part-3/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="7c98d-228">[![Image14](the-entity-framework-and-aspnet-getting-started-part-3/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image35.png)</span></span>

<span data-ttu-id="7c98d-229">Jste nyní zobrazí, aktualizovat, filtrovat, řazení a seskupené dat z jednotlivých tabulek.</span><span class="sxs-lookup"><span data-stu-id="7c98d-229">You've now displayed, updated, filtered, ordered, and grouped data from individual tables.</span></span> <span data-ttu-id="7c98d-230">V dalším kurzu budete začít pracovat s souvisejících dat (scénáře hlavní podrobné).</span><span class="sxs-lookup"><span data-stu-id="7c98d-230">In the next tutorial you'll begin to work with related data (master-detail scenarios).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="7c98d-231">[Předchozí](the-entity-framework-and-aspnet-getting-started-part-2.md)
> [další](the-entity-framework-and-aspnet-getting-started-part-4.md)</span><span class="sxs-lookup"><span data-stu-id="7c98d-231">[Previous](the-entity-framework-and-aspnet-getting-started-part-2.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-4.md)</span></span>
