---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/strategies-for-database-development-and-deployment-vb
title: Strategie pro vývoj databází a nasazení (VB) | Microsoft Docs
author: rick-anderson
description: Při nasazení aplikace datové poprvé můžete zkopírovat databázi slepě ve vývojovém prostředí do produkčního prostředí. B...
ms.author: aspnetcontent
manager: wpickett
ms.date: 04/23/2009
ms.topic: article
ms.assetid: 07b8905d-78ac-4252-97fb-8675b3fb0bbf
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/strategies-for-database-development-and-deployment-vb
msc.type: authoredcontent
ms.openlocfilehash: 26e6537b7cba704d3513a2e4ae32f9266834e6d3
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/06/2018
---
<a name="strategies-for-database-development-and-deployment-vb"></a><span data-ttu-id="cdac2-104">Strategie pro vývoj databází a nasazení (VB)</span><span class="sxs-lookup"><span data-stu-id="cdac2-104">Strategies for Database Development and Deployment (VB)</span></span>
====================
<span data-ttu-id="cdac2-105">podle [Scott Meisnerová](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="cdac2-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

[<span data-ttu-id="cdac2-106">Stáhnout PDF</span><span class="sxs-lookup"><span data-stu-id="cdac2-106">Download PDF</span></span>](http://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial10_DBDevel_vb.pdf)

> <span data-ttu-id="cdac2-107">Při nasazení aplikace datové poprvé můžete zkopírovat databázi slepě ve vývojovém prostředí do produkčního prostředí.</span><span class="sxs-lookup"><span data-stu-id="cdac2-107">When deploying a data-driven application for the first time you can blindly copy the database in the development environment to the production environment.</span></span> <span data-ttu-id="cdac2-108">Ale provádění blind kopírování v následných nasazení přepíše všechna data do provozní databáze.</span><span class="sxs-lookup"><span data-stu-id="cdac2-108">But performing a blind copy in subsequent deployments will overwrite any data entered into the production database.</span></span> <span data-ttu-id="cdac2-109">Místo toho nasazení databáze zahrnuje použití změn provedených v databázi vývoj od posledního nasazení do produkční databázi.</span><span class="sxs-lookup"><span data-stu-id="cdac2-109">Instead, deploying a database involves applying the changes made to the development database since the last deployment onto the production database.</span></span> <span data-ttu-id="cdac2-110">V tomto kurzu prozkoumá tyto problémy a nabízí různé strategie vám pomůže při chronicling a provádění změn databázi provedeny od posledního nasazení.</span><span class="sxs-lookup"><span data-stu-id="cdac2-110">This tutorial examines these challenges and offers various strategies to assist with chronicling and applying the changes made to the database since the last deployment.</span></span>


## <a name="introduction"></a><span data-ttu-id="cdac2-111">Úvod</span><span class="sxs-lookup"><span data-stu-id="cdac2-111">Introduction</span></span>

<span data-ttu-id="cdac2-112">Jak je popsáno v předchozí kurzy, nasazení aplikace ASP.NET zahrnuje kopírování příslušné obsah z vývojového prostředí do produkčního prostředí.</span><span class="sxs-lookup"><span data-stu-id="cdac2-112">As discussed in previous tutorials, deploying an ASP.NET application entails copying the pertinent content from the development environment to the production environment.</span></span> <span data-ttu-id="cdac2-113">Nasazení není jednorázové události, ale spíš něco, co se stane při každém vydání nové verze softwaru, nebo když chyb nebo z důvodů zabezpečení byl pravděpodobně identifikovat a řešit.</span><span class="sxs-lookup"><span data-stu-id="cdac2-113">Deployment is not a one-time event, but rather something that happens every time a new version of the software is released or when bugs or security concerns have been identified and addressed.</span></span> <span data-ttu-id="cdac2-114">Při kopírování stránek ASP.NET, obrázků, soubory JavaScript a dalších tyto soubory k produkčnímu prostředí nepotřebujete sami se týkají jak tyto souborem se změnily od posledního nasazení.</span><span class="sxs-lookup"><span data-stu-id="cdac2-114">When copying ASP.NET pages, images, JavaScript files, and other such files to the production environment you do not need to concern yourself with how these file have been changed since the last deployment.</span></span> <span data-ttu-id="cdac2-115">Můžete slepě zkopírujte soubor do produkčního prostředí, přepsání existujícího obsahu.</span><span class="sxs-lookup"><span data-stu-id="cdac2-115">You can blindly copy the file to production, overwriting the existing content.</span></span> <span data-ttu-id="cdac2-116">Tato jednoduchost bohužel neprodlužuje nasazení databáze.</span><span class="sxs-lookup"><span data-stu-id="cdac2-116">Unfortunately, this simplicity does not extend to deploying the database.</span></span>

<span data-ttu-id="cdac2-117">Při nasazení aplikace datové poprvé můžete zkopírovat databázi slepě ve vývojovém prostředí do produkčního prostředí.</span><span class="sxs-lookup"><span data-stu-id="cdac2-117">When deploying a data-driven application for the first time you can blindly copy the database in the development environment to the production environment.</span></span> <span data-ttu-id="cdac2-118">Ale provádění blind kopírování v následných nasazení přepíše všechna data do provozní databáze.</span><span class="sxs-lookup"><span data-stu-id="cdac2-118">But performing a blind copy in subsequent deployments will overwrite any data entered into the production database.</span></span> <span data-ttu-id="cdac2-119">Místo toho nasazení databáze zahrnuje použití *změny* provedených v databázi vývoj od posledního nasazení do produkční databázi.</span><span class="sxs-lookup"><span data-stu-id="cdac2-119">Instead, deploying a database involves applying the *changes* made to the development database since the last deployment onto the production database.</span></span> <span data-ttu-id="cdac2-120">V tomto kurzu prozkoumá tyto problémy a nabízí různé strategie vám pomůže při chronicling a provádění změn databázi provedeny od posledního nasazení.</span><span class="sxs-lookup"><span data-stu-id="cdac2-120">This tutorial examines these challenges and offers various strategies to assist with chronicling and applying the changes made to the database since the last deployment.</span></span>

## <a name="the-challenges-of-deploying-a-database"></a><span data-ttu-id="cdac2-121">Obtíže spojené s nasazení databází</span><span class="sxs-lookup"><span data-stu-id="cdac2-121">The Challenges of Deploying a Database</span></span>

<span data-ttu-id="cdac2-122">Předtím, než aplikaci na datové nasazený poprvé, je pouze jedna databáze, konkrétně databázi ve vývojovém prostředí, proto při nasazení aplikace datové poprvé slepě můžete kopírovat databázi vývojové prostředí do produkčního prostředí.</span><span class="sxs-lookup"><span data-stu-id="cdac2-122">Before a data-driven application has been deployed for the first time, there is only one database, namely the database in the development environment, which is why when deploying a data-driven application for the first time you can blindly copy the database in the development environment to the production environment.</span></span> <span data-ttu-id="cdac2-123">Jakmile je aplikace nasazená existují dvě kopie databáze, ale: jeden vývoj a jeden v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="cdac2-123">But once the application has been deployed there are two copies of the database: one in development and one in production.</span></span>

<span data-ttu-id="cdac2-124">Mezi nasazeními se může stát synchronizované vývoj a provozní databáze. Při schématu s produkční databáze zůstává beze změny, může změnit schéma vývoj databáze s při přidání nových funkcí.</span><span class="sxs-lookup"><span data-stu-id="cdac2-124">Between deployments the development and production databases can become out of sync. While the production database s schema remains unchanged, the development database s schema may change as new features are added.</span></span> <span data-ttu-id="cdac2-125">Může přidat nebo odebrat sloupce, tabulky, zobrazení nebo uložené procedury.</span><span class="sxs-lookup"><span data-stu-id="cdac2-125">You might add or remove columns, tables, views, or stored procedures.</span></span> <span data-ttu-id="cdac2-126">Také může být důležitá data, která bude přidána do databáze vývoj.</span><span class="sxs-lookup"><span data-stu-id="cdac2-126">There may also be important data that gets added to the development database.</span></span> <span data-ttu-id="cdac2-127">Mnoho aplikací řízené daty zahrnují vyhledávací tabulky naplněný daty pevně, specifické pro aplikaci, která se nedají upravovat uživatele.</span><span class="sxs-lookup"><span data-stu-id="cdac2-127">Many data-driven applications include lookup tables populated with hard-coded, application-specific data that are not user-editable.</span></span> <span data-ttu-id="cdac2-128">Například webem aukce může mít rozevíracího seznamu s možností, které popisují podmínku položky se aukční režim: nové, jako je nové, funkční a veletrhu.</span><span class="sxs-lookup"><span data-stu-id="cdac2-128">For example, an auction website might have a drop-down list with choices that describe the condition of the item being auctioned: New, Like New, Good, and Fair.</span></span> <span data-ttu-id="cdac2-129">Místo pevně kódováno tyto možnosti přímo v rozevíracím seznamu je obvykle lepší umístit do databázové tabulky.</span><span class="sxs-lookup"><span data-stu-id="cdac2-129">Rather than hard-coding these options directly in the drop-down list it is usually better to place them in a database table.</span></span> <span data-ttu-id="cdac2-130">Pokud během vývoje, novou podmínku s názvem nízká se přidá do tabulky pak při nasazování aplikace tento stejný záznam musí být přidán do vyhledávací tabulky v produkční databázi.</span><span class="sxs-lookup"><span data-stu-id="cdac2-130">If, during development, a new condition named Poor is added to the table then when deploying the application this same record needs to be added to the lookup table in the production database.</span></span>

<span data-ttu-id="cdac2-131">Nasazení databáze v ideálním případě by zahrnovat kopírování databáze z vývojového do produkčního prostředí.</span><span class="sxs-lookup"><span data-stu-id="cdac2-131">Ideally, deploying the database would involve copying the database from development to production.</span></span> <span data-ttu-id="cdac2-132">Ale mějte na paměti, že po nasazení aplikace a obnovit vývoj, provozní databáze je právě naplněný reálná data z reálného uživatele.</span><span class="sxs-lookup"><span data-stu-id="cdac2-132">But keep in mind that after you have deployed the application and resumed development, the production database is being populated with real data from real users.</span></span> <span data-ttu-id="cdac2-133">Proto pokud byste chtěli jednoduše zkopírovat databázi z vývojového do produkčního prostředí na další nasazení by přepsat provozní databáze a ztratit své stávající data.</span><span class="sxs-lookup"><span data-stu-id="cdac2-133">Therefore, if you were to simply copy the database from development to production at the next deployment you would overwrite the production database and lose its existing data.</span></span> <span data-ttu-id="cdac2-134">Net výsledkem je, že nasazení databáze boils k provádění změn provedených v databázi vývoj od posledního nasazení.</span><span class="sxs-lookup"><span data-stu-id="cdac2-134">The net result is that deploying the database boils down to applying the changes made to the development database since the last deployment.</span></span>

<span data-ttu-id="cdac2-135">Vzhledem k tomu, že nasazení databáze zahrnuje použití změn v schéma a případně i data od posledního nasazení, historii změn musí být zachována (nebo v době nasazení určit) tak, aby tyto změny mohou být použity na produkční.</span><span class="sxs-lookup"><span data-stu-id="cdac2-135">Because deploying a database involves applying the changes in the schema and, possibly, the data since the last deployment, a history of changes must be maintained (or determined at deploy-time) so that those changes can be applied on production.</span></span> <span data-ttu-id="cdac2-136">Existují různé postupy pro správu a při použití změn do datového modelu.</span><span class="sxs-lookup"><span data-stu-id="cdac2-136">There are a variety of techniques for managing and applying changes to the data model.</span></span>

### <a name="defining-the-baseline"></a><span data-ttu-id="cdac2-137">Definování směrného plánu</span><span class="sxs-lookup"><span data-stu-id="cdac2-137">Defining the Baseline</span></span>

<span data-ttu-id="cdac2-138">Chcete-li udržovat změny do databáze s vaší aplikací mít některé počáteční stav, ke kterému se změny použijí pro směrný plán.</span><span class="sxs-lookup"><span data-stu-id="cdac2-138">To maintain the changes to your application s database you need to have some starting state, a baseline to which the changes are applied to.</span></span> <span data-ttu-id="cdac2-139">V jedné extreme počáteční stav může být prázdnou databázi bez tabulek, zobrazení nebo uložené procedury.</span><span class="sxs-lookup"><span data-stu-id="cdac2-139">At one extreme the starting state could be an empty database with no tables, views, or stored procedures.</span></span> <span data-ttu-id="cdac2-140">Tyto standardní hodnoty dochází protokol velké změny, protože musí zahrnovat vytváření všech databáze s tabulek, zobrazení a uložených procedur společně s veškeré změny provedené po počátečním nasazení.</span><span class="sxs-lookup"><span data-stu-id="cdac2-140">Such a baseline results in a large change log because it must include the creation of all of the database s tables, views, and stored procedures along with any changes made after the initial deployment.</span></span> <span data-ttu-id="cdac2-141">Na druhém konci spektra můžete nastavit směrného plánu jako verzi databáze, která je původně nasazena do produkčního prostředí.</span><span class="sxs-lookup"><span data-stu-id="cdac2-141">At the other end of the spectrum you could set the baseline as the version of the database that is initially deployed to the production environment.</span></span> <span data-ttu-id="cdac2-142">Tato volba výsledkem mnohem menší změny protokolu, protože obsahuje pouze změny provedené v databázi po prvním nasazení.</span><span class="sxs-lookup"><span data-stu-id="cdac2-142">This choice results in a much smaller change log because it only includes the changes made to the database following the first deployment.</span></span> <span data-ttu-id="cdac2-143">Toto je přístupů, které nechci.</span><span class="sxs-lookup"><span data-stu-id="cdac2-143">This is the approach I prefer.</span></span> <span data-ttu-id="cdac2-144">A samozřejmě můžete zvolit další střední tohoto přístupu silniční definování směrný plán s některými bodu mezi počáteční vytváření databáze a kdy je databáze poprvé nasazeno.</span><span class="sxs-lookup"><span data-stu-id="cdac2-144">And of course you can choose a more middle of the road approach, defining the baseline as some point between the initial creation of the database and when the database is first deployed.</span></span>

<span data-ttu-id="cdac2-145">Jakmile máte vybrat směrný plán zvažte generování skriptu SQL, které mohou být provedeny znovu vytvořit základní verzi.</span><span class="sxs-lookup"><span data-stu-id="cdac2-145">Once you have chosen a baseline consider generating a SQL script that can be executed to recreate the baseline version.</span></span> <span data-ttu-id="cdac2-146">Takového skriptu umožňuje rychle znovu vytvořit základní verzi databáze.</span><span class="sxs-lookup"><span data-stu-id="cdac2-146">Such a script makes it possible to quickly recreate the baseline version of the database.</span></span> <span data-ttu-id="cdac2-147">Tato funkce je obzvláště užitečná v větší projekty, kde může být více vývojáře, kteří pracují v projektu nebo další prostředí, například testování nebo pracovní, že každý potřebovat vlastní kopii databáze.</span><span class="sxs-lookup"><span data-stu-id="cdac2-147">This functionality is especially useful in larger projects, where there may be multiple developers working on the project or additional environments, such as testing or staging, that each need their own copy of the database.</span></span>

<span data-ttu-id="cdac2-148">Existuje mnoho různých nástrojů k dispozici vygenerovat skript SQL základní verze.</span><span class="sxs-lookup"><span data-stu-id="cdac2-148">There are a variety of tools at your disposal to generate a SQL script of the baseline version.</span></span> <span data-ttu-id="cdac2-149">Z SQL Server Management Studio (SSMS) můžete kliknout na databázi pravým tlačítkem, přejděte na dílčí úlohy a vyberte možnost generování skriptů.</span><span class="sxs-lookup"><span data-stu-id="cdac2-149">From SQL Server Management Studio (SSMS) you can right-click on the database, go to the Tasks submenu, and choose the Generate Scripts option.</span></span> <span data-ttu-id="cdac2-150">Spustí se průvodce skript, který můžete určit, aby generovat soubor, který obsahuje příkazy SQL k vytvoření databáze s objekty.</span><span class="sxs-lookup"><span data-stu-id="cdac2-150">This launches the Script Wizard, which you can instruct to generate a file that contains the SQL commands to create your database s objects.</span></span> <span data-ttu-id="cdac2-151">Další možností je Průvodce publikováním databáze, který může generovat příkazů SQL pro nejen vytvoření schématu databáze, ale také data v tabulkách databáze.</span><span class="sxs-lookup"><span data-stu-id="cdac2-151">Another option is the Database Publishing Wizard, which can generate the SQL commands to not only create the database schema, but also the data in the database tables.</span></span> <span data-ttu-id="cdac2-152">V Průvodci publikování databáze bylo podrobně zpět v *nasazení databáze* kurzu.</span><span class="sxs-lookup"><span data-stu-id="cdac2-152">The Database Publishing Wizard was examined in detail back in the *Deploying a Database* tutorial.</span></span> <span data-ttu-id="cdac2-153">Bez ohledu na to, jaký nástroj použijete, v části end byste měli mít soubor skriptu, který můžete použít k opětovnému vytvoření základní verzi databáze, měli potřeba nastat.</span><span class="sxs-lookup"><span data-stu-id="cdac2-153">Regardless of what tool you use, in the end you should have a script file that you can use to recreate the baseline version of your database, should the need arise.</span></span>

## <a name="documenting-the-database-changes-in-prose"></a><span data-ttu-id="cdac2-154">Dokumentace změny databáze v souvislém textu</span><span class="sxs-lookup"><span data-stu-id="cdac2-154">Documenting the Database Changes in Prose</span></span>

<span data-ttu-id="cdac2-155">Nejjednodušší způsob, jak udržovat protokol změn do datového modelu v průběhu fáze vývoje je záznam změn v souvislém textu.</span><span class="sxs-lookup"><span data-stu-id="cdac2-155">The simplest way to maintain a log of changes to the data model during the development phase is to record the changes in prose.</span></span> <span data-ttu-id="cdac2-156">Například, pokud během vývoje aplikace, už nasazená přidat nový sloupec na `Employees` tabulky, odeberte sloupce z `Orders` tabulky a přidejte novou tabulku (`ProductCategories`), by spravovat textový soubor nebo dokument aplikace Microsoft Word pomocí následujících historie:</span><span class="sxs-lookup"><span data-stu-id="cdac2-156">For example, if during development of an already-deployed application you add a new column to the `Employees` table, remove a column from the `Orders` table, and add a new table (`ProductCategories`), you would maintain a text file or Microsoft Word document with the following history:</span></span>

<a id="0.8_table01"></a>


| <span data-ttu-id="cdac2-157">**Datum změny**</span><span class="sxs-lookup"><span data-stu-id="cdac2-157">**Change Date**</span></span> | <span data-ttu-id="cdac2-158">**Změňte podrobnosti**</span><span class="sxs-lookup"><span data-stu-id="cdac2-158">**Change Details**</span></span> |
| --- | --- |
| <span data-ttu-id="cdac2-159">2009-02-03:</span><span class="sxs-lookup"><span data-stu-id="cdac2-159">2009-02-03:</span></span> | <span data-ttu-id="cdac2-160">Přidání sloupce `DepartmentID` (`int`, není NULL) k `Employees` tabulky.</span><span class="sxs-lookup"><span data-stu-id="cdac2-160">Added column `DepartmentID` (`int`, NOT NULL) to the `Employees` table.</span></span> <span data-ttu-id="cdac2-161">Přidat omezení cizího klíče z `Departments.DepartmentID` k `Employees.DepartmentID`.</span><span class="sxs-lookup"><span data-stu-id="cdac2-161">Added a foreign key constraint from `Departments.DepartmentID` to `Employees.DepartmentID`.</span></span> |
| <span data-ttu-id="cdac2-162">2009-02-05:</span><span class="sxs-lookup"><span data-stu-id="cdac2-162">2009-02-05:</span></span> | <span data-ttu-id="cdac2-163">Odebrané sloupec `TotalWeight` z `Orders` tabulky.</span><span class="sxs-lookup"><span data-stu-id="cdac2-163">Removed column `TotalWeight` from the `Orders` table.</span></span> <span data-ttu-id="cdac2-164">Související data již zaznamenaná v `OrderDetails` záznamy.</span><span class="sxs-lookup"><span data-stu-id="cdac2-164">Data already captured in associated `OrderDetails` records.</span></span> |
| <span data-ttu-id="cdac2-165">2009-02-12:</span><span class="sxs-lookup"><span data-stu-id="cdac2-165">2009-02-12:</span></span> | <span data-ttu-id="cdac2-166">Vytvořit `ProductCategories` tabulky.</span><span class="sxs-lookup"><span data-stu-id="cdac2-166">Created the `ProductCategories` table.</span></span> <span data-ttu-id="cdac2-167">Existují tři sloupce: `ProductCategoryID` (`int`, `IDENTITY`, `NOT NULL`), `CategoryName` (`nvarchar(50)`, `NOT NULL`), a `Active` (`bit`, `NOT NULL`).</span><span class="sxs-lookup"><span data-stu-id="cdac2-167">There are three columns: `ProductCategoryID` (`int`, `IDENTITY`, `NOT NULL`), `CategoryName` (`nvarchar(50)`, `NOT NULL`), and `Active` (`bit`, `NOT NULL`).</span></span> <span data-ttu-id="cdac2-168">Přidat omezení primárního klíče do `ProductCategoryID`a výchozí hodnota 1 znamená `Active`.</span><span class="sxs-lookup"><span data-stu-id="cdac2-168">Added a primary key constraint to `ProductCategoryID`, and a default value of 1 to `Active`.</span></span> |


<span data-ttu-id="cdac2-169">Existuje několik nevýhod tohoto přístupu.</span><span class="sxs-lookup"><span data-stu-id="cdac2-169">There are a number of drawbacks to this approach.</span></span> <span data-ttu-id="cdac2-170">Pro začátek neexistuje žádné Naděje pro automatizaci.</span><span class="sxs-lookup"><span data-stu-id="cdac2-170">For starters, there is no hope for automation.</span></span> <span data-ttu-id="cdac2-171">Tyto změny kdykoli potřebovat má být použita pro databázi – například když je aplikace nasazená – vývojář musí implementovat ručně každý změnit, po jednom.</span><span class="sxs-lookup"><span data-stu-id="cdac2-171">Anytime these changes need to be applied to a database - such as when the application is deployed - a developer must manually implement each change, one at a time.</span></span> <span data-ttu-id="cdac2-172">Kromě toho pokud potřebujete rekonstrukci konkrétní verzi databáze ze směrného plánu pomocí protokol změn, to tak bude trvat více času s růstem velikosti souboru protokolu.</span><span class="sxs-lookup"><span data-stu-id="cdac2-172">Moreover, if you need to reconstruct a particular version of the database from the baseline using the change log, doing so will take more and more time as the size of the log grows.</span></span> <span data-ttu-id="cdac2-173">Tato metoda jiné nevýhodou je, že přehlednost a úroveň podrobností každé položky protokolu změn je ponechán osobě záznam změn.</span><span class="sxs-lookup"><span data-stu-id="cdac2-173">Another drawback to this method is that the clarity and level of detail of each change log entry is left to the person recording the change.</span></span> <span data-ttu-id="cdac2-174">Ve skupině s více vývojáři některé může být podrobnější, srozumitelnější nebo přesnější položek než jiné.</span><span class="sxs-lookup"><span data-stu-id="cdac2-174">In a team with multiple developers some may make more detailed, more readable, or more precise entries than others.</span></span> <span data-ttu-id="cdac2-175">Také je možné překlepy a další data související s lidské chyby položku.</span><span class="sxs-lookup"><span data-stu-id="cdac2-175">Also, typos and other human-related data entry errors are possible.</span></span>

<span data-ttu-id="cdac2-176">Hlavní výhodou dokumentace změny databáze v souvislém textu je jednoduchost.</span><span class="sxs-lookup"><span data-stu-id="cdac2-176">The primary benefit of documenting the database changes in prose is simplicity.</span></span> <span data-ttu-id="cdac2-177">Neuděláte t nutné znalost syntaxe jazyka SQL pro vytváření a změny databázové objekty.</span><span class="sxs-lookup"><span data-stu-id="cdac2-177">You don t need familiarity with the SQL syntax for creating and altering database objects.</span></span> <span data-ttu-id="cdac2-178">Místo toho můžete záznam změn v souvislém textu a implementovat je pomocí SQL Server Management Studio s grafickým uživatelským rozhraním.</span><span class="sxs-lookup"><span data-stu-id="cdac2-178">Instead, you can record the changes in prose and implement them through SQL Server Management Studio s graphical user interface.</span></span>

<span data-ttu-id="cdac2-179">Zachování změnu přihlášení prose není, admittedly, velmi sofistikované a získané t pracovní dobře u určité projekty, jako je ta, která jsou v oboru, velké máte časté změny do datového modelu, nebo zahrnují více vývojářů.</span><span class="sxs-lookup"><span data-stu-id="cdac2-179">Maintaining your change log in prose is, admittedly, not very sophisticated and won t work well with certain projects, such as ones that are large in scope, have frequent changes to the data model, or involve multiple developers.</span></span> <span data-ttu-id="cdac2-180">Ale viděli jste tento přístup velmi dobře fungovaly v malých one-man projektů kde samotné vývojáře nemá silné pozadí v SQL syntaxi pro vytváření a změny databázové objekty, které mají pouze příležitostně změny do datového modelu.</span><span class="sxs-lookup"><span data-stu-id="cdac2-180">But I have seen this approach work quite well in small, one-man projects that have only occasional changes to the data model and where the solo developer does not have a strong background in the SQL syntax for creating and altering database objects.</span></span>

> [!NOTE]
> <span data-ttu-id="cdac2-181">Zatímco informace v protokolu změn je technicky potřeba jenom dokud nasazení čas, abyste se udržuje historii změn.</span><span class="sxs-lookup"><span data-stu-id="cdac2-181">While the information in the change log is, technically, only needed until deploy-time, I recommend keeping a history of changes.</span></span> <span data-ttu-id="cdac2-182">Ale namísto zachování jedné, neustále rozšiřující změna souboru protokolu, zvažte, zda soubor jiné změny protokolu pro každou verzi databáze.</span><span class="sxs-lookup"><span data-stu-id="cdac2-182">But rather than maintaining a single, ever growing change log file, consider having a different change log file for each database version.</span></span> <span data-ttu-id="cdac2-183">Obvykle budete chtít verze databáze pokaždé, když je nasazena.</span><span class="sxs-lookup"><span data-stu-id="cdac2-183">Typically you will want to version the database each time it is deployed.</span></span> <span data-ttu-id="cdac2-184">Udržováním protokolu protokoly můžete, od standardních hodnot, znovu vytvořit všechny verze databáze spuštěním skriptů protokol změn od verze 1 a budete pokračovat, dokud se nedostanete na verzi, budete muset znovu vytvořit.</span><span class="sxs-lookup"><span data-stu-id="cdac2-184">By maintaining a log of change logs you can, starting from the baseline, recreate any database version by executing the change log scripts starting from version 1 and continuing until you reach the version you need to recreate.</span></span>


## <a name="recording-the-sql-change-statements"></a><span data-ttu-id="cdac2-185">Záznam změn příkazy SQL</span><span class="sxs-lookup"><span data-stu-id="cdac2-185">Recording the SQL Change Statements</span></span>

<span data-ttu-id="cdac2-186">Primární navracení zachování protokol změn v souvislém textu je nedostatek automatizace.</span><span class="sxs-lookup"><span data-stu-id="cdac2-186">The primary drawback of maintaining the change log in prose is the lack of automation.</span></span> <span data-ttu-id="cdac2-187">V ideálním případě implementace změn databáze do provozní databáze v době nasazení může být stejně snadná jako kliknutím na tlačítko pro spuštění skriptu, namísto nutnosti ručně provést seznam pokyny.</span><span class="sxs-lookup"><span data-stu-id="cdac2-187">Ideally, implementing the database changes to the production database at deploy-time would be as easy as clicking a button to execute a script rather than having to manually perform a list of instructions.</span></span> <span data-ttu-id="cdac2-188">Tato automatizace je možné zachování protokol změn, která obsahuje tyto příkazy SQL, které používají pro úpravu datový model.</span><span class="sxs-lookup"><span data-stu-id="cdac2-188">Such automation is possible by maintaining a change log that contains those SQL commands used to alter the data model.</span></span>

<span data-ttu-id="cdac2-189">Syntaxe SQL obsahuje počet příkazů pro vytvoření a úprava různé objekty databáze.</span><span class="sxs-lookup"><span data-stu-id="cdac2-189">The SQL syntax includes a number of statements for creating and modifying various database objects.</span></span> <span data-ttu-id="cdac2-190">Například [ *příkazu CREATE TABLE*](https://msdn.microsoft.com/library/ms174979.aspx), je-li provést, vytvoří novou tabulku s použitím zadaných sloupců a omezení.</span><span class="sxs-lookup"><span data-stu-id="cdac2-190">For example, the [*CREATE TABLE statement*](https://msdn.microsoft.com/library/ms174979.aspx), when executed, creates a new table with the specified columns and constraints.</span></span> <span data-ttu-id="cdac2-191">[ *Příkaz ALTER TABLE* ](https://msdn.microsoft.com/library/ms190273.aspx) upraví existující tabulky, přidání, odebrání nebo změna jeho sloupce nebo omezení.</span><span class="sxs-lookup"><span data-stu-id="cdac2-191">The [*ALTER TABLE statement*](https://msdn.microsoft.com/library/ms190273.aspx) modifies an existing table, adding, removing, or modifying its columns or constraints.</span></span> <span data-ttu-id="cdac2-192">Existují také příkazy k vytvoření, úpravě a vyřadit indexy, zobrazení, uživatelem definované funkce, uložené procedury, aktivační události a dalších databázové objekty.</span><span class="sxs-lookup"><span data-stu-id="cdac2-192">There are also statements to create, modify, and drop indexes, views, user-defined functions, stored procedures, triggers, and other database objects.</span></span>

<span data-ttu-id="cdac2-193">Vrácení k naší předchozího příkladu bitové kopie, kterou během vývoje aplikace už nasazená přidat nový sloupec na `Employees` tabulky, odeberte sloupce z `Orders` tabulky a přidejte novou tabulku (`ProductCategories`).</span><span class="sxs-lookup"><span data-stu-id="cdac2-193">Returning to our earlier example, image that during development of an already-deployed application you add a new column to the `Employees` table, remove a column from the `Orders` table, and add a new table (`ProductCategories`).</span></span> <span data-ttu-id="cdac2-194">Taková akce by způsobilo soubor protokolu změnit pomocí následujících příkazů SQL:</span><span class="sxs-lookup"><span data-stu-id="cdac2-194">Such actions would result in a change log file with the following SQL commands:</span></span>

[!code-sql[Main](strategies-for-database-development-and-deployment-vb/samples/sample1.sql)]

<span data-ttu-id="cdac2-195">Nabízení tyto změny do provozní databáze v době nasazení je operace jedním kliknutím: Otevřete SQL Server Management Studio, připojení k provozní databázi, otevřete okno Nový dotaz, vložte obsah protokol změn a klikněte na tlačítko spustit pro spuštění skriptu.</span><span class="sxs-lookup"><span data-stu-id="cdac2-195">Pushing these changes to the production database at deploy-time is a one-click operation: open SQL Server Management Studio, connect to your production database, open a New Query window, paste the contents of the change log, and click Execute to run the script.</span></span>

## <a name="using-a-comparison-tool-to-synchronize-the-data-models"></a><span data-ttu-id="cdac2-196">Pomocí nástroje porovnání synchronizace datové modely</span><span class="sxs-lookup"><span data-stu-id="cdac2-196">Using a Comparison Tool to Synchronize the Data Models</span></span>

<span data-ttu-id="cdac2-197">Dokumentace změny databáze v souvislém textu je jednoduché, ale implementace změny vyžaduje vývojáře, aby každé změně na produkční databázi, jeden najednou. dokumentace příkazy SQL změnu implementace tyto změny na produkční databázi jako snadno a rychle jako při kliknutí na tlačítko se však vyžaduje učení a ovládnutí koncepcí příkazů jazyka SQL a syntaxe pro vytváření a změny databázové objekty.</span><span class="sxs-lookup"><span data-stu-id="cdac2-197">Documenting database changes in prose is easy, but implementing the changes requires a developer to make each change on the production database one at a time; documenting the change SQL commands makes implementing those changes on the production database as easy and quick as clicking a button, but requires learning and mastering the SQL statements and syntax for creating and altering database objects.</span></span> <span data-ttu-id="cdac2-198">Nástroje pro porovnání databáze využít nejlepší z obou přístupů a zahodit nejhoršího.</span><span class="sxs-lookup"><span data-stu-id="cdac2-198">Database comparison tools take the best from both approaches and discard the worst.</span></span>

<span data-ttu-id="cdac2-199">Nástroj pro porovnání databáze porovná schématu nebo data z obou databází a zobrazí souhrnná sestava ukazuje, jak se liší databáze.</span><span class="sxs-lookup"><span data-stu-id="cdac2-199">A database comparison tool compares the schema or data of two databases and displays a summary report showing you how the databases differ.</span></span> <span data-ttu-id="cdac2-200">Potom se kliknutím na tlačítko můžete vygenerovat příkazy SQL pro synchronizaci jeden nebo více objektů databáze.</span><span class="sxs-lookup"><span data-stu-id="cdac2-200">Then, with the click of a button, you can generate the SQL commands for synchronizing one or more database objects.</span></span> <span data-ttu-id="cdac2-201">Stručně řečeno, nástroj pro porovnání databáze můžete použít k porovnání vývoj a provozní databáze v době nasazení, generování soubor, který obsahuje SQL příkazů, když provést, se použijí změny schématu databáze s provozním proto to odpovídá schématu databáze s vývoj.</span><span class="sxs-lookup"><span data-stu-id="cdac2-201">In a nutshell, you can use a database comparison tool to compare the development and production databases at deploy-time, generating a file that contains the SQL commands that, when executed, will apply the changes to the production database s schema so that it mirrors the development database s schema.</span></span>

<span data-ttu-id="cdac2-202">Existují různé nástroje třetích stran databáze porovnání, které nabízí mnoho různých výrobců.</span><span class="sxs-lookup"><span data-stu-id="cdac2-202">There are a variety of third-party database comparison tools offered by many different vendors.</span></span> <span data-ttu-id="cdac2-203">Jedním z těchto příkladů je [ *porovnat SQL*](http://www.red-gate.com/products/SQL_Compare/), pomocí [ *softwaru brány Red*](http://www.red-gate.com/).</span><span class="sxs-lookup"><span data-stu-id="cdac2-203">One such example is [*SQL Compare*](http://www.red-gate.com/products/SQL_Compare/), by [*Red Gate Software*](http://www.red-gate.com/).</span></span> <span data-ttu-id="cdac2-204">Umožní s detailně provede procesem pomocí SQL porovnat porovnat a synchronizaci databáze schémata vývoj a provozní.</span><span class="sxs-lookup"><span data-stu-id="cdac2-204">Let s walk through the process of using SQL Compare to compare and synchronize the development and production databases schemas.</span></span>

> [!NOTE]
> <span data-ttu-id="cdac2-205">V době psaní tohoto textu byla aktuální verze SQL porovnat verze 7.1, s výpočet nákladů $395 Standard Edition.</span><span class="sxs-lookup"><span data-stu-id="cdac2-205">At the time of this writing the current version of SQL Compare was version 7.1, with the Standard Edition costing $395.</span></span> <span data-ttu-id="cdac2-206">Můžete absolvovat stažením bezplatnou zkušební verzi 14 dnů.</span><span class="sxs-lookup"><span data-stu-id="cdac2-206">You can follow along by downloading a free 14-day trial.</span></span>


<span data-ttu-id="cdac2-207">Při porovnání SQL spuštění otevře se dialogové okno porovnání projekty zobrazující uložených projektů porovnat SQL.</span><span class="sxs-lookup"><span data-stu-id="cdac2-207">When SQL Compare starts the Comparison Projects dialog box opens, showing the saved SQL Compare projects.</span></span> <span data-ttu-id="cdac2-208">Vytvořte nový projekt.</span><span class="sxs-lookup"><span data-stu-id="cdac2-208">Create a new project.</span></span> <span data-ttu-id="cdac2-209">Spustí se Průvodce konfigurací projektu, kde informace o databázi k porovnání (viz obrázek 1).</span><span class="sxs-lookup"><span data-stu-id="cdac2-209">This launches the Project Configuration wizard, which prompts for information about the databases to compare (see Figure 1).</span></span> <span data-ttu-id="cdac2-210">Zadejte informace pro vývoj a provozní databáze prostředí.</span><span class="sxs-lookup"><span data-stu-id="cdac2-210">Enter the information for the development and production environment databases.</span></span>


<span data-ttu-id="cdac2-211">[![Porovnání vývoj a provozní databáze](strategies-for-database-development-and-deployment-vb/_static/image2.jpg)](strategies-for-database-development-and-deployment-vb/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="cdac2-211">[![Compare the Development and Production Databases](strategies-for-database-development-and-deployment-vb/_static/image2.jpg)](strategies-for-database-development-and-deployment-vb/_static/image1.jpg)</span></span>

<span data-ttu-id="cdac2-212">**Obrázek 1**: porovnání vývoj a provozních databází ([Kliknutím zobrazit obrázek v plné velikosti](strategies-for-database-development-and-deployment-vb/_static/image3.jpg))</span><span class="sxs-lookup"><span data-stu-id="cdac2-212">**Figure 1**: Compare the Development and Production Databases ([Click to view full-size image](strategies-for-database-development-and-deployment-vb/_static/image3.jpg))</span></span>


> [!NOTE]
> <span data-ttu-id="cdac2-213">Pokud je databáze prostředí vývoj soubor databáze SQL Express Edition `App_Data` složku vašeho webu, budete muset zaregistrovat databázi v databázi serveru SQL Server Express, abyste jej zvolit z dialogových oken na obrázku 1.</span><span class="sxs-lookup"><span data-stu-id="cdac2-213">If your development environment database is a SQL Express Edition database file in the `App_Data` folder of your website you will need to register the database in the SQL Server Express database server in order to select it from the dialog box shown in Figure 1.</span></span> <span data-ttu-id="cdac2-214">Nejjednodušší způsob, jak tomu je otevřít SQL Server Management Studio (SSMS), připojení k databázi serveru SQL Server Express a připojte databázi.</span><span class="sxs-lookup"><span data-stu-id="cdac2-214">The easiest way to accomplish this is to open SQL Server Management Studio (SSMS), connect to the SQL Server Express database server, and attach the database.</span></span> <span data-ttu-id="cdac2-215">Pokud nemáte v počítači nainstalována aplikace SSMS můžete stáhnout a nainstalovat bezplatnou [ *SQL Server 2008 Management Studio základní verze*](https://www.microsoft.com/downloads/details.aspx?FamilyId=7522A683-4CB2-454E-B908-E805E9BD4E28&amp;displaylang=en).</span><span class="sxs-lookup"><span data-stu-id="cdac2-215">If you do not have SSMS installed on your computer you can download and install the free [*SQL Server 2008 Management Studio Basic version*](https://www.microsoft.com/downloads/details.aspx?FamilyId=7522A683-4CB2-454E-B908-E805E9BD4E28&amp;displaylang=en).</span></span>


<span data-ttu-id="cdac2-216">Kromě vyberete databáze pro porovnání, můžete také zadat řadu porovnání nastavení na kartě Možnosti. Jednou z možností, které chcete zapnout je "Ignorovat omezení a index názvy."</span><span class="sxs-lookup"><span data-stu-id="cdac2-216">In addition to selecting the databases to compare, you can also specify a variety of comparison settings from the Options tab. One option you may want to turn on is the "Ignore constraint and index names."</span></span> <span data-ttu-id="cdac2-217">Odvolat, že v předchozím kurzu jsme přidali, že aplikace služby databázové objekty pro vývoj a provozní databáze.</span><span class="sxs-lookup"><span data-stu-id="cdac2-217">Recall that in the preceding tutorial we added the application services database objects to the development and production databases.</span></span> <span data-ttu-id="cdac2-218">Pokud jste použili `aspnet_regsql.exe` nástroj k vytváření těchto objektů na produkční databázi pak zjistíte, že se primární klíč a názvy jedinečné omezení liší vývoj a provozní databáze.</span><span class="sxs-lookup"><span data-stu-id="cdac2-218">If you used the `aspnet_regsql.exe` tool to create these objects on the production database then you will find that the primary key and unique constraint names differ between the development and production databases.</span></span> <span data-ttu-id="cdac2-219">V důsledku toho porovnat SQL bude příznak všechny tabulky služby aplikace jako liší.</span><span class="sxs-lookup"><span data-stu-id="cdac2-219">Consequently, SQL Compare will flag all of the application services tables as differing.</span></span> <span data-ttu-id="cdac2-220">Můžete buď ponechat "Ignorovat omezení a index názvy" nezaškrtnuté a synchronizovat názvy omezení, nebo požádejte SQL porovnat ignorovat tyto rozdíly.</span><span class="sxs-lookup"><span data-stu-id="cdac2-220">You can either leave the "Ignore constraint and index names" unchecked and synchronize the constraint names, or instruct SQL Compare to ignore these differences.</span></span>

<span data-ttu-id="cdac2-221">Po výběru databáze porovnání (a porovnání možnosti revize), klikněte na tlačítko porovnat teď zahájíte porovnání.</span><span class="sxs-lookup"><span data-stu-id="cdac2-221">After selecting the databases to compare (and reviewing the comparison options), click the Compare Now button to begin the comparison.</span></span> <span data-ttu-id="cdac2-222">Přes několik dalších sekund porovnat SQL prozkoumá schémata ve dvou databázích a vygeneruje zprávu o tom, jak se liší.</span><span class="sxs-lookup"><span data-stu-id="cdac2-222">Over the next several seconds, SQL Compare examines the schemas of the two databases and generates a report of how they differ.</span></span> <span data-ttu-id="cdac2-223">I sunout záměrně provedeny některé změny databáze vývoj zobrazit, jak tyto rozdíly jsou uvedeny v rozhraní SQL porovnat.</span><span class="sxs-lookup"><span data-stu-id="cdac2-223">I ve purposefully made some modifications to the development database to show how such discrepancies are noted in the SQL Compare interface.</span></span> <span data-ttu-id="cdac2-224">Jak je vidět na obrázku 2, I byla přidána `BirthDate` sloupec, který se `Authors` tabulky, odebrat `ISBN` sloupec z `Books` tabulku a přidat nové tabulky, `Ratings`, který je určen tak, aby uživatelé, kteří navštěvují rychlost lokality zkontrolovat knihy.</span><span class="sxs-lookup"><span data-stu-id="cdac2-224">As Figure 2 shows, I ve added a `BirthDate` column to the `Authors` table, removed the `ISBN` column from the `Books` table, and added a new table, `Ratings`, which is meant to let users visiting the site rate the reviewed books.</span></span>

> [!NOTE]
> <span data-ttu-id="cdac2-225">Datový model změny provedené v tomto kurzu měla provést pro ilustraci pomocí nástroje porovnání databáze.</span><span class="sxs-lookup"><span data-stu-id="cdac2-225">The data model changes made in this tutorial were done to illustrate using a database comparison tool.</span></span> <span data-ttu-id="cdac2-226">Tyto změny nebude nalezeno v databázi v budoucnu kurzy.</span><span class="sxs-lookup"><span data-stu-id="cdac2-226">You will not find these changes in the database in future tutorials.</span></span>


<span data-ttu-id="cdac2-227">[![Porovnání SQL jsou uvedeny rozdíly mezi vývoj a provozní databáze](strategies-for-database-development-and-deployment-vb/_static/image5.jpg)](strategies-for-database-development-and-deployment-vb/_static/image4.jpg)</span><span class="sxs-lookup"><span data-stu-id="cdac2-227">[![SQL Compare Lists the Differences Between the Development and Production Databases](strategies-for-database-development-and-deployment-vb/_static/image5.jpg)](strategies-for-database-development-and-deployment-vb/_static/image4.jpg)</span></span>

<span data-ttu-id="cdac2-228">**Obrázek 2**: porovnání SQL jsou uvedeny rozdíly mezi vývoj a provozních databází ([Kliknutím zobrazit obrázek v plné velikosti](strategies-for-database-development-and-deployment-vb/_static/image6.jpg))</span><span class="sxs-lookup"><span data-stu-id="cdac2-228">**Figure 2**: SQL Compare Lists the Differences Between the Development and Production Databases ([Click to view full-size image](strategies-for-database-development-and-deployment-vb/_static/image6.jpg))</span></span>


<span data-ttu-id="cdac2-229">Porovnání SQL rozpis databázové objekty do skupin, rychle ukazuje, jaké objekty existují v obou databází, ale se liší, které existují objekty v jedné databáze, ale ne na druhou a jaké objekty jsou identické.</span><span class="sxs-lookup"><span data-stu-id="cdac2-229">SQL Compare breaks down the database objects into groups, quickly showing you what objects exist in both databases but are different, which objects exist in one database but not the other, and which objects are identical.</span></span> <span data-ttu-id="cdac2-230">Jak vidíte, jsou dva objekty, které existují v obou databází, ale se liší: `Authors` tabulky, který měl sloupec přidat, a `Books` tabulku, která obsahovala jeden odebrat.</span><span class="sxs-lookup"><span data-stu-id="cdac2-230">As you can see, there are two objects that exist in both databases but are different: the `Authors` table, which had a column added, and the `Books` table, which had one removed.</span></span> <span data-ttu-id="cdac2-231">Se jeden objekt, který existuje pouze v databázi vývoj, a to nově vytvořený `Ratings` tabulky.</span><span class="sxs-lookup"><span data-stu-id="cdac2-231">There is one object that exists only in the development database, namely the newly created `Ratings` table.</span></span> <span data-ttu-id="cdac2-232">A nejsou 117 objekty, které jsou identické v obou databází.</span><span class="sxs-lookup"><span data-stu-id="cdac2-232">And there are 117 objects that are identical in both databases.</span></span>

<span data-ttu-id="cdac2-233">Výběr objektu databáze se zobrazí okno SQL rozdíly, které ukazuje, jak tyto objekty liší.</span><span class="sxs-lookup"><span data-stu-id="cdac2-233">Selecting a database object displays the SQL Differences window, which shows how these objects differ.</span></span> <span data-ttu-id="cdac2-234">Klade důraz okno SQL rozdíly, zobrazí v dolní části na obrázku 2, který `Authors` tabulky v databázi vývoj má `BirthDate` sloupec, který nebyl nalezen v `Authors` tabulky na produkční databázi.</span><span class="sxs-lookup"><span data-stu-id="cdac2-234">The SQL Differences window, displayed at the bottom in Figure 2, highlights that the `Authors` table in the development database has the `BirthDate` column, which is not found in the `Authors` table on the production database.</span></span>

<span data-ttu-id="cdac2-235">Po zkontrolování rozdíly a výběr objektů, které se mají synchronizovat, je dalším krokem generují potřeba aktualizovat schéma produkční databáze s příkazy SQL tak, aby odpovídala databázi vývoj.</span><span class="sxs-lookup"><span data-stu-id="cdac2-235">After reviewing the differences and selecting which objects you want to synchronize, the next step is to generate the SQL commands needed to update the production database s schema to match the development database.</span></span> <span data-ttu-id="cdac2-236">To lze provést pomocí Průvodce synchronizace.</span><span class="sxs-lookup"><span data-stu-id="cdac2-236">This is accomplished through the Synchronization Wizard.</span></span> <span data-ttu-id="cdac2-237">Průvodce synchronizace potvrdí, jaké objekty k synchronizaci a shrnuje akce plánování (viz obrázek 3).</span><span class="sxs-lookup"><span data-stu-id="cdac2-237">The Synchronization Wizard confirms what objects to synchronize and summarizes the action plan (see Figure 3).</span></span> <span data-ttu-id="cdac2-238">Můžete synchronizovat databáze okamžitě nebo vygenerovat skript s příkazy SQL, které lze spustit ve volném čase.</span><span class="sxs-lookup"><span data-stu-id="cdac2-238">You can synchronize the databases immediately or generate a script with the SQL commands that can be run at your leisure.</span></span>


<span data-ttu-id="cdac2-239">[![Pomocí Průvodce synchronizace synchronizovat vaše databáze schémata](strategies-for-database-development-and-deployment-vb/_static/image8.jpg)](strategies-for-database-development-and-deployment-vb/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="cdac2-239">[![Use the Synchronization Wizard to Synchronize Your Databases Schemas](strategies-for-database-development-and-deployment-vb/_static/image8.jpg)](strategies-for-database-development-and-deployment-vb/_static/image7.jpg)</span></span>

<span data-ttu-id="cdac2-240">**Obrázek 3**: použijte Průvodce synchronizace synchronizovat vaše databáze schémata ([Kliknutím zobrazit obrázek v plné velikosti](strategies-for-database-development-and-deployment-vb/_static/image9.jpg))</span><span class="sxs-lookup"><span data-stu-id="cdac2-240">**Figure 3**: Use the Synchronization Wizard to Synchronize Your Databases Schemas ([Click to view full-size image](strategies-for-database-development-and-deployment-vb/_static/image9.jpg))</span></span>


<span data-ttu-id="cdac2-241">Nástroje pro porovnání databáze jako softwaru brány červený SQL porovnat s zkontrolujte aplikuje změny schématu databáze vývoj stejně snadná jako bod a klikněte na provozní databázi.</span><span class="sxs-lookup"><span data-stu-id="cdac2-241">Database comparison tools like Red Gate Software s SQL Compare make applying the changes to the development database schema to the production database as easy as point and click.</span></span>

> [!NOTE]
> <span data-ttu-id="cdac2-242">Porovnání SQL porovná a synchronizuje dvě databáze *schémata*.</span><span class="sxs-lookup"><span data-stu-id="cdac2-242">SQL Compare compares and synchronizes two databases *schemas*.</span></span> <span data-ttu-id="cdac2-243">Bohužel se nepodporuje porovnání a synchronizaci dat ve dvou databázích tabulky.</span><span class="sxs-lookup"><span data-stu-id="cdac2-243">Unfortunately, it does not compare and synchronize the data within two databases tables.</span></span> <span data-ttu-id="cdac2-244">Software brány Red nabízejí produkt s názvem [ *porovnání dat SQL* ](http://www.red-gate.com/products/SQL_Data_Compare/) který porovná a provede synchronizaci dat mezi dvěma databázemi, ale je samostatný produkt z porovnat SQL a jiné $395 stojí.</span><span class="sxs-lookup"><span data-stu-id="cdac2-244">Red Gate Software does offer a product named [*SQL Data Compare*](http://www.red-gate.com/products/SQL_Data_Compare/) that compares and synchronizes the data between two databases, but it is a separate product from SQL Compare and costs another $395.</span></span>


## <a name="taking-the-application-offline-during-deployment"></a><span data-ttu-id="cdac2-245">Pořízení aplikace do režimu Offline během nasazení</span><span class="sxs-lookup"><span data-stu-id="cdac2-245">Taking the Application Offline During Deployment</span></span>

<span data-ttu-id="cdac2-246">Jako jsme jste viděli v rámci tyto kurzy nasazení je proces, který zahrnuje několik kroků: kopírování stránek ASP.NET, hlavní stránky, šablon stylů CSS soubory, JavaScript soubory, Image a další nezbytné obsah z vývojového prostředí do provozního prostředí; kopírování si informace o konfiguraci specifické pro prostředí produkčního, v případě potřeby; a provádění změn do datového modelu od posledního nasazení.</span><span class="sxs-lookup"><span data-stu-id="cdac2-246">As we ve seen throughout these tutorials, deployment is a process that involves multiple steps: copying the ASP.NET pages, master pages, CSS files, JavaScript files, images, and other necessary content from the development environment to the production environment; copying up the production environment-specific configuration information, if needed; and applying the changes to the data model since the last deployment.</span></span> <span data-ttu-id="cdac2-247">V závislosti na počtu souborů a složitost změny databáze tyto kroky může trvat od pár sekund několik minut na dokončení.</span><span class="sxs-lookup"><span data-stu-id="cdac2-247">Depending on the number of files and the complexity of your database changes, these steps can take anywhere from a few seconds to several minutes to complete.</span></span> <span data-ttu-id="cdac2-248">Během této doby je webová aplikace v toku a uživatelům, kteří navštíví web může zaznamenat chyby nebo neočekávané chování.</span><span class="sxs-lookup"><span data-stu-id="cdac2-248">During this window the web application is in flux and users visiting the site may experience errors or unexpected behavior.</span></span>

<span data-ttu-id="cdac2-249">Při nasazování webu je nejlepší do offline režimu webové aplikace "" až po dokončení nasazení.</span><span class="sxs-lookup"><span data-stu-id="cdac2-249">When deploying a website it is best to take the web application "offline" until deployment has completed.</span></span> <span data-ttu-id="cdac2-250">Převedení aplikace do režimu offline (a po dokončení procesu nasazení bude zálohování) je stejně snadná jako nahrání souboru a poté ji odstranit.</span><span class="sxs-lookup"><span data-stu-id="cdac2-250">Taking the application offline (and bringing it back up once the deployment process has finished) is as easy as uploading a file and then deleting it.</span></span> <span data-ttu-id="cdac2-251">Spuštění s prostředím ASP.NET 2.0, samotná existence soubor s názvem `app_offline.htm` v aplikaci s kořenovým adresářem převede celý web "do režimu offline."</span><span class="sxs-lookup"><span data-stu-id="cdac2-251">Starting with ASP.NET 2.0, the mere presence of a file named `app_offline.htm` in the application s root directory takes the entire website "offline."</span></span> <span data-ttu-id="cdac2-252">Každá žádost o stránku ASP.NET v této lokalitě je automaticky odpověděla s obsah `app_offline.htm` souboru.</span><span class="sxs-lookup"><span data-stu-id="cdac2-252">Any request to an ASP.NET page on that site is automatically responded with the contents of the `app_offline.htm` file.</span></span> <span data-ttu-id="cdac2-253">Odebraný tento soubor aplikace přejde do režimu online.</span><span class="sxs-lookup"><span data-stu-id="cdac2-253">Once that file is removed, the application comes back online.</span></span>

<span data-ttu-id="cdac2-254">Převedení aplikace do režimu offline během nasazení, pak je stejně jednoduché jako nahrávání `app_offline.htm` souboru do produkčního prostředí s kořenový adresář. před zahájením procesu nasazení a poté ji odstranit (nebo jeho přejmenováním na něco jiného), po nasazení byla dokončena.</span><span class="sxs-lookup"><span data-stu-id="cdac2-254">Taking an application offline during deployment, then, is as simple as uploading an `app_offline.htm` file to the production environment s root directory prior to beginning the deployment process and then deleting it (or renaming it to something else) once deployment is complete.</span></span> <span data-ttu-id="cdac2-255">Další informace o této technice najdete v článku s Jan Peterson trvá [ *Offline aplikace ASP.NET*](http://www.15seconds.com/issue/061207.htm).</span><span class="sxs-lookup"><span data-stu-id="cdac2-255">For more information on this technique refer to John Peterson s article, Taking an [*ASP.NET Application Offline*](http://www.15seconds.com/issue/061207.htm).</span></span>

## <a name="summary"></a><span data-ttu-id="cdac2-256">Souhrn</span><span class="sxs-lookup"><span data-stu-id="cdac2-256">Summary</span></span>

<span data-ttu-id="cdac2-257">Hlavní těžkostí v nasazení aplikace řízené daty se soustředí kolem nasazení databáze.</span><span class="sxs-lookup"><span data-stu-id="cdac2-257">The main challenge in deploying a data-driven application centers around deploying the database.</span></span> <span data-ttu-id="cdac2-258">Vzhledem k tomu, že existují dvě verze databáze: 1 ve vývojovém prostředí - a jeden v provozním prostředí schémata tyto dvě databáze se může stát synchronizován při přidání nových funkcí v vývoj.</span><span class="sxs-lookup"><span data-stu-id="cdac2-258">Because there are two versions of the database - one in the development environment and one in the production environment - these two databases schemas can become out of sync as new features are added in development.</span></span> <span data-ttu-id="cdac2-259">Jaké s další, protože provozní databáze jako se naplní reálná data z reálného uživatele, nelze přepsat produkční databázi s databází upravené vývoj jako můžete při nasazování soubory, které tvoří aplikace (stránky ASP.NET, soubory obrázků a tak dále).</span><span class="sxs-lookup"><span data-stu-id="cdac2-259">What s more, because the production database as being populated with real data from real users, you cannot overwrite the production database with the modified development database like you can when deploying the files that make up the application (the ASP.NET pages, image files, and so forth).</span></span> <span data-ttu-id="cdac2-260">Místo toho nasazení databáze zahrnuje implementace přesné sadu změn provedených v databázi vývoj na produkční databázi od posledního nasazení.</span><span class="sxs-lookup"><span data-stu-id="cdac2-260">Instead, deploying a database entails implementing the precise set of changes made to the development database on the production database since the last deployment.</span></span>

<span data-ttu-id="cdac2-261">V tomto kurzu prohlédli tři techniky pro údržbu a použití protokolu změny v databázi.</span><span class="sxs-lookup"><span data-stu-id="cdac2-261">This tutorial looked at three techniques for maintaining and applying a log of database changes.</span></span> <span data-ttu-id="cdac2-262">Nejjednodušší způsob je záznam změn v souvislém textu.</span><span class="sxs-lookup"><span data-stu-id="cdac2-262">The simplest approach is to record the changes in prose.</span></span> <span data-ttu-id="cdac2-263">Při této cílem provede implementaci těchto změn na produkční databázi ruční proces, nevyžaduje znalostní báze příkazů SQL pro vytváření a změny databázové objekty.</span><span class="sxs-lookup"><span data-stu-id="cdac2-263">While this tactic makes implementing these changes on the production database a manual process, it does not require knowledge of the SQL commands for creating and altering database objects.</span></span> <span data-ttu-id="cdac2-264">Propracovanější postup a ten, který je mnohem víc palatable větší projekty nebo projekty s více vývojáři, je k zaznamenání změny jako řadu příkazů SQL.</span><span class="sxs-lookup"><span data-stu-id="cdac2-264">A more sophisticated approach, and one that is much more palatable in larger projects or projects with multiple developers, is to record the changes as a series of SQL commands.</span></span> <span data-ttu-id="cdac2-265">To výrazně hastens zavádí tyto změny na cílovou databázi.</span><span class="sxs-lookup"><span data-stu-id="cdac2-265">This greatly hastens rolling out these changes to the target database.</span></span> <span data-ttu-id="cdac2-266">Nejlepší z obou přístupů lze dosáhnout pomocí nástroje pro porovnání databáze, jako je například Software brány Red s porovnat SQL.</span><span class="sxs-lookup"><span data-stu-id="cdac2-266">The best of both approaches can be achieved by using a database comparison tool, such as Red Gate Software s SQL Compare.</span></span>

<span data-ttu-id="cdac2-267">V tomto kurzu se ukončí soustředili na nasazení aplikace řízené daty.</span><span class="sxs-lookup"><span data-stu-id="cdac2-267">This tutorial concludes our focus on deploying a data-driven application.</span></span> <span data-ttu-id="cdac2-268">Další sadu kurzy vypadá na to, jak reagovat na chyby v provozním prostředí.</span><span class="sxs-lookup"><span data-stu-id="cdac2-268">The next set of tutorials looks at how to respond to errors in the production environment.</span></span> <span data-ttu-id="cdac2-269">Postupy: zobrazení popisný chybovou stránku místo místo žlutý obrazovka smrti podíváme.</span><span class="sxs-lookup"><span data-stu-id="cdac2-269">We'll look at how to display a friendly error page rather instead of the Yellow Screen of Death.</span></span> <span data-ttu-id="cdac2-270">A ukážeme, jak se přihlásit s podrobnosti chyby a jak vás upozorní, když dojde k takové chyby.</span><span class="sxs-lookup"><span data-stu-id="cdac2-270">And we'll see how to log the error s details and how to alert you when such errors occur.</span></span>

<span data-ttu-id="cdac2-271">Radostí programování!</span><span class="sxs-lookup"><span data-stu-id="cdac2-271">Happy Programming!</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="cdac2-272">[Předchozí](configuring-a-website-that-uses-application-services-vb.md)
> [další](displaying-a-custom-error-page-vb.md)</span><span class="sxs-lookup"><span data-stu-id="cdac2-272">[Previous](configuring-a-website-that-uses-application-services-vb.md)
[Next](displaying-a-custom-error-page-vb.md)</span></span>
