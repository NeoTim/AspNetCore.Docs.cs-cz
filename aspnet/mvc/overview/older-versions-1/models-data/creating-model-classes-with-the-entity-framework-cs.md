---
uid: mvc/overview/older-versions-1/models-data/creating-model-classes-with-the-entity-framework-cs
title: "Vytvoření třídy modelu pomocí rozhraní Entity Framework (C#) | Microsoft Docs"
author: microsoft
description: "V tomto kurzu zjistěte, jak používat rozhraní ASP.NET MVC s Microsoft Entity Framework. Dozvíte, jak používat průvodce Entity k vytvoření ADO.NET Entity Da..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 01/27/2009
ms.topic: article
ms.assetid: 61644169-e8b1-45dd-bf96-9c2301b69879
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions-1/models-data/creating-model-classes-with-the-entity-framework-cs
msc.type: authoredcontent
ms.openlocfilehash: 8a897f671de73d9991189e32a5d86b513051ef05
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 11/10/2017
---
<a name="creating-model-classes-with-the-entity-framework-c"></a><span data-ttu-id="4c9b6-104">Vytvoření třídy modelu pomocí rozhraní Entity Framework (C#)</span><span class="sxs-lookup"><span data-stu-id="4c9b6-104">Creating Model Classes with the Entity Framework (C#)</span></span>
====================
<span data-ttu-id="4c9b6-105">podle [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="4c9b6-105">by [Microsoft](https://github.com/microsoft)</span></span>

> <span data-ttu-id="4c9b6-106">V tomto kurzu zjistěte, jak používat rozhraní ASP.NET MVC s Microsoft Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-106">In this tutorial, you learn how to use ASP.NET MVC with the Microsoft Entity Framework.</span></span> <span data-ttu-id="4c9b6-107">Zjistíte, jak používat průvodce Entity k vytvoření ADO.NET Entity Data Model.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-107">You learn how to use the Entity Wizard to create an ADO.NET Entity Data Model.</span></span> <span data-ttu-id="4c9b6-108">V průběhu tohoto kurzu jsme sestavení webové aplikace, které ukazuje, jak vybrat, vložit, aktualizovat a odstraňovat data databáze s použitím rozhraní Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-108">Over the course of this tutorial, we build a web application that illustrates how to select, insert, update, and delete database data by using the Entity Framework.</span></span>


<span data-ttu-id="4c9b6-109">Cílem tohoto kurzu je vysvětlují, jak můžete vytvořit datové třídy přístup pomocí rozhraní Entity Framework Microsoft při vytváření aplikace ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-109">The goal of this tutorial is to explain how you can create data access classes using the Microsoft Entity Framework when building an ASP.NET MVC application.</span></span> <span data-ttu-id="4c9b6-110">Tento kurz předpokládá žádné předchozí informace o Microsoft Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-110">This tutorial assumes no previous knowledge of the Microsoft Entity Framework.</span></span> <span data-ttu-id="4c9b6-111">Na konci tohoto kurzu budete vědět, jak pomocí rozhraní Entity Framework můžete vybrat, vložit, aktualizovat a odstraňovat záznamů databáze.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-111">By the end of this tutorial, you'll understand how to use the Entity Framework to select, insert, update, and delete database records.</span></span>

<span data-ttu-id="4c9b6-112">Rozhraní Entity Framework Microsoft je nástroj na objekt relační mapování (O/RM), která umožňuje automaticky generovat vrstva přístupu k datům z databáze.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-112">The Microsoft Entity Framework is an Object Relational Mapping (O/RM) tool that enables you to generate a data access layer from a database automatically.</span></span> <span data-ttu-id="4c9b6-113">Rozhraní Entity Framework umožňuje vyhnout pracné vytváření tříd přístup data ručně.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-113">The Entity Framework enables you to avoid the tedious work of building your data access classes by hand.</span></span>

<span data-ttu-id="4c9b6-114">Chcete-li ilustrují, jak můžete použít rozhraní Entity Framework Microsoft s architekturou ASP.NET MVC, využijeme jednoduché ukázkovou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-114">In order to illustrate how you can use the Microsoft Entity Framework with ASP.NET MVC, we'll build a simple sample application.</span></span> <span data-ttu-id="4c9b6-115">Vytvoříme film databázovou aplikaci, která umožňuje zobrazit a upravit film záznamů databáze.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-115">We'll create a Movie Database application that enables you to display and edit movie database records.</span></span>

<span data-ttu-id="4c9b6-116">Tento kurz předpokládá, že máte Visual Studio 2008 nebo Visual Web Developer 2008 s aktualizací Service Pack 1.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-116">This tutorial assumes that you have Visual Studio 2008 or Visual Web Developer 2008 with Service Pack 1.</span></span> <span data-ttu-id="4c9b6-117">Chcete-li použít rozhraní Entity Framework musíte aktualizací Service Pack 1.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-117">You need Service Pack 1 in order to use the Entity Framework.</span></span> <span data-ttu-id="4c9b6-118">Visual Studio 2008 Service Pack 1 nebo Visual Web Developer s aktualizací Service Pack 1 si můžete stáhnout z následující adresy:</span><span class="sxs-lookup"><span data-stu-id="4c9b6-118">You can download Visual Studio 2008 Service Pack 1 or Visual Web Developer with Service Pack 1 from the following address:</span></span>

> [<span data-ttu-id="4c9b6-119">https://www.ASP.NET/downloads/</span><span class="sxs-lookup"><span data-stu-id="4c9b6-119">https://www.asp.net/downloads/</span></span>](https://www.asp.net/downloads)


> [!NOTE] 
> 
> <span data-ttu-id="4c9b6-120">Neexistuje žádná základní připojení mezi ASP.NET MVC a Microsoft Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-120">There is no essential connection between ASP.NET MVC and the Microsoft Entity Framework.</span></span> <span data-ttu-id="4c9b6-121">Existuje několik alternativy k Entity Frameworku, který můžete použít s architekturou ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-121">There are several alternatives to the Entity Framework that you can use with ASP.NET MVC.</span></span> <span data-ttu-id="4c9b6-122">Například můžete vytvořit pomocí jiných nástrojů O/RM, například Microsoft LINQ to SQL, NHibernate nebo SubSonic tříd modelu MVC.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-122">For example, you can build your MVC Model classes using other O/RM tools such as Microsoft LINQ to SQL, NHibernate, or SubSonic.</span></span>


## <a name="creating-the-movie-sample-database"></a><span data-ttu-id="4c9b6-123">Vytváření film ukázkové databáze</span><span class="sxs-lookup"><span data-stu-id="4c9b6-123">Creating the Movie Sample Database</span></span>

<span data-ttu-id="4c9b6-124">Aplikace film databáze používá tabulku databáze s názvem filmy, která obsahuje následující sloupce:</span><span class="sxs-lookup"><span data-stu-id="4c9b6-124">The Movie Database application uses a database table named Movies that contains the following columns:</span></span>

| <span data-ttu-id="4c9b6-125">Název sloupce</span><span class="sxs-lookup"><span data-stu-id="4c9b6-125">Column Name</span></span> | <span data-ttu-id="4c9b6-126">Datový typ</span><span class="sxs-lookup"><span data-stu-id="4c9b6-126">Data Type</span></span> | <span data-ttu-id="4c9b6-127">Povolit hodnoty Null?</span><span class="sxs-lookup"><span data-stu-id="4c9b6-127">Allow Nulls?</span></span> | <span data-ttu-id="4c9b6-128">Je primární klíč?</span><span class="sxs-lookup"><span data-stu-id="4c9b6-128">Is Primary Key?</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="4c9b6-129">ID</span><span class="sxs-lookup"><span data-stu-id="4c9b6-129">Id</span></span> | <span data-ttu-id="4c9b6-130">int</span><span class="sxs-lookup"><span data-stu-id="4c9b6-130">int</span></span> | <span data-ttu-id="4c9b6-131">False</span><span class="sxs-lookup"><span data-stu-id="4c9b6-131">False</span></span> | <span data-ttu-id="4c9b6-132">Hodnota TRUE</span><span class="sxs-lookup"><span data-stu-id="4c9b6-132">True</span></span> |
| <span data-ttu-id="4c9b6-133">Název</span><span class="sxs-lookup"><span data-stu-id="4c9b6-133">Title</span></span> | <span data-ttu-id="4c9b6-134">Nvarchar(100)</span><span class="sxs-lookup"><span data-stu-id="4c9b6-134">nvarchar(100)</span></span> | <span data-ttu-id="4c9b6-135">False</span><span class="sxs-lookup"><span data-stu-id="4c9b6-135">False</span></span> | <span data-ttu-id="4c9b6-136">False</span><span class="sxs-lookup"><span data-stu-id="4c9b6-136">False</span></span> |
| <span data-ttu-id="4c9b6-137">Adresář nacházející</span><span class="sxs-lookup"><span data-stu-id="4c9b6-137">Director</span></span> | <span data-ttu-id="4c9b6-138">Nvarchar(100)</span><span class="sxs-lookup"><span data-stu-id="4c9b6-138">nvarchar(100)</span></span> | <span data-ttu-id="4c9b6-139">False</span><span class="sxs-lookup"><span data-stu-id="4c9b6-139">False</span></span> | <span data-ttu-id="4c9b6-140">False</span><span class="sxs-lookup"><span data-stu-id="4c9b6-140">False</span></span> |

<span data-ttu-id="4c9b6-141">V této tabulce můžete přidat k projektu ASP.NET MVC pomocí následujících kroků:</span><span class="sxs-lookup"><span data-stu-id="4c9b6-141">You can add this table to an ASP.NET MVC project by following these steps:</span></span>

1. <span data-ttu-id="4c9b6-142">Klikněte pravým tlačítkem na aplikaci\_složky dat v okna Průzkumníka řešení a vyberte možnost nabídky **přidat, nové položky.**</span><span class="sxs-lookup"><span data-stu-id="4c9b6-142">Right-click the App\_Data folder in the Solution Explorer window and select the menu option **Add, New Item.**</span></span>
2. <span data-ttu-id="4c9b6-143">Z **přidat novou položku** dialogové okno, vyberte **databáze systému SQL Server**, dejte název MoviesDB.mdf databáze a klikněte **přidat** tlačítko.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-143">From the **Add New Item** dialog box, select **SQL Server Database**, give the database the name MoviesDB.mdf, and click the **Add** button.</span></span>
3. <span data-ttu-id="4c9b6-144">Poklikejte na soubor MoviesDB.mdf a otevřete okno Průzkumníka serveru Průzkumníka a databáze.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-144">Double-click the MoviesDB.mdf file to open the Server Explorer/Database Explorer window.</span></span>
4. <span data-ttu-id="4c9b6-145">Rozbalte MoviesDB.mdf připojení k databázi, klikněte pravým tlačítkem na složku tabulky a vyberte možnost nabídky **přidat novou tabulku**.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-145">Expand the MoviesDB.mdf database connection, right-click the Tables folder, and select the menu option **Add New Table**.</span></span>
5. <span data-ttu-id="4c9b6-146">Návrháře tabulky přidejte Id, názvu a ředitel sloupce.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-146">In the Table Designer, add the Id, Title, and Director columns.</span></span>
6. <span data-ttu-id="4c9b6-147">Klikněte na tlačítko **Uložit** tlačítko (má ikonu disketová) pro uložení v nové tabulce s názvem filmy.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-147">Click the **Save** button (it has the icon of the floppy) to save the new table with the name Movies.</span></span>

<span data-ttu-id="4c9b6-148">Po vytvoření databázové tabulky filmy, měli byste přidat ukázková data do tabulky.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-148">After you create the Movies database table, you should add some sample data to the table.</span></span> <span data-ttu-id="4c9b6-149">Klikněte pravým tlačítkem v tabulce filmy a vyberte možnost nabídky **zobrazit Data tabulky**.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-149">Right-click the Movies table and select the menu option **Show Table Data**.</span></span> <span data-ttu-id="4c9b6-150">Můžete zadat data falešných film v mřížce, který se zobrazí.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-150">You can enter fake movie data into the grid that appears.</span></span>

## <a name="creating-the-adonet-entity-data-model"></a><span data-ttu-id="4c9b6-151">Vytvoření modelu ADO.NET Entity Data Model</span><span class="sxs-lookup"><span data-stu-id="4c9b6-151">Creating the ADO.NET Entity Data Model</span></span>

<span data-ttu-id="4c9b6-152">Chcete-li použít rozhraní Entity Framework, musíte vytvořit datového modelu Entity.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-152">In order to use the Entity Framework, you need to create an Entity Data Model.</span></span> <span data-ttu-id="4c9b6-153">Můžete využít výhod sady Visual Studio *Entity Data Model Wizard* má automaticky generovat datového modelu Entity z databáze.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-153">You can take advantage of the Visual Studio *Entity Data Model Wizard* to generate an Entity Data Model from a database automatically.</span></span>

<span data-ttu-id="4c9b6-154">Postupujte podle těchto kroků:</span><span class="sxs-lookup"><span data-stu-id="4c9b6-154">Follow these steps:</span></span>

1. <span data-ttu-id="4c9b6-155">Klikněte pravým tlačítkem na složku modely v okně Průzkumníka řešení a vyberte možnost nabídky **přidat, nové položky**.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-155">Right-click the Models folder in the Solution Explorer window and select the menu option **Add, New Item**.</span></span>
2. <span data-ttu-id="4c9b6-156">V **přidat novou položku** dialogovém okně, vyberte kategorii dat (viz obrázek 1).</span><span class="sxs-lookup"><span data-stu-id="4c9b6-156">In the **Add New Item** dialog, select the Data category (see Figure 1).</span></span>
3. <span data-ttu-id="4c9b6-157">Vyberte **ADO.NET Entity Data Model** šablony, dejte název MoviesDBModel.edmx datového modelu Entity a klikněte na **přidat** tlačítko.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-157">Select the **ADO.NET Entity Data Model** template, give the Entity Data Model the name MoviesDBModel.edmx, and click the **Add** button.</span></span> <span data-ttu-id="4c9b6-158">Kliknutím **přidat** tlačítko spustí průvodce k datovému modelu.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-158">Clicking the **Add** button launches the Data Model Wizard.</span></span>
4. <span data-ttu-id="4c9b6-159">V **zvolte obsah modelu** kroku, vyberte **generování z databáze** možnost a klikněte na tlačítko **Další** tlačítko (viz obrázek 2).</span><span class="sxs-lookup"><span data-stu-id="4c9b6-159">In the **Choose Model Contents** step, choose the **Generate from a database** option and click the **Next** button (see Figure 2).</span></span>
5. <span data-ttu-id="4c9b6-160">V **vybrat datové připojení** krok, vyberte připojení k databázi MoviesDB.mdf, zadejte entity nastavení připojení MoviesDBEntities a klikněte na **Další** tlačítko (viz obrázek 3).</span><span class="sxs-lookup"><span data-stu-id="4c9b6-160">In the **Choose Your Data Connection** step, select the MoviesDB.mdf database connection, enter the entities connection settings name MoviesDBEntities, and click the **Next** button (see Figure 3).</span></span>
6. <span data-ttu-id="4c9b6-161">V **zvolte si databázové objekty** krok, vyberte v tabulce databáze film a klikněte **Dokončit** tlačítko (viz obrázek 4).</span><span class="sxs-lookup"><span data-stu-id="4c9b6-161">In the **Choose Your Database Objects** step, select the Movie database table and click the **Finish** button (see Figure 4).</span></span>

<span data-ttu-id="4c9b6-162">Po dokončení těchto kroků se otevře ADO.NET Entity Data Model Designer (Návrhář Entity).</span><span class="sxs-lookup"><span data-stu-id="4c9b6-162">After you complete these steps, the ADO.NET Entity Data Model Designer (Entity Designer) opens.</span></span>

<span data-ttu-id="4c9b6-163">**Obrázek 1 – Vytvoření nové Entity Data Model**</span><span class="sxs-lookup"><span data-stu-id="4c9b6-163">**Figure 1 – Creating a new Entity Data Model**</span></span>

![clip_image002](creating-model-classes-with-the-entity-framework-cs/_static/image1.jpg)

<span data-ttu-id="4c9b6-165">**Obrázek 2 – zvolte Model obsah krok**</span><span class="sxs-lookup"><span data-stu-id="4c9b6-165">**Figure 2 – Choose Model Contents Step**</span></span>

![clip_image004](creating-model-classes-with-the-entity-framework-cs/_static/image2.jpg)

<span data-ttu-id="4c9b6-167">**Obrázek 3: zvolit datové připojení**</span><span class="sxs-lookup"><span data-stu-id="4c9b6-167">**Figure 3 – Choose Your Data Connection**</span></span>

![clip_image006](creating-model-classes-with-the-entity-framework-cs/_static/image3.jpg)

<span data-ttu-id="4c9b6-169">**Obrázek 4 – zvolte databázové objekty**</span><span class="sxs-lookup"><span data-stu-id="4c9b6-169">**Figure 4 – Choose Your Database Objects**</span></span>

![clip_image008](creating-model-classes-with-the-entity-framework-cs/_static/image4.jpg)

#### <a name="modifying-the-adonet-entity-data-model"></a><span data-ttu-id="4c9b6-171">Úprava ADO.NET Entity Data Model</span><span class="sxs-lookup"><span data-stu-id="4c9b6-171">Modifying the ADO.NET Entity Data Model</span></span>

<span data-ttu-id="4c9b6-172">Po vytvoření datového modelu Entity, můžete měnit modelu, a využít tak výhod Entity Designer (viz obrázek 5).</span><span class="sxs-lookup"><span data-stu-id="4c9b6-172">After you create an Entity Data Model, you can modify the model by taking advantage of the Entity Designer (see Figure 5).</span></span> <span data-ttu-id="4c9b6-173">Entity Designer můžete kdykoli otevřít dvojitým kliknutím na soubor MoviesDBModel.edmx obsažené ve složce modely v rámci okna Průzkumníka řešení.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-173">You can open the Entity Designer at any time by double-clicking the MoviesDBModel.edmx file contained in the Models folder within the Solution Explorer window.</span></span>

<span data-ttu-id="4c9b6-174">**Obrázek 5 – ADO.NET Entity Data Model Designer**</span><span class="sxs-lookup"><span data-stu-id="4c9b6-174">**Figure 5 – The ADO.NET Entity Data Model Designer**</span></span>

![clip_image010](creating-model-classes-with-the-entity-framework-cs/_static/image5.jpg)

<span data-ttu-id="4c9b6-176">Například můžete Entity Designer změnit názvy tříd, které generuje Průvodce datového modelu Entity.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-176">For example, you can use the Entity Designer to change the names of the classes that the Entity Model Data Wizard generates.</span></span> <span data-ttu-id="4c9b6-177">Průvodce vytvoří novou třídu přístup dat s názvem filmy.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-177">The Wizard created a new data access class named Movies.</span></span> <span data-ttu-id="4c9b6-178">Jinými slovy Průvodce přiřadil třída velmi stejný název jako databázové tabulky.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-178">In other words, the Wizard gave the class the very same name as the database table.</span></span> <span data-ttu-id="4c9b6-179">Vzhledem k tomu, že tato třída použijeme k reprezentaci určité instance film, jsme přejmenujte třídy z filmy na film.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-179">Because we will use this class to represent a particular Movie instance, we should rename the class from Movies to Movie.</span></span>

<span data-ttu-id="4c9b6-180">Pokud chcete přejmenovat třídu entity, můžete dvakrát klikněte na název třídy Entity Designer a zadejte nový název (viz obrázek 6).</span><span class="sxs-lookup"><span data-stu-id="4c9b6-180">If you want to rename an entity class, you can double-click on the class name in the Entity Designer and enter a new name (see Figure 6).</span></span> <span data-ttu-id="4c9b6-181">Alternativně můžete změnit název entity v okně vlastností po výběru entity v Entity designeru.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-181">Alternatively, you can change the name of an entity in the Properties window after selecting an entity in the Entity Designer.</span></span>

<span data-ttu-id="4c9b6-182">**Obrázek 6 – změna název entity**</span><span class="sxs-lookup"><span data-stu-id="4c9b6-182">**Figure 6 – Changing an entity name**</span></span>

![clip_image012](creating-model-classes-with-the-entity-framework-cs/_static/image6.jpg)

<span data-ttu-id="4c9b6-184">Nezapomeňte uložit datového modelu Entity po provedení změny kliknutím na tlačítko Uložit (ikona disketu).</span><span class="sxs-lookup"><span data-stu-id="4c9b6-184">Remember to save your Entity Data Model after making a modification by clicking the Save button (the icon of the floppy disk).</span></span> <span data-ttu-id="4c9b6-185">Entity Designer na pozadí, generuje sadu třídy jazyka C#.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-185">Behind the scenes, the Entity Designer generates a set of C# classes.</span></span> <span data-ttu-id="4c9b6-186">Tyto třídy můžete zobrazit tak, že otevřete soubor MoviesDBModel.Designer.cs z okna Průzkumníka řešení.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-186">You can view these classes by opening the MoviesDBModel.Designer.cs file from the Solution Explorer window.</span></span>


<span data-ttu-id="4c9b6-187">Neupravujte kód v souboru Designer.cs, protože vaše změny se přepíše při dalším spuštění použijte Entity Designer.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-187">Don't modify the code in the Designer.cs file since your changes will be overwritten the next time you use the Entity Designer.</span></span> <span data-ttu-id="4c9b6-188">Pokud chcete rozšířit funkce tříd entit, které jsou definované v souboru Designer.cs potom můžete vytvořit *částečné třídy* v samostatných souborů.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-188">If you want to extend the functionality of the entity classes defined in the Designer.cs file then you can create *partial classes* in separate files.</span></span>


#### <a name="selecting-database-records-with-the-entity-framework"></a><span data-ttu-id="4c9b6-189">Výběr záznamů databáze s platformou Entity Framework</span><span class="sxs-lookup"><span data-stu-id="4c9b6-189">Selecting Database Records with the Entity Framework</span></span>

<span data-ttu-id="4c9b6-190">Začněme, sestavení aplikace film databáze tak, že vytvoříte stránky, který zobrazí seznam film záznamy.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-190">Let's start building our Movie Database application by creating a page that displays a list of movie records.</span></span> <span data-ttu-id="4c9b6-191">Domovské řadiče v výpis 1 zpřístupní akci s názvem Index().</span><span class="sxs-lookup"><span data-stu-id="4c9b6-191">The Home controller in Listing 1 exposes an action named Index().</span></span> <span data-ttu-id="4c9b6-192">Akce Index() vrátí všechny záznamy film z tabulky databáze film a využívají k rozhraní Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-192">The Index() action returns all of the movie records from the Movie database table by taking advantage of the Entity Framework.</span></span>

<span data-ttu-id="4c9b6-193">**Výpis 1 – Controllers\HomeController.cs**</span><span class="sxs-lookup"><span data-stu-id="4c9b6-193">**Listing 1 – Controllers\HomeController.cs**</span></span>

[!code-csharp[Main](creating-model-classes-with-the-entity-framework-cs/samples/sample1.cs)]

<span data-ttu-id="4c9b6-194">Všimněte si, že řadiče v výpis 1 obsahuje konstruktor.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-194">Notice that the controller in Listing 1 includes a constructor.</span></span> <span data-ttu-id="4c9b6-195">Konstruktor inicializuje na úrovni pole s názvem \_db.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-195">The constructor initializes a class-level field named \_db.</span></span> <span data-ttu-id="4c9b6-196">\_Db pole představuje entity databáze vygenerované Microsoft Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-196">The \_db field represents the database entities generated by the Microsoft Entity Framework.</span></span> <span data-ttu-id="4c9b6-197">\_Db pole je instance třídy MoviesDBEntities, který byl vytvořen v Entity designeru.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-197">The \_db field is an instance of the MoviesDBEntities class that was generated by the Entity Designer.</span></span>


<span data-ttu-id="4c9b6-198">Použití třídy theMoviesDBEntities v kontroleru Home, je nutné importovat obor názvů MovieEntityApp.Models (*MVCProjectName*. Modely).</span><span class="sxs-lookup"><span data-stu-id="4c9b6-198">In order to use theMoviesDBEntities class in the Home controller, you must import the MovieEntityApp.Models namespace (*MVCProjectName*.Models).</span></span>


<span data-ttu-id="4c9b6-199">\_Db pole v rámci akce Index() slouží k načtení záznamů z filmy databázové tabulky.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-199">The \_db field is used within the Index() action to retrieve the records from the Movies database table.</span></span> <span data-ttu-id="4c9b6-200">Výraz \_db. MovieSet představuje všechny záznamy z filmy databázové tabulky.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-200">The expression \_db.MovieSet represents all of the records from the Movies database table.</span></span> <span data-ttu-id="4c9b6-201">Metoda ToList() slouží k převedení sadu filmy do obecnou kolekci objektů film (seznam&lt;film&gt;).</span><span class="sxs-lookup"><span data-stu-id="4c9b6-201">The ToList() method is used to convert the set of movies into a generic collection of Movie objects (List&lt;Movie&gt;).</span></span>

<span data-ttu-id="4c9b6-202">Záznamy film se načítají pomocí LINQ to Entities.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-202">The movie records are retrieved with the help of LINQ to Entities.</span></span> <span data-ttu-id="4c9b6-203">Akce Index() v výpis 1 používá LINQ *syntaxe využívající metody* načíst sadu záznamů databáze.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-203">The Index() action in Listing 1 uses LINQ *method syntax* to retrieve the set of database records.</span></span> <span data-ttu-id="4c9b6-204">Pokud dáváte přednost, můžete použít LINQ *syntaxe dotazu* místo.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-204">If you prefer, you can use LINQ *query syntax* instead.</span></span> <span data-ttu-id="4c9b6-205">Velmi stejnou věc udělat následující dva příkazy:</span><span class="sxs-lookup"><span data-stu-id="4c9b6-205">The following two statements do the very same thing:</span></span>

[!code-csharp[Main](creating-model-classes-with-the-entity-framework-cs/samples/sample2.cs)]

<span data-ttu-id="4c9b6-206">Syntaxí kteroukoli LINQ – syntaxe využívající metody nebo syntaxe dotazů –, které najít nejvíce intuitivní.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-206">Use whichever LINQ syntax – method syntax or query syntax – that you find most intuitive.</span></span> <span data-ttu-id="4c9b6-207">Není žádný rozdíl ve výkonu mezi dva přístupy – jediným rozdílem je, styl.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-207">There is no difference in performance between the two approaches – the only difference is style.</span></span>

<span data-ttu-id="4c9b6-208">Zobrazení v výpis 2 se používá k zobrazení film záznamy.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-208">The view in Listing 2 is used to display the movie records.</span></span>

<span data-ttu-id="4c9b6-209">**Výpis 2 – Views\Home\Index.aspx**</span><span class="sxs-lookup"><span data-stu-id="4c9b6-209">**Listing 2 – Views\Home\Index.aspx**</span></span>

[!code-aspx[Main](creating-model-classes-with-the-entity-framework-cs/samples/sample3.aspx)]

<span data-ttu-id="4c9b6-210">Obsahuje zobrazení v výpis 2 **foreach** smyčky, který iteruje v rámci všech vybraných záznamech film a zobrazuje hodnoty vlastností nadpisu a ředitel film záznamu.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-210">The view in Listing 2 contains a **foreach** loop that iterates through each movie record and displays the values of the movie record's Title and Director properties.</span></span> <span data-ttu-id="4c9b6-211">Všimněte si, že vedle každý záznam zobrazí odkaz upravit a odstranit.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-211">Notice that an Edit and Delete link is displayed next to each record.</span></span> <span data-ttu-id="4c9b6-212">Kromě toho se zobrazí odkaz s přidat film v dolní části zobrazení (viz obrázek 7).</span><span class="sxs-lookup"><span data-stu-id="4c9b6-212">Furthermore, an Add Movie link appears at the bottom of the view (see Figure 7).</span></span>

<span data-ttu-id="4c9b6-213">**Obrázek 7 – zobrazení indexu**</span><span class="sxs-lookup"><span data-stu-id="4c9b6-213">**Figure 7 – The Index view**</span></span>

![clip_image014](creating-model-classes-with-the-entity-framework-cs/_static/image7.jpg)

<span data-ttu-id="4c9b6-215">Index zobrazení *zadali zobrazení*.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-215">The Index view is a *typed view*.</span></span> <span data-ttu-id="4c9b6-216">Obsahuje zobrazení pro Index &lt;% @ % stránky&gt; direktivy s *Inherits* atribut, který vrhá vlastnost modelu silného typu obecné kolekce seznamu objektů film (seznamu&lt;film).</span><span class="sxs-lookup"><span data-stu-id="4c9b6-216">The Index view includes a &lt;%@ Page %&gt; directive with an *Inherits* attribute that casts the Model property to a strongly typed generic List collection of Movie objects (List&lt;Movie).</span></span>

## <a name="inserting-database-records-with-the-entity-framework"></a><span data-ttu-id="4c9b6-217">Vkládání záznamů databáze s platformou Entity Framework</span><span class="sxs-lookup"><span data-stu-id="4c9b6-217">Inserting Database Records with the Entity Framework</span></span>

<span data-ttu-id="4c9b6-218">Rozhraní Entity Framework můžete snadno vkládání nových záznamů do databázové tabulky.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-218">You can use the Entity Framework to make it easy to insert new records into a database table.</span></span> <span data-ttu-id="4c9b6-219">Výpis 3 obsahuje dvě nové akce, které jsou přidány do třídy kontroleru Home, můžete použít k vkládání nových záznamů do tabulky databáze film.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-219">Listing 3 contains two new actions added to the Home controller class that you can use to insert new records into the Movie database table.</span></span>

<span data-ttu-id="4c9b6-220">**Výpis 3 – Controllers\HomeController.cs (Přidat metody)**</span><span class="sxs-lookup"><span data-stu-id="4c9b6-220">**Listing 3 – Controllers\HomeController.cs (Add methods)**</span></span>

[!code-csharp[Main](creating-model-classes-with-the-entity-framework-cs/samples/sample4.cs)]

<span data-ttu-id="4c9b6-221">Je první akcí Add() jednoduše vrátí zobrazení.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-221">The first Add() action simply returns a view.</span></span> <span data-ttu-id="4c9b6-222">Zobrazení obsahuje formulář pro novou databázi film přidávání záznamů (viz obrázek 8).</span><span class="sxs-lookup"><span data-stu-id="4c9b6-222">The view contains a form for adding a new movie database record (see Figure 8).</span></span> <span data-ttu-id="4c9b6-223">Při odesílání formuláře, je vyvolána druhá Add() akce.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-223">When you submit the form, the second Add() action is invoked.</span></span>

<span data-ttu-id="4c9b6-224">Všimněte si, že druhou akci Add() opatřen atributem AcceptVerbs.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-224">Notice that the second Add() action is decorated with the AcceptVerbs attribute.</span></span> <span data-ttu-id="4c9b6-225">Tato akce může vyvolat pouze při provádění operace HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-225">This action can be invoked only when performing an HTTP POST operation.</span></span> <span data-ttu-id="4c9b6-226">Jinými slovy tato akce může být volána, pouze když publikování formuláře HTML.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-226">In other words, this action can only be invoked when posting an HTML form.</span></span>

<span data-ttu-id="4c9b6-227">Druhou akci Add() vytvoří novou instanci třídy Entity Framework film pomocí metody ASP.NET MVC TryUpdateModel().</span><span class="sxs-lookup"><span data-stu-id="4c9b6-227">The second Add() action creates a new instance of the Entity Framework Movie class with the help of the ASP.NET MVC TryUpdateModel() method.</span></span> <span data-ttu-id="4c9b6-228">Metoda TryUpdateModel() trvá polí v FormCollection předaný metodě Add() a přiřadí k třídě film hodnoty těchto polí formuláře HTML.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-228">The TryUpdateModel() method takes the fields in the FormCollection passed to the Add() method and assigns the values of these HTML form fields to the Movie class.</span></span>


<span data-ttu-id="4c9b6-229">Pokud používáte rozhraní Entity Framework, je nutné zadat "seznam povolených" vlastností, které při použití metody TryUpdateModel nebo UpdateModel aktualizovat vlastnosti třídu entity.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-229">When using the Entity Framework, you must supply a "white list" of properties when using the TryUpdateModel or UpdateModel methods to update the properties of an entity class.</span></span>


<span data-ttu-id="4c9b6-230">V dalším kroku Add() akci provádí některé základní ověřování.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-230">Next, the Add() action performs some simple form validation.</span></span> <span data-ttu-id="4c9b6-231">Akce ověří, zda název i ředitel vlastnosti mají hodnoty.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-231">The action verifies that both the Title and Director properties have values.</span></span> <span data-ttu-id="4c9b6-232">Pokud dojde k chybě ověření, se přidá chybovou zprávu ověření pro ModelState.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-232">If there is a validation error, then a validation error message is added to ModelState.</span></span>

<span data-ttu-id="4c9b6-233">Pokud nejsou žádné chyby ověření nový záznam film přidat do tabulky databáze filmy pomocí rozhraní Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-233">If there are no validation errors then a new movie record is added to the Movies database table with the help of the Entity Framework.</span></span> <span data-ttu-id="4c9b6-234">Nový záznam je přidán do databáze s následující dva řádky kódu:</span><span class="sxs-lookup"><span data-stu-id="4c9b6-234">The new record is added to the database with the following two lines of code:</span></span>

[!code-csharp[Main](creating-model-classes-with-the-entity-framework-cs/samples/sample5.cs)]

<span data-ttu-id="4c9b6-235">První řádek kódu přidá novou entitu film sadu filmy sledovaných pomocí rozhraní Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-235">The first line of code adds the new Movie entity to the set of movies being tracked by the Entity Framework.</span></span> <span data-ttu-id="4c9b6-236">Druhý řádek kódu uloží na filmy sledovaných zpět do základní databáze byly provedeny jakékoli změny.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-236">The second line of code saves whatever changes have been made to the Movies being tracked back to the underlying database.</span></span>

<span data-ttu-id="4c9b6-237">**Obrázek 8: Přidat zobrazení**</span><span class="sxs-lookup"><span data-stu-id="4c9b6-237">**Figure 8 – The Add view**</span></span>

![clip_image016](creating-model-classes-with-the-entity-framework-cs/_static/image8.jpg)

#### <a name="updating-database-records-with-the-entity-framework"></a><span data-ttu-id="4c9b6-239">Aktualizace záznamů v databázi pomocí Entity Framework</span><span class="sxs-lookup"><span data-stu-id="4c9b6-239">Updating Database Records with the Entity Framework</span></span>

<span data-ttu-id="4c9b6-240">Můžete provést téměř stejný přístup upravit záznam v databázi pomocí Entity Framework jako přístup, který jsme právě a vložit nový záznam v databázi.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-240">You can follow almost the same approach to edit a database record with the Entity Framework as the approach that we just followed to insert a new database record.</span></span> <span data-ttu-id="4c9b6-241">Výpis 4 obsahuje dvě nové akce kontroleru s názvem Edit().</span><span class="sxs-lookup"><span data-stu-id="4c9b6-241">Listing 4 contains two new controller actions named Edit().</span></span> <span data-ttu-id="4c9b6-242">Je první akcí Edit() vrátí formuláře HTML pro úpravu záznamu film.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-242">The first Edit() action returns an HTML form for editing a movie record.</span></span> <span data-ttu-id="4c9b6-243">Druhou akci Edit() pokusy o aktualizaci databáze.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-243">The second Edit() action attempts to update the database.</span></span>

<span data-ttu-id="4c9b6-244">**Výpis 4 – Controllers\HomeController.cs (upravit metody)**</span><span class="sxs-lookup"><span data-stu-id="4c9b6-244">**Listing 4 – Controllers\HomeController.cs (Edit methods)**</span></span>

[!code-csharp[Main](creating-model-classes-with-the-entity-framework-cs/samples/sample6.cs)]

<span data-ttu-id="4c9b6-245">Druhou akci Edit() spustí načtením film záznam z databáze, která odpovídá Id film Upravovaný.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-245">The second Edit() action starts by retrieving the Movie record from the database that matches the Id of the movie being edited.</span></span> <span data-ttu-id="4c9b6-246">Následující technologie LINQ to Entities příkaz získá na první záznam databáze, který odpovídá konkrétní Id:</span><span class="sxs-lookup"><span data-stu-id="4c9b6-246">The following LINQ to Entities statement grabs the first database record that matches a particular Id:</span></span>

[!code-csharp[Main](creating-model-classes-with-the-entity-framework-cs/samples/sample7.cs)]

<span data-ttu-id="4c9b6-247">V dalším kroku metoda TryUpdateModel() umožňuje přiřadit vlastnosti entity film hodnoty polí formuláře HTML.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-247">Next, the TryUpdateModel() method is used to assign the values of the HTML form fields to the properties of the movie entity.</span></span> <span data-ttu-id="4c9b6-248">Všimněte si, seznamu povolených jsou dodané zadávat přesné vlastnosti aktualizace.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-248">Notice that a white list is supplied to specify the exact properties to update.</span></span>

<span data-ttu-id="4c9b6-249">V dalším kroku se provádí některé jednoduché ověřování a ověření, že název filmu i ředitel vlastnosti hodnoty.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-249">Next, some simple validation is performed to verify that both the Movie Title and Director properties have values.</span></span> <span data-ttu-id="4c9b6-250">Pokud buď vlastnost chybí hodnota, chybovou zprávu ověření se přidá do ModelState a ModelState.IsValid vrátí hodnotu false.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-250">If either property is missing a value, then a validation error message is added to ModelState and ModelState.IsValid returns the value false.</span></span>

<span data-ttu-id="4c9b6-251">Nakonec pokud nejsou žádné chyby ověření, potom základní tabulky databáze filmy je aktualizovány všechny změny pomocí volání metody SaveChanges().</span><span class="sxs-lookup"><span data-stu-id="4c9b6-251">Finally, if there are no validation errors, then the underlying Movies database table is updated with any changes by calling the SaveChanges() method.</span></span>

<span data-ttu-id="4c9b6-252">Při úpravě záznamů databáze, musíte předat s Id záznamu upravovaný k akci kontroleru, který provádí aktualizaci databáze.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-252">When editing database records, you need to pass the Id of the record being edited to the controller action that performs the database update.</span></span> <span data-ttu-id="4c9b6-253">Akce kontroleru, jinak nebude vědět, které záznam aktualizovat v podkladové databázi.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-253">Otherwise, the controller action will not know which record to update in the underlying database.</span></span> <span data-ttu-id="4c9b6-254">Upravit zobrazení, obsažené v výpis 5, obsahuje skryté pole formuláře představující Id upravovaný záznamů databáze.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-254">The Edit view, contained in Listing 5, includes a hidden form field that represents the Id of the database record being edited.</span></span>

<span data-ttu-id="4c9b6-255">**Výpis 5 – Views\Home\Edit.aspx**</span><span class="sxs-lookup"><span data-stu-id="4c9b6-255">**Listing 5 – Views\Home\Edit.aspx**</span></span>

[!code-aspx[Main](creating-model-classes-with-the-entity-framework-cs/samples/sample8.aspx)]

## <a name="deleting-database-records-with-the-entity-framework"></a><span data-ttu-id="4c9b6-256">Odstraňování záznamů databáze s platformou Entity Framework</span><span class="sxs-lookup"><span data-stu-id="4c9b6-256">Deleting Database Records with the Entity Framework</span></span>

<span data-ttu-id="4c9b6-257">Operace konečné databáze, která potřebujeme tohoto problému v tomto kurzu, je odstranění záznamů databáze.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-257">The final database operation, which we need to tackle in this tutorial, is deleting database records.</span></span> <span data-ttu-id="4c9b6-258">Akce kontroleru v výpis 6 slouží k odstranění konkrétní databázový záznam.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-258">You can use the controller action in Listing 6 to delete a particular database record.</span></span>

<span data-ttu-id="4c9b6-259">**Výpis 6 – \Controllers\HomeController.cs (akci odstranění)**</span><span class="sxs-lookup"><span data-stu-id="4c9b6-259">**Listing 6 -- \Controllers\HomeController.cs (Delete action)**</span></span>

[!code-csharp[Main](creating-model-classes-with-the-entity-framework-cs/samples/sample9.cs)]

<span data-ttu-id="4c9b6-260">Akce Delete() nejprve načte film entita, která odpovídá Id předaný akce.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-260">The Delete() action first retrieves the Movie entity that matches the Id passed to the action.</span></span> <span data-ttu-id="4c9b6-261">V dalším kroku film odstraněna z databáze pomocí volání metody DeleteObject() následuje metodu SaveChanges().</span><span class="sxs-lookup"><span data-stu-id="4c9b6-261">Next, the movie is deleted from the database by calling the DeleteObject() method followed by the SaveChanges() method.</span></span> <span data-ttu-id="4c9b6-262">Nakonec je uživatel přesměrován zpět na zobrazení indexu.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-262">Finally, the user is redirected back to the Index view.</span></span>

## <a name="summary"></a><span data-ttu-id="4c9b6-263">Souhrn</span><span class="sxs-lookup"><span data-stu-id="4c9b6-263">Summary</span></span>

<span data-ttu-id="4c9b6-264">Účelem tohoto kurzu bylo ukazují, jak můžete vytvořit databázových aplikací webové aplikace pomocí ASP.NET MVC a Microsoft Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-264">The purpose of this tutorial was to demonstrate how you can build database-driven web applications by taking advantage of ASP.NET MVC and the Microsoft Entity Framework.</span></span> <span data-ttu-id="4c9b6-265">Jste zjistili, jak sestavit aplikaci, která umožňuje vybrat, vložit, aktualizovat a odstraňovat záznamů databáze.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-265">You learned how to build an application that enables you to select, insert, update, and delete database records.</span></span>

<span data-ttu-id="4c9b6-266">Nejdřív jsme probrali použití průvodce Entity Data Model generovat Model dat Entity z Visual Studia.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-266">First, we discussed how you can use the Entity Data Model Wizard to generate an Entity Data Model from within Visual Studio.</span></span> <span data-ttu-id="4c9b6-267">V dalším kroku zjistíte, jak používat technologie LINQ to Entities načíst sadu záznamů databáze z tabulky databáze.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-267">Next, you learn how to use LINQ to Entities to retrieve a set of database records from a database table.</span></span> <span data-ttu-id="4c9b6-268">Nakonec jsme použili rozhraní Entity Framework vložit, aktualizovat a odstraňovat záznamů databáze.</span><span class="sxs-lookup"><span data-stu-id="4c9b6-268">Finally, we used the Entity Framework to insert, update, and delete database records.</span></span>

>[!div class="step-by-step"]
[<span data-ttu-id="4c9b6-269">Další</span><span class="sxs-lookup"><span data-stu-id="4c9b6-269">Next</span></span>](creating-model-classes-with-linq-to-sql-cs.md)
