---
uid: mvc/overview/performance/bundling-and-minification
title: Sdružování a minimalizace | Microsoft Docs
author: Rick-Anderson
description: Sdružování a minimalizace jsou dvě techniky v technologii ASP.NET 4.5 můžete použít ke zlepšení čas načítání požadavku. Sdružování a minimalizace zlepšuje reducin čas načítání...
ms.author: aspnetcontent
manager: wpickett
ms.date: 08/23/2012
ms.topic: article
ms.assetid: 5894dc13-5d45-4dad-8096-136499120f1d
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/performance/bundling-and-minification
msc.type: authoredcontent
ms.openlocfilehash: 001ebf89cda66a50cddcd7e4944f27b9396d4450
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/10/2018
---
<a name="bundling-and-minification"></a><span data-ttu-id="1e3d7-104">Sdružování a minimalizace</span><span class="sxs-lookup"><span data-stu-id="1e3d7-104">Bundling and Minification</span></span>
====================
<span data-ttu-id="1e3d7-105">podle [Rick Anderson](https://github.com/Rick-Anderson)</span><span class="sxs-lookup"><span data-stu-id="1e3d7-105">by [Rick Anderson](https://github.com/Rick-Anderson)</span></span>

> <span data-ttu-id="1e3d7-106">Sdružování a minimalizace jsou dvě techniky v technologii ASP.NET 4.5 můžete použít ke zlepšení čas načítání požadavku.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-106">Bundling and minification are two techniques you can use in ASP.NET 4.5 to improve request load time.</span></span> <span data-ttu-id="1e3d7-107">Sdružování a minimalizace zlepšuje čas načítání snižuje počet požadavků na server a zmenšení velikosti požadovaných prostředků (například šablon stylů CSS a JavaScript.)</span><span class="sxs-lookup"><span data-stu-id="1e3d7-107">Bundling and minification improves load time by reducing the number of requests to the server and reducing the size of requested assets (such as CSS and JavaScript.)</span></span>


<span data-ttu-id="1e3d7-108">Většina aktuální hlavní prohlížeče omezit počet [současných připojení](http://www.browserscope.org/?category=network) za každý název hostitele pro šest.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-108">Most of the current major browsers limit the number of [simultaneous connections](http://www.browserscope.org/?category=network) per each hostname to six.</span></span> <span data-ttu-id="1e3d7-109">To znamená, že šest požadavky během zpracování, další požadavky na prostředky na hostiteli se zařadí do fronty v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-109">That means that while six requests are being processed, additional requests for assets on a host will be queued by the browser.</span></span> <span data-ttu-id="1e3d7-110">Na obrázku níže ukazuje karty sítě nástroje pro vývojáře IE F12 časování prostředků vyžaduje zobrazení o ukázkovou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-110">In the image below, the IE F12 developer tools network tabs shows the timing for assets required by the About view of a sample application.</span></span>

![B/M](bundling-and-minification/_static/image1.png)

<span data-ttu-id="1e3d7-112">Šedé pruhy Zobrazí dobu, kterou požadavek ve frontě v prohlížeči čekání na limitu šesti připojení.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-112">The gray bars show the time the request is queued by the browser waiting on the six connection limit.</span></span> <span data-ttu-id="1e3d7-113">Žlutý pruh je požadavek doba do prvního bajtu, který je čas potřebný k žádosti odesílat a přijímat první odpověď ze serveru.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-113">The yellow bar is the request time to first byte, that is, the time taken to send the request and receive the first response from the server.</span></span> <span data-ttu-id="1e3d7-114">Modré pruhy zobrazit čas potřebný k přijetí data odpovědi ze serveru.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-114">The blue bars show the time taken to receive the response data from the server.</span></span> <span data-ttu-id="1e3d7-115">Poklepáním na prostředek se získat informace o podrobné časování.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-115">You can double-click on an asset to get detailed timing information.</span></span> <span data-ttu-id="1e3d7-116">Například následující obrázek ukazuje časové podrobnosti načítání */Scripts/MyScripts/JavaScript6.js* souboru.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-116">For example, the following image shows the timing details for loading the */Scripts/MyScripts/JavaScript6.js* file.</span></span>

![](bundling-and-minification/_static/image2.png)

<span data-ttu-id="1e3d7-117">Předchozí obrázek ukazuje **spustit** událostí, které poskytuje čas požadavku byl zařazen do fronty z důvodu prohlížeče omezit počet souběžných připojení.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-117">The preceding image shows the **Start** event, which gives the time the request was queued because of the browser limit the number of simultaneous connections.</span></span> <span data-ttu-id="1e3d7-118">V takovém případě požadavek byl zařazen do fronty pro 46 počet milisekund čekání na další požadavek dokončit.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-118">In this case, the request was queued for 46 milliseconds waiting for another request to complete.</span></span>

## <a name="bundling"></a><span data-ttu-id="1e3d7-119">Sdružování</span><span class="sxs-lookup"><span data-stu-id="1e3d7-119">Bundling</span></span>

<span data-ttu-id="1e3d7-120">Sdružování je nová funkce v technologii ASP.NET 4.5, která usnadňuje kombinovat nebo sady více souborů do jediného souboru.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-120">Bundling is a new feature in ASP.NET 4.5 that makes it easy to combine or bundle multiple files into a single file.</span></span> <span data-ttu-id="1e3d7-121">Můžete vytvořit šablon stylů CSS, JavaScript a dalších sad.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-121">You can create CSS, JavaScript and other bundles.</span></span> <span data-ttu-id="1e3d7-122">Méně souborů znamená, že méně požadavků HTTP a který může zvýšit zatížení první stránky.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-122">Fewer files means fewer HTTP requests and that can improve first page load performance.</span></span>

<span data-ttu-id="1e3d7-123">Následující obrázek znázorňuje zobrazení časování o zobrazení zobrazí dříve, ale tentokrát s sdružování a minimalizace povolena.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-123">The following image shows the same timing view of the About view shown previously, but this time with bundling and minification enabled.</span></span>

![](bundling-and-minification/_static/image3.png)

## <a name="minification"></a><span data-ttu-id="1e3d7-124">Minimalizace</span><span class="sxs-lookup"><span data-stu-id="1e3d7-124">Minification</span></span>

<span data-ttu-id="1e3d7-125">Minimalizace provede celou řadu různých kód optimalizace skripty nebo šablon stylů css, jako je například odebráním nepotřebných mezer a komentáře a zkrátit názvy proměnných jeden znak.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-125">Minification performs a variety of different code optimizations to scripts or css, such as removing unnecessary white space and comments and shortening variable names to one character.</span></span> <span data-ttu-id="1e3d7-126">Vezměte v úvahu následující funkce jazyka JavaScript.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-126">Consider the following JavaScript function.</span></span>

[!code-javascript[Main](bundling-and-minification/samples/sample1.js)]

<span data-ttu-id="1e3d7-127">Po minimalizaci je funkce snížen na následující:</span><span class="sxs-lookup"><span data-stu-id="1e3d7-127">After minification, the function is reduced to the following:</span></span>

[!code-javascript[Main](bundling-and-minification/samples/sample2.js)]

<span data-ttu-id="1e3d7-128">Kromě odebírání komentářů a nepotřebné prázdné znaky, tyto parametry a proměnné názvy byly přejmenovány (zkrátit) následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="1e3d7-128">In addition to removing the comments and unnecessary whitespace, the following parameters and variable names were renamed (shortened) as follows:</span></span>

| <span data-ttu-id="1e3d7-129">**Původní**</span><span class="sxs-lookup"><span data-stu-id="1e3d7-129">**Original**</span></span> | <span data-ttu-id="1e3d7-130">**Přejmenovat**</span><span class="sxs-lookup"><span data-stu-id="1e3d7-130">**Renamed**</span></span> |
| --- | --- |
| <span data-ttu-id="1e3d7-131">imageTagAndImageID</span><span class="sxs-lookup"><span data-stu-id="1e3d7-131">imageTagAndImageID</span></span> | <span data-ttu-id="1e3d7-132">n</span><span class="sxs-lookup"><span data-stu-id="1e3d7-132">n</span></span> |
| <span data-ttu-id="1e3d7-133">imageContext</span><span class="sxs-lookup"><span data-stu-id="1e3d7-133">imageContext</span></span> | <span data-ttu-id="1e3d7-134">t</span><span class="sxs-lookup"><span data-stu-id="1e3d7-134">t</span></span> |
| <span data-ttu-id="1e3d7-135">imageElement</span><span class="sxs-lookup"><span data-stu-id="1e3d7-135">imageElement</span></span> | <span data-ttu-id="1e3d7-136">Mohu</span><span class="sxs-lookup"><span data-stu-id="1e3d7-136">i</span></span> |

## <a name="impact-of-bundling-and-minification"></a><span data-ttu-id="1e3d7-137">Dopad sdružování a Minifikace</span><span class="sxs-lookup"><span data-stu-id="1e3d7-137">Impact of Bundling and Minification</span></span>

<span data-ttu-id="1e3d7-138">Následující tabulka uvádí několik důležitých rozdílů mezi výpis všechny prostředky samostatně a pomocí sdružování a minimalizace (B/M) v ukázka programu.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-138">The following table shows several important differences between listing all the assets individually and using bundling and minification (B/M) in the sample program.</span></span>

|  | <span data-ttu-id="1e3d7-139">**Pomocí B/M**</span><span class="sxs-lookup"><span data-stu-id="1e3d7-139">**Using B/M**</span></span> | <span data-ttu-id="1e3d7-140">**Bez B/M**</span><span class="sxs-lookup"><span data-stu-id="1e3d7-140">**Without B/M**</span></span> | <span data-ttu-id="1e3d7-141">**Change**</span><span class="sxs-lookup"><span data-stu-id="1e3d7-141">**Change**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="1e3d7-142">**Požadavky na soubory**</span><span class="sxs-lookup"><span data-stu-id="1e3d7-142">**File Requests**</span></span> | <span data-ttu-id="1e3d7-143">9</span><span class="sxs-lookup"><span data-stu-id="1e3d7-143">9</span></span> | <span data-ttu-id="1e3d7-144">34</span><span class="sxs-lookup"><span data-stu-id="1e3d7-144">34</span></span> | <span data-ttu-id="1e3d7-145">256%</span><span class="sxs-lookup"><span data-stu-id="1e3d7-145">256%</span></span> |
| <span data-ttu-id="1e3d7-146">**KB Sent**</span><span class="sxs-lookup"><span data-stu-id="1e3d7-146">**KB Sent**</span></span> | <span data-ttu-id="1e3d7-147">3.26</span><span class="sxs-lookup"><span data-stu-id="1e3d7-147">3.26</span></span> | <span data-ttu-id="1e3d7-148">11.92</span><span class="sxs-lookup"><span data-stu-id="1e3d7-148">11.92</span></span> | <span data-ttu-id="1e3d7-149">266%</span><span class="sxs-lookup"><span data-stu-id="1e3d7-149">266%</span></span> |
| <span data-ttu-id="1e3d7-150">**KB Received**</span><span class="sxs-lookup"><span data-stu-id="1e3d7-150">**KB Received**</span></span> | <span data-ttu-id="1e3d7-151">388.51</span><span class="sxs-lookup"><span data-stu-id="1e3d7-151">388.51</span></span> | <span data-ttu-id="1e3d7-152">530</span><span class="sxs-lookup"><span data-stu-id="1e3d7-152">530</span></span> | <span data-ttu-id="1e3d7-153">36%</span><span class="sxs-lookup"><span data-stu-id="1e3d7-153">36%</span></span> |
| <span data-ttu-id="1e3d7-154">**Čas načtení**</span><span class="sxs-lookup"><span data-stu-id="1e3d7-154">**Load Time**</span></span> | <span data-ttu-id="1e3d7-155">510 MS</span><span class="sxs-lookup"><span data-stu-id="1e3d7-155">510 MS</span></span> | <span data-ttu-id="1e3d7-156">780 MS</span><span class="sxs-lookup"><span data-stu-id="1e3d7-156">780 MS</span></span> | <span data-ttu-id="1e3d7-157">53%</span><span class="sxs-lookup"><span data-stu-id="1e3d7-157">53%</span></span> |

<span data-ttu-id="1e3d7-158">Počet odeslaných bajtů došlo k výraznému snížení s sdružování jsou poměrně podrobné s hlavičky protokolu HTTP, které se vztahují na požadavky prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-158">The bytes sent had a significant reduction with bundling as browsers are fairly verbose with the HTTP headers they apply on requests.</span></span> <span data-ttu-id="1e3d7-159">Přijaté bajty snížení není tak velké, protože největší soubory (*Scripts\jquery-ui-1.8.11.min.js* a *Scripts\jquery-1.7.1.min.js*) jsou již minifikovaný.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-159">The received bytes reduction is not as large because the largest files (*Scripts\jquery-ui-1.8.11.min.js* and *Scripts\jquery-1.7.1.min.js*) are already minified.</span></span> <span data-ttu-id="1e3d7-160">Poznámka: Časování na ukázkový program použitý [Fiddler](http://www.fiddler2.com/fiddler2/) nástroj k simulaci pomalé síti.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-160">Note: The timings on the sample program used the [Fiddler](http://www.fiddler2.com/fiddler2/) tool to simulate a slow network.</span></span> <span data-ttu-id="1e3d7-161">(Z aplikaci Fiddler **pravidla** nabídce vyberte možnost **výkonu** pak **simulovat rychlostí**.)</span><span class="sxs-lookup"><span data-stu-id="1e3d7-161">(From the Fiddler **Rules** menu, select **Performance** then **Simulate Modem Speeds**.)</span></span>

## <a name="debugging-bundled-and-minified-javascript"></a><span data-ttu-id="1e3d7-162">Ladění dodávat a Minifikovaný JavaScript</span><span class="sxs-lookup"><span data-stu-id="1e3d7-162">Debugging Bundled and Minified JavaScript</span></span>

<span data-ttu-id="1e3d7-163">Usnadňuje ladění vaší JavaScriptu ve vývojovém prostředí (kde [kompilace Element](https://msdn.microsoft.com/library/s10awwz0.aspx) v *Web.config* soubor pro `debug="true"` ) vzhledem k tomu, že nejsou seskupeny soubory JavaScript nebo minifikovaný.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-163">It's easy to debug your JavaScript in a development environment (where the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx) in the *Web.config* file is set to `debug="true"` ) because the JavaScript files are not bundled or minified.</span></span> <span data-ttu-id="1e3d7-164">Můžete také ladění sestavení pro vydání JavaScript souborů jsou seskupeny a minifikovaný.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-164">You can also debug a release build where your JavaScript files are bundled and minified.</span></span> <span data-ttu-id="1e3d7-165">Používání nástrojů pro vývojáře IE F12, ladění funkce jazyka JavaScript, který je součástí sady minifikovaný pomocí následující postup:</span><span class="sxs-lookup"><span data-stu-id="1e3d7-165">Using the IE F12 developer tools, you debug a JavaScript function included in a minified bundle using the following approach:</span></span>

1. <span data-ttu-id="1e3d7-166">Vyberte **skriptu** a pak vyberte **spustit ladění** tlačítko.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-166">Select the **Script** tab and then select the **Start debugging** button.</span></span>
2. <span data-ttu-id="1e3d7-167">Vyberte sadu obsahující funkce JavaScript, který chcete ladit pomocí tlačítka prostředky.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-167">Select the bundle containing the JavaScript function you want to debug using the assets button.</span></span>  
    ![](bundling-and-minification/_static/image4.png)
3. <span data-ttu-id="1e3d7-168">Formátování minifikovaný JavaScript výběrem **tlačítko konfigurace** ![](bundling-and-minification/_static/image5.png)a potom vyberete **formát JavaScript**.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-168">Format the minified JavaScript by selecting the **Configuration button** ![](bundling-and-minification/_static/image5.png), and then selecting **Format JavaScript**.</span></span>
4. <span data-ttu-id="1e3d7-169">V **skript vyhledávání** t vstupní pole, vyberte název funkce, kterou chcete ladit.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-169">In the **Search Scrip** t input box, select the name of the function you want to debug.</span></span> <span data-ttu-id="1e3d7-170">Na následujícím obrázku **AddAltToImg** bylo zadáno v **skript vyhledávání** t vstupního pole.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-170">In the following image, **AddAltToImg** was entered in the **Search Scrip** t input box.</span></span>  
    ![](bundling-and-minification/_static/image6.png)

<span data-ttu-id="1e3d7-171">Další informace o ladění pomocí nástrojů pro vývojáře F12, najdete v článku na webu MSDN [používání nástrojů pro vývojáře F12 k ladění chyby jazyka JavaScript](https://msdn.microsoft.com/library/ie/gg699336(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="1e3d7-171">For more information on debugging with the F12 developer tools, see the MSDN article [Using the F12 Developer Tools to Debug JavaScript Errors](https://msdn.microsoft.com/library/ie/gg699336(v=vs.85).aspx).</span></span>

## <a name="controlling-bundling-and-minification"></a><span data-ttu-id="1e3d7-172">Řízení sdružování a minimalizace</span><span class="sxs-lookup"><span data-stu-id="1e3d7-172">Controlling Bundling and Minification</span></span>

<span data-ttu-id="1e3d7-173">Sdružování a minimalizace povolit nebo zakázat nastavením hodnoty atributu ladění v [kompilace Element](https://msdn.microsoft.com/library/s10awwz0.aspx) v *Web.config* souboru.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-173">Bundling and minification is enabled or disabled by setting the value of the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file.</span></span> <span data-ttu-id="1e3d7-174">V následující soubor XML `debug` je nastaven na hodnotu true, tak sdružování a minimalizace je zakázána.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-174">In the following XML, `debug` is set to true so bundling and minification is disabled.</span></span>

[!code-xml[Main](bundling-and-minification/samples/sample3.xml?highlight=2)]

<span data-ttu-id="1e3d7-175">Chcete-li povolit sdružování a minimalizace, nastavte `debug` hodnotu "Nepravda".</span><span class="sxs-lookup"><span data-stu-id="1e3d7-175">To enable bundling and minification, set the `debug` value to "false".</span></span> <span data-ttu-id="1e3d7-176">Můžete přepsat *Web.config* nastavení s `EnableOptimizations` vlastnost na `BundleTable` třídy.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-176">You can override the *Web.config* setting with the `EnableOptimizations` property on the `BundleTable` class.</span></span> <span data-ttu-id="1e3d7-177">Následující kód umožňuje sdružování a minimalizace a přepíše všechna nastavení v *Web.config* souboru.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-177">The following code enables bundling and minification and overrides any setting in the *Web.config* file.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample4.cs?highlight=7)]

> [!NOTE]
> <span data-ttu-id="1e3d7-178">Pokud `EnableOptimizations` je `true` nebo ladění atribut v [kompilace Element](https://msdn.microsoft.com/library/s10awwz0.aspx) v *Web.config* soubor pro `false`, soubory nebude dodávat nebo minifikovaný.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-178">Unless `EnableOptimizations` is `true` or the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file is set to `false`, files will not be bundled or minified.</span></span> <span data-ttu-id="1e3d7-179">Kromě toho se nepoužijí .min verze souborů, úplné ladicí verze bude vybrána.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-179">Additionally, the .min version of files will not be used, the full debug versions will be selected.</span></span> <span data-ttu-id="1e3d7-180">`EnableOptimizations` přepíše ladění atribut v [kompilace Element](https://msdn.microsoft.com/library/s10awwz0.aspx) v *Web.config* souboru</span><span class="sxs-lookup"><span data-stu-id="1e3d7-180">`EnableOptimizations` overrides the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file</span></span>


## <a name="using-bundling-and-minification-with-aspnet-web-forms-and-web-pages"></a><span data-ttu-id="1e3d7-181">Pomocí sdružování a minimalizace s webovými formuláři ASP.NET a webové stránky</span><span class="sxs-lookup"><span data-stu-id="1e3d7-181">Using Bundling and Minification with ASP.NET Web Forms and Web Pages</span></span>

- <span data-ttu-id="1e3d7-182">Pro webové stránky, najdete v položkách blogu [přidání optimalizaci webů k lokalitě webové stránky](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span><span class="sxs-lookup"><span data-stu-id="1e3d7-182">For Web Pages, see the blog entry [Adding Web Optimization to a Web Pages Site](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span></span>
- <span data-ttu-id="1e3d7-183">Webové formuláře, naleznete v příspěvku blogu [přidání sdružování a minimalizace pro webové formuláře](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span><span class="sxs-lookup"><span data-stu-id="1e3d7-183">For Web Forms, see the blog entry [Adding Bundling and Minification to Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span></span>

## <a name="using-bundling-and-minification-with-aspnet-mvc"></a><span data-ttu-id="1e3d7-184">Pomocí sdružování a minimalizace s architekturou ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="1e3d7-184">Using Bundling and Minification with ASP.NET MVC</span></span>

<span data-ttu-id="1e3d7-185">V této části vytvoříme ASP.NET MVC projektu prozkoumat sdružování a minimalizace.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-185">In this section we will create an ASP.NET MVC project to examine bundling and minification.</span></span> <span data-ttu-id="1e3d7-186">Nejprve vytvořte nový projekt ASP.NET MVC internet s názvem **MvcBM** beze změny všechny výchozí hodnoty.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-186">First, create a new ASP.NET MVC internet project named **MvcBM** without changing any of the defaults.</span></span>

<span data-ttu-id="1e3d7-187">Otevřete *aplikace\_Start\BundleConfig.cs* soubor a zkontrolujte `RegisterBundles` metodu, která se používá k vytvoření, registrace a konfigurace sady.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-187">Open the *App\_Start\BundleConfig.cs* file and examine the `RegisterBundles` method which is used to create, register and configure bundles.</span></span> <span data-ttu-id="1e3d7-188">Následující kód ukazuje část `RegisterBundles` metoda.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-188">The following code shows a portion of the `RegisterBundles` method.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample5.cs)]

<span data-ttu-id="1e3d7-189">Předchozí kód vytvoří novou sadu JavaScript s názvem *~/bundles/jquery* , který obsahuje všechny příslušné (který je ladění nebo ale není minifikovaný. *vsdoc*) soubory *skripty* složky, která odpovídají řetězci zástupný znak "~/Scripts/jquery-{version} .js".</span><span class="sxs-lookup"><span data-stu-id="1e3d7-189">The  preceding code creates a new JavaScript bundle named *~/bundles/jquery* that includes all the appropriate (that is debug or minified but not .*vsdoc*) files in the *Scripts* folder that match the wild card string "~/Scripts/jquery-{version}.js".</span></span> <span data-ttu-id="1e3d7-190">Pro technologii ASP.NET MVC 4, to znamená v konfiguraci ladění, soubor *jquery 1.7.1.js* budou přidány do sady.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-190">For ASP.NET MVC 4, this means with a debug configuration, the file *jquery-1.7.1.js* will be added to the bundle.</span></span> <span data-ttu-id="1e3d7-191">V rámci konfigurace verze *jquery 1.7.1.min.js* bude přidán.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-191">In a release configuration, *jquery-1.7.1.min.js* will be added.</span></span> <span data-ttu-id="1e3d7-192">Rozhraní instalujícího dodržovat konvence prostředí několik běžných jako například:</span><span class="sxs-lookup"><span data-stu-id="1e3d7-192">The bundling framework follows several common conventions such as:</span></span>

- <span data-ttu-id="1e3d7-193">Soubor ".min" pro verzi vyberete, pokud existují "FileX.min.js" a "FileX.js".</span><span class="sxs-lookup"><span data-stu-id="1e3d7-193">Selecting ".min" file for release when "FileX.min.js" and "FileX.js" exist.</span></span>
- <span data-ttu-id="1e3d7-194">Vyberte jiný ".min" verze pro ladění.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-194">Selecting the non ".min" version for debug.</span></span>
- <span data-ttu-id="1e3d7-195">Ignoruje "-vsdoc" (například jquery-1.7.1-vsdoc.js), soubory, které se používají pouze technologii IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-195">Ignoring "-vsdoc" files (such as jquery-1.7.1-vsdoc.js), which are used only by IntelliSense.</span></span>

<span data-ttu-id="1e3d7-196">`{version}` Zástupný znak odpovídající uvedené výše se používá pro automatické vytvoření sady jQuery s příslušnou verzi jQuery ve vaší *skripty* složky.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-196">The `{version}` wild card matching shown above is used to automatically create a jQuery bundle with the appropriate version of jQuery in your *Scripts* folder.</span></span> <span data-ttu-id="1e3d7-197">V tomto příkladu pomocí zástupný znak poskytuje následující výhody:</span><span class="sxs-lookup"><span data-stu-id="1e3d7-197">In this example, using a wild card provides the following benefits:</span></span>

- <span data-ttu-id="1e3d7-198">Umožňuje aktualizovat na novější verzi jQuery beze změn v předchozí instalujícího kód nebo jQuery odkazy na stránkách zobrazení pomocí balíčku NuGet.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-198">Allows you to use NuGet to update to a newer jQuery version without changing the preceding bundling code or jQuery references in your view pages.</span></span>
- <span data-ttu-id="1e3d7-199">Automaticky vybere na plnou verzi pro konfiguraci ladění a verzí ".min" pro verzi sestavení.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-199">Automatically selects the full version for debug configurations and the ".min" version for release builds.</span></span>

## <a name="using-a-cdn"></a><span data-ttu-id="1e3d7-200">Pomocí název CDN</span><span class="sxs-lookup"><span data-stu-id="1e3d7-200">Using a CDN</span></span>

 <span data-ttu-id="1e3d7-201">Postupujte podle kódu nahradí sadu místní jQuery sady jQuery CDN.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-201">The follow code replaces the local jQuery bundle with a CDN jQuery bundle.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample6.cs)]

<span data-ttu-id="1e3d7-202">Zatímco ve verzi režimu a ladění verzi jQuery budou načteny místně v režimu ladění, bude ve výše uvedeném kódu, vyžádána jQuery od CDN.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-202">In the code above, jQuery will be requested from the CDN while in release mode and the debug version of jQuery will be fetched locally in debug mode.</span></span> <span data-ttu-id="1e3d7-203">Při použití CDN, měli byste mít nouzový mechanismus, v případě, že CDN požadavek selže.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-203">When using a CDN, you should have a fallback mechanism in case the CDN request fails.</span></span> <span data-ttu-id="1e3d7-204">Následující kód fragmentovat od konce skript ukazuje souboru rozložení přidána do žádosti o jQuery by měla selhání CDN.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-204">The following markup fragment from the end of the layout file shows script added to request jQuery should the CDN fail.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample7.cshtml?highlight=5-13)]

## <a name="creating-a-bundle"></a><span data-ttu-id="1e3d7-205">Vytvoření sady</span><span class="sxs-lookup"><span data-stu-id="1e3d7-205">Creating a Bundle</span></span>

<span data-ttu-id="1e3d7-206">[Sady](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) třída `Include` metoda přebírá pole řetězců, kde je každý řetězec virtuální cesty k prostředku.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-206">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `Include` method takes an array of strings, where each string is a virtual path to resource.</span></span> <span data-ttu-id="1e3d7-207">Následující kód z metody RegisterBundles v *aplikace\_Start\BundleConfig.cs* souboru ukazuje, jak více souborů, které jsou přidány do sady:</span><span class="sxs-lookup"><span data-stu-id="1e3d7-207">The following code from the RegisterBundles method in the *App\_Start\BundleConfig.cs* file shows how multiple files are added to a bundle:</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample8.cs)]

<span data-ttu-id="1e3d7-208">[Sady](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) třída `IncludeDirectory` metoda zajišťuje přidejte všechny soubory v adresáři (a volitelně všechny podadresáře), které se shodují vzoru hledání.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-208">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `IncludeDirectory` method is provided to add all the files in a directory (and optionally all subdirectories) which match a search pattern.</span></span> <span data-ttu-id="1e3d7-209">[Sady](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) třída `IncludeDirectory` rozhraní API jsou uvedeny níže:</span><span class="sxs-lookup"><span data-stu-id="1e3d7-209">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `IncludeDirectory` API is shown below:</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample9.cs)]

<span data-ttu-id="1e3d7-210">Sady odkazují v zobrazení pomocí metody vykreslení ( `Styles.Render` pro šablon stylů CSS a `Scripts.Render` pro jazyk JavaScript).</span><span class="sxs-lookup"><span data-stu-id="1e3d7-210">Bundles are referenced in views using the Render method, ( `Styles.Render` for CSS and `Scripts.Render` for JavaScript).</span></span> <span data-ttu-id="1e3d7-211">Následující kód z *Views\Shared\\_Layout.cshtml* souboru ukazuje, jak výchozí zobrazení projektu ASP.NET internet odkazovat sady šablon stylů CSS a JavaScript.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-211">The following markup from the *Views\Shared\\_Layout.cshtml* file shows how the default ASP.NET internet project views reference CSS and JavaScript bundles.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample10.cshtml?highlight=5-6,11)]

<span data-ttu-id="1e3d7-212">Všimněte si, vykreslení metody má pole řetězců, takže můžete přidat více sad na jeden řádek kódu.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-212">Notice the Render methods takes an array of strings, so you can add multiple bundles in one line of code.</span></span> <span data-ttu-id="1e3d7-213">Obvykle můžete používat vykreslení metody, které pak vytvoří nezbytné HTML tak, aby odkazovaly asset.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-213">You will generally want to use the Render methods which create the necessary HTML to reference the asset.</span></span> <span data-ttu-id="1e3d7-214">Můžete použít `Url` metoda ke generování adresy URL pro daný prostředek bez značek potřeby tak, aby odkazovaly asset.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-214">You can use the `Url` method to generate the URL to the asset without the markup needed to reference the asset.</span></span> <span data-ttu-id="1e3d7-215">Předpokládejme, že jste chtěli použít novou HTML5 [asynchronní](http://www.whatwg.org/specs/web-apps/current-work/#attr-script-async) atribut.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-215">Suppose you wanted to use the new HTML5 [async](http://www.whatwg.org/specs/web-apps/current-work/#attr-script-async) attribute.</span></span> <span data-ttu-id="1e3d7-216">Následující kód ukazuje, jak odkazovat pomocí modernizr `Url` metoda.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-216">The following code shows how to reference modernizr using the `Url` method.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample11.cshtml?highlight=11)]

## <a name="using-the--wildcard-character-to-select-files"></a><span data-ttu-id="1e3d7-217">Pomocí "\*" zástupný znak a vyberte soubory</span><span class="sxs-lookup"><span data-stu-id="1e3d7-217">Using the "\*" Wildcard Character to Select Files</span></span>

<span data-ttu-id="1e3d7-218">Virtuální cestě uvedené v `Include` metoda a vyhledávání vzorů v `IncludeDirectory` metoda může přijmout jeden "\*" zástupný znak jako předponu nebo příponu v poslední segment cesty.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-218">The virtual path specified in the `Include` method and the search pattern in the `IncludeDirectory` method can accept one "\*" wildcard character as a prefix or suffix to in the last path segment.</span></span> <span data-ttu-id="1e3d7-219">Řetězec pro hledání nejsou rozlišována malá a velká písmena.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-219">The search string is case insensitive.</span></span> <span data-ttu-id="1e3d7-220">`IncludeDirectory` Metoda má možnost hledání podadresářů.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-220">The `IncludeDirectory` method has the option of searching subdirectories.</span></span>

<span data-ttu-id="1e3d7-221">Zvažte projekt s následující soubory JavaScript:</span><span class="sxs-lookup"><span data-stu-id="1e3d7-221">Consider a project with the following JavaScript files:</span></span>

- <span data-ttu-id="1e3d7-222">*Scripts\Common\AddAltToImg.js*</span><span class="sxs-lookup"><span data-stu-id="1e3d7-222">*Scripts\Common\AddAltToImg.js*</span></span>
- <span data-ttu-id="1e3d7-223">*Scripts\Common\ToggleDiv.js*</span><span class="sxs-lookup"><span data-stu-id="1e3d7-223">*Scripts\Common\ToggleDiv.js*</span></span>
- <span data-ttu-id="1e3d7-224">*Scripts\Common\ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="1e3d7-224">*Scripts\Common\ToggleImg.js*</span></span>
- <span data-ttu-id="1e3d7-225">*Scripts\Common\Sub1\ToggleLinks.js*</span><span class="sxs-lookup"><span data-stu-id="1e3d7-225">*Scripts\Common\Sub1\ToggleLinks.js*</span></span>

![dir imag](bundling-and-minification/_static/image7.png)

<span data-ttu-id="1e3d7-227">Následující tabulka uvádí soubory přidané do sady pomocí zástupného, jak je znázorněno:</span><span class="sxs-lookup"><span data-stu-id="1e3d7-227">The following table shows the files added to a bundle using the wildcard as shown:</span></span>

| <span data-ttu-id="1e3d7-228">**Volání**</span><span class="sxs-lookup"><span data-stu-id="1e3d7-228">**Call**</span></span> | <span data-ttu-id="1e3d7-229">**Přidat soubory nebo byla vyvolána výjimka**</span><span class="sxs-lookup"><span data-stu-id="1e3d7-229">**Files Added or Exception Raised**</span></span> |
| --- | --- |
| <span data-ttu-id="1e3d7-230">Include("~/Scripts/Common/\*.js")</span><span class="sxs-lookup"><span data-stu-id="1e3d7-230">Include("~/Scripts/Common/\*.js")</span></span> | <span data-ttu-id="1e3d7-231">*AddAltToImg.js, ToggleDiv.js, ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="1e3d7-231">*AddAltToImg.js, ToggleDiv.js, ToggleImg.js*</span></span> |
| <span data-ttu-id="1e3d7-232">Include("~/Scripts/Common/T\*.js")</span><span class="sxs-lookup"><span data-stu-id="1e3d7-232">Include("~/Scripts/Common/T\*.js")</span></span> | <span data-ttu-id="1e3d7-233">Neplatný vzor výjimka.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-233">Invalid pattern exception.</span></span> <span data-ttu-id="1e3d7-234">Zástupný znak je povolena pouze u předponu nebo příponu.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-234">The wildcard character is only allowed on the prefix or suffix.</span></span> |
| <span data-ttu-id="1e3d7-235">Include("~/Scripts/Common/\*og.\*")</span><span class="sxs-lookup"><span data-stu-id="1e3d7-235">Include("~/Scripts/Common/\*og.\*")</span></span> | <span data-ttu-id="1e3d7-236">Neplatný vzor výjimka.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-236">Invalid pattern exception.</span></span> <span data-ttu-id="1e3d7-237">Je povolen pouze jeden zástupný znak.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-237">Only one wildcard character is allowed.</span></span> |
| <span data-ttu-id="1e3d7-238">"Include("~/Scripts/Common/T\*")</span><span class="sxs-lookup"><span data-stu-id="1e3d7-238">"Include("~/Scripts/Common/T\*")</span></span> | <span data-ttu-id="1e3d7-239">*ToggleDiv.js, ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="1e3d7-239">*ToggleDiv.js, ToggleImg.js*</span></span> |
| <span data-ttu-id="1e3d7-240">"Include("~/Scripts/Common/\*")</span><span class="sxs-lookup"><span data-stu-id="1e3d7-240">"Include("~/Scripts/Common/\*")</span></span> | <span data-ttu-id="1e3d7-241">Neplatný vzor výjimka.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-241">Invalid pattern exception.</span></span> <span data-ttu-id="1e3d7-242">Segment čistý zástupný znak není platný.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-242">A pure wildcard segment is not valid.</span></span> |
| <span data-ttu-id="1e3d7-243">IncludeDirectory ("~/Scripts/Common", "T\*")</span><span class="sxs-lookup"><span data-stu-id="1e3d7-243">IncludeDirectory("~/Scripts/Common", "T\*")</span></span> | <span data-ttu-id="1e3d7-244">*ToggleDiv.js, ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="1e3d7-244">*ToggleDiv.js, ToggleImg.js*</span></span> |
| <span data-ttu-id="1e3d7-245">IncludeDirectory ("~/Scripts/Common", "T\*", true)</span><span class="sxs-lookup"><span data-stu-id="1e3d7-245">IncludeDirectory("~/Scripts/Common", "T\*",true)</span></span> | <span data-ttu-id="1e3d7-246">*ToggleDiv.js, ToggleImg.js, ToggleLinks.js*</span><span class="sxs-lookup"><span data-stu-id="1e3d7-246">*ToggleDiv.js, ToggleImg.js, ToggleLinks.js*</span></span> |

<span data-ttu-id="1e3d7-247">Explicitně přidání každého souboru do sady je obecně upřednostňované přes zástupný znak načítání souborů z následujících důvodů:</span><span class="sxs-lookup"><span data-stu-id="1e3d7-247">Explicitly adding each file to a bundle is generally the preferred over wildcard loading of files for the following reasons:</span></span>

- <span data-ttu-id="1e3d7-248">Probíhá přidávání skriptů pomocí zástupných znaků výchozí hodnoty k jejich načtení v abecedním pořadí, což je obvykle není co chcete použít.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-248">Adding scripts by wildcard defaults to loading them in alphabetical order, which is typically not what you want.</span></span> <span data-ttu-id="1e3d7-249">Soubory šablon stylů CSS a JavaScript je často nutné přidat v určitém pořadí (neabecední).</span><span class="sxs-lookup"><span data-stu-id="1e3d7-249">CSS and JavaScript files frequently need to be added in a specific (non-alphabetic) order.</span></span> <span data-ttu-id="1e3d7-250">Toto riziko zmírnit přidáním vlastní [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementace, ale explicitně přidání každý soubor je menší chyba náchylné k chybám.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-250">You can mitigate this risk by adding a custom [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementation, but explicitly adding each file is less error prone.</span></span> <span data-ttu-id="1e3d7-251">Například můžete přidat nové prostředky do složky v budoucnosti, které může vyžadovat, abyste upravili vaše [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementace.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-251">For example, you might add new assets to a folder in the future which might require you to modify your [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementation.</span></span>
- <span data-ttu-id="1e3d7-252">Zobrazení přidat do adresáře pomocí zástupný znak načítání konkrétní soubory můžou být součástí všech zobrazení odkazující na této sady.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-252">View specific files added to a directory using wild card loading can be included in all views referencing that bundle.</span></span> <span data-ttu-id="1e3d7-253">Je-li zobrazit konkrétní skript přidá do sady, může dojít k chybě jazyka JavaScript na jiné zobrazení, které odkazují na sadu.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-253">If the view specific script is added to a bundle, you may get a JavaScript error on other views that reference the bundle.</span></span>
- <span data-ttu-id="1e3d7-254">Soubory šablon stylů CSS, které importovat další soubory za následek importovaných souborů načíst dvakrát.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-254">CSS files that import other files result in the imported files loaded twice.</span></span> <span data-ttu-id="1e3d7-255">Například následující kód vytvoří sadu s většina souborů šablon stylů CSS motiv uživatelského rozhraní jQuery načíst dvakrát.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-255">For example, the following code creates a bundle with most of the jQuery UI theme CSS files loaded twice.</span></span> 

    [!code-csharp[Main](bundling-and-minification/samples/sample12.cs)]

  <span data-ttu-id="1e3d7-256">Selektor zástupný znak "\*.css" přináší do každého souboru CSS ve složce, včetně *Content\themes\base\jquery.ui.all.css* souboru.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-256">The wild card selector "\*.css" brings in each CSS file in the folder, including the *Content\themes\base\jquery.ui.all.css* file.</span></span> <span data-ttu-id="1e3d7-257">*Jquery.ui.all.css* soubor importuje soubory jiných šablon stylů CSS.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-257">The *jquery.ui.all.css* file imports other CSS files.</span></span>

## <a name="bundle-caching"></a><span data-ttu-id="1e3d7-258">Sady ukládání do mezipaměti</span><span class="sxs-lookup"><span data-stu-id="1e3d7-258">Bundle Caching</span></span>

<span data-ttu-id="1e3d7-259">Sady nastavit hlavičku HTTP vyprší platnost jeden rok od vytvoření sady.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-259">Bundles set the HTTP Expires Header one year from when the bundle is created.</span></span> <span data-ttu-id="1e3d7-260">Pokud přejdete na dříve zobrazenou stránku, ukazuje aplikaci Fiddler, které aplikace Internet Explorer neprovede podmíněného požadavku pro sadu, to znamená, že jsou žádné požadavky HTTP GET z prohlížeče IE pro sady a žádné HTTP 304 odpovědi ze serveru.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-260">If you navigate to a previously viewed page, Fiddler shows IE does not make a conditional request for the bundle, that is, there are no HTTP GET requests from IE for the bundles and no HTTP 304 responses from the server.</span></span> <span data-ttu-id="1e3d7-261">Můžete vynutit IE vytvořte žádost na podmíněného pro každou sadu pomocí klávesy F5 (což vede k odpovědi HTTP 304 pro každého svazku).</span><span class="sxs-lookup"><span data-stu-id="1e3d7-261">You can force IE to make a conditional request for each bundle with the F5 key (resulting in a HTTP 304 response for each bundle).</span></span> <span data-ttu-id="1e3d7-262">Úplnou aktualizaci můžete vynutit pomocí ^ F5 (výsledkem odpověď HTTP 200 pro každou sadu.)</span><span class="sxs-lookup"><span data-stu-id="1e3d7-262">You can force a full refresh by using ^F5 (resulting in a HTTP 200 response for each bundle.)</span></span>

<span data-ttu-id="1e3d7-263">Na následujícím obrázku **ukládání do mezipaměti** kartu podokna Fiddler odpovědi:</span><span class="sxs-lookup"><span data-stu-id="1e3d7-263">The following image shows the **Caching** tab of the Fiddler response pane:</span></span>

![ukládání do mezipaměti image Fiddler](bundling-and-minification/_static/image8.png)

<span data-ttu-id="1e3d7-265">Požadavek</span><span class="sxs-lookup"><span data-stu-id="1e3d7-265">The request</span></span>   
`http://localhost/MvcBM_time/bundles/AllMyScripts?v=r0sLDicvP58AIXN_mc3QdyVvVj5euZNzdsa2N1PKvb81`  
 <span data-ttu-id="1e3d7-266">je pro sadu **AllMyScripts** a obsahuje pár řetězec dotazu **v = r0sLDicvP58AIXN\_mc3QdyVvVj5euZNzdsa2N1PKvb81**.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-266">is for the bundle **AllMyScripts** and contains a query string pair **v=r0sLDicvP58AIXN\_mc3QdyVvVj5euZNzdsa2N1PKvb81**.</span></span> <span data-ttu-id="1e3d7-267">Řetězec dotazu **v** má hodnotu token to znamená jedinečný identifikátor, který se používá pro ukládání do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-267">The query string **v** has a value token that is a unique identifier used for caching.</span></span> <span data-ttu-id="1e3d7-268">Tak dlouho, dokud se nezmění. sada, bude požadovat aplikace ASP.NET **AllMyScripts** sady pomocí tohoto tokenu.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-268">As long as the bundle doesn't change, the ASP.NET application will request the **AllMyScripts** bundle using this token.</span></span> <span data-ttu-id="1e3d7-269">Pokud se všechny soubory v sadě změní, rozhraní ASP.NET optimalizace vygeneruje nový token, která zaručí, že požadavky na prohlížeč pro sadu získáte nejnovější sady.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-269">If any file in the bundle changes, the ASP.NET optimization framework will generate a new token, guaranteeing that browser requests for the bundle will get the latest bundle.</span></span>

<span data-ttu-id="1e3d7-270">Pokud spuštění nástroje pro vývojáře F12 Internet Explorer 9 a přejít na dříve načíst stránku, IE nesprávně ukazuje podmíněného požadavky GET na každého svazku a serverem vrácení HTTP 304.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-270">If you run the IE9 F12 developer tools and navigate to a previously loaded page, IE incorrectly shows conditional GET requests made to each bundle and the server returning HTTP 304.</span></span> <span data-ttu-id="1e3d7-271">Můžete si přečíst proč Internet Explorer 9 došlo k problémům se určení toho, jestli žádost podmíněného byl proveden v položce blogu [sítím pomocí CDN a Expires ke zlepšení výkonu webu](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="1e3d7-271">You can read why IE9 has problems determining if a conditional request was made in the blog entry [Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span>

## <a name="less-coffeescript-scss-sass-bundling"></a><span data-ttu-id="1e3d7-272">CoffeeScript, SCSS, Sass méně, sdružování.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-272">LESS, CoffeeScript, SCSS, Sass Bundling.</span></span>

<span data-ttu-id="1e3d7-273">Sdružování a minimalizace framework poskytuje mechanismus pro zpracování zprostředkující jazyky, jako je například [SCSS](http://sass-lang.com/), [Sass](http://sass-lang.com/), [menší](http://www.dotlesscss.org/) nebo [Coffeescript ](http://coffeescript.org/)a použít transformací například minimalizace výsledné sady.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-273">The bundling and minification framework provides a mechanism to process intermediate languages such as [SCSS](http://sass-lang.com/), [Sass](http://sass-lang.com/), [LESS](http://www.dotlesscss.org/) or [Coffeescript](http://coffeescript.org/), and apply transforms such as minification to the resulting bundle.</span></span> <span data-ttu-id="1e3d7-274">Chcete-li například přidat [.less](http://www.dotlesscss.org/) soubory do projektu MVC 4:</span><span class="sxs-lookup"><span data-stu-id="1e3d7-274">For example, to add [.less](http://www.dotlesscss.org/) files to your MVC 4 project:</span></span>

1. <span data-ttu-id="1e3d7-275">Vytvořte složku pro menší obsah.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-275">Create a folder for your LESS content.</span></span> <span data-ttu-id="1e3d7-276">Následující příklad používá *Content\MyLess* složky.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-276">The following example uses the *Content\MyLess* folder.</span></span>
2. <span data-ttu-id="1e3d7-277">Přidat [.less](http://www.dotlesscss.org/) balíček NuGet **bez tečky** do projektu.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-277">Add the [.less](http://www.dotlesscss.org/) NuGet package **dotless** to your project.</span></span>  
    <span data-ttu-id="1e3d7-278">![Instalace bez tečky NuGet](bundling-and-minification/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="1e3d7-278">![NuGet dotless install](bundling-and-minification/_static/image9.png)</span></span>
3. <span data-ttu-id="1e3d7-279">Přidat třídu, která implementuje [IBundleTransform](https://msdn.microsoft.com/library/system.web.optimization.ibundletransform(VS.110).aspx) rozhraní.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-279">Add a class that implements the [IBundleTransform](https://msdn.microsoft.com/library/system.web.optimization.ibundletransform(VS.110).aspx) interface.</span></span> <span data-ttu-id="1e3d7-280">Pro transformaci .less přidejte následující kód do projektu.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-280">For the .less transform, add the following code to your project.</span></span>

    [!code-csharp[Main](bundling-and-minification/samples/sample13.cs)]
4. <span data-ttu-id="1e3d7-281">Vytvoření sady menší soubory se `LessTransform` a [CssMinify](https://msdn.microsoft.com/library/system.web.optimization.cssminify(VS.110).aspx) transformace.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-281">Create a bundle of LESS files with the `LessTransform` and the [CssMinify](https://msdn.microsoft.com/library/system.web.optimization.cssminify(VS.110).aspx) transform.</span></span> <span data-ttu-id="1e3d7-282">Přidejte následující kód, který `RegisterBundles` metoda v *aplikace\_Start\BundleConfig.cs* souboru.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-282">Add the following code to the `RegisterBundles` method in the *App\_Start\BundleConfig.cs* file.</span></span>

    [!code-csharp[Main](bundling-and-minification/samples/sample14.cs)]
5. <span data-ttu-id="1e3d7-283">Přidejte následující kód do všech zobrazení, která odkazuje na sadu menší.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-283">Add the following code to any views which references the LESS bundle.</span></span>

    [!code-cshtml[Main](bundling-and-minification/samples/sample15.cshtml)]

## <a name="bundle-considerations"></a><span data-ttu-id="1e3d7-284">Důležité informace o sadě</span><span class="sxs-lookup"><span data-stu-id="1e3d7-284">Bundle Considerations</span></span>

<span data-ttu-id="1e3d7-285">Dobrý konvence dodržujte při vytváření sady je zahrnout "sady" jako předpony v názvu sady.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-285">A good convention to follow when creating bundles is to include "bundle" as a prefix in the bundle name.</span></span> <span data-ttu-id="1e3d7-286">To zabrání možného [směrování konflikt](https://forums.asp.net/post/5012037.aspx).</span><span class="sxs-lookup"><span data-stu-id="1e3d7-286">This will prevent a possible [routing conflict](https://forums.asp.net/post/5012037.aspx).</span></span>

<span data-ttu-id="1e3d7-287">Jakmile aktualizujete jeden soubor v sadě, se vygeneruje nový token pro parametr řetězce dotazu sady a úplné sady je nutné stáhnout při příštím klient požádá o stránku obsahující sadu.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-287">Once you update one file in a bundle, a new token is generated for the bundle query string parameter and the full bundle must be downloaded the next time a client requests a page containing the bundle.</span></span> <span data-ttu-id="1e3d7-288">V tradiční značky, kde je každý prostředek uvedeny jednotlivě by pouze změněný soubor stáhnout.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-288">In traditional markup where each asset is listed individually, only the changed file would be downloaded.</span></span> <span data-ttu-id="1e3d7-289">Prostředky, které se často mění nemusí být vhodnými kandidáty pro sdružování.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-289">Assets that change frequently may not be good candidates for bundling.</span></span>

<span data-ttu-id="1e3d7-290">Sdružování a minimalizace především zlepšit první čas načítání stránky požadavku.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-290">Bundling and minification primarily improve the first page request load time.</span></span> <span data-ttu-id="1e3d7-291">Po požádal webovou stránku v prohlížeči ukládá do mezipaměti prostředky (JavaScript, CSS a obrázků) tak, aby sdružování a minimalizace nebude poskytovat žádné zvýšení výkonu při žádosti o stejné stránku nebo stránky na stejné lokality požaduje stejné prostředky.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-291">Once a webpage has been requested, the browser caches the assets (JavaScript, CSS and images) so bundling and minification won't provide any performance boost when requesting the same page, or pages on the same site requesting the same assets.</span></span> <span data-ttu-id="1e3d7-292">Pokud není nastavený vyprší platnost záhlaví správně na vaše prostředky a nepoužíváte sdružování a minimalizace, heuristiky aktuálnosti prohlížečů bude označit prostředky zastaralé po několik dní. prohlížeč bude vyžadovat ověření žádosti pro každý prostředek.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-292">If you don't set the expires header correctly on your assets, and you don't use bundling and minification, the browsers freshness heuristics will mark the assets stale after a few days and the browser will require a validation request for each asset.</span></span> <span data-ttu-id="1e3d7-293">V takovém případě sdružování a minimalizace poskytnout zvýšení výkonu po první požadavek na stránku.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-293">In this case, bundling and minification provide a performance increase after the first page request.</span></span> <span data-ttu-id="1e3d7-294">Podrobnosti najdete v tématu na blogu [sítím pomocí CDN a Expires ke zlepšení výkonu webu](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="1e3d7-294">For details, see the blog [Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span>

<span data-ttu-id="1e3d7-295">Omezení prohlížeče šesti souběžných připojení na každý název hostitele můžete zmírnit použitím [CDN](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="1e3d7-295">The browser limitation of six simultaneous connections per each hostname can be mitigated by using a [CDN](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span> <span data-ttu-id="1e3d7-296">Protože CDN bude mít jiný název hostitele než hostitelském webu, nebude asset požadavky od CDN započítává šesti limit souběžných připojení do hostitelského prostředí.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-296">Because the CDN will have a different hostname than your hosting site, asset requests from the CDN will not count against the six simultaneous connections limit to your hosting environment.</span></span> <span data-ttu-id="1e3d7-297">Běžné ukládání do mezipaměti balíček a hraniční ukládání do mezipaměti výhody, může také poskytnout název CDN.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-297">A CDN can also provide common package caching and edge caching advantages.</span></span>

<span data-ttu-id="1e3d7-298">Sady by měl stránkami, které je třeba rozdělit na oddíly.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-298">Bundles should be partitioned by pages that need them.</span></span> <span data-ttu-id="1e3d7-299">Například výchozí šablony ASP.NET MVC pro aplikaci internet vytvoří sady ověřování jQuery odděleně od jQuery.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-299">For example, the default ASP.NET MVC template for an internet application creates a jQuery Validation bundle separate from jQuery.</span></span> <span data-ttu-id="1e3d7-300">Protože výchozí zobrazení, vytvořili jste žádný vstup a neprovede odeslání hodnoty, neobsahují se sady ověřování.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-300">Because the default views created have no input and do not post values, they don't include the validation bundle.</span></span>

<span data-ttu-id="1e3d7-301">`System.Web.Optimization` Obor názvů je implementována ve System.Web.Optimization.DLL.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-301">The `System.Web.Optimization` namespace is implemented in System.Web.Optimization.DLL.</span></span> <span data-ttu-id="1e3d7-302">Využívá knihovně WebGrease (WebGrease.dll) pro minimalizaci možnosti, které dále používá Antlr3.Runtime.dll.</span><span class="sxs-lookup"><span data-stu-id="1e3d7-302">It leverages the WebGrease library (WebGrease.dll) for minification capabilities, which in turn uses Antlr3.Runtime.dll.</span></span>

<span data-ttu-id="1e3d7-303">*Používám služby Twitter a ujistěte se, rychlé příspěvcích sdílet odkazy. Moje Twitter popisovač*: [@RickAndMSFT](http://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="1e3d7-303">*I use Twitter to make quick posts and share links. My Twitter handle is*: [@RickAndMSFT](http://twitter.com/RickAndMSFT)</span></span>

## <a name="additional-resources"></a><span data-ttu-id="1e3d7-304">Další prostředky</span><span class="sxs-lookup"><span data-stu-id="1e3d7-304">Additional Resources</span></span>

- <span data-ttu-id="1e3d7-305">Video:[sdružování a optimalizace](https://channel9.msdn.com/Events/aspConf/aspConf/Bundling-and-Optimizing) podle [Howard Dierking](https://twitter.com/#!/howard_dierking)</span><span class="sxs-lookup"><span data-stu-id="1e3d7-305">Video:[Bundling and Optimizing](https://channel9.msdn.com/Events/aspConf/aspConf/Bundling-and-Optimizing) by [Howard Dierking](https://twitter.com/#!/howard_dierking)</span></span>
- <span data-ttu-id="1e3d7-306">[Přidání optimalizaci webů k lokalitě webové stránky](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span><span class="sxs-lookup"><span data-stu-id="1e3d7-306">[Adding Web Optimization to a Web Pages Site](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span></span>
- <span data-ttu-id="1e3d7-307">[Přidání sdružování a minimalizace pro webové formuláře](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span><span class="sxs-lookup"><span data-stu-id="1e3d7-307">[Adding Bundling and Minification to Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span></span>
- <span data-ttu-id="1e3d7-308">[Důsledky výkonu sdružování a minimalizace na procházení webu](https://blogs.msdn.com/b/henrikn/archive/2012/06/17/performance-implications-of-bundling-and-minification-on-http.aspx) podle [společnost Nielsen Petr F](http://en.wikipedia.org/wiki/Henrik_Frystyk_Nielsen) [@frystyk](https://twitter.com/frystyk)</span><span class="sxs-lookup"><span data-stu-id="1e3d7-308">[Performance Implications of Bundling and Minification on Web Browsing](https://blogs.msdn.com/b/henrikn/archive/2012/06/17/performance-implications-of-bundling-and-minification-on-http.aspx) by [Henrik F Nielsen](http://en.wikipedia.org/wiki/Henrik_Frystyk_Nielsen) [@frystyk](https://twitter.com/frystyk)</span></span>
- <span data-ttu-id="1e3d7-309">[Pomocí sítím CDN a jeho platnost vyprší ke zlepšení výkonu webu](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx) od Ricka Andersona [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="1e3d7-309">[Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx) by Rick Anderson [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT)</span></span>
- [<span data-ttu-id="1e3d7-310">Minimalizovat požadavku (časy odezvy)</span><span class="sxs-lookup"><span data-stu-id="1e3d7-310">Minimize RTT (round-trip times)</span></span>](https://developers.google.com/speed/docs/best-practices/rtt)

## <a name="contributors"></a><span data-ttu-id="1e3d7-311">Contributors</span><span class="sxs-lookup"><span data-stu-id="1e3d7-311">Contributors</span></span>

- <span data-ttu-id="1e3d7-312">Ani Haovi společnosti</span><span class="sxs-lookup"><span data-stu-id="1e3d7-312">Hao Kung</span></span>
- [<span data-ttu-id="1e3d7-313">Howard Dierking</span><span class="sxs-lookup"><span data-stu-id="1e3d7-313">Howard Dierking</span></span>](https://twitter.com/#!/howard_dierking)
- <span data-ttu-id="1e3d7-314">Diana LaRose</span><span class="sxs-lookup"><span data-stu-id="1e3d7-314">Diana LaRose</span></span>
