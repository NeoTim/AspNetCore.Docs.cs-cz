---
uid: mvc/overview/getting-started/getting-started-with-ef-using-mvc/migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application
title: Migrace a nasazení pomocí rozhraní Entity Framework v aplikaci ASP.NET MVC nejprve kódu | Microsoft Docs
author: tdykstra
description: Contoso univerzity ukázkovou webovou aplikaci demonstruje postup vytvoření aplikace ASP.NET MVC 5 s použitím Entity Framework 6 Code First a Visual Studio...
ms.author: aspnetcontent
manager: wpickett
ms.date: 11/07/2014
ms.topic: article
ms.assetid: d4dfc435-bda6-4621-9762-9ba270f8de4e
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/getting-started/getting-started-with-ef-using-mvc/migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application
msc.type: authoredcontent
ms.openlocfilehash: 04d393edca0469df140f06a7d083a48aa8f84b65
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/06/2018
ms.locfileid: "30879553"
---
<a name="code-first-migrations-and-deployment-with-the-entity-framework-in-an-aspnet-mvc-application"></a><span data-ttu-id="6e269-103">Nejprve kódu migrace a nasazení pomocí rozhraní Entity Framework v aplikaci ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="6e269-103">Code First Migrations and Deployment with the Entity Framework in an ASP.NET MVC Application</span></span>
====================
<span data-ttu-id="6e269-104">Podle [tní Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="6e269-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="6e269-105">[Stáhněte si dokončený projekt](http://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8) nebo [stáhnout PDF](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20Entity%20Framework%206%20Code%20First%20using%20MVC%205.pdf)</span><span class="sxs-lookup"><span data-stu-id="6e269-105">[Download Completed Project](http://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8) or [Download PDF](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20Entity%20Framework%206%20Code%20First%20using%20MVC%205.pdf)</span></span>

> <span data-ttu-id="6e269-106">Contoso univerzity ukázkovou webovou aplikaci demonstruje postup vytvoření aplikace ASP.NET MVC 5 s použitím Entity Framework 6 Code First a Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="6e269-106">The Contoso University sample web application demonstrates how to create ASP.NET MVC 5 applications using the Entity Framework 6 Code First and Visual Studio 2013.</span></span> <span data-ttu-id="6e269-107">Informace o kurzu řady najdete v tématu [z prvního kurzu řady](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span><span class="sxs-lookup"><span data-stu-id="6e269-107">For information about the tutorial series, see [the first tutorial in the series](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span></span>

<span data-ttu-id="6e269-108">Pokud spuštění aplikace místně v IIS Express na vašem vývojovém počítači.</span><span class="sxs-lookup"><span data-stu-id="6e269-108">So far the application has been running locally in IIS Express on your development computer.</span></span> <span data-ttu-id="6e269-109">Chcete-li reálné aplikaci zpřístupnit ostatním uživatelům používat přes Internet, budete muset nasadit do webové poskytovatele hostitelských služeb.</span><span class="sxs-lookup"><span data-stu-id="6e269-109">To make a real application available for other people to use over the Internet, you have to deploy it to a web hosting provider.</span></span> <span data-ttu-id="6e269-110">V tomto kurzu budete nasazovat aplikace Contoso univerzity do cloudu v Azure.</span><span class="sxs-lookup"><span data-stu-id="6e269-110">In this tutorial, you'll deploy the Contoso University application to the cloud in Azure.</span></span>

<span data-ttu-id="6e269-111">Tento kurz obsahuje následující části:</span><span class="sxs-lookup"><span data-stu-id="6e269-111">The tutorial contains the following sections:</span></span>

- <span data-ttu-id="6e269-112">Povolte migrace Code First.</span><span class="sxs-lookup"><span data-stu-id="6e269-112">Enable Code First Migrations.</span></span> <span data-ttu-id="6e269-113">Funkce migrace umožňuje změnit datový model a nasazovat změny do produkčního prostředí s aktualizace schématu databáze, aniž by bylo nutné vyřadit a znovu vytvořit databázi.</span><span class="sxs-lookup"><span data-stu-id="6e269-113">The Migrations feature enables you to change the data model and deploy your changes to production by updating the database schema without having to drop and re-create the database.</span></span>
- <span data-ttu-id="6e269-114">Nasazení do Azure.</span><span class="sxs-lookup"><span data-stu-id="6e269-114">Deploy to Azure.</span></span> <span data-ttu-id="6e269-115">Tento krok je volitelný; Zbývající kurzech můžete pokračovat bez nutnosti nasadili projekt.</span><span class="sxs-lookup"><span data-stu-id="6e269-115">This step is optional; you can continue with the remaining tutorials without having deployed the project.</span></span>

<span data-ttu-id="6e269-116">Doporučujeme vám, že pomocí procesu průběžnou integraci s zdrojového kódu pro nasazení, ale v tomto kurzu ale nenajdete, tato témata.</span><span class="sxs-lookup"><span data-stu-id="6e269-116">We recommend that you use a continuous integration process with source control for deployment, but this tutorial does not cover those topics.</span></span> <span data-ttu-id="6e269-117">Další informace najdete v tématu [ovládací prvek zdroje](xref:aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/source-control) a [průběžnou integraci](xref:aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/continuous-integration-and-continuous-delivery) kapitoly [vytváření reálných cloudových aplikací s Azure](xref:aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/introduction) elektronických knih.</span><span class="sxs-lookup"><span data-stu-id="6e269-117">For more information, see the [source control](xref:aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/source-control) and [continuous integration](xref:aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/continuous-integration-and-continuous-delivery) chapters of the [Building Real-World Cloud Apps with Azure](xref:aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/introduction) e-book.</span></span>

## <a name="enable-code-first-migrations"></a><span data-ttu-id="6e269-118">Povolení migrace Code First</span><span class="sxs-lookup"><span data-stu-id="6e269-118">Enable Code First Migrations</span></span>

<span data-ttu-id="6e269-119">Při vývoji nových aplikací datový model změní často a pokaždé, když změn modelu, získá synchronizována s databází.</span><span class="sxs-lookup"><span data-stu-id="6e269-119">When you develop a new application, your data model changes frequently, and each time the model changes, it gets out of sync with the database.</span></span> <span data-ttu-id="6e269-120">Jste nakonfigurovali automaticky vyřadit a znovu vytvořit databázi při každé změně datového modelu Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="6e269-120">You have configured the Entity Framework to automatically drop and re-create the database each time you change the data model.</span></span> <span data-ttu-id="6e269-121">Pokud můžete přidat, odebrat, nebo změňte tříd entit nebo změnit vaše `DbContext` třídy, při příštím spuštění aplikace automaticky odstraní existující databázi, vytvoří novou, který odpovídá modelu a doplňuje s testovacích datech.</span><span class="sxs-lookup"><span data-stu-id="6e269-121">When you add, remove, or change entity classes or change your `DbContext` class, the next time you run the application it automatically deletes your existing database, creates a new one that matches the model, and seeds it with test data.</span></span>

<span data-ttu-id="6e269-122">Udržování databáze synchronizace s datovým modelem, tato metoda funguje dobře, dokud nasazení aplikace do produkčního prostředí.</span><span class="sxs-lookup"><span data-stu-id="6e269-122">This method of keeping the database in sync with the data model works well until you deploy the application to production.</span></span> <span data-ttu-id="6e269-123">Když je aplikace spuštěna v produkčním prostředí, je obvykle ukládá data, která chcete zachovat a nechcete ztratit všechno pokaždé, když provedete změny, jako je například přidávání nové sloupce.</span><span class="sxs-lookup"><span data-stu-id="6e269-123">When the application is running in production, it is usually storing data that you want to keep, and you don't want to lose everything each time you make a change such as adding a new column.</span></span> <span data-ttu-id="6e269-124">[Migrace Code First](https://msdn.microsoft.com/data/jj591621) funkce tento problém řeší tím, že umožňuje Code First aktualizovat schéma databáze místo vyřadit a znovu vytvořit databázi.</span><span class="sxs-lookup"><span data-stu-id="6e269-124">The [Code First Migrations](https://msdn.microsoft.com/data/jj591621) feature solves this problem by enabling Code First to update the database schema instead of dropping and re-creating the database.</span></span> <span data-ttu-id="6e269-125">V tomto kurzu budete nasazovat aplikace a příprava na který budete povolit migrace.</span><span class="sxs-lookup"><span data-stu-id="6e269-125">In this tutorial, you'll deploy the application, and to prepare for that you'll enable Migrations.</span></span>

1. <span data-ttu-id="6e269-126">Zakázat inicializátoru, kterou jste vytvořili dříve při psaní komentářů nebo odstranění `contexts` element, který jste přidali do souboru Web.config aplikace.</span><span class="sxs-lookup"><span data-stu-id="6e269-126">Disable the initializer that you set up earlier by commenting out or deleting the `contexts` element that you added to the application Web.config file.</span></span>

    [!code-xml[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample1.xml?highlight=2,6)]
2. <span data-ttu-id="6e269-127">Také v aplikaci *Web.config* souboru, změňte název databáze v připojovacím řetězci ContosoUniversity2.</span><span class="sxs-lookup"><span data-stu-id="6e269-127">Also in the application *Web.config* file, change the name of the database in the connection string to ContosoUniversity2.</span></span>

    [!code-xml[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample2.xml?highlight=2)]

    <span data-ttu-id="6e269-128">Tato změna nastaví projekt tak, aby první migrací vytvoří novou databázi.</span><span class="sxs-lookup"><span data-stu-id="6e269-128">This change sets up the project so that the first migration will create a new database.</span></span> <span data-ttu-id="6e269-129">Tato akce není povinná, ale se zobrazí později proto je vhodné.</span><span class="sxs-lookup"><span data-stu-id="6e269-129">This isn't required but you'll see later why it's a good idea.</span></span>
3. <span data-ttu-id="6e269-130">Z **nástroje** nabídky, klikněte na tlačítko **Správce balíčků knihoven** a potom **Konzola správce balíčků**.</span><span class="sxs-lookup"><span data-stu-id="6e269-130">From the **Tools** menu, click **Library Package Manager** and then **Package Manager Console**.</span></span>

    ![Selecting_Package_Manager_Console](https://asp.net/media/4336350/1pm.png)
4. <span data-ttu-id="6e269-132">Na `PM>` řádku zadejte následující příkazy:</span><span class="sxs-lookup"><span data-stu-id="6e269-132">At the `PM>` prompt enter the following commands:</span></span>

    `enable-migrations`  
    `add-migration InitialCreate`

    ![příkaz enable-migrations se](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image1.png)

    <span data-ttu-id="6e269-134">`enable-migrations` Příkaz vytvoří *migrace* složky v projektu ContosoUniversity a uloží je v této složce *Configuration.cs* soubor, který můžete upravit konfigurace migrací.</span><span class="sxs-lookup"><span data-stu-id="6e269-134">The `enable-migrations` command creates a *Migrations* folder in the ContosoUniversity project, and it puts in that folder a *Configuration.cs* file that you can edit to configure Migrations.</span></span>

    <span data-ttu-id="6e269-135">(Pokud provedena předchozí krok, který přesměruje, budete muset změnit název databáze, bude najít existující databázi a automaticky se migrace `add-migration` příkaz.</span><span class="sxs-lookup"><span data-stu-id="6e269-135">(If you missed the step above that directs you to change the database name, Migrations will find the existing database and automatically do the `add-migration` command.</span></span> <span data-ttu-id="6e269-136">To je v pořádku, právě znamená, že před nasazením databáze nebude spustit test migrace kódu.</span><span class="sxs-lookup"><span data-stu-id="6e269-136">That's OK, it just means you won't run a test of the migrations code before you deploy the database.</span></span> <span data-ttu-id="6e269-137">Později při spuštění `update-database` příkaz není provedena žádná akce vzhledem k tomu, že bude databáze již existovat.)</span><span class="sxs-lookup"><span data-stu-id="6e269-137">Later when you run the `update-database` command nothing will happen because the database will already exist.)</span></span>

    ![Složku migrations](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image2.png)

    <span data-ttu-id="6e269-139">Inicializátor třídu, která jste viděli dříve, jako `Configuration` třída obsahuje `Seed` metoda.</span><span class="sxs-lookup"><span data-stu-id="6e269-139">Like the initializer class that you saw earlier, the `Configuration` class includes a `Seed` method.</span></span>

    [!code-csharp[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample3.cs)]

    <span data-ttu-id="6e269-140">Účelem [počáteční hodnoty](https://msdn.microsoft.com/library/hh829453(v=vs.103).aspx) metoda je umožnit vložit nebo aktualizovat testovací data po Code First vytvoří nebo aktualizuje databázi.</span><span class="sxs-lookup"><span data-stu-id="6e269-140">The purpose of the [Seed](https://msdn.microsoft.com/library/hh829453(v=vs.103).aspx) method is to enable you to insert or update test data after Code First creates or updates the database.</span></span> <span data-ttu-id="6e269-141">Metoda je volána při vytvoření databáze, a při každé aktualizaci schématu databáze po změně datového modelu.</span><span class="sxs-lookup"><span data-stu-id="6e269-141">The method is called when the database is created and every time the database schema is updated after a data model change.</span></span>

### <a name="set-up-the-seed-method"></a><span data-ttu-id="6e269-142">Nastavit Seed – metoda</span><span class="sxs-lookup"><span data-stu-id="6e269-142">Set up the Seed Method</span></span>

<span data-ttu-id="6e269-143">Když jsou odstranit a znovu vytvořit databázi u každé změny datového modelu, můžete použít třídu inicializátoru `Seed` dojde ke ztrátě metoda vložit testovací data, protože po každé změně modelu je odstranit databázi a v testovacích datech.</span><span class="sxs-lookup"><span data-stu-id="6e269-143">When you are dropping and re-creating the database for every data model change, you use the initializer class's `Seed` method to insert test data, because after every model change the database is dropped and all the test data is lost.</span></span> <span data-ttu-id="6e269-144">Pomocí migrace Code First, testovací data se uchovávají po provedení změn databáze, takže včetně testovací data v [počáteční hodnoty](https://msdn.microsoft.com/library/hh829453(v=vs.103).aspx) metoda není obvykle nutné.</span><span class="sxs-lookup"><span data-stu-id="6e269-144">With Code First Migrations, test data is retained after database changes, so including test data in the [Seed](https://msdn.microsoft.com/library/hh829453(v=vs.103).aspx) method is typically not necessary.</span></span> <span data-ttu-id="6e269-145">Ve skutečnosti, které nechcete `Seed` metoda vložit testovací data, pokud budete používat migrace pro nasazení databáze do produkčního prostředí, protože `Seed` metoda bude spuštěna v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="6e269-145">In fact, you don't want the `Seed` method to insert test data if you'll be using Migrations to deploy the database to production, because the `Seed` method will run in production.</span></span> <span data-ttu-id="6e269-146">V takovém případě má `Seed` metoda vložit do databáze pouze data, která je nutné v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="6e269-146">In that case you want the `Seed` method to insert into the database only the data that you need in production.</span></span> <span data-ttu-id="6e269-147">Například můžete zahrnout názvy skutečné oddělení v databázi `Department` tabulky, až aplikace k dispozici v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="6e269-147">For example, you might want the database to include actual department names in the `Department` table when the application becomes available in production.</span></span>

<span data-ttu-id="6e269-148">V tomto kurzu budete používat migrace pro nasazení, ale vaše `Seed` metoda bude přesto vložit testovací data pro snazší zjistit, jak funguje funkce aplikace, aniž by bylo nutné ručně vložit velké množství dat.</span><span class="sxs-lookup"><span data-stu-id="6e269-148">For this tutorial, you'll be using Migrations for deployment, but your `Seed` method will insert test data anyway in order to make it easier to see how application functionality works without having to manually insert a lot of data.</span></span>

1. <span data-ttu-id="6e269-149">Nahraďte obsah *Configuration.cs* soubor s následující kód, který načte testovací data do nové databáze.</span><span class="sxs-lookup"><span data-stu-id="6e269-149">Replace the contents of the *Configuration.cs* file with the following code, which will load test data into the new database.</span></span> 

    [!code-csharp[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample4.cs)]

    <span data-ttu-id="6e269-150">[Počáteční hodnoty](https://msdn.microsoft.com/library/hh829453(v=vs.103).aspx) metoda přebírá objekt kontextu databáze jako vstupní parametr a kód v metodě používá tento objekt k přidání nové entity do databáze.</span><span class="sxs-lookup"><span data-stu-id="6e269-150">The [Seed](https://msdn.microsoft.com/library/hh829453(v=vs.103).aspx) method takes the database context object as an input parameter, and the code in the method uses that object to add new entities to the database.</span></span> <span data-ttu-id="6e269-151">Ke každému typu entity kód vytvoří kolekci nové entity, se přidají do příslušné [DbSet](https://msdn.microsoft.com/library/system.data.entity.dbset(v=vs.103).aspx) vlastnost a uloží změny do databáze.</span><span class="sxs-lookup"><span data-stu-id="6e269-151">For each entity type, the code creates a collection of new entities, adds them to the appropriate [DbSet](https://msdn.microsoft.com/library/system.data.entity.dbset(v=vs.103).aspx) property, and then saves the changes to the database.</span></span> <span data-ttu-id="6e269-152">Není nutné volat [SaveChanges](https://msdn.microsoft.com/library/system.data.entity.dbcontext.savechanges(v=VS.103).aspx) metoda po každé skupiny entit, jako je na jednom místě, ale umožňuje učinit vyhledejte zdroj problému, pokud dojde k výjimce při kód je zápis do databáze.</span><span class="sxs-lookup"><span data-stu-id="6e269-152">It isn't necessary to call the [SaveChanges](https://msdn.microsoft.com/library/system.data.entity.dbcontext.savechanges(v=VS.103).aspx) method after each group of entities, as is done here, but doing that helps you locate the source of a problem if an exception occurs while the code is writing to the database.</span></span>

    <span data-ttu-id="6e269-153">Některé příkazy, který vkládá data pomocí [AddOrUpdate](https://msdn.microsoft.com/library/system.data.entity.migrations.idbsetextensions.addorupdate(v=vs.103).aspx) metoda o provedení operace "upsert".</span><span class="sxs-lookup"><span data-stu-id="6e269-153">Some of the statements that insert data use the [AddOrUpdate](https://msdn.microsoft.com/library/system.data.entity.migrations.idbsetextensions.addorupdate(v=vs.103).aspx) method to perform an "upsert" operation.</span></span> <span data-ttu-id="6e269-154">Protože `Seed` metoda spuštěna při každém spuštění `update-database` příkazu, obvykle po každé migraci dat, nelze právě vložit, protože řádky, které se pokoušíte přidat bude po první migrace, která vytváří databázi již existovat.</span><span class="sxs-lookup"><span data-stu-id="6e269-154">Because the `Seed` method runs every time you execute the `update-database` command, typically after each migration, you can't just insert data, because the rows you are trying to add will already be there after the first migration that creates the database.</span></span> <span data-ttu-id="6e269-155">Operace "upsert", zabraňuje chyb, které by mohlo dojít, pokud se pokusíte vložit řádek, který již existuje, ale ***přepsání*** všechny změny dat, která může provedení při testování aplikace.</span><span class="sxs-lookup"><span data-stu-id="6e269-155">The "upsert" operation prevents errors that would happen if you try to insert a row that already exists, but it ***overrides*** any changes to data that you may have made while testing the application.</span></span> <span data-ttu-id="6e269-156">Pro testovací data v některé tabulky nemusí Chcete to tak proběhlo: v některých případech při změně dat při testování vaše změny zůstat po aktualizace databáze.</span><span class="sxs-lookup"><span data-stu-id="6e269-156">With test data in some tables you might not want that to happen: in some cases when you change data while testing you want your changes to remain after database updates.</span></span> <span data-ttu-id="6e269-157">V takovém případě budete chtít provést operace podmíněného insert: Vložit řádek pouze v případě, že ještě neexistuje.</span><span class="sxs-lookup"><span data-stu-id="6e269-157">In that case you want to do a conditional insert operation: insert a row only if it doesn't already exist.</span></span> <span data-ttu-id="6e269-158">Metoda počáteční hodnoty pomocí obou přístupů.</span><span class="sxs-lookup"><span data-stu-id="6e269-158">The Seed method uses both approaches.</span></span>

    <span data-ttu-id="6e269-159">První parametr předaný [AddOrUpdate](https://msdn.microsoft.com/library/system.data.entity.migrations.idbsetextensions.addorupdate(v=vs.103).aspx) metoda určuje vlastnost, která má použít pro kontrolu, pokud řádek již existuje.</span><span class="sxs-lookup"><span data-stu-id="6e269-159">The first parameter passed to the [AddOrUpdate](https://msdn.microsoft.com/library/system.data.entity.migrations.idbsetextensions.addorupdate(v=vs.103).aspx) method specifies the property to use to check if a row already exists.</span></span> <span data-ttu-id="6e269-160">Pro testovací data studenty, který zadáte `LastName` vlastnost lze použít pro tento účel, protože každý příjmení v seznamu je jedinečný:</span><span class="sxs-lookup"><span data-stu-id="6e269-160">For the test student data that you are providing, the `LastName` property can be used for this purpose since each last name in the list is unique:</span></span>

    [!code-csharp[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample5.cs)]

    <span data-ttu-id="6e269-161">Tento kód předpokládá, že poslední názvy jsou jedinečné.</span><span class="sxs-lookup"><span data-stu-id="6e269-161">This code assumes that last names are unique.</span></span> <span data-ttu-id="6e269-162">Pokud chcete ručně přidat student s duplicitním názvem poslední, získáte následující výjimka při příštím provedení migrace.</span><span class="sxs-lookup"><span data-stu-id="6e269-162">If you manually add a student with a duplicate last name, you'll get the following exception the next time you perform a migration.</span></span>

    <span data-ttu-id="6e269-163">Sekvence obsahuje více než jeden element.</span><span class="sxs-lookup"><span data-stu-id="6e269-163">Sequence contains more than one element</span></span>

    <span data-ttu-id="6e269-164">Informace o způsobu zpracování redundantních dat, jako je například dvou studentů s názvem "Alexander Carsonovy" najdete v tématu [první financování a ladění Entity Framework (EF) databází](https://blogs.msdn.com/b/rickandy/archive/2013/02/12/seeding-and-debugging-entity-framework-ef-dbs.aspx) na blogu Ricka Andersona.</span><span class="sxs-lookup"><span data-stu-id="6e269-164">For information about how to handle redundant data such as two students named "Alexander Carson", see [Seeding and Debugging Entity Framework (EF) DBs](https://blogs.msdn.com/b/rickandy/archive/2013/02/12/seeding-and-debugging-entity-framework-ef-dbs.aspx) on Rick Anderson's blog.</span></span> <span data-ttu-id="6e269-165">Další informace o `AddOrUpdate` metodu, najdete v části [postará s EF 4.3 AddOrUpdate metoda](http://thedatafarm.com/blog/data-access/take-care-with-ef-4-3-addorupdate-method/) na blogu Julie Lerman.</span><span class="sxs-lookup"><span data-stu-id="6e269-165">For more information about the `AddOrUpdate` method, see [Take care with EF 4.3 AddOrUpdate Method](http://thedatafarm.com/blog/data-access/take-care-with-ef-4-3-addorupdate-method/) on Julie Lerman's blog.</span></span>

    <span data-ttu-id="6e269-166">Kód, který vytvoří `Enrollment` entity předpokládá, že máte `ID` hodnota v entity v `students` kolekce, i když tuto vlastnost nebyla nastavena v kódu, který vytvoří kolekci.</span><span class="sxs-lookup"><span data-stu-id="6e269-166">The code that creates `Enrollment` entities assumes you have the `ID` value in the entities in the `students` collection, although you didn't set that property in the code that creates the collection.</span></span>

    [!code-csharp[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample6.cs?highlight=2)]

    <span data-ttu-id="6e269-167">Můžete použít `ID` vlastnost zde protože `ID` hodnota při volání `SaveChanges` pro `students` kolekce.</span><span class="sxs-lookup"><span data-stu-id="6e269-167">You can use the `ID` property here because the `ID` value is set when you call `SaveChanges` for the `students` collection.</span></span> <span data-ttu-id="6e269-168">EF automaticky získá hodnotu primárního klíče, když se vloží entitu do databáze, a aktualizuje `ID` vlastnost entity v paměti.</span><span class="sxs-lookup"><span data-stu-id="6e269-168">EF automatically gets the primary key value when it inserts an entity into the database, and it updates the `ID` property of the entity in memory.</span></span>

    <span data-ttu-id="6e269-169">Kód, který přidá všechny `Enrollment` entity, která má `Enrollments` sady entit nepoužívá `AddOrUpdate` metoda.</span><span class="sxs-lookup"><span data-stu-id="6e269-169">The code that adds each `Enrollment` entity to the `Enrollments` entity set doesn't use the `AddOrUpdate` method.</span></span> <span data-ttu-id="6e269-170">Zkontroluje, zda entita již existuje a vloží entitu, pokud neexistuje.</span><span class="sxs-lookup"><span data-stu-id="6e269-170">It checks if an entity already exists and inserts the entity if it doesn't exist.</span></span> <span data-ttu-id="6e269-171">Tento přístup se zachovat změny, které můžete provést úrovni registrace pomocí uživatelského rozhraní aplikace.</span><span class="sxs-lookup"><span data-stu-id="6e269-171">This approach will preserve changes you make to an enrollment grade by using the application UI.</span></span> <span data-ttu-id="6e269-172">Kód prochází každý člen `Enrollment` [seznamu](https://msdn.microsoft.com/library/6sh2ey19.aspx) a pokud registrace nebyla nalezena v databázi, přidá zápisu do databáze.</span><span class="sxs-lookup"><span data-stu-id="6e269-172">The code loops through each member of the `Enrollment`[List](https://msdn.microsoft.com/library/6sh2ey19.aspx) and if the enrollment is not found in the database, it adds the enrollment to the database.</span></span> <span data-ttu-id="6e269-173">Při prvním aktualizaci databáze, databáze se bude prázdný, proto přidá každou registrace.</span><span class="sxs-lookup"><span data-stu-id="6e269-173">The first time you update the database, the database will be empty, so it will add each enrollment.</span></span>

    [!code-csharp[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample7.cs)]
2. <span data-ttu-id="6e269-174">Sestavte projekt.</span><span class="sxs-lookup"><span data-stu-id="6e269-174">Build the project.</span></span>

### <a name="execute-the-first-migration"></a><span data-ttu-id="6e269-175">Provést první migrace</span><span class="sxs-lookup"><span data-stu-id="6e269-175">Execute the First Migration</span></span>

<span data-ttu-id="6e269-176">Při provedení `add-migration` příkaz migrace generovaného kódu, který by vytvoření databáze od začátku.</span><span class="sxs-lookup"><span data-stu-id="6e269-176">When you executed the `add-migration` command, Migrations generated the code that would create the database from scratch.</span></span> <span data-ttu-id="6e269-177">Tento kód je také v *migrace* složku, v souboru s názvem  *&lt;časové razítko&gt;\_InitialCreate.cs*.</span><span class="sxs-lookup"><span data-stu-id="6e269-177">This code is also in the *Migrations* folder, in the file named *&lt;timestamp&gt;\_InitialCreate.cs*.</span></span> <span data-ttu-id="6e269-178">`Up` Metodu `InitialCreate` třída vytvoří databázové tabulky, které odpovídají sady dat modelu entity a `Down` je metoda odstraní.</span><span class="sxs-lookup"><span data-stu-id="6e269-178">The `Up` method of the `InitialCreate` class creates the database tables that correspond to the data model entity sets, and the `Down` method deletes them.</span></span>

[!code-csharp[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample8.cs)]

<span data-ttu-id="6e269-179">Migrace volání `Up` metody k implementaci změny modelu dat pro migraci.</span><span class="sxs-lookup"><span data-stu-id="6e269-179">Migrations calls the `Up` method to implement the data model changes for a migration.</span></span> <span data-ttu-id="6e269-180">Když zadáte příkaz k vrácení aktualizace, migrace volání `Down` metoda.</span><span class="sxs-lookup"><span data-stu-id="6e269-180">When you enter a command to roll back the update, Migrations calls the `Down` method.</span></span>

<span data-ttu-id="6e269-181">Toto je počáteční migrace, která byla vytvořena, když jste zadali `add-migration InitialCreate` příkaz.</span><span class="sxs-lookup"><span data-stu-id="6e269-181">This is the initial migration that was created when you entered the `add-migration InitialCreate` command.</span></span> <span data-ttu-id="6e269-182">Parametr (`InitialCreate` v příkladu) se používá pro soubor název a může být všechno; obvykle zvolíte slovo nebo frázi, která shrnuje, co probíhá při migraci.</span><span class="sxs-lookup"><span data-stu-id="6e269-182">The parameter (`InitialCreate` in the example) is used for the file name and can be whatever you want; you typically choose a word or phrase that summarizes what is being done in the migration.</span></span> <span data-ttu-id="6e269-183">Například můžete třeba pojmenovat novější migrace &quot;AddDepartmentTable&quot;.</span><span class="sxs-lookup"><span data-stu-id="6e269-183">For example, you might name a later migration &quot;AddDepartmentTable&quot;.</span></span>

<span data-ttu-id="6e269-184">Pokud jste vytvořili počáteční migrace, když databáze již existuje, se vygeneruje kód pro vytvoření databáze, ale nemá spustit, protože databáze již odpovídá datový model.</span><span class="sxs-lookup"><span data-stu-id="6e269-184">If you created the initial migration when the database already exists, the database creation code is generated but it doesn't have to run because the database already matches the data model.</span></span> <span data-ttu-id="6e269-185">Když nasadíte aplikaci do jiného prostředí, kde databáze ještě neexistuje, tento kód spustí k vytvoření databáze, proto je vhodné se nejdřív otestovat.</span><span class="sxs-lookup"><span data-stu-id="6e269-185">When you deploy the app to another environment where the database doesn't exist yet, this code will run to create your database, so it's a good idea to test it first.</span></span> <span data-ttu-id="6e269-186">To je důvod, proč jste změnili název databáze v připojovacím řetězci dříve – tak, aby migrace můžete vytvořit novou od začátku.</span><span class="sxs-lookup"><span data-stu-id="6e269-186">That's why you changed the name of the database in the connection string earlier -- so that migrations can create a new one from scratch.</span></span>

1. <span data-ttu-id="6e269-187">V **Konzola správce balíčků** okno, zadejte následující příkaz:</span><span class="sxs-lookup"><span data-stu-id="6e269-187">In the **Package Manager Console** window, enter the following command:</span></span>

    `update-database`

    ![](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image3.png)

    <span data-ttu-id="6e269-188">`update-database` Příkaz spustí `Up` metodu pro vytvoření databáze a pak se spustí `Seed` metoda k naplnění databáze.</span><span class="sxs-lookup"><span data-stu-id="6e269-188">The `update-database` command runs the `Up` method to create the database and then it runs the `Seed` method to populate the database.</span></span> <span data-ttu-id="6e269-189">Stejný postup se spustí automaticky v produkčním prostředí poté, co nasadíte aplikaci, jak uvidíte v následující části.</span><span class="sxs-lookup"><span data-stu-id="6e269-189">The same process will run automatically in production after you deploy the application, as you'll see in the following section.</span></span>
2. <span data-ttu-id="6e269-190">Použití **Průzkumníka serveru** kontrolovat databázi, stejně jako v prvním kurzu a spuštění aplikace k ověření, že všechno stále funguje stejně jako předtím.</span><span class="sxs-lookup"><span data-stu-id="6e269-190">Use **Server Explorer** to inspect the database as you did in the first tutorial, and run the application to verify that everything still works the same as before.</span></span>

## <a name="deploy-to-azure"></a><span data-ttu-id="6e269-191">Nasazení do Azure</span><span class="sxs-lookup"><span data-stu-id="6e269-191">Deploy to Azure</span></span>

<span data-ttu-id="6e269-192">Pokud spuštění aplikace místně v IIS Express na vašem vývojovém počítači.</span><span class="sxs-lookup"><span data-stu-id="6e269-192">So far the application has been running locally in IIS Express on your development computer.</span></span> <span data-ttu-id="6e269-193">Chcete-li k dispozici pro ostatní uživatelé používat přes Internet, musíte ji nasadit do webové poskytovatele hostitelských služeb.</span><span class="sxs-lookup"><span data-stu-id="6e269-193">To make it available for other people to use over the Internet, you have to deploy it to a web hosting provider.</span></span> <span data-ttu-id="6e269-194">V této části kurzu budete ji nasadit do Azure.</span><span class="sxs-lookup"><span data-stu-id="6e269-194">In this section of the tutorial you'll deploy it to Azure.</span></span> <span data-ttu-id="6e269-195">Tato část je volitelná. Můžete to přeskočit a pokračujte v následujícím kurzu, nebo můžete přizpůsobit pokyny v této části jiného poskytovatele hostitelských služeb podle svého výběru.</span><span class="sxs-lookup"><span data-stu-id="6e269-195">This section is optional; you can skip this and continue with the following tutorial, or you can adapt the instructions in this section for a different hosting provider of your choice.</span></span>

### <a name="using-code-first-migrations-to-deploy-the-database"></a><span data-ttu-id="6e269-196">Pomocí migrace Code First pro nasazení databáze</span><span class="sxs-lookup"><span data-stu-id="6e269-196">Using Code First Migrations to Deploy the Database</span></span>

<span data-ttu-id="6e269-197">Pro nasazení databáze používáte migrace Code First.</span><span class="sxs-lookup"><span data-stu-id="6e269-197">To deploy the database you'll use Code First Migrations.</span></span> <span data-ttu-id="6e269-198">Když vytvoříte profil publikování, který použijete ke konfiguraci nastavení pro nasazení ze sady Visual Studio, vyberte zaškrtávací políčko s názvem **aktualizace databáze**.</span><span class="sxs-lookup"><span data-stu-id="6e269-198">When you create the publish profile that you use to configure settings for deploying from Visual Studio, you'll select a check box labeled **Update Database**.</span></span> <span data-ttu-id="6e269-199">Toto nastavení způsobí, že proces nasazení pro automatickou konfiguraci aplikace *Web.config* souboru na cílovém serveru tak, aby používala Code First `MigrateDatabaseToLatestVersion` inicializátoru třídy.</span><span class="sxs-lookup"><span data-stu-id="6e269-199">This setting causes the deployment process to automatically configure the application *Web.config* file on the destination server so that Code First uses the `MigrateDatabaseToLatestVersion` initializer class.</span></span>

<span data-ttu-id="6e269-200">Visual Studio nic se neděje s databází během procesu nasazení při jeho kopíruje projektu na cílový server.</span><span class="sxs-lookup"><span data-stu-id="6e269-200">Visual Studio doesn't do anything with the database during the deployment process while it is copying your project to the destination server.</span></span> <span data-ttu-id="6e269-201">Když spustíte nasazené aplikace a přistupuje k databázi po nasazení poprvé, Code First kontroluje, pokud databáze odpovídá datový model.</span><span class="sxs-lookup"><span data-stu-id="6e269-201">When you run the deployed application and it accesses the database for the first time after deployment, Code First checks if the database matches the data model.</span></span> <span data-ttu-id="6e269-202">Pokud došlo k neshodě, Code First automaticky vytvoří databázi (pokud ještě neexistuje) nebo aktualizace schématu databáze na nejnovější verzi (Pokud je databáze existuje, ale neodpovídají modelu).</span><span class="sxs-lookup"><span data-stu-id="6e269-202">If there's a mismatch, Code First automatically creates the database (if it doesn't exist yet) or updates the database schema to the latest version (if a database exists but doesn't match the model).</span></span> <span data-ttu-id="6e269-203">Pokud aplikace implementuje migrace `Seed` metoda, metoda spustí po vytvoření databáze nebo schéma se aktualizuje.</span><span class="sxs-lookup"><span data-stu-id="6e269-203">If the application implements a Migrations `Seed` method, the method runs after the database is created or the schema is updated.</span></span>

<span data-ttu-id="6e269-204">Vaše migrace `Seed` metoda vloží testovacích datech.</span><span class="sxs-lookup"><span data-stu-id="6e269-204">Your Migrations `Seed` method inserts test data.</span></span> <span data-ttu-id="6e269-205">Pokud byly nasazení v produkčním prostředí, je třeba změnit `Seed` metody, které se vloží pouze data, která má být vložen do provozní databáze.</span><span class="sxs-lookup"><span data-stu-id="6e269-205">If you were deploying to a production environment, you would have to change the `Seed` method so that it only inserts data that you want to be inserted into your production database.</span></span> <span data-ttu-id="6e269-206">V aktuální datového modelu můžete třeba skutečné kurzy ale fiktivních studenti, kteří mají v databázi vývoj.</span><span class="sxs-lookup"><span data-stu-id="6e269-206">For example, in your current data model you might want to have real courses but fictional students in the development database.</span></span> <span data-ttu-id="6e269-207">Můžete napsat `Seed` má metoda v vývoj i zatížení a potom komentář fiktivních studenty před nasazením do produkčního prostředí.</span><span class="sxs-lookup"><span data-stu-id="6e269-207">You can write a `Seed` method to load both in development, and then comment out the fictional students before you deploy to production.</span></span> <span data-ttu-id="6e269-208">Nebo můžete napsat `Seed` metoda načíst pouze kurzy, a zadejte fiktivních studenty v databázi testovací ručně pomocí uživatelského rozhraní aplikace.</span><span class="sxs-lookup"><span data-stu-id="6e269-208">Or you can write a `Seed` method to load only courses, and enter the fictional students in the test database manually by using the application's UI.</span></span>

### <a name="get-an-azure-account"></a><span data-ttu-id="6e269-209">Získat účet Azure</span><span class="sxs-lookup"><span data-stu-id="6e269-209">Get an Azure account</span></span>

<span data-ttu-id="6e269-210">Budete potřebovat účet Azure.</span><span class="sxs-lookup"><span data-stu-id="6e269-210">You'll need an Azure account.</span></span> <span data-ttu-id="6e269-211">Pokud jste ještě nemáte, ale máte předplatné sady Visual Studio, můžete [aktivovat výhody předplatné](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/).</span><span class="sxs-lookup"><span data-stu-id="6e269-211">If you don't already have one, but you do have a Visual Studio subscription, you can [activate your subscription benefits](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/).</span></span> <span data-ttu-id="6e269-212">Jinak můžete vytvořit Bezplatný zkušební účet si během několika minut.</span><span class="sxs-lookup"><span data-stu-id="6e269-212">Otherwise, you can create a free trial account in just a couple of minutes.</span></span> <span data-ttu-id="6e269-213">Podrobnosti najdete v tématu [bezplatná zkušební verze Azure](https://azure.microsoft.com/free/).</span><span class="sxs-lookup"><span data-stu-id="6e269-213">For details, see [Azure Free Trial](https://azure.microsoft.com/free/).</span></span>

### <a name="create-a-web-site-and-a-sql-database-in-azure"></a><span data-ttu-id="6e269-214">Vytvoření webu a databázi SQL v Azure</span><span class="sxs-lookup"><span data-stu-id="6e269-214">Create a web site and a SQL database in Azure</span></span>

<span data-ttu-id="6e269-215">Webové aplikace v Azure se spustí ve sdíleném hostování prostředí, což znamená, že běží na virtuálních počítačích (VM), které jsou sdíleny s jinými klienty Azure.</span><span class="sxs-lookup"><span data-stu-id="6e269-215">Your web app in Azure will run in a shared hosting environment, which means it runs on virtual machines (VMs) that are shared with other Azure clients.</span></span> <span data-ttu-id="6e269-216">Sdílené hostování prostředí je nízkonákladové způsob, jak začít pracovat v cloudu.</span><span class="sxs-lookup"><span data-stu-id="6e269-216">A shared hosting environment is a low-cost way to get started in the cloud.</span></span> <span data-ttu-id="6e269-217">Později webového provozu se zvyšuje, aplikace můžete škálovat podle potřeby spuštěním na vyhrazených virtuálních počítačích.</span><span class="sxs-lookup"><span data-stu-id="6e269-217">Later, if your web traffic increases, the application can scale to meet the need by running on dedicated VMs.</span></span> <span data-ttu-id="6e269-218">Další informace o cenách možnosti pro službu Azure App Service, přečtěte si dokumentaci na [dokumentace Azure](https://azure.microsoft.com/pricing/details/app-service/)</span><span class="sxs-lookup"><span data-stu-id="6e269-218">To learn more about Pricing Options for Azure App Service, read the documentation on [Azure Docs](https://azure.microsoft.com/pricing/details/app-service/)</span></span>

<span data-ttu-id="6e269-219">Databáze budete nasazovat do Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="6e269-219">You'll deploy the database to Azure SQL Database.</span></span> <span data-ttu-id="6e269-220">Databáze SQL je služba relační databáze založené na cloudu, která je založen na technologiích systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6e269-220">SQL Database is a cloud-based relational database service that is built on SQL Server technologies.</span></span> <span data-ttu-id="6e269-221">Nástroje a aplikace, které pracují s SQL serverem také pracovat s databází SQL.</span><span class="sxs-lookup"><span data-stu-id="6e269-221">Tools and applications that work with SQL Server also work with SQL Database.</span></span>

1. <span data-ttu-id="6e269-222">V [portálu pro správu Azure](https://portal.azure.com), klikněte na tlačítko **nový** v levé kartě klikněte na **zobrazit všechny** v novém okně a pak klikněte na tlačítko **webové aplikace a SQL** v **Webové** části a v neposlední řadě **vytvořit**.</span><span class="sxs-lookup"><span data-stu-id="6e269-222">In the [Azure Management Portal](https://portal.azure.com), click **New** in the left tab, click **See all** in new blade, and then click **Web App & SQL** in the **Web** Section and finally **Create**.</span></span>

    ![Tlačítko Nový na portálu pro správu](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/CreateWeb-Sql.png)

   <span data-ttu-id="6e269-224">**Novou webovou aplikaci a SQL - vytvořit** otevře se průvodce.</span><span class="sxs-lookup"><span data-stu-id="6e269-224">The **New Web App & SQL - Create** wizard opens.</span></span>

2. <span data-ttu-id="6e269-225">V okně zadejte řetězec ve **název aplikace** pole, které chcete použít jako jedinečnou adresu URL pro vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="6e269-225">In the blade, enter a string in the **App name** box to use as the unique URL for your application.</span></span> <span data-ttu-id="6e269-226">Úplná adresa URL bude obsahovat co zadáte plus výchozí doménu služby Azure App Services (. azurewebsites.net).</span><span class="sxs-lookup"><span data-stu-id="6e269-226">The complete URL will consist of what you enter here plus the default domain of Azure App Services (.azurewebsites.net).</span></span> <span data-ttu-id="6e269-227">Pokud **název aplikace** už používá, průvodce bude oznámíme vám to červený *název aplikace není k dispozici* zprávy.</span><span class="sxs-lookup"><span data-stu-id="6e269-227">If the **App name** is already taken, the Wizard will notify you of this with a red *The app name is not available* message.</span></span> <span data-ttu-id="6e269-228">Pokud **název aplikace** je k dispozici, zobrazí se zeleného zaškrtnutí.</span><span class="sxs-lookup"><span data-stu-id="6e269-228">If the **App name** is available, you will get a green checkmark.</span></span>

    ![Vytvoření pomocí připojení databáze na portálu pro správu](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Create-WebApp.png)

3. <span data-ttu-id="6e269-230">V **předplatné** rozevíracího seznamu, vyberte předplatné Azure, ve kterém chcete **služby App Service** umístíte.</span><span class="sxs-lookup"><span data-stu-id="6e269-230">In the **Subscription** Dropdown, please choose the Azure Subscription in which you want the **App Service** to reside.</span></span>

4. <span data-ttu-id="6e269-231">V **skupiny prostředků** textového pole, zvolte skupinu prostředků nebo vytvořte novou.</span><span class="sxs-lookup"><span data-stu-id="6e269-231">In the **Resource Group** text box, choose a Resource Group or create a new one.</span></span> <span data-ttu-id="6e269-232">Toto nastavení určuje, které datového centra, webový server se spustí v.</span><span class="sxs-lookup"><span data-stu-id="6e269-232">This setting specifies which data center your web site will run in.</span></span> <span data-ttu-id="6e269-233">Další informace o skupinách prostředků naleznete v dokumentaci na [dokumentace Azure](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-overview#resource-groups).</span><span class="sxs-lookup"><span data-stu-id="6e269-233">For more information about Resource Groups, read the documentation on [Azure Docs](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-overview#resource-groups).</span></span>
5. <span data-ttu-id="6e269-234">Vytvořte novou **plán služby App Service** kliknutím *části služby App Service*, **vytvořit nový**a vyplňte **plán služby App Service** (může být stejný název jako App Service), **umístění**, a **cenová úroveň** (je bezplatnou možností).</span><span class="sxs-lookup"><span data-stu-id="6e269-234">Create a new **App Service Plan** by clicking the *App Service section*, **Create New**, and fill in **App Service plan** (can be same name as App Service), **Location**, and **Pricing tier** (there is a free option).</span></span>

    ![](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Create-AppService.png)
6. <span data-ttu-id="6e269-235">Klikněte **databáze SQL**a zvolte *vytvořit nový* nebo vyberte existující databázi</span><span class="sxs-lookup"><span data-stu-id="6e269-235">Click the **SQL Database**, and choose *Create New* or select an existing database</span></span>

    ![](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Create-Database.png)

7. <span data-ttu-id="6e269-236">V **název** pole, zadejte název pro vaši databázi.</span><span class="sxs-lookup"><span data-stu-id="6e269-236">In the **Name** box, enter a name for your database.</span></span>
8. <span data-ttu-id="6e269-237">Klikněte **cílový Server** vyberte **vytvořit nový server**.</span><span class="sxs-lookup"><span data-stu-id="6e269-237">Click the **Target Server** box, select **Create a new server**.</span></span> <span data-ttu-id="6e269-238">Případně pokud jste dříve vytvořili serveru, můžete vybrat tento server ze seznamu dostupných serverů.</span><span class="sxs-lookup"><span data-stu-id="6e269-238">Alternatively, if you previously created a server, you can select that server from list of available servers.</span></span>
9. <span data-ttu-id="6e269-239">Zvolte **cenová úroveň** zvolte *volné*.</span><span class="sxs-lookup"><span data-stu-id="6e269-239">Choose **Pricing tier** section, choose *Free*.</span></span> <span data-ttu-id="6e269-240">Pokud je nutné provést další prostředky, je možné škálovat databázi kdykoli.</span><span class="sxs-lookup"><span data-stu-id="6e269-240">If additional resources are needed, the database can be scaled up at any time.</span></span> <span data-ttu-id="6e269-241">Další informace o cenách SQL Azure, přečtěte si dokumentaci na [dokumentace Azure](https://azure.microsoft.com/pricing/details/sql-database/).</span><span class="sxs-lookup"><span data-stu-id="6e269-241">To learn more on Azure SQL Pricing, read the documentation on [Azure Docs](https://azure.microsoft.com/pricing/details/sql-database/).</span></span>
10. <span data-ttu-id="6e269-242">Upravit [kolace](https://docs.microsoft.com/sql/relational-databases/collations/collation-and-unicode-support) podle potřeby.</span><span class="sxs-lookup"><span data-stu-id="6e269-242">Modify [collation](https://docs.microsoft.com/sql/relational-databases/collations/collation-and-unicode-support) as needed.</span></span>
11. <span data-ttu-id="6e269-243">Zadejte správce **uživatelské jméno správce SQL** a **heslo správce SQL**.</span><span class="sxs-lookup"><span data-stu-id="6e269-243">Enter an administrator **SQL Admin Username** and **SQL Admin Password**.</span></span> <span data-ttu-id="6e269-244">Pokud jste vybrali **novou databázi SQL serveru**nezadáváte existující jméno a heslo, zadáváte nové jméno a heslo, které teď definujete pro pozdější použití při přístupu k databázi.</span><span class="sxs-lookup"><span data-stu-id="6e269-244">If you selected **New SQL Database server**, you aren't entering an existing name and password here, you're entering a new name and password that you're defining now to use later when you access the database.</span></span> <span data-ttu-id="6e269-245">Pokud jste vybrali serveru, který jste vytvořili dříve, budete zadejte přihlašovací údaje pro tento server.</span><span class="sxs-lookup"><span data-stu-id="6e269-245">If you selected a server that you created previously, you'll enter credentials for that server.</span></span>
12. <span data-ttu-id="6e269-246">Kolekce telemetrie lze povolit pro službu App Service pomocí Application Insights.</span><span class="sxs-lookup"><span data-stu-id="6e269-246">Telemetry collection can be enabled for App Service using Application Insights.</span></span> <span data-ttu-id="6e269-247">Application Insights s malým množstvím konfigurací shromažďuje cenné událostí, výjimky, závislostí, žádost a informace o trasování.</span><span class="sxs-lookup"><span data-stu-id="6e269-247">Application Insights with little configuration collects valuable event, exception, dependency, request, and trace information.</span></span> <span data-ttu-id="6e269-248">Další informace o Application Insights, začněte [dokumentace Azure](https://azure.microsoft.com/services/application-insights/).</span><span class="sxs-lookup"><span data-stu-id="6e269-248">To learn more about Application Insights, get started in [Azure Docs](https://azure.microsoft.com/services/application-insights/).</span></span>
13. <span data-ttu-id="6e269-249">Klikněte na tlačítko **vytvořit** v dolní části okna znamenat, že budete hotovi.</span><span class="sxs-lookup"><span data-stu-id="6e269-249">Click **Create** at the bottom of the blade to indicate that you're finished.</span></span>
  
    <span data-ttu-id="6e269-250">Vrátí portálu pro správu na stránku řídicí panely a **oznámení** vytvoření webu se zobrazí okno v horní části stránky.</span><span class="sxs-lookup"><span data-stu-id="6e269-250">The Management Portal returns to the Dashboards page, and the **Notifications** blade at the top of the page shows that the site is being created.</span></span> <span data-ttu-id="6e269-251">Po chvíli (obvykle během méně než minuty) bude oznámení, že nasazení bylo úspěšné.</span><span class="sxs-lookup"><span data-stu-id="6e269-251">After a while (typically less than a minute), there will be a notification that the Deployment succeeded.</span></span> <span data-ttu-id="6e269-252">Na navigačním panelu na levé straně nové **služby App Service** se zobrazí v *App Services* části a nové **SQL Database** se zobrazí v *databáze SQL*  části.</span><span class="sxs-lookup"><span data-stu-id="6e269-252">In the navigation bar at the left, the new **App Service** appears in the *App Services* section and the new **SQL Database** appears in the *SQL Databases* section.</span></span>

### <a name="deploy-the-application-to-azure"></a><span data-ttu-id="6e269-253">Nasaďte aplikaci do Azure</span><span class="sxs-lookup"><span data-stu-id="6e269-253">Deploy the application to Azure</span></span>

1. <span data-ttu-id="6e269-254">V sadě Visual Studio, klikněte pravým tlačítkem na projekt v **Průzkumníku řešení** a vyberte **publikovat** v místní nabídce.</span><span class="sxs-lookup"><span data-stu-id="6e269-254">In Visual Studio, right-click the project in **Solution Explorer** and select **Publish** from the context menu.</span></span>
  
    ![Publikování v kontextové nabídce projektu](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image10.png)
2. <span data-ttu-id="6e269-256">V **profil** kartě **Publikovat Web** průvodce, klikněte na tlačítko **Microsoft Azure App Service**.</span><span class="sxs-lookup"><span data-stu-id="6e269-256">In the **Profile** tab of the **Publish Web** wizard, click **Microsoft Azure App Service**.</span></span>
  
    ![Import nastavení publikování](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-ChooseTarget.png)
3. <span data-ttu-id="6e269-258">Pokud jste ještě přidali dříve vašeho předplatného Azure v sadě Visual Studio, proveďte kroky na obrazovce.</span><span class="sxs-lookup"><span data-stu-id="6e269-258">If you have not previously added your Azure subscription in Visual Studio, perform the steps on the screen.</span></span> <span data-ttu-id="6e269-259">Tyto kroky aktivují Visual Studio k připojení k předplatnému Azure, který seznam **App Services** bude obsahovat vašeho webu.</span><span class="sxs-lookup"><span data-stu-id="6e269-259">These steps enable Visual Studio to connect to your Azure subscription so that the list of **App Services** will include your web site.</span></span>
 
4. <span data-ttu-id="6e269-260">Vyberte **předplatné** jste přidali do, pak App Service **plán služby App Service** složky App Service je součástí, a nakonec **služby App Service** samotné následuje **Ok**.</span><span class="sxs-lookup"><span data-stu-id="6e269-260">Select the **Subscription** you added the App Service to, then the **App Service Plan** folder your App Service is a part of, and finally the **App Service** itself followed by **Ok**.</span></span>

    ![Vyberte aplikační služby](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-AppService.png)
5. <span data-ttu-id="6e269-262">Po nakonfigurovaný profil, **připojení** se zobrazí karta.</span><span class="sxs-lookup"><span data-stu-id="6e269-262">After the Profile has been configured, the **Connection** tab will be shown.</span></span> <span data-ttu-id="6e269-263">Klikněte na tlačítko **ověřit připojení** a ujistěte se, zda jsou správné nastavení</span><span class="sxs-lookup"><span data-stu-id="6e269-263">Click **Validate Connection** to make sure that the settings are correct</span></span>

    ![Ověření připojení](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-Connection.png)
6. <span data-ttu-id="6e269-265">Při připojení byl ověřen, je vedle zobrazí zelená značka zaškrtnutí **ověřit připojení** tlačítko.</span><span class="sxs-lookup"><span data-stu-id="6e269-265">When the connection has been validated, a green check mark is shown next to the **Validate Connection** button.</span></span> <span data-ttu-id="6e269-266">Klikněte na tlačítko **Další**.</span><span class="sxs-lookup"><span data-stu-id="6e269-266">Click **Next**.</span></span>
  
    ![Úspěšně ověřená připojení](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-SettingsValidated.png)
7. <span data-ttu-id="6e269-268">Otevřete **vzdáleného připojovací řetězec** rozevíracím seznamu v části **SchoolContext** a vyberte připojovací řetězec pro databázi, který jste vytvořili.</span><span class="sxs-lookup"><span data-stu-id="6e269-268">Open the **Remote connection string** drop-down list under **SchoolContext** and select the connection string for the database you created.</span></span>
8. <span data-ttu-id="6e269-269">Vyberte **aktualizace databáze**.</span><span class="sxs-lookup"><span data-stu-id="6e269-269">Select **Update database**.</span></span>

    ![Karta nastavení](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-Settings.png)

    <span data-ttu-id="6e269-271">Toto nastavení způsobí, že proces nasazení pro automatickou konfiguraci aplikace *Web.config* souboru na cílovém serveru tak, aby používala Code First `MigrateDatabaseToLatestVersion` inicializátoru třídy.</span><span class="sxs-lookup"><span data-stu-id="6e269-271">This setting causes the deployment process to automatically configure the application *Web.config* file on the destination server so that Code First uses the `MigrateDatabaseToLatestVersion` initializer class.</span></span>
9. <span data-ttu-id="6e269-272">Klikněte na tlačítko **Další**.</span><span class="sxs-lookup"><span data-stu-id="6e269-272">Click **Next**.</span></span>
10. <span data-ttu-id="6e269-273">V **Preview** , klikněte na **spustit Náhled**.</span><span class="sxs-lookup"><span data-stu-id="6e269-273">In the **Preview** tab, click **Start Preview**.</span></span>
  
    ![Tlačítko StartPreview na kartě Preview](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-Preview.png)
  
    <span data-ttu-id="6e269-275">Na kartě zobrazí seznam souborů, které se zkopírují na serveru.</span><span class="sxs-lookup"><span data-stu-id="6e269-275">The tab displays a list of the files that will be copied to the server.</span></span> <span data-ttu-id="6e269-276">Zobrazení náhledu není vyžadován pro publikování aplikace, ale je užitečné funkce znát.</span><span class="sxs-lookup"><span data-stu-id="6e269-276">Displaying the preview isn't required to publish the application but is a useful function to be aware of.</span></span> <span data-ttu-id="6e269-277">V takovém případě nemusíte dělat nic s seznam souborů, který se zobrazí.</span><span class="sxs-lookup"><span data-stu-id="6e269-277">In this case, you don't need to do anything with the list of files that is displayed.</span></span> <span data-ttu-id="6e269-278">Pouze soubory, které se změnily při příštím nasadit tuto aplikaci, bude v tomto seznamu.</span><span class="sxs-lookup"><span data-stu-id="6e269-278">The next time you deploy this application, only the files that have changed will be in this list.</span></span>
    <span data-ttu-id="6e269-279">![Výstup souboru StartPreview](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-PreviewLoaded.png)</span><span class="sxs-lookup"><span data-stu-id="6e269-279">![StartPreview file output](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-PreviewLoaded.png)</span></span>

11. <span data-ttu-id="6e269-280">Klikněte na tlačítko **publikování**.</span><span class="sxs-lookup"><span data-stu-id="6e269-280">Click **Publish**.</span></span>
    <span data-ttu-id="6e269-281">Visual Studio spustí proces kopírování souborů na Azure server.</span><span class="sxs-lookup"><span data-stu-id="6e269-281">Visual Studio begins the process of copying the files to the Azure server.</span></span>
12. <span data-ttu-id="6e269-282">**Výstup** okno zobrazuje, jaké akce nasazení byly provedeny a hlásí úspěšné dokončení nasazení.</span><span class="sxs-lookup"><span data-stu-id="6e269-282">The **Output** window shows what deployment actions were taken and reports successful completion of the deployment.</span></span>
  
    ![Výstup – okno hlášením úspěšného nasazení](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-BuildOutput.png)
13. <span data-ttu-id="6e269-284">Po úspěšném nasazení na adresu URL nasazené webové stránky automaticky otevře výchozí prohlížeč.</span><span class="sxs-lookup"><span data-stu-id="6e269-284">Upon successful deployment, the default browser automatically opens to the URL of the deployed web site.</span></span>
    <span data-ttu-id="6e269-285">Aplikace, kterou jste vytvořili je nyní spuštěna v cloudu.</span><span class="sxs-lookup"><span data-stu-id="6e269-285">The application you created is now running in the cloud.</span></span> 
  
    ![Students_index_page_with_paging](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-Site.png)

<span data-ttu-id="6e269-287">V tomto okamžiku vaší *SchoolContext* databáze byla vytvořena ve službě Azure SQL Database, protože jste vybrali **spustit migrace Code First (spuštěno při spuštění aplikace)**.</span><span class="sxs-lookup"><span data-stu-id="6e269-287">At this point your *SchoolContext* database has been created in the Azure SQL Database because you selected **Execute Code First Migrations (runs on app start)**.</span></span> <span data-ttu-id="6e269-288">*Web.config* změnil soubor na nasazené webu tak, aby [MigrateDatabaseToLatestVersion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) inicializátoru spustí při prvním kód čte nebo zapisuje data v databázi (která se stalo Pokud jste vybrali **studenty** kartě):</span><span class="sxs-lookup"><span data-stu-id="6e269-288">The *Web.config* file in the deployed web site has been changed so that the [MigrateDatabaseToLatestVersion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) initializer runs the first time your code reads or writes data in the database (which happened when you selected the **Students** tab):</span></span>

![](https://asp.net/media/4367421/mig.png)

<span data-ttu-id="6e269-289">Proces nasazení taky vytvořit nový připojovací řetězec *(SchoolContext\_DatabasePublish*) pro migrace Code First pro aktualizace schématu databáze a synchronizace replik indexů databáze.</span><span class="sxs-lookup"><span data-stu-id="6e269-289">The deployment process also created a new connection string *(SchoolContext\_DatabasePublish*) for Code First Migrations to use for updating the database schema and seeding the database.</span></span>

![Database_Publish připojovací řetězec](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image26.png)

<span data-ttu-id="6e269-291">Můžete najít soubor Web.config na vašem počítači v nasazené verzi *ContosoUniversity\obj\Release\Package\PackageTmp\Web.config*. Dostanete nasazené *Web.config* samotném souboru pomocí protokolu FTP.</span><span class="sxs-lookup"><span data-stu-id="6e269-291">You can find the deployed version of the Web.config file on your own computer in *ContosoUniversity\obj\Release\Package\PackageTmp\Web.config*. You can access the deployed *Web.config* file itself by using FTP.</span></span> <span data-ttu-id="6e269-292">Pokyny najdete v tématu [nasazení webu ASP.NET pomocí sady Visual Studio: nasazení aktualizace kódu](xref:web-forms/overview/deployment/visual-studio-web-deployment/deploying-a-code-update).</span><span class="sxs-lookup"><span data-stu-id="6e269-292">For instructions, see [ASP.NET Web Deployment using Visual Studio: Deploying a Code Update](xref:web-forms/overview/deployment/visual-studio-web-deployment/deploying-a-code-update).</span></span> <span data-ttu-id="6e269-293">Postupujte podle pokynů, které začínají na "pomocí nástroje FTP, budete potřebovat tři věci: adresy URL FTP, uživatelské jméno a heslo."</span><span class="sxs-lookup"><span data-stu-id="6e269-293">Follow the instructions that start with "To use an FTP tool, you need three things: the FTP URL, the user name, and the password."</span></span>

> [!NOTE]
> <span data-ttu-id="6e269-294">Webové aplikace neimplementuje zabezpečení, takže každý, kdo najde adresu URL můžete změnit data.</span><span class="sxs-lookup"><span data-stu-id="6e269-294">The web app doesn't implement security, so anyone who finds the URL can change the data.</span></span> <span data-ttu-id="6e269-295">Pokyny k zabezpečení webu, najdete v části [nasazení aplikace zabezpečené ASP.NET MVC s členství, OAuth a databáze SQL Azure](https://docs.microsoft.com/aspnet/core/security/authorization/secure-data).</span><span class="sxs-lookup"><span data-stu-id="6e269-295">For instructions on how to secure the web site, see [Deploy a Secure ASP.NET MVC app with Membership, OAuth, and SQL Database to Azure](https://docs.microsoft.com/aspnet/core/security/authorization/secure-data).</span></span> <span data-ttu-id="6e269-296">Můžete zabránit jinými lidmi pomocí webu pomocí portálu pro správu Azure nebo **Průzkumníka serveru** v sadě Visual Studio k zastavení webu.</span><span class="sxs-lookup"><span data-stu-id="6e269-296">You can prevent other people from using the site by using the Azure Management Portal or **Server Explorer** in Visual Studio to stop the site.</span></span>


![](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Stop-Service.png)

## <a name="advanced-migrations-scenarios"></a><span data-ttu-id="6e269-297">Migrace pokročilé scénáře</span><span class="sxs-lookup"><span data-stu-id="6e269-297">Advanced Migrations Scenarios</span></span>

<span data-ttu-id="6e269-298">Pokud nasazení databáze spuštěním migrace automaticky, jak je znázorněno v tomto kurzu, a provádíte nasazení webu, který běží na několika serverech, může dojít, více serverů pokusu o spuštění migrace ve stejnou dobu.</span><span class="sxs-lookup"><span data-stu-id="6e269-298">If you deploy a database by running migrations automatically as shown in this tutorial, and you are deploying to a web site that runs on multiple servers, you could get multiple servers trying to run migrations at the same time.</span></span> <span data-ttu-id="6e269-299">Migrace jsou atomic, takže pokud dva servery se pokusí spustit stejné migraci, jeden bude úspěšné a dalších selže (za předpokladu, že operace, které nelze provádět dvakrát).</span><span class="sxs-lookup"><span data-stu-id="6e269-299">Migrations are atomic, so if two servers try to run the same migration, one will succeed and the other will fail (assuming the operations can't be done twice).</span></span> <span data-ttu-id="6e269-300">V tomto scénáři Pokud chcete, aby se zabránilo těchto problémů, můžete volat migrace ručně a nastavit vlastní kód tak, aby ho se dělá jenom jednou.</span><span class="sxs-lookup"><span data-stu-id="6e269-300">In that scenario if you want to avoid those issues, you can call migrations manually and set up your own code so that it only happens once.</span></span> <span data-ttu-id="6e269-301">Další informace najdete v tématu [spuštěná a skriptování migrace z kódu](http://romiller.com/2012/02/09/running-scripting-migrations-from-code/) na blogu Rowan Lukeš a [Migrate.exe](https://msdn.microsoft.com/data/jj618307) (pro provádění migrace z příkazového řádku) na webu MSDN.</span><span class="sxs-lookup"><span data-stu-id="6e269-301">For more information, see [Running and Scripting Migrations from Code](http://romiller.com/2012/02/09/running-scripting-migrations-from-code/) on Rowan Miller's blog and [Migrate.exe](https://msdn.microsoft.com/data/jj618307) (for executing migrations from the command line) on MSDN.</span></span>

<span data-ttu-id="6e269-302">Informace o dalších scénářů migrace najdete v tématu [migrace záznam dění na monitoru řady](https://blogs.msdn.com/b/adonet/archive/2014/03/12/migrations-screencast-series.aspx).</span><span class="sxs-lookup"><span data-stu-id="6e269-302">For information about other migrations scenarios, see [Migrations Screencast Series](https://blogs.msdn.com/b/adonet/archive/2014/03/12/migrations-screencast-series.aspx).</span></span>

## <a name="code-first-initializers"></a><span data-ttu-id="6e269-303">První inicializátory kódu</span><span class="sxs-lookup"><span data-stu-id="6e269-303">Code First Initializers</span></span>

<span data-ttu-id="6e269-304">V části nasazení jste viděli [MigrateDatabaseToLatestVersion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) inicializátoru používá.</span><span class="sxs-lookup"><span data-stu-id="6e269-304">In the deployment section you saw the [MigrateDatabaseToLatestVersion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) initializer being used.</span></span> <span data-ttu-id="6e269-305">Kód nejprve taky poskytuje další inicializátory, včetně [CreateDatabaseIfNotExists](https://msdn.microsoft.com/library/gg679221(v=vs.103).aspx) (výchozí), [DropCreateDatabaseIfModelChanges](https://msdn.microsoft.com/library/gg679604(v=VS.103).aspx) (který jste použili dříve) a [ DropCreateDatabaseAlways](https://msdn.microsoft.com/library/gg679506(v=VS.103).aspx).</span><span class="sxs-lookup"><span data-stu-id="6e269-305">Code First also provides other initializers, including [CreateDatabaseIfNotExists](https://msdn.microsoft.com/library/gg679221(v=vs.103).aspx) (the default), [DropCreateDatabaseIfModelChanges](https://msdn.microsoft.com/library/gg679604(v=VS.103).aspx) (which you used earlier) and [DropCreateDatabaseAlways](https://msdn.microsoft.com/library/gg679506(v=VS.103).aspx).</span></span> <span data-ttu-id="6e269-306">`DropCreateAlways` Inicializátoru může být užitečná pro nastavení podmínky pro testování částí.</span><span class="sxs-lookup"><span data-stu-id="6e269-306">The `DropCreateAlways` initializer can be useful for setting up conditions for unit tests.</span></span> <span data-ttu-id="6e269-307">Můžete taky napsat vlastní inicializátory a můžete volat inicializátoru explicitně Pokud nechcete čekat, až aplikace čte z nebo zapisuje do databáze.</span><span class="sxs-lookup"><span data-stu-id="6e269-307">You can also write your own initializers, and you can call an initializer explicitly if you don't want to wait until the application reads from or writes to the database.</span></span> <span data-ttu-id="6e269-308">V době, kdy probíhá zápis v tomto kurzu v listopadu 2013 můžete použít pouze inicializátory vytvořit a DropCreate dříve než povolíte migrace.</span><span class="sxs-lookup"><span data-stu-id="6e269-308">At the time this tutorial is being written in November, 2013, you can only use the Create and DropCreate initializers before you enable migrations.</span></span> <span data-ttu-id="6e269-309">Rozhraní Entity Framework tým pracuje na vytváření těchto inicializátory použitelné s migrací také.</span><span class="sxs-lookup"><span data-stu-id="6e269-309">The Entity Framework team is working on making these initializers usable with migrations as well.</span></span>

<span data-ttu-id="6e269-310">Další informace o inicializátory najdete v tématu [Principy inicializátory databáze v Entity Framework Code First](http://www.codeguru.com/csharp/article.php/c19999/Understanding-Database-Initializers-in-Entity-Framework-Code-First.htm) a kapitoly 6 knihy [programovací rozhraní Entity Framework: Code First](http://shop.oreilly.com/product/0636920022220.do) podle Julie Lerman a Rowan Lukeš.</span><span class="sxs-lookup"><span data-stu-id="6e269-310">For more information about initializers, see [Understanding Database Initializers in Entity Framework Code First](http://www.codeguru.com/csharp/article.php/c19999/Understanding-Database-Initializers-in-Entity-Framework-Code-First.htm) and chapter 6 of the book [Programming Entity Framework: Code First](http://shop.oreilly.com/product/0636920022220.do) by Julie Lerman and Rowan Miller.</span></span>

## <a name="summary"></a><span data-ttu-id="6e269-311">Souhrn</span><span class="sxs-lookup"><span data-stu-id="6e269-311">Summary</span></span>

<span data-ttu-id="6e269-312">V tomto kurzu jste se seznámili povolení migrace a nasazení aplikace.</span><span class="sxs-lookup"><span data-stu-id="6e269-312">In this tutorial you've seen how to enable migrations and deploy the application.</span></span> <span data-ttu-id="6e269-313">V dalším kurzu brzy prohlížení pokročilejší témata rozšířením datový model.</span><span class="sxs-lookup"><span data-stu-id="6e269-313">In the next tutorial you'll begin looking at more advanced topics by expanding the data model.</span></span>

<span data-ttu-id="6e269-314">Prosím sdělit svůj názor na tom, jak líbilo tohoto kurzu a co jsme může zlepšit.</span><span class="sxs-lookup"><span data-stu-id="6e269-314">Please leave feedback on how you liked this tutorial and what we could improve.</span></span> <span data-ttu-id="6e269-315">Můžete také vyžádat nová témata na [zobrazit mi jak s kód](http://aspnet.uservoice.com/forums/228522-show-me-how-with-code).</span><span class="sxs-lookup"><span data-stu-id="6e269-315">You can also request new topics at [Show Me How With Code](http://aspnet.uservoice.com/forums/228522-show-me-how-with-code).</span></span>

<span data-ttu-id="6e269-316">Odkazy na další zdroje Entity Framework najdete v [přístup k datům ASP.NET - doporučené prostředky](xref:whitepapers/aspnet-data-access-content-map).</span><span class="sxs-lookup"><span data-stu-id="6e269-316">Links to other Entity Framework resources can be found in [ASP.NET Data Access - Recommended Resources](xref:whitepapers/aspnet-data-access-content-map).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="6e269-317">[Předchozí](xref:mvc/overview/getting-started/getting-started-with-ef-using-mvc/connection-resiliency-and-command-interception-with-the-entity-framework-in-an-asp-net-mvc-application)
> [další](xref:mvc/overview/getting-started/getting-started-with-ef-using-mvc/creating-a-more-complex-data-model-for-an-asp-net-mvc-application)</span><span class="sxs-lookup"><span data-stu-id="6e269-317">[Previous](xref:mvc/overview/getting-started/getting-started-with-ef-using-mvc/connection-resiliency-and-command-interception-with-the-entity-framework-in-an-asp-net-mvc-application)
[Next](xref:mvc/overview/getting-started/getting-started-with-ef-using-mvc/creating-a-more-complex-data-model-for-an-asp-net-mvc-application)</span></span>
