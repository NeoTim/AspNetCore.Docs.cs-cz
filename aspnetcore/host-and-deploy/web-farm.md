---
<span data-ttu-id="59adf-101">Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="59adf-101">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="59adf-102">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="59adf-102">'Blazor'</span></span>
- <span data-ttu-id="59adf-103">'Identity'</span><span class="sxs-lookup"><span data-stu-id="59adf-103">'Identity'</span></span>
- <span data-ttu-id="59adf-104">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="59adf-104">'Let's Encrypt'</span></span>
- <span data-ttu-id="59adf-105">'Razor'</span><span class="sxs-lookup"><span data-stu-id="59adf-105">'Razor'</span></span>
- <span data-ttu-id="59adf-106">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="59adf-106">'SignalR' uid:</span></span> 

---
# <a name="host-aspnet-core-in-a-web-farm"></a><span data-ttu-id="59adf-107">Hostitelská ASP.NET Core ve webové farmě</span><span class="sxs-lookup"><span data-stu-id="59adf-107">Host ASP.NET Core in a web farm</span></span>

<span data-ttu-id="59adf-108">Autor – [Chris Rossův](https://github.com/Tratcher)</span><span class="sxs-lookup"><span data-stu-id="59adf-108">By [Chris Ross](https://github.com/Tratcher)</span></span>

<span data-ttu-id="59adf-109">*Webová farma* je skupina dvou nebo více webových serverů (nebo *uzlů*), které hostují více instancí aplikace.</span><span class="sxs-lookup"><span data-stu-id="59adf-109">A *web farm* is a group of two or more web servers (or *nodes*) that host multiple instances of an app.</span></span> <span data-ttu-id="59adf-110">Když se požadavky od uživatelů dorazí na webovou farmu, *Nástroj pro vyrovnávání zatížení* distribuuje požadavky do uzlů webové farmy.</span><span class="sxs-lookup"><span data-stu-id="59adf-110">When requests from users arrive to a web farm, a *load balancer* distributes the requests to the web farm's nodes.</span></span> <span data-ttu-id="59adf-111">Vylepšení webových farem:</span><span class="sxs-lookup"><span data-stu-id="59adf-111">Web farms improve:</span></span>

* <span data-ttu-id="59adf-112">**Spolehlivost/dostupnost**: Pokud selže jeden nebo více uzlů, může nástroj pro vyrovnávání zatížení směrovat požadavky do jiných funkčních uzlů, aby bylo možné pokračovat ve zpracování požadavků.</span><span class="sxs-lookup"><span data-stu-id="59adf-112">**Reliability/availability**: When one or more nodes fail, the load balancer can route requests to other functioning nodes to continue processing requests.</span></span>
* <span data-ttu-id="59adf-113">**Kapacita/výkon**: více uzlů může zpracovávat více požadavků než jednoho serveru.</span><span class="sxs-lookup"><span data-stu-id="59adf-113">**Capacity/performance**: Multiple nodes can process more requests than a single server.</span></span> <span data-ttu-id="59adf-114">Nástroj pro vyrovnávání zatížení vyrovnává zatížení úlohou tím, že distribuuje požadavky na uzly.</span><span class="sxs-lookup"><span data-stu-id="59adf-114">The load balancer balances the workload by distributing requests to the nodes.</span></span>
* <span data-ttu-id="59adf-115">**Škálovatelnost**: Pokud je potřeba víc nebo méně kapacity, můžete počet aktivních uzlů zvýšit nebo snížit tak, aby odpovídaly zatížení.</span><span class="sxs-lookup"><span data-stu-id="59adf-115">**Scalability**: When more or less capacity is required, the number of active nodes can be increased or decreased to match the workload.</span></span> <span data-ttu-id="59adf-116">Technologie webové farmy, například [Azure App Service](https://azure.microsoft.com/services/app-service/), mohou automaticky přidávat nebo odebírat uzly na žádost správce systému nebo automaticky bez zásahu člověka.</span><span class="sxs-lookup"><span data-stu-id="59adf-116">Web farm platform technologies, such as [Azure App Service](https://azure.microsoft.com/services/app-service/), can automatically add or remove nodes at the request of the system administrator or automatically without human intervention.</span></span>
* <span data-ttu-id="59adf-117">**Udržovatelnost**: uzly webové farmy můžou spoléhat na sadu sdílených služeb, což má za následek snazší správu systému.</span><span class="sxs-lookup"><span data-stu-id="59adf-117">**Maintainability**: Nodes of a web farm can rely on a set of shared services, which results in easier system management.</span></span> <span data-ttu-id="59adf-118">Uzly webové farmy můžou například spoléhat na jeden databázový server a na běžné síťové umístění pro statické prostředky, jako jsou obrázky a soubory ke stažení.</span><span class="sxs-lookup"><span data-stu-id="59adf-118">For example, the nodes of a web farm can rely upon a single database server and a common network location for static resources, such as images and downloadable files.</span></span>

<span data-ttu-id="59adf-119">Toto téma popisuje konfiguraci a závislosti pro aplikace ASP.NET Core hostované ve webové farmě, která je závislá na sdílených prostředcích.</span><span class="sxs-lookup"><span data-stu-id="59adf-119">This topic describes configuration and dependencies for ASP.NET core apps hosted in a web farm that rely upon shared resources.</span></span>

## <a name="general-configuration"></a><span data-ttu-id="59adf-120">Obecná konfigurace</span><span class="sxs-lookup"><span data-stu-id="59adf-120">General configuration</span></span>

<xref:host-and-deploy/index>  
<span data-ttu-id="59adf-121">Naučte se nastavit hostující prostředí a nasazovat aplikace ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="59adf-121">Learn how to set up hosting environments and deploy ASP.NET Core apps.</span></span> <span data-ttu-id="59adf-122">Nakonfigurujte správce procesů na každém uzlu webové farmy, aby se spouštěla aplikace a automaticky se restartuje.</span><span class="sxs-lookup"><span data-stu-id="59adf-122">Configure a process manager on each node of the web farm to automate app starts and restarts.</span></span> <span data-ttu-id="59adf-123">Každý uzel vyžaduje modul runtime ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="59adf-123">Each node requires the ASP.NET Core runtime.</span></span> <span data-ttu-id="59adf-124">Další informace najdete v tématech v oblasti [hostitele a nasazení](xref:host-and-deploy/index) v dokumentaci.</span><span class="sxs-lookup"><span data-stu-id="59adf-124">For more information, see the topics in the [Host and deploy](xref:host-and-deploy/index) area of the documentation.</span></span>

<xref:host-and-deploy/proxy-load-balancer>  
<span data-ttu-id="59adf-125">Přečtěte si o konfiguraci pro aplikace hostované za servery proxy a nástroje pro vyrovnávání zatížení, které často překrývají důležité informace o žádostech.</span><span class="sxs-lookup"><span data-stu-id="59adf-125">Learn about configuration for apps hosted behind proxy servers and load balancers, which often obscure important request information.</span></span>

<xref:host-and-deploy/azure-apps/index>  
<span data-ttu-id="59adf-126">[Azure App Service](https://azure.microsoft.com/services/app-service/) je [platforma cloud computingu od Microsoftu](https://azure.microsoft.com/) pro hostování webových aplikací, včetně ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="59adf-126">[Azure App Service](https://azure.microsoft.com/services/app-service/) is a [Microsoft cloud computing platform service](https://azure.microsoft.com/) for hosting web apps, including ASP.NET Core.</span></span> <span data-ttu-id="59adf-127">App Service je plně spravovaná platforma, která poskytuje automatické škálování, Vyrovnávání zatížení, opravy a průběžné nasazování.</span><span class="sxs-lookup"><span data-stu-id="59adf-127">App Service is a fully managed platform that provides automatic scaling, load balancing, patching, and continuous deployment.</span></span>

## <a name="app-data"></a><span data-ttu-id="59adf-128">Data aplikací</span><span class="sxs-lookup"><span data-stu-id="59adf-128">App data</span></span>

<span data-ttu-id="59adf-129">Když se aplikace škáluje na více instancí, může existovat stav aplikace, který vyžaduje sdílení napříč uzly.</span><span class="sxs-lookup"><span data-stu-id="59adf-129">When an app is scaled to multiple instances, there might be app state that requires sharing across nodes.</span></span> <span data-ttu-id="59adf-130">Pokud je stav přechodný, zvažte sdílení [IDistributedCache](/dotnet/api/microsoft.extensions.caching.distributed.idistributedcache).</span><span class="sxs-lookup"><span data-stu-id="59adf-130">If the state is transient, consider sharing an [IDistributedCache](/dotnet/api/microsoft.extensions.caching.distributed.idistributedcache).</span></span> <span data-ttu-id="59adf-131">Pokud sdílený stav vyžaduje trvalost, zvažte uložení sdíleného stavu do databáze.</span><span class="sxs-lookup"><span data-stu-id="59adf-131">If the shared state requires persistence, consider storing the shared state in a database.</span></span>

## <a name="required-configuration"></a><span data-ttu-id="59adf-132">Požadovaná konfigurace</span><span class="sxs-lookup"><span data-stu-id="59adf-132">Required configuration</span></span>

<span data-ttu-id="59adf-133">Ochrana dat a ukládání do mezipaměti vyžaduje konfiguraci pro aplikace nasazené do webové farmy.</span><span class="sxs-lookup"><span data-stu-id="59adf-133">Data Protection and Caching require configuration for apps deployed to a web farm.</span></span>

### <a name="data-protection"></a><span data-ttu-id="59adf-134">Ochrana dat</span><span class="sxs-lookup"><span data-stu-id="59adf-134">Data Protection</span></span>

<span data-ttu-id="59adf-135">[ASP.NET Core systém ochrany dat](xref:security/data-protection/introduction) používá aplikace k ochraně dat.</span><span class="sxs-lookup"><span data-stu-id="59adf-135">The [ASP.NET Core Data Protection system](xref:security/data-protection/introduction) is used by apps to protect data.</span></span> <span data-ttu-id="59adf-136">Ochrana dat se spoléhá na sadu kryptografických klíčů uložených v rámci *klíčového prstence*.</span><span class="sxs-lookup"><span data-stu-id="59adf-136">Data Protection relies upon a set of cryptographic keys stored in a *key ring*.</span></span> <span data-ttu-id="59adf-137">Po inicializaci systému ochrany dat se použije [výchozí nastavení](xref:security/data-protection/configuration/default-settings) , které ukládá klíčová kroužková data místně.</span><span class="sxs-lookup"><span data-stu-id="59adf-137">When the Data Protection system is initialized, it applies [default settings](xref:security/data-protection/configuration/default-settings) that store the key ring locally.</span></span> <span data-ttu-id="59adf-138">V rámci výchozí konfigurace je jedinečný klíč Ring uložený na každém uzlu webové farmy.</span><span class="sxs-lookup"><span data-stu-id="59adf-138">Under the default configuration, a unique key ring is stored on each node of the web farm.</span></span> <span data-ttu-id="59adf-139">V důsledku toho každý uzel webové farmy nemůže dešifrovat data zašifrovaná aplikací v jakémkoli jiném uzlu.</span><span class="sxs-lookup"><span data-stu-id="59adf-139">Consequently, each web farm node can't decrypt data that's encrypted by an app on any other node.</span></span> <span data-ttu-id="59adf-140">Výchozí konfigurace není obecně vhodná pro hostování aplikací ve webové farmě.</span><span class="sxs-lookup"><span data-stu-id="59adf-140">The default configuration isn't generally appropriate for hosting apps in a web farm.</span></span> <span data-ttu-id="59adf-141">Alternativou k implementaci sdíleného klíčového prstence je vždycky směrovat požadavky uživatelů na stejný uzel.</span><span class="sxs-lookup"><span data-stu-id="59adf-141">An alternative to implementing a shared key ring is to always route user requests to the same node.</span></span> <span data-ttu-id="59adf-142">Další informace o konfiguraci systému ochrany dat pro nasazení webové farmy najdete v tématu <xref:security/data-protection/configuration/overview> .</span><span class="sxs-lookup"><span data-stu-id="59adf-142">For more information on Data Protection system configuration for web farm deployments, see <xref:security/data-protection/configuration/overview>.</span></span>

### <a name="caching"></a><span data-ttu-id="59adf-143">Ukládání do mezipaměti</span><span class="sxs-lookup"><span data-stu-id="59adf-143">Caching</span></span>

<span data-ttu-id="59adf-144">V prostředí webové farmy musí mechanismus ukládání do mezipaměti sdílet položky v mezipaměti napříč uzly webové farmy.</span><span class="sxs-lookup"><span data-stu-id="59adf-144">In a web farm environment, the caching mechanism must share cached items across the web farm's nodes.</span></span> <span data-ttu-id="59adf-145">Ukládání do mezipaměti musí buď spoléhat na běžnou mezipaměť Redis, sdílenou databázi SQL Server, nebo vlastní implementaci ukládání do mezipaměti, která sdílí položky v mezipaměti napříč webovou farmou.</span><span class="sxs-lookup"><span data-stu-id="59adf-145">Caching must either rely upon a common Redis cache, a shared SQL Server database, or a custom caching implementation that shares cached items across the web farm.</span></span> <span data-ttu-id="59adf-146">Další informace naleznete v tématu <xref:performance/caching/distributed>.</span><span class="sxs-lookup"><span data-stu-id="59adf-146">For more information, see <xref:performance/caching/distributed>.</span></span>

## <a name="dependent-components"></a><span data-ttu-id="59adf-147">Závislé součásti</span><span class="sxs-lookup"><span data-stu-id="59adf-147">Dependent components</span></span>

<span data-ttu-id="59adf-148">Následující scénáře nevyžadují další konfiguraci, ale závisejí na technologiích, které vyžadují konfiguraci webových farem.</span><span class="sxs-lookup"><span data-stu-id="59adf-148">The following scenarios don't require additional configuration, but they depend on technologies that require configuration for web farms.</span></span>

| <span data-ttu-id="59adf-149">Scénář</span><span class="sxs-lookup"><span data-stu-id="59adf-149">Scenario</span></span> | <span data-ttu-id="59adf-150">Závisí na&hellip;</span><span class="sxs-lookup"><span data-stu-id="59adf-150">Depends on &hellip;</span></span> |
| ---
<span data-ttu-id="59adf-151">Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="59adf-151">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="59adf-152">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="59adf-152">'Blazor'</span></span>
- <span data-ttu-id="59adf-153">'Identity'</span><span class="sxs-lookup"><span data-stu-id="59adf-153">'Identity'</span></span>
- <span data-ttu-id="59adf-154">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="59adf-154">'Let's Encrypt'</span></span>
- <span data-ttu-id="59adf-155">'Razor'</span><span class="sxs-lookup"><span data-stu-id="59adf-155">'Razor'</span></span>
- <span data-ttu-id="59adf-156">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="59adf-156">'SignalR' uid:</span></span> 

-
<span data-ttu-id="59adf-157">Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="59adf-157">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="59adf-158">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="59adf-158">'Blazor'</span></span>
- <span data-ttu-id="59adf-159">'Identity'</span><span class="sxs-lookup"><span data-stu-id="59adf-159">'Identity'</span></span>
- <span data-ttu-id="59adf-160">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="59adf-160">'Let's Encrypt'</span></span>
- <span data-ttu-id="59adf-161">'Razor'</span><span class="sxs-lookup"><span data-stu-id="59adf-161">'Razor'</span></span>
- <span data-ttu-id="59adf-162">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="59adf-162">'SignalR' uid:</span></span> 

<span data-ttu-id="59adf-163">---- | ---Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="59adf-163">---- | --- title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="59adf-164">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="59adf-164">'Blazor'</span></span>
- <span data-ttu-id="59adf-165">'Identity'</span><span class="sxs-lookup"><span data-stu-id="59adf-165">'Identity'</span></span>
- <span data-ttu-id="59adf-166">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="59adf-166">'Let's Encrypt'</span></span>
- <span data-ttu-id="59adf-167">'Razor'</span><span class="sxs-lookup"><span data-stu-id="59adf-167">'Razor'</span></span>
- <span data-ttu-id="59adf-168">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="59adf-168">'SignalR' uid:</span></span> 

-
<span data-ttu-id="59adf-169">Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="59adf-169">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="59adf-170">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="59adf-170">'Blazor'</span></span>
- <span data-ttu-id="59adf-171">'Identity'</span><span class="sxs-lookup"><span data-stu-id="59adf-171">'Identity'</span></span>
- <span data-ttu-id="59adf-172">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="59adf-172">'Let's Encrypt'</span></span>
- <span data-ttu-id="59adf-173">'Razor'</span><span class="sxs-lookup"><span data-stu-id="59adf-173">'Razor'</span></span>
- <span data-ttu-id="59adf-174">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="59adf-174">'SignalR' uid:</span></span> 

-
<span data-ttu-id="59adf-175">Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="59adf-175">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="59adf-176">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="59adf-176">'Blazor'</span></span>
- <span data-ttu-id="59adf-177">'Identity'</span><span class="sxs-lookup"><span data-stu-id="59adf-177">'Identity'</span></span>
- <span data-ttu-id="59adf-178">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="59adf-178">'Let's Encrypt'</span></span>
- <span data-ttu-id="59adf-179">'Razor'</span><span class="sxs-lookup"><span data-stu-id="59adf-179">'Razor'</span></span>
- <span data-ttu-id="59adf-180">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="59adf-180">'SignalR' uid:</span></span> 

-
<span data-ttu-id="59adf-181">Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="59adf-181">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="59adf-182">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="59adf-182">'Blazor'</span></span>
- <span data-ttu-id="59adf-183">'Identity'</span><span class="sxs-lookup"><span data-stu-id="59adf-183">'Identity'</span></span>
- <span data-ttu-id="59adf-184">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="59adf-184">'Let's Encrypt'</span></span>
- <span data-ttu-id="59adf-185">'Razor'</span><span class="sxs-lookup"><span data-stu-id="59adf-185">'Razor'</span></span>
- <span data-ttu-id="59adf-186">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="59adf-186">'SignalR' uid:</span></span> 

-
<span data-ttu-id="59adf-187">Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="59adf-187">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="59adf-188">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="59adf-188">'Blazor'</span></span>
- <span data-ttu-id="59adf-189">'Identity'</span><span class="sxs-lookup"><span data-stu-id="59adf-189">'Identity'</span></span>
- <span data-ttu-id="59adf-190">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="59adf-190">'Let's Encrypt'</span></span>
- <span data-ttu-id="59adf-191">'Razor'</span><span class="sxs-lookup"><span data-stu-id="59adf-191">'Razor'</span></span>
- <span data-ttu-id="59adf-192">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="59adf-192">'SignalR' uid:</span></span> 

-
<span data-ttu-id="59adf-193">Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="59adf-193">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="59adf-194">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="59adf-194">'Blazor'</span></span>
- <span data-ttu-id="59adf-195">'Identity'</span><span class="sxs-lookup"><span data-stu-id="59adf-195">'Identity'</span></span>
- <span data-ttu-id="59adf-196">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="59adf-196">'Let's Encrypt'</span></span>
- <span data-ttu-id="59adf-197">'Razor'</span><span class="sxs-lookup"><span data-stu-id="59adf-197">'Razor'</span></span>
- <span data-ttu-id="59adf-198">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="59adf-198">'SignalR' uid:</span></span> 

-
<span data-ttu-id="59adf-199">Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="59adf-199">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="59adf-200">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="59adf-200">'Blazor'</span></span>
- <span data-ttu-id="59adf-201">'Identity'</span><span class="sxs-lookup"><span data-stu-id="59adf-201">'Identity'</span></span>
- <span data-ttu-id="59adf-202">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="59adf-202">'Let's Encrypt'</span></span>
- <span data-ttu-id="59adf-203">'Razor'</span><span class="sxs-lookup"><span data-stu-id="59adf-203">'Razor'</span></span>
- <span data-ttu-id="59adf-204">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="59adf-204">'SignalR' uid:</span></span> 

<span data-ttu-id="59adf-205">---------- | | Ověřování | Ochrana dat (viz <xref:security/data-protection/configuration/overview> ).</span><span class="sxs-lookup"><span data-stu-id="59adf-205">---------- | | Authentication | Data Protection (see <xref:security/data-protection/configuration/overview>).</span></span><br><br><span data-ttu-id="59adf-206">Další informace naleznete v tématech <xref:security/authentication/cookie> a <xref:security/cookie-sharing>.</span><span class="sxs-lookup"><span data-stu-id="59adf-206">For more information, see <xref:security/authentication/cookie> and <xref:security/cookie-sharing>.</span></span> <span data-ttu-id="59adf-207">| | Identity | Ověřování a konfigurace databáze.</span><span class="sxs-lookup"><span data-stu-id="59adf-207">| | Identity | Authentication and database configuration.</span></span><br><br><span data-ttu-id="59adf-208">Další informace naleznete v tématu <xref:security/authentication/identity>.</span><span class="sxs-lookup"><span data-stu-id="59adf-208">For more information, see <xref:security/authentication/identity>.</span></span> <span data-ttu-id="59adf-209">| | Relace | Ochrana dat (šifrované soubory cookie) (viz <xref:security/data-protection/configuration/overview> ) a ukládání do mezipaměti (viz <xref:performance/caching/distributed> ).</span><span class="sxs-lookup"><span data-stu-id="59adf-209">| | Session | Data Protection (encrypted cookies) (see <xref:security/data-protection/configuration/overview>) and Caching (see <xref:performance/caching/distributed>).</span></span><br><br><span data-ttu-id="59adf-210">Další informace najdete v tématu [Správa stavu a relace: stav relace](xref:fundamentals/app-state#session-state).</span><span class="sxs-lookup"><span data-stu-id="59adf-210">For more information, see [Session and state management: Session state](xref:fundamentals/app-state#session-state).</span></span> <span data-ttu-id="59adf-211">| | TempData | Ochrana dat (šifrované soubory cookie) (viz <xref:security/data-protection/configuration/overview> ) nebo relace (viz [Správa relace a stav: stav relace](xref:fundamentals/app-state#session-state)).</span><span class="sxs-lookup"><span data-stu-id="59adf-211">| | TempData | Data Protection (encrypted cookies) (see <xref:security/data-protection/configuration/overview>) or Session (see [Session and state management: Session state](xref:fundamentals/app-state#session-state)).</span></span><br><br><span data-ttu-id="59adf-212">Další informace najdete v tématu [Správa stavu a relace: TempData](xref:fundamentals/app-state#tempdata).</span><span class="sxs-lookup"><span data-stu-id="59adf-212">For more information, see [Session and state management: TempData](xref:fundamentals/app-state#tempdata).</span></span> <span data-ttu-id="59adf-213">| | Ochrana proti padělání | Ochrana dat (viz <xref:security/data-protection/configuration/overview> ).</span><span class="sxs-lookup"><span data-stu-id="59adf-213">| | Anti-forgery | Data Protection (see <xref:security/data-protection/configuration/overview>).</span></span><br><br><span data-ttu-id="59adf-214">Další informace naleznete v tématu <xref:security/anti-request-forgery>.</span><span class="sxs-lookup"><span data-stu-id="59adf-214">For more information, see <xref:security/anti-request-forgery>.</span></span> |

## <a name="troubleshoot"></a><span data-ttu-id="59adf-215">Řešení potíží</span><span class="sxs-lookup"><span data-stu-id="59adf-215">Troubleshoot</span></span>

### <a name="data-protection-and-caching"></a><span data-ttu-id="59adf-216">Ochrana dat a ukládání do mezipaměti</span><span class="sxs-lookup"><span data-stu-id="59adf-216">Data Protection and caching</span></span>

<span data-ttu-id="59adf-217">Pokud není pro prostředí webové farmy nakonfigurovaná ochrana dat nebo ukládání do mezipaměti, dojde při zpracování požadavků k přerušované chybě.</span><span class="sxs-lookup"><span data-stu-id="59adf-217">When Data Protection or caching isn't configured for a web farm environment, intermittent errors occur when requests are processed.</span></span> <span data-ttu-id="59adf-218">K tomu dochází, protože uzly nesdílejí stejné prostředky a požadavky uživatelů nejsou vždy směrovány zpět do stejného uzlu.</span><span class="sxs-lookup"><span data-stu-id="59adf-218">This occurs because nodes don't share the same resources and user requests aren't always routed back to the same node.</span></span>

<span data-ttu-id="59adf-219">Vezměte v úvahu uživatele, který se přihlásí do aplikace pomocí ověřování souborem cookie.</span><span class="sxs-lookup"><span data-stu-id="59adf-219">Consider a user who signs into the app using cookie authentication.</span></span> <span data-ttu-id="59adf-220">Uživatel se přihlásí do aplikace na jednom uzlu webové farmy.</span><span class="sxs-lookup"><span data-stu-id="59adf-220">The user signs into the app on one web farm node.</span></span> <span data-ttu-id="59adf-221">Pokud bude další požadavek doručen do stejného uzlu, ve kterém se přihlásil, aplikace dokáže dešifrovat soubor cookie ověřování a povolit přístup k prostředku aplikace.</span><span class="sxs-lookup"><span data-stu-id="59adf-221">If their next request arrives at the same node where they signed in, the app is able to decrypt the authentication cookie and allows access to the app's resource.</span></span> <span data-ttu-id="59adf-222">Pokud jejich další požadavek dorazí na jiný uzel, aplikace nemůže dešifrovat ověřovací soubor cookie z uzlu, ve kterém se uživatel přihlásil, a autorizace požadovaného prostředku se nezdařila.</span><span class="sxs-lookup"><span data-stu-id="59adf-222">If their next request arrives at a different node, the app can't decrypt the authentication cookie from the node where the user signed in, and authorization for the requested resource fails.</span></span>

<span data-ttu-id="59adf-223">Pokud dojde k **občasnému**výskytu některého z následujících příznaků, je obvykle zaznamenána nesprávná ochrana dat nebo konfigurace ukládání do mezipaměti pro prostředí webové farmy:</span><span class="sxs-lookup"><span data-stu-id="59adf-223">When any of the following symptoms occur **intermittently**, the problem is usually traced to improper Data Protection or caching configuration for a web farm environment:</span></span>

* <span data-ttu-id="59adf-224">Přerušení ověřování: ověřovací soubor cookie je nesprávně nakonfigurovaný nebo ho nejde dešifrovat.</span><span class="sxs-lookup"><span data-stu-id="59adf-224">Authentication breaks: The authentication cookie is misconfigured or can't be decrypted.</span></span> <span data-ttu-id="59adf-225">OAuth (Facebook, Microsoft, Twitter) nebo OpenIdConnect přihlášení selžou s chybou korelace se nezdařila.</span><span class="sxs-lookup"><span data-stu-id="59adf-225">OAuth (Facebook, Microsoft, Twitter) or OpenIdConnect logins fail with the error "Correlation failed."</span></span>
* <span data-ttu-id="59adf-226">Přerušení autorizace: dojde Identity ke ztrátě.</span><span class="sxs-lookup"><span data-stu-id="59adf-226">Authorization breaks: Identity is lost.</span></span>
* <span data-ttu-id="59adf-227">Stav relace ztratí data.</span><span class="sxs-lookup"><span data-stu-id="59adf-227">Session state loses data.</span></span>
* <span data-ttu-id="59adf-228">Položky uložené v mezipaměti zmizí.</span><span class="sxs-lookup"><span data-stu-id="59adf-228">Cached items disappear.</span></span>
* <span data-ttu-id="59adf-229">TempData se nezdařila.</span><span class="sxs-lookup"><span data-stu-id="59adf-229">TempData fails.</span></span>
* <span data-ttu-id="59adf-230">Příspěvky selžou: kontrolu proti padělání se nezdaří.</span><span class="sxs-lookup"><span data-stu-id="59adf-230">POSTs fail: The anti-forgery check fails.</span></span>

<span data-ttu-id="59adf-231">Další informace o konfiguraci ochrany dat pro nasazení webové farmy najdete v tématu <xref:security/data-protection/configuration/overview> .</span><span class="sxs-lookup"><span data-stu-id="59adf-231">For more information on Data Protection configuration for web farm deployments, see <xref:security/data-protection/configuration/overview>.</span></span> <span data-ttu-id="59adf-232">Další informace o konfiguraci ukládání do mezipaměti pro nasazení webové farmy najdete v tématu <xref:performance/caching/distributed> .</span><span class="sxs-lookup"><span data-stu-id="59adf-232">For more information on caching configuration for web farm deployments, see <xref:performance/caching/distributed>.</span></span>

## <a name="obtain-data-from-apps"></a><span data-ttu-id="59adf-233">Získání dat z aplikací</span><span class="sxs-lookup"><span data-stu-id="59adf-233">Obtain data from apps</span></span>

<span data-ttu-id="59adf-234">Pokud webové serverové farmy můžou reagovat na požadavky, získávat žádosti, připojení a další data z aplikací pomocí vloženého middlewaru terminálu.</span><span class="sxs-lookup"><span data-stu-id="59adf-234">If the web farm apps are capable of responding to requests, obtain request, connection, and additional data from the apps using terminal inline middleware.</span></span> <span data-ttu-id="59adf-235">Další informace a ukázka kódu naleznete v tématu <xref:test/troubleshoot#obtain-data-from-an-app> .</span><span class="sxs-lookup"><span data-stu-id="59adf-235">For more information and sample code, see <xref:test/troubleshoot#obtain-data-from-an-app>.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="59adf-236">Další zdroje</span><span class="sxs-lookup"><span data-stu-id="59adf-236">Additional resources</span></span>

* <span data-ttu-id="59adf-237">[Rozšíření vlastních skriptů pro Windows](/azure/virtual-machines/extensions/custom-script-windows): stáhne a spustí skripty na virtuálních počítačích Azure, které jsou užitečné pro konfiguraci po nasazení a instalaci softwaru.</span><span class="sxs-lookup"><span data-stu-id="59adf-237">[Custom Script Extension for Windows](/azure/virtual-machines/extensions/custom-script-windows): Downloads and executes scripts on Azure virtual machines, which is useful for post-deployment configuration and software installation.</span></span>
* <xref:host-and-deploy/proxy-load-balancer>
 