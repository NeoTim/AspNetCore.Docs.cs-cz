---
title: Hostování ASP.NET jádra ve službě Windows se službou IIS
author: rick-anderson
description: Přečtěte si, jak hostovat aplikace ASP.NET Core v Internetové informační službě (IIS) systému Windows Server.
monikerRange: '>= aspnetcore-2.1'
ms.author: riande
ms.custom: mvc
ms.date: 02/07/2020
uid: host-and-deploy/iis/index
ms.openlocfilehash: 819c53f945c1e5bb2cedcef8fc39d4c8761e4549
ms.sourcegitcommit: f0aeeab6ab6e09db713bb9b7862c45f4d447771b
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/08/2020
ms.locfileid: "80977025"
---
# <a name="host-aspnet-core-on-windows-with-iis"></a><span data-ttu-id="e72ad-103">Hostování ASP.NET jádra ve službě Windows se službou IIS</span><span class="sxs-lookup"><span data-stu-id="e72ad-103">Host ASP.NET Core on Windows with IIS</span></span>

::: moniker range=">= aspnetcore-3.0"

<span data-ttu-id="e72ad-104">Výukové prostředí o publikování aplikace ASP.NET Core na server <xref:tutorials/publish-to-iis>služby IIS naleznete v tématu .</span><span class="sxs-lookup"><span data-stu-id="e72ad-104">For a tutorial experience on publishing an ASP.NET Core app to an IIS server, see <xref:tutorials/publish-to-iis>.</span></span>

[<span data-ttu-id="e72ad-105">Instalace balíčku hostingu jádra .NET</span><span class="sxs-lookup"><span data-stu-id="e72ad-105">Install the .NET Core Hosting Bundle</span></span>](#install-the-net-core-hosting-bundle)

## <a name="supported-operating-systems"></a><span data-ttu-id="e72ad-106">Podporované operační systémy</span><span class="sxs-lookup"><span data-stu-id="e72ad-106">Supported operating systems</span></span>

<span data-ttu-id="e72ad-107">Podporovány jsou následující operační systémy:</span><span class="sxs-lookup"><span data-stu-id="e72ad-107">The following operating systems are supported:</span></span>

* <span data-ttu-id="e72ad-108">Windows 7 nebo novější</span><span class="sxs-lookup"><span data-stu-id="e72ad-108">Windows 7 or later</span></span>
* <span data-ttu-id="e72ad-109">Windows Server 2012 R2 nebo novější</span><span class="sxs-lookup"><span data-stu-id="e72ad-109">Windows Server 2012 R2 or later</span></span>

<span data-ttu-id="e72ad-110">[Server HTTP.sys](xref:fundamentals/servers/httpsys) (dříve nazývaný WebListener) nefunguje v konfiguraci reverzního proxy serveru se službou IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-110">[HTTP.sys server](xref:fundamentals/servers/httpsys) (formerly called WebListener) doesn't work in a reverse proxy configuration with IIS.</span></span> <span data-ttu-id="e72ad-111">Použijte [server Kestrel](xref:fundamentals/servers/kestrel).</span><span class="sxs-lookup"><span data-stu-id="e72ad-111">Use the [Kestrel server](xref:fundamentals/servers/kestrel).</span></span>

<span data-ttu-id="e72ad-112">Informace o hostování v <xref:host-and-deploy/azure-apps/index>Azure najdete v tématu .</span><span class="sxs-lookup"><span data-stu-id="e72ad-112">For information on hosting in Azure, see <xref:host-and-deploy/azure-apps/index>.</span></span>

<span data-ttu-id="e72ad-113">Pokyny pro řešení <xref:test/troubleshoot>potíží naleznete v tématu .</span><span class="sxs-lookup"><span data-stu-id="e72ad-113">For troubleshooting guidance, see <xref:test/troubleshoot>.</span></span>

## <a name="supported-platforms"></a><span data-ttu-id="e72ad-114">Podporované platformy</span><span class="sxs-lookup"><span data-stu-id="e72ad-114">Supported platforms</span></span>

<span data-ttu-id="e72ad-115">Podporovány jsou aplikace publikované pro 32bitové (x86) nebo 64bitové (x64) nasazení.</span><span class="sxs-lookup"><span data-stu-id="e72ad-115">Apps published for 32-bit (x86) or 64-bit (x64) deployment are supported.</span></span> <span data-ttu-id="e72ad-116">Nasazení 32bitové aplikace s 32bitovou sadou .NET Core SDK, pokud ji ne:</span><span class="sxs-lookup"><span data-stu-id="e72ad-116">Deploy a 32-bit app with a 32-bit (x86) .NET Core SDK unless the app:</span></span>

* <span data-ttu-id="e72ad-117">Vyžaduje větší adresní prostor virtuální paměti, který je k dispozici pro 64bitovou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="e72ad-117">Requires the larger virtual memory address space available to a 64-bit app.</span></span>
* <span data-ttu-id="e72ad-118">Vyžaduje větší velikost zásobníku iis.</span><span class="sxs-lookup"><span data-stu-id="e72ad-118">Requires the larger IIS stack size.</span></span>
* <span data-ttu-id="e72ad-119">Má 64bitové nativní závislosti.</span><span class="sxs-lookup"><span data-stu-id="e72ad-119">Has 64-bit native dependencies.</span></span>

<span data-ttu-id="e72ad-120">K publikování 64bitové sady SDK jádra (x64) použijte 64bitovou sadu .NET Core SDK.</span><span class="sxs-lookup"><span data-stu-id="e72ad-120">Use a 64-bit (x64) .NET Core SDK to publish a 64-bit app.</span></span> <span data-ttu-id="e72ad-121">V hostitelském systému musí být k dispozici 64bitový běhový čas.</span><span class="sxs-lookup"><span data-stu-id="e72ad-121">A 64-bit runtime must be present on the host system.</span></span>

## <a name="hosting-models"></a><span data-ttu-id="e72ad-122">Modely hostingu</span><span class="sxs-lookup"><span data-stu-id="e72ad-122">Hosting models</span></span>

### <a name="in-process-hosting-model"></a><span data-ttu-id="e72ad-123">Model hostování v procesu</span><span class="sxs-lookup"><span data-stu-id="e72ad-123">In-process hosting model</span></span>

<span data-ttu-id="e72ad-124">Pomocí hostování v rámci procesu běží aplikace ASP.NET Core ve stejném procesu jako pracovní proces služby IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-124">Using in-process hosting, an ASP.NET Core app runs in the same process as its IIS worker process.</span></span> <span data-ttu-id="e72ad-125">Hostování v procesu poskytuje lepší výkon než mimoproceshosting, protože požadavky nejsou proxied přes adaptér zpětné smyčky, síťové rozhraní, které vrací odchozí síťový provoz zpět do stejného počítače.</span><span class="sxs-lookup"><span data-stu-id="e72ad-125">In-process hosting provides improved performance over out-of-process hosting because requests aren't proxied over the loopback adapter, a network interface that returns outgoing network traffic back to the same machine.</span></span> <span data-ttu-id="e72ad-126">Služba IIS zpracovává správu procesů pomocí [služby aktivace procesů systému Windows (WAS).](/iis/manage/provisioning-and-managing-iis/features-of-the-windows-process-activation-service-was)</span><span class="sxs-lookup"><span data-stu-id="e72ad-126">IIS handles process management with the [Windows Process Activation Service (WAS)](/iis/manage/provisioning-and-managing-iis/features-of-the-windows-process-activation-service-was).</span></span>

<span data-ttu-id="e72ad-127">Základní [modul ASP.NET](xref:host-and-deploy/aspnet-core-module):</span><span class="sxs-lookup"><span data-stu-id="e72ad-127">The [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module):</span></span>

* <span data-ttu-id="e72ad-128">Provede inicializaci aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-128">Performs app initialization.</span></span>
  * <span data-ttu-id="e72ad-129">Načte [CoreCLR](/dotnet/standard/glossary#coreclr).</span><span class="sxs-lookup"><span data-stu-id="e72ad-129">Loads the [CoreCLR](/dotnet/standard/glossary#coreclr).</span></span>
  * <span data-ttu-id="e72ad-130">Volání `Program.Main`.</span><span class="sxs-lookup"><span data-stu-id="e72ad-130">Calls `Program.Main`.</span></span>
* <span data-ttu-id="e72ad-131">Zpracovává životnost nativního požadavku služby IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-131">Handles the lifetime of the IIS native request.</span></span>

<span data-ttu-id="e72ad-132">Model hostování v procesu není podporován pro aplikace ASP.NET Core, které cílí na rozhraní .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="e72ad-132">The in-process hosting model isn't supported for ASP.NET Core apps that target the .NET Framework.</span></span>

<span data-ttu-id="e72ad-133">Následující diagram znázorňuje vztah mezi iis, ASP.NET základní modul a aplikace hostované v procesu:</span><span class="sxs-lookup"><span data-stu-id="e72ad-133">The following diagram illustrates the relationship between IIS, the ASP.NET Core Module, and an app hosted in-process:</span></span>

![ASP.NET core modul ve scénáři hostování v procesu](index/_static/ancm-inprocess.png)

<span data-ttu-id="e72ad-135">Požadavek přichází z webu na ovladač HTTP.sys v režimu jádra.</span><span class="sxs-lookup"><span data-stu-id="e72ad-135">A request arrives from the web to the kernel-mode HTTP.sys driver.</span></span> <span data-ttu-id="e72ad-136">Řidič směruje nativní požadavek do služby IIS na nakonfigurovaném portu webu, obvykle 80 (HTTP) nebo 443 (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="e72ad-136">The driver routes the native request to IIS on the website's configured port, usually 80 (HTTP) or 443 (HTTPS).</span></span> <span data-ttu-id="e72ad-137">Základní modul ASP.NET obdrží nativní požadavek a předá`IISHttpServer`jej serveru HTTP služby IIS ( ).</span><span class="sxs-lookup"><span data-stu-id="e72ad-137">The ASP.NET Core Module receives the native request and passes it to IIS HTTP Server (`IISHttpServer`).</span></span> <span data-ttu-id="e72ad-138">Server HTTP služby IIS je implementace serveru v procesu pro službu IIS, která převádí požadavek z nativního na spravovaný.</span><span class="sxs-lookup"><span data-stu-id="e72ad-138">IIS HTTP Server is an in-process server implementation for IIS that converts the request from native to managed.</span></span>

<span data-ttu-id="e72ad-139">Po zpracování požadavku serverem HTTP služby IIS je požadavek odeslán do kanálu middlewaru ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="e72ad-139">After the IIS HTTP Server processes the request, the request is pushed into the ASP.NET Core middleware pipeline.</span></span> <span data-ttu-id="e72ad-140">Middleware kanálu zpracovává požadavek a předá `HttpContext` jej jako instanci logiky aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-140">The middleware pipeline handles the request and passes it on as an `HttpContext` instance to the app's logic.</span></span> <span data-ttu-id="e72ad-141">Odpověď aplikace je předána zpět do služby IIS prostřednictvím serveru HTTP služby IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-141">The app's response is passed back to IIS through IIS HTTP Server.</span></span> <span data-ttu-id="e72ad-142">Služba IIS odešle odpověď klientovi, který požadavek inicioval.</span><span class="sxs-lookup"><span data-stu-id="e72ad-142">IIS sends the response to the client that initiated the request.</span></span>

<span data-ttu-id="e72ad-143">Hostování v procesu je přihlášení pro stávající aplikace, ale [dotnet nové](/dotnet/core/tools/dotnet-new) šablony výchozí v procesu hostování modelu pro všechny scénáře služby IIS a IIS Express.</span><span class="sxs-lookup"><span data-stu-id="e72ad-143">In-process hosting is opt-in for existing apps, but [dotnet new](/dotnet/core/tools/dotnet-new) templates default to the in-process hosting model for all IIS and IIS Express scenarios.</span></span>

<span data-ttu-id="e72ad-144">`CreateDefaultBuilder`přidá <xref:Microsoft.AspNetCore.Hosting.Server.IServer> instanci <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderIISExtensions.UseIIS*> voláním metody pro spuštění [coreclru](/dotnet/standard/glossary#coreclr) a hostování aplikace uvnitř pracovního procesu služby IIS (*w3wp.exe* nebo *iisexpress.exe*).</span><span class="sxs-lookup"><span data-stu-id="e72ad-144">`CreateDefaultBuilder` adds an <xref:Microsoft.AspNetCore.Hosting.Server.IServer> instance by calling the <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderIISExtensions.UseIIS*> method to boot the [CoreCLR](/dotnet/standard/glossary#coreclr) and host the app inside of the IIS worker process (*w3wp.exe* or *iisexpress.exe*).</span></span> <span data-ttu-id="e72ad-145">Testy výkonu ukazují, že hostování aplikace .NET Core v procesu přináší výrazně vyšší propustnost požadavků ve srovnání s hostováním aplikací mimo proces a proxy požadavků na server [Kestrel.](xref:fundamentals/servers/kestrel)</span><span class="sxs-lookup"><span data-stu-id="e72ad-145">Performance tests indicate that hosting a .NET Core app in-process delivers significantly higher request throughput compared to hosting the app out-of-process and proxying requests to [Kestrel](xref:fundamentals/servers/kestrel) server.</span></span>

> [!NOTE]
> <span data-ttu-id="e72ad-146">Aplikace publikované jako jeden soubor spustitelný soubor nelze načíst v procesu hostování modelu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-146">Apps published as a single file executable can't be loaded by the in-process hosting model.</span></span>

### <a name="out-of-process-hosting-model"></a><span data-ttu-id="e72ad-147">Model hostování mimo proces</span><span class="sxs-lookup"><span data-stu-id="e72ad-147">Out-of-process hosting model</span></span>

<span data-ttu-id="e72ad-148">Vzhledem k tomu, že aplikace ASP.NET Core běží v procesu odděleném od pracovního procesu služby IIS, zpracovává ASP.NET core module správu procesů.</span><span class="sxs-lookup"><span data-stu-id="e72ad-148">Because ASP.NET Core apps run in a process separate from the IIS worker process, the ASP.NET Core Module handles process management.</span></span> <span data-ttu-id="e72ad-149">Modul spustí proces pro aplikaci ASP.NET Core při příchodu prvního požadavku a restartuje aplikaci, pokud se vypne nebo dojde k chybě.</span><span class="sxs-lookup"><span data-stu-id="e72ad-149">The module starts the process for the ASP.NET Core app when the first request arrives and restarts the app if it shuts down or crashes.</span></span> <span data-ttu-id="e72ad-150">Toto je v podstatě stejné chování jako u aplikací, které běží v procesu, které jsou spravovány [službou aktivace procesu systému Windows (WAS)](/iis/manage/provisioning-and-managing-iis/features-of-the-windows-process-activation-service-was).</span><span class="sxs-lookup"><span data-stu-id="e72ad-150">This is essentially the same behavior as seen with apps that run in-process that are managed by the [Windows Process Activation Service (WAS)](/iis/manage/provisioning-and-managing-iis/features-of-the-windows-process-activation-service-was).</span></span>

<span data-ttu-id="e72ad-151">Následující diagram znázorňuje vztah mezi iis, ASP.NET základní modul a aplikace hostované mimo proces:</span><span class="sxs-lookup"><span data-stu-id="e72ad-151">The following diagram illustrates the relationship between IIS, the ASP.NET Core Module, and an app hosted out-of-process:</span></span>

![ASP.NET základní modul ve scénáři mimoproceshostingového hostingu](index/_static/ancm-outofprocess.png)

<span data-ttu-id="e72ad-153">Požadavky dorazí z webu do ovladače HTTP.sys v režimu jádra.</span><span class="sxs-lookup"><span data-stu-id="e72ad-153">Requests arrive from the web to the kernel-mode HTTP.sys driver.</span></span> <span data-ttu-id="e72ad-154">Řidič směruje požadavky do služby IIS na nakonfigurovaném portu webu, obvykle 80 (HTTP) nebo 443 (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="e72ad-154">The driver routes the requests to IIS on the website's configured port, usually 80 (HTTP) or 443 (HTTPS).</span></span> <span data-ttu-id="e72ad-155">Modul předá požadavky Kestrel na náhodný port pro aplikaci, která není port 80 nebo 443.</span><span class="sxs-lookup"><span data-stu-id="e72ad-155">The module forwards the requests to Kestrel on a random port for the app, which isn't port 80 or 443.</span></span>

<span data-ttu-id="e72ad-156">Modul určuje port prostřednictvím proměnné prostředí při <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderIISExtensions.UseIISIntegration*> spuštění a rozšíření konfiguruje server pro naslouchání . `http://localhost:{PORT}`</span><span class="sxs-lookup"><span data-stu-id="e72ad-156">The module specifies the port via an environment variable at startup, and the <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderIISExtensions.UseIISIntegration*> extension configures the server to listen on `http://localhost:{PORT}`.</span></span> <span data-ttu-id="e72ad-157">Jsou prováděny další kontroly a požadavky, které nepocházejí z modulu, jsou odmítnuty.</span><span class="sxs-lookup"><span data-stu-id="e72ad-157">Additional checks are performed, and requests that don't originate from the module are rejected.</span></span> <span data-ttu-id="e72ad-158">Modul nepodporuje předávání https, takže požadavky jsou předávány přes HTTP i v případě, že přijaté službou IIS přes protokol HTTPS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-158">The module doesn't support HTTPS forwarding, so requests are forwarded over HTTP even if received by IIS over HTTPS.</span></span>

<span data-ttu-id="e72ad-159">Poté, co Kestrel vyzvedne požadavek z modulu, je požadavek posunut do kanálu ASP.NET middleware.</span><span class="sxs-lookup"><span data-stu-id="e72ad-159">After Kestrel picks up the request from the module, the request is pushed into the ASP.NET Core middleware pipeline.</span></span> <span data-ttu-id="e72ad-160">Middleware kanálu zpracovává požadavek a předá `HttpContext` jej jako instanci logiky aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-160">The middleware pipeline handles the request and passes it on as an `HttpContext` instance to the app's logic.</span></span> <span data-ttu-id="e72ad-161">Middleware přidané integrací služby IIS aktualizuje schéma, vzdálenou IP adresu a pathbase tak, aby odpovídaly předání požadavku ke společnosti Kestrel.</span><span class="sxs-lookup"><span data-stu-id="e72ad-161">Middleware added by IIS Integration updates the scheme, remote IP, and pathbase to account for forwarding the request to Kestrel.</span></span> <span data-ttu-id="e72ad-162">Odpověď aplikace je předána zpět do služby IIS, která ji odešle zpět do klienta HTTP, který inicioval požadavek.</span><span class="sxs-lookup"><span data-stu-id="e72ad-162">The app's response is passed back to IIS, which pushes it back out to the HTTP client that initiated the request.</span></span>

<span data-ttu-id="e72ad-163">Pokyny ke konfiguraci ASP.NET <xref:host-and-deploy/aspnet-core-module>core modulem naleznete v tématu .</span><span class="sxs-lookup"><span data-stu-id="e72ad-163">For ASP.NET Core Module configuration guidance, see <xref:host-and-deploy/aspnet-core-module>.</span></span>

<span data-ttu-id="e72ad-164">Další informace o hostování najdete [v tématu Host in ASP.NET Core](xref:fundamentals/index#host).</span><span class="sxs-lookup"><span data-stu-id="e72ad-164">For more information on hosting, see [Host in ASP.NET Core](xref:fundamentals/index#host).</span></span>

## <a name="application-configuration"></a><span data-ttu-id="e72ad-165">Konfigurace aplikací</span><span class="sxs-lookup"><span data-stu-id="e72ad-165">Application configuration</span></span>

### <a name="enable-the-iisintegration-components"></a><span data-ttu-id="e72ad-166">Povolení součástí Integrace iIS</span><span class="sxs-lookup"><span data-stu-id="e72ad-166">Enable the IISIntegration components</span></span>

<span data-ttu-id="e72ad-167">Při vytváření hostitele `CreateHostBuilder` v *(Program.cs*) volání <xref:Microsoft.Extensions.Hosting.Host.CreateDefaultBuilder*> umožňující integraci iis:</span><span class="sxs-lookup"><span data-stu-id="e72ad-167">When building a host in `CreateHostBuilder` (*Program.cs*), call <xref:Microsoft.Extensions.Hosting.Host.CreateDefaultBuilder*> to enable IIS integration:</span></span>

```csharp
public static IHostBuilder CreateHostBuilder(string[] args) =>
    Host.CreateDefaultBuilder(args)
        ...
```

<span data-ttu-id="e72ad-168">Další informace `CreateDefaultBuilder`naleznete <xref:fundamentals/host/generic-host#default-builder-settings>v tématu .</span><span class="sxs-lookup"><span data-stu-id="e72ad-168">For more information on `CreateDefaultBuilder`, see <xref:fundamentals/host/generic-host#default-builder-settings>.</span></span>

### <a name="iis-options"></a><span data-ttu-id="e72ad-169">Možnosti iis</span><span class="sxs-lookup"><span data-stu-id="e72ad-169">IIS options</span></span>

<span data-ttu-id="e72ad-170">**Model hostování v procesu**</span><span class="sxs-lookup"><span data-stu-id="e72ad-170">**In-process hosting model**</span></span>

<span data-ttu-id="e72ad-171">Chcete-li konfigurovat možnosti serveru IIS, zahrňte konfiguraci služby v <xref:Microsoft.AspNetCore.Builder.IISServerOptions> aplikaci <xref:Microsoft.AspNetCore.Hosting.IStartup.ConfigureServices*>.</span><span class="sxs-lookup"><span data-stu-id="e72ad-171">To configure IIS Server options, include a service configuration for <xref:Microsoft.AspNetCore.Builder.IISServerOptions> in <xref:Microsoft.AspNetCore.Hosting.IStartup.ConfigureServices*>.</span></span> <span data-ttu-id="e72ad-172">Následující příklad zakáže automatické ověřování:</span><span class="sxs-lookup"><span data-stu-id="e72ad-172">The following example disables AutomaticAuthentication:</span></span>

```csharp
services.Configure<IISServerOptions>(options => 
{
    options.AutomaticAuthentication = false;
});
```

| <span data-ttu-id="e72ad-173">Možnost</span><span class="sxs-lookup"><span data-stu-id="e72ad-173">Option</span></span>                         | <span data-ttu-id="e72ad-174">Výchozí</span><span class="sxs-lookup"><span data-stu-id="e72ad-174">Default</span></span> | <span data-ttu-id="e72ad-175">Nastavení</span><span class="sxs-lookup"><span data-stu-id="e72ad-175">Setting</span></span> |
| ------------------------------ | :-----: | ------- |
| `AutomaticAuthentication`      | `true`  | <span data-ttu-id="e72ad-176">Pokud `true`server IIS `HttpContext.User` nastaví ověřené ověřování [systému Windows](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="e72ad-176">If `true`, IIS Server sets the `HttpContext.User` authenticated by [Windows Authentication](xref:security/authentication/windowsauth).</span></span> <span data-ttu-id="e72ad-177">Pokud `false`server poskytuje identitu pouze `HttpContext.User` pro výzvy a reaguje na `AuthenticationScheme`ně, pokud o to výslovně požádá .</span><span class="sxs-lookup"><span data-stu-id="e72ad-177">If `false`, the server only provides an identity for `HttpContext.User` and responds to challenges when explicitly requested by the `AuthenticationScheme`.</span></span> <span data-ttu-id="e72ad-178">Aby bylo možné službu `AutomaticAuthentication` IIS fungovat, musí být ve službě IIS povoleno ověřování systému Windows.</span><span class="sxs-lookup"><span data-stu-id="e72ad-178">Windows Authentication must be enabled in IIS for `AutomaticAuthentication` to function.</span></span> <span data-ttu-id="e72ad-179">Další informace naleznete v tématu [Ověřování systému Windows](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="e72ad-179">For more information, see [Windows Authentication](xref:security/authentication/windowsauth).</span></span> |
| `AuthenticationDisplayName`    | `null`  | <span data-ttu-id="e72ad-180">Nastaví zobrazované jméno zobrazené uživatelům na přihlašovacích stránkách.</span><span class="sxs-lookup"><span data-stu-id="e72ad-180">Sets the display name shown to users on login pages.</span></span> |
| `AllowSynchronousIO`           | `false` | <span data-ttu-id="e72ad-181">Zda synchronní V/O je `HttpContext.Request` povoleno `HttpContext.Response`pro a .</span><span class="sxs-lookup"><span data-stu-id="e72ad-181">Whether synchronous I/O is allowed for the `HttpContext.Request` and the `HttpContext.Response`.</span></span> |
| `MaxRequestBodySize`           | `30000000`  | <span data-ttu-id="e72ad-182">Získá nebo nastaví maximální velikost `HttpRequest`těla požadavku pro .</span><span class="sxs-lookup"><span data-stu-id="e72ad-182">Gets or sets the max request body size for the `HttpRequest`.</span></span> <span data-ttu-id="e72ad-183">Všimněte si, že `maxAllowedContentLength` iis sám má `MaxRequestBodySize` limit, `IISServerOptions`který bude zpracován před soubor v .</span><span class="sxs-lookup"><span data-stu-id="e72ad-183">Note that IIS itself has the limit `maxAllowedContentLength` which will be processed before the `MaxRequestBodySize` set in the `IISServerOptions`.</span></span> <span data-ttu-id="e72ad-184">Změna `MaxRequestBodySize` nebude mít vliv `maxAllowedContentLength`na .</span><span class="sxs-lookup"><span data-stu-id="e72ad-184">Changing the `MaxRequestBodySize` won't affect the `maxAllowedContentLength`.</span></span> <span data-ttu-id="e72ad-185">Chcete-li zvýšit `maxAllowedContentLength`, přidejte položku `maxAllowedContentLength` do *web.config* nastavit na vyšší hodnotu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-185">To increase `maxAllowedContentLength`, add an entry in the *web.config* to set `maxAllowedContentLength` to a higher value.</span></span> <span data-ttu-id="e72ad-186">Další podrobnosti naleznete v [tématu Konfigurace](/iis/configuration/system.webServer/security/requestFiltering/requestLimits/#configuration).</span><span class="sxs-lookup"><span data-stu-id="e72ad-186">For more details, see [Configuration](/iis/configuration/system.webServer/security/requestFiltering/requestLimits/#configuration).</span></span> |

<span data-ttu-id="e72ad-187">**Model hostování mimo proces**</span><span class="sxs-lookup"><span data-stu-id="e72ad-187">**Out-of-process hosting model**</span></span>

<span data-ttu-id="e72ad-188">Chcete-li konfigurovat možnosti služby <xref:Microsoft.AspNetCore.Builder.IISOptions> <xref:Microsoft.AspNetCore.Hosting.IStartup.ConfigureServices*>IIS, zahrňte konfiguraci služby v aplikaci .</span><span class="sxs-lookup"><span data-stu-id="e72ad-188">To configure IIS options, include a service configuration for <xref:Microsoft.AspNetCore.Builder.IISOptions> in <xref:Microsoft.AspNetCore.Hosting.IStartup.ConfigureServices*>.</span></span> <span data-ttu-id="e72ad-189">Následující příklad zabrání aplikaci v naplnění `HttpContext.Connection.ClientCertificate`:</span><span class="sxs-lookup"><span data-stu-id="e72ad-189">The following example prevents the app from populating `HttpContext.Connection.ClientCertificate`:</span></span>

```csharp
services.Configure<IISOptions>(options => 
{
    options.ForwardClientCertificate = false;
});
```

| <span data-ttu-id="e72ad-190">Možnost</span><span class="sxs-lookup"><span data-stu-id="e72ad-190">Option</span></span>                         | <span data-ttu-id="e72ad-191">Výchozí</span><span class="sxs-lookup"><span data-stu-id="e72ad-191">Default</span></span> | <span data-ttu-id="e72ad-192">Nastavení</span><span class="sxs-lookup"><span data-stu-id="e72ad-192">Setting</span></span> |
| ------------------------------ | :-----: | ------- |
| `AutomaticAuthentication`      | `true`  | <span data-ttu-id="e72ad-193">Pokud `true` [middleware integrace služby IIS](#enable-the-iisintegration-components) nastaví ověřené ověřování systému `HttpContext.User` [Windows](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="e72ad-193">If `true`, [IIS Integration Middleware](#enable-the-iisintegration-components) sets the `HttpContext.User` authenticated by [Windows Authentication](xref:security/authentication/windowsauth).</span></span> <span data-ttu-id="e72ad-194">Pokud `false`middleware poskytuje identitu `HttpContext.User` a reaguje na problémy pouze na `AuthenticationScheme`žádost .</span><span class="sxs-lookup"><span data-stu-id="e72ad-194">If `false`, the middleware only provides an identity for `HttpContext.User` and responds to challenges when explicitly requested by the `AuthenticationScheme`.</span></span> <span data-ttu-id="e72ad-195">Aby bylo možné službu `AutomaticAuthentication` IIS fungovat, musí být ve službě IIS povoleno ověřování systému Windows.</span><span class="sxs-lookup"><span data-stu-id="e72ad-195">Windows Authentication must be enabled in IIS for `AutomaticAuthentication` to function.</span></span> <span data-ttu-id="e72ad-196">Další informace naleznete v tématu [Ověřování systému Windows.](xref:security/authentication/windowsauth)</span><span class="sxs-lookup"><span data-stu-id="e72ad-196">For more information, see the [Windows Authentication](xref:security/authentication/windowsauth) topic.</span></span> |
| `AuthenticationDisplayName`    | `null`  | <span data-ttu-id="e72ad-197">Nastaví zobrazované jméno zobrazené uživatelům na přihlašovacích stránkách.</span><span class="sxs-lookup"><span data-stu-id="e72ad-197">Sets the display name shown to users on login pages.</span></span> |
| `ForwardClientCertificate`     | `true`  | <span data-ttu-id="e72ad-198">Pokud `true` a `MS-ASPNETCORE-CLIENTCERT` hlavička požadavku `HttpContext.Connection.ClientCertificate` je k dispozici, je naplněn.</span><span class="sxs-lookup"><span data-stu-id="e72ad-198">If `true` and the `MS-ASPNETCORE-CLIENTCERT` request header is present, the `HttpContext.Connection.ClientCertificate` is populated.</span></span> |

### <a name="proxy-server-and-load-balancer-scenarios"></a><span data-ttu-id="e72ad-199">Scénáře proxy serveru a vyrovnávání zatížení</span><span class="sxs-lookup"><span data-stu-id="e72ad-199">Proxy server and load balancer scenarios</span></span>

<span data-ttu-id="e72ad-200">[Middleware integrace služby IIS](#enable-the-iisintegration-components), který konfiguruje middleware předávaných záhlaví a ASP.NET základní modul, jsou nakonfigurovány tak, aby předávaly schéma (HTTP/HTTPS) a vzdálenou adresu IP, ze které požadavek pochází.</span><span class="sxs-lookup"><span data-stu-id="e72ad-200">The [IIS Integration Middleware](#enable-the-iisintegration-components), which configures Forwarded Headers Middleware, and the ASP.NET Core Module are configured to forward the scheme (HTTP/HTTPS) and the remote IP address where the request originated.</span></span> <span data-ttu-id="e72ad-201">Další konfigurace může být vyžadována pro aplikace hostované za dalšími proxy servery a nástroji pro vyrovnávání zatížení.</span><span class="sxs-lookup"><span data-stu-id="e72ad-201">Additional configuration might be required for apps hosted behind additional proxy servers and load balancers.</span></span> <span data-ttu-id="e72ad-202">Další informace naleznete v [tématu Configure ASP.NET Core to work with proxy servers and load balancers](xref:host-and-deploy/proxy-load-balancer).</span><span class="sxs-lookup"><span data-stu-id="e72ad-202">For more information, see [Configure ASP.NET Core to work with proxy servers and load balancers](xref:host-and-deploy/proxy-load-balancer).</span></span>

### <a name="webconfig-file"></a><span data-ttu-id="e72ad-203">soubor web.config</span><span class="sxs-lookup"><span data-stu-id="e72ad-203">web.config file</span></span>

<span data-ttu-id="e72ad-204">Soubor *web.config* konfiguruje [základní modul ASP.NET](xref:host-and-deploy/aspnet-core-module).</span><span class="sxs-lookup"><span data-stu-id="e72ad-204">The *web.config* file configures the [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module).</span></span> <span data-ttu-id="e72ad-205">Při publikování projektu je vytváření, transformace a publikování souboru *web.config* zpracováno cílem MSBuild (`_TransformWebConfig`).</span><span class="sxs-lookup"><span data-stu-id="e72ad-205">Creating, transforming, and publishing the *web.config* file is handled by an MSBuild target (`_TransformWebConfig`) when the project is published.</span></span> <span data-ttu-id="e72ad-206">Tento cíl je k dispozici v`Microsoft.NET.Sdk.Web`cílech sady Web SDK ( ).</span><span class="sxs-lookup"><span data-stu-id="e72ad-206">This target is present in the Web SDK targets (`Microsoft.NET.Sdk.Web`).</span></span> <span data-ttu-id="e72ad-207">Sada SDK je nastavena v horní části souboru projektu:</span><span class="sxs-lookup"><span data-stu-id="e72ad-207">The SDK is set at the top of the project file:</span></span>

```xml
<Project Sdk="Microsoft.NET.Sdk.Web">
```

<span data-ttu-id="e72ad-208">Pokud soubor *web.config* není v projektu přítomen, je soubor vytvořen se správnou *processPath* a *argumenty* pro konfiguraci ASP.NET základnímodul a přesunutna do [publikovaného výstupu](xref:host-and-deploy/directory-structure).</span><span class="sxs-lookup"><span data-stu-id="e72ad-208">If a *web.config* file isn't present in the project, the file is created with the correct *processPath* and *arguments* to configure the ASP.NET Core Module and moved to [published output](xref:host-and-deploy/directory-structure).</span></span>

<span data-ttu-id="e72ad-209">Pokud *web.config* soubor je přítomen v projektu, soubor je transformován se správným *processPath* a *argumenty* pro konfiguraci ASP.NET core modul a přesunuta do publikovaného výstupu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-209">If a *web.config* file is present in the project, the file is transformed with the correct *processPath* and *arguments* to configure the ASP.NET Core Module and moved to published output.</span></span> <span data-ttu-id="e72ad-210">Transformace nezmění nastavení konfigurace služby IIS v souboru.</span><span class="sxs-lookup"><span data-stu-id="e72ad-210">The transformation doesn't modify IIS configuration settings in the file.</span></span>

<span data-ttu-id="e72ad-211">Soubor *web.config* může poskytovat další nastavení konfigurace služby IIS, která řídí aktivní moduly služby IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-211">The *web.config* file may provide additional IIS configuration settings that control active IIS modules.</span></span> <span data-ttu-id="e72ad-212">Informace o modulech služby IIS, které jsou schopné zpracovávat požadavky pomocí aplikací ASP.NET Core, naleznete v tématu [modulů služby IIS.](xref:host-and-deploy/iis/modules)</span><span class="sxs-lookup"><span data-stu-id="e72ad-212">For information on IIS modules that are capable of processing requests with ASP.NET Core apps, see the [IIS modules](xref:host-and-deploy/iis/modules) topic.</span></span>

<span data-ttu-id="e72ad-213">Chcete-li zabránit webové sady SDK v transformaci souboru *web.config,* použijte vlastnost \*\* \<IsTransformWebConfigDisabled>\*\* v souboru projektu:</span><span class="sxs-lookup"><span data-stu-id="e72ad-213">To prevent the Web SDK from transforming the *web.config* file, use the **\<IsTransformWebConfigDisabled>** property in the project file:</span></span>

```xml
<PropertyGroup>
  <IsTransformWebConfigDisabled>true</IsTransformWebConfigDisabled>
</PropertyGroup>
```

<span data-ttu-id="e72ad-214">Při zakázání webové sady SDK z transformace souboru *processPath* a argumenty by měly být ručně *nastaveny* vývojářem.</span><span class="sxs-lookup"><span data-stu-id="e72ad-214">When disabling the Web SDK from transforming the file, the *processPath* and *arguments* should be manually set by the developer.</span></span> <span data-ttu-id="e72ad-215">Další informace naleznete v tématu <xref:host-and-deploy/aspnet-core-module>.</span><span class="sxs-lookup"><span data-stu-id="e72ad-215">For more information, see <xref:host-and-deploy/aspnet-core-module>.</span></span>

### <a name="webconfig-file-location"></a><span data-ttu-id="e72ad-216">umístění souboru web.config</span><span class="sxs-lookup"><span data-stu-id="e72ad-216">web.config file location</span></span>

<span data-ttu-id="e72ad-217">Aby bylo možné správně nastavit [ASP.NET core modul,](xref:host-and-deploy/aspnet-core-module) musí být soubor *web.config* přítomen na [cestě kořenového obsahu](xref:fundamentals/index#content-root) (obvykle základní cesta aplikace) nasazené aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-217">In order to set up the [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module) correctly, the *web.config* file must be present at the [content root](xref:fundamentals/index#content-root) path (typically the app base path) of the deployed app.</span></span> <span data-ttu-id="e72ad-218">Jedná se o stejné umístění jako fyzická cesta k webu poskytnutá službu IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-218">This is the same location as the website physical path provided to IIS.</span></span> <span data-ttu-id="e72ad-219">Soubor *web.config* je vyžadován v kořenovém adresáři aplikace, aby bylo možné publikovat více aplikací pomocí nasazení webu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-219">The *web.config* file is required at the root of the app to enable the publishing of multiple apps using Web Deploy.</span></span>

<span data-ttu-id="e72ad-220">Na fyzické cestě aplikace existují citlivé soubory, například \* \<assembly>.runtimeconfig.json*, \* \<assembly>.xml* (komentáře xml documentation) a \* \<assembly>.deps.json\*.</span><span class="sxs-lookup"><span data-stu-id="e72ad-220">Sensitive files exist on the app's physical path, such as *\<assembly>.runtimeconfig.json*, *\<assembly>.xml* (XML Documentation comments), and *\<assembly>.deps.json*.</span></span> <span data-ttu-id="e72ad-221">Pokud je soubor *web.config* přítomen a web se spustí normálně, služby IIS tyto citlivé soubory neobsluhuje, pokud jsou požadovány.</span><span class="sxs-lookup"><span data-stu-id="e72ad-221">When the *web.config* file is present and the site starts normally, IIS doesn't serve these sensitive files if they're requested.</span></span> <span data-ttu-id="e72ad-222">Pokud soubor *web.config* chybí, je nesprávně pojmenován nebo jej nelze nakonfigurovat pro normální spuštění, může služba IIS veřejně sloužit citlivým souborům.</span><span class="sxs-lookup"><span data-stu-id="e72ad-222">If the *web.config* file is missing, incorrectly named, or unable to configure the site for normal startup, IIS may serve sensitive files publicly.</span></span>

<span data-ttu-id="e72ad-223">**Soubor *web.config* musí být v nasazení vždy přítomen, správně pojmenovaný a musí být schopen nakonfigurovat web pro normální spuštění. Nikdy neodstraňujte soubor *web.config* z produkčního nasazení.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-223">**The *web.config* file must be present in the deployment at all times, correctly named, and able to configure the site for normal start up. Never remove the *web.config* file from a production deployment.**</span></span>

### <a name="transform-webconfig"></a><span data-ttu-id="e72ad-224">Transformace souboru web.config</span><span class="sxs-lookup"><span data-stu-id="e72ad-224">Transform web.config</span></span>

<span data-ttu-id="e72ad-225">Pokud potřebujete transformovat *web.config* při publikování (například nastavit proměnné prostředí na základě konfigurace, profilu nebo prostředí), přečtěte si viz <xref:host-and-deploy/iis/transform-webconfig>.</span><span class="sxs-lookup"><span data-stu-id="e72ad-225">If you need to transform *web.config* on publish (for example, set environment variables based on the configuration, profile, or environment), see <xref:host-and-deploy/iis/transform-webconfig>.</span></span>

## <a name="iis-configuration"></a><span data-ttu-id="e72ad-226">Konfigurace služby IIS</span><span class="sxs-lookup"><span data-stu-id="e72ad-226">IIS configuration</span></span>

<span data-ttu-id="e72ad-227">**Operační systémy Windows Server**</span><span class="sxs-lookup"><span data-stu-id="e72ad-227">**Windows Server operating systems**</span></span>

<span data-ttu-id="e72ad-228">Povolte roli serveru **webového serveru (IIS)** a vytvořte služby rolí.</span><span class="sxs-lookup"><span data-stu-id="e72ad-228">Enable the **Web Server (IIS)** server role and establish role services.</span></span>

1. <span data-ttu-id="e72ad-229">Použijte Průvodce **přidáním rolí a funkcí** z nabídky **Spravovat** nebo odkaz ve **Správci serveru**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-229">Use the **Add Roles and Features** wizard from the **Manage** menu or the link in **Server Manager**.</span></span> <span data-ttu-id="e72ad-230">V kroku **Role serveru** zaškrtněte políčko **U webového serveru (IIS).**</span><span class="sxs-lookup"><span data-stu-id="e72ad-230">On the **Server Roles** step, check the box for **Web Server (IIS)**.</span></span>

   ![Role služby IIS webového serveru je vybrána v kroku Vybrat role serveru.](index/_static/server-roles-ws2016.png)

1. <span data-ttu-id="e72ad-232">Po kroku **Funkce** se krok **služby role** načte pro webový server (IIS).</span><span class="sxs-lookup"><span data-stu-id="e72ad-232">After the **Features** step, the **Role services** step loads for Web Server (IIS).</span></span> <span data-ttu-id="e72ad-233">Vyberte požadované služby rolí služby IIS nebo přijměte výchozí služby rolí, které jsou k dispozici.</span><span class="sxs-lookup"><span data-stu-id="e72ad-233">Select the IIS role services desired or accept the default role services provided.</span></span>

   ![Výchozí služby rolí jsou vybrány v kroku Vybrat služby rolí.](index/_static/role-services-ws2016.png)

   <span data-ttu-id="e72ad-235">**Ověřování systému Windows (volitelné)**</span><span class="sxs-lookup"><span data-stu-id="e72ad-235">**Windows Authentication (Optional)**</span></span>  
   <span data-ttu-id="e72ad-236">Chcete-li povolit ověřování systému Windows, rozbalte následující uzly:**Zabezpečení** **webového serveru** > .</span><span class="sxs-lookup"><span data-stu-id="e72ad-236">To enable Windows Authentication, expand the following nodes: **Web Server** > **Security**.</span></span> <span data-ttu-id="e72ad-237">Vyberte funkci **Ověřování systému Windows.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-237">Select the **Windows Authentication** feature.</span></span> <span data-ttu-id="e72ad-238">Další informace naleznete v [tématech Ověřování \<systému Windows windowsAuthentication>](/iis/configuration/system.webServer/security/authentication/windowsAuthentication/) a Konfigurace ověřování [systému Windows](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="e72ad-238">For more information, see [Windows Authentication \<windowsAuthentication>](/iis/configuration/system.webServer/security/authentication/windowsAuthentication/) and [Configure Windows authentication](xref:security/authentication/windowsauth).</span></span>

   <span data-ttu-id="e72ad-239">**WebSockets (volitelné)**</span><span class="sxs-lookup"><span data-stu-id="e72ad-239">**WebSockets (Optional)**</span></span>  
   <span data-ttu-id="e72ad-240">WebSockets je podporován ASP.NET jádrem 1.1 nebo novějším.</span><span class="sxs-lookup"><span data-stu-id="e72ad-240">WebSockets is supported with ASP.NET Core 1.1 or later.</span></span> <span data-ttu-id="e72ad-241">Chcete-li povolit rozhraní WebSockets, rozbalte následující uzly:**Vývoj aplikací webového** **serveru** > .</span><span class="sxs-lookup"><span data-stu-id="e72ad-241">To enable WebSockets, expand the following nodes: **Web Server** > **Application Development**.</span></span> <span data-ttu-id="e72ad-242">Vyberte funkci **WebSocket Protocol.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-242">Select the **WebSocket Protocol** feature.</span></span> <span data-ttu-id="e72ad-243">Další informace naleznete v tématu [WebSockets](xref:fundamentals/websockets).</span><span class="sxs-lookup"><span data-stu-id="e72ad-243">For more information, see [WebSockets](xref:fundamentals/websockets).</span></span>

1. <span data-ttu-id="e72ad-244">Pokračujte v **potvrzovacím** kroku a nainstalujte roli a služby webového serveru.</span><span class="sxs-lookup"><span data-stu-id="e72ad-244">Proceed through the **Confirmation** step to install the web server role and services.</span></span> <span data-ttu-id="e72ad-245">Po instalaci role **webového serveru (IIS)** není restartování serveru nebo služby IIS vyžadováno.</span><span class="sxs-lookup"><span data-stu-id="e72ad-245">A server/IIS restart isn't required after installing the **Web Server (IIS)** role.</span></span>

<span data-ttu-id="e72ad-246">**Desktopové operační systémy Windows**</span><span class="sxs-lookup"><span data-stu-id="e72ad-246">**Windows desktop operating systems**</span></span>

<span data-ttu-id="e72ad-247">Povolte **konzolu pro správu služby IIS** a **služby World Wide Web Services**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-247">Enable the **IIS Management Console** and **World Wide Web Services**.</span></span>

1. <span data-ttu-id="e72ad-248">Přejděte na **Ovládací panely** > **Programy** > **a funkce** > **Zapněte nebo vypněte funkce systému Windows** (levá strana obrazovky).</span><span class="sxs-lookup"><span data-stu-id="e72ad-248">Navigate to **Control Panel** > **Programs** > **Programs and Features** > **Turn Windows features on or off** (left side of the screen).</span></span>

1. <span data-ttu-id="e72ad-249">Otevřete uzel **Internetové informační služby.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-249">Open the **Internet Information Services** node.</span></span> <span data-ttu-id="e72ad-250">Otevřete uzel **Nástroje pro správu webu.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-250">Open the **Web Management Tools** node.</span></span>

1. <span data-ttu-id="e72ad-251">Zaškrtněte políčko **U konzole pro správu služby IIS**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-251">Check the box for **IIS Management Console**.</span></span>

1. <span data-ttu-id="e72ad-252">Zaškrtněte políčko **U služeb World Wide Web Services**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-252">Check the box for **World Wide Web Services**.</span></span>

1. <span data-ttu-id="e72ad-253">Přijměte výchozí funkce **pro služby World Wide Web Services** nebo upravte funkce služby IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-253">Accept the default features for **World Wide Web Services** or customize the IIS features.</span></span>

   <span data-ttu-id="e72ad-254">**Ověřování systému Windows (volitelné)**</span><span class="sxs-lookup"><span data-stu-id="e72ad-254">**Windows Authentication (Optional)**</span></span>  
   <span data-ttu-id="e72ad-255">Chcete-li povolit ověřování systému Windows, rozbalte následující uzly: **World Wide Web Services** > **Security**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-255">To enable Windows Authentication, expand the following nodes: **World Wide Web Services** > **Security**.</span></span> <span data-ttu-id="e72ad-256">Vyberte funkci **Ověřování systému Windows.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-256">Select the **Windows Authentication** feature.</span></span> <span data-ttu-id="e72ad-257">Další informace naleznete v [tématech Ověřování \<systému Windows windowsAuthentication>](/iis/configuration/system.webServer/security/authentication/windowsAuthentication/) a Konfigurace ověřování [systému Windows](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="e72ad-257">For more information, see [Windows Authentication \<windowsAuthentication>](/iis/configuration/system.webServer/security/authentication/windowsAuthentication/) and [Configure Windows authentication](xref:security/authentication/windowsauth).</span></span>

   <span data-ttu-id="e72ad-258">**WebSockets (volitelné)**</span><span class="sxs-lookup"><span data-stu-id="e72ad-258">**WebSockets (Optional)**</span></span>  
   <span data-ttu-id="e72ad-259">WebSockets je podporován ASP.NET jádrem 1.1 nebo novějším.</span><span class="sxs-lookup"><span data-stu-id="e72ad-259">WebSockets is supported with ASP.NET Core 1.1 or later.</span></span> <span data-ttu-id="e72ad-260">Chcete-li povolit rozhraní WebSockets, rozbalte následující uzly: Funkce**vývoje aplikací**pro **webové služby** > .</span><span class="sxs-lookup"><span data-stu-id="e72ad-260">To enable WebSockets, expand the following nodes: **World Wide Web Services** > **Application Development Features**.</span></span> <span data-ttu-id="e72ad-261">Vyberte funkci **WebSocket Protocol.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-261">Select the **WebSocket Protocol** feature.</span></span> <span data-ttu-id="e72ad-262">Další informace naleznete v tématu [WebSockets](xref:fundamentals/websockets).</span><span class="sxs-lookup"><span data-stu-id="e72ad-262">For more information, see [WebSockets](xref:fundamentals/websockets).</span></span>

1. <span data-ttu-id="e72ad-263">Pokud instalace služby IIS vyžaduje restartování, restartujte systém.</span><span class="sxs-lookup"><span data-stu-id="e72ad-263">If the IIS installation requires a restart, restart the system.</span></span>

![V funkcích systému Windows jsou vybrány konzoly IIS Management Console a služby World Wide Web Services.](index/_static/windows-features-win10.png)

## <a name="install-the-net-core-hosting-bundle"></a><span data-ttu-id="e72ad-265">Instalace balíčku hostingu jádra .NET</span><span class="sxs-lookup"><span data-stu-id="e72ad-265">Install the .NET Core Hosting Bundle</span></span>

<span data-ttu-id="e72ad-266">Nainstalujte *balíček .NET Core Hosting do* hostitelského systému.</span><span class="sxs-lookup"><span data-stu-id="e72ad-266">Install the *.NET Core Hosting Bundle* on the hosting system.</span></span> <span data-ttu-id="e72ad-267">Balíček nainstaluje modul .NET Core Runtime, knihovnu .NET Core Library a [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module).</span><span class="sxs-lookup"><span data-stu-id="e72ad-267">The bundle installs the .NET Core Runtime, .NET Core Library, and the [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module).</span></span> <span data-ttu-id="e72ad-268">Modul umožňuje ASP.NET aplikace Core běžet za službou IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-268">The module allows ASP.NET Core apps to run behind IIS.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="e72ad-269">Pokud je sada Hosting Bundle nainstalována před službou IIS, musí být instalace balíčku opravena.</span><span class="sxs-lookup"><span data-stu-id="e72ad-269">If the Hosting Bundle is installed before IIS, the bundle installation must be repaired.</span></span> <span data-ttu-id="e72ad-270">Po instalaci služby IIS znovu spusťte instalační program sady Hosting Bundle.</span><span class="sxs-lookup"><span data-stu-id="e72ad-270">Run the Hosting Bundle installer again after installing IIS.</span></span>
>
> <span data-ttu-id="e72ad-271">Pokud je sada Hosting Bundle nainstalována po instalaci 64bitové (x64) verze rozhraní .NET Core, mohou se zdát, že sady SDK chybí ([byly zjištěny sady SDK .Net Core .](xref:test/troubleshoot#no-net-core-sdks-were-detected)</span><span class="sxs-lookup"><span data-stu-id="e72ad-271">If the Hosting Bundle is installed after installing the 64-bit (x64) version of .NET Core, SDKs might appear to be missing ([No .NET Core SDKs were detected](xref:test/troubleshoot#no-net-core-sdks-were-detected)).</span></span> <span data-ttu-id="e72ad-272">Chcete-li problém <xref:test/troubleshoot#missing-sdk-after-installing-the-net-core-hosting-bundle>vyřešit, naleznete v tématu .</span><span class="sxs-lookup"><span data-stu-id="e72ad-272">To resolve the problem, see <xref:test/troubleshoot#missing-sdk-after-installing-the-net-core-hosting-bundle>.</span></span>

### <a name="direct-download-current-version"></a><span data-ttu-id="e72ad-273">Přímé stahování (aktuální verze)</span><span class="sxs-lookup"><span data-stu-id="e72ad-273">Direct download (current version)</span></span>

<span data-ttu-id="e72ad-274">Stáhněte si instalační program pomocí následujícího odkazu:</span><span class="sxs-lookup"><span data-stu-id="e72ad-274">Download the installer using the following link:</span></span>

[<span data-ttu-id="e72ad-275">Aktuální instalační program .NET Core Hosting Bundle (přímé stahování)</span><span class="sxs-lookup"><span data-stu-id="e72ad-275">Current .NET Core Hosting Bundle installer (direct download)</span></span>](https://dotnet.microsoft.com/permalink/dotnetcore-current-windows-runtime-bundle-installer)

### <a name="earlier-versions-of-the-installer"></a><span data-ttu-id="e72ad-276">Dřívější verze instalačního programu</span><span class="sxs-lookup"><span data-stu-id="e72ad-276">Earlier versions of the installer</span></span>

<span data-ttu-id="e72ad-277">Chcete-li získat starší verzi instalačního programu:</span><span class="sxs-lookup"><span data-stu-id="e72ad-277">To obtain an earlier version of the installer:</span></span>

1. <span data-ttu-id="e72ad-278">Přejděte na stránku [Stáhnout jádro rozhraní .NET.](https://dotnet.microsoft.com/download/dotnet-core)</span><span class="sxs-lookup"><span data-stu-id="e72ad-278">Navigate to the [Download .NET Core](https://dotnet.microsoft.com/download/dotnet-core) page.</span></span>
1. <span data-ttu-id="e72ad-279">Klikněte na požadovanou verzi .NET Core.</span><span class="sxs-lookup"><span data-stu-id="e72ad-279">Click on the desired .NET Core version.</span></span>
1. <span data-ttu-id="e72ad-280">Ve sloupci **Spustit aplikace – runtime** najděte požadovaný řádek požadované verze runtime .NET Core.</span><span class="sxs-lookup"><span data-stu-id="e72ad-280">In the **Run apps - Runtime** column, find the row of the .NET Core runtime version desired.</span></span>
1. <span data-ttu-id="e72ad-281">Stáhněte si instalační program pomocí odkazu **Runtime & Hosting Bundle.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-281">Download the installer using the **Runtime & Hosting Bundle** link.</span></span>

> [!WARNING]
> <span data-ttu-id="e72ad-282">Některé instalační programy obsahují verze, které dosáhly konce životnosti (EOL) a které již nejsou podporovány společností Microsoft.</span><span class="sxs-lookup"><span data-stu-id="e72ad-282">Some installers contain release versions that have reached their end of life (EOL) and are no longer supported by Microsoft.</span></span> <span data-ttu-id="e72ad-283">Další informace naleznete v [zásadách podpory](https://dotnet.microsoft.com/platform/support/policy/dotnet-core).</span><span class="sxs-lookup"><span data-stu-id="e72ad-283">For more information, see the [support policy](https://dotnet.microsoft.com/platform/support/policy/dotnet-core).</span></span>

### <a name="install-the-hosting-bundle"></a><span data-ttu-id="e72ad-284">Nainstalujte balíček hostingu</span><span class="sxs-lookup"><span data-stu-id="e72ad-284">Install the Hosting Bundle</span></span>

1. <span data-ttu-id="e72ad-285">Spusťte instalační program na serveru.</span><span class="sxs-lookup"><span data-stu-id="e72ad-285">Run the installer on the server.</span></span> <span data-ttu-id="e72ad-286">Při spuštění instalačního programu z příkazového prostředí správce jsou k dispozici následující parametry:</span><span class="sxs-lookup"><span data-stu-id="e72ad-286">The following parameters are available when running the installer from an administrator command shell:</span></span>

   * <span data-ttu-id="e72ad-287">`OPT_NO_ANCM=1`&ndash; Přeskočte instalaci ASP.NET základního modulu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-287">`OPT_NO_ANCM=1` &ndash; Skip installing the ASP.NET Core Module.</span></span>
   * <span data-ttu-id="e72ad-288">`OPT_NO_RUNTIME=1`&ndash; Přeskočte instalaci runtime jádra .NET.</span><span class="sxs-lookup"><span data-stu-id="e72ad-288">`OPT_NO_RUNTIME=1` &ndash; Skip installing the .NET Core runtime.</span></span> <span data-ttu-id="e72ad-289">Používá se v případě, že server hostuje pouze [samostatná nasazení (SCD).](/dotnet/core/deploying/#self-contained-deployments-scd)</span><span class="sxs-lookup"><span data-stu-id="e72ad-289">Used when the server only hosts [self-contained deployments (SCD)](/dotnet/core/deploying/#self-contained-deployments-scd).</span></span>
   * <span data-ttu-id="e72ad-290">`OPT_NO_SHAREDFX=1`&ndash; Přeskočit instalaci ASP.NET sdíleného rozhraní (ASP.NET runtime).</span><span class="sxs-lookup"><span data-stu-id="e72ad-290">`OPT_NO_SHAREDFX=1` &ndash; Skip installing the ASP.NET Shared Framework (ASP.NET runtime).</span></span> <span data-ttu-id="e72ad-291">Používá se v případě, že server hostuje pouze [samostatná nasazení (SCD).](/dotnet/core/deploying/#self-contained-deployments-scd)</span><span class="sxs-lookup"><span data-stu-id="e72ad-291">Used when the server only hosts [self-contained deployments (SCD)](/dotnet/core/deploying/#self-contained-deployments-scd).</span></span>
   * <span data-ttu-id="e72ad-292">`OPT_NO_X86=1`&ndash; Přeskočit instalaci za běhu x86.</span><span class="sxs-lookup"><span data-stu-id="e72ad-292">`OPT_NO_X86=1` &ndash; Skip installing x86 runtimes.</span></span> <span data-ttu-id="e72ad-293">Tento parametr použijte, pokud víte, že nebudete hostovat 32bitové aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-293">Use this parameter when you know that you won't be hosting 32-bit apps.</span></span> <span data-ttu-id="e72ad-294">Pokud existuje nějaká šance, že budete v budoucnu hostovat 32bitové i 64bitové aplikace, nepoužívejte tento parametr a nainstalujte oba runtimes.</span><span class="sxs-lookup"><span data-stu-id="e72ad-294">If there's any chance that you will host both 32-bit and 64-bit apps in the future, don't use this parameter and install both runtimes.</span></span>
   * <span data-ttu-id="e72ad-295">`OPT_NO_SHARED_CONFIG_CHECK=1`&ndash; Zakažte kontrolu použití sdílené konfigurace služby IIS, pokud je sdílená konfigurace *(applicationHost.config)* ve stejném počítači jako instalace služby IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-295">`OPT_NO_SHARED_CONFIG_CHECK=1` &ndash; Disable the check for using an IIS Shared Configuration when the shared configuration (*applicationHost.config*) is on the same machine as the IIS installation.</span></span> <span data-ttu-id="e72ad-296">*K dispozici pouze pro ASP.NET instalačních programů hostingu Bundler nebo novějším.*</span><span class="sxs-lookup"><span data-stu-id="e72ad-296">*Only available for ASP.NET Core 2.2 or later Hosting Bundler installers.*</span></span> <span data-ttu-id="e72ad-297">Další informace naleznete v tématu <xref:host-and-deploy/aspnet-core-module#aspnet-core-module-with-an-iis-shared-configuration>.</span><span class="sxs-lookup"><span data-stu-id="e72ad-297">For more information, see <xref:host-and-deploy/aspnet-core-module#aspnet-core-module-with-an-iis-shared-configuration>.</span></span>
1. <span data-ttu-id="e72ad-298">Restartujte systém nebo proveďte následující příkazy v příkazovém prostředí:</span><span class="sxs-lookup"><span data-stu-id="e72ad-298">Restart the system or execute the following commands in a command shell:</span></span>

   ```console
   net stop was /y
   net start w3svc
   ```
   <span data-ttu-id="e72ad-299">Restartování služby IIS vyvolá změnu systémové cesty, což je proměnná prostředí provedená instalačním programem.</span><span class="sxs-lookup"><span data-stu-id="e72ad-299">Restarting IIS picks up a change to the system PATH, which is an environment variable, made by the installer.</span></span>

<span data-ttu-id="e72ad-300">ASP.NET Core nepřijímá chování pro převrácení pro verze oprav sdílených rámců.</span><span class="sxs-lookup"><span data-stu-id="e72ad-300">ASP.NET Core doesn't adopt roll-forward behavior for patch releases of shared framework packages.</span></span> <span data-ttu-id="e72ad-301">Po upgradu sdíleného frameworku instalací nového hostingového balíčku restartujte systém nebo spusťte následující příkazy v příkazovém prostředí:</span><span class="sxs-lookup"><span data-stu-id="e72ad-301">After upgrading the shared framework by installing a new hosting bundle, restart the system or execute the following commands in a command shell:</span></span>

```console
net stop was /y
net start w3svc
```

> [!NOTE]
> <span data-ttu-id="e72ad-302">Informace o sdílené konfiguraci služby IIS naleznete [v tématu ASP.NET Core Module se sdílenou konfigurací služby IIS](xref:host-and-deploy/aspnet-core-module#aspnet-core-module-with-an-iis-shared-configuration).</span><span class="sxs-lookup"><span data-stu-id="e72ad-302">For information on IIS Shared Configuration, see [ASP.NET Core Module with IIS Shared Configuration](xref:host-and-deploy/aspnet-core-module#aspnet-core-module-with-an-iis-shared-configuration).</span></span>

## <a name="install-web-deploy-when-publishing-with-visual-studio"></a><span data-ttu-id="e72ad-303">Instalace nasazení webu při publikování pomocí sady Visual Studio</span><span class="sxs-lookup"><span data-stu-id="e72ad-303">Install Web Deploy when publishing with Visual Studio</span></span>

<span data-ttu-id="e72ad-304">Při nasazování aplikací na servery s [nasazením webu](/iis/install/installing-publishing-technologies/installing-and-configuring-web-deploy-on-iis-80-or-later)nainstalujte na server nejnovější verzi nasazení webu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-304">When deploying apps to servers with [Web Deploy](/iis/install/installing-publishing-technologies/installing-and-configuring-web-deploy-on-iis-80-or-later), install the latest version of Web Deploy on the server.</span></span> <span data-ttu-id="e72ad-305">Chcete-li nainstalovat nasazení webu, použijte [Instalační službu webové platformy (WebPI)](https://www.microsoft.com/web/downloads/platform.aspx) nebo získejte instalační program přímo ze [služby Stažení softwaru](https://www.microsoft.com/download/details.aspx?id=43717).</span><span class="sxs-lookup"><span data-stu-id="e72ad-305">To install Web Deploy, use the [Web Platform Installer (WebPI)](https://www.microsoft.com/web/downloads/platform.aspx) or obtain an installer directly from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=43717).</span></span> <span data-ttu-id="e72ad-306">Upřednostňovanou metodou je použití webpi.</span><span class="sxs-lookup"><span data-stu-id="e72ad-306">The preferred method is to use WebPI.</span></span> <span data-ttu-id="e72ad-307">WebPI nabízí samostatné nastavení a konfiguraci pro poskytovatele hostingu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-307">WebPI offers a standalone setup and a configuration for hosting providers.</span></span>

## <a name="create-the-iis-site"></a><span data-ttu-id="e72ad-308">Vytvoření webu iis</span><span class="sxs-lookup"><span data-stu-id="e72ad-308">Create the IIS site</span></span>

1. <span data-ttu-id="e72ad-309">V hostitelském systému vytvořte složku, která bude obsahovat publikované složky a soubory aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-309">On the hosting system, create a folder to contain the app's published folders and files.</span></span> <span data-ttu-id="e72ad-310">V následujícím kroku je cesta ke složce k dispozici službu IIS jako fyzická cesta k aplikaci.</span><span class="sxs-lookup"><span data-stu-id="e72ad-310">In a following step, the folder's path is provided to IIS as the physical path to the app.</span></span> <span data-ttu-id="e72ad-311">Další informace o složce nasazení aplikace a <xref:host-and-deploy/directory-structure>rozložení souborů naleznete v tématu .</span><span class="sxs-lookup"><span data-stu-id="e72ad-311">For more information on an app's deployment folder and file layout, see <xref:host-and-deploy/directory-structure>.</span></span>

1. <span data-ttu-id="e72ad-312">Ve Správci služby IIS otevřete uzel serveru v panelu **Připojení.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-312">In IIS Manager, open the server's node in the **Connections** panel.</span></span> <span data-ttu-id="e72ad-313">Klikněte pravým tlačítkem myši na složku **Weby.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-313">Right-click the **Sites** folder.</span></span> <span data-ttu-id="e72ad-314">V kontextové nabídce vyberte **Přidat web.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-314">Select **Add Website** from the contextual menu.</span></span>

1. <span data-ttu-id="e72ad-315">Zadejte **název webu** a nastavte **fyzickou cestu** ke složce nasazení aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-315">Provide a **Site name** and set the **Physical path** to the app's deployment folder.</span></span> <span data-ttu-id="e72ad-316">Zadejte konfiguraci **vazby** a vytvořte web výběrem **možnosti OK**:</span><span class="sxs-lookup"><span data-stu-id="e72ad-316">Provide the **Binding** configuration and create the website by selecting **OK**:</span></span>

   ![V kroku Přidat web zadejte název webu, fyzickou cestu a název hostitele.](index/_static/add-website-ws2016.png)

   > [!WARNING]
   > <span data-ttu-id="e72ad-318">Vazby se zástupnými`http://*:80/` symboly nejvyšší úrovně ( a `http://+:80`) by **neměly** být používány.</span><span class="sxs-lookup"><span data-stu-id="e72ad-318">Top-level wildcard bindings (`http://*:80/` and `http://+:80`) should **not** be used.</span></span> <span data-ttu-id="e72ad-319">Vazby se zástupnými symboly nejvyšší úrovně mohou otevřít vaši aplikaci slabá místa zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="e72ad-319">Top-level wildcard bindings can open up your app to security vulnerabilities.</span></span> <span data-ttu-id="e72ad-320">To platí pro silné i slabé zástupné znaky.</span><span class="sxs-lookup"><span data-stu-id="e72ad-320">This applies to both strong and weak wildcards.</span></span> <span data-ttu-id="e72ad-321">Používejte explicitní názvy hostitelů místo zástupných znaků.</span><span class="sxs-lookup"><span data-stu-id="e72ad-321">Use explicit host names rather than wildcards.</span></span> <span data-ttu-id="e72ad-322">Vazba se zástupnými znaky subdomény (například) nemá toto bezpečnostní riziko, `*.mysub.com` `*.com`pokud řídíte celou nadřazenou doménu (na rozdíl od , která je zranitelná).</span><span class="sxs-lookup"><span data-stu-id="e72ad-322">Subdomain wildcard binding (for example, `*.mysub.com`) doesn't have this security risk if you control the entire parent domain (as opposed to `*.com`, which is vulnerable).</span></span> <span data-ttu-id="e72ad-323">Viz [rfc7230 sekce-5.4](https://tools.ietf.org/html/rfc7230#section-5.4) pro více informací.</span><span class="sxs-lookup"><span data-stu-id="e72ad-323">See [rfc7230 section-5.4](https://tools.ietf.org/html/rfc7230#section-5.4) for more information.</span></span>

1. <span data-ttu-id="e72ad-324">Pod uzlovým serverem vyberte **fondy aplikací**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-324">Under the server's node, select **Application Pools**.</span></span>

1. <span data-ttu-id="e72ad-325">Klikněte pravým tlačítkem myši na fond aplikací webu a v kontextové nabídce vyberte **Základní nastavení.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-325">Right-click the site's app pool and select **Basic Settings** from the contextual menu.</span></span>

1. <span data-ttu-id="e72ad-326">V okně **Upravit fond aplikací** nastavte verzi **.NET CLR** na **Žádný spravovaný kód**:</span><span class="sxs-lookup"><span data-stu-id="e72ad-326">In the **Edit Application Pool** window, set the **.NET CLR version** to **No Managed Code**:</span></span>

   ![Pro verzi CLR rozhraní .NET nenastavte žádný spravovaný kód.](index/_static/edit-apppool-ws2016.png)

    <span data-ttu-id="e72ad-328">ASP.NET Core běží v samostatném procesu a spravuje runtime.</span><span class="sxs-lookup"><span data-stu-id="e72ad-328">ASP.NET Core runs in a separate process and manages the runtime.</span></span> <span data-ttu-id="e72ad-329">ASP.NET Core nespoléhá na načtení plochy CLR (.NET CLR)&mdash;Core Common Language Runtime (CoreCLR) pro .NET Core je spuštěn pro hostování aplikace v pracovním procesu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-329">ASP.NET Core doesn't rely on loading the desktop CLR (.NET CLR)&mdash;the Core Common Language Runtime (CoreCLR) for .NET Core is booted to host the app in the worker process.</span></span> <span data-ttu-id="e72ad-330">Nastavení **verze .NET CLR** na **žádný spravovaný kód** je volitelné, ale doporučeno.</span><span class="sxs-lookup"><span data-stu-id="e72ad-330">Setting the **.NET CLR version** to **No Managed Code** is optional but recommended.</span></span>

1. <span data-ttu-id="e72ad-331">*ASP.NET jádra 2.2 nebo novějšího:* Pro 64bitové (x64) [samostatné nasazení,](/dotnet/core/deploying/#self-contained-deployments-scd) které používá [model hostování v procesu](#in-process-hosting-model), zakažte fond aplikací pro 32bitové (x86) procesy.</span><span class="sxs-lookup"><span data-stu-id="e72ad-331">*ASP.NET Core 2.2 or later*: For a 64-bit (x64) [self-contained deployment](/dotnet/core/deploying/#self-contained-deployments-scd) that uses the [in-process hosting model](#in-process-hosting-model), disable the app pool for 32-bit (x86) processes.</span></span>

   <span data-ttu-id="e72ad-332">V postranním panelu **Akce** správce služby IIS > **fondy aplikací**vyberte **možnost Nastavit výchozí nastavení fondu aplikací** nebo **Upřesnit nastavení**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-332">In the **Actions** sidebar of IIS Manager > **Application Pools**, select **Set Application Pool Defaults** or **Advanced Settings**.</span></span> <span data-ttu-id="e72ad-333">Vyhledejte **funkci Povolit 32bitové aplikace** a nastavte hodnotu na . `False`</span><span class="sxs-lookup"><span data-stu-id="e72ad-333">Locate **Enable 32-Bit Applications** and set the value to `False`.</span></span> <span data-ttu-id="e72ad-334">Toto nastavení nemá vliv na aplikace nasazené pro [mimoprocesový hosting](xref:host-and-deploy/aspnet-core-module#out-of-process-hosting-model).</span><span class="sxs-lookup"><span data-stu-id="e72ad-334">This setting doesn't affect apps deployed for [out-of-process hosting](xref:host-and-deploy/aspnet-core-module#out-of-process-hosting-model).</span></span>

1. <span data-ttu-id="e72ad-335">Potvrďte, že identita modelu procesu má správná oprávnění.</span><span class="sxs-lookup"><span data-stu-id="e72ad-335">Confirm the process model identity has the proper permissions.</span></span>

   <span data-ttu-id="e72ad-336">Pokud se výchozí identita fondu aplikací **(identita\*\*\*\*procesního modelu** > ) změní z **ApplicationPoolIdentity** na jinou identitu, ověřte, zda nová identita má požadovaná oprávnění pro přístup ke složce, databázi a dalším požadovaným prostředkům aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-336">If the default identity of the app pool (**Process Model** > **Identity**) is changed from **ApplicationPoolIdentity** to another identity, verify that the new identity has the required permissions to access the app's folder, database, and other required resources.</span></span> <span data-ttu-id="e72ad-337">Fond aplikací například vyžaduje přístup pro čtení a zápis do složek, kde aplikace čte a zapisuje soubory.</span><span class="sxs-lookup"><span data-stu-id="e72ad-337">For example, the app pool requires read and write access to folders where the app reads and writes files.</span></span>

<span data-ttu-id="e72ad-338">**Konfigurace ověřování systému Windows (volitelná)**</span><span class="sxs-lookup"><span data-stu-id="e72ad-338">**Windows Authentication configuration (Optional)**</span></span>  
<span data-ttu-id="e72ad-339">Další informace naleznete v [tématu Configure Windows authentication](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="e72ad-339">For more information, see [Configure Windows authentication](xref:security/authentication/windowsauth).</span></span>

## <a name="deploy-the-app"></a><span data-ttu-id="e72ad-340">Nasazení aplikace</span><span class="sxs-lookup"><span data-stu-id="e72ad-340">Deploy the app</span></span>

<span data-ttu-id="e72ad-341">Nasaďte aplikaci do složky **Fyzické cesty** služby IIS, která byla vytvořena v části Vytvořit [web služby IIS.](#create-the-iis-site)</span><span class="sxs-lookup"><span data-stu-id="e72ad-341">Deploy the app to the IIS **Physical path** folder that was established in the [Create the IIS site](#create-the-iis-site) section.</span></span> <span data-ttu-id="e72ad-342">[Nasazení webu](/iis/publish/using-web-deploy/introduction-to-web-deploy) je doporučený mechanismus pro nasazení, ale existuje několik možností pro přesunutí aplikace ze složky *publikování* projektu do složky nasazení hostitelského systému.</span><span class="sxs-lookup"><span data-stu-id="e72ad-342">[Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy) is the recommended mechanism for deployment, but several options exist for moving the app from the project's *publish* folder to the hosting system's deployment folder.</span></span>

### <a name="web-deploy-with-visual-studio"></a><span data-ttu-id="e72ad-343">Nasazení webu pomocí sady Visual Studio</span><span class="sxs-lookup"><span data-stu-id="e72ad-343">Web Deploy with Visual Studio</span></span>

<span data-ttu-id="e72ad-344">Podívejte se na [profily publikování aplikace Visual Studio pro téma nasazení aplikace ASP.NET Core,](xref:host-and-deploy/visual-studio-publish-profiles#publish-profiles) kde se dozvíte, jak vytvořit profil publikování pro použití s nasazením webu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-344">See the [Visual Studio publish profiles for ASP.NET Core app deployment](xref:host-and-deploy/visual-studio-publish-profiles#publish-profiles) topic to learn how to create a publish profile for use with Web Deploy.</span></span> <span data-ttu-id="e72ad-345">Pokud poskytovatel hostingu poskytuje profil publikování nebo podporu pro jeho vytvoření, stáhněte si jeho profil a importujte jej pomocí dialogového okna **Publikovat** sady Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="e72ad-345">If the hosting provider provides a Publish Profile or support for creating one, download their profile and import it using the Visual Studio **Publish** dialog:</span></span>

![Stránka dialogového okna Publikovat](index/_static/pub-dialog.png)

### <a name="web-deploy-outside-of-visual-studio"></a><span data-ttu-id="e72ad-347">Nasazení webu mimo Visual Studio</span><span class="sxs-lookup"><span data-stu-id="e72ad-347">Web Deploy outside of Visual Studio</span></span>

<span data-ttu-id="e72ad-348">[Nasazení webu](/iis/publish/using-web-deploy/introduction-to-web-deploy) lze také použít mimo Visual Studio z příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="e72ad-348">[Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy) can also be used outside of Visual Studio from the command line.</span></span> <span data-ttu-id="e72ad-349">Další informace naleznete v [tématu Web Deployment Tool](/iis/publish/using-web-deploy/use-the-web-deployment-tool).</span><span class="sxs-lookup"><span data-stu-id="e72ad-349">For more information, see [Web Deployment Tool](/iis/publish/using-web-deploy/use-the-web-deployment-tool).</span></span>

### <a name="alternatives-to-web-deploy"></a><span data-ttu-id="e72ad-350">Alternativy k nasazení webu</span><span class="sxs-lookup"><span data-stu-id="e72ad-350">Alternatives to Web Deploy</span></span>

<span data-ttu-id="e72ad-351">Pomocí některé z několika metod přesuňte aplikaci do hostitelského systému, jako je ruční kopírování, [Xcopy](/windows-server/administration/windows-commands/xcopy), [Robocopy](/windows-server/administration/windows-commands/robocopy)nebo [PowerShell](/powershell/).</span><span class="sxs-lookup"><span data-stu-id="e72ad-351">Use any of several methods to move the app to the hosting system, such as manual copy, [Xcopy](/windows-server/administration/windows-commands/xcopy), [Robocopy](/windows-server/administration/windows-commands/robocopy), or [PowerShell](/powershell/).</span></span>

<span data-ttu-id="e72ad-352">Další informace o ASP.NET nasazení jádra do služby IIS naleznete v části [Prostředky nasazení pro správce služby IIS.](#deployment-resources-for-iis-administrators)</span><span class="sxs-lookup"><span data-stu-id="e72ad-352">For more information on ASP.NET Core deployment to IIS, see the [Deployment resources for IIS administrators](#deployment-resources-for-iis-administrators) section.</span></span>

## <a name="browse-the-website"></a><span data-ttu-id="e72ad-353">Procházení webu</span><span class="sxs-lookup"><span data-stu-id="e72ad-353">Browse the website</span></span>

<span data-ttu-id="e72ad-354">Po nasazení aplikace do hostitelského systému požádejte o jeden z veřejných koncových bodů aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-354">After the app is deployed to the hosting system, make a request to one of the app's public endpoints.</span></span>

<span data-ttu-id="e72ad-355">V následujícím příkladu je web vázán na název `www.mysite.com` **hostitele** iis na **portu** `80`.</span><span class="sxs-lookup"><span data-stu-id="e72ad-355">In the following example, the site is bound to an IIS **Host name** of `www.mysite.com` on **Port** `80`.</span></span> <span data-ttu-id="e72ad-356">Žádost se podává `http://www.mysite.com`na :</span><span class="sxs-lookup"><span data-stu-id="e72ad-356">A request is made to `http://www.mysite.com`:</span></span>

![Prohlížeč Microsoft Edge načetl úvodní stránku služby IIS.](index/_static/browsewebsite.png)

## <a name="locked-deployment-files"></a><span data-ttu-id="e72ad-358">Uzamčené soubory nasazení</span><span class="sxs-lookup"><span data-stu-id="e72ad-358">Locked deployment files</span></span>

<span data-ttu-id="e72ad-359">Soubory ve složce nasazení jsou uzamčeny, když je aplikace spuštěná.</span><span class="sxs-lookup"><span data-stu-id="e72ad-359">Files in the deployment folder are locked when the app is running.</span></span> <span data-ttu-id="e72ad-360">Uzamčené soubory nelze během nasazení přepsat.</span><span class="sxs-lookup"><span data-stu-id="e72ad-360">Locked files can't be overwritten during deployment.</span></span> <span data-ttu-id="e72ad-361">Chcete-li uvolnit uzamčené soubory v nasazení, zastavte fond aplikací pomocí **jednoho z** následujících přístupů:</span><span class="sxs-lookup"><span data-stu-id="e72ad-361">To release locked files in a deployment, stop the app pool using **one** of the following approaches:</span></span>

* <span data-ttu-id="e72ad-362">Použijte nasazení webu `Microsoft.NET.Sdk.Web` a odkaz v souboru projektu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-362">Use Web Deploy and reference `Microsoft.NET.Sdk.Web` in the project file.</span></span> <span data-ttu-id="e72ad-363">Soubor *app_offline.htm* je umístěn v kořenovém adresáři webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-363">An *app_offline.htm* file is placed at the root of the web app directory.</span></span> <span data-ttu-id="e72ad-364">Když je soubor k dispozici, ASP.NET základní modul řádně vypne aplikaci a slouží *souboru app_offline.htm* během nasazení.</span><span class="sxs-lookup"><span data-stu-id="e72ad-364">When the file is present, the ASP.NET Core Module gracefully shuts down the app and serves the *app_offline.htm* file during the deployment.</span></span> <span data-ttu-id="e72ad-365">Další informace naleznete v [odkazu na konfiguraci ASP.NET core modulem](xref:host-and-deploy/aspnet-core-module#app_offlinehtm).</span><span class="sxs-lookup"><span data-stu-id="e72ad-365">For more information, see the [ASP.NET Core Module configuration reference](xref:host-and-deploy/aspnet-core-module#app_offlinehtm).</span></span>
* <span data-ttu-id="e72ad-366">Ručně zastavit fond aplikací ve Správci služby IIS na serveru.</span><span class="sxs-lookup"><span data-stu-id="e72ad-366">Manually stop the app pool in the IIS Manager on the server.</span></span>
* <span data-ttu-id="e72ad-367">Použití Prostředí PowerShell k přetažení *app_offline.htm* (vyžaduje PowerShell 5 nebo novější):</span><span class="sxs-lookup"><span data-stu-id="e72ad-367">Use PowerShell to drop *app_offline.htm* (requires PowerShell 5 or later):</span></span>

  ```powershell
  $pathToApp = 'PATH_TO_APP'

  # Stop the AppPool
  New-Item -Path $pathToApp app_offline.htm

  # Provide script commands here to deploy the app

  # Restart the AppPool
  Remove-Item -Path $pathToApp app_offline.htm

  ```

## <a name="data-protection"></a><span data-ttu-id="e72ad-368">Ochrana dat</span><span class="sxs-lookup"><span data-stu-id="e72ad-368">Data protection</span></span>

<span data-ttu-id="e72ad-369">Zásobník [ASP.NET Core Data Protection](xref:security/data-protection/introduction) používá několik [middlewares](xref:fundamentals/middleware/index)ASP.NET Core , včetně middlewaru používaného při ověřování.</span><span class="sxs-lookup"><span data-stu-id="e72ad-369">The [ASP.NET Core Data Protection stack](xref:security/data-protection/introduction) is used by several ASP.NET Core [middlewares](xref:fundamentals/middleware/index), including middleware used in authentication.</span></span> <span data-ttu-id="e72ad-370">I v případě, že rozhraní API ochrany dat nejsou volána uživatelským kódem, ochrana dat by měla být nakonfigurována pomocí skriptu nasazení nebo v uživatelském kódu, aby se vytvořilo trvalé úložiště kryptografických [klíčů](xref:security/data-protection/implementation/key-management).</span><span class="sxs-lookup"><span data-stu-id="e72ad-370">Even if Data Protection APIs aren't called by user code, data protection should be configured with a deployment script or in user code to create a persistent cryptographic [key store](xref:security/data-protection/implementation/key-management).</span></span> <span data-ttu-id="e72ad-371">Pokud ochrana dat není nakonfigurována, klíče jsou uloženy v paměti a po restartování aplikace zahozeny.</span><span class="sxs-lookup"><span data-stu-id="e72ad-371">If data protection isn't configured, the keys are held in memory and discarded when the app restarts.</span></span>

<span data-ttu-id="e72ad-372">Pokud je kroužek klíče uložen v paměti při restartování aplikace:</span><span class="sxs-lookup"><span data-stu-id="e72ad-372">If the key ring is stored in memory when the app restarts:</span></span>

* <span data-ttu-id="e72ad-373">Všechny ověřovací tokeny založené na souborech cookie jsou zrušeny.</span><span class="sxs-lookup"><span data-stu-id="e72ad-373">All cookie-based authentication tokens are invalidated.</span></span> 
* <span data-ttu-id="e72ad-374">Uživatelé se musí znovu přihlásit při dalším požadavku.</span><span class="sxs-lookup"><span data-stu-id="e72ad-374">Users are required to sign in again on their next request.</span></span> 
* <span data-ttu-id="e72ad-375">Všechna data chráněná kroužkem klíče již nelze dešifrovat.</span><span class="sxs-lookup"><span data-stu-id="e72ad-375">Any data protected with the key ring can no longer be decrypted.</span></span> <span data-ttu-id="e72ad-376">To může zahrnovat [tokeny CSRF](xref:security/anti-request-forgery#aspnet-core-antiforgery-configuration) a [ASP.NET základní soubory cookie MVC TempData](xref:fundamentals/app-state#tempdata).</span><span class="sxs-lookup"><span data-stu-id="e72ad-376">This may include [CSRF tokens](xref:security/anti-request-forgery#aspnet-core-antiforgery-configuration) and [ASP.NET Core MVC TempData cookies](xref:fundamentals/app-state#tempdata).</span></span>

<span data-ttu-id="e72ad-377">Chcete-li nakonfigurovat ochranu dat ve službě IIS tak, aby zachycovací byl kroužek klíče, použijte **jeden** z následujících postupů:</span><span class="sxs-lookup"><span data-stu-id="e72ad-377">To configure data protection under IIS to persist the key ring, use **one** of the following approaches:</span></span>

* <span data-ttu-id="e72ad-378">**Vytvoření klíčů registru ochrany dat**</span><span class="sxs-lookup"><span data-stu-id="e72ad-378">**Create Data Protection Registry Keys**</span></span>

  <span data-ttu-id="e72ad-379">Klíče ochrany dat používané ASP.NET aplikace Core jsou uloženy v registru mimo aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-379">Data protection keys used by ASP.NET Core apps are stored in the registry external to the apps.</span></span> <span data-ttu-id="e72ad-380">Chcete-li zachovat klíče pro danou aplikaci, vytvořte klíče registru pro fond aplikací.</span><span class="sxs-lookup"><span data-stu-id="e72ad-380">To persist the keys for a given app, create registry keys for the app pool.</span></span>

  <span data-ttu-id="e72ad-381">Pro samostatné instalace služby IIS mimo webfarmu lze [skript prostředí PowerShell Pro poskytování ochrany dat-AutoGenKeys.ps1](https://github.com/dotnet/AspNetCore/blob/master/src/DataProtection/Provision-AutoGenKeys.ps1) použít pro každý fond aplikací používaný s aplikací ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="e72ad-381">For standalone, non-webfarm IIS installations, the [Data Protection Provision-AutoGenKeys.ps1 PowerShell script](https://github.com/dotnet/AspNetCore/blob/master/src/DataProtection/Provision-AutoGenKeys.ps1) can be used for each app pool used with an ASP.NET Core app.</span></span> <span data-ttu-id="e72ad-382">Tento skript vytvoří klíč registru v registru HKLM, který je přístupný pouze pro účet pracovního procesu fondu aplikací.</span><span class="sxs-lookup"><span data-stu-id="e72ad-382">This script creates a registry key in the HKLM registry that's accessible only to the worker process account of the app's app pool.</span></span> <span data-ttu-id="e72ad-383">Klíče jsou šifrovány v klidovém stavu pomocí dpapi s klíčem pro celý počítač.</span><span class="sxs-lookup"><span data-stu-id="e72ad-383">Keys are encrypted at rest using DPAPI with a machine-wide key.</span></span>

  <span data-ttu-id="e72ad-384">Ve scénářích webové farmy lze aplikaci nakonfigurovat tak, aby k ukládání kroužku klíčů pro ochranu dat používala cestu UNC.</span><span class="sxs-lookup"><span data-stu-id="e72ad-384">In web farm scenarios, an app can be configured to use a UNC path to store its data protection key ring.</span></span> <span data-ttu-id="e72ad-385">Ve výchozím nastavení nejsou klíče ochrany dat šifrovány.</span><span class="sxs-lookup"><span data-stu-id="e72ad-385">By default, the data protection keys aren't encrypted.</span></span> <span data-ttu-id="e72ad-386">Ujistěte se, že oprávnění k souborům pro sdílenou síť ovou složku jsou omezena na účet Windows, pod kterým aplikace běží.</span><span class="sxs-lookup"><span data-stu-id="e72ad-386">Ensure that the file permissions for the network share are limited to the Windows account the app runs under.</span></span> <span data-ttu-id="e72ad-387">Certifikát X509 lze použít k ochraně klíčů v klidovém stavu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-387">An X509 certificate can be used to protect keys at rest.</span></span> <span data-ttu-id="e72ad-388">Zvažte mechanismus, který uživatelům umožní nahrávat certifikáty: Umístěte certifikáty do úložiště důvěryhodných certifikátů uživatele a ujistěte se, že jsou k dispozici na všech počítačích, kde je spuštěna aplikace uživatele.</span><span class="sxs-lookup"><span data-stu-id="e72ad-388">Consider a mechanism to allow users to upload certificates: Place certificates into the user's trusted certificate store and ensure they're available on all machines where the user's app runs.</span></span> <span data-ttu-id="e72ad-389">Podrobnosti [najdete v tématu Konfigurace ochrany základních dat ASP.NET.](xref:security/data-protection/configuration/overview)</span><span class="sxs-lookup"><span data-stu-id="e72ad-389">See [Configure ASP.NET Core Data Protection](xref:security/data-protection/configuration/overview) for details.</span></span>

* <span data-ttu-id="e72ad-390">**Konfigurace fondu aplikací služby IIS pro načtení profilu uživatele**</span><span class="sxs-lookup"><span data-stu-id="e72ad-390">**Configure the IIS Application Pool to load the user profile**</span></span>

  <span data-ttu-id="e72ad-391">Toto nastavení je v části **Model procesu** v části **Upřesnit nastavení** pro fond aplikací.</span><span class="sxs-lookup"><span data-stu-id="e72ad-391">This setting is in the **Process Model** section under the **Advanced Settings** for the app pool.</span></span> <span data-ttu-id="e72ad-392">Nastavte **profil načtení uživatele** na `True`.</span><span class="sxs-lookup"><span data-stu-id="e72ad-392">Set **Load User Profile** to `True`.</span></span> <span data-ttu-id="e72ad-393">Pokud je `True`nastavena možnost , jsou klíče uloženy v adresáři profilu uživatele a chráněny pomocí rozhraní DPAPI klíčem specifickým pro uživatelský účet.</span><span class="sxs-lookup"><span data-stu-id="e72ad-393">When set to `True`, keys are stored in the user profile directory and protected using DPAPI with a key specific to the user account.</span></span> <span data-ttu-id="e72ad-394">Klíče jsou uloženy ve složce *%LOCALAPPDATA%/ASP.NET/DataProtection-Keys.*</span><span class="sxs-lookup"><span data-stu-id="e72ad-394">Keys are persisted to the *%LOCALAPPDATA%/ASP.NET/DataProtection-Keys* folder.</span></span>

  <span data-ttu-id="e72ad-395">[Atribut setProfileEnvironment](/iis/configuration/system.applicationhost/applicationpools/add/processmodel#configuration) fondu aplikací musí být také povolen.</span><span class="sxs-lookup"><span data-stu-id="e72ad-395">The app pool's [setProfileEnvironment attribute](/iis/configuration/system.applicationhost/applicationpools/add/processmodel#configuration) must also be enabled.</span></span> <span data-ttu-id="e72ad-396">Výchozí hodnota `setProfileEnvironment` je `true`.</span><span class="sxs-lookup"><span data-stu-id="e72ad-396">The default value of `setProfileEnvironment` is `true`.</span></span> <span data-ttu-id="e72ad-397">V některých scénářích (například `setProfileEnvironment` operační `false`systém Windows) je nastavena na .</span><span class="sxs-lookup"><span data-stu-id="e72ad-397">In some scenarios (for example, Windows OS), `setProfileEnvironment` is set to `false`.</span></span> <span data-ttu-id="e72ad-398">Pokud klíče nejsou uloženy v adresáři profilu uživatele podle očekávání:</span><span class="sxs-lookup"><span data-stu-id="e72ad-398">If keys aren't stored in the user profile directory as expected:</span></span>

  1. <span data-ttu-id="e72ad-399">Přejděte do složky *%windir%/system32/inetsrv/config.*</span><span class="sxs-lookup"><span data-stu-id="e72ad-399">Navigate to the *%windir%/system32/inetsrv/config* folder.</span></span>
  1. <span data-ttu-id="e72ad-400">Otevřete soubor *applicationHost.config.*</span><span class="sxs-lookup"><span data-stu-id="e72ad-400">Open the *applicationHost.config* file.</span></span>
  1. <span data-ttu-id="e72ad-401">Vyhledejte element `<system.applicationHost><applicationPools><applicationPoolDefaults><processModel>`.</span><span class="sxs-lookup"><span data-stu-id="e72ad-401">Locate the `<system.applicationHost><applicationPools><applicationPoolDefaults><processModel>` element.</span></span>
  1. <span data-ttu-id="e72ad-402">Zkontrolujte, `setProfileEnvironment` zda atribut není k dispozici, `true`což je výchozí hodnota na `true`, nebo explicitně nastavte hodnotu atributu na .</span><span class="sxs-lookup"><span data-stu-id="e72ad-402">Confirm that the `setProfileEnvironment` attribute isn't present, which defaults the value to `true`, or explicitly set the attribute's value to `true`.</span></span>

* <span data-ttu-id="e72ad-403">**Použití systému souborů jako úložiště kroužků na klíče**</span><span class="sxs-lookup"><span data-stu-id="e72ad-403">**Use the file system as a key ring store**</span></span>

  <span data-ttu-id="e72ad-404">Upravte kód aplikace tak, aby [používal systém souborů jako úložiště kroužků klíčů](xref:security/data-protection/configuration/overview).</span><span class="sxs-lookup"><span data-stu-id="e72ad-404">Adjust the app code to [use the file system as a key ring store](xref:security/data-protection/configuration/overview).</span></span> <span data-ttu-id="e72ad-405">K ochraně kroužku na klíče a zajištění, že certifikát je důvěryhodný, použijte certifikát X509.</span><span class="sxs-lookup"><span data-stu-id="e72ad-405">Use an X509 certificate to protect the key ring and ensure the certificate is a trusted certificate.</span></span> <span data-ttu-id="e72ad-406">Pokud je certifikát podepsaný svým držitelem, umístěte jej do úložiště Důvěryhodného kořenového adresáře.</span><span class="sxs-lookup"><span data-stu-id="e72ad-406">If the certificate is self-signed, place the certificate in the Trusted Root store.</span></span>

  <span data-ttu-id="e72ad-407">Při použití služby IIS ve webové farmě:</span><span class="sxs-lookup"><span data-stu-id="e72ad-407">When using IIS in a web farm:</span></span>

  * <span data-ttu-id="e72ad-408">Použijte sdílenou složku, ke které mají přístup všechny počítače.</span><span class="sxs-lookup"><span data-stu-id="e72ad-408">Use a file share that all machines can access.</span></span>
  * <span data-ttu-id="e72ad-409">Nasazení certifikátu X509 do každého počítače.</span><span class="sxs-lookup"><span data-stu-id="e72ad-409">Deploy an X509 certificate to each machine.</span></span> <span data-ttu-id="e72ad-410">Konfigurace [ochrany dat v kódu](xref:security/data-protection/configuration/overview).</span><span class="sxs-lookup"><span data-stu-id="e72ad-410">Configure [data protection in code](xref:security/data-protection/configuration/overview).</span></span>

* <span data-ttu-id="e72ad-411">**Nastavení celopočítačových zásad pro ochranu dat**</span><span class="sxs-lookup"><span data-stu-id="e72ad-411">**Set a machine-wide policy for data protection**</span></span>

  <span data-ttu-id="e72ad-412">Systém ochrany dat má omezenou podporu pro nastavení výchozí [zásady celého počítače](xref:security/data-protection/configuration/machine-wide-policy) pro všechny aplikace, které spotřebovávají data protection API.</span><span class="sxs-lookup"><span data-stu-id="e72ad-412">The data protection system has limited support for setting a default [machine-wide policy](xref:security/data-protection/configuration/machine-wide-policy) for all apps that consume the Data Protection APIs.</span></span> <span data-ttu-id="e72ad-413">Další informace naleznete v tématu <xref:security/data-protection/introduction>.</span><span class="sxs-lookup"><span data-stu-id="e72ad-413">For more information, see <xref:security/data-protection/introduction>.</span></span>

## <a name="virtual-directories"></a><span data-ttu-id="e72ad-414">Virtuální adresáře</span><span class="sxs-lookup"><span data-stu-id="e72ad-414">Virtual Directories</span></span>

<span data-ttu-id="e72ad-415">[Virtuální adresáře služby IIS](/iis/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis#virtual-directories) nejsou podporovány aplikacemi ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="e72ad-415">[IIS Virtual Directories](/iis/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis#virtual-directories) aren't supported with ASP.NET Core apps.</span></span> <span data-ttu-id="e72ad-416">Aplikace může být hostována jako [podaplikace](#sub-applications).</span><span class="sxs-lookup"><span data-stu-id="e72ad-416">An app can be hosted as a [sub-application](#sub-applications).</span></span>

## <a name="sub-applications"></a><span data-ttu-id="e72ad-417">Dílčí aplikace</span><span class="sxs-lookup"><span data-stu-id="e72ad-417">Sub-applications</span></span>

<span data-ttu-id="e72ad-418">Aplikaci ASP.NET Core lze hostovat jako [podaplikaci služby IIS (podaplikaci).](/iis/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis#applications)</span><span class="sxs-lookup"><span data-stu-id="e72ad-418">An ASP.NET Core app can be hosted as an [IIS sub-application (sub-app)](/iis/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis#applications).</span></span> <span data-ttu-id="e72ad-419">Cesta podaplikace se stane součástí adresy URL kořenové aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-419">The sub-app's path becomes part of the root app's URL.</span></span>

<span data-ttu-id="e72ad-420">Statické odkazy datových zdrojů v rámci podaplikace`~/`by měly používat zápis tildového lomítka ( ).</span><span class="sxs-lookup"><span data-stu-id="e72ad-420">Static asset links within the sub-app should use tilde-slash (`~/`) notation.</span></span> <span data-ttu-id="e72ad-421">Zápis tildového lomítka aktivuje [pomocníka tagu,](xref:mvc/views/tag-helpers/intro) který předřává základnu cesty podaplikace k vykreslenérelativní vazbě.</span><span class="sxs-lookup"><span data-stu-id="e72ad-421">Tilde-slash notation triggers a [Tag Helper](xref:mvc/views/tag-helpers/intro) to prepend the sub-app's pathbase to the rendered relative link.</span></span> <span data-ttu-id="e72ad-422">Pro podaplikaci `/subapp_path`na adrese , `src="~/image.png"` obrázek `src="/subapp_path/image.png"`spojený s je vykreslen jako .</span><span class="sxs-lookup"><span data-stu-id="e72ad-422">For a sub-app at `/subapp_path`, an image linked with `src="~/image.png"` is rendered as `src="/subapp_path/image.png"`.</span></span> <span data-ttu-id="e72ad-423">Middleware statického souboru kořenové aplikace nezpracovává požadavek na statický soubor.</span><span class="sxs-lookup"><span data-stu-id="e72ad-423">The root app's Static File Middleware doesn't process the static file request.</span></span> <span data-ttu-id="e72ad-424">Požadavek je zpracován middlewarem statického souboru podaplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-424">The request is processed by the sub-app's Static File Middleware.</span></span>

<span data-ttu-id="e72ad-425">Pokud je atribut `src` statického datového zdroje nastaven na `src="/image.png"`absolutní cestu (například), odkaz se vykreslí bez vytvoření cesty podaplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-425">If a static asset's `src` attribute is set to an absolute path (for example, `src="/image.png"`), the link is rendered without the sub-app's pathbase.</span></span> <span data-ttu-id="e72ad-426">Middleware statického souboru kořenové aplikace se pokouší obsluhovat datový zdroj z [kořenového kořenového kořenového adresáře](xref:fundamentals/index#web-root)aplikace , což má za následek odpověď *404 - Not Found,* pokud není statický datový zdroj k dispozici z kořenové aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-426">The root app's Static File Middleware attempts to serve the asset from the root app's [web root](xref:fundamentals/index#web-root), which results in a *404 - Not Found* response unless the static asset is available from the root app.</span></span>

<span data-ttu-id="e72ad-427">Hostování aplikace ASP.NET Core jako podaplikace pod jinou aplikací ASP.NET Core:</span><span class="sxs-lookup"><span data-stu-id="e72ad-427">To host an ASP.NET Core app as a sub-app under another ASP.NET Core app:</span></span>

1. <span data-ttu-id="e72ad-428">Vytvořte fond aplikací pro podaplikaci.</span><span class="sxs-lookup"><span data-stu-id="e72ad-428">Establish an app pool for the sub-app.</span></span> <span data-ttu-id="e72ad-429">Nastavte **verzi .NET CLR** na **žádný spravovaný kód,** protože prostředí Core Common Language Runtime (CoreCLR) pro .NET Core je spuštěno pro hostování aplikace v pracovním procesu, nikoli na ploše CLR (.NET CLR).</span><span class="sxs-lookup"><span data-stu-id="e72ad-429">Set the **.NET CLR Version** to **No Managed Code** because the Core Common Language Runtime (CoreCLR) for .NET Core is booted to host the app in the worker process, not the desktop CLR (.NET CLR).</span></span>

1. <span data-ttu-id="e72ad-430">Přidejte kořenový web ve Správci služby IIS s podaplikací ve složce pod kořenovým webem.</span><span class="sxs-lookup"><span data-stu-id="e72ad-430">Add the root site in IIS Manager with the sub-app in a folder under the root site.</span></span>

1. <span data-ttu-id="e72ad-431">Klikněte pravým tlačítkem myši na složku podaplikace ve Správci služby IIS a vyberte **příkaz Převést na aplikaci**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-431">Right-click the sub-app folder in IIS Manager and select **Convert to Application**.</span></span>

1. <span data-ttu-id="e72ad-432">V dialogovém okně **Přidat aplikaci** přiřaďte pomocí tlačítka **Vybrat** pro **fond aplikací** fond aplikací, který jste vytvořili pro podaplikaci.</span><span class="sxs-lookup"><span data-stu-id="e72ad-432">In the **Add Application** dialog, use the **Select** button for the **Application Pool** to assign the app pool that you created for the sub-app.</span></span> <span data-ttu-id="e72ad-433">Vyberte **OK**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-433">Select **OK**.</span></span>

<span data-ttu-id="e72ad-434">Přiřazení samostatného fondu aplikací do podaplikace je požadavek při použití modelu hostování v procesu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-434">The assignment of a separate app pool to the sub-app is a requirement when using the in-process hosting model.</span></span>

<span data-ttu-id="e72ad-435">Další informace o modelu hostování v procesu a konfiguraci <xref:host-and-deploy/aspnet-core-module>ASP.NET core modulu naleznete v tématu .</span><span class="sxs-lookup"><span data-stu-id="e72ad-435">For more information on the in-process hosting model and configuring the ASP.NET Core Module, see <xref:host-and-deploy/aspnet-core-module>.</span></span>

## <a name="configuration-of-iis-with-webconfig"></a><span data-ttu-id="e72ad-436">Konfigurace služby IIS pomocí souboru web.config</span><span class="sxs-lookup"><span data-stu-id="e72ad-436">Configuration of IIS with web.config</span></span>

<span data-ttu-id="e72ad-437">Konfigurace služby IIS `<system.webServer>` je ovlivněna částí *web.config* pro scénáře služby IIS, které jsou funkční pro ASP.NET aplikace Core pomocí ASP.NET core modulem.</span><span class="sxs-lookup"><span data-stu-id="e72ad-437">IIS configuration is influenced by the `<system.webServer>` section of *web.config* for IIS scenarios that are functional for ASP.NET Core apps with the ASP.NET Core Module.</span></span> <span data-ttu-id="e72ad-438">Například konfigurace služby IIS je funkční pro dynamickou kompresi.</span><span class="sxs-lookup"><span data-stu-id="e72ad-438">For example, IIS configuration is functional for dynamic compression.</span></span> <span data-ttu-id="e72ad-439">Pokud je služba IIS nakonfigurována na `<urlCompression>` úrovni serveru pro použití dynamické komprese, prvek v souboru *web.config* aplikace jej může zakázat pro aplikaci ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="e72ad-439">If IIS is configured at the server level to use dynamic compression, the `<urlCompression>` element in the app's *web.config* file can disable it for an ASP.NET Core app.</span></span>

<span data-ttu-id="e72ad-440">Další informace najdete v následujících tématech:</span><span class="sxs-lookup"><span data-stu-id="e72ad-440">For more information, see the following topics:</span></span>

* [<span data-ttu-id="e72ad-441">Odkaz na \<konfiguraci pro>system.webServer</span><span class="sxs-lookup"><span data-stu-id="e72ad-441">Configuration reference for \<system.webServer></span></span>](/iis/configuration/system.webServer/)
* <xref:host-and-deploy/aspnet-core-module>
* <xref:host-and-deploy/iis/modules>

<span data-ttu-id="e72ad-442">Chcete-li nastavit proměnné prostředí pro jednotlivé aplikace spuštěné v izolovaných fondech aplikací (podporované pro službu IIS 10.0 nebo novější), přečtěte si část *příkazu AppCmd.exe* v tématu [Environment Variables environmentvariables>\<](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) tématu v referenční dokumentaci služby IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-442">To set environment variables for individual apps running in isolated app pools (supported for IIS 10.0 or later), see the *AppCmd.exe command* section of the [Environment Variables \<environmentVariables>](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) topic in the IIS reference documentation.</span></span>

## <a name="configuration-sections-of-webconfig"></a><span data-ttu-id="e72ad-443">Konfigurační části web.config</span><span class="sxs-lookup"><span data-stu-id="e72ad-443">Configuration sections of web.config</span></span>

<span data-ttu-id="e72ad-444">Části konfigurace aplikací ASP.NET 4.x v *souboru web.config* nepoužívají aplikace ASP.NET Core pro konfiguraci:</span><span class="sxs-lookup"><span data-stu-id="e72ad-444">Configuration sections of ASP.NET 4.x apps in *web.config* aren't used by ASP.NET Core apps for configuration:</span></span>

* `<system.web>`
* `<appSettings>`
* `<connectionStrings>`
* `<location>`

<span data-ttu-id="e72ad-445">ASP.NET aplikace Core jsou konfigurovány pomocí jiných poskytovatelů konfigurace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-445">ASP.NET Core apps are configured using other configuration providers.</span></span> <span data-ttu-id="e72ad-446">Další informace naleznete v [tématu Konfigurace](xref:fundamentals/configuration/index).</span><span class="sxs-lookup"><span data-stu-id="e72ad-446">For more information, see [Configuration](xref:fundamentals/configuration/index).</span></span>

## <a name="application-pools"></a><span data-ttu-id="e72ad-447">Fondy aplikací</span><span class="sxs-lookup"><span data-stu-id="e72ad-447">Application Pools</span></span>

<span data-ttu-id="e72ad-448">Izolace fondu aplikací je určena modelem hostování:</span><span class="sxs-lookup"><span data-stu-id="e72ad-448">App pool isolation is determined by the hosting model:</span></span>

* <span data-ttu-id="e72ad-449">V průběhu &ndash; procesu hosting ové aplikace jsou nutné ke spuštění v samostatných fondech aplikací.</span><span class="sxs-lookup"><span data-stu-id="e72ad-449">In-process hosting &ndash; Apps are required to run in separate app pools.</span></span>
* <span data-ttu-id="e72ad-450">Mimoprocesový hosting &ndash; Doporučujeme izolovat aplikace od sebe navzájem spuštěním každé aplikace ve vlastním fondu aplikací.</span><span class="sxs-lookup"><span data-stu-id="e72ad-450">Out-of-process hosting &ndash; We recommend isolating the apps from each other by running each app in its own app pool.</span></span>

<span data-ttu-id="e72ad-451">Dialogové okno **IIS Přidat web** se ve výchozím nastavení používá do jednoho fondu aplikací na aplikaci.</span><span class="sxs-lookup"><span data-stu-id="e72ad-451">The IIS **Add Website** dialog defaults to a single app pool per app.</span></span> <span data-ttu-id="e72ad-452">Když je k dispozici **název webu,** text se automaticky přenese do textového pole **Fondu aplikací.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-452">When a **Site name** is provided, the text is automatically transferred to the **Application pool** textbox.</span></span> <span data-ttu-id="e72ad-453">Při přidání webu se vytvoří nový fond aplikací s názvem webu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-453">A new app pool is created using the site name when the site is added.</span></span>

## <a name="application-pool-identity"></a><span data-ttu-id="e72ad-454">Identita fondu aplikací</span><span class="sxs-lookup"><span data-stu-id="e72ad-454">Application Pool Identity</span></span>

<span data-ttu-id="e72ad-455">Účet identity fondu aplikací umožňuje aplikaci spouštět pod jedinečným účtem, aniž by bylo třeba vytvářet a spravovat domény nebo místní účty.</span><span class="sxs-lookup"><span data-stu-id="e72ad-455">An app pool identity account allows an app to run under a unique account without having to create and manage domains or local accounts.</span></span> <span data-ttu-id="e72ad-456">Ve službě IIS 8.0 nebo novější vytvoří pracovní proces správce služby IIS (WAS) virtuální účet s názvem nového fondu aplikací a ve výchozím nastavení spustí pracovní procesy fondu aplikací v rámci tohoto účtu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-456">On IIS 8.0 or later, the IIS Admin Worker Process (WAS) creates a virtual account with the name of the new app pool and runs the app pool's worker processes under this account by default.</span></span> <span data-ttu-id="e72ad-457">V konzole pro správu služby IIS v části **Upřesnit nastavení** fondu aplikací zkontrolujte, zda je **identita** nastavená na použití **applicationpoolidentity**:</span><span class="sxs-lookup"><span data-stu-id="e72ad-457">In the IIS Management Console under **Advanced Settings** for the app pool, ensure that the **Identity** is set to use **ApplicationPoolIdentity**:</span></span>

![Dialogové okno Upřesnit nastavení fondu aplikací](index/_static/apppool-identity.png)

<span data-ttu-id="e72ad-459">Proces správy služby IIS vytvoří zabezpečený identifikátor s názvem fondu aplikací v systému zabezpečení systému Windows.</span><span class="sxs-lookup"><span data-stu-id="e72ad-459">The IIS management process creates a secure identifier with the name of the app pool in the Windows Security System.</span></span> <span data-ttu-id="e72ad-460">Prostředky lze zabezpečit pomocí této identity.</span><span class="sxs-lookup"><span data-stu-id="e72ad-460">Resources can be secured using this identity.</span></span> <span data-ttu-id="e72ad-461">Tato identita však není reálný uživatelský účet a nezobrazuje se v konzole pro správu uživatelů systému Windows.</span><span class="sxs-lookup"><span data-stu-id="e72ad-461">However, this identity isn't a real user account and doesn't show up in the Windows User Management Console.</span></span>

<span data-ttu-id="e72ad-462">Pokud pracovní proces služby IIS vyžaduje zvýšený přístup k aplikaci, upravte seznam řízení přístupu (ACL) pro adresář obsahující aplikaci:</span><span class="sxs-lookup"><span data-stu-id="e72ad-462">If the IIS worker process requires elevated access to the app, modify the Access Control List (ACL) for the directory containing the app:</span></span>

1. <span data-ttu-id="e72ad-463">Sem otevřete Průzkumníka Windows a přejděte do adresáře.</span><span class="sxs-lookup"><span data-stu-id="e72ad-463">Open Windows Explorer and navigate to the directory.</span></span>

1. <span data-ttu-id="e72ad-464">Klepněte pravým tlačítkem myši na adresář a vyberte příkaz **Vlastnosti**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-464">Right-click on the directory and select **Properties**.</span></span>

1. <span data-ttu-id="e72ad-465">Na kartě **Zabezpečení** vyberte tlačítko **Upravit** a pak **tlačítko Přidat.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-465">Under the **Security** tab, select the **Edit** button and then the **Add** button.</span></span>

1. <span data-ttu-id="e72ad-466">Vyberte tlačítko **Umístění** a ujistěte se, že je vybrán systém.</span><span class="sxs-lookup"><span data-stu-id="e72ad-466">Select the **Locations** button and make sure the system is selected.</span></span>

1. <span data-ttu-id="e72ad-467">Zadejte **\\<<iIS app_pool_name>** **zadejte názvy objektů, které chcete vybrat.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-467">Enter **IIS AppPool\\<app_pool_name>** in **Enter the object names to select** area.</span></span> <span data-ttu-id="e72ad-468">Vyberte tlačítko **Zkontrolovat jména.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-468">Select the **Check Names** button.</span></span> <span data-ttu-id="e72ad-469">Pro *DefaultAppPool* zkontrolujte názvy pomocí **IIS AppPool\DefaultAppPool**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-469">For the *DefaultAppPool* check the names using **IIS AppPool\DefaultAppPool**.</span></span> <span data-ttu-id="e72ad-470">Když je vybráno tlačítko **Zkontrolovat názvy,** je v oblasti názvů objektů uvedena hodnota **DefaultAppPool.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-470">When the **Check Names** button is selected, a value of **DefaultAppPool** is indicated in the object names area.</span></span> <span data-ttu-id="e72ad-471">Název fondu aplikací není možné zadat přímo do oblasti názvů objektů.</span><span class="sxs-lookup"><span data-stu-id="e72ad-471">It isn't possible to enter the app pool name directly into the object names area.</span></span> <span data-ttu-id="e72ad-472">Při kontrole názvu objektu použijte<<app_pool_name>formátu \*\*IIS AppPool.\\ \*\*</span><span class="sxs-lookup"><span data-stu-id="e72ad-472">Use the **IIS AppPool\\<app_pool_name>** format when checking for the object name.</span></span>

   ![Dialogové okno Vybrat uživatele nebo skupiny pro složku aplikace: Název fondu aplikací "DefaultAppPool" se připojí k "IIS AppPool\" v oblasti názvů objektů před výběrem možnosti Zkontrolovat názvy".](index/_static/select-users-or-groups-1.png)

1. <span data-ttu-id="e72ad-474">Vyberte **OK**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-474">Select **OK**.</span></span>

   ![Dialogové okno Vybrat uživatele nebo skupiny pro složku aplikace: Po výběru možnosti Zkontrolovat názvy se v oblasti názvů objektů zobrazí název objektu DefaultAppPool.](index/_static/select-users-or-groups-2.png)

1. <span data-ttu-id="e72ad-476">Oprávnění &amp; ke spuštění čtení by měla být udělena ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="e72ad-476">Read &amp; execute permissions should be granted by default.</span></span> <span data-ttu-id="e72ad-477">Podle potřeby zadejte další oprávnění.</span><span class="sxs-lookup"><span data-stu-id="e72ad-477">Provide additional permissions as needed.</span></span>

<span data-ttu-id="e72ad-478">Přístup lze také udělit na příkazovém řádku pomocí nástroje **ICACLS.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-478">Access can also be granted at a command prompt using the **ICACLS** tool.</span></span> <span data-ttu-id="e72ad-479">Jako příklad použijete *defaultapppool,* který používá následující příkaz:</span><span class="sxs-lookup"><span data-stu-id="e72ad-479">Using the *DefaultAppPool* as an example, the following command is used:</span></span>

```console
ICACLS C:\sites\MyWebApp /grant "IIS AppPool\DefaultAppPool":F
```

<span data-ttu-id="e72ad-480">Další informace naleznete v tématu [icacls.](/windows-server/administration/windows-commands/icacls)</span><span class="sxs-lookup"><span data-stu-id="e72ad-480">For more information, see the [icacls](/windows-server/administration/windows-commands/icacls) topic.</span></span>

## <a name="http2-support"></a><span data-ttu-id="e72ad-481">Podpora HTTP/2</span><span class="sxs-lookup"><span data-stu-id="e72ad-481">HTTP/2 support</span></span>

<span data-ttu-id="e72ad-482">[Protokol HTTP/2](https://httpwg.org/specs/rfc7540.html) je podporován ASP.NET jádrem v následujících scénářích nasazení služby IIS:</span><span class="sxs-lookup"><span data-stu-id="e72ad-482">[HTTP/2](https://httpwg.org/specs/rfc7540.html) is supported with ASP.NET Core in the following IIS deployment scenarios:</span></span>

* <span data-ttu-id="e72ad-483">Neprocesové</span><span class="sxs-lookup"><span data-stu-id="e72ad-483">In-process</span></span>
  * <span data-ttu-id="e72ad-484">Windows Server 2016/Windows 10 nebo novější; IIS 10 nebo novější</span><span class="sxs-lookup"><span data-stu-id="e72ad-484">Windows Server 2016/Windows 10 or later; IIS 10 or later</span></span>
  * <span data-ttu-id="e72ad-485">Připojení TLS 1.2 nebo novější</span><span class="sxs-lookup"><span data-stu-id="e72ad-485">TLS 1.2 or later connection</span></span>
* <span data-ttu-id="e72ad-486">Mimo proces</span><span class="sxs-lookup"><span data-stu-id="e72ad-486">Out-of-process</span></span>
  * <span data-ttu-id="e72ad-487">Windows Server 2016/Windows 10 nebo novější; IIS 10 nebo novější</span><span class="sxs-lookup"><span data-stu-id="e72ad-487">Windows Server 2016/Windows 10 or later; IIS 10 or later</span></span>
  * <span data-ttu-id="e72ad-488">Připojení serveru edge směřující mj. [Kestrel server](xref:fundamentals/servers/kestrel)</span><span class="sxs-lookup"><span data-stu-id="e72ad-488">Public-facing edge server connections use HTTP/2, but the reverse proxy connection to the [Kestrel server](xref:fundamentals/servers/kestrel) uses HTTP/1.1.</span></span>
  * <span data-ttu-id="e72ad-489">Připojení TLS 1.2 nebo novější</span><span class="sxs-lookup"><span data-stu-id="e72ad-489">TLS 1.2 or later connection</span></span>

<span data-ttu-id="e72ad-490">Pro nasazení v procesu při navázání připojení HTTP/2 `HTTP/2`protokol [HttpRequest.Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) hlásí .</span><span class="sxs-lookup"><span data-stu-id="e72ad-490">For an in-process deployment when an HTTP/2 connection is established, [HttpRequest.Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) reports `HTTP/2`.</span></span> <span data-ttu-id="e72ad-491">Pro mimoprocesové nasazení při navázání připojení HTTP/2 hlásí protokol `HTTP/1.1` [HttpRequest.Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) .</span><span class="sxs-lookup"><span data-stu-id="e72ad-491">For an out-of-process deployment when an HTTP/2 connection is established, [HttpRequest.Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) reports `HTTP/1.1`.</span></span>

<span data-ttu-id="e72ad-492">Další informace o modelech hostování v procesu a <xref:host-and-deploy/aspnet-core-module>mimo proces naleznete v tématu .</span><span class="sxs-lookup"><span data-stu-id="e72ad-492">For more information on the in-process and out-of-process hosting models, see <xref:host-and-deploy/aspnet-core-module>.</span></span>

<span data-ttu-id="e72ad-493">Protokol HTTP/2 je ve výchozím nastavení povolen.</span><span class="sxs-lookup"><span data-stu-id="e72ad-493">HTTP/2 is enabled by default.</span></span> <span data-ttu-id="e72ad-494">Připojení se vrátí na HTTP/1.1, pokud není navázáno připojení HTTP/2.</span><span class="sxs-lookup"><span data-stu-id="e72ad-494">Connections fall back to HTTP/1.1 if an HTTP/2 connection isn't established.</span></span> <span data-ttu-id="e72ad-495">Další informace o konfiguraci protokolu HTTP/2 s nasazením služby IIS naleznete [v tématu HTTP/2 ve službě IIS](/iis/get-started/whats-new-in-iis-10/http2-on-iis).</span><span class="sxs-lookup"><span data-stu-id="e72ad-495">For more information on HTTP/2 configuration with IIS deployments, see [HTTP/2 on IIS](/iis/get-started/whats-new-in-iis-10/http2-on-iis).</span></span>

## <a name="cors-preflight-requests"></a><span data-ttu-id="e72ad-496">Požadavky cors kontroly před výstupem</span><span class="sxs-lookup"><span data-stu-id="e72ad-496">CORS preflight requests</span></span>

<span data-ttu-id="e72ad-497">*Tato část se vztahuje pouze na ASP.NET základní aplikace, které se zaměřují na rozhraní .NET Framework.*</span><span class="sxs-lookup"><span data-stu-id="e72ad-497">*This section only applies to ASP.NET Core apps that target the .NET Framework.*</span></span>

<span data-ttu-id="e72ad-498">Pro aplikaci ASP.NET Core, která cílí na rozhraní .NET Framework, nejsou požadavky OPTIONS ve výchozím nastavení ve službách IIS předány do aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-498">For an ASP.NET Core app that targets the .NET Framework, OPTIONS requests aren't passed to the app by default in IIS.</span></span> <span data-ttu-id="e72ad-499">Informace o konfiguraci obslužných rutin služby IIS aplikace v *souboru web.config* tak, aby předávály požadavky OPTIONS, naleznete v tématu [Povolení požadavků napříč původy v ASP.NET webovém rozhraní API 2: Jak funguje cors](/aspnet/web-api/overview/security/enabling-cross-origin-requests-in-web-api#how-cors-works).</span><span class="sxs-lookup"><span data-stu-id="e72ad-499">To learn how to configure the app's IIS handlers in *web.config* to pass OPTIONS requests, see [Enable cross-origin requests in ASP.NET Web API 2: How CORS Works](/aspnet/web-api/overview/security/enabling-cross-origin-requests-in-web-api#how-cors-works).</span></span>

## <a name="application-initialization-module-and-idle-timeout"></a><span data-ttu-id="e72ad-500">Modul inicializace aplikace a časový limit nečinnosti</span><span class="sxs-lookup"><span data-stu-id="e72ad-500">Application Initialization Module and Idle Timeout</span></span>

<span data-ttu-id="e72ad-501">Pokud je ve správě ve správě iis hostován ASP.NET základnímodul verze 2:</span><span class="sxs-lookup"><span data-stu-id="e72ad-501">When hosted in IIS by the ASP.NET Core Module version 2:</span></span>

* <span data-ttu-id="e72ad-502">[Aplikace Inicializační modul](#application-initialization-module) &ndash; aplikace hostované [v procesu](#in-process-hosting-model) nebo [mimo proces](#out-of-process-hosting-model) lze nakonfigurovat tak, aby se automaticky spouštěla při restartování pracovního procesu nebo restartování serveru.</span><span class="sxs-lookup"><span data-stu-id="e72ad-502">[Application Initialization Module](#application-initialization-module) &ndash; App's hosted [in-process](#in-process-hosting-model) or [out-of-process](#out-of-process-hosting-model) can be configured to start automatically on a worker process restart or server restart.</span></span>
* <span data-ttu-id="e72ad-503">[Nevyužitý časový limit](#idle-timeout) &ndash; aplikace hostované [v procesu](#in-process-hosting-model) lze nakonfigurovat tak, aby časový limit během období nečinnosti.</span><span class="sxs-lookup"><span data-stu-id="e72ad-503">[Idle Timeout](#idle-timeout) &ndash; App's hosted [in-process](#in-process-hosting-model) can be configured not to timeout during periods of inactivity.</span></span>

### <a name="application-initialization-module"></a><span data-ttu-id="e72ad-504">Inicializační modul aplikace</span><span class="sxs-lookup"><span data-stu-id="e72ad-504">Application Initialization Module</span></span>

<span data-ttu-id="e72ad-505">*Platí pro aplikace hostované v průběhu procesu a mimo proces.*</span><span class="sxs-lookup"><span data-stu-id="e72ad-505">*Applies to apps hosted in-process and out-of-process.*</span></span>

<span data-ttu-id="e72ad-506">[Inicializace aplikace služby IIS](/iis/get-started/whats-new-in-iis-8/iis-80-application-initialization) je funkce služby IIS, která odesílá požadavek HTTP do aplikace při spuštění nebo recyklaci fondu aplikací.</span><span class="sxs-lookup"><span data-stu-id="e72ad-506">[IIS Application Initialization](/iis/get-started/whats-new-in-iis-8/iis-80-application-initialization) is an IIS feature that sends an HTTP request to the app when the app pool starts or is recycled.</span></span> <span data-ttu-id="e72ad-507">Požadavek spustí spuštění aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-507">The request triggers the app to start.</span></span> <span data-ttu-id="e72ad-508">Ve výchozím nastavení služba IIS vydá požadavek`/`na kořenovou adresu URL aplikace ( ) o inicializaci aplikace (další podrobnosti o konfiguraci najdete v [dalších zdrojích](#application-initialization-module-and-idle-timeout-additional-resources) informací).</span><span class="sxs-lookup"><span data-stu-id="e72ad-508">By default, IIS issues a request to the app's root URL (`/`) to initialize the app (see the [additional resources](#application-initialization-module-and-idle-timeout-additional-resources) for more details on configuration).</span></span>

<span data-ttu-id="e72ad-509">Zkontrolujte, zda je funkce role Inicializace aplikace služby IIS povolena:</span><span class="sxs-lookup"><span data-stu-id="e72ad-509">Confirm that the IIS Application Initialization role feature in enabled:</span></span>

<span data-ttu-id="e72ad-510">V desktopových systémech se systémem Windows 7 nebo novějších při místním používání služby IIS:</span><span class="sxs-lookup"><span data-stu-id="e72ad-510">On Windows 7 or later desktop systems when using IIS locally:</span></span>

1. <span data-ttu-id="e72ad-511">Přejděte na **Ovládací panely** > **Programy** > **a funkce** > **Zapněte nebo vypněte funkce systému Windows** (levá strana obrazovky).</span><span class="sxs-lookup"><span data-stu-id="e72ad-511">Navigate to **Control Panel** > **Programs** > **Programs and Features** > **Turn Windows features on or off** (left side of the screen).</span></span>
1. <span data-ttu-id="e72ad-512">Otevřete funkce **vývoje aplikací** **internetových informačních služeb** > **World Wide Web Services** > .</span><span class="sxs-lookup"><span data-stu-id="e72ad-512">Open **Internet Information Services** > **World Wide Web Services** > **Application Development Features**.</span></span>
1. <span data-ttu-id="e72ad-513">Zaškrtněte políčko pro **inicializaci aplikace**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-513">Select the check box for **Application Initialization**.</span></span>

<span data-ttu-id="e72ad-514">V systému Windows Server 2008 R2 nebo novějším:</span><span class="sxs-lookup"><span data-stu-id="e72ad-514">On Windows Server 2008 R2 or later:</span></span>

1. <span data-ttu-id="e72ad-515">Otevřete **Průvodce přidáním rolí a funkcí**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-515">Open the **Add Roles and Features Wizard**.</span></span>
1. <span data-ttu-id="e72ad-516">V panelu **Vybrat služby rolí** otevřete uzel **Vývoj aplikací.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-516">In the **Select role services** panel, open the **Application Development** node.</span></span>
1. <span data-ttu-id="e72ad-517">Zaškrtněte políčko pro **inicializaci aplikace**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-517">Select the check box for **Application Initialization**.</span></span>

<span data-ttu-id="e72ad-518">K povolení modulu inicializace aplikace pro lokalitu použijte některý z následujících přístupů:</span><span class="sxs-lookup"><span data-stu-id="e72ad-518">Use either of the following approaches to enable the Application Initialization Module for the site:</span></span>

* <span data-ttu-id="e72ad-519">Pomocí Správce služby IIS:</span><span class="sxs-lookup"><span data-stu-id="e72ad-519">Using IIS Manager:</span></span>

  1. <span data-ttu-id="e72ad-520">V panelu **Připojení** vyberte **fondy aplikací.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-520">Select **Application Pools** in the **Connections** panel.</span></span>
  1. <span data-ttu-id="e72ad-521">Klikněte pravým tlačítkem myši na fond aplikací v seznamu a vyberte **Upřesnit nastavení**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-521">Right-click the app's app pool in the list and select **Advanced Settings**.</span></span>
  1. <span data-ttu-id="e72ad-522">Výchozí **režim spuštění** je **OnDemand**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-522">The default **Start Mode** is **OnDemand**.</span></span> <span data-ttu-id="e72ad-523">Nastavte **režim spuštění** na **vždy spuštěný**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-523">Set the **Start Mode** to **AlwaysRunning**.</span></span> <span data-ttu-id="e72ad-524">Vyberte **OK**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-524">Select **OK**.</span></span>
  1. <span data-ttu-id="e72ad-525">Otevřete uzel **Weby** v panelu **Připojení.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-525">Open the **Sites** node in the **Connections** panel.</span></span>
  1. <span data-ttu-id="e72ad-526">Klikněte pravým tlačítkem myši na aplikaci a vyberte Spravovat **upřesnit nastavení** **webu** > .</span><span class="sxs-lookup"><span data-stu-id="e72ad-526">Right-click the app and select **Manage Website** > **Advanced Settings**.</span></span>
  1. <span data-ttu-id="e72ad-527">Výchozí nastavení **Preload Enabled** je **False**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-527">The default **Preload Enabled** setting is **False**.</span></span> <span data-ttu-id="e72ad-528">Nastavte **předběžné načtení povoleno** na **hodnotu True**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-528">Set **Preload Enabled** to **True**.</span></span> <span data-ttu-id="e72ad-529">Vyberte **OK**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-529">Select **OK**.</span></span>

* <span data-ttu-id="e72ad-530">Pomocí `<applicationInitialization>` `doAppInitAfterRestart` *souboru web.config*přidejte `true` prvek `<system.webServer>` s nastavenou na do prvků v souboru *web.config* aplikace:</span><span class="sxs-lookup"><span data-stu-id="e72ad-530">Using *web.config*, add the `<applicationInitialization>` element with `doAppInitAfterRestart` set to `true` to the `<system.webServer>` elements in the app's *web.config* file:</span></span>

  ```xml
  <?xml version="1.0" encoding="utf-8"?>
  <configuration>
    <location path="." inheritInChildApplications="false">
      <system.webServer>
        <applicationInitialization doAppInitAfterRestart="true" />
      </system.webServer>
    </location>
  </configuration>
  ```

### <a name="idle-timeout"></a><span data-ttu-id="e72ad-531">Časový limit nečinnosti</span><span class="sxs-lookup"><span data-stu-id="e72ad-531">Idle Timeout</span></span>

<span data-ttu-id="e72ad-532">*Platí pouze pro aplikace hostované v procesu.*</span><span class="sxs-lookup"><span data-stu-id="e72ad-532">*Only applies to apps hosted in-process.*</span></span>

<span data-ttu-id="e72ad-533">Chcete-li aplikaci zabránit v volnoběhu, nastavte časový limit nečinnosti fondu aplikací pomocí Správce služby IIS:</span><span class="sxs-lookup"><span data-stu-id="e72ad-533">To prevent the app from idling, set the app pool's idle timeout using IIS Manager:</span></span>

1. <span data-ttu-id="e72ad-534">V panelu **Připojení** vyberte **fondy aplikací.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-534">Select **Application Pools** in the **Connections** panel.</span></span>
1. <span data-ttu-id="e72ad-535">Klikněte pravým tlačítkem myši na fond aplikací v seznamu a vyberte **Upřesnit nastavení**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-535">Right-click the app's app pool in the list and select **Advanced Settings**.</span></span>
1. <span data-ttu-id="e72ad-536">Výchozí **časový limit nečinnosti (minuty)** je **20** minut.</span><span class="sxs-lookup"><span data-stu-id="e72ad-536">The default **Idle Time-out (minutes)** is **20** minutes.</span></span> <span data-ttu-id="e72ad-537">Nastavte **časový limit nečinnosti (minuty)** na **0** (nula).</span><span class="sxs-lookup"><span data-stu-id="e72ad-537">Set the **Idle Time-out (minutes)** to **0** (zero).</span></span> <span data-ttu-id="e72ad-538">Vyberte **OK**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-538">Select **OK**.</span></span>
1. <span data-ttu-id="e72ad-539">Recyklujte pracovní proces.</span><span class="sxs-lookup"><span data-stu-id="e72ad-539">Recycle the worker process.</span></span>

<span data-ttu-id="e72ad-540">Chcete-li zabránit vypršení časového limitu aplikací hostovaných [mimo proces,](#out-of-process-hosting-model) použijte některý z následujících přístupů:</span><span class="sxs-lookup"><span data-stu-id="e72ad-540">To prevent apps hosted [out-of-process](#out-of-process-hosting-model) from timing out, use either of the following approaches:</span></span>

* <span data-ttu-id="e72ad-541">Příkazping aplikace z externí služby, aby byla spuštěna.</span><span class="sxs-lookup"><span data-stu-id="e72ad-541">Ping the app from an external service in order to keep it running.</span></span>
* <span data-ttu-id="e72ad-542">Pokud aplikace hostuje pouze služby na pozadí, vyhněte se hostování služby IIS a pomocí [služby Windows service hostujte aplikaci ASP.NET Core](xref:host-and-deploy/windows-service).</span><span class="sxs-lookup"><span data-stu-id="e72ad-542">If the app only hosts background services, avoid IIS hosting and use a [Windows Service to host the ASP.NET Core app](xref:host-and-deploy/windows-service).</span></span>

### <a name="application-initialization-module-and-idle-timeout-additional-resources"></a><span data-ttu-id="e72ad-543">Modul inicializace aplikace a časový limit nečinnosti další prostředky</span><span class="sxs-lookup"><span data-stu-id="e72ad-543">Application Initialization Module and Idle Timeout additional resources</span></span>

* [<span data-ttu-id="e72ad-544">Inicializace aplikace služby IIS 8.0</span><span class="sxs-lookup"><span data-stu-id="e72ad-544">IIS 8.0 Application Initialization</span></span>](/iis/get-started/whats-new-in-iis-8/iis-80-application-initialization)
* <span data-ttu-id="e72ad-545">[Aplikace Inicializace \<aplikaceInicializační>](/iis/configuration/system.webserver/applicationinitialization/).</span><span class="sxs-lookup"><span data-stu-id="e72ad-545">[Application Initialization \<applicationInitialization>](/iis/configuration/system.webserver/applicationinitialization/).</span></span>
* <span data-ttu-id="e72ad-546">[Zpracovat nastavení modelu \<pro proces fondu aplikacíModel>](/iis/configuration/system.applicationhost/applicationpools/add/processmodel).</span><span class="sxs-lookup"><span data-stu-id="e72ad-546">[Process Model Settings for an Application Pool \<processModel>](/iis/configuration/system.applicationhost/applicationpools/add/processmodel).</span></span>

## <a name="deployment-resources-for-iis-administrators"></a><span data-ttu-id="e72ad-547">Prostředky nasazení pro správce služby IIS</span><span class="sxs-lookup"><span data-stu-id="e72ad-547">Deployment resources for IIS administrators</span></span>

* [<span data-ttu-id="e72ad-548">Dokumentace iis</span><span class="sxs-lookup"><span data-stu-id="e72ad-548">IIS documentation</span></span>](/iis)
* [<span data-ttu-id="e72ad-549">Začínáme se Správcem služby IIS ve službách IIS</span><span class="sxs-lookup"><span data-stu-id="e72ad-549">Getting Started with the IIS Manager in IIS</span></span>](/iis/get-started/getting-started-with-iis/getting-started-with-the-iis-manager-in-iis-7-and-iis-8)
* [<span data-ttu-id="e72ad-550">Nasazení aplikace .NET Core</span><span class="sxs-lookup"><span data-stu-id="e72ad-550">.NET Core application deployment</span></span>](/dotnet/core/deploying/)
* <xref:host-and-deploy/aspnet-core-module>
* <xref:host-and-deploy/directory-structure>
* <xref:host-and-deploy/iis/modules>
* <xref:test/troubleshoot-azure-iis>
* <xref:host-and-deploy/azure-iis-errors-reference>

## <a name="additional-resources"></a><span data-ttu-id="e72ad-551">Další zdroje</span><span class="sxs-lookup"><span data-stu-id="e72ad-551">Additional resources</span></span>

* <xref:test/troubleshoot>
* <xref:index>
* [<span data-ttu-id="e72ad-552">Oficiální web služby Microsoft IIS</span><span class="sxs-lookup"><span data-stu-id="e72ad-552">The Official Microsoft IIS Site</span></span>](https://www.iis.net/)
* [<span data-ttu-id="e72ad-553">Knihovna technického obsahu systému Windows Server</span><span class="sxs-lookup"><span data-stu-id="e72ad-553">Windows Server technical content library</span></span>](/windows-server/windows-server)
* [<span data-ttu-id="e72ad-554">HTTP/2 ve službě IIS</span><span class="sxs-lookup"><span data-stu-id="e72ad-554">HTTP/2 on IIS</span></span>](/iis/get-started/whats-new-in-iis-10/http2-on-iis)
* <xref:host-and-deploy/iis/transform-webconfig>

::: moniker-end

::: moniker range="= aspnetcore-2.2"

<span data-ttu-id="e72ad-555">Výukové prostředí o publikování aplikace ASP.NET Core na server <xref:tutorials/publish-to-iis>služby IIS naleznete v tématu .</span><span class="sxs-lookup"><span data-stu-id="e72ad-555">For a tutorial experience on publishing an ASP.NET Core app to an IIS server, see <xref:tutorials/publish-to-iis>.</span></span>

[<span data-ttu-id="e72ad-556">Instalace balíčku hostingu jádra .NET</span><span class="sxs-lookup"><span data-stu-id="e72ad-556">Install the .NET Core Hosting Bundle</span></span>](#install-the-net-core-hosting-bundle)

## <a name="supported-operating-systems"></a><span data-ttu-id="e72ad-557">Podporované operační systémy</span><span class="sxs-lookup"><span data-stu-id="e72ad-557">Supported operating systems</span></span>

<span data-ttu-id="e72ad-558">Podporovány jsou následující operační systémy:</span><span class="sxs-lookup"><span data-stu-id="e72ad-558">The following operating systems are supported:</span></span>

* <span data-ttu-id="e72ad-559">Windows 7 nebo novější</span><span class="sxs-lookup"><span data-stu-id="e72ad-559">Windows 7 or later</span></span>
* <span data-ttu-id="e72ad-560">Windows Server 2008 R2 nebo novější</span><span class="sxs-lookup"><span data-stu-id="e72ad-560">Windows Server 2008 R2 or later</span></span>

<span data-ttu-id="e72ad-561">[Server HTTP.sys](xref:fundamentals/servers/httpsys) (dříve nazývaný WebListener) nefunguje v konfiguraci reverzního proxy serveru se službou IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-561">[HTTP.sys server](xref:fundamentals/servers/httpsys) (formerly called WebListener) doesn't work in a reverse proxy configuration with IIS.</span></span> <span data-ttu-id="e72ad-562">Použijte [server Kestrel](xref:fundamentals/servers/kestrel).</span><span class="sxs-lookup"><span data-stu-id="e72ad-562">Use the [Kestrel server](xref:fundamentals/servers/kestrel).</span></span>

<span data-ttu-id="e72ad-563">Informace o hostování v <xref:host-and-deploy/azure-apps/index>Azure najdete v tématu .</span><span class="sxs-lookup"><span data-stu-id="e72ad-563">For information on hosting in Azure, see <xref:host-and-deploy/azure-apps/index>.</span></span>

<span data-ttu-id="e72ad-564">Pokyny pro řešení <xref:test/troubleshoot>potíží naleznete v tématu .</span><span class="sxs-lookup"><span data-stu-id="e72ad-564">For troubleshooting guidance, see <xref:test/troubleshoot>.</span></span>

## <a name="supported-platforms"></a><span data-ttu-id="e72ad-565">Podporované platformy</span><span class="sxs-lookup"><span data-stu-id="e72ad-565">Supported platforms</span></span>

<span data-ttu-id="e72ad-566">Podporovány jsou aplikace publikované pro 32bitové (x86) nebo 64bitové (x64) nasazení.</span><span class="sxs-lookup"><span data-stu-id="e72ad-566">Apps published for 32-bit (x86) or 64-bit (x64) deployment are supported.</span></span> <span data-ttu-id="e72ad-567">Nasazení 32bitové aplikace s 32bitovou sadou .NET Core SDK, pokud ji ne:</span><span class="sxs-lookup"><span data-stu-id="e72ad-567">Deploy a 32-bit app with a 32-bit (x86) .NET Core SDK unless the app:</span></span>

* <span data-ttu-id="e72ad-568">Vyžaduje větší adresní prostor virtuální paměti, který je k dispozici pro 64bitovou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="e72ad-568">Requires the larger virtual memory address space available to a 64-bit app.</span></span>
* <span data-ttu-id="e72ad-569">Vyžaduje větší velikost zásobníku iis.</span><span class="sxs-lookup"><span data-stu-id="e72ad-569">Requires the larger IIS stack size.</span></span>
* <span data-ttu-id="e72ad-570">Má 64bitové nativní závislosti.</span><span class="sxs-lookup"><span data-stu-id="e72ad-570">Has 64-bit native dependencies.</span></span>

<span data-ttu-id="e72ad-571">K publikování 64bitové sady SDK jádra (x64) použijte 64bitovou sadu .NET Core SDK.</span><span class="sxs-lookup"><span data-stu-id="e72ad-571">Use a 64-bit (x64) .NET Core SDK to publish a 64-bit app.</span></span> <span data-ttu-id="e72ad-572">V hostitelském systému musí být k dispozici 64bitový běhový čas.</span><span class="sxs-lookup"><span data-stu-id="e72ad-572">A 64-bit runtime must be present on the host system.</span></span>

## <a name="hosting-models"></a><span data-ttu-id="e72ad-573">Modely hostingu</span><span class="sxs-lookup"><span data-stu-id="e72ad-573">Hosting models</span></span>

### <a name="in-process-hosting-model"></a><span data-ttu-id="e72ad-574">Model hostování v procesu</span><span class="sxs-lookup"><span data-stu-id="e72ad-574">In-process hosting model</span></span>

<span data-ttu-id="e72ad-575">Pomocí hostování v rámci procesu běží aplikace ASP.NET Core ve stejném procesu jako pracovní proces služby IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-575">Using in-process hosting, an ASP.NET Core app runs in the same process as its IIS worker process.</span></span> <span data-ttu-id="e72ad-576">Hostování v procesu poskytuje lepší výkon než mimoproceshosting, protože požadavky nejsou proxied přes adaptér zpětné smyčky, síťové rozhraní, které vrací odchozí síťový provoz zpět do stejného počítače.</span><span class="sxs-lookup"><span data-stu-id="e72ad-576">In-process hosting provides improved performance over out-of-process hosting because requests aren't proxied over the loopback adapter, a network interface that returns outgoing network traffic back to the same machine.</span></span> <span data-ttu-id="e72ad-577">Služba IIS zpracovává správu procesů pomocí [služby aktivace procesů systému Windows (WAS).](/iis/manage/provisioning-and-managing-iis/features-of-the-windows-process-activation-service-was)</span><span class="sxs-lookup"><span data-stu-id="e72ad-577">IIS handles process management with the [Windows Process Activation Service (WAS)](/iis/manage/provisioning-and-managing-iis/features-of-the-windows-process-activation-service-was).</span></span>

<span data-ttu-id="e72ad-578">Základní [modul ASP.NET](xref:host-and-deploy/aspnet-core-module):</span><span class="sxs-lookup"><span data-stu-id="e72ad-578">The [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module):</span></span>

* <span data-ttu-id="e72ad-579">Provede inicializaci aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-579">Performs app initialization.</span></span>
  * <span data-ttu-id="e72ad-580">Načte [CoreCLR](/dotnet/standard/glossary#coreclr).</span><span class="sxs-lookup"><span data-stu-id="e72ad-580">Loads the [CoreCLR](/dotnet/standard/glossary#coreclr).</span></span>
  * <span data-ttu-id="e72ad-581">Volání `Program.Main`.</span><span class="sxs-lookup"><span data-stu-id="e72ad-581">Calls `Program.Main`.</span></span>
* <span data-ttu-id="e72ad-582">Zpracovává životnost nativního požadavku služby IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-582">Handles the lifetime of the IIS native request.</span></span>

<span data-ttu-id="e72ad-583">Model hostování v procesu není podporován pro aplikace ASP.NET Core, které cílí na rozhraní .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="e72ad-583">The in-process hosting model isn't supported for ASP.NET Core apps that target the .NET Framework.</span></span>

<span data-ttu-id="e72ad-584">Následující diagram znázorňuje vztah mezi iis, ASP.NET základní modul a aplikace hostované v procesu:</span><span class="sxs-lookup"><span data-stu-id="e72ad-584">The following diagram illustrates the relationship between IIS, the ASP.NET Core Module, and an app hosted in-process:</span></span>

![ASP.NET core modul ve scénáři hostování v procesu](index/_static/ancm-inprocess.png)

<span data-ttu-id="e72ad-586">Požadavek přichází z webu na ovladač HTTP.sys v režimu jádra.</span><span class="sxs-lookup"><span data-stu-id="e72ad-586">A request arrives from the web to the kernel-mode HTTP.sys driver.</span></span> <span data-ttu-id="e72ad-587">Řidič směruje nativní požadavek do služby IIS na nakonfigurovaném portu webu, obvykle 80 (HTTP) nebo 443 (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="e72ad-587">The driver routes the native request to IIS on the website's configured port, usually 80 (HTTP) or 443 (HTTPS).</span></span> <span data-ttu-id="e72ad-588">Základní modul ASP.NET obdrží nativní požadavek a předá`IISHttpServer`jej serveru HTTP služby IIS ( ).</span><span class="sxs-lookup"><span data-stu-id="e72ad-588">The ASP.NET Core Module receives the native request and passes it to IIS HTTP Server (`IISHttpServer`).</span></span> <span data-ttu-id="e72ad-589">Server HTTP služby IIS je implementace serveru v procesu pro službu IIS, která převádí požadavek z nativního na spravovaný.</span><span class="sxs-lookup"><span data-stu-id="e72ad-589">IIS HTTP Server is an in-process server implementation for IIS that converts the request from native to managed.</span></span>

<span data-ttu-id="e72ad-590">Po zpracování požadavku serverem HTTP služby IIS je požadavek odeslán do kanálu middlewaru ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="e72ad-590">After the IIS HTTP Server processes the request, the request is pushed into the ASP.NET Core middleware pipeline.</span></span> <span data-ttu-id="e72ad-591">Middleware kanálu zpracovává požadavek a předá `HttpContext` jej jako instanci logiky aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-591">The middleware pipeline handles the request and passes it on as an `HttpContext` instance to the app's logic.</span></span> <span data-ttu-id="e72ad-592">Odpověď aplikace je předána zpět do služby IIS prostřednictvím serveru HTTP služby IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-592">The app's response is passed back to IIS through IIS HTTP Server.</span></span> <span data-ttu-id="e72ad-593">Služba IIS odešle odpověď klientovi, který požadavek inicioval.</span><span class="sxs-lookup"><span data-stu-id="e72ad-593">IIS sends the response to the client that initiated the request.</span></span>

<span data-ttu-id="e72ad-594">Hostování v procesu je přihlášení pro stávající aplikace, ale [dotnet nové](/dotnet/core/tools/dotnet-new) šablony výchozí v procesu hostování modelu pro všechny scénáře služby IIS a IIS Express.</span><span class="sxs-lookup"><span data-stu-id="e72ad-594">In-process hosting is opt-in for existing apps, but [dotnet new](/dotnet/core/tools/dotnet-new) templates default to the in-process hosting model for all IIS and IIS Express scenarios.</span></span>

<span data-ttu-id="e72ad-595">`CreateDefaultBuilder`přidá <xref:Microsoft.AspNetCore.Hosting.Server.IServer> instanci <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderIISExtensions.UseIIS*> voláním metody pro spuštění [coreclru](/dotnet/standard/glossary#coreclr) a hostování aplikace uvnitř pracovního procesu služby IIS (*w3wp.exe* nebo *iisexpress.exe*).</span><span class="sxs-lookup"><span data-stu-id="e72ad-595">`CreateDefaultBuilder` adds an <xref:Microsoft.AspNetCore.Hosting.Server.IServer> instance by calling the <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderIISExtensions.UseIIS*> method to boot the [CoreCLR](/dotnet/standard/glossary#coreclr) and host the app inside of the IIS worker process (*w3wp.exe* or *iisexpress.exe*).</span></span> <span data-ttu-id="e72ad-596">Testy výkonu ukazují, že hostování aplikace .NET Core v procesu přináší výrazně vyšší propustnost požadavků ve srovnání s hostováním aplikací mimo proces a proxy požadavků na server [Kestrel.](xref:fundamentals/servers/kestrel)</span><span class="sxs-lookup"><span data-stu-id="e72ad-596">Performance tests indicate that hosting a .NET Core app in-process delivers significantly higher request throughput compared to hosting the app out-of-process and proxying requests to [Kestrel](xref:fundamentals/servers/kestrel) server.</span></span>

### <a name="out-of-process-hosting-model"></a><span data-ttu-id="e72ad-597">Model hostování mimo proces</span><span class="sxs-lookup"><span data-stu-id="e72ad-597">Out-of-process hosting model</span></span>

<span data-ttu-id="e72ad-598">Vzhledem k tomu, že aplikace ASP.NET Core běží v procesu odděleném od pracovního procesu služby IIS, zpracovává ASP.NET core module správu procesů.</span><span class="sxs-lookup"><span data-stu-id="e72ad-598">Because ASP.NET Core apps run in a process separate from the IIS worker process, the ASP.NET Core Module handles process management.</span></span> <span data-ttu-id="e72ad-599">Modul spustí proces pro aplikaci ASP.NET Core při příchodu prvního požadavku a restartuje aplikaci, pokud se vypne nebo dojde k chybě.</span><span class="sxs-lookup"><span data-stu-id="e72ad-599">The module starts the process for the ASP.NET Core app when the first request arrives and restarts the app if it shuts down or crashes.</span></span> <span data-ttu-id="e72ad-600">Toto je v podstatě stejné chování jako u aplikací, které běží v procesu, které jsou spravovány [službou aktivace procesu systému Windows (WAS)](/iis/manage/provisioning-and-managing-iis/features-of-the-windows-process-activation-service-was).</span><span class="sxs-lookup"><span data-stu-id="e72ad-600">This is essentially the same behavior as seen with apps that run in-process that are managed by the [Windows Process Activation Service (WAS)](/iis/manage/provisioning-and-managing-iis/features-of-the-windows-process-activation-service-was).</span></span>

<span data-ttu-id="e72ad-601">Následující diagram znázorňuje vztah mezi iis, ASP.NET základní modul a aplikace hostované mimo proces:</span><span class="sxs-lookup"><span data-stu-id="e72ad-601">The following diagram illustrates the relationship between IIS, the ASP.NET Core Module, and an app hosted out-of-process:</span></span>

![ASP.NET základní modul ve scénáři mimoproceshostingového hostingu](index/_static/ancm-outofprocess.png)

<span data-ttu-id="e72ad-603">Požadavky dorazí z webu do ovladače HTTP.sys v režimu jádra.</span><span class="sxs-lookup"><span data-stu-id="e72ad-603">Requests arrive from the web to the kernel-mode HTTP.sys driver.</span></span> <span data-ttu-id="e72ad-604">Řidič směruje požadavky do služby IIS na nakonfigurovaném portu webu, obvykle 80 (HTTP) nebo 443 (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="e72ad-604">The driver routes the requests to IIS on the website's configured port, usually 80 (HTTP) or 443 (HTTPS).</span></span> <span data-ttu-id="e72ad-605">Modul předá požadavky Kestrel na náhodný port pro aplikaci, která není port 80 nebo 443.</span><span class="sxs-lookup"><span data-stu-id="e72ad-605">The module forwards the requests to Kestrel on a random port for the app, which isn't port 80 or 443.</span></span>

<span data-ttu-id="e72ad-606">Modul určuje port prostřednictvím proměnné prostředí při <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderIISExtensions.UseIISIntegration*> spuštění a rozšíření konfiguruje server pro naslouchání . `http://localhost:{PORT}`</span><span class="sxs-lookup"><span data-stu-id="e72ad-606">The module specifies the port via an environment variable at startup, and the <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderIISExtensions.UseIISIntegration*> extension configures the server to listen on `http://localhost:{PORT}`.</span></span> <span data-ttu-id="e72ad-607">Jsou prováděny další kontroly a požadavky, které nepocházejí z modulu, jsou odmítnuty.</span><span class="sxs-lookup"><span data-stu-id="e72ad-607">Additional checks are performed, and requests that don't originate from the module are rejected.</span></span> <span data-ttu-id="e72ad-608">Modul nepodporuje předávání https, takže požadavky jsou předávány přes HTTP i v případě, že přijaté službou IIS přes protokol HTTPS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-608">The module doesn't support HTTPS forwarding, so requests are forwarded over HTTP even if received by IIS over HTTPS.</span></span>

<span data-ttu-id="e72ad-609">Poté, co Kestrel vyzvedne požadavek z modulu, je požadavek posunut do kanálu ASP.NET middleware.</span><span class="sxs-lookup"><span data-stu-id="e72ad-609">After Kestrel picks up the request from the module, the request is pushed into the ASP.NET Core middleware pipeline.</span></span> <span data-ttu-id="e72ad-610">Middleware kanálu zpracovává požadavek a předá `HttpContext` jej jako instanci logiky aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-610">The middleware pipeline handles the request and passes it on as an `HttpContext` instance to the app's logic.</span></span> <span data-ttu-id="e72ad-611">Middleware přidané integrací služby IIS aktualizuje schéma, vzdálenou IP adresu a pathbase tak, aby odpovídaly předání požadavku ke společnosti Kestrel.</span><span class="sxs-lookup"><span data-stu-id="e72ad-611">Middleware added by IIS Integration updates the scheme, remote IP, and pathbase to account for forwarding the request to Kestrel.</span></span> <span data-ttu-id="e72ad-612">Odpověď aplikace je předána zpět do služby IIS, která ji odešle zpět do klienta HTTP, který inicioval požadavek.</span><span class="sxs-lookup"><span data-stu-id="e72ad-612">The app's response is passed back to IIS, which pushes it back out to the HTTP client that initiated the request.</span></span>

<span data-ttu-id="e72ad-613">Pokyny ke konfiguraci ASP.NET <xref:host-and-deploy/aspnet-core-module>core modulem naleznete v tématu .</span><span class="sxs-lookup"><span data-stu-id="e72ad-613">For ASP.NET Core Module configuration guidance, see <xref:host-and-deploy/aspnet-core-module>.</span></span>

<span data-ttu-id="e72ad-614">Další informace o hostování najdete [v tématu Host in ASP.NET Core](xref:fundamentals/index#host).</span><span class="sxs-lookup"><span data-stu-id="e72ad-614">For more information on hosting, see [Host in ASP.NET Core](xref:fundamentals/index#host).</span></span>

## <a name="application-configuration"></a><span data-ttu-id="e72ad-615">Konfigurace aplikací</span><span class="sxs-lookup"><span data-stu-id="e72ad-615">Application configuration</span></span>

### <a name="enable-the-iisintegration-components"></a><span data-ttu-id="e72ad-616">Povolení součástí Integrace iIS</span><span class="sxs-lookup"><span data-stu-id="e72ad-616">Enable the IISIntegration components</span></span>

<span data-ttu-id="e72ad-617">Při vytváření hostitele `CreateWebHostBuilder` v *(Program.cs*) volání <xref:Microsoft.AspNetCore.WebHost.CreateDefaultBuilder*> umožňující integraci iis:</span><span class="sxs-lookup"><span data-stu-id="e72ad-617">When building a host in `CreateWebHostBuilder` (*Program.cs*), call <xref:Microsoft.AspNetCore.WebHost.CreateDefaultBuilder*> to enable IIS integration:</span></span>

```csharp
public static IWebHostBuilder CreateWebHostBuilder(string[] args) =>
    WebHost.CreateDefaultBuilder(args)
        ...
```

<span data-ttu-id="e72ad-618">Další informace `CreateDefaultBuilder`naleznete <xref:fundamentals/host/web-host#set-up-a-host>v tématu .</span><span class="sxs-lookup"><span data-stu-id="e72ad-618">For more information on `CreateDefaultBuilder`, see <xref:fundamentals/host/web-host#set-up-a-host>.</span></span>

### <a name="iis-options"></a><span data-ttu-id="e72ad-619">Možnosti iis</span><span class="sxs-lookup"><span data-stu-id="e72ad-619">IIS options</span></span>

<span data-ttu-id="e72ad-620">**Model hostování v procesu**</span><span class="sxs-lookup"><span data-stu-id="e72ad-620">**In-process hosting model**</span></span>

<span data-ttu-id="e72ad-621">Chcete-li konfigurovat možnosti serveru IIS, zahrňte konfiguraci služby v <xref:Microsoft.AspNetCore.Builder.IISServerOptions> aplikaci <xref:Microsoft.AspNetCore.Hosting.IStartup.ConfigureServices*>.</span><span class="sxs-lookup"><span data-stu-id="e72ad-621">To configure IIS Server options, include a service configuration for <xref:Microsoft.AspNetCore.Builder.IISServerOptions> in <xref:Microsoft.AspNetCore.Hosting.IStartup.ConfigureServices*>.</span></span> <span data-ttu-id="e72ad-622">Následující příklad zakáže automatické ověřování:</span><span class="sxs-lookup"><span data-stu-id="e72ad-622">The following example disables AutomaticAuthentication:</span></span>

```csharp
services.Configure<IISServerOptions>(options => 
{
    options.AutomaticAuthentication = false;
});
```

| <span data-ttu-id="e72ad-623">Možnost</span><span class="sxs-lookup"><span data-stu-id="e72ad-623">Option</span></span>                         | <span data-ttu-id="e72ad-624">Výchozí</span><span class="sxs-lookup"><span data-stu-id="e72ad-624">Default</span></span> | <span data-ttu-id="e72ad-625">Nastavení</span><span class="sxs-lookup"><span data-stu-id="e72ad-625">Setting</span></span> |
| ------------------------------ | :-----: | ------- |
| `AutomaticAuthentication`      | `true`  | <span data-ttu-id="e72ad-626">Pokud `true`server IIS `HttpContext.User` nastaví ověřené ověřování [systému Windows](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="e72ad-626">If `true`, IIS Server sets the `HttpContext.User` authenticated by [Windows Authentication](xref:security/authentication/windowsauth).</span></span> <span data-ttu-id="e72ad-627">Pokud `false`server poskytuje identitu pouze `HttpContext.User` pro výzvy a reaguje na `AuthenticationScheme`ně, pokud o to výslovně požádá .</span><span class="sxs-lookup"><span data-stu-id="e72ad-627">If `false`, the server only provides an identity for `HttpContext.User` and responds to challenges when explicitly requested by the `AuthenticationScheme`.</span></span> <span data-ttu-id="e72ad-628">Aby bylo možné službu `AutomaticAuthentication` IIS fungovat, musí být ve službě IIS povoleno ověřování systému Windows.</span><span class="sxs-lookup"><span data-stu-id="e72ad-628">Windows Authentication must be enabled in IIS for `AutomaticAuthentication` to function.</span></span> <span data-ttu-id="e72ad-629">Další informace naleznete v tématu [Ověřování systému Windows](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="e72ad-629">For more information, see [Windows Authentication](xref:security/authentication/windowsauth).</span></span> |
| `AuthenticationDisplayName`    | `null`  | <span data-ttu-id="e72ad-630">Nastaví zobrazované jméno zobrazené uživatelům na přihlašovacích stránkách.</span><span class="sxs-lookup"><span data-stu-id="e72ad-630">Sets the display name shown to users on login pages.</span></span> |

<span data-ttu-id="e72ad-631">**Model hostování mimo proces**</span><span class="sxs-lookup"><span data-stu-id="e72ad-631">**Out-of-process hosting model**</span></span>

<span data-ttu-id="e72ad-632">Chcete-li konfigurovat možnosti služby <xref:Microsoft.AspNetCore.Builder.IISOptions> <xref:Microsoft.AspNetCore.Hosting.IStartup.ConfigureServices*>IIS, zahrňte konfiguraci služby v aplikaci .</span><span class="sxs-lookup"><span data-stu-id="e72ad-632">To configure IIS options, include a service configuration for <xref:Microsoft.AspNetCore.Builder.IISOptions> in <xref:Microsoft.AspNetCore.Hosting.IStartup.ConfigureServices*>.</span></span> <span data-ttu-id="e72ad-633">Následující příklad zabrání aplikaci v naplnění `HttpContext.Connection.ClientCertificate`:</span><span class="sxs-lookup"><span data-stu-id="e72ad-633">The following example prevents the app from populating `HttpContext.Connection.ClientCertificate`:</span></span>

```csharp
services.Configure<IISOptions>(options => 
{
    options.ForwardClientCertificate = false;
});
```

| <span data-ttu-id="e72ad-634">Možnost</span><span class="sxs-lookup"><span data-stu-id="e72ad-634">Option</span></span>                         | <span data-ttu-id="e72ad-635">Výchozí</span><span class="sxs-lookup"><span data-stu-id="e72ad-635">Default</span></span> | <span data-ttu-id="e72ad-636">Nastavení</span><span class="sxs-lookup"><span data-stu-id="e72ad-636">Setting</span></span> |
| ------------------------------ | :-----: | ------- |
| `AutomaticAuthentication`      | `true`  | <span data-ttu-id="e72ad-637">Pokud `true` [middleware integrace služby IIS](#enable-the-iisintegration-components) nastaví ověřené ověřování systému `HttpContext.User` [Windows](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="e72ad-637">If `true`, [IIS Integration Middleware](#enable-the-iisintegration-components) sets the `HttpContext.User` authenticated by [Windows Authentication](xref:security/authentication/windowsauth).</span></span> <span data-ttu-id="e72ad-638">Pokud `false`middleware poskytuje identitu `HttpContext.User` a reaguje na problémy pouze na `AuthenticationScheme`žádost .</span><span class="sxs-lookup"><span data-stu-id="e72ad-638">If `false`, the middleware only provides an identity for `HttpContext.User` and responds to challenges when explicitly requested by the `AuthenticationScheme`.</span></span> <span data-ttu-id="e72ad-639">Aby bylo možné službu `AutomaticAuthentication` IIS fungovat, musí být ve službě IIS povoleno ověřování systému Windows.</span><span class="sxs-lookup"><span data-stu-id="e72ad-639">Windows Authentication must be enabled in IIS for `AutomaticAuthentication` to function.</span></span> <span data-ttu-id="e72ad-640">Další informace naleznete v tématu [Ověřování systému Windows.](xref:security/authentication/windowsauth)</span><span class="sxs-lookup"><span data-stu-id="e72ad-640">For more information, see the [Windows Authentication](xref:security/authentication/windowsauth) topic.</span></span> |
| `AuthenticationDisplayName`    | `null`  | <span data-ttu-id="e72ad-641">Nastaví zobrazované jméno zobrazené uživatelům na přihlašovacích stránkách.</span><span class="sxs-lookup"><span data-stu-id="e72ad-641">Sets the display name shown to users on login pages.</span></span> |
| `ForwardClientCertificate`     | `true`  | <span data-ttu-id="e72ad-642">Pokud `true` a `MS-ASPNETCORE-CLIENTCERT` hlavička požadavku `HttpContext.Connection.ClientCertificate` je k dispozici, je naplněn.</span><span class="sxs-lookup"><span data-stu-id="e72ad-642">If `true` and the `MS-ASPNETCORE-CLIENTCERT` request header is present, the `HttpContext.Connection.ClientCertificate` is populated.</span></span> |

### <a name="proxy-server-and-load-balancer-scenarios"></a><span data-ttu-id="e72ad-643">Scénáře proxy serveru a vyrovnávání zatížení</span><span class="sxs-lookup"><span data-stu-id="e72ad-643">Proxy server and load balancer scenarios</span></span>

<span data-ttu-id="e72ad-644">[Middleware integrace služby IIS](#enable-the-iisintegration-components), který konfiguruje middleware předávaných záhlaví a ASP.NET základní modul, jsou nakonfigurovány tak, aby předávaly schéma (HTTP/HTTPS) a vzdálenou adresu IP, ze které požadavek pochází.</span><span class="sxs-lookup"><span data-stu-id="e72ad-644">The [IIS Integration Middleware](#enable-the-iisintegration-components), which configures Forwarded Headers Middleware, and the ASP.NET Core Module are configured to forward the scheme (HTTP/HTTPS) and the remote IP address where the request originated.</span></span> <span data-ttu-id="e72ad-645">Další konfigurace může být vyžadována pro aplikace hostované za dalšími proxy servery a nástroji pro vyrovnávání zatížení.</span><span class="sxs-lookup"><span data-stu-id="e72ad-645">Additional configuration might be required for apps hosted behind additional proxy servers and load balancers.</span></span> <span data-ttu-id="e72ad-646">Další informace naleznete v [tématu Configure ASP.NET Core to work with proxy servers and load balancers](xref:host-and-deploy/proxy-load-balancer).</span><span class="sxs-lookup"><span data-stu-id="e72ad-646">For more information, see [Configure ASP.NET Core to work with proxy servers and load balancers](xref:host-and-deploy/proxy-load-balancer).</span></span>

### <a name="webconfig-file"></a><span data-ttu-id="e72ad-647">soubor web.config</span><span class="sxs-lookup"><span data-stu-id="e72ad-647">web.config file</span></span>

<span data-ttu-id="e72ad-648">Soubor *web.config* konfiguruje [základní modul ASP.NET](xref:host-and-deploy/aspnet-core-module).</span><span class="sxs-lookup"><span data-stu-id="e72ad-648">The *web.config* file configures the [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module).</span></span> <span data-ttu-id="e72ad-649">Při publikování projektu je vytváření, transformace a publikování souboru *web.config* zpracováno cílem MSBuild (`_TransformWebConfig`).</span><span class="sxs-lookup"><span data-stu-id="e72ad-649">Creating, transforming, and publishing the *web.config* file is handled by an MSBuild target (`_TransformWebConfig`) when the project is published.</span></span> <span data-ttu-id="e72ad-650">Tento cíl je k dispozici v`Microsoft.NET.Sdk.Web`cílech sady Web SDK ( ).</span><span class="sxs-lookup"><span data-stu-id="e72ad-650">This target is present in the Web SDK targets (`Microsoft.NET.Sdk.Web`).</span></span> <span data-ttu-id="e72ad-651">Sada SDK je nastavena v horní části souboru projektu:</span><span class="sxs-lookup"><span data-stu-id="e72ad-651">The SDK is set at the top of the project file:</span></span>

```xml
<Project Sdk="Microsoft.NET.Sdk.Web">
```

<span data-ttu-id="e72ad-652">Pokud soubor *web.config* není v projektu přítomen, je soubor vytvořen se správnou *processPath* a *argumenty* pro konfiguraci ASP.NET základnímodul a přesunutna do [publikovaného výstupu](xref:host-and-deploy/directory-structure).</span><span class="sxs-lookup"><span data-stu-id="e72ad-652">If a *web.config* file isn't present in the project, the file is created with the correct *processPath* and *arguments* to configure the ASP.NET Core Module and moved to [published output](xref:host-and-deploy/directory-structure).</span></span>

<span data-ttu-id="e72ad-653">Pokud *web.config* soubor je přítomen v projektu, soubor je transformován se správným *processPath* a *argumenty* pro konfiguraci ASP.NET core modul a přesunuta do publikovaného výstupu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-653">If a *web.config* file is present in the project, the file is transformed with the correct *processPath* and *arguments* to configure the ASP.NET Core Module and moved to published output.</span></span> <span data-ttu-id="e72ad-654">Transformace nezmění nastavení konfigurace služby IIS v souboru.</span><span class="sxs-lookup"><span data-stu-id="e72ad-654">The transformation doesn't modify IIS configuration settings in the file.</span></span>

<span data-ttu-id="e72ad-655">Soubor *web.config* může poskytovat další nastavení konfigurace služby IIS, která řídí aktivní moduly služby IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-655">The *web.config* file may provide additional IIS configuration settings that control active IIS modules.</span></span> <span data-ttu-id="e72ad-656">Informace o modulech služby IIS, které jsou schopné zpracovávat požadavky pomocí aplikací ASP.NET Core, naleznete v tématu [modulů služby IIS.](xref:host-and-deploy/iis/modules)</span><span class="sxs-lookup"><span data-stu-id="e72ad-656">For information on IIS modules that are capable of processing requests with ASP.NET Core apps, see the [IIS modules](xref:host-and-deploy/iis/modules) topic.</span></span>

<span data-ttu-id="e72ad-657">Chcete-li zabránit webové sady SDK v transformaci souboru *web.config,* použijte vlastnost \*\* \<IsTransformWebConfigDisabled>\*\* v souboru projektu:</span><span class="sxs-lookup"><span data-stu-id="e72ad-657">To prevent the Web SDK from transforming the *web.config* file, use the **\<IsTransformWebConfigDisabled>** property in the project file:</span></span>

```xml
<PropertyGroup>
  <IsTransformWebConfigDisabled>true</IsTransformWebConfigDisabled>
</PropertyGroup>
```

<span data-ttu-id="e72ad-658">Při zakázání webové sady SDK z transformace souboru *processPath* a argumenty by měly být ručně *nastaveny* vývojářem.</span><span class="sxs-lookup"><span data-stu-id="e72ad-658">When disabling the Web SDK from transforming the file, the *processPath* and *arguments* should be manually set by the developer.</span></span> <span data-ttu-id="e72ad-659">Další informace naleznete v tématu <xref:host-and-deploy/aspnet-core-module>.</span><span class="sxs-lookup"><span data-stu-id="e72ad-659">For more information, see <xref:host-and-deploy/aspnet-core-module>.</span></span>

### <a name="webconfig-file-location"></a><span data-ttu-id="e72ad-660">umístění souboru web.config</span><span class="sxs-lookup"><span data-stu-id="e72ad-660">web.config file location</span></span>

<span data-ttu-id="e72ad-661">Aby bylo možné správně nastavit [ASP.NET core modul,](xref:host-and-deploy/aspnet-core-module) musí být soubor *web.config* přítomen na [cestě kořenového obsahu](xref:fundamentals/index#content-root) (obvykle základní cesta aplikace) nasazené aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-661">In order to set up the [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module) correctly, the *web.config* file must be present at the [content root](xref:fundamentals/index#content-root) path (typically the app base path) of the deployed app.</span></span> <span data-ttu-id="e72ad-662">Jedná se o stejné umístění jako fyzická cesta k webu poskytnutá službu IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-662">This is the same location as the website physical path provided to IIS.</span></span> <span data-ttu-id="e72ad-663">Soubor *web.config* je vyžadován v kořenovém adresáři aplikace, aby bylo možné publikovat více aplikací pomocí nasazení webu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-663">The *web.config* file is required at the root of the app to enable the publishing of multiple apps using Web Deploy.</span></span>

<span data-ttu-id="e72ad-664">Na fyzické cestě aplikace existují citlivé soubory, například \* \<assembly>.runtimeconfig.json*, \* \<assembly>.xml* (komentáře xml documentation) a \* \<assembly>.deps.json\*.</span><span class="sxs-lookup"><span data-stu-id="e72ad-664">Sensitive files exist on the app's physical path, such as *\<assembly>.runtimeconfig.json*, *\<assembly>.xml* (XML Documentation comments), and *\<assembly>.deps.json*.</span></span> <span data-ttu-id="e72ad-665">Pokud je soubor *web.config* přítomen a web se spustí normálně, služby IIS tyto citlivé soubory neobsluhuje, pokud jsou požadovány.</span><span class="sxs-lookup"><span data-stu-id="e72ad-665">When the *web.config* file is present and the site starts normally, IIS doesn't serve these sensitive files if they're requested.</span></span> <span data-ttu-id="e72ad-666">Pokud soubor *web.config* chybí, je nesprávně pojmenován nebo jej nelze nakonfigurovat pro normální spuštění, může služba IIS veřejně sloužit citlivým souborům.</span><span class="sxs-lookup"><span data-stu-id="e72ad-666">If the *web.config* file is missing, incorrectly named, or unable to configure the site for normal startup, IIS may serve sensitive files publicly.</span></span>

<span data-ttu-id="e72ad-667">**Soubor *web.config* musí být v nasazení vždy přítomen, správně pojmenovaný a musí být schopen nakonfigurovat web pro normální spuštění. Nikdy neodstraňujte soubor *web.config* z produkčního nasazení.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-667">**The *web.config* file must be present in the deployment at all times, correctly named, and able to configure the site for normal start up. Never remove the *web.config* file from a production deployment.**</span></span>

### <a name="transform-webconfig"></a><span data-ttu-id="e72ad-668">Transformace souboru web.config</span><span class="sxs-lookup"><span data-stu-id="e72ad-668">Transform web.config</span></span>

<span data-ttu-id="e72ad-669">Pokud potřebujete transformovat *web.config* při publikování (například nastavit proměnné prostředí na základě konfigurace, profilu nebo prostředí), přečtěte si viz <xref:host-and-deploy/iis/transform-webconfig>.</span><span class="sxs-lookup"><span data-stu-id="e72ad-669">If you need to transform *web.config* on publish (for example, set environment variables based on the configuration, profile, or environment), see <xref:host-and-deploy/iis/transform-webconfig>.</span></span>

## <a name="iis-configuration"></a><span data-ttu-id="e72ad-670">Konfigurace služby IIS</span><span class="sxs-lookup"><span data-stu-id="e72ad-670">IIS configuration</span></span>

<span data-ttu-id="e72ad-671">**Operační systémy Windows Server**</span><span class="sxs-lookup"><span data-stu-id="e72ad-671">**Windows Server operating systems**</span></span>

<span data-ttu-id="e72ad-672">Povolte roli serveru **webového serveru (IIS)** a vytvořte služby rolí.</span><span class="sxs-lookup"><span data-stu-id="e72ad-672">Enable the **Web Server (IIS)** server role and establish role services.</span></span>

1. <span data-ttu-id="e72ad-673">Použijte Průvodce **přidáním rolí a funkcí** z nabídky **Spravovat** nebo odkaz ve **Správci serveru**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-673">Use the **Add Roles and Features** wizard from the **Manage** menu or the link in **Server Manager**.</span></span> <span data-ttu-id="e72ad-674">V kroku **Role serveru** zaškrtněte políčko **U webového serveru (IIS).**</span><span class="sxs-lookup"><span data-stu-id="e72ad-674">On the **Server Roles** step, check the box for **Web Server (IIS)**.</span></span>

   ![Role služby IIS webového serveru je vybrána v kroku Vybrat role serveru.](index/_static/server-roles-ws2016.png)

1. <span data-ttu-id="e72ad-676">Po kroku **Funkce** se krok **služby role** načte pro webový server (IIS).</span><span class="sxs-lookup"><span data-stu-id="e72ad-676">After the **Features** step, the **Role services** step loads for Web Server (IIS).</span></span> <span data-ttu-id="e72ad-677">Vyberte požadované služby rolí služby IIS nebo přijměte výchozí služby rolí, které jsou k dispozici.</span><span class="sxs-lookup"><span data-stu-id="e72ad-677">Select the IIS role services desired or accept the default role services provided.</span></span>

   ![Výchozí služby rolí jsou vybrány v kroku Vybrat služby rolí.](index/_static/role-services-ws2016.png)

   <span data-ttu-id="e72ad-679">**Ověřování systému Windows (volitelné)**</span><span class="sxs-lookup"><span data-stu-id="e72ad-679">**Windows Authentication (Optional)**</span></span>  
   <span data-ttu-id="e72ad-680">Chcete-li povolit ověřování systému Windows, rozbalte následující uzly:**Zabezpečení** **webového serveru** > .</span><span class="sxs-lookup"><span data-stu-id="e72ad-680">To enable Windows Authentication, expand the following nodes: **Web Server** > **Security**.</span></span> <span data-ttu-id="e72ad-681">Vyberte funkci **Ověřování systému Windows.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-681">Select the **Windows Authentication** feature.</span></span> <span data-ttu-id="e72ad-682">Další informace naleznete v [tématech Ověřování \<systému Windows windowsAuthentication>](/iis/configuration/system.webServer/security/authentication/windowsAuthentication/) a Konfigurace ověřování [systému Windows](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="e72ad-682">For more information, see [Windows Authentication \<windowsAuthentication>](/iis/configuration/system.webServer/security/authentication/windowsAuthentication/) and [Configure Windows authentication](xref:security/authentication/windowsauth).</span></span>

   <span data-ttu-id="e72ad-683">**WebSockets (volitelné)**</span><span class="sxs-lookup"><span data-stu-id="e72ad-683">**WebSockets (Optional)**</span></span>  
   <span data-ttu-id="e72ad-684">WebSockets je podporován ASP.NET jádrem 1.1 nebo novějším.</span><span class="sxs-lookup"><span data-stu-id="e72ad-684">WebSockets is supported with ASP.NET Core 1.1 or later.</span></span> <span data-ttu-id="e72ad-685">Chcete-li povolit rozhraní WebSockets, rozbalte následující uzly:**Vývoj aplikací webového** **serveru** > .</span><span class="sxs-lookup"><span data-stu-id="e72ad-685">To enable WebSockets, expand the following nodes: **Web Server** > **Application Development**.</span></span> <span data-ttu-id="e72ad-686">Vyberte funkci **WebSocket Protocol.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-686">Select the **WebSocket Protocol** feature.</span></span> <span data-ttu-id="e72ad-687">Další informace naleznete v tématu [WebSockets](xref:fundamentals/websockets).</span><span class="sxs-lookup"><span data-stu-id="e72ad-687">For more information, see [WebSockets](xref:fundamentals/websockets).</span></span>

1. <span data-ttu-id="e72ad-688">Pokračujte v **potvrzovacím** kroku a nainstalujte roli a služby webového serveru.</span><span class="sxs-lookup"><span data-stu-id="e72ad-688">Proceed through the **Confirmation** step to install the web server role and services.</span></span> <span data-ttu-id="e72ad-689">Po instalaci role **webového serveru (IIS)** není restartování serveru nebo služby IIS vyžadováno.</span><span class="sxs-lookup"><span data-stu-id="e72ad-689">A server/IIS restart isn't required after installing the **Web Server (IIS)** role.</span></span>

<span data-ttu-id="e72ad-690">**Desktopové operační systémy Windows**</span><span class="sxs-lookup"><span data-stu-id="e72ad-690">**Windows desktop operating systems**</span></span>

<span data-ttu-id="e72ad-691">Povolte **konzolu pro správu služby IIS** a **služby World Wide Web Services**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-691">Enable the **IIS Management Console** and **World Wide Web Services**.</span></span>

1. <span data-ttu-id="e72ad-692">Přejděte na **Ovládací panely** > **Programy** > **a funkce** > **Zapněte nebo vypněte funkce systému Windows** (levá strana obrazovky).</span><span class="sxs-lookup"><span data-stu-id="e72ad-692">Navigate to **Control Panel** > **Programs** > **Programs and Features** > **Turn Windows features on or off** (left side of the screen).</span></span>

1. <span data-ttu-id="e72ad-693">Otevřete uzel **Internetové informační služby.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-693">Open the **Internet Information Services** node.</span></span> <span data-ttu-id="e72ad-694">Otevřete uzel **Nástroje pro správu webu.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-694">Open the **Web Management Tools** node.</span></span>

1. <span data-ttu-id="e72ad-695">Zaškrtněte políčko **U konzole pro správu služby IIS**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-695">Check the box for **IIS Management Console**.</span></span>

1. <span data-ttu-id="e72ad-696">Zaškrtněte políčko **U služeb World Wide Web Services**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-696">Check the box for **World Wide Web Services**.</span></span>

1. <span data-ttu-id="e72ad-697">Přijměte výchozí funkce **pro služby World Wide Web Services** nebo upravte funkce služby IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-697">Accept the default features for **World Wide Web Services** or customize the IIS features.</span></span>

   <span data-ttu-id="e72ad-698">**Ověřování systému Windows (volitelné)**</span><span class="sxs-lookup"><span data-stu-id="e72ad-698">**Windows Authentication (Optional)**</span></span>  
   <span data-ttu-id="e72ad-699">Chcete-li povolit ověřování systému Windows, rozbalte následující uzly: **World Wide Web Services** > **Security**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-699">To enable Windows Authentication, expand the following nodes: **World Wide Web Services** > **Security**.</span></span> <span data-ttu-id="e72ad-700">Vyberte funkci **Ověřování systému Windows.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-700">Select the **Windows Authentication** feature.</span></span> <span data-ttu-id="e72ad-701">Další informace naleznete v [tématech Ověřování \<systému Windows windowsAuthentication>](/iis/configuration/system.webServer/security/authentication/windowsAuthentication/) a Konfigurace ověřování [systému Windows](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="e72ad-701">For more information, see [Windows Authentication \<windowsAuthentication>](/iis/configuration/system.webServer/security/authentication/windowsAuthentication/) and [Configure Windows authentication](xref:security/authentication/windowsauth).</span></span>

   <span data-ttu-id="e72ad-702">**WebSockets (volitelné)**</span><span class="sxs-lookup"><span data-stu-id="e72ad-702">**WebSockets (Optional)**</span></span>  
   <span data-ttu-id="e72ad-703">WebSockets je podporován ASP.NET jádrem 1.1 nebo novějším.</span><span class="sxs-lookup"><span data-stu-id="e72ad-703">WebSockets is supported with ASP.NET Core 1.1 or later.</span></span> <span data-ttu-id="e72ad-704">Chcete-li povolit rozhraní WebSockets, rozbalte následující uzly: Funkce**vývoje aplikací**pro **webové služby** > .</span><span class="sxs-lookup"><span data-stu-id="e72ad-704">To enable WebSockets, expand the following nodes: **World Wide Web Services** > **Application Development Features**.</span></span> <span data-ttu-id="e72ad-705">Vyberte funkci **WebSocket Protocol.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-705">Select the **WebSocket Protocol** feature.</span></span> <span data-ttu-id="e72ad-706">Další informace naleznete v tématu [WebSockets](xref:fundamentals/websockets).</span><span class="sxs-lookup"><span data-stu-id="e72ad-706">For more information, see [WebSockets](xref:fundamentals/websockets).</span></span>

1. <span data-ttu-id="e72ad-707">Pokud instalace služby IIS vyžaduje restartování, restartujte systém.</span><span class="sxs-lookup"><span data-stu-id="e72ad-707">If the IIS installation requires a restart, restart the system.</span></span>

![V funkcích systému Windows jsou vybrány konzoly IIS Management Console a služby World Wide Web Services.](index/_static/windows-features-win10.png)

## <a name="install-the-net-core-hosting-bundle"></a><span data-ttu-id="e72ad-709">Instalace balíčku hostingu jádra .NET</span><span class="sxs-lookup"><span data-stu-id="e72ad-709">Install the .NET Core Hosting Bundle</span></span>

<span data-ttu-id="e72ad-710">Nainstalujte *balíček .NET Core Hosting do* hostitelského systému.</span><span class="sxs-lookup"><span data-stu-id="e72ad-710">Install the *.NET Core Hosting Bundle* on the hosting system.</span></span> <span data-ttu-id="e72ad-711">Balíček nainstaluje modul .NET Core Runtime, knihovnu .NET Core Library a [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module).</span><span class="sxs-lookup"><span data-stu-id="e72ad-711">The bundle installs the .NET Core Runtime, .NET Core Library, and the [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module).</span></span> <span data-ttu-id="e72ad-712">Modul umožňuje ASP.NET aplikace Core běžet za službou IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-712">The module allows ASP.NET Core apps to run behind IIS.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="e72ad-713">Pokud je sada Hosting Bundle nainstalována před službou IIS, musí být instalace balíčku opravena.</span><span class="sxs-lookup"><span data-stu-id="e72ad-713">If the Hosting Bundle is installed before IIS, the bundle installation must be repaired.</span></span> <span data-ttu-id="e72ad-714">Po instalaci služby IIS znovu spusťte instalační program sady Hosting Bundle.</span><span class="sxs-lookup"><span data-stu-id="e72ad-714">Run the Hosting Bundle installer again after installing IIS.</span></span>
>
> <span data-ttu-id="e72ad-715">Pokud je sada Hosting Bundle nainstalována po instalaci 64bitové (x64) verze rozhraní .NET Core, mohou se zdát, že sady SDK chybí ([byly zjištěny sady SDK .Net Core .](xref:test/troubleshoot#no-net-core-sdks-were-detected)</span><span class="sxs-lookup"><span data-stu-id="e72ad-715">If the Hosting Bundle is installed after installing the 64-bit (x64) version of .NET Core, SDKs might appear to be missing ([No .NET Core SDKs were detected](xref:test/troubleshoot#no-net-core-sdks-were-detected)).</span></span> <span data-ttu-id="e72ad-716">Chcete-li problém <xref:test/troubleshoot#missing-sdk-after-installing-the-net-core-hosting-bundle>vyřešit, naleznete v tématu .</span><span class="sxs-lookup"><span data-stu-id="e72ad-716">To resolve the problem, see <xref:test/troubleshoot#missing-sdk-after-installing-the-net-core-hosting-bundle>.</span></span>

### <a name="direct-download-current-version"></a><span data-ttu-id="e72ad-717">Přímé stahování (aktuální verze)</span><span class="sxs-lookup"><span data-stu-id="e72ad-717">Direct download (current version)</span></span>

<span data-ttu-id="e72ad-718">Stáhněte si instalační program pomocí následujícího odkazu:</span><span class="sxs-lookup"><span data-stu-id="e72ad-718">Download the installer using the following link:</span></span>

[<span data-ttu-id="e72ad-719">Aktuální instalační program .NET Core Hosting Bundle (přímé stahování)</span><span class="sxs-lookup"><span data-stu-id="e72ad-719">Current .NET Core Hosting Bundle installer (direct download)</span></span>](https://dotnet.microsoft.com/permalink/dotnetcore-current-windows-runtime-bundle-installer)

### <a name="earlier-versions-of-the-installer"></a><span data-ttu-id="e72ad-720">Dřívější verze instalačního programu</span><span class="sxs-lookup"><span data-stu-id="e72ad-720">Earlier versions of the installer</span></span>

<span data-ttu-id="e72ad-721">Chcete-li získat starší verzi instalačního programu:</span><span class="sxs-lookup"><span data-stu-id="e72ad-721">To obtain an earlier version of the installer:</span></span>

1. <span data-ttu-id="e72ad-722">Přejděte na stránku [Stáhnout jádro rozhraní .NET.](https://dotnet.microsoft.com/download/dotnet-core)</span><span class="sxs-lookup"><span data-stu-id="e72ad-722">Navigate to the [Download .NET Core](https://dotnet.microsoft.com/download/dotnet-core) page.</span></span>
1. <span data-ttu-id="e72ad-723">Klikněte na požadovanou verzi .NET Core.</span><span class="sxs-lookup"><span data-stu-id="e72ad-723">Click on the desired .NET Core version.</span></span>
1. <span data-ttu-id="e72ad-724">Ve sloupci **Spustit aplikace – runtime** najděte požadovaný řádek požadované verze runtime .NET Core.</span><span class="sxs-lookup"><span data-stu-id="e72ad-724">In the **Run apps - Runtime** column, find the row of the .NET Core runtime version desired.</span></span>
1. <span data-ttu-id="e72ad-725">Stáhněte si instalační program pomocí odkazu **Runtime & Hosting Bundle.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-725">Download the installer using the **Runtime & Hosting Bundle** link.</span></span>

> [!WARNING]
> <span data-ttu-id="e72ad-726">Některé instalační programy obsahují verze, které dosáhly konce životnosti (EOL) a které již nejsou podporovány společností Microsoft.</span><span class="sxs-lookup"><span data-stu-id="e72ad-726">Some installers contain release versions that have reached their end of life (EOL) and are no longer supported by Microsoft.</span></span> <span data-ttu-id="e72ad-727">Další informace naleznete v [zásadách podpory](https://dotnet.microsoft.com/platform/support/policy/dotnet-core).</span><span class="sxs-lookup"><span data-stu-id="e72ad-727">For more information, see the [support policy](https://dotnet.microsoft.com/platform/support/policy/dotnet-core).</span></span>

### <a name="install-the-hosting-bundle"></a><span data-ttu-id="e72ad-728">Nainstalujte balíček hostingu</span><span class="sxs-lookup"><span data-stu-id="e72ad-728">Install the Hosting Bundle</span></span>

1. <span data-ttu-id="e72ad-729">Spusťte instalační program na serveru.</span><span class="sxs-lookup"><span data-stu-id="e72ad-729">Run the installer on the server.</span></span> <span data-ttu-id="e72ad-730">Při spuštění instalačního programu z příkazového prostředí správce jsou k dispozici následující parametry:</span><span class="sxs-lookup"><span data-stu-id="e72ad-730">The following parameters are available when running the installer from an administrator command shell:</span></span>

   * <span data-ttu-id="e72ad-731">`OPT_NO_ANCM=1`&ndash; Přeskočte instalaci ASP.NET základního modulu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-731">`OPT_NO_ANCM=1` &ndash; Skip installing the ASP.NET Core Module.</span></span>
   * <span data-ttu-id="e72ad-732">`OPT_NO_RUNTIME=1`&ndash; Přeskočte instalaci runtime jádra .NET.</span><span class="sxs-lookup"><span data-stu-id="e72ad-732">`OPT_NO_RUNTIME=1` &ndash; Skip installing the .NET Core runtime.</span></span> <span data-ttu-id="e72ad-733">Používá se v případě, že server hostuje pouze [samostatná nasazení (SCD).](/dotnet/core/deploying/#self-contained-deployments-scd)</span><span class="sxs-lookup"><span data-stu-id="e72ad-733">Used when the server only hosts [self-contained deployments (SCD)](/dotnet/core/deploying/#self-contained-deployments-scd).</span></span>
   * <span data-ttu-id="e72ad-734">`OPT_NO_SHAREDFX=1`&ndash; Přeskočit instalaci ASP.NET sdíleného rozhraní (ASP.NET runtime).</span><span class="sxs-lookup"><span data-stu-id="e72ad-734">`OPT_NO_SHAREDFX=1` &ndash; Skip installing the ASP.NET Shared Framework (ASP.NET runtime).</span></span> <span data-ttu-id="e72ad-735">Používá se v případě, že server hostuje pouze [samostatná nasazení (SCD).](/dotnet/core/deploying/#self-contained-deployments-scd)</span><span class="sxs-lookup"><span data-stu-id="e72ad-735">Used when the server only hosts [self-contained deployments (SCD)](/dotnet/core/deploying/#self-contained-deployments-scd).</span></span>
   * <span data-ttu-id="e72ad-736">`OPT_NO_X86=1`&ndash; Přeskočit instalaci za běhu x86.</span><span class="sxs-lookup"><span data-stu-id="e72ad-736">`OPT_NO_X86=1` &ndash; Skip installing x86 runtimes.</span></span> <span data-ttu-id="e72ad-737">Tento parametr použijte, pokud víte, že nebudete hostovat 32bitové aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-737">Use this parameter when you know that you won't be hosting 32-bit apps.</span></span> <span data-ttu-id="e72ad-738">Pokud existuje nějaká šance, že budete v budoucnu hostovat 32bitové i 64bitové aplikace, nepoužívejte tento parametr a nainstalujte oba runtimes.</span><span class="sxs-lookup"><span data-stu-id="e72ad-738">If there's any chance that you will host both 32-bit and 64-bit apps in the future, don't use this parameter and install both runtimes.</span></span>
   * <span data-ttu-id="e72ad-739">`OPT_NO_SHARED_CONFIG_CHECK=1`&ndash; Zakažte kontrolu použití sdílené konfigurace služby IIS, pokud je sdílená konfigurace *(applicationHost.config)* ve stejném počítači jako instalace služby IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-739">`OPT_NO_SHARED_CONFIG_CHECK=1` &ndash; Disable the check for using an IIS Shared Configuration when the shared configuration (*applicationHost.config*) is on the same machine as the IIS installation.</span></span> <span data-ttu-id="e72ad-740">*K dispozici pouze pro ASP.NET instalačních programů hostingu Bundler nebo novějším.*</span><span class="sxs-lookup"><span data-stu-id="e72ad-740">*Only available for ASP.NET Core 2.2 or later Hosting Bundler installers.*</span></span> <span data-ttu-id="e72ad-741">Další informace naleznete v tématu <xref:host-and-deploy/aspnet-core-module#aspnet-core-module-with-an-iis-shared-configuration>.</span><span class="sxs-lookup"><span data-stu-id="e72ad-741">For more information, see <xref:host-and-deploy/aspnet-core-module#aspnet-core-module-with-an-iis-shared-configuration>.</span></span>
1. <span data-ttu-id="e72ad-742">Restartujte systém nebo proveďte následující příkazy v příkazovém prostředí:</span><span class="sxs-lookup"><span data-stu-id="e72ad-742">Restart the system or execute the following commands in a command shell:</span></span>

   ```console
   net stop was /y
   net start w3svc
   ```
   <span data-ttu-id="e72ad-743">Restartování služby IIS vyvolá změnu systémové cesty, což je proměnná prostředí provedená instalačním programem.</span><span class="sxs-lookup"><span data-stu-id="e72ad-743">Restarting IIS picks up a change to the system PATH, which is an environment variable, made by the installer.</span></span>

<span data-ttu-id="e72ad-744">Při instalaci balíčku Hosting Bundle není nutné ručně zastavovat jednotlivé weby ve službách IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-744">It isn't necessary to manually stop individual sites in IIS when installing the Hosting Bundle.</span></span> <span data-ttu-id="e72ad-745">Hostované aplikace (weby služby IIS) se restartují při restartování služby IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-745">Hosted apps (IIS sites) restart when IIS restarts.</span></span> <span data-ttu-id="e72ad-746">Aplikace se znovu spustí, když obdrží svůj první požadavek, včetně z [modulu inicializace aplikace](#application-initialization-module-and-idle-timeout).</span><span class="sxs-lookup"><span data-stu-id="e72ad-746">Apps start up again when they receive their first request, including from the [Application Initialization Module](#application-initialization-module-and-idle-timeout).</span></span>

<span data-ttu-id="e72ad-747">ASP.NET Core přijímá roll-forward chování pro opravy vydání sdílených rámců.</span><span class="sxs-lookup"><span data-stu-id="e72ad-747">ASP.NET Core adopts roll-forward behavior for patch releases of shared framework packages.</span></span> <span data-ttu-id="e72ad-748">Když se aplikace hostované službou IIS restartují se službou IIS, aplikace se načítají nejnovějšími verzemi oprav svých odkazovaných balíčků, když obdrží svůj první požadavek.</span><span class="sxs-lookup"><span data-stu-id="e72ad-748">When apps hosted by IIS restart with IIS, the apps load with the latest patch releases of their referenced packages when they receive their first request.</span></span> <span data-ttu-id="e72ad-749">Pokud služba IIS není restartována, aplikace se restartují a vykazují chování pro předávání vpřed, když jsou jejich pracovní procesy recyklovány a obdrží první požadavek.</span><span class="sxs-lookup"><span data-stu-id="e72ad-749">If IIS isn't restarted, apps restart and exhibit roll-forward behavior when their worker processes are recycled and they receive their first request.</span></span>

> [!NOTE]
> <span data-ttu-id="e72ad-750">Informace o sdílené konfiguraci služby IIS naleznete [v tématu ASP.NET Core Module se sdílenou konfigurací služby IIS](xref:host-and-deploy/aspnet-core-module#aspnet-core-module-with-an-iis-shared-configuration).</span><span class="sxs-lookup"><span data-stu-id="e72ad-750">For information on IIS Shared Configuration, see [ASP.NET Core Module with IIS Shared Configuration](xref:host-and-deploy/aspnet-core-module#aspnet-core-module-with-an-iis-shared-configuration).</span></span>

## <a name="install-web-deploy-when-publishing-with-visual-studio"></a><span data-ttu-id="e72ad-751">Instalace nasazení webu při publikování pomocí sady Visual Studio</span><span class="sxs-lookup"><span data-stu-id="e72ad-751">Install Web Deploy when publishing with Visual Studio</span></span>

<span data-ttu-id="e72ad-752">Při nasazování aplikací na servery s [nasazením webu](/iis/install/installing-publishing-technologies/installing-and-configuring-web-deploy-on-iis-80-or-later)nainstalujte na server nejnovější verzi nasazení webu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-752">When deploying apps to servers with [Web Deploy](/iis/install/installing-publishing-technologies/installing-and-configuring-web-deploy-on-iis-80-or-later), install the latest version of Web Deploy on the server.</span></span> <span data-ttu-id="e72ad-753">Chcete-li nainstalovat nasazení webu, použijte [Instalační službu webové platformy (WebPI)](https://www.microsoft.com/web/downloads/platform.aspx) nebo získejte instalační program přímo ze [služby Stažení softwaru](https://www.microsoft.com/download/details.aspx?id=43717).</span><span class="sxs-lookup"><span data-stu-id="e72ad-753">To install Web Deploy, use the [Web Platform Installer (WebPI)](https://www.microsoft.com/web/downloads/platform.aspx) or obtain an installer directly from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=43717).</span></span> <span data-ttu-id="e72ad-754">Upřednostňovanou metodou je použití webpi.</span><span class="sxs-lookup"><span data-stu-id="e72ad-754">The preferred method is to use WebPI.</span></span> <span data-ttu-id="e72ad-755">WebPI nabízí samostatné nastavení a konfiguraci pro poskytovatele hostingu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-755">WebPI offers a standalone setup and a configuration for hosting providers.</span></span>

## <a name="create-the-iis-site"></a><span data-ttu-id="e72ad-756">Vytvoření webu iis</span><span class="sxs-lookup"><span data-stu-id="e72ad-756">Create the IIS site</span></span>

1. <span data-ttu-id="e72ad-757">V hostitelském systému vytvořte složku, která bude obsahovat publikované složky a soubory aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-757">On the hosting system, create a folder to contain the app's published folders and files.</span></span> <span data-ttu-id="e72ad-758">V následujícím kroku je cesta ke složce k dispozici službu IIS jako fyzická cesta k aplikaci.</span><span class="sxs-lookup"><span data-stu-id="e72ad-758">In a following step, the folder's path is provided to IIS as the physical path to the app.</span></span> <span data-ttu-id="e72ad-759">Další informace o složce nasazení aplikace a <xref:host-and-deploy/directory-structure>rozložení souborů naleznete v tématu .</span><span class="sxs-lookup"><span data-stu-id="e72ad-759">For more information on an app's deployment folder and file layout, see <xref:host-and-deploy/directory-structure>.</span></span>

1. <span data-ttu-id="e72ad-760">Ve Správci služby IIS otevřete uzel serveru v panelu **Připojení.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-760">In IIS Manager, open the server's node in the **Connections** panel.</span></span> <span data-ttu-id="e72ad-761">Klikněte pravým tlačítkem myši na složku **Weby.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-761">Right-click the **Sites** folder.</span></span> <span data-ttu-id="e72ad-762">V kontextové nabídce vyberte **Přidat web.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-762">Select **Add Website** from the contextual menu.</span></span>

1. <span data-ttu-id="e72ad-763">Zadejte **název webu** a nastavte **fyzickou cestu** ke složce nasazení aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-763">Provide a **Site name** and set the **Physical path** to the app's deployment folder.</span></span> <span data-ttu-id="e72ad-764">Zadejte konfiguraci **vazby** a vytvořte web výběrem **možnosti OK**:</span><span class="sxs-lookup"><span data-stu-id="e72ad-764">Provide the **Binding** configuration and create the website by selecting **OK**:</span></span>

   ![V kroku Přidat web zadejte název webu, fyzickou cestu a název hostitele.](index/_static/add-website-ws2016.png)

   > [!WARNING]
   > <span data-ttu-id="e72ad-766">Vazby se zástupnými`http://*:80/` symboly nejvyšší úrovně ( a `http://+:80`) by **neměly** být používány.</span><span class="sxs-lookup"><span data-stu-id="e72ad-766">Top-level wildcard bindings (`http://*:80/` and `http://+:80`) should **not** be used.</span></span> <span data-ttu-id="e72ad-767">Vazby se zástupnými symboly nejvyšší úrovně mohou otevřít vaši aplikaci slabá místa zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="e72ad-767">Top-level wildcard bindings can open up your app to security vulnerabilities.</span></span> <span data-ttu-id="e72ad-768">To platí pro silné i slabé zástupné znaky.</span><span class="sxs-lookup"><span data-stu-id="e72ad-768">This applies to both strong and weak wildcards.</span></span> <span data-ttu-id="e72ad-769">Používejte explicitní názvy hostitelů místo zástupných znaků.</span><span class="sxs-lookup"><span data-stu-id="e72ad-769">Use explicit host names rather than wildcards.</span></span> <span data-ttu-id="e72ad-770">Vazba se zástupnými znaky subdomény (například) nemá toto bezpečnostní riziko, `*.mysub.com` `*.com`pokud řídíte celou nadřazenou doménu (na rozdíl od , která je zranitelná).</span><span class="sxs-lookup"><span data-stu-id="e72ad-770">Subdomain wildcard binding (for example, `*.mysub.com`) doesn't have this security risk if you control the entire parent domain (as opposed to `*.com`, which is vulnerable).</span></span> <span data-ttu-id="e72ad-771">Viz [rfc7230 sekce-5.4](https://tools.ietf.org/html/rfc7230#section-5.4) pro více informací.</span><span class="sxs-lookup"><span data-stu-id="e72ad-771">See [rfc7230 section-5.4](https://tools.ietf.org/html/rfc7230#section-5.4) for more information.</span></span>

1. <span data-ttu-id="e72ad-772">Pod uzlovým serverem vyberte **fondy aplikací**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-772">Under the server's node, select **Application Pools**.</span></span>

1. <span data-ttu-id="e72ad-773">Klikněte pravým tlačítkem myši na fond aplikací webu a v kontextové nabídce vyberte **Základní nastavení.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-773">Right-click the site's app pool and select **Basic Settings** from the contextual menu.</span></span>

1. <span data-ttu-id="e72ad-774">V okně **Upravit fond aplikací** nastavte verzi **.NET CLR** na **Žádný spravovaný kód**:</span><span class="sxs-lookup"><span data-stu-id="e72ad-774">In the **Edit Application Pool** window, set the **.NET CLR version** to **No Managed Code**:</span></span>

   ![Pro verzi CLR rozhraní .NET nenastavte žádný spravovaný kód.](index/_static/edit-apppool-ws2016.png)

    <span data-ttu-id="e72ad-776">ASP.NET Core běží v samostatném procesu a spravuje runtime.</span><span class="sxs-lookup"><span data-stu-id="e72ad-776">ASP.NET Core runs in a separate process and manages the runtime.</span></span> <span data-ttu-id="e72ad-777">ASP.NET Core nespoléhá na načtení plochy CLR (.NET CLR)&mdash;Core Common Language Runtime (CoreCLR) pro .NET Core je spuštěn pro hostování aplikace v pracovním procesu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-777">ASP.NET Core doesn't rely on loading the desktop CLR (.NET CLR)&mdash;the Core Common Language Runtime (CoreCLR) for .NET Core is booted to host the app in the worker process.</span></span> <span data-ttu-id="e72ad-778">Nastavení **verze .NET CLR** na **žádný spravovaný kód** je volitelné, ale doporučeno.</span><span class="sxs-lookup"><span data-stu-id="e72ad-778">Setting the **.NET CLR version** to **No Managed Code** is optional but recommended.</span></span>

1. <span data-ttu-id="e72ad-779">*ASP.NET jádra 2.2 nebo novějšího:* Pro 64bitové (x64) [samostatné nasazení,](/dotnet/core/deploying/#self-contained-deployments-scd) které používá [model hostování v procesu](#in-process-hosting-model), zakažte fond aplikací pro 32bitové (x86) procesy.</span><span class="sxs-lookup"><span data-stu-id="e72ad-779">*ASP.NET Core 2.2 or later*: For a 64-bit (x64) [self-contained deployment](/dotnet/core/deploying/#self-contained-deployments-scd) that uses the [in-process hosting model](#in-process-hosting-model), disable the app pool for 32-bit (x86) processes.</span></span>

   <span data-ttu-id="e72ad-780">V postranním panelu **Akce** správce služby IIS > **fondy aplikací**vyberte **možnost Nastavit výchozí nastavení fondu aplikací** nebo **Upřesnit nastavení**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-780">In the **Actions** sidebar of IIS Manager > **Application Pools**, select **Set Application Pool Defaults** or **Advanced Settings**.</span></span> <span data-ttu-id="e72ad-781">Vyhledejte **funkci Povolit 32bitové aplikace** a nastavte hodnotu na . `False`</span><span class="sxs-lookup"><span data-stu-id="e72ad-781">Locate **Enable 32-Bit Applications** and set the value to `False`.</span></span> <span data-ttu-id="e72ad-782">Toto nastavení nemá vliv na aplikace nasazené pro [mimoprocesový hosting](xref:host-and-deploy/aspnet-core-module#out-of-process-hosting-model).</span><span class="sxs-lookup"><span data-stu-id="e72ad-782">This setting doesn't affect apps deployed for [out-of-process hosting](xref:host-and-deploy/aspnet-core-module#out-of-process-hosting-model).</span></span>

1. <span data-ttu-id="e72ad-783">Potvrďte, že identita modelu procesu má správná oprávnění.</span><span class="sxs-lookup"><span data-stu-id="e72ad-783">Confirm the process model identity has the proper permissions.</span></span>

   <span data-ttu-id="e72ad-784">Pokud se výchozí identita fondu aplikací **(identita\*\*\*\*procesního modelu** > ) změní z **ApplicationPoolIdentity** na jinou identitu, ověřte, zda nová identita má požadovaná oprávnění pro přístup ke složce, databázi a dalším požadovaným prostředkům aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-784">If the default identity of the app pool (**Process Model** > **Identity**) is changed from **ApplicationPoolIdentity** to another identity, verify that the new identity has the required permissions to access the app's folder, database, and other required resources.</span></span> <span data-ttu-id="e72ad-785">Fond aplikací například vyžaduje přístup pro čtení a zápis do složek, kde aplikace čte a zapisuje soubory.</span><span class="sxs-lookup"><span data-stu-id="e72ad-785">For example, the app pool requires read and write access to folders where the app reads and writes files.</span></span>

<span data-ttu-id="e72ad-786">**Konfigurace ověřování systému Windows (volitelná)**</span><span class="sxs-lookup"><span data-stu-id="e72ad-786">**Windows Authentication configuration (Optional)**</span></span>  
<span data-ttu-id="e72ad-787">Další informace naleznete v [tématu Configure Windows authentication](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="e72ad-787">For more information, see [Configure Windows authentication](xref:security/authentication/windowsauth).</span></span>

## <a name="deploy-the-app"></a><span data-ttu-id="e72ad-788">Nasazení aplikace</span><span class="sxs-lookup"><span data-stu-id="e72ad-788">Deploy the app</span></span>

<span data-ttu-id="e72ad-789">Nasaďte aplikaci do složky **Fyzické cesty** služby IIS, která byla vytvořena v části Vytvořit [web služby IIS.](#create-the-iis-site)</span><span class="sxs-lookup"><span data-stu-id="e72ad-789">Deploy the app to the IIS **Physical path** folder that was established in the [Create the IIS site](#create-the-iis-site) section.</span></span> <span data-ttu-id="e72ad-790">[Nasazení webu](/iis/publish/using-web-deploy/introduction-to-web-deploy) je doporučený mechanismus pro nasazení, ale existuje několik možností pro přesunutí aplikace ze složky *publikování* projektu do složky nasazení hostitelského systému.</span><span class="sxs-lookup"><span data-stu-id="e72ad-790">[Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy) is the recommended mechanism for deployment, but several options exist for moving the app from the project's *publish* folder to the hosting system's deployment folder.</span></span>

### <a name="web-deploy-with-visual-studio"></a><span data-ttu-id="e72ad-791">Nasazení webu pomocí sady Visual Studio</span><span class="sxs-lookup"><span data-stu-id="e72ad-791">Web Deploy with Visual Studio</span></span>

<span data-ttu-id="e72ad-792">Podívejte se na [profily publikování aplikace Visual Studio pro téma nasazení aplikace ASP.NET Core,](xref:host-and-deploy/visual-studio-publish-profiles#publish-profiles) kde se dozvíte, jak vytvořit profil publikování pro použití s nasazením webu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-792">See the [Visual Studio publish profiles for ASP.NET Core app deployment](xref:host-and-deploy/visual-studio-publish-profiles#publish-profiles) topic to learn how to create a publish profile for use with Web Deploy.</span></span> <span data-ttu-id="e72ad-793">Pokud poskytovatel hostingu poskytuje profil publikování nebo podporu pro jeho vytvoření, stáhněte si jeho profil a importujte jej pomocí dialogového okna **Publikovat** sady Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="e72ad-793">If the hosting provider provides a Publish Profile or support for creating one, download their profile and import it using the Visual Studio **Publish** dialog:</span></span>

![Stránka dialogového okna Publikovat](index/_static/pub-dialog.png)

### <a name="web-deploy-outside-of-visual-studio"></a><span data-ttu-id="e72ad-795">Nasazení webu mimo Visual Studio</span><span class="sxs-lookup"><span data-stu-id="e72ad-795">Web Deploy outside of Visual Studio</span></span>

<span data-ttu-id="e72ad-796">[Nasazení webu](/iis/publish/using-web-deploy/introduction-to-web-deploy) lze také použít mimo Visual Studio z příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="e72ad-796">[Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy) can also be used outside of Visual Studio from the command line.</span></span> <span data-ttu-id="e72ad-797">Další informace naleznete v [tématu Web Deployment Tool](/iis/publish/using-web-deploy/use-the-web-deployment-tool).</span><span class="sxs-lookup"><span data-stu-id="e72ad-797">For more information, see [Web Deployment Tool](/iis/publish/using-web-deploy/use-the-web-deployment-tool).</span></span>

### <a name="alternatives-to-web-deploy"></a><span data-ttu-id="e72ad-798">Alternativy k nasazení webu</span><span class="sxs-lookup"><span data-stu-id="e72ad-798">Alternatives to Web Deploy</span></span>

<span data-ttu-id="e72ad-799">Pomocí některé z několika metod přesuňte aplikaci do hostitelského systému, jako je ruční kopírování, [Xcopy](/windows-server/administration/windows-commands/xcopy), [Robocopy](/windows-server/administration/windows-commands/robocopy)nebo [PowerShell](/powershell/).</span><span class="sxs-lookup"><span data-stu-id="e72ad-799">Use any of several methods to move the app to the hosting system, such as manual copy, [Xcopy](/windows-server/administration/windows-commands/xcopy), [Robocopy](/windows-server/administration/windows-commands/robocopy), or [PowerShell](/powershell/).</span></span>

<span data-ttu-id="e72ad-800">Další informace o ASP.NET nasazení jádra do služby IIS naleznete v části [Prostředky nasazení pro správce služby IIS.](#deployment-resources-for-iis-administrators)</span><span class="sxs-lookup"><span data-stu-id="e72ad-800">For more information on ASP.NET Core deployment to IIS, see the [Deployment resources for IIS administrators](#deployment-resources-for-iis-administrators) section.</span></span>

## <a name="browse-the-website"></a><span data-ttu-id="e72ad-801">Procházení webu</span><span class="sxs-lookup"><span data-stu-id="e72ad-801">Browse the website</span></span>

<span data-ttu-id="e72ad-802">Po nasazení aplikace do hostitelského systému požádejte o jeden z veřejných koncových bodů aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-802">After the app is deployed to the hosting system, make a request to one of the app's public endpoints.</span></span>

<span data-ttu-id="e72ad-803">V následujícím příkladu je web vázán na název `www.mysite.com` **hostitele** iis na **portu** `80`.</span><span class="sxs-lookup"><span data-stu-id="e72ad-803">In the following example, the site is bound to an IIS **Host name** of `www.mysite.com` on **Port** `80`.</span></span> <span data-ttu-id="e72ad-804">Žádost se podává `http://www.mysite.com`na :</span><span class="sxs-lookup"><span data-stu-id="e72ad-804">A request is made to `http://www.mysite.com`:</span></span>

![Prohlížeč Microsoft Edge načetl úvodní stránku služby IIS.](index/_static/browsewebsite.png)

## <a name="locked-deployment-files"></a><span data-ttu-id="e72ad-806">Uzamčené soubory nasazení</span><span class="sxs-lookup"><span data-stu-id="e72ad-806">Locked deployment files</span></span>

<span data-ttu-id="e72ad-807">Soubory ve složce nasazení jsou uzamčeny, když je aplikace spuštěná.</span><span class="sxs-lookup"><span data-stu-id="e72ad-807">Files in the deployment folder are locked when the app is running.</span></span> <span data-ttu-id="e72ad-808">Uzamčené soubory nelze během nasazení přepsat.</span><span class="sxs-lookup"><span data-stu-id="e72ad-808">Locked files can't be overwritten during deployment.</span></span> <span data-ttu-id="e72ad-809">Chcete-li uvolnit uzamčené soubory v nasazení, zastavte fond aplikací pomocí **jednoho z** následujících přístupů:</span><span class="sxs-lookup"><span data-stu-id="e72ad-809">To release locked files in a deployment, stop the app pool using **one** of the following approaches:</span></span>

* <span data-ttu-id="e72ad-810">Použijte nasazení webu `Microsoft.NET.Sdk.Web` a odkaz v souboru projektu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-810">Use Web Deploy and reference `Microsoft.NET.Sdk.Web` in the project file.</span></span> <span data-ttu-id="e72ad-811">Soubor *app_offline.htm* je umístěn v kořenovém adresáři webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-811">An *app_offline.htm* file is placed at the root of the web app directory.</span></span> <span data-ttu-id="e72ad-812">Když je soubor k dispozici, ASP.NET základní modul řádně vypne aplikaci a slouží *souboru app_offline.htm* během nasazení.</span><span class="sxs-lookup"><span data-stu-id="e72ad-812">When the file is present, the ASP.NET Core Module gracefully shuts down the app and serves the *app_offline.htm* file during the deployment.</span></span> <span data-ttu-id="e72ad-813">Další informace naleznete v [odkazu na konfiguraci ASP.NET core modulem](xref:host-and-deploy/aspnet-core-module#app_offlinehtm).</span><span class="sxs-lookup"><span data-stu-id="e72ad-813">For more information, see the [ASP.NET Core Module configuration reference](xref:host-and-deploy/aspnet-core-module#app_offlinehtm).</span></span>
* <span data-ttu-id="e72ad-814">Ručně zastavit fond aplikací ve Správci služby IIS na serveru.</span><span class="sxs-lookup"><span data-stu-id="e72ad-814">Manually stop the app pool in the IIS Manager on the server.</span></span>
* <span data-ttu-id="e72ad-815">Použití Prostředí PowerShell k přetažení *app_offline.htm* (vyžaduje PowerShell 5 nebo novější):</span><span class="sxs-lookup"><span data-stu-id="e72ad-815">Use PowerShell to drop *app_offline.htm* (requires PowerShell 5 or later):</span></span>

  ```powershell
  $pathToApp = 'PATH_TO_APP'

  # Stop the AppPool
  New-Item -Path $pathToApp app_offline.htm

  # Provide script commands here to deploy the app

  # Restart the AppPool
  Remove-Item -Path $pathToApp app_offline.htm

  ```

## <a name="data-protection"></a><span data-ttu-id="e72ad-816">Ochrana dat</span><span class="sxs-lookup"><span data-stu-id="e72ad-816">Data protection</span></span>

<span data-ttu-id="e72ad-817">Zásobník [ASP.NET Core Data Protection](xref:security/data-protection/introduction) používá několik [middlewares](xref:fundamentals/middleware/index)ASP.NET Core , včetně middlewaru používaného při ověřování.</span><span class="sxs-lookup"><span data-stu-id="e72ad-817">The [ASP.NET Core Data Protection stack](xref:security/data-protection/introduction) is used by several ASP.NET Core [middlewares](xref:fundamentals/middleware/index), including middleware used in authentication.</span></span> <span data-ttu-id="e72ad-818">I v případě, že rozhraní API ochrany dat nejsou volána uživatelským kódem, ochrana dat by měla být nakonfigurována pomocí skriptu nasazení nebo v uživatelském kódu, aby se vytvořilo trvalé úložiště kryptografických [klíčů](xref:security/data-protection/implementation/key-management).</span><span class="sxs-lookup"><span data-stu-id="e72ad-818">Even if Data Protection APIs aren't called by user code, data protection should be configured with a deployment script or in user code to create a persistent cryptographic [key store](xref:security/data-protection/implementation/key-management).</span></span> <span data-ttu-id="e72ad-819">Pokud ochrana dat není nakonfigurována, klíče jsou uloženy v paměti a po restartování aplikace zahozeny.</span><span class="sxs-lookup"><span data-stu-id="e72ad-819">If data protection isn't configured, the keys are held in memory and discarded when the app restarts.</span></span>

<span data-ttu-id="e72ad-820">Pokud je kroužek klíče uložen v paměti při restartování aplikace:</span><span class="sxs-lookup"><span data-stu-id="e72ad-820">If the key ring is stored in memory when the app restarts:</span></span>

* <span data-ttu-id="e72ad-821">Všechny ověřovací tokeny založené na souborech cookie jsou zrušeny.</span><span class="sxs-lookup"><span data-stu-id="e72ad-821">All cookie-based authentication tokens are invalidated.</span></span> 
* <span data-ttu-id="e72ad-822">Uživatelé se musí znovu přihlásit při dalším požadavku.</span><span class="sxs-lookup"><span data-stu-id="e72ad-822">Users are required to sign in again on their next request.</span></span> 
* <span data-ttu-id="e72ad-823">Všechna data chráněná kroužkem klíče již nelze dešifrovat.</span><span class="sxs-lookup"><span data-stu-id="e72ad-823">Any data protected with the key ring can no longer be decrypted.</span></span> <span data-ttu-id="e72ad-824">To může zahrnovat [tokeny CSRF](xref:security/anti-request-forgery#aspnet-core-antiforgery-configuration) a [ASP.NET základní soubory cookie MVC TempData](xref:fundamentals/app-state#tempdata).</span><span class="sxs-lookup"><span data-stu-id="e72ad-824">This may include [CSRF tokens](xref:security/anti-request-forgery#aspnet-core-antiforgery-configuration) and [ASP.NET Core MVC TempData cookies](xref:fundamentals/app-state#tempdata).</span></span>

<span data-ttu-id="e72ad-825">Chcete-li nakonfigurovat ochranu dat ve službě IIS tak, aby zachycovací byl kroužek klíče, použijte **jeden** z následujících postupů:</span><span class="sxs-lookup"><span data-stu-id="e72ad-825">To configure data protection under IIS to persist the key ring, use **one** of the following approaches:</span></span>

* <span data-ttu-id="e72ad-826">**Vytvoření klíčů registru ochrany dat**</span><span class="sxs-lookup"><span data-stu-id="e72ad-826">**Create Data Protection Registry Keys**</span></span>

  <span data-ttu-id="e72ad-827">Klíče ochrany dat používané ASP.NET aplikace Core jsou uloženy v registru mimo aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-827">Data protection keys used by ASP.NET Core apps are stored in the registry external to the apps.</span></span> <span data-ttu-id="e72ad-828">Chcete-li zachovat klíče pro danou aplikaci, vytvořte klíče registru pro fond aplikací.</span><span class="sxs-lookup"><span data-stu-id="e72ad-828">To persist the keys for a given app, create registry keys for the app pool.</span></span>

  <span data-ttu-id="e72ad-829">Pro samostatné instalace služby IIS mimo webfarmu lze [skript prostředí PowerShell Pro poskytování ochrany dat-AutoGenKeys.ps1](https://github.com/dotnet/AspNetCore/blob/master/src/DataProtection/Provision-AutoGenKeys.ps1) použít pro každý fond aplikací používaný s aplikací ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="e72ad-829">For standalone, non-webfarm IIS installations, the [Data Protection Provision-AutoGenKeys.ps1 PowerShell script](https://github.com/dotnet/AspNetCore/blob/master/src/DataProtection/Provision-AutoGenKeys.ps1) can be used for each app pool used with an ASP.NET Core app.</span></span> <span data-ttu-id="e72ad-830">Tento skript vytvoří klíč registru v registru HKLM, který je přístupný pouze pro účet pracovního procesu fondu aplikací.</span><span class="sxs-lookup"><span data-stu-id="e72ad-830">This script creates a registry key in the HKLM registry that's accessible only to the worker process account of the app's app pool.</span></span> <span data-ttu-id="e72ad-831">Klíče jsou šifrovány v klidovém stavu pomocí dpapi s klíčem pro celý počítač.</span><span class="sxs-lookup"><span data-stu-id="e72ad-831">Keys are encrypted at rest using DPAPI with a machine-wide key.</span></span>

  <span data-ttu-id="e72ad-832">Ve scénářích webové farmy lze aplikaci nakonfigurovat tak, aby k ukládání kroužku klíčů pro ochranu dat používala cestu UNC.</span><span class="sxs-lookup"><span data-stu-id="e72ad-832">In web farm scenarios, an app can be configured to use a UNC path to store its data protection key ring.</span></span> <span data-ttu-id="e72ad-833">Ve výchozím nastavení nejsou klíče ochrany dat šifrovány.</span><span class="sxs-lookup"><span data-stu-id="e72ad-833">By default, the data protection keys aren't encrypted.</span></span> <span data-ttu-id="e72ad-834">Ujistěte se, že oprávnění k souborům pro sdílenou síť ovou složku jsou omezena na účet Windows, pod kterým aplikace běží.</span><span class="sxs-lookup"><span data-stu-id="e72ad-834">Ensure that the file permissions for the network share are limited to the Windows account the app runs under.</span></span> <span data-ttu-id="e72ad-835">Certifikát X509 lze použít k ochraně klíčů v klidovém stavu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-835">An X509 certificate can be used to protect keys at rest.</span></span> <span data-ttu-id="e72ad-836">Zvažte mechanismus, který uživatelům umožní nahrávat certifikáty: Umístěte certifikáty do úložiště důvěryhodných certifikátů uživatele a ujistěte se, že jsou k dispozici na všech počítačích, kde je spuštěna aplikace uživatele.</span><span class="sxs-lookup"><span data-stu-id="e72ad-836">Consider a mechanism to allow users to upload certificates: Place certificates into the user's trusted certificate store and ensure they're available on all machines where the user's app runs.</span></span> <span data-ttu-id="e72ad-837">Podrobnosti [najdete v tématu Konfigurace ochrany základních dat ASP.NET.](xref:security/data-protection/configuration/overview)</span><span class="sxs-lookup"><span data-stu-id="e72ad-837">See [Configure ASP.NET Core Data Protection](xref:security/data-protection/configuration/overview) for details.</span></span>

* <span data-ttu-id="e72ad-838">**Konfigurace fondu aplikací služby IIS pro načtení profilu uživatele**</span><span class="sxs-lookup"><span data-stu-id="e72ad-838">**Configure the IIS Application Pool to load the user profile**</span></span>

  <span data-ttu-id="e72ad-839">Toto nastavení je v části **Model procesu** v části **Upřesnit nastavení** pro fond aplikací.</span><span class="sxs-lookup"><span data-stu-id="e72ad-839">This setting is in the **Process Model** section under the **Advanced Settings** for the app pool.</span></span> <span data-ttu-id="e72ad-840">Nastavte **profil načtení uživatele** na `True`.</span><span class="sxs-lookup"><span data-stu-id="e72ad-840">Set **Load User Profile** to `True`.</span></span> <span data-ttu-id="e72ad-841">Pokud je `True`nastavena možnost , jsou klíče uloženy v adresáři profilu uživatele a chráněny pomocí rozhraní DPAPI klíčem specifickým pro uživatelský účet.</span><span class="sxs-lookup"><span data-stu-id="e72ad-841">When set to `True`, keys are stored in the user profile directory and protected using DPAPI with a key specific to the user account.</span></span> <span data-ttu-id="e72ad-842">Klíče jsou uloženy ve složce *%LOCALAPPDATA%/ASP.NET/DataProtection-Keys.*</span><span class="sxs-lookup"><span data-stu-id="e72ad-842">Keys are persisted to the *%LOCALAPPDATA%/ASP.NET/DataProtection-Keys* folder.</span></span>

  <span data-ttu-id="e72ad-843">[Atribut setProfileEnvironment](/iis/configuration/system.applicationhost/applicationpools/add/processmodel#configuration) fondu aplikací musí být také povolen.</span><span class="sxs-lookup"><span data-stu-id="e72ad-843">The app pool's [setProfileEnvironment attribute](/iis/configuration/system.applicationhost/applicationpools/add/processmodel#configuration) must also be enabled.</span></span> <span data-ttu-id="e72ad-844">Výchozí hodnota `setProfileEnvironment` je `true`.</span><span class="sxs-lookup"><span data-stu-id="e72ad-844">The default value of `setProfileEnvironment` is `true`.</span></span> <span data-ttu-id="e72ad-845">V některých scénářích (například `setProfileEnvironment` operační `false`systém Windows) je nastavena na .</span><span class="sxs-lookup"><span data-stu-id="e72ad-845">In some scenarios (for example, Windows OS), `setProfileEnvironment` is set to `false`.</span></span> <span data-ttu-id="e72ad-846">Pokud klíče nejsou uloženy v adresáři profilu uživatele podle očekávání:</span><span class="sxs-lookup"><span data-stu-id="e72ad-846">If keys aren't stored in the user profile directory as expected:</span></span>

  1. <span data-ttu-id="e72ad-847">Přejděte do složky *%windir%/system32/inetsrv/config.*</span><span class="sxs-lookup"><span data-stu-id="e72ad-847">Navigate to the *%windir%/system32/inetsrv/config* folder.</span></span>
  1. <span data-ttu-id="e72ad-848">Otevřete soubor *applicationHost.config.*</span><span class="sxs-lookup"><span data-stu-id="e72ad-848">Open the *applicationHost.config* file.</span></span>
  1. <span data-ttu-id="e72ad-849">Vyhledejte element `<system.applicationHost><applicationPools><applicationPoolDefaults><processModel>`.</span><span class="sxs-lookup"><span data-stu-id="e72ad-849">Locate the `<system.applicationHost><applicationPools><applicationPoolDefaults><processModel>` element.</span></span>
  1. <span data-ttu-id="e72ad-850">Zkontrolujte, `setProfileEnvironment` zda atribut není k dispozici, `true`což je výchozí hodnota na `true`, nebo explicitně nastavte hodnotu atributu na .</span><span class="sxs-lookup"><span data-stu-id="e72ad-850">Confirm that the `setProfileEnvironment` attribute isn't present, which defaults the value to `true`, or explicitly set the attribute's value to `true`.</span></span>

* <span data-ttu-id="e72ad-851">**Použití systému souborů jako úložiště kroužků na klíče**</span><span class="sxs-lookup"><span data-stu-id="e72ad-851">**Use the file system as a key ring store**</span></span>

  <span data-ttu-id="e72ad-852">Upravte kód aplikace tak, aby [používal systém souborů jako úložiště kroužků klíčů](xref:security/data-protection/configuration/overview).</span><span class="sxs-lookup"><span data-stu-id="e72ad-852">Adjust the app code to [use the file system as a key ring store](xref:security/data-protection/configuration/overview).</span></span> <span data-ttu-id="e72ad-853">K ochraně kroužku na klíče a zajištění, že certifikát je důvěryhodný, použijte certifikát X509.</span><span class="sxs-lookup"><span data-stu-id="e72ad-853">Use an X509 certificate to protect the key ring and ensure the certificate is a trusted certificate.</span></span> <span data-ttu-id="e72ad-854">Pokud je certifikát podepsaný svým držitelem, umístěte jej do úložiště Důvěryhodného kořenového adresáře.</span><span class="sxs-lookup"><span data-stu-id="e72ad-854">If the certificate is self-signed, place the certificate in the Trusted Root store.</span></span>

  <span data-ttu-id="e72ad-855">Při použití služby IIS ve webové farmě:</span><span class="sxs-lookup"><span data-stu-id="e72ad-855">When using IIS in a web farm:</span></span>

  * <span data-ttu-id="e72ad-856">Použijte sdílenou složku, ke které mají přístup všechny počítače.</span><span class="sxs-lookup"><span data-stu-id="e72ad-856">Use a file share that all machines can access.</span></span>
  * <span data-ttu-id="e72ad-857">Nasazení certifikátu X509 do každého počítače.</span><span class="sxs-lookup"><span data-stu-id="e72ad-857">Deploy an X509 certificate to each machine.</span></span> <span data-ttu-id="e72ad-858">Konfigurace [ochrany dat v kódu](xref:security/data-protection/configuration/overview).</span><span class="sxs-lookup"><span data-stu-id="e72ad-858">Configure [data protection in code](xref:security/data-protection/configuration/overview).</span></span>

* <span data-ttu-id="e72ad-859">**Nastavení celopočítačových zásad pro ochranu dat**</span><span class="sxs-lookup"><span data-stu-id="e72ad-859">**Set a machine-wide policy for data protection**</span></span>

  <span data-ttu-id="e72ad-860">Systém ochrany dat má omezenou podporu pro nastavení výchozí [zásady celého počítače](xref:security/data-protection/configuration/machine-wide-policy) pro všechny aplikace, které spotřebovávají data protection API.</span><span class="sxs-lookup"><span data-stu-id="e72ad-860">The data protection system has limited support for setting a default [machine-wide policy](xref:security/data-protection/configuration/machine-wide-policy) for all apps that consume the Data Protection APIs.</span></span> <span data-ttu-id="e72ad-861">Další informace naleznete v tématu <xref:security/data-protection/introduction>.</span><span class="sxs-lookup"><span data-stu-id="e72ad-861">For more information, see <xref:security/data-protection/introduction>.</span></span>

## <a name="virtual-directories"></a><span data-ttu-id="e72ad-862">Virtuální adresáře</span><span class="sxs-lookup"><span data-stu-id="e72ad-862">Virtual Directories</span></span>

<span data-ttu-id="e72ad-863">[Virtuální adresáře služby IIS](/iis/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis#virtual-directories) nejsou podporovány aplikacemi ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="e72ad-863">[IIS Virtual Directories](/iis/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis#virtual-directories) aren't supported with ASP.NET Core apps.</span></span> <span data-ttu-id="e72ad-864">Aplikace může být hostována jako [podaplikace](#sub-applications).</span><span class="sxs-lookup"><span data-stu-id="e72ad-864">An app can be hosted as a [sub-application](#sub-applications).</span></span>

## <a name="sub-applications"></a><span data-ttu-id="e72ad-865">Dílčí aplikace</span><span class="sxs-lookup"><span data-stu-id="e72ad-865">Sub-applications</span></span>

<span data-ttu-id="e72ad-866">Aplikaci ASP.NET Core lze hostovat jako [podaplikaci služby IIS (podaplikaci).](/iis/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis#applications)</span><span class="sxs-lookup"><span data-stu-id="e72ad-866">An ASP.NET Core app can be hosted as an [IIS sub-application (sub-app)](/iis/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis#applications).</span></span> <span data-ttu-id="e72ad-867">Cesta podaplikace se stane součástí adresy URL kořenové aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-867">The sub-app's path becomes part of the root app's URL.</span></span>

<span data-ttu-id="e72ad-868">Statické odkazy datových zdrojů v rámci podaplikace`~/`by měly používat zápis tildového lomítka ( ).</span><span class="sxs-lookup"><span data-stu-id="e72ad-868">Static asset links within the sub-app should use tilde-slash (`~/`) notation.</span></span> <span data-ttu-id="e72ad-869">Zápis tildového lomítka aktivuje [pomocníka tagu,](xref:mvc/views/tag-helpers/intro) který předřává základnu cesty podaplikace k vykreslenérelativní vazbě.</span><span class="sxs-lookup"><span data-stu-id="e72ad-869">Tilde-slash notation triggers a [Tag Helper](xref:mvc/views/tag-helpers/intro) to prepend the sub-app's pathbase to the rendered relative link.</span></span> <span data-ttu-id="e72ad-870">Pro podaplikaci `/subapp_path`na adrese , `src="~/image.png"` obrázek `src="/subapp_path/image.png"`spojený s je vykreslen jako .</span><span class="sxs-lookup"><span data-stu-id="e72ad-870">For a sub-app at `/subapp_path`, an image linked with `src="~/image.png"` is rendered as `src="/subapp_path/image.png"`.</span></span> <span data-ttu-id="e72ad-871">Middleware statického souboru kořenové aplikace nezpracovává požadavek na statický soubor.</span><span class="sxs-lookup"><span data-stu-id="e72ad-871">The root app's Static File Middleware doesn't process the static file request.</span></span> <span data-ttu-id="e72ad-872">Požadavek je zpracován middlewarem statického souboru podaplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-872">The request is processed by the sub-app's Static File Middleware.</span></span>

<span data-ttu-id="e72ad-873">Pokud je atribut `src` statického datového zdroje nastaven na `src="/image.png"`absolutní cestu (například), odkaz se vykreslí bez vytvoření cesty podaplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-873">If a static asset's `src` attribute is set to an absolute path (for example, `src="/image.png"`), the link is rendered without the sub-app's pathbase.</span></span> <span data-ttu-id="e72ad-874">Middleware statického souboru kořenové aplikace se pokouší obsluhovat datový zdroj z [kořenového kořenového kořenového adresáře](xref:fundamentals/index#web-root)aplikace , což má za následek odpověď *404 - Not Found,* pokud není statický datový zdroj k dispozici z kořenové aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-874">The root app's Static File Middleware attempts to serve the asset from the root app's [web root](xref:fundamentals/index#web-root), which results in a *404 - Not Found* response unless the static asset is available from the root app.</span></span>

<span data-ttu-id="e72ad-875">Hostování aplikace ASP.NET Core jako podaplikace pod jinou aplikací ASP.NET Core:</span><span class="sxs-lookup"><span data-stu-id="e72ad-875">To host an ASP.NET Core app as a sub-app under another ASP.NET Core app:</span></span>

1. <span data-ttu-id="e72ad-876">Vytvořte fond aplikací pro podaplikaci.</span><span class="sxs-lookup"><span data-stu-id="e72ad-876">Establish an app pool for the sub-app.</span></span> <span data-ttu-id="e72ad-877">Nastavte **verzi .NET CLR** na **žádný spravovaný kód,** protože prostředí Core Common Language Runtime (CoreCLR) pro .NET Core je spuštěno pro hostování aplikace v pracovním procesu, nikoli na ploše CLR (.NET CLR).</span><span class="sxs-lookup"><span data-stu-id="e72ad-877">Set the **.NET CLR Version** to **No Managed Code** because the Core Common Language Runtime (CoreCLR) for .NET Core is booted to host the app in the worker process, not the desktop CLR (.NET CLR).</span></span>

1. <span data-ttu-id="e72ad-878">Přidejte kořenový web ve Správci služby IIS s podaplikací ve složce pod kořenovým webem.</span><span class="sxs-lookup"><span data-stu-id="e72ad-878">Add the root site in IIS Manager with the sub-app in a folder under the root site.</span></span>

1. <span data-ttu-id="e72ad-879">Klikněte pravým tlačítkem myši na složku podaplikace ve Správci služby IIS a vyberte **příkaz Převést na aplikaci**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-879">Right-click the sub-app folder in IIS Manager and select **Convert to Application**.</span></span>

1. <span data-ttu-id="e72ad-880">V dialogovém okně **Přidat aplikaci** přiřaďte pomocí tlačítka **Vybrat** pro **fond aplikací** fond aplikací, který jste vytvořili pro podaplikaci.</span><span class="sxs-lookup"><span data-stu-id="e72ad-880">In the **Add Application** dialog, use the **Select** button for the **Application Pool** to assign the app pool that you created for the sub-app.</span></span> <span data-ttu-id="e72ad-881">Vyberte **OK**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-881">Select **OK**.</span></span>

<span data-ttu-id="e72ad-882">Přiřazení samostatného fondu aplikací do podaplikace je požadavek při použití modelu hostování v procesu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-882">The assignment of a separate app pool to the sub-app is a requirement when using the in-process hosting model.</span></span>

<span data-ttu-id="e72ad-883">Další informace o modelu hostování v procesu a konfiguraci <xref:host-and-deploy/aspnet-core-module>ASP.NET core modulu naleznete v tématu .</span><span class="sxs-lookup"><span data-stu-id="e72ad-883">For more information on the in-process hosting model and configuring the ASP.NET Core Module, see <xref:host-and-deploy/aspnet-core-module>.</span></span>

## <a name="configuration-of-iis-with-webconfig"></a><span data-ttu-id="e72ad-884">Konfigurace služby IIS pomocí souboru web.config</span><span class="sxs-lookup"><span data-stu-id="e72ad-884">Configuration of IIS with web.config</span></span>

<span data-ttu-id="e72ad-885">Konfigurace služby IIS `<system.webServer>` je ovlivněna částí *web.config* pro scénáře služby IIS, které jsou funkční pro ASP.NET aplikace Core pomocí ASP.NET core modulem.</span><span class="sxs-lookup"><span data-stu-id="e72ad-885">IIS configuration is influenced by the `<system.webServer>` section of *web.config* for IIS scenarios that are functional for ASP.NET Core apps with the ASP.NET Core Module.</span></span> <span data-ttu-id="e72ad-886">Například konfigurace služby IIS je funkční pro dynamickou kompresi.</span><span class="sxs-lookup"><span data-stu-id="e72ad-886">For example, IIS configuration is functional for dynamic compression.</span></span> <span data-ttu-id="e72ad-887">Pokud je služba IIS nakonfigurována na `<urlCompression>` úrovni serveru pro použití dynamické komprese, prvek v souboru *web.config* aplikace jej může zakázat pro aplikaci ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="e72ad-887">If IIS is configured at the server level to use dynamic compression, the `<urlCompression>` element in the app's *web.config* file can disable it for an ASP.NET Core app.</span></span>

<span data-ttu-id="e72ad-888">Další informace najdete v následujících tématech:</span><span class="sxs-lookup"><span data-stu-id="e72ad-888">For more information, see the following topics:</span></span>

* [<span data-ttu-id="e72ad-889">Odkaz na \<konfiguraci pro>system.webServer</span><span class="sxs-lookup"><span data-stu-id="e72ad-889">Configuration reference for \<system.webServer></span></span>](/iis/configuration/system.webServer/)
* <xref:host-and-deploy/aspnet-core-module>
* <xref:host-and-deploy/iis/modules>

<span data-ttu-id="e72ad-890">Chcete-li nastavit proměnné prostředí pro jednotlivé aplikace spuštěné v izolovaných fondech aplikací (podporované pro službu IIS 10.0 nebo novější), přečtěte si část *příkazu AppCmd.exe* v tématu [Environment Variables environmentvariables>\<](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) tématu v referenční dokumentaci služby IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-890">To set environment variables for individual apps running in isolated app pools (supported for IIS 10.0 or later), see the *AppCmd.exe command* section of the [Environment Variables \<environmentVariables>](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) topic in the IIS reference documentation.</span></span>

## <a name="configuration-sections-of-webconfig"></a><span data-ttu-id="e72ad-891">Konfigurační části web.config</span><span class="sxs-lookup"><span data-stu-id="e72ad-891">Configuration sections of web.config</span></span>

<span data-ttu-id="e72ad-892">Části konfigurace aplikací ASP.NET 4.x v *souboru web.config* nepoužívají aplikace ASP.NET Core pro konfiguraci:</span><span class="sxs-lookup"><span data-stu-id="e72ad-892">Configuration sections of ASP.NET 4.x apps in *web.config* aren't used by ASP.NET Core apps for configuration:</span></span>

* `<system.web>`
* `<appSettings>`
* `<connectionStrings>`
* `<location>`

<span data-ttu-id="e72ad-893">ASP.NET aplikace Core jsou konfigurovány pomocí jiných poskytovatelů konfigurace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-893">ASP.NET Core apps are configured using other configuration providers.</span></span> <span data-ttu-id="e72ad-894">Další informace naleznete v [tématu Konfigurace](xref:fundamentals/configuration/index).</span><span class="sxs-lookup"><span data-stu-id="e72ad-894">For more information, see [Configuration](xref:fundamentals/configuration/index).</span></span>

## <a name="application-pools"></a><span data-ttu-id="e72ad-895">Fondy aplikací</span><span class="sxs-lookup"><span data-stu-id="e72ad-895">Application Pools</span></span>

<span data-ttu-id="e72ad-896">Izolace fondu aplikací je určena modelem hostování:</span><span class="sxs-lookup"><span data-stu-id="e72ad-896">App pool isolation is determined by the hosting model:</span></span>

* <span data-ttu-id="e72ad-897">V průběhu &ndash; procesu hosting ové aplikace jsou nutné ke spuštění v samostatných fondech aplikací.</span><span class="sxs-lookup"><span data-stu-id="e72ad-897">In-process hosting &ndash; Apps are required to run in separate app pools.</span></span>
* <span data-ttu-id="e72ad-898">Mimoprocesový hosting &ndash; Doporučujeme izolovat aplikace od sebe navzájem spuštěním každé aplikace ve vlastním fondu aplikací.</span><span class="sxs-lookup"><span data-stu-id="e72ad-898">Out-of-process hosting &ndash; We recommend isolating the apps from each other by running each app in its own app pool.</span></span>

<span data-ttu-id="e72ad-899">Dialogové okno **IIS Přidat web** se ve výchozím nastavení používá do jednoho fondu aplikací na aplikaci.</span><span class="sxs-lookup"><span data-stu-id="e72ad-899">The IIS **Add Website** dialog defaults to a single app pool per app.</span></span> <span data-ttu-id="e72ad-900">Když je k dispozici **název webu,** text se automaticky přenese do textového pole **Fondu aplikací.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-900">When a **Site name** is provided, the text is automatically transferred to the **Application pool** textbox.</span></span> <span data-ttu-id="e72ad-901">Při přidání webu se vytvoří nový fond aplikací s názvem webu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-901">A new app pool is created using the site name when the site is added.</span></span>

## <a name="application-pool-identity"></a><span data-ttu-id="e72ad-902">Identita fondu aplikací</span><span class="sxs-lookup"><span data-stu-id="e72ad-902">Application Pool Identity</span></span>

<span data-ttu-id="e72ad-903">Účet identity fondu aplikací umožňuje aplikaci spouštět pod jedinečným účtem, aniž by bylo třeba vytvářet a spravovat domény nebo místní účty.</span><span class="sxs-lookup"><span data-stu-id="e72ad-903">An app pool identity account allows an app to run under a unique account without having to create and manage domains or local accounts.</span></span> <span data-ttu-id="e72ad-904">Ve službě IIS 8.0 nebo novější vytvoří pracovní proces správce služby IIS (WAS) virtuální účet s názvem nového fondu aplikací a ve výchozím nastavení spustí pracovní procesy fondu aplikací v rámci tohoto účtu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-904">On IIS 8.0 or later, the IIS Admin Worker Process (WAS) creates a virtual account with the name of the new app pool and runs the app pool's worker processes under this account by default.</span></span> <span data-ttu-id="e72ad-905">V konzole pro správu služby IIS v části **Upřesnit nastavení** fondu aplikací zkontrolujte, zda je **identita** nastavená na použití **applicationpoolidentity**:</span><span class="sxs-lookup"><span data-stu-id="e72ad-905">In the IIS Management Console under **Advanced Settings** for the app pool, ensure that the **Identity** is set to use **ApplicationPoolIdentity**:</span></span>

![Dialogové okno Upřesnit nastavení fondu aplikací](index/_static/apppool-identity.png)

<span data-ttu-id="e72ad-907">Proces správy služby IIS vytvoří zabezpečený identifikátor s názvem fondu aplikací v systému zabezpečení systému Windows.</span><span class="sxs-lookup"><span data-stu-id="e72ad-907">The IIS management process creates a secure identifier with the name of the app pool in the Windows Security System.</span></span> <span data-ttu-id="e72ad-908">Prostředky lze zabezpečit pomocí této identity.</span><span class="sxs-lookup"><span data-stu-id="e72ad-908">Resources can be secured using this identity.</span></span> <span data-ttu-id="e72ad-909">Tato identita však není reálný uživatelský účet a nezobrazuje se v konzole pro správu uživatelů systému Windows.</span><span class="sxs-lookup"><span data-stu-id="e72ad-909">However, this identity isn't a real user account and doesn't show up in the Windows User Management Console.</span></span>

<span data-ttu-id="e72ad-910">Pokud pracovní proces služby IIS vyžaduje zvýšený přístup k aplikaci, upravte seznam řízení přístupu (ACL) pro adresář obsahující aplikaci:</span><span class="sxs-lookup"><span data-stu-id="e72ad-910">If the IIS worker process requires elevated access to the app, modify the Access Control List (ACL) for the directory containing the app:</span></span>

1. <span data-ttu-id="e72ad-911">Sem otevřete Průzkumníka Windows a přejděte do adresáře.</span><span class="sxs-lookup"><span data-stu-id="e72ad-911">Open Windows Explorer and navigate to the directory.</span></span>

1. <span data-ttu-id="e72ad-912">Klepněte pravým tlačítkem myši na adresář a vyberte příkaz **Vlastnosti**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-912">Right-click on the directory and select **Properties**.</span></span>

1. <span data-ttu-id="e72ad-913">Na kartě **Zabezpečení** vyberte tlačítko **Upravit** a pak **tlačítko Přidat.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-913">Under the **Security** tab, select the **Edit** button and then the **Add** button.</span></span>

1. <span data-ttu-id="e72ad-914">Vyberte tlačítko **Umístění** a ujistěte se, že je vybrán systém.</span><span class="sxs-lookup"><span data-stu-id="e72ad-914">Select the **Locations** button and make sure the system is selected.</span></span>

1. <span data-ttu-id="e72ad-915">Zadejte **\\<<iIS app_pool_name>** **zadejte názvy objektů, které chcete vybrat.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-915">Enter **IIS AppPool\\<app_pool_name>** in **Enter the object names to select** area.</span></span> <span data-ttu-id="e72ad-916">Vyberte tlačítko **Zkontrolovat jména.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-916">Select the **Check Names** button.</span></span> <span data-ttu-id="e72ad-917">Pro *DefaultAppPool* zkontrolujte názvy pomocí **IIS AppPool\DefaultAppPool**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-917">For the *DefaultAppPool* check the names using **IIS AppPool\DefaultAppPool**.</span></span> <span data-ttu-id="e72ad-918">Když je vybráno tlačítko **Zkontrolovat názvy,** je v oblasti názvů objektů uvedena hodnota **DefaultAppPool.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-918">When the **Check Names** button is selected, a value of **DefaultAppPool** is indicated in the object names area.</span></span> <span data-ttu-id="e72ad-919">Název fondu aplikací není možné zadat přímo do oblasti názvů objektů.</span><span class="sxs-lookup"><span data-stu-id="e72ad-919">It isn't possible to enter the app pool name directly into the object names area.</span></span> <span data-ttu-id="e72ad-920">Při kontrole názvu objektu použijte<<app_pool_name>formátu \*\*IIS AppPool.\\ \*\*</span><span class="sxs-lookup"><span data-stu-id="e72ad-920">Use the **IIS AppPool\\<app_pool_name>** format when checking for the object name.</span></span>

   ![Dialogové okno Vybrat uživatele nebo skupiny pro složku aplikace: Název fondu aplikací "DefaultAppPool" se připojí k "IIS AppPool\" v oblasti názvů objektů před výběrem možnosti Zkontrolovat názvy".](index/_static/select-users-or-groups-1.png)

1. <span data-ttu-id="e72ad-922">Vyberte **OK**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-922">Select **OK**.</span></span>

   ![Dialogové okno Vybrat uživatele nebo skupiny pro složku aplikace: Po výběru možnosti Zkontrolovat názvy se v oblasti názvů objektů zobrazí název objektu DefaultAppPool.](index/_static/select-users-or-groups-2.png)

1. <span data-ttu-id="e72ad-924">Oprávnění &amp; ke spuštění čtení by měla být udělena ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="e72ad-924">Read &amp; execute permissions should be granted by default.</span></span> <span data-ttu-id="e72ad-925">Podle potřeby zadejte další oprávnění.</span><span class="sxs-lookup"><span data-stu-id="e72ad-925">Provide additional permissions as needed.</span></span>

<span data-ttu-id="e72ad-926">Přístup lze také udělit na příkazovém řádku pomocí nástroje **ICACLS.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-926">Access can also be granted at a command prompt using the **ICACLS** tool.</span></span> <span data-ttu-id="e72ad-927">Jako příklad použijete *defaultapppool,* který používá následující příkaz:</span><span class="sxs-lookup"><span data-stu-id="e72ad-927">Using the *DefaultAppPool* as an example, the following command is used:</span></span>

```console
ICACLS C:\sites\MyWebApp /grant "IIS AppPool\DefaultAppPool":F
```

<span data-ttu-id="e72ad-928">Další informace naleznete v tématu [icacls.](/windows-server/administration/windows-commands/icacls)</span><span class="sxs-lookup"><span data-stu-id="e72ad-928">For more information, see the [icacls](/windows-server/administration/windows-commands/icacls) topic.</span></span>

## <a name="http2-support"></a><span data-ttu-id="e72ad-929">Podpora HTTP/2</span><span class="sxs-lookup"><span data-stu-id="e72ad-929">HTTP/2 support</span></span>

<span data-ttu-id="e72ad-930">[Protokol HTTP/2](https://httpwg.org/specs/rfc7540.html) je podporován ASP.NET jádrem v následujících scénářích nasazení služby IIS:</span><span class="sxs-lookup"><span data-stu-id="e72ad-930">[HTTP/2](https://httpwg.org/specs/rfc7540.html) is supported with ASP.NET Core in the following IIS deployment scenarios:</span></span>

* <span data-ttu-id="e72ad-931">Neprocesové</span><span class="sxs-lookup"><span data-stu-id="e72ad-931">In-process</span></span>
  * <span data-ttu-id="e72ad-932">Windows Server 2016/Windows 10 nebo novější; IIS 10 nebo novější</span><span class="sxs-lookup"><span data-stu-id="e72ad-932">Windows Server 2016/Windows 10 or later; IIS 10 or later</span></span>
  * <span data-ttu-id="e72ad-933">Připojení TLS 1.2 nebo novější</span><span class="sxs-lookup"><span data-stu-id="e72ad-933">TLS 1.2 or later connection</span></span>
* <span data-ttu-id="e72ad-934">Mimo proces</span><span class="sxs-lookup"><span data-stu-id="e72ad-934">Out-of-process</span></span>
  * <span data-ttu-id="e72ad-935">Windows Server 2016/Windows 10 nebo novější; IIS 10 nebo novější</span><span class="sxs-lookup"><span data-stu-id="e72ad-935">Windows Server 2016/Windows 10 or later; IIS 10 or later</span></span>
  * <span data-ttu-id="e72ad-936">Připojení serveru edge směřující mj. [Kestrel server](xref:fundamentals/servers/kestrel)</span><span class="sxs-lookup"><span data-stu-id="e72ad-936">Public-facing edge server connections use HTTP/2, but the reverse proxy connection to the [Kestrel server](xref:fundamentals/servers/kestrel) uses HTTP/1.1.</span></span>
  * <span data-ttu-id="e72ad-937">Připojení TLS 1.2 nebo novější</span><span class="sxs-lookup"><span data-stu-id="e72ad-937">TLS 1.2 or later connection</span></span>

<span data-ttu-id="e72ad-938">Pro nasazení v procesu při navázání připojení HTTP/2 `HTTP/2`protokol [HttpRequest.Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) hlásí .</span><span class="sxs-lookup"><span data-stu-id="e72ad-938">For an in-process deployment when an HTTP/2 connection is established, [HttpRequest.Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) reports `HTTP/2`.</span></span> <span data-ttu-id="e72ad-939">Pro mimoprocesové nasazení při navázání připojení HTTP/2 hlásí protokol `HTTP/1.1` [HttpRequest.Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) .</span><span class="sxs-lookup"><span data-stu-id="e72ad-939">For an out-of-process deployment when an HTTP/2 connection is established, [HttpRequest.Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) reports `HTTP/1.1`.</span></span>

<span data-ttu-id="e72ad-940">Další informace o modelech hostování v procesu a <xref:host-and-deploy/aspnet-core-module>mimo proces naleznete v tématu .</span><span class="sxs-lookup"><span data-stu-id="e72ad-940">For more information on the in-process and out-of-process hosting models, see <xref:host-and-deploy/aspnet-core-module>.</span></span>

<span data-ttu-id="e72ad-941">Protokol HTTP/2 je ve výchozím nastavení povolen.</span><span class="sxs-lookup"><span data-stu-id="e72ad-941">HTTP/2 is enabled by default.</span></span> <span data-ttu-id="e72ad-942">Připojení se vrátí na HTTP/1.1, pokud není navázáno připojení HTTP/2.</span><span class="sxs-lookup"><span data-stu-id="e72ad-942">Connections fall back to HTTP/1.1 if an HTTP/2 connection isn't established.</span></span> <span data-ttu-id="e72ad-943">Další informace o konfiguraci protokolu HTTP/2 s nasazením služby IIS naleznete [v tématu HTTP/2 ve službě IIS](/iis/get-started/whats-new-in-iis-10/http2-on-iis).</span><span class="sxs-lookup"><span data-stu-id="e72ad-943">For more information on HTTP/2 configuration with IIS deployments, see [HTTP/2 on IIS](/iis/get-started/whats-new-in-iis-10/http2-on-iis).</span></span>

## <a name="cors-preflight-requests"></a><span data-ttu-id="e72ad-944">Požadavky cors kontroly před výstupem</span><span class="sxs-lookup"><span data-stu-id="e72ad-944">CORS preflight requests</span></span>

<span data-ttu-id="e72ad-945">*Tato část se vztahuje pouze na ASP.NET základní aplikace, které se zaměřují na rozhraní .NET Framework.*</span><span class="sxs-lookup"><span data-stu-id="e72ad-945">*This section only applies to ASP.NET Core apps that target the .NET Framework.*</span></span>

<span data-ttu-id="e72ad-946">Pro aplikaci ASP.NET Core, která cílí na rozhraní .NET Framework, nejsou požadavky OPTIONS ve výchozím nastavení ve službách IIS předány do aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-946">For an ASP.NET Core app that targets the .NET Framework, OPTIONS requests aren't passed to the app by default in IIS.</span></span> <span data-ttu-id="e72ad-947">Informace o konfiguraci obslužných rutin služby IIS aplikace v *souboru web.config* tak, aby předávály požadavky OPTIONS, naleznete v tématu [Povolení požadavků napříč původy v ASP.NET webovém rozhraní API 2: Jak funguje cors](/aspnet/web-api/overview/security/enabling-cross-origin-requests-in-web-api#how-cors-works).</span><span class="sxs-lookup"><span data-stu-id="e72ad-947">To learn how to configure the app's IIS handlers in *web.config* to pass OPTIONS requests, see [Enable cross-origin requests in ASP.NET Web API 2: How CORS Works](/aspnet/web-api/overview/security/enabling-cross-origin-requests-in-web-api#how-cors-works).</span></span>

## <a name="application-initialization-module-and-idle-timeout"></a><span data-ttu-id="e72ad-948">Modul inicializace aplikace a časový limit nečinnosti</span><span class="sxs-lookup"><span data-stu-id="e72ad-948">Application Initialization Module and Idle Timeout</span></span>

<span data-ttu-id="e72ad-949">Pokud je ve správě ve správě iis hostován ASP.NET základnímodul verze 2:</span><span class="sxs-lookup"><span data-stu-id="e72ad-949">When hosted in IIS by the ASP.NET Core Module version 2:</span></span>

* <span data-ttu-id="e72ad-950">[Aplikace Inicializační modul](#application-initialization-module) &ndash; aplikace hostované [v procesu](#in-process-hosting-model) nebo [mimo proces](#out-of-process-hosting-model) lze nakonfigurovat tak, aby se automaticky spouštěla při restartování pracovního procesu nebo restartování serveru.</span><span class="sxs-lookup"><span data-stu-id="e72ad-950">[Application Initialization Module](#application-initialization-module) &ndash; App's hosted [in-process](#in-process-hosting-model) or [out-of-process](#out-of-process-hosting-model) can be configured to start automatically on a worker process restart or server restart.</span></span>
* <span data-ttu-id="e72ad-951">[Nevyužitý časový limit](#idle-timeout) &ndash; aplikace hostované [v procesu](#in-process-hosting-model) lze nakonfigurovat tak, aby časový limit během období nečinnosti.</span><span class="sxs-lookup"><span data-stu-id="e72ad-951">[Idle Timeout](#idle-timeout) &ndash; App's hosted [in-process](#in-process-hosting-model) can be configured not to timeout during periods of inactivity.</span></span>

### <a name="application-initialization-module"></a><span data-ttu-id="e72ad-952">Inicializační modul aplikace</span><span class="sxs-lookup"><span data-stu-id="e72ad-952">Application Initialization Module</span></span>

<span data-ttu-id="e72ad-953">*Platí pro aplikace hostované v průběhu procesu a mimo proces.*</span><span class="sxs-lookup"><span data-stu-id="e72ad-953">*Applies to apps hosted in-process and out-of-process.*</span></span>

<span data-ttu-id="e72ad-954">[Inicializace aplikace služby IIS](/iis/get-started/whats-new-in-iis-8/iis-80-application-initialization) je funkce služby IIS, která odesílá požadavek HTTP do aplikace při spuštění nebo recyklaci fondu aplikací.</span><span class="sxs-lookup"><span data-stu-id="e72ad-954">[IIS Application Initialization](/iis/get-started/whats-new-in-iis-8/iis-80-application-initialization) is an IIS feature that sends an HTTP request to the app when the app pool starts or is recycled.</span></span> <span data-ttu-id="e72ad-955">Požadavek spustí spuštění aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-955">The request triggers the app to start.</span></span> <span data-ttu-id="e72ad-956">Ve výchozím nastavení služba IIS vydá požadavek`/`na kořenovou adresu URL aplikace ( ) o inicializaci aplikace (další podrobnosti o konfiguraci najdete v [dalších zdrojích](#application-initialization-module-and-idle-timeout-additional-resources) informací).</span><span class="sxs-lookup"><span data-stu-id="e72ad-956">By default, IIS issues a request to the app's root URL (`/`) to initialize the app (see the [additional resources](#application-initialization-module-and-idle-timeout-additional-resources) for more details on configuration).</span></span>

<span data-ttu-id="e72ad-957">Zkontrolujte, zda je funkce role Inicializace aplikace služby IIS povolena:</span><span class="sxs-lookup"><span data-stu-id="e72ad-957">Confirm that the IIS Application Initialization role feature in enabled:</span></span>

<span data-ttu-id="e72ad-958">V desktopových systémech se systémem Windows 7 nebo novějších při místním používání služby IIS:</span><span class="sxs-lookup"><span data-stu-id="e72ad-958">On Windows 7 or later desktop systems when using IIS locally:</span></span>

1. <span data-ttu-id="e72ad-959">Přejděte na **Ovládací panely** > **Programy** > **a funkce** > **Zapněte nebo vypněte funkce systému Windows** (levá strana obrazovky).</span><span class="sxs-lookup"><span data-stu-id="e72ad-959">Navigate to **Control Panel** > **Programs** > **Programs and Features** > **Turn Windows features on or off** (left side of the screen).</span></span>
1. <span data-ttu-id="e72ad-960">Otevřete funkce **vývoje aplikací** **internetových informačních služeb** > **World Wide Web Services** > .</span><span class="sxs-lookup"><span data-stu-id="e72ad-960">Open **Internet Information Services** > **World Wide Web Services** > **Application Development Features**.</span></span>
1. <span data-ttu-id="e72ad-961">Zaškrtněte políčko pro **inicializaci aplikace**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-961">Select the check box for **Application Initialization**.</span></span>

<span data-ttu-id="e72ad-962">V systému Windows Server 2008 R2 nebo novějším:</span><span class="sxs-lookup"><span data-stu-id="e72ad-962">On Windows Server 2008 R2 or later:</span></span>

1. <span data-ttu-id="e72ad-963">Otevřete **Průvodce přidáním rolí a funkcí**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-963">Open the **Add Roles and Features Wizard**.</span></span>
1. <span data-ttu-id="e72ad-964">V panelu **Vybrat služby rolí** otevřete uzel **Vývoj aplikací.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-964">In the **Select role services** panel, open the **Application Development** node.</span></span>
1. <span data-ttu-id="e72ad-965">Zaškrtněte políčko pro **inicializaci aplikace**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-965">Select the check box for **Application Initialization**.</span></span>

<span data-ttu-id="e72ad-966">K povolení modulu inicializace aplikace pro lokalitu použijte některý z následujících přístupů:</span><span class="sxs-lookup"><span data-stu-id="e72ad-966">Use either of the following approaches to enable the Application Initialization Module for the site:</span></span>

* <span data-ttu-id="e72ad-967">Pomocí Správce služby IIS:</span><span class="sxs-lookup"><span data-stu-id="e72ad-967">Using IIS Manager:</span></span>

  1. <span data-ttu-id="e72ad-968">V panelu **Připojení** vyberte **fondy aplikací.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-968">Select **Application Pools** in the **Connections** panel.</span></span>
  1. <span data-ttu-id="e72ad-969">Klikněte pravým tlačítkem myši na fond aplikací v seznamu a vyberte **Upřesnit nastavení**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-969">Right-click the app's app pool in the list and select **Advanced Settings**.</span></span>
  1. <span data-ttu-id="e72ad-970">Výchozí **režim spuštění** je **OnDemand**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-970">The default **Start Mode** is **OnDemand**.</span></span> <span data-ttu-id="e72ad-971">Nastavte **režim spuštění** na **vždy spuštěný**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-971">Set the **Start Mode** to **AlwaysRunning**.</span></span> <span data-ttu-id="e72ad-972">Vyberte **OK**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-972">Select **OK**.</span></span>
  1. <span data-ttu-id="e72ad-973">Otevřete uzel **Weby** v panelu **Připojení.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-973">Open the **Sites** node in the **Connections** panel.</span></span>
  1. <span data-ttu-id="e72ad-974">Klikněte pravým tlačítkem myši na aplikaci a vyberte Spravovat **upřesnit nastavení** **webu** > .</span><span class="sxs-lookup"><span data-stu-id="e72ad-974">Right-click the app and select **Manage Website** > **Advanced Settings**.</span></span>
  1. <span data-ttu-id="e72ad-975">Výchozí nastavení **Preload Enabled** je **False**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-975">The default **Preload Enabled** setting is **False**.</span></span> <span data-ttu-id="e72ad-976">Nastavte **předběžné načtení povoleno** na **hodnotu True**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-976">Set **Preload Enabled** to **True**.</span></span> <span data-ttu-id="e72ad-977">Vyberte **OK**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-977">Select **OK**.</span></span>

* <span data-ttu-id="e72ad-978">Pomocí `<applicationInitialization>` `doAppInitAfterRestart` *souboru web.config*přidejte `true` prvek `<system.webServer>` s nastavenou na do prvků v souboru *web.config* aplikace:</span><span class="sxs-lookup"><span data-stu-id="e72ad-978">Using *web.config*, add the `<applicationInitialization>` element with `doAppInitAfterRestart` set to `true` to the `<system.webServer>` elements in the app's *web.config* file:</span></span>

  ```xml
  <?xml version="1.0" encoding="utf-8"?>
  <configuration>
    <location path="." inheritInChildApplications="false">
      <system.webServer>
        <applicationInitialization doAppInitAfterRestart="true" />
      </system.webServer>
    </location>
  </configuration>
  ```

### <a name="idle-timeout"></a><span data-ttu-id="e72ad-979">Časový limit nečinnosti</span><span class="sxs-lookup"><span data-stu-id="e72ad-979">Idle Timeout</span></span>

<span data-ttu-id="e72ad-980">*Platí pouze pro aplikace hostované v procesu.*</span><span class="sxs-lookup"><span data-stu-id="e72ad-980">*Only applies to apps hosted in-process.*</span></span>

<span data-ttu-id="e72ad-981">Chcete-li aplikaci zabránit v volnoběhu, nastavte časový limit nečinnosti fondu aplikací pomocí Správce služby IIS:</span><span class="sxs-lookup"><span data-stu-id="e72ad-981">To prevent the app from idling, set the app pool's idle timeout using IIS Manager:</span></span>

1. <span data-ttu-id="e72ad-982">V panelu **Připojení** vyberte **fondy aplikací.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-982">Select **Application Pools** in the **Connections** panel.</span></span>
1. <span data-ttu-id="e72ad-983">Klikněte pravým tlačítkem myši na fond aplikací v seznamu a vyberte **Upřesnit nastavení**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-983">Right-click the app's app pool in the list and select **Advanced Settings**.</span></span>
1. <span data-ttu-id="e72ad-984">Výchozí **časový limit nečinnosti (minuty)** je **20** minut.</span><span class="sxs-lookup"><span data-stu-id="e72ad-984">The default **Idle Time-out (minutes)** is **20** minutes.</span></span> <span data-ttu-id="e72ad-985">Nastavte **časový limit nečinnosti (minuty)** na **0** (nula).</span><span class="sxs-lookup"><span data-stu-id="e72ad-985">Set the **Idle Time-out (minutes)** to **0** (zero).</span></span> <span data-ttu-id="e72ad-986">Vyberte **OK**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-986">Select **OK**.</span></span>
1. <span data-ttu-id="e72ad-987">Recyklujte pracovní proces.</span><span class="sxs-lookup"><span data-stu-id="e72ad-987">Recycle the worker process.</span></span>

<span data-ttu-id="e72ad-988">Chcete-li zabránit vypršení časového limitu aplikací hostovaných [mimo proces,](#out-of-process-hosting-model) použijte některý z následujících přístupů:</span><span class="sxs-lookup"><span data-stu-id="e72ad-988">To prevent apps hosted [out-of-process](#out-of-process-hosting-model) from timing out, use either of the following approaches:</span></span>

* <span data-ttu-id="e72ad-989">Příkazping aplikace z externí služby, aby byla spuštěna.</span><span class="sxs-lookup"><span data-stu-id="e72ad-989">Ping the app from an external service in order to keep it running.</span></span>
* <span data-ttu-id="e72ad-990">Pokud aplikace hostuje pouze služby na pozadí, vyhněte se hostování služby IIS a pomocí [služby Windows service hostujte aplikaci ASP.NET Core](xref:host-and-deploy/windows-service).</span><span class="sxs-lookup"><span data-stu-id="e72ad-990">If the app only hosts background services, avoid IIS hosting and use a [Windows Service to host the ASP.NET Core app](xref:host-and-deploy/windows-service).</span></span>

### <a name="application-initialization-module-and-idle-timeout-additional-resources"></a><span data-ttu-id="e72ad-991">Modul inicializace aplikace a časový limit nečinnosti další prostředky</span><span class="sxs-lookup"><span data-stu-id="e72ad-991">Application Initialization Module and Idle Timeout additional resources</span></span>

* [<span data-ttu-id="e72ad-992">Inicializace aplikace služby IIS 8.0</span><span class="sxs-lookup"><span data-stu-id="e72ad-992">IIS 8.0 Application Initialization</span></span>](/iis/get-started/whats-new-in-iis-8/iis-80-application-initialization)
* <span data-ttu-id="e72ad-993">[Aplikace Inicializace \<aplikaceInicializační>](/iis/configuration/system.webserver/applicationinitialization/).</span><span class="sxs-lookup"><span data-stu-id="e72ad-993">[Application Initialization \<applicationInitialization>](/iis/configuration/system.webserver/applicationinitialization/).</span></span>
* <span data-ttu-id="e72ad-994">[Zpracovat nastavení modelu \<pro proces fondu aplikacíModel>](/iis/configuration/system.applicationhost/applicationpools/add/processmodel).</span><span class="sxs-lookup"><span data-stu-id="e72ad-994">[Process Model Settings for an Application Pool \<processModel>](/iis/configuration/system.applicationhost/applicationpools/add/processmodel).</span></span>

## <a name="deployment-resources-for-iis-administrators"></a><span data-ttu-id="e72ad-995">Prostředky nasazení pro správce služby IIS</span><span class="sxs-lookup"><span data-stu-id="e72ad-995">Deployment resources for IIS administrators</span></span>

* [<span data-ttu-id="e72ad-996">Dokumentace iis</span><span class="sxs-lookup"><span data-stu-id="e72ad-996">IIS documentation</span></span>](/iis)
* [<span data-ttu-id="e72ad-997">Začínáme se Správcem služby IIS ve službách IIS</span><span class="sxs-lookup"><span data-stu-id="e72ad-997">Getting Started with the IIS Manager in IIS</span></span>](/iis/get-started/getting-started-with-iis/getting-started-with-the-iis-manager-in-iis-7-and-iis-8)
* [<span data-ttu-id="e72ad-998">Nasazení aplikace .NET Core</span><span class="sxs-lookup"><span data-stu-id="e72ad-998">.NET Core application deployment</span></span>](/dotnet/core/deploying/)
* <xref:host-and-deploy/aspnet-core-module>
* <xref:host-and-deploy/directory-structure>
* <xref:host-and-deploy/iis/modules>
* <xref:test/troubleshoot-azure-iis>
* <xref:host-and-deploy/azure-iis-errors-reference>

## <a name="additional-resources"></a><span data-ttu-id="e72ad-999">Další zdroje</span><span class="sxs-lookup"><span data-stu-id="e72ad-999">Additional resources</span></span>

* <xref:test/troubleshoot>
* <xref:index>
* [<span data-ttu-id="e72ad-1000">Oficiální web služby Microsoft IIS</span><span class="sxs-lookup"><span data-stu-id="e72ad-1000">The Official Microsoft IIS Site</span></span>](https://www.iis.net/)
* [<span data-ttu-id="e72ad-1001">Knihovna technického obsahu systému Windows Server</span><span class="sxs-lookup"><span data-stu-id="e72ad-1001">Windows Server technical content library</span></span>](/windows-server/windows-server)
* [<span data-ttu-id="e72ad-1002">HTTP/2 ve službě IIS</span><span class="sxs-lookup"><span data-stu-id="e72ad-1002">HTTP/2 on IIS</span></span>](/iis/get-started/whats-new-in-iis-10/http2-on-iis)
* <xref:host-and-deploy/iis/transform-webconfig>

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="e72ad-1003">Výukové prostředí o publikování aplikace ASP.NET Core na server <xref:tutorials/publish-to-iis>služby IIS naleznete v tématu .</span><span class="sxs-lookup"><span data-stu-id="e72ad-1003">For a tutorial experience on publishing an ASP.NET Core app to an IIS server, see <xref:tutorials/publish-to-iis>.</span></span>

[<span data-ttu-id="e72ad-1004">Instalace balíčku hostingu jádra .NET</span><span class="sxs-lookup"><span data-stu-id="e72ad-1004">Install the .NET Core Hosting Bundle</span></span>](#install-the-net-core-hosting-bundle)

## <a name="supported-operating-systems"></a><span data-ttu-id="e72ad-1005">Podporované operační systémy</span><span class="sxs-lookup"><span data-stu-id="e72ad-1005">Supported operating systems</span></span>

<span data-ttu-id="e72ad-1006">Podporovány jsou následující operační systémy:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1006">The following operating systems are supported:</span></span>

* <span data-ttu-id="e72ad-1007">Windows 7 nebo novější</span><span class="sxs-lookup"><span data-stu-id="e72ad-1007">Windows 7 or later</span></span>
* <span data-ttu-id="e72ad-1008">Windows Server 2008 R2 nebo novější</span><span class="sxs-lookup"><span data-stu-id="e72ad-1008">Windows Server 2008 R2 or later</span></span>

<span data-ttu-id="e72ad-1009">[Server HTTP.sys](xref:fundamentals/servers/httpsys) (dříve nazývaný WebListener) nefunguje v konfiguraci reverzního proxy serveru se službou IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1009">[HTTP.sys server](xref:fundamentals/servers/httpsys) (formerly called WebListener) doesn't work in a reverse proxy configuration with IIS.</span></span> <span data-ttu-id="e72ad-1010">Použijte [server Kestrel](xref:fundamentals/servers/kestrel).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1010">Use the [Kestrel server](xref:fundamentals/servers/kestrel).</span></span>

<span data-ttu-id="e72ad-1011">Informace o hostování v <xref:host-and-deploy/azure-apps/index>Azure najdete v tématu .</span><span class="sxs-lookup"><span data-stu-id="e72ad-1011">For information on hosting in Azure, see <xref:host-and-deploy/azure-apps/index>.</span></span>

<span data-ttu-id="e72ad-1012">Pokyny pro řešení <xref:test/troubleshoot>potíží naleznete v tématu .</span><span class="sxs-lookup"><span data-stu-id="e72ad-1012">For troubleshooting guidance, see <xref:test/troubleshoot>.</span></span>

## <a name="supported-platforms"></a><span data-ttu-id="e72ad-1013">Podporované platformy</span><span class="sxs-lookup"><span data-stu-id="e72ad-1013">Supported platforms</span></span>

<span data-ttu-id="e72ad-1014">Podporovány jsou aplikace publikované pro 32bitové (x86) nebo 64bitové (x64) nasazení.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1014">Apps published for 32-bit (x86) or 64-bit (x64) deployment are supported.</span></span> <span data-ttu-id="e72ad-1015">Nasazení 32bitové aplikace s 32bitovou sadou .NET Core SDK, pokud ji ne:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1015">Deploy a 32-bit app with a 32-bit (x86) .NET Core SDK unless the app:</span></span>

* <span data-ttu-id="e72ad-1016">Vyžaduje větší adresní prostor virtuální paměti, který je k dispozici pro 64bitovou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1016">Requires the larger virtual memory address space available to a 64-bit app.</span></span>
* <span data-ttu-id="e72ad-1017">Vyžaduje větší velikost zásobníku iis.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1017">Requires the larger IIS stack size.</span></span>
* <span data-ttu-id="e72ad-1018">Má 64bitové nativní závislosti.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1018">Has 64-bit native dependencies.</span></span>

<span data-ttu-id="e72ad-1019">K publikování 64bitové sady SDK jádra (x64) použijte 64bitovou sadu .NET Core SDK.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1019">Use a 64-bit (x64) .NET Core SDK to publish a 64-bit app.</span></span> <span data-ttu-id="e72ad-1020">V hostitelském systému musí být k dispozici 64bitový běhový čas.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1020">A 64-bit runtime must be present on the host system.</span></span>

<span data-ttu-id="e72ad-1021">ASP.NET Core je dodáván se [serverem Kestrel](xref:fundamentals/servers/kestrel), což je výchozí http server pro více platforem.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1021">ASP.NET Core ships with [Kestrel server](xref:fundamentals/servers/kestrel), a default, cross-platform HTTP server.</span></span>

<span data-ttu-id="e72ad-1022">Při použití [služby IIS](/iis/get-started/introduction-to-iis/introduction-to-iis-architecture) nebo [služby IIS Express](/iis/extensions/introduction-to-iis-express/iis-express-overview)je aplikace spuštěna v procesu odděleném od pracovního procesu služby IIS *(mimo proces)* se [serverem Kestrel](xref:fundamentals/servers/index#kestrel).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1022">When using [IIS](/iis/get-started/introduction-to-iis/introduction-to-iis-architecture) or [IIS Express](/iis/extensions/introduction-to-iis-express/iis-express-overview), the app runs in a process separate from the IIS worker process (*out-of-process*) with the [Kestrel server](xref:fundamentals/servers/index#kestrel).</span></span>

<span data-ttu-id="e72ad-1023">Vzhledem k tomu, ASP.NET základní aplikace spustit v procesu odděleném od pracovního procesu služby IIS, modul zpracovává správu procesů.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1023">Because ASP.NET Core apps run in a process separate from the IIS worker process, the module handles process management.</span></span> <span data-ttu-id="e72ad-1024">Modul spustí proces pro aplikaci ASP.NET Core při příchodu prvního požadavku a restartuje aplikaci, pokud se vypne nebo dojde k chybě.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1024">The module starts the process for the ASP.NET Core app when the first request arrives and restarts the app if it shuts down or crashes.</span></span> <span data-ttu-id="e72ad-1025">Toto je v podstatě stejné chování jako u aplikací, které běží v procesu, které jsou spravovány [službou aktivace procesu systému Windows (WAS)](/iis/manage/provisioning-and-managing-iis/features-of-the-windows-process-activation-service-was).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1025">This is essentially the same behavior as seen with apps that run in-process that are managed by the [Windows Process Activation Service (WAS)](/iis/manage/provisioning-and-managing-iis/features-of-the-windows-process-activation-service-was).</span></span>

<span data-ttu-id="e72ad-1026">Následující diagram znázorňuje vztah mezi iis, ASP.NET základní modul a aplikace hostované mimo proces:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1026">The following diagram illustrates the relationship between IIS, the ASP.NET Core Module, and an app hosted out-of-process:</span></span>

![Modul ASP.NET Core](index/_static/ancm-outofprocess.png)

<span data-ttu-id="e72ad-1028">Požadavky dorazí z webu do ovladače HTTP.sys v režimu jádra.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1028">Requests arrive from the web to the kernel-mode HTTP.sys driver.</span></span> <span data-ttu-id="e72ad-1029">Řidič směruje požadavky do služby IIS na nakonfigurovaném portu webu, obvykle 80 (HTTP) nebo 443 (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1029">The driver routes the requests to IIS on the website's configured port, usually 80 (HTTP) or 443 (HTTPS).</span></span> <span data-ttu-id="e72ad-1030">Modul předá požadavky Kestrel na náhodný port pro aplikaci, která není port 80 nebo 443.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1030">The module forwards the requests to Kestrel on a random port for the app, which isn't port 80 or 443.</span></span>

<span data-ttu-id="e72ad-1031">Modul určuje port prostřednictvím proměnné prostředí při spuštění a [middleware integrace služby IIS](xref:host-and-deploy/iis/index#enable-the-iisintegration-components) nakonfiguruje server tak, aby naslouchal . `http://localhost:{port}`</span><span class="sxs-lookup"><span data-stu-id="e72ad-1031">The module specifies the port via an environment variable at startup, and the [IIS Integration Middleware](xref:host-and-deploy/iis/index#enable-the-iisintegration-components) configures the server to listen on `http://localhost:{port}`.</span></span> <span data-ttu-id="e72ad-1032">Jsou prováděny další kontroly a požadavky, které nepocházejí z modulu, jsou odmítnuty.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1032">Additional checks are performed, and requests that don't originate from the module are rejected.</span></span> <span data-ttu-id="e72ad-1033">Modul nepodporuje předávání https, takže požadavky jsou předávány přes HTTP i v případě, že přijaté službou IIS přes protokol HTTPS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1033">The module doesn't support HTTPS forwarding, so requests are forwarded over HTTP even if received by IIS over HTTPS.</span></span>

<span data-ttu-id="e72ad-1034">Poté, co Kestrel vyzvedne požadavek z modulu, je požadavek posunut do kanálu ASP.NET middleware.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1034">After Kestrel picks up the request from the module, the request is pushed into the ASP.NET Core middleware pipeline.</span></span> <span data-ttu-id="e72ad-1035">Middleware kanálu zpracovává požadavek a předá `HttpContext` jej jako instanci logiky aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1035">The middleware pipeline handles the request and passes it on as an `HttpContext` instance to the app's logic.</span></span> <span data-ttu-id="e72ad-1036">Middleware přidané integrací služby IIS aktualizuje schéma, vzdálenou IP adresu a pathbase tak, aby odpovídaly předání požadavku ke společnosti Kestrel.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1036">Middleware added by IIS Integration updates the scheme, remote IP, and pathbase to account for forwarding the request to Kestrel.</span></span> <span data-ttu-id="e72ad-1037">Odpověď aplikace je předána zpět do služby IIS, která ji odešle zpět do klienta HTTP, který inicioval požadavek.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1037">The app's response is passed back to IIS, which pushes it back out to the HTTP client that initiated the request.</span></span>

<span data-ttu-id="e72ad-1038">`CreateDefaultBuilder`Konfiguruje server [Kestrel](xref:fundamentals/servers/kestrel) jako webový server a umožňuje integraci služby IIS konfigurací základní cesty a portu pro [základní modul ASP.NET .](xref:host-and-deploy/aspnet-core-module)</span><span class="sxs-lookup"><span data-stu-id="e72ad-1038">`CreateDefaultBuilder` configures [Kestrel](xref:fundamentals/servers/kestrel) server as the web server and enables IIS Integration by configuring the base path and port for the [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module).</span></span>

<span data-ttu-id="e72ad-1039">Základní modul ASP.NET generuje dynamický port, který má být přiřazen k procesu back-endu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1039">The ASP.NET Core Module generates a dynamic port to assign to the backend process.</span></span> <span data-ttu-id="e72ad-1040">`CreateDefaultBuilder`volá <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderIISExtensions.UseIISIntegration*> metodu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1040">`CreateDefaultBuilder` calls the <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderIISExtensions.UseIISIntegration*> method.</span></span> <span data-ttu-id="e72ad-1041">`UseIISIntegration`konfiguruje Kestrel poslouchat na dynamickém portu na localhost IP adresu (`127.0.0.1`).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1041">`UseIISIntegration` configures Kestrel to listen on the dynamic port at the localhost IP address (`127.0.0.1`).</span></span> <span data-ttu-id="e72ad-1042">Pokud je dynamický port 1234, Kestrel naslouchá na `127.0.0.1:1234`.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1042">If the dynamic port is 1234, Kestrel listens at `127.0.0.1:1234`.</span></span> <span data-ttu-id="e72ad-1043">Tato konfigurace nahrazuje další konfigurace adres URL poskytované:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1043">This configuration replaces other URL configurations provided by:</span></span>

* `UseUrls`
* [<span data-ttu-id="e72ad-1044">Kestrel je Poslouchat API</span><span class="sxs-lookup"><span data-stu-id="e72ad-1044">Kestrel's Listen API</span></span>](xref:fundamentals/servers/kestrel#endpoint-configuration)
* <span data-ttu-id="e72ad-1045">[Konfigurace](xref:fundamentals/configuration/index) (nebo [možnost --urls příkazového řádku)](xref:fundamentals/host/web-host#override-configuration)</span><span class="sxs-lookup"><span data-stu-id="e72ad-1045">[Configuration](xref:fundamentals/configuration/index) (or [command-line --urls option](xref:fundamentals/host/web-host#override-configuration))</span></span>

<span data-ttu-id="e72ad-1046">Volání `UseUrls` nebo Kestrel `Listen` api nejsou vyžadovány při použití modulu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1046">Calls to `UseUrls` or Kestrel's `Listen` API aren't required when using the module.</span></span> <span data-ttu-id="e72ad-1047">Pokud `UseUrls` `Listen` nebo je volána, Kestrel naslouchá na portu určeném pouze při spuštění aplikace bez iis.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1047">If `UseUrls` or `Listen` is called, Kestrel listens on the port specified only when running the app without IIS.</span></span>

<span data-ttu-id="e72ad-1048">Pokyny ke konfiguraci ASP.NET <xref:host-and-deploy/aspnet-core-module>core modulem naleznete v tématu .</span><span class="sxs-lookup"><span data-stu-id="e72ad-1048">For ASP.NET Core Module configuration guidance, see <xref:host-and-deploy/aspnet-core-module>.</span></span>

<span data-ttu-id="e72ad-1049">Další informace o hostování najdete [v tématu Host in ASP.NET Core](xref:fundamentals/index#host).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1049">For more information on hosting, see [Host in ASP.NET Core](xref:fundamentals/index#host).</span></span>

## <a name="application-configuration"></a><span data-ttu-id="e72ad-1050">Konfigurace aplikací</span><span class="sxs-lookup"><span data-stu-id="e72ad-1050">Application configuration</span></span>

### <a name="enable-the-iisintegration-components"></a><span data-ttu-id="e72ad-1051">Povolení součástí Integrace iIS</span><span class="sxs-lookup"><span data-stu-id="e72ad-1051">Enable the IISIntegration components</span></span>

<span data-ttu-id="e72ad-1052">Při vytváření hostitele `CreateWebHostBuilder` v *(Program.cs*) volání <xref:Microsoft.AspNetCore.WebHost.CreateDefaultBuilder*> umožňující integraci iis:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1052">When building a host in `CreateWebHostBuilder` (*Program.cs*), call <xref:Microsoft.AspNetCore.WebHost.CreateDefaultBuilder*> to enable IIS integration:</span></span>

```csharp
public static IWebHostBuilder CreateWebHostBuilder(string[] args) =>
    WebHost.CreateDefaultBuilder(args)
        ...
```

<span data-ttu-id="e72ad-1053">Další informace `CreateDefaultBuilder`naleznete <xref:fundamentals/host/web-host#set-up-a-host>v tématu .</span><span class="sxs-lookup"><span data-stu-id="e72ad-1053">For more information on `CreateDefaultBuilder`, see <xref:fundamentals/host/web-host#set-up-a-host>.</span></span>

### <a name="iis-options"></a><span data-ttu-id="e72ad-1054">Možnosti iis</span><span class="sxs-lookup"><span data-stu-id="e72ad-1054">IIS options</span></span>

| <span data-ttu-id="e72ad-1055">Možnost</span><span class="sxs-lookup"><span data-stu-id="e72ad-1055">Option</span></span>                         | <span data-ttu-id="e72ad-1056">Výchozí</span><span class="sxs-lookup"><span data-stu-id="e72ad-1056">Default</span></span> | <span data-ttu-id="e72ad-1057">Nastavení</span><span class="sxs-lookup"><span data-stu-id="e72ad-1057">Setting</span></span> |
| ------------------------------ | :-----: | ------- |
| `AutomaticAuthentication`      | `true`  | <span data-ttu-id="e72ad-1058">Pokud `true`server IIS `HttpContext.User` nastaví ověřené ověřování [systému Windows](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1058">If `true`, IIS Server sets the `HttpContext.User` authenticated by [Windows Authentication](xref:security/authentication/windowsauth).</span></span> <span data-ttu-id="e72ad-1059">Pokud `false`server poskytuje identitu pouze `HttpContext.User` pro výzvy a reaguje na `AuthenticationScheme`ně, pokud o to výslovně požádá .</span><span class="sxs-lookup"><span data-stu-id="e72ad-1059">If `false`, the server only provides an identity for `HttpContext.User` and responds to challenges when explicitly requested by the `AuthenticationScheme`.</span></span> <span data-ttu-id="e72ad-1060">Aby bylo možné službu `AutomaticAuthentication` IIS fungovat, musí být ve službě IIS povoleno ověřování systému Windows.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1060">Windows Authentication must be enabled in IIS for `AutomaticAuthentication` to function.</span></span> <span data-ttu-id="e72ad-1061">Další informace naleznete v tématu [Ověřování systému Windows](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1061">For more information, see [Windows Authentication](xref:security/authentication/windowsauth).</span></span> |
| `AuthenticationDisplayName`    | `null`  | <span data-ttu-id="e72ad-1062">Nastaví zobrazované jméno zobrazené uživatelům na přihlašovacích stránkách.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1062">Sets the display name shown to users on login pages.</span></span> |

<span data-ttu-id="e72ad-1063">Chcete-li konfigurovat možnosti služby <xref:Microsoft.AspNetCore.Builder.IISOptions> <xref:Microsoft.AspNetCore.Hosting.IStartup.ConfigureServices*>IIS, zahrňte konfiguraci služby v aplikaci .</span><span class="sxs-lookup"><span data-stu-id="e72ad-1063">To configure IIS options, include a service configuration for <xref:Microsoft.AspNetCore.Builder.IISOptions> in <xref:Microsoft.AspNetCore.Hosting.IStartup.ConfigureServices*>.</span></span> <span data-ttu-id="e72ad-1064">Následující příklad zabrání aplikaci v naplnění `HttpContext.Connection.ClientCertificate`:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1064">The following example prevents the app from populating `HttpContext.Connection.ClientCertificate`:</span></span>

```csharp
services.Configure<IISOptions>(options => 
{
    options.ForwardClientCertificate = false;
});
```

| <span data-ttu-id="e72ad-1065">Možnost</span><span class="sxs-lookup"><span data-stu-id="e72ad-1065">Option</span></span>                         | <span data-ttu-id="e72ad-1066">Výchozí</span><span class="sxs-lookup"><span data-stu-id="e72ad-1066">Default</span></span> | <span data-ttu-id="e72ad-1067">Nastavení</span><span class="sxs-lookup"><span data-stu-id="e72ad-1067">Setting</span></span> |
| ------------------------------ | :-----: | ------- |
| `AutomaticAuthentication`      | `true`  | <span data-ttu-id="e72ad-1068">Pokud `true` [middleware integrace služby IIS](#enable-the-iisintegration-components) nastaví ověřené ověřování systému `HttpContext.User` [Windows](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1068">If `true`, [IIS Integration Middleware](#enable-the-iisintegration-components) sets the `HttpContext.User` authenticated by [Windows Authentication](xref:security/authentication/windowsauth).</span></span> <span data-ttu-id="e72ad-1069">Pokud `false`middleware poskytuje identitu `HttpContext.User` a reaguje na problémy pouze na `AuthenticationScheme`žádost .</span><span class="sxs-lookup"><span data-stu-id="e72ad-1069">If `false`, the middleware only provides an identity for `HttpContext.User` and responds to challenges when explicitly requested by the `AuthenticationScheme`.</span></span> <span data-ttu-id="e72ad-1070">Aby bylo možné službu `AutomaticAuthentication` IIS fungovat, musí být ve službě IIS povoleno ověřování systému Windows.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1070">Windows Authentication must be enabled in IIS for `AutomaticAuthentication` to function.</span></span> <span data-ttu-id="e72ad-1071">Další informace naleznete v tématu [Ověřování systému Windows.](xref:security/authentication/windowsauth)</span><span class="sxs-lookup"><span data-stu-id="e72ad-1071">For more information, see the [Windows Authentication](xref:security/authentication/windowsauth) topic.</span></span> |
| `AuthenticationDisplayName`    | `null`  | <span data-ttu-id="e72ad-1072">Nastaví zobrazované jméno zobrazené uživatelům na přihlašovacích stránkách.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1072">Sets the display name shown to users on login pages.</span></span> |
| `ForwardClientCertificate`     | `true`  | <span data-ttu-id="e72ad-1073">Pokud `true` a `MS-ASPNETCORE-CLIENTCERT` hlavička požadavku `HttpContext.Connection.ClientCertificate` je k dispozici, je naplněn.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1073">If `true` and the `MS-ASPNETCORE-CLIENTCERT` request header is present, the `HttpContext.Connection.ClientCertificate` is populated.</span></span> |

### <a name="proxy-server-and-load-balancer-scenarios"></a><span data-ttu-id="e72ad-1074">Scénáře proxy serveru a vyrovnávání zatížení</span><span class="sxs-lookup"><span data-stu-id="e72ad-1074">Proxy server and load balancer scenarios</span></span>

<span data-ttu-id="e72ad-1075">[Middleware integrace služby IIS](#enable-the-iisintegration-components), který konfiguruje middleware předávaných záhlaví a ASP.NET základní modul, jsou nakonfigurovány tak, aby předávaly schéma (HTTP/HTTPS) a vzdálenou adresu IP, ze které požadavek pochází.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1075">The [IIS Integration Middleware](#enable-the-iisintegration-components), which configures Forwarded Headers Middleware, and the ASP.NET Core Module are configured to forward the scheme (HTTP/HTTPS) and the remote IP address where the request originated.</span></span> <span data-ttu-id="e72ad-1076">Další konfigurace může být vyžadována pro aplikace hostované za dalšími proxy servery a nástroji pro vyrovnávání zatížení.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1076">Additional configuration might be required for apps hosted behind additional proxy servers and load balancers.</span></span> <span data-ttu-id="e72ad-1077">Další informace naleznete v [tématu Configure ASP.NET Core to work with proxy servers and load balancers](xref:host-and-deploy/proxy-load-balancer).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1077">For more information, see [Configure ASP.NET Core to work with proxy servers and load balancers](xref:host-and-deploy/proxy-load-balancer).</span></span>

### <a name="webconfig-file"></a><span data-ttu-id="e72ad-1078">soubor web.config</span><span class="sxs-lookup"><span data-stu-id="e72ad-1078">web.config file</span></span>

<span data-ttu-id="e72ad-1079">Soubor *web.config* konfiguruje [základní modul ASP.NET](xref:host-and-deploy/aspnet-core-module).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1079">The *web.config* file configures the [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module).</span></span> <span data-ttu-id="e72ad-1080">Při publikování projektu je vytváření, transformace a publikování souboru *web.config* zpracováno cílem MSBuild (`_TransformWebConfig`).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1080">Creating, transforming, and publishing the *web.config* file is handled by an MSBuild target (`_TransformWebConfig`) when the project is published.</span></span> <span data-ttu-id="e72ad-1081">Tento cíl je k dispozici v`Microsoft.NET.Sdk.Web`cílech sady Web SDK ( ).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1081">This target is present in the Web SDK targets (`Microsoft.NET.Sdk.Web`).</span></span> <span data-ttu-id="e72ad-1082">Sada SDK je nastavena v horní části souboru projektu:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1082">The SDK is set at the top of the project file:</span></span>

```xml
<Project Sdk="Microsoft.NET.Sdk.Web">
```

<span data-ttu-id="e72ad-1083">Pokud soubor *web.config* není v projektu přítomen, je soubor vytvořen se správnou *processPath* a *argumenty* pro konfiguraci ASP.NET základnímodul a přesunutna do [publikovaného výstupu](xref:host-and-deploy/directory-structure).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1083">If a *web.config* file isn't present in the project, the file is created with the correct *processPath* and *arguments* to configure the ASP.NET Core Module and moved to [published output](xref:host-and-deploy/directory-structure).</span></span>

<span data-ttu-id="e72ad-1084">Pokud *web.config* soubor je přítomen v projektu, soubor je transformován se správným *processPath* a *argumenty* pro konfiguraci ASP.NET core modul a přesunuta do publikovaného výstupu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1084">If a *web.config* file is present in the project, the file is transformed with the correct *processPath* and *arguments* to configure the ASP.NET Core Module and moved to published output.</span></span> <span data-ttu-id="e72ad-1085">Transformace nezmění nastavení konfigurace služby IIS v souboru.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1085">The transformation doesn't modify IIS configuration settings in the file.</span></span>

<span data-ttu-id="e72ad-1086">Soubor *web.config* může poskytovat další nastavení konfigurace služby IIS, která řídí aktivní moduly služby IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1086">The *web.config* file may provide additional IIS configuration settings that control active IIS modules.</span></span> <span data-ttu-id="e72ad-1087">Informace o modulech služby IIS, které jsou schopné zpracovávat požadavky pomocí aplikací ASP.NET Core, naleznete v tématu [modulů služby IIS.](xref:host-and-deploy/iis/modules)</span><span class="sxs-lookup"><span data-stu-id="e72ad-1087">For information on IIS modules that are capable of processing requests with ASP.NET Core apps, see the [IIS modules](xref:host-and-deploy/iis/modules) topic.</span></span>

<span data-ttu-id="e72ad-1088">Chcete-li zabránit webové sady SDK v transformaci souboru *web.config,* použijte vlastnost \*\* \<IsTransformWebConfigDisabled>\*\* v souboru projektu:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1088">To prevent the Web SDK from transforming the *web.config* file, use the **\<IsTransformWebConfigDisabled>** property in the project file:</span></span>

```xml
<PropertyGroup>
  <IsTransformWebConfigDisabled>true</IsTransformWebConfigDisabled>
</PropertyGroup>
```

<span data-ttu-id="e72ad-1089">Při zakázání webové sady SDK z transformace souboru *processPath* a argumenty by měly být ručně *nastaveny* vývojářem.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1089">When disabling the Web SDK from transforming the file, the *processPath* and *arguments* should be manually set by the developer.</span></span> <span data-ttu-id="e72ad-1090">Další informace naleznete v tématu <xref:host-and-deploy/aspnet-core-module>.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1090">For more information, see <xref:host-and-deploy/aspnet-core-module>.</span></span>

### <a name="webconfig-file-location"></a><span data-ttu-id="e72ad-1091">umístění souboru web.config</span><span class="sxs-lookup"><span data-stu-id="e72ad-1091">web.config file location</span></span>

<span data-ttu-id="e72ad-1092">Aby bylo možné správně nastavit [ASP.NET core modul,](xref:host-and-deploy/aspnet-core-module) musí být soubor *web.config* přítomen na [cestě kořenového obsahu](xref:fundamentals/index#content-root) (obvykle základní cesta aplikace) nasazené aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1092">In order to set up the [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module) correctly, the *web.config* file must be present at the [content root](xref:fundamentals/index#content-root) path (typically the app base path) of the deployed app.</span></span> <span data-ttu-id="e72ad-1093">Jedná se o stejné umístění jako fyzická cesta k webu poskytnutá službu IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1093">This is the same location as the website physical path provided to IIS.</span></span> <span data-ttu-id="e72ad-1094">Soubor *web.config* je vyžadován v kořenovém adresáři aplikace, aby bylo možné publikovat více aplikací pomocí nasazení webu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1094">The *web.config* file is required at the root of the app to enable the publishing of multiple apps using Web Deploy.</span></span>

<span data-ttu-id="e72ad-1095">Na fyzické cestě aplikace existují citlivé soubory, například \* \<assembly>.runtimeconfig.json*, \* \<assembly>.xml* (komentáře xml documentation) a \* \<assembly>.deps.json\*.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1095">Sensitive files exist on the app's physical path, such as *\<assembly>.runtimeconfig.json*, *\<assembly>.xml* (XML Documentation comments), and *\<assembly>.deps.json*.</span></span> <span data-ttu-id="e72ad-1096">Pokud je soubor *web.config* přítomen a web se spustí normálně, služby IIS tyto citlivé soubory neobsluhuje, pokud jsou požadovány.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1096">When the *web.config* file is present and the site starts normally, IIS doesn't serve these sensitive files if they're requested.</span></span> <span data-ttu-id="e72ad-1097">Pokud soubor *web.config* chybí, je nesprávně pojmenován nebo jej nelze nakonfigurovat pro normální spuštění, může služba IIS veřejně sloužit citlivým souborům.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1097">If the *web.config* file is missing, incorrectly named, or unable to configure the site for normal startup, IIS may serve sensitive files publicly.</span></span>

<span data-ttu-id="e72ad-1098">**Soubor *web.config* musí být v nasazení vždy přítomen, správně pojmenovaný a musí být schopen nakonfigurovat web pro normální spuštění. Nikdy neodstraňujte soubor *web.config* z produkčního nasazení.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1098">**The *web.config* file must be present in the deployment at all times, correctly named, and able to configure the site for normal start up. Never remove the *web.config* file from a production deployment.**</span></span>

### <a name="transform-webconfig"></a><span data-ttu-id="e72ad-1099">Transformace souboru web.config</span><span class="sxs-lookup"><span data-stu-id="e72ad-1099">Transform web.config</span></span>

<span data-ttu-id="e72ad-1100">Pokud potřebujete transformovat *web.config* při publikování (například nastavit proměnné prostředí na základě konfigurace, profilu nebo prostředí), přečtěte si viz <xref:host-and-deploy/iis/transform-webconfig>.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1100">If you need to transform *web.config* on publish (for example, set environment variables based on the configuration, profile, or environment), see <xref:host-and-deploy/iis/transform-webconfig>.</span></span>

## <a name="iis-configuration"></a><span data-ttu-id="e72ad-1101">Konfigurace služby IIS</span><span class="sxs-lookup"><span data-stu-id="e72ad-1101">IIS configuration</span></span>

<span data-ttu-id="e72ad-1102">**Operační systémy Windows Server**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1102">**Windows Server operating systems**</span></span>

<span data-ttu-id="e72ad-1103">Povolte roli serveru **webového serveru (IIS)** a vytvořte služby rolí.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1103">Enable the **Web Server (IIS)** server role and establish role services.</span></span>

1. <span data-ttu-id="e72ad-1104">Použijte Průvodce **přidáním rolí a funkcí** z nabídky **Spravovat** nebo odkaz ve **Správci serveru**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1104">Use the **Add Roles and Features** wizard from the **Manage** menu or the link in **Server Manager**.</span></span> <span data-ttu-id="e72ad-1105">V kroku **Role serveru** zaškrtněte políčko **U webového serveru (IIS).**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1105">On the **Server Roles** step, check the box for **Web Server (IIS)**.</span></span>

   ![Role služby IIS webového serveru je vybrána v kroku Vybrat role serveru.](index/_static/server-roles-ws2016.png)

1. <span data-ttu-id="e72ad-1107">Po kroku **Funkce** se krok **služby role** načte pro webový server (IIS).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1107">After the **Features** step, the **Role services** step loads for Web Server (IIS).</span></span> <span data-ttu-id="e72ad-1108">Vyberte požadované služby rolí služby IIS nebo přijměte výchozí služby rolí, které jsou k dispozici.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1108">Select the IIS role services desired or accept the default role services provided.</span></span>

   ![Výchozí služby rolí jsou vybrány v kroku Vybrat služby rolí.](index/_static/role-services-ws2016.png)

   <span data-ttu-id="e72ad-1110">**Ověřování systému Windows (volitelné)**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1110">**Windows Authentication (Optional)**</span></span>  
   <span data-ttu-id="e72ad-1111">Chcete-li povolit ověřování systému Windows, rozbalte následující uzly:**Zabezpečení** **webového serveru** > .</span><span class="sxs-lookup"><span data-stu-id="e72ad-1111">To enable Windows Authentication, expand the following nodes: **Web Server** > **Security**.</span></span> <span data-ttu-id="e72ad-1112">Vyberte funkci **Ověřování systému Windows.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1112">Select the **Windows Authentication** feature.</span></span> <span data-ttu-id="e72ad-1113">Další informace naleznete v [tématech Ověřování \<systému Windows windowsAuthentication>](/iis/configuration/system.webServer/security/authentication/windowsAuthentication/) a Konfigurace ověřování [systému Windows](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1113">For more information, see [Windows Authentication \<windowsAuthentication>](/iis/configuration/system.webServer/security/authentication/windowsAuthentication/) and [Configure Windows authentication](xref:security/authentication/windowsauth).</span></span>

   <span data-ttu-id="e72ad-1114">**WebSockets (volitelné)**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1114">**WebSockets (Optional)**</span></span>  
   <span data-ttu-id="e72ad-1115">WebSockets je podporován ASP.NET jádrem 1.1 nebo novějším.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1115">WebSockets is supported with ASP.NET Core 1.1 or later.</span></span> <span data-ttu-id="e72ad-1116">Chcete-li povolit rozhraní WebSockets, rozbalte následující uzly:**Vývoj aplikací webového** **serveru** > .</span><span class="sxs-lookup"><span data-stu-id="e72ad-1116">To enable WebSockets, expand the following nodes: **Web Server** > **Application Development**.</span></span> <span data-ttu-id="e72ad-1117">Vyberte funkci **WebSocket Protocol.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1117">Select the **WebSocket Protocol** feature.</span></span> <span data-ttu-id="e72ad-1118">Další informace naleznete v tématu [WebSockets](xref:fundamentals/websockets).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1118">For more information, see [WebSockets](xref:fundamentals/websockets).</span></span>

1. <span data-ttu-id="e72ad-1119">Pokračujte v **potvrzovacím** kroku a nainstalujte roli a služby webového serveru.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1119">Proceed through the **Confirmation** step to install the web server role and services.</span></span> <span data-ttu-id="e72ad-1120">Po instalaci role **webového serveru (IIS)** není restartování serveru nebo služby IIS vyžadováno.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1120">A server/IIS restart isn't required after installing the **Web Server (IIS)** role.</span></span>

<span data-ttu-id="e72ad-1121">**Desktopové operační systémy Windows**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1121">**Windows desktop operating systems**</span></span>

<span data-ttu-id="e72ad-1122">Povolte **konzolu pro správu služby IIS** a **služby World Wide Web Services**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1122">Enable the **IIS Management Console** and **World Wide Web Services**.</span></span>

1. <span data-ttu-id="e72ad-1123">Přejděte na **Ovládací panely** > **Programy** > **a funkce** > **Zapněte nebo vypněte funkce systému Windows** (levá strana obrazovky).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1123">Navigate to **Control Panel** > **Programs** > **Programs and Features** > **Turn Windows features on or off** (left side of the screen).</span></span>

1. <span data-ttu-id="e72ad-1124">Otevřete uzel **Internetové informační služby.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1124">Open the **Internet Information Services** node.</span></span> <span data-ttu-id="e72ad-1125">Otevřete uzel **Nástroje pro správu webu.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1125">Open the **Web Management Tools** node.</span></span>

1. <span data-ttu-id="e72ad-1126">Zaškrtněte políčko **U konzole pro správu služby IIS**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1126">Check the box for **IIS Management Console**.</span></span>

1. <span data-ttu-id="e72ad-1127">Zaškrtněte políčko **U služeb World Wide Web Services**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1127">Check the box for **World Wide Web Services**.</span></span>

1. <span data-ttu-id="e72ad-1128">Přijměte výchozí funkce **pro služby World Wide Web Services** nebo upravte funkce služby IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1128">Accept the default features for **World Wide Web Services** or customize the IIS features.</span></span>

   <span data-ttu-id="e72ad-1129">**Ověřování systému Windows (volitelné)**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1129">**Windows Authentication (Optional)**</span></span>  
   <span data-ttu-id="e72ad-1130">Chcete-li povolit ověřování systému Windows, rozbalte následující uzly: **World Wide Web Services** > **Security**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1130">To enable Windows Authentication, expand the following nodes: **World Wide Web Services** > **Security**.</span></span> <span data-ttu-id="e72ad-1131">Vyberte funkci **Ověřování systému Windows.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1131">Select the **Windows Authentication** feature.</span></span> <span data-ttu-id="e72ad-1132">Další informace naleznete v [tématech Ověřování \<systému Windows windowsAuthentication>](/iis/configuration/system.webServer/security/authentication/windowsAuthentication/) a Konfigurace ověřování [systému Windows](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1132">For more information, see [Windows Authentication \<windowsAuthentication>](/iis/configuration/system.webServer/security/authentication/windowsAuthentication/) and [Configure Windows authentication](xref:security/authentication/windowsauth).</span></span>

   <span data-ttu-id="e72ad-1133">**WebSockets (volitelné)**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1133">**WebSockets (Optional)**</span></span>  
   <span data-ttu-id="e72ad-1134">WebSockets je podporován ASP.NET jádrem 1.1 nebo novějším.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1134">WebSockets is supported with ASP.NET Core 1.1 or later.</span></span> <span data-ttu-id="e72ad-1135">Chcete-li povolit rozhraní WebSockets, rozbalte následující uzly: Funkce**vývoje aplikací**pro **webové služby** > .</span><span class="sxs-lookup"><span data-stu-id="e72ad-1135">To enable WebSockets, expand the following nodes: **World Wide Web Services** > **Application Development Features**.</span></span> <span data-ttu-id="e72ad-1136">Vyberte funkci **WebSocket Protocol.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1136">Select the **WebSocket Protocol** feature.</span></span> <span data-ttu-id="e72ad-1137">Další informace naleznete v tématu [WebSockets](xref:fundamentals/websockets).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1137">For more information, see [WebSockets](xref:fundamentals/websockets).</span></span>

1. <span data-ttu-id="e72ad-1138">Pokud instalace služby IIS vyžaduje restartování, restartujte systém.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1138">If the IIS installation requires a restart, restart the system.</span></span>

![V funkcích systému Windows jsou vybrány konzoly IIS Management Console a služby World Wide Web Services.](index/_static/windows-features-win10.png)

## <a name="install-the-net-core-hosting-bundle"></a><span data-ttu-id="e72ad-1140">Instalace balíčku hostingu jádra .NET</span><span class="sxs-lookup"><span data-stu-id="e72ad-1140">Install the .NET Core Hosting Bundle</span></span>

<span data-ttu-id="e72ad-1141">Nainstalujte *balíček .NET Core Hosting do* hostitelského systému.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1141">Install the *.NET Core Hosting Bundle* on the hosting system.</span></span> <span data-ttu-id="e72ad-1142">Balíček nainstaluje modul .NET Core Runtime, knihovnu .NET Core Library a [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1142">The bundle installs the .NET Core Runtime, .NET Core Library, and the [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module).</span></span> <span data-ttu-id="e72ad-1143">Modul umožňuje ASP.NET aplikace Core běžet za službou IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1143">The module allows ASP.NET Core apps to run behind IIS.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="e72ad-1144">Pokud je sada Hosting Bundle nainstalována před službou IIS, musí být instalace balíčku opravena.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1144">If the Hosting Bundle is installed before IIS, the bundle installation must be repaired.</span></span> <span data-ttu-id="e72ad-1145">Po instalaci služby IIS znovu spusťte instalační program sady Hosting Bundle.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1145">Run the Hosting Bundle installer again after installing IIS.</span></span>
>
> <span data-ttu-id="e72ad-1146">Pokud je sada Hosting Bundle nainstalována po instalaci 64bitové (x64) verze rozhraní .NET Core, mohou se zdát, že sady SDK chybí ([byly zjištěny sady SDK .Net Core .](xref:test/troubleshoot#no-net-core-sdks-were-detected)</span><span class="sxs-lookup"><span data-stu-id="e72ad-1146">If the Hosting Bundle is installed after installing the 64-bit (x64) version of .NET Core, SDKs might appear to be missing ([No .NET Core SDKs were detected](xref:test/troubleshoot#no-net-core-sdks-were-detected)).</span></span> <span data-ttu-id="e72ad-1147">Chcete-li problém <xref:test/troubleshoot#missing-sdk-after-installing-the-net-core-hosting-bundle>vyřešit, naleznete v tématu .</span><span class="sxs-lookup"><span data-stu-id="e72ad-1147">To resolve the problem, see <xref:test/troubleshoot#missing-sdk-after-installing-the-net-core-hosting-bundle>.</span></span>

### <a name="direct-download-current-version"></a><span data-ttu-id="e72ad-1148">Přímé stahování (aktuální verze)</span><span class="sxs-lookup"><span data-stu-id="e72ad-1148">Direct download (current version)</span></span>

<span data-ttu-id="e72ad-1149">Stáhněte si instalační program pomocí následujícího odkazu:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1149">Download the installer using the following link:</span></span>

[<span data-ttu-id="e72ad-1150">Aktuální instalační program .NET Core Hosting Bundle (přímé stahování)</span><span class="sxs-lookup"><span data-stu-id="e72ad-1150">Current .NET Core Hosting Bundle installer (direct download)</span></span>](https://dotnet.microsoft.com/permalink/dotnetcore-current-windows-runtime-bundle-installer)

### <a name="earlier-versions-of-the-installer"></a><span data-ttu-id="e72ad-1151">Dřívější verze instalačního programu</span><span class="sxs-lookup"><span data-stu-id="e72ad-1151">Earlier versions of the installer</span></span>

<span data-ttu-id="e72ad-1152">Chcete-li získat starší verzi instalačního programu:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1152">To obtain an earlier version of the installer:</span></span>

1. <span data-ttu-id="e72ad-1153">Přejděte na stránku [Stáhnout jádro rozhraní .NET.](https://dotnet.microsoft.com/download/dotnet-core)</span><span class="sxs-lookup"><span data-stu-id="e72ad-1153">Navigate to the [Download .NET Core](https://dotnet.microsoft.com/download/dotnet-core) page.</span></span>
1. <span data-ttu-id="e72ad-1154">Klikněte na požadovanou verzi .NET Core.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1154">Click on the desired .NET Core version.</span></span>
1. <span data-ttu-id="e72ad-1155">Ve sloupci **Spustit aplikace – runtime** najděte požadovaný řádek požadované verze runtime .NET Core.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1155">In the **Run apps - Runtime** column, find the row of the .NET Core runtime version desired.</span></span>
1. <span data-ttu-id="e72ad-1156">Stáhněte si instalační program pomocí odkazu **Runtime & Hosting Bundle.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1156">Download the installer using the **Runtime & Hosting Bundle** link.</span></span>

> [!WARNING]
> <span data-ttu-id="e72ad-1157">Některé instalační programy obsahují verze, které dosáhly konce životnosti (EOL) a které již nejsou podporovány společností Microsoft.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1157">Some installers contain release versions that have reached their end of life (EOL) and are no longer supported by Microsoft.</span></span> <span data-ttu-id="e72ad-1158">Další informace naleznete v [zásadách podpory](https://dotnet.microsoft.com/platform/support/policy/dotnet-core).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1158">For more information, see the [support policy](https://dotnet.microsoft.com/platform/support/policy/dotnet-core).</span></span>

### <a name="install-the-hosting-bundle"></a><span data-ttu-id="e72ad-1159">Nainstalujte balíček hostingu</span><span class="sxs-lookup"><span data-stu-id="e72ad-1159">Install the Hosting Bundle</span></span>

1. <span data-ttu-id="e72ad-1160">Spusťte instalační program na serveru.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1160">Run the installer on the server.</span></span> <span data-ttu-id="e72ad-1161">Při spuštění instalačního programu z příkazového prostředí správce jsou k dispozici následující parametry:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1161">The following parameters are available when running the installer from an administrator command shell:</span></span>

   * <span data-ttu-id="e72ad-1162">`OPT_NO_ANCM=1`&ndash; Přeskočte instalaci ASP.NET základního modulu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1162">`OPT_NO_ANCM=1` &ndash; Skip installing the ASP.NET Core Module.</span></span>
   * <span data-ttu-id="e72ad-1163">`OPT_NO_RUNTIME=1`&ndash; Přeskočte instalaci runtime jádra .NET.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1163">`OPT_NO_RUNTIME=1` &ndash; Skip installing the .NET Core runtime.</span></span> <span data-ttu-id="e72ad-1164">Používá se v případě, že server hostuje pouze [samostatná nasazení (SCD).](/dotnet/core/deploying/#self-contained-deployments-scd)</span><span class="sxs-lookup"><span data-stu-id="e72ad-1164">Used when the server only hosts [self-contained deployments (SCD)](/dotnet/core/deploying/#self-contained-deployments-scd).</span></span>
   * <span data-ttu-id="e72ad-1165">`OPT_NO_SHAREDFX=1`&ndash; Přeskočit instalaci ASP.NET sdíleného rozhraní (ASP.NET runtime).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1165">`OPT_NO_SHAREDFX=1` &ndash; Skip installing the ASP.NET Shared Framework (ASP.NET runtime).</span></span> <span data-ttu-id="e72ad-1166">Používá se v případě, že server hostuje pouze [samostatná nasazení (SCD).](/dotnet/core/deploying/#self-contained-deployments-scd)</span><span class="sxs-lookup"><span data-stu-id="e72ad-1166">Used when the server only hosts [self-contained deployments (SCD)](/dotnet/core/deploying/#self-contained-deployments-scd).</span></span>
   * <span data-ttu-id="e72ad-1167">`OPT_NO_X86=1`&ndash; Přeskočit instalaci za běhu x86.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1167">`OPT_NO_X86=1` &ndash; Skip installing x86 runtimes.</span></span> <span data-ttu-id="e72ad-1168">Tento parametr použijte, pokud víte, že nebudete hostovat 32bitové aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1168">Use this parameter when you know that you won't be hosting 32-bit apps.</span></span> <span data-ttu-id="e72ad-1169">Pokud existuje nějaká šance, že budete v budoucnu hostovat 32bitové i 64bitové aplikace, nepoužívejte tento parametr a nainstalujte oba runtimes.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1169">If there's any chance that you will host both 32-bit and 64-bit apps in the future, don't use this parameter and install both runtimes.</span></span>
   * <span data-ttu-id="e72ad-1170">`OPT_NO_SHARED_CONFIG_CHECK=1`&ndash; Zakažte kontrolu použití sdílené konfigurace služby IIS, pokud je sdílená konfigurace *(applicationHost.config)* ve stejném počítači jako instalace služby IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1170">`OPT_NO_SHARED_CONFIG_CHECK=1` &ndash; Disable the check for using an IIS Shared Configuration when the shared configuration (*applicationHost.config*) is on the same machine as the IIS installation.</span></span> <span data-ttu-id="e72ad-1171">*K dispozici pouze pro ASP.NET instalačních programů hostingu Bundler nebo novějším.*</span><span class="sxs-lookup"><span data-stu-id="e72ad-1171">*Only available for ASP.NET Core 2.2 or later Hosting Bundler installers.*</span></span> <span data-ttu-id="e72ad-1172">Další informace naleznete v tématu <xref:host-and-deploy/aspnet-core-module#aspnet-core-module-with-an-iis-shared-configuration>.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1172">For more information, see <xref:host-and-deploy/aspnet-core-module#aspnet-core-module-with-an-iis-shared-configuration>.</span></span>
1. <span data-ttu-id="e72ad-1173">Restartujte systém nebo proveďte následující příkazy v příkazovém prostředí:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1173">Restart the system or execute the following commands in a command shell:</span></span>

   ```console
   net stop was /y
   net start w3svc
   ```
   <span data-ttu-id="e72ad-1174">Restartování služby IIS vyvolá změnu systémové cesty, což je proměnná prostředí provedená instalačním programem.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1174">Restarting IIS picks up a change to the system PATH, which is an environment variable, made by the installer.</span></span>

<span data-ttu-id="e72ad-1175">Při instalaci balíčku Hosting Bundle není nutné ručně zastavovat jednotlivé weby ve službách IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1175">It isn't necessary to manually stop individual sites in IIS when installing the Hosting Bundle.</span></span> <span data-ttu-id="e72ad-1176">Hostované aplikace (weby služby IIS) se restartují při restartování služby IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1176">Hosted apps (IIS sites) restart when IIS restarts.</span></span> <span data-ttu-id="e72ad-1177">Aplikace se znovu spustí, když obdrží svůj první požadavek, včetně z [modulu inicializace aplikace](#application-initialization-module-and-idle-timeout).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1177">Apps start up again when they receive their first request, including from the [Application Initialization Module](#application-initialization-module-and-idle-timeout).</span></span>

<span data-ttu-id="e72ad-1178">ASP.NET Core přijímá roll-forward chování pro opravy vydání sdílených rámců.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1178">ASP.NET Core adopts roll-forward behavior for patch releases of shared framework packages.</span></span> <span data-ttu-id="e72ad-1179">Když se aplikace hostované službou IIS restartují se službou IIS, aplikace se načítají nejnovějšími verzemi oprav svých odkazovaných balíčků, když obdrží svůj první požadavek.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1179">When apps hosted by IIS restart with IIS, the apps load with the latest patch releases of their referenced packages when they receive their first request.</span></span> <span data-ttu-id="e72ad-1180">Pokud služba IIS není restartována, aplikace se restartují a vykazují chování pro předávání vpřed, když jsou jejich pracovní procesy recyklovány a obdrží první požadavek.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1180">If IIS isn't restarted, apps restart and exhibit roll-forward behavior when their worker processes are recycled and they receive their first request.</span></span>

> [!NOTE]
> <span data-ttu-id="e72ad-1181">Informace o sdílené konfiguraci služby IIS naleznete [v tématu ASP.NET Core Module se sdílenou konfigurací služby IIS](xref:host-and-deploy/aspnet-core-module#aspnet-core-module-with-an-iis-shared-configuration).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1181">For information on IIS Shared Configuration, see [ASP.NET Core Module with IIS Shared Configuration](xref:host-and-deploy/aspnet-core-module#aspnet-core-module-with-an-iis-shared-configuration).</span></span>

## <a name="install-web-deploy-when-publishing-with-visual-studio"></a><span data-ttu-id="e72ad-1182">Instalace nasazení webu při publikování pomocí sady Visual Studio</span><span class="sxs-lookup"><span data-stu-id="e72ad-1182">Install Web Deploy when publishing with Visual Studio</span></span>

<span data-ttu-id="e72ad-1183">Při nasazování aplikací na servery s [nasazením webu](/iis/install/installing-publishing-technologies/installing-and-configuring-web-deploy-on-iis-80-or-later)nainstalujte na server nejnovější verzi nasazení webu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1183">When deploying apps to servers with [Web Deploy](/iis/install/installing-publishing-technologies/installing-and-configuring-web-deploy-on-iis-80-or-later), install the latest version of Web Deploy on the server.</span></span> <span data-ttu-id="e72ad-1184">Chcete-li nainstalovat nasazení webu, použijte [Instalační službu webové platformy (WebPI)](https://www.microsoft.com/web/downloads/platform.aspx) nebo získejte instalační program přímo ze [služby Stažení softwaru](https://www.microsoft.com/download/details.aspx?id=43717).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1184">To install Web Deploy, use the [Web Platform Installer (WebPI)](https://www.microsoft.com/web/downloads/platform.aspx) or obtain an installer directly from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=43717).</span></span> <span data-ttu-id="e72ad-1185">Upřednostňovanou metodou je použití webpi.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1185">The preferred method is to use WebPI.</span></span> <span data-ttu-id="e72ad-1186">WebPI nabízí samostatné nastavení a konfiguraci pro poskytovatele hostingu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1186">WebPI offers a standalone setup and a configuration for hosting providers.</span></span>

## <a name="create-the-iis-site"></a><span data-ttu-id="e72ad-1187">Vytvoření webu iis</span><span class="sxs-lookup"><span data-stu-id="e72ad-1187">Create the IIS site</span></span>

1. <span data-ttu-id="e72ad-1188">V hostitelském systému vytvořte složku, která bude obsahovat publikované složky a soubory aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1188">On the hosting system, create a folder to contain the app's published folders and files.</span></span> <span data-ttu-id="e72ad-1189">V následujícím kroku je cesta ke složce k dispozici službu IIS jako fyzická cesta k aplikaci.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1189">In a following step, the folder's path is provided to IIS as the physical path to the app.</span></span> <span data-ttu-id="e72ad-1190">Další informace o složce nasazení aplikace a <xref:host-and-deploy/directory-structure>rozložení souborů naleznete v tématu .</span><span class="sxs-lookup"><span data-stu-id="e72ad-1190">For more information on an app's deployment folder and file layout, see <xref:host-and-deploy/directory-structure>.</span></span>

1. <span data-ttu-id="e72ad-1191">Ve Správci služby IIS otevřete uzel serveru v panelu **Připojení.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1191">In IIS Manager, open the server's node in the **Connections** panel.</span></span> <span data-ttu-id="e72ad-1192">Klikněte pravým tlačítkem myši na složku **Weby.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1192">Right-click the **Sites** folder.</span></span> <span data-ttu-id="e72ad-1193">V kontextové nabídce vyberte **Přidat web.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1193">Select **Add Website** from the contextual menu.</span></span>

1. <span data-ttu-id="e72ad-1194">Zadejte **název webu** a nastavte **fyzickou cestu** ke složce nasazení aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1194">Provide a **Site name** and set the **Physical path** to the app's deployment folder.</span></span> <span data-ttu-id="e72ad-1195">Zadejte konfiguraci **vazby** a vytvořte web výběrem **možnosti OK**:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1195">Provide the **Binding** configuration and create the website by selecting **OK**:</span></span>

   ![V kroku Přidat web zadejte název webu, fyzickou cestu a název hostitele.](index/_static/add-website-ws2016.png)

   > [!WARNING]
   > <span data-ttu-id="e72ad-1197">Vazby se zástupnými`http://*:80/` symboly nejvyšší úrovně ( a `http://+:80`) by **neměly** být používány.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1197">Top-level wildcard bindings (`http://*:80/` and `http://+:80`) should **not** be used.</span></span> <span data-ttu-id="e72ad-1198">Vazby se zástupnými symboly nejvyšší úrovně mohou otevřít vaši aplikaci slabá místa zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1198">Top-level wildcard bindings can open up your app to security vulnerabilities.</span></span> <span data-ttu-id="e72ad-1199">To platí pro silné i slabé zástupné znaky.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1199">This applies to both strong and weak wildcards.</span></span> <span data-ttu-id="e72ad-1200">Používejte explicitní názvy hostitelů místo zástupných znaků.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1200">Use explicit host names rather than wildcards.</span></span> <span data-ttu-id="e72ad-1201">Vazba se zástupnými znaky subdomény (například) nemá toto bezpečnostní riziko, `*.mysub.com` `*.com`pokud řídíte celou nadřazenou doménu (na rozdíl od , která je zranitelná).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1201">Subdomain wildcard binding (for example, `*.mysub.com`) doesn't have this security risk if you control the entire parent domain (as opposed to `*.com`, which is vulnerable).</span></span> <span data-ttu-id="e72ad-1202">Viz [rfc7230 sekce-5.4](https://tools.ietf.org/html/rfc7230#section-5.4) pro více informací.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1202">See [rfc7230 section-5.4](https://tools.ietf.org/html/rfc7230#section-5.4) for more information.</span></span>

1. <span data-ttu-id="e72ad-1203">Pod uzlovým serverem vyberte **fondy aplikací**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1203">Under the server's node, select **Application Pools**.</span></span>

1. <span data-ttu-id="e72ad-1204">Klikněte pravým tlačítkem myši na fond aplikací webu a v kontextové nabídce vyberte **Základní nastavení.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1204">Right-click the site's app pool and select **Basic Settings** from the contextual menu.</span></span>

1. <span data-ttu-id="e72ad-1205">V okně **Upravit fond aplikací** nastavte verzi **.NET CLR** na **Žádný spravovaný kód**:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1205">In the **Edit Application Pool** window, set the **.NET CLR version** to **No Managed Code**:</span></span>

   ![Pro verzi CLR rozhraní .NET nenastavte žádný spravovaný kód.](index/_static/edit-apppool-ws2016.png)

    <span data-ttu-id="e72ad-1207">ASP.NET Core běží v samostatném procesu a spravuje runtime.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1207">ASP.NET Core runs in a separate process and manages the runtime.</span></span> <span data-ttu-id="e72ad-1208">ASP.NET Core nespoléhá na načtení plochy CLR (.NET CLR)&mdash;Core Common Language Runtime (CoreCLR) pro .NET Core je spuštěn pro hostování aplikace v pracovním procesu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1208">ASP.NET Core doesn't rely on loading the desktop CLR (.NET CLR)&mdash;the Core Common Language Runtime (CoreCLR) for .NET Core is booted to host the app in the worker process.</span></span> <span data-ttu-id="e72ad-1209">Nastavení **verze .NET CLR** na **žádný spravovaný kód** je volitelné, ale doporučeno.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1209">Setting the **.NET CLR version** to **No Managed Code** is optional but recommended.</span></span>

1. <span data-ttu-id="e72ad-1210">*ASP.NET jádra 2.2 nebo novějšího:* Pro 64bitové (x64) [samostatné nasazení,](/dotnet/core/deploying/#self-contained-deployments-scd) které používá [model hostování v procesu](#in-process-hosting-model), zakažte fond aplikací pro 32bitové (x86) procesy.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1210">*ASP.NET Core 2.2 or later*: For a 64-bit (x64) [self-contained deployment](/dotnet/core/deploying/#self-contained-deployments-scd) that uses the [in-process hosting model](#in-process-hosting-model), disable the app pool for 32-bit (x86) processes.</span></span>

   <span data-ttu-id="e72ad-1211">V postranním panelu **Akce** správce služby IIS > **fondy aplikací**vyberte **možnost Nastavit výchozí nastavení fondu aplikací** nebo **Upřesnit nastavení**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1211">In the **Actions** sidebar of IIS Manager > **Application Pools**, select **Set Application Pool Defaults** or **Advanced Settings**.</span></span> <span data-ttu-id="e72ad-1212">Vyhledejte **funkci Povolit 32bitové aplikace** a nastavte hodnotu na . `False`</span><span class="sxs-lookup"><span data-stu-id="e72ad-1212">Locate **Enable 32-Bit Applications** and set the value to `False`.</span></span> <span data-ttu-id="e72ad-1213">Toto nastavení nemá vliv na aplikace nasazené pro [mimoprocesový hosting](xref:host-and-deploy/aspnet-core-module#out-of-process-hosting-model).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1213">This setting doesn't affect apps deployed for [out-of-process hosting](xref:host-and-deploy/aspnet-core-module#out-of-process-hosting-model).</span></span>

1. <span data-ttu-id="e72ad-1214">Potvrďte, že identita modelu procesu má správná oprávnění.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1214">Confirm the process model identity has the proper permissions.</span></span>

   <span data-ttu-id="e72ad-1215">Pokud se výchozí identita fondu aplikací **(identita\*\*\*\*procesního modelu** > ) změní z **ApplicationPoolIdentity** na jinou identitu, ověřte, zda nová identita má požadovaná oprávnění pro přístup ke složce, databázi a dalším požadovaným prostředkům aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1215">If the default identity of the app pool (**Process Model** > **Identity**) is changed from **ApplicationPoolIdentity** to another identity, verify that the new identity has the required permissions to access the app's folder, database, and other required resources.</span></span> <span data-ttu-id="e72ad-1216">Fond aplikací například vyžaduje přístup pro čtení a zápis do složek, kde aplikace čte a zapisuje soubory.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1216">For example, the app pool requires read and write access to folders where the app reads and writes files.</span></span>

<span data-ttu-id="e72ad-1217">**Konfigurace ověřování systému Windows (volitelná)**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1217">**Windows Authentication configuration (Optional)**</span></span>  
<span data-ttu-id="e72ad-1218">Další informace naleznete v [tématu Configure Windows authentication](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1218">For more information, see [Configure Windows authentication](xref:security/authentication/windowsauth).</span></span>

## <a name="deploy-the-app"></a><span data-ttu-id="e72ad-1219">Nasazení aplikace</span><span class="sxs-lookup"><span data-stu-id="e72ad-1219">Deploy the app</span></span>

<span data-ttu-id="e72ad-1220">Nasaďte aplikaci do složky **Fyzické cesty** služby IIS, která byla vytvořena v části Vytvořit [web služby IIS.](#create-the-iis-site)</span><span class="sxs-lookup"><span data-stu-id="e72ad-1220">Deploy the app to the IIS **Physical path** folder that was established in the [Create the IIS site](#create-the-iis-site) section.</span></span> <span data-ttu-id="e72ad-1221">[Nasazení webu](/iis/publish/using-web-deploy/introduction-to-web-deploy) je doporučený mechanismus pro nasazení, ale existuje několik možností pro přesunutí aplikace ze složky *publikování* projektu do složky nasazení hostitelského systému.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1221">[Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy) is the recommended mechanism for deployment, but several options exist for moving the app from the project's *publish* folder to the hosting system's deployment folder.</span></span>

### <a name="web-deploy-with-visual-studio"></a><span data-ttu-id="e72ad-1222">Nasazení webu pomocí sady Visual Studio</span><span class="sxs-lookup"><span data-stu-id="e72ad-1222">Web Deploy with Visual Studio</span></span>

<span data-ttu-id="e72ad-1223">Podívejte se na [profily publikování aplikace Visual Studio pro téma nasazení aplikace ASP.NET Core,](xref:host-and-deploy/visual-studio-publish-profiles#publish-profiles) kde se dozvíte, jak vytvořit profil publikování pro použití s nasazením webu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1223">See the [Visual Studio publish profiles for ASP.NET Core app deployment](xref:host-and-deploy/visual-studio-publish-profiles#publish-profiles) topic to learn how to create a publish profile for use with Web Deploy.</span></span> <span data-ttu-id="e72ad-1224">Pokud poskytovatel hostingu poskytuje profil publikování nebo podporu pro jeho vytvoření, stáhněte si jeho profil a importujte jej pomocí dialogového okna **Publikovat** sady Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1224">If the hosting provider provides a Publish Profile or support for creating one, download their profile and import it using the Visual Studio **Publish** dialog:</span></span>

![Stránka dialogového okna Publikovat](index/_static/pub-dialog.png)

### <a name="web-deploy-outside-of-visual-studio"></a><span data-ttu-id="e72ad-1226">Nasazení webu mimo Visual Studio</span><span class="sxs-lookup"><span data-stu-id="e72ad-1226">Web Deploy outside of Visual Studio</span></span>

<span data-ttu-id="e72ad-1227">[Nasazení webu](/iis/publish/using-web-deploy/introduction-to-web-deploy) lze také použít mimo Visual Studio z příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1227">[Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy) can also be used outside of Visual Studio from the command line.</span></span> <span data-ttu-id="e72ad-1228">Další informace naleznete v [tématu Web Deployment Tool](/iis/publish/using-web-deploy/use-the-web-deployment-tool).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1228">For more information, see [Web Deployment Tool](/iis/publish/using-web-deploy/use-the-web-deployment-tool).</span></span>

### <a name="alternatives-to-web-deploy"></a><span data-ttu-id="e72ad-1229">Alternativy k nasazení webu</span><span class="sxs-lookup"><span data-stu-id="e72ad-1229">Alternatives to Web Deploy</span></span>

<span data-ttu-id="e72ad-1230">Pomocí některé z několika metod přesuňte aplikaci do hostitelského systému, jako je ruční kopírování, [Xcopy](/windows-server/administration/windows-commands/xcopy), [Robocopy](/windows-server/administration/windows-commands/robocopy)nebo [PowerShell](/powershell/).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1230">Use any of several methods to move the app to the hosting system, such as manual copy, [Xcopy](/windows-server/administration/windows-commands/xcopy), [Robocopy](/windows-server/administration/windows-commands/robocopy), or [PowerShell](/powershell/).</span></span>

<span data-ttu-id="e72ad-1231">Další informace o ASP.NET nasazení jádra do služby IIS naleznete v části [Prostředky nasazení pro správce služby IIS.](#deployment-resources-for-iis-administrators)</span><span class="sxs-lookup"><span data-stu-id="e72ad-1231">For more information on ASP.NET Core deployment to IIS, see the [Deployment resources for IIS administrators](#deployment-resources-for-iis-administrators) section.</span></span>

## <a name="browse-the-website"></a><span data-ttu-id="e72ad-1232">Procházení webu</span><span class="sxs-lookup"><span data-stu-id="e72ad-1232">Browse the website</span></span>

<span data-ttu-id="e72ad-1233">Po nasazení aplikace do hostitelského systému požádejte o jeden z veřejných koncových bodů aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1233">After the app is deployed to the hosting system, make a request to one of the app's public endpoints.</span></span>

<span data-ttu-id="e72ad-1234">V následujícím příkladu je web vázán na název `www.mysite.com` **hostitele** iis na **portu** `80`.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1234">In the following example, the site is bound to an IIS **Host name** of `www.mysite.com` on **Port** `80`.</span></span> <span data-ttu-id="e72ad-1235">Žádost se podává `http://www.mysite.com`na :</span><span class="sxs-lookup"><span data-stu-id="e72ad-1235">A request is made to `http://www.mysite.com`:</span></span>

![Prohlížeč Microsoft Edge načetl úvodní stránku služby IIS.](index/_static/browsewebsite.png)

## <a name="locked-deployment-files"></a><span data-ttu-id="e72ad-1237">Uzamčené soubory nasazení</span><span class="sxs-lookup"><span data-stu-id="e72ad-1237">Locked deployment files</span></span>

<span data-ttu-id="e72ad-1238">Soubory ve složce nasazení jsou uzamčeny, když je aplikace spuštěná.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1238">Files in the deployment folder are locked when the app is running.</span></span> <span data-ttu-id="e72ad-1239">Uzamčené soubory nelze během nasazení přepsat.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1239">Locked files can't be overwritten during deployment.</span></span> <span data-ttu-id="e72ad-1240">Chcete-li uvolnit uzamčené soubory v nasazení, zastavte fond aplikací pomocí **jednoho z** následujících přístupů:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1240">To release locked files in a deployment, stop the app pool using **one** of the following approaches:</span></span>

* <span data-ttu-id="e72ad-1241">Použijte nasazení webu `Microsoft.NET.Sdk.Web` a odkaz v souboru projektu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1241">Use Web Deploy and reference `Microsoft.NET.Sdk.Web` in the project file.</span></span> <span data-ttu-id="e72ad-1242">Soubor *app_offline.htm* je umístěn v kořenovém adresáři webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1242">An *app_offline.htm* file is placed at the root of the web app directory.</span></span> <span data-ttu-id="e72ad-1243">Když je soubor k dispozici, ASP.NET základní modul řádně vypne aplikaci a slouží *souboru app_offline.htm* během nasazení.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1243">When the file is present, the ASP.NET Core Module gracefully shuts down the app and serves the *app_offline.htm* file during the deployment.</span></span> <span data-ttu-id="e72ad-1244">Další informace naleznete v [odkazu na konfiguraci ASP.NET core modulem](xref:host-and-deploy/aspnet-core-module#app_offlinehtm).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1244">For more information, see the [ASP.NET Core Module configuration reference](xref:host-and-deploy/aspnet-core-module#app_offlinehtm).</span></span>
* <span data-ttu-id="e72ad-1245">Ručně zastavit fond aplikací ve Správci služby IIS na serveru.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1245">Manually stop the app pool in the IIS Manager on the server.</span></span>
* <span data-ttu-id="e72ad-1246">Použití Prostředí PowerShell k přetažení *app_offline.htm* (vyžaduje PowerShell 5 nebo novější):</span><span class="sxs-lookup"><span data-stu-id="e72ad-1246">Use PowerShell to drop *app_offline.htm* (requires PowerShell 5 or later):</span></span>

  ```powershell
  $pathToApp = 'PATH_TO_APP'

  # Stop the AppPool
  New-Item -Path $pathToApp app_offline.htm

  # Provide script commands here to deploy the app

  # Restart the AppPool
  Remove-Item -Path $pathToApp app_offline.htm

  ```

## <a name="data-protection"></a><span data-ttu-id="e72ad-1247">Ochrana dat</span><span class="sxs-lookup"><span data-stu-id="e72ad-1247">Data protection</span></span>

<span data-ttu-id="e72ad-1248">Zásobník [ASP.NET Core Data Protection](xref:security/data-protection/introduction) používá několik [middlewares](xref:fundamentals/middleware/index)ASP.NET Core , včetně middlewaru používaného při ověřování.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1248">The [ASP.NET Core Data Protection stack](xref:security/data-protection/introduction) is used by several ASP.NET Core [middlewares](xref:fundamentals/middleware/index), including middleware used in authentication.</span></span> <span data-ttu-id="e72ad-1249">I v případě, že rozhraní API ochrany dat nejsou volána uživatelským kódem, ochrana dat by měla být nakonfigurována pomocí skriptu nasazení nebo v uživatelském kódu, aby se vytvořilo trvalé úložiště kryptografických [klíčů](xref:security/data-protection/implementation/key-management).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1249">Even if Data Protection APIs aren't called by user code, data protection should be configured with a deployment script or in user code to create a persistent cryptographic [key store](xref:security/data-protection/implementation/key-management).</span></span> <span data-ttu-id="e72ad-1250">Pokud ochrana dat není nakonfigurována, klíče jsou uloženy v paměti a po restartování aplikace zahozeny.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1250">If data protection isn't configured, the keys are held in memory and discarded when the app restarts.</span></span>

<span data-ttu-id="e72ad-1251">Pokud je kroužek klíče uložen v paměti při restartování aplikace:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1251">If the key ring is stored in memory when the app restarts:</span></span>

* <span data-ttu-id="e72ad-1252">Všechny ověřovací tokeny založené na souborech cookie jsou zrušeny.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1252">All cookie-based authentication tokens are invalidated.</span></span> 
* <span data-ttu-id="e72ad-1253">Uživatelé se musí znovu přihlásit při dalším požadavku.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1253">Users are required to sign in again on their next request.</span></span> 
* <span data-ttu-id="e72ad-1254">Všechna data chráněná kroužkem klíče již nelze dešifrovat.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1254">Any data protected with the key ring can no longer be decrypted.</span></span> <span data-ttu-id="e72ad-1255">To může zahrnovat [tokeny CSRF](xref:security/anti-request-forgery#aspnet-core-antiforgery-configuration) a [ASP.NET základní soubory cookie MVC TempData](xref:fundamentals/app-state#tempdata).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1255">This may include [CSRF tokens](xref:security/anti-request-forgery#aspnet-core-antiforgery-configuration) and [ASP.NET Core MVC TempData cookies](xref:fundamentals/app-state#tempdata).</span></span>

<span data-ttu-id="e72ad-1256">Chcete-li nakonfigurovat ochranu dat ve službě IIS tak, aby zachycovací byl kroužek klíče, použijte **jeden** z následujících postupů:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1256">To configure data protection under IIS to persist the key ring, use **one** of the following approaches:</span></span>

* <span data-ttu-id="e72ad-1257">**Vytvoření klíčů registru ochrany dat**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1257">**Create Data Protection Registry Keys**</span></span>

  <span data-ttu-id="e72ad-1258">Klíče ochrany dat používané ASP.NET aplikace Core jsou uloženy v registru mimo aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1258">Data protection keys used by ASP.NET Core apps are stored in the registry external to the apps.</span></span> <span data-ttu-id="e72ad-1259">Chcete-li zachovat klíče pro danou aplikaci, vytvořte klíče registru pro fond aplikací.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1259">To persist the keys for a given app, create registry keys for the app pool.</span></span>

  <span data-ttu-id="e72ad-1260">Pro samostatné instalace služby IIS mimo webfarmu lze [skript prostředí PowerShell Pro poskytování ochrany dat-AutoGenKeys.ps1](https://github.com/dotnet/AspNetCore/blob/master/src/DataProtection/Provision-AutoGenKeys.ps1) použít pro každý fond aplikací používaný s aplikací ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1260">For standalone, non-webfarm IIS installations, the [Data Protection Provision-AutoGenKeys.ps1 PowerShell script](https://github.com/dotnet/AspNetCore/blob/master/src/DataProtection/Provision-AutoGenKeys.ps1) can be used for each app pool used with an ASP.NET Core app.</span></span> <span data-ttu-id="e72ad-1261">Tento skript vytvoří klíč registru v registru HKLM, který je přístupný pouze pro účet pracovního procesu fondu aplikací.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1261">This script creates a registry key in the HKLM registry that's accessible only to the worker process account of the app's app pool.</span></span> <span data-ttu-id="e72ad-1262">Klíče jsou šifrovány v klidovém stavu pomocí dpapi s klíčem pro celý počítač.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1262">Keys are encrypted at rest using DPAPI with a machine-wide key.</span></span>

  <span data-ttu-id="e72ad-1263">Ve scénářích webové farmy lze aplikaci nakonfigurovat tak, aby k ukládání kroužku klíčů pro ochranu dat používala cestu UNC.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1263">In web farm scenarios, an app can be configured to use a UNC path to store its data protection key ring.</span></span> <span data-ttu-id="e72ad-1264">Ve výchozím nastavení nejsou klíče ochrany dat šifrovány.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1264">By default, the data protection keys aren't encrypted.</span></span> <span data-ttu-id="e72ad-1265">Ujistěte se, že oprávnění k souborům pro sdílenou síť ovou složku jsou omezena na účet Windows, pod kterým aplikace běží.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1265">Ensure that the file permissions for the network share are limited to the Windows account the app runs under.</span></span> <span data-ttu-id="e72ad-1266">Certifikát X509 lze použít k ochraně klíčů v klidovém stavu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1266">An X509 certificate can be used to protect keys at rest.</span></span> <span data-ttu-id="e72ad-1267">Zvažte mechanismus, který uživatelům umožní nahrávat certifikáty: Umístěte certifikáty do úložiště důvěryhodných certifikátů uživatele a ujistěte se, že jsou k dispozici na všech počítačích, kde je spuštěna aplikace uživatele.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1267">Consider a mechanism to allow users to upload certificates: Place certificates into the user's trusted certificate store and ensure they're available on all machines where the user's app runs.</span></span> <span data-ttu-id="e72ad-1268">Podrobnosti [najdete v tématu Konfigurace ochrany základních dat ASP.NET.](xref:security/data-protection/configuration/overview)</span><span class="sxs-lookup"><span data-stu-id="e72ad-1268">See [Configure ASP.NET Core Data Protection](xref:security/data-protection/configuration/overview) for details.</span></span>

* <span data-ttu-id="e72ad-1269">**Konfigurace fondu aplikací služby IIS pro načtení profilu uživatele**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1269">**Configure the IIS Application Pool to load the user profile**</span></span>

  <span data-ttu-id="e72ad-1270">Toto nastavení je v části **Model procesu** v části **Upřesnit nastavení** pro fond aplikací.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1270">This setting is in the **Process Model** section under the **Advanced Settings** for the app pool.</span></span> <span data-ttu-id="e72ad-1271">Nastavte **profil načtení uživatele** na `True`.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1271">Set **Load User Profile** to `True`.</span></span> <span data-ttu-id="e72ad-1272">Pokud je `True`nastavena možnost , jsou klíče uloženy v adresáři profilu uživatele a chráněny pomocí rozhraní DPAPI klíčem specifickým pro uživatelský účet.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1272">When set to `True`, keys are stored in the user profile directory and protected using DPAPI with a key specific to the user account.</span></span> <span data-ttu-id="e72ad-1273">Klíče jsou uloženy ve složce *%LOCALAPPDATA%/ASP.NET/DataProtection-Keys.*</span><span class="sxs-lookup"><span data-stu-id="e72ad-1273">Keys are persisted to the *%LOCALAPPDATA%/ASP.NET/DataProtection-Keys* folder.</span></span>

  <span data-ttu-id="e72ad-1274">[Atribut setProfileEnvironment](/iis/configuration/system.applicationhost/applicationpools/add/processmodel#configuration) fondu aplikací musí být také povolen.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1274">The app pool's [setProfileEnvironment attribute](/iis/configuration/system.applicationhost/applicationpools/add/processmodel#configuration) must also be enabled.</span></span> <span data-ttu-id="e72ad-1275">Výchozí hodnota `setProfileEnvironment` je `true`.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1275">The default value of `setProfileEnvironment` is `true`.</span></span> <span data-ttu-id="e72ad-1276">V některých scénářích (například `setProfileEnvironment` operační `false`systém Windows) je nastavena na .</span><span class="sxs-lookup"><span data-stu-id="e72ad-1276">In some scenarios (for example, Windows OS), `setProfileEnvironment` is set to `false`.</span></span> <span data-ttu-id="e72ad-1277">Pokud klíče nejsou uloženy v adresáři profilu uživatele podle očekávání:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1277">If keys aren't stored in the user profile directory as expected:</span></span>

  1. <span data-ttu-id="e72ad-1278">Přejděte do složky *%windir%/system32/inetsrv/config.*</span><span class="sxs-lookup"><span data-stu-id="e72ad-1278">Navigate to the *%windir%/system32/inetsrv/config* folder.</span></span>
  1. <span data-ttu-id="e72ad-1279">Otevřete soubor *applicationHost.config.*</span><span class="sxs-lookup"><span data-stu-id="e72ad-1279">Open the *applicationHost.config* file.</span></span>
  1. <span data-ttu-id="e72ad-1280">Vyhledejte element `<system.applicationHost><applicationPools><applicationPoolDefaults><processModel>`.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1280">Locate the `<system.applicationHost><applicationPools><applicationPoolDefaults><processModel>` element.</span></span>
  1. <span data-ttu-id="e72ad-1281">Zkontrolujte, `setProfileEnvironment` zda atribut není k dispozici, `true`což je výchozí hodnota na `true`, nebo explicitně nastavte hodnotu atributu na .</span><span class="sxs-lookup"><span data-stu-id="e72ad-1281">Confirm that the `setProfileEnvironment` attribute isn't present, which defaults the value to `true`, or explicitly set the attribute's value to `true`.</span></span>

* <span data-ttu-id="e72ad-1282">**Použití systému souborů jako úložiště kroužků na klíče**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1282">**Use the file system as a key ring store**</span></span>

  <span data-ttu-id="e72ad-1283">Upravte kód aplikace tak, aby [používal systém souborů jako úložiště kroužků klíčů](xref:security/data-protection/configuration/overview).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1283">Adjust the app code to [use the file system as a key ring store](xref:security/data-protection/configuration/overview).</span></span> <span data-ttu-id="e72ad-1284">K ochraně kroužku na klíče a zajištění, že certifikát je důvěryhodný, použijte certifikát X509.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1284">Use an X509 certificate to protect the key ring and ensure the certificate is a trusted certificate.</span></span> <span data-ttu-id="e72ad-1285">Pokud je certifikát podepsaný svým držitelem, umístěte jej do úložiště Důvěryhodného kořenového adresáře.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1285">If the certificate is self-signed, place the certificate in the Trusted Root store.</span></span>

  <span data-ttu-id="e72ad-1286">Při použití služby IIS ve webové farmě:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1286">When using IIS in a web farm:</span></span>

  * <span data-ttu-id="e72ad-1287">Použijte sdílenou složku, ke které mají přístup všechny počítače.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1287">Use a file share that all machines can access.</span></span>
  * <span data-ttu-id="e72ad-1288">Nasazení certifikátu X509 do každého počítače.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1288">Deploy an X509 certificate to each machine.</span></span> <span data-ttu-id="e72ad-1289">Konfigurace [ochrany dat v kódu](xref:security/data-protection/configuration/overview).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1289">Configure [data protection in code](xref:security/data-protection/configuration/overview).</span></span>

* <span data-ttu-id="e72ad-1290">**Nastavení celopočítačových zásad pro ochranu dat**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1290">**Set a machine-wide policy for data protection**</span></span>

  <span data-ttu-id="e72ad-1291">Systém ochrany dat má omezenou podporu pro nastavení výchozí [zásady celého počítače](xref:security/data-protection/configuration/machine-wide-policy) pro všechny aplikace, které spotřebovávají data protection API.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1291">The data protection system has limited support for setting a default [machine-wide policy](xref:security/data-protection/configuration/machine-wide-policy) for all apps that consume the Data Protection APIs.</span></span> <span data-ttu-id="e72ad-1292">Další informace naleznete v tématu <xref:security/data-protection/introduction>.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1292">For more information, see <xref:security/data-protection/introduction>.</span></span>

## <a name="virtual-directories"></a><span data-ttu-id="e72ad-1293">Virtuální adresáře</span><span class="sxs-lookup"><span data-stu-id="e72ad-1293">Virtual Directories</span></span>

<span data-ttu-id="e72ad-1294">[Virtuální adresáře služby IIS](/iis/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis#virtual-directories) nejsou podporovány aplikacemi ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1294">[IIS Virtual Directories](/iis/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis#virtual-directories) aren't supported with ASP.NET Core apps.</span></span> <span data-ttu-id="e72ad-1295">Aplikace může být hostována jako [podaplikace](#sub-applications).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1295">An app can be hosted as a [sub-application](#sub-applications).</span></span>

## <a name="sub-applications"></a><span data-ttu-id="e72ad-1296">Dílčí aplikace</span><span class="sxs-lookup"><span data-stu-id="e72ad-1296">Sub-applications</span></span>

<span data-ttu-id="e72ad-1297">Aplikaci ASP.NET Core lze hostovat jako [podaplikaci služby IIS (podaplikaci).](/iis/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis#applications)</span><span class="sxs-lookup"><span data-stu-id="e72ad-1297">An ASP.NET Core app can be hosted as an [IIS sub-application (sub-app)](/iis/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis#applications).</span></span> <span data-ttu-id="e72ad-1298">Cesta podaplikace se stane součástí adresy URL kořenové aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1298">The sub-app's path becomes part of the root app's URL.</span></span>

<span data-ttu-id="e72ad-1299">Podaplikace by neměla obsahovat ASP.NET core modul jako obslužnou rutinu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1299">A sub-app shouldn't include the ASP.NET Core Module as a handler.</span></span> <span data-ttu-id="e72ad-1300">Pokud je modul přidán jako obslužná rutina do souboru *web.config* podaplikace, při pokusu o procházení podaplikace se zobrazí *interní chyba serveru 500.19* odkazující na vadný konfigurační soubor.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1300">If the module is added as a handler in a sub-app's *web.config* file, a *500.19 Internal Server Error* referencing the faulty config file is received when attempting to browse the sub-app.</span></span>

<span data-ttu-id="e72ad-1301">Následující příklad ukazuje publikovaný soubor *web.config* pro podaplikaci ASP.NET Core:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1301">The following example shows a published *web.config* file for an ASP.NET Core sub-app:</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.webServer>
    <aspNetCore processPath="dotnet" 
      arguments=".\MyApp.dll" 
      stdoutLogEnabled="false" 
      stdoutLogFile=".\logs\stdout" />
  </system.webServer>
</configuration>
```

<span data-ttu-id="e72ad-1302">Při hostování podřízené aplikace non-ASP.NET Core pod aplikací ASP.NET Core explicitně odeberte zděděnou obslužnou rutinu v souboru *web.config* pod podřízené aplikace:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1302">When hosting a non-ASP.NET Core sub-app underneath an ASP.NET Core app, explicitly remove the inherited handler in the sub-app's *web.config* file:</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.webServer>
    <handlers>
      <remove name="aspNetCore" />
    </handlers>
    <aspNetCore processPath="dotnet" 
      arguments=".\MyApp.dll" 
      stdoutLogEnabled="false" 
      stdoutLogFile=".\logs\stdout" />
  </system.webServer>
</configuration>
```

<span data-ttu-id="e72ad-1303">Statické odkazy datových zdrojů v rámci podaplikace`~/`by měly používat zápis tildového lomítka ( ).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1303">Static asset links within the sub-app should use tilde-slash (`~/`) notation.</span></span> <span data-ttu-id="e72ad-1304">Zápis tildového lomítka aktivuje [pomocníka tagu,](xref:mvc/views/tag-helpers/intro) který předřává základnu cesty podaplikace k vykreslenérelativní vazbě.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1304">Tilde-slash notation triggers a [Tag Helper](xref:mvc/views/tag-helpers/intro) to prepend the sub-app's pathbase to the rendered relative link.</span></span> <span data-ttu-id="e72ad-1305">Pro podaplikaci `/subapp_path`na adrese , `src="~/image.png"` obrázek `src="/subapp_path/image.png"`spojený s je vykreslen jako .</span><span class="sxs-lookup"><span data-stu-id="e72ad-1305">For a sub-app at `/subapp_path`, an image linked with `src="~/image.png"` is rendered as `src="/subapp_path/image.png"`.</span></span> <span data-ttu-id="e72ad-1306">Middleware statického souboru kořenové aplikace nezpracovává požadavek na statický soubor.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1306">The root app's Static File Middleware doesn't process the static file request.</span></span> <span data-ttu-id="e72ad-1307">Požadavek je zpracován middlewarem statického souboru podaplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1307">The request is processed by the sub-app's Static File Middleware.</span></span>

<span data-ttu-id="e72ad-1308">Pokud je atribut `src` statického datového zdroje nastaven na `src="/image.png"`absolutní cestu (například), odkaz se vykreslí bez vytvoření cesty podaplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1308">If a static asset's `src` attribute is set to an absolute path (for example, `src="/image.png"`), the link is rendered without the sub-app's pathbase.</span></span> <span data-ttu-id="e72ad-1309">Middleware statického souboru kořenové aplikace se pokouší obsluhovat datový zdroj z [kořenového kořenového kořenového adresáře](xref:fundamentals/index#web-root)aplikace , což má za následek odpověď *404 - Not Found,* pokud není statický datový zdroj k dispozici z kořenové aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1309">The root app's Static File Middleware attempts to serve the asset from the root app's [web root](xref:fundamentals/index#web-root), which results in a *404 - Not Found* response unless the static asset is available from the root app.</span></span>

<span data-ttu-id="e72ad-1310">Hostování aplikace ASP.NET Core jako podaplikace pod jinou aplikací ASP.NET Core:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1310">To host an ASP.NET Core app as a sub-app under another ASP.NET Core app:</span></span>

1. <span data-ttu-id="e72ad-1311">Vytvořte fond aplikací pro podaplikaci.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1311">Establish an app pool for the sub-app.</span></span> <span data-ttu-id="e72ad-1312">Nastavte **verzi .NET CLR** na **žádný spravovaný kód,** protože prostředí Core Common Language Runtime (CoreCLR) pro .NET Core je spuštěno pro hostování aplikace v pracovním procesu, nikoli na ploše CLR (.NET CLR).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1312">Set the **.NET CLR Version** to **No Managed Code** because the Core Common Language Runtime (CoreCLR) for .NET Core is booted to host the app in the worker process, not the desktop CLR (.NET CLR).</span></span>

1. <span data-ttu-id="e72ad-1313">Přidejte kořenový web ve Správci služby IIS s podaplikací ve složce pod kořenovým webem.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1313">Add the root site in IIS Manager with the sub-app in a folder under the root site.</span></span>

1. <span data-ttu-id="e72ad-1314">Klikněte pravým tlačítkem myši na složku podaplikace ve Správci služby IIS a vyberte **příkaz Převést na aplikaci**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1314">Right-click the sub-app folder in IIS Manager and select **Convert to Application**.</span></span>

1. <span data-ttu-id="e72ad-1315">V dialogovém okně **Přidat aplikaci** přiřaďte pomocí tlačítka **Vybrat** pro **fond aplikací** fond aplikací, který jste vytvořili pro podaplikaci.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1315">In the **Add Application** dialog, use the **Select** button for the **Application Pool** to assign the app pool that you created for the sub-app.</span></span> <span data-ttu-id="e72ad-1316">Vyberte **OK**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1316">Select **OK**.</span></span>

<span data-ttu-id="e72ad-1317">Přiřazení samostatného fondu aplikací do podaplikace je požadavek při použití modelu hostování v procesu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1317">The assignment of a separate app pool to the sub-app is a requirement when using the in-process hosting model.</span></span>

<span data-ttu-id="e72ad-1318">Další informace o modelu hostování v procesu a konfiguraci <xref:host-and-deploy/aspnet-core-module>ASP.NET core modulu naleznete v tématu .</span><span class="sxs-lookup"><span data-stu-id="e72ad-1318">For more information on the in-process hosting model and configuring the ASP.NET Core Module, see <xref:host-and-deploy/aspnet-core-module>.</span></span>

## <a name="configuration-of-iis-with-webconfig"></a><span data-ttu-id="e72ad-1319">Konfigurace služby IIS pomocí souboru web.config</span><span class="sxs-lookup"><span data-stu-id="e72ad-1319">Configuration of IIS with web.config</span></span>

<span data-ttu-id="e72ad-1320">Konfigurace služby IIS `<system.webServer>` je ovlivněna částí *web.config* pro scénáře služby IIS, které jsou funkční pro ASP.NET aplikace Core pomocí ASP.NET core modulem.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1320">IIS configuration is influenced by the `<system.webServer>` section of *web.config* for IIS scenarios that are functional for ASP.NET Core apps with the ASP.NET Core Module.</span></span> <span data-ttu-id="e72ad-1321">Například konfigurace služby IIS je funkční pro dynamickou kompresi.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1321">For example, IIS configuration is functional for dynamic compression.</span></span> <span data-ttu-id="e72ad-1322">Pokud je služba IIS nakonfigurována na `<urlCompression>` úrovni serveru pro použití dynamické komprese, prvek v souboru *web.config* aplikace jej může zakázat pro aplikaci ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1322">If IIS is configured at the server level to use dynamic compression, the `<urlCompression>` element in the app's *web.config* file can disable it for an ASP.NET Core app.</span></span>

<span data-ttu-id="e72ad-1323">Další informace najdete v následujících tématech:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1323">For more information, see the following topics:</span></span>

* [<span data-ttu-id="e72ad-1324">Odkaz na \<konfiguraci pro>system.webServer</span><span class="sxs-lookup"><span data-stu-id="e72ad-1324">Configuration reference for \<system.webServer></span></span>](/iis/configuration/system.webServer/)
* <xref:host-and-deploy/aspnet-core-module>
* <xref:host-and-deploy/iis/modules>

<span data-ttu-id="e72ad-1325">Chcete-li nastavit proměnné prostředí pro jednotlivé aplikace spuštěné v izolovaných fondech aplikací (podporované pro službu IIS 10.0 nebo novější), přečtěte si část *příkazu AppCmd.exe* v tématu [Environment Variables environmentvariables>\<](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) tématu v referenční dokumentaci služby IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1325">To set environment variables for individual apps running in isolated app pools (supported for IIS 10.0 or later), see the *AppCmd.exe command* section of the [Environment Variables \<environmentVariables>](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) topic in the IIS reference documentation.</span></span>

## <a name="configuration-sections-of-webconfig"></a><span data-ttu-id="e72ad-1326">Konfigurační části web.config</span><span class="sxs-lookup"><span data-stu-id="e72ad-1326">Configuration sections of web.config</span></span>

<span data-ttu-id="e72ad-1327">Části konfigurace aplikací ASP.NET 4.x v *souboru web.config* nepoužívají aplikace ASP.NET Core pro konfiguraci:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1327">Configuration sections of ASP.NET 4.x apps in *web.config* aren't used by ASP.NET Core apps for configuration:</span></span>

* `<system.web>`
* `<appSettings>`
* `<connectionStrings>`
* `<location>`

<span data-ttu-id="e72ad-1328">ASP.NET aplikace Core jsou konfigurovány pomocí jiných poskytovatelů konfigurace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1328">ASP.NET Core apps are configured using other configuration providers.</span></span> <span data-ttu-id="e72ad-1329">Další informace naleznete v [tématu Konfigurace](xref:fundamentals/configuration/index).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1329">For more information, see [Configuration](xref:fundamentals/configuration/index).</span></span>

## <a name="application-pools"></a><span data-ttu-id="e72ad-1330">Fondy aplikací</span><span class="sxs-lookup"><span data-stu-id="e72ad-1330">Application Pools</span></span>

<span data-ttu-id="e72ad-1331">Když hostujete více webů na serveru, doporučujeme izolovat aplikace od sebe spuštěním jednotlivých aplikací ve vlastním fondu aplikací.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1331">When hosting multiple websites on a server, we recommend isolating the apps from each other by running each app in its own app pool.</span></span> <span data-ttu-id="e72ad-1332">Dialogové okno **Přidat web** služby IIS je výchozí pro tuto konfiguraci.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1332">The IIS **Add Website** dialog defaults to this configuration.</span></span> <span data-ttu-id="e72ad-1333">Když je k dispozici **název webu,** text se automaticky přenese do textového pole **Fondu aplikací.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1333">When a **Site name** is provided, the text is automatically transferred to the **Application pool** textbox.</span></span> <span data-ttu-id="e72ad-1334">Při přidání webu se vytvoří nový fond aplikací s názvem webu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1334">A new app pool is created using the site name when the site is added.</span></span>

## <a name="application-pool-identity"></a><span data-ttu-id="e72ad-1335">Identita fondu aplikací</span><span class="sxs-lookup"><span data-stu-id="e72ad-1335">Application Pool Identity</span></span>

<span data-ttu-id="e72ad-1336">Účet identity fondu aplikací umožňuje aplikaci spouštět pod jedinečným účtem, aniž by bylo třeba vytvářet a spravovat domény nebo místní účty.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1336">An app pool identity account allows an app to run under a unique account without having to create and manage domains or local accounts.</span></span> <span data-ttu-id="e72ad-1337">Ve službě IIS 8.0 nebo novější vytvoří pracovní proces správce služby IIS (WAS) virtuální účet s názvem nového fondu aplikací a ve výchozím nastavení spustí pracovní procesy fondu aplikací v rámci tohoto účtu.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1337">On IIS 8.0 or later, the IIS Admin Worker Process (WAS) creates a virtual account with the name of the new app pool and runs the app pool's worker processes under this account by default.</span></span> <span data-ttu-id="e72ad-1338">V konzole pro správu služby IIS v části **Upřesnit nastavení** fondu aplikací zkontrolujte, zda je **identita** nastavená na použití **applicationpoolidentity**:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1338">In the IIS Management Console under **Advanced Settings** for the app pool, ensure that the **Identity** is set to use **ApplicationPoolIdentity**:</span></span>

![Dialogové okno Upřesnit nastavení fondu aplikací](index/_static/apppool-identity.png)

<span data-ttu-id="e72ad-1340">Proces správy služby IIS vytvoří zabezpečený identifikátor s názvem fondu aplikací v systému zabezpečení systému Windows.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1340">The IIS management process creates a secure identifier with the name of the app pool in the Windows Security System.</span></span> <span data-ttu-id="e72ad-1341">Prostředky lze zabezpečit pomocí této identity.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1341">Resources can be secured using this identity.</span></span> <span data-ttu-id="e72ad-1342">Tato identita však není reálný uživatelský účet a nezobrazuje se v konzole pro správu uživatelů systému Windows.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1342">However, this identity isn't a real user account and doesn't show up in the Windows User Management Console.</span></span>

<span data-ttu-id="e72ad-1343">Pokud pracovní proces služby IIS vyžaduje zvýšený přístup k aplikaci, upravte seznam řízení přístupu (ACL) pro adresář obsahující aplikaci:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1343">If the IIS worker process requires elevated access to the app, modify the Access Control List (ACL) for the directory containing the app:</span></span>

1. <span data-ttu-id="e72ad-1344">Sem otevřete Průzkumníka Windows a přejděte do adresáře.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1344">Open Windows Explorer and navigate to the directory.</span></span>

1. <span data-ttu-id="e72ad-1345">Klepněte pravým tlačítkem myši na adresář a vyberte příkaz **Vlastnosti**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1345">Right-click on the directory and select **Properties**.</span></span>

1. <span data-ttu-id="e72ad-1346">Na kartě **Zabezpečení** vyberte tlačítko **Upravit** a pak **tlačítko Přidat.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1346">Under the **Security** tab, select the **Edit** button and then the **Add** button.</span></span>

1. <span data-ttu-id="e72ad-1347">Vyberte tlačítko **Umístění** a ujistěte se, že je vybrán systém.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1347">Select the **Locations** button and make sure the system is selected.</span></span>

1. <span data-ttu-id="e72ad-1348">Zadejte **\\<<iIS app_pool_name>** **zadejte názvy objektů, které chcete vybrat.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1348">Enter **IIS AppPool\\<app_pool_name>** in **Enter the object names to select** area.</span></span> <span data-ttu-id="e72ad-1349">Vyberte tlačítko **Zkontrolovat jména.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1349">Select the **Check Names** button.</span></span> <span data-ttu-id="e72ad-1350">Pro *DefaultAppPool* zkontrolujte názvy pomocí **IIS AppPool\DefaultAppPool**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1350">For the *DefaultAppPool* check the names using **IIS AppPool\DefaultAppPool**.</span></span> <span data-ttu-id="e72ad-1351">Když je vybráno tlačítko **Zkontrolovat názvy,** je v oblasti názvů objektů uvedena hodnota **DefaultAppPool.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1351">When the **Check Names** button is selected, a value of **DefaultAppPool** is indicated in the object names area.</span></span> <span data-ttu-id="e72ad-1352">Název fondu aplikací není možné zadat přímo do oblasti názvů objektů.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1352">It isn't possible to enter the app pool name directly into the object names area.</span></span> <span data-ttu-id="e72ad-1353">Při kontrole názvu objektu použijte<<app_pool_name>formátu \*\*IIS AppPool.\\ \*\*</span><span class="sxs-lookup"><span data-stu-id="e72ad-1353">Use the **IIS AppPool\\<app_pool_name>** format when checking for the object name.</span></span>

   ![Dialogové okno Vybrat uživatele nebo skupiny pro složku aplikace: Název fondu aplikací "DefaultAppPool" se připojí k "IIS AppPool\" v oblasti názvů objektů před výběrem možnosti Zkontrolovat názvy".](index/_static/select-users-or-groups-1.png)

1. <span data-ttu-id="e72ad-1355">Vyberte **OK**.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1355">Select **OK**.</span></span>

   ![Dialogové okno Vybrat uživatele nebo skupiny pro složku aplikace: Po výběru možnosti Zkontrolovat názvy se v oblasti názvů objektů zobrazí název objektu DefaultAppPool.](index/_static/select-users-or-groups-2.png)

1. <span data-ttu-id="e72ad-1357">Oprávnění &amp; ke spuštění čtení by měla být udělena ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1357">Read &amp; execute permissions should be granted by default.</span></span> <span data-ttu-id="e72ad-1358">Podle potřeby zadejte další oprávnění.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1358">Provide additional permissions as needed.</span></span>

<span data-ttu-id="e72ad-1359">Přístup lze také udělit na příkazovém řádku pomocí nástroje **ICACLS.**</span><span class="sxs-lookup"><span data-stu-id="e72ad-1359">Access can also be granted at a command prompt using the **ICACLS** tool.</span></span> <span data-ttu-id="e72ad-1360">Jako příklad použijete *defaultapppool,* který používá následující příkaz:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1360">Using the *DefaultAppPool* as an example, the following command is used:</span></span>

```console
ICACLS C:\sites\MyWebApp /grant "IIS AppPool\DefaultAppPool":F
```

<span data-ttu-id="e72ad-1361">Další informace naleznete v tématu [icacls.](/windows-server/administration/windows-commands/icacls)</span><span class="sxs-lookup"><span data-stu-id="e72ad-1361">For more information, see the [icacls](/windows-server/administration/windows-commands/icacls) topic.</span></span>

## <a name="http2-support"></a><span data-ttu-id="e72ad-1362">Podpora HTTP/2</span><span class="sxs-lookup"><span data-stu-id="e72ad-1362">HTTP/2 support</span></span>

<span data-ttu-id="e72ad-1363">[Protokol HTTP/2](https://httpwg.org/specs/rfc7540.html) je podporován pro mimoprocesová nasazení, která splňují následující základní požadavky:</span><span class="sxs-lookup"><span data-stu-id="e72ad-1363">[HTTP/2](https://httpwg.org/specs/rfc7540.html) is supported for out-of-process deployments that meet the following base requirements:</span></span>

* <span data-ttu-id="e72ad-1364">Windows Server 2016/Windows 10 nebo novější; IIS 10 nebo novější</span><span class="sxs-lookup"><span data-stu-id="e72ad-1364">Windows Server 2016/Windows 10 or later; IIS 10 or later</span></span>
* <span data-ttu-id="e72ad-1365">Připojení serveru edge směřující mj. [Kestrel server](xref:fundamentals/servers/kestrel)</span><span class="sxs-lookup"><span data-stu-id="e72ad-1365">Public-facing edge server connections use HTTP/2, but the reverse proxy connection to the [Kestrel server](xref:fundamentals/servers/kestrel) uses HTTP/1.1.</span></span>
* <span data-ttu-id="e72ad-1366">Cílová architektura: Nevztahuje se na mimoprocesová nasazení, protože připojení HTTP/2 je plně zpracováno službou IIS.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1366">Target framework: Not applicable to out-of-process deployments, since the HTTP/2 connection is handled entirely by IIS.</span></span>
* <span data-ttu-id="e72ad-1367">Připojení TLS 1.2 nebo novější</span><span class="sxs-lookup"><span data-stu-id="e72ad-1367">TLS 1.2 or later connection</span></span>

<span data-ttu-id="e72ad-1368">Pokud je navázáno připojení HTTP/2, `HTTP/1.1`protokol [HttpRequest.Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) hlásí .</span><span class="sxs-lookup"><span data-stu-id="e72ad-1368">If an HTTP/2 connection is established, [HttpRequest.Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) reports `HTTP/1.1`.</span></span>

<span data-ttu-id="e72ad-1369">Protokol HTTP/2 je ve výchozím nastavení povolen.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1369">HTTP/2 is enabled by default.</span></span> <span data-ttu-id="e72ad-1370">Připojení se vrátí na HTTP/1.1, pokud není navázáno připojení HTTP/2.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1370">Connections fall back to HTTP/1.1 if an HTTP/2 connection isn't established.</span></span> <span data-ttu-id="e72ad-1371">Další informace o konfiguraci protokolu HTTP/2 s nasazením služby IIS naleznete [v tématu HTTP/2 ve službě IIS](/iis/get-started/whats-new-in-iis-10/http2-on-iis).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1371">For more information on HTTP/2 configuration with IIS deployments, see [HTTP/2 on IIS](/iis/get-started/whats-new-in-iis-10/http2-on-iis).</span></span>

## <a name="cors-preflight-requests"></a><span data-ttu-id="e72ad-1372">Požadavky cors kontroly před výstupem</span><span class="sxs-lookup"><span data-stu-id="e72ad-1372">CORS preflight requests</span></span>

<span data-ttu-id="e72ad-1373">*Tato část se vztahuje pouze na ASP.NET základní aplikace, které se zaměřují na rozhraní .NET Framework.*</span><span class="sxs-lookup"><span data-stu-id="e72ad-1373">*This section only applies to ASP.NET Core apps that target the .NET Framework.*</span></span>

<span data-ttu-id="e72ad-1374">Pro aplikaci ASP.NET Core, která cílí na rozhraní .NET Framework, nejsou požadavky OPTIONS ve výchozím nastavení ve službách IIS předány do aplikace.</span><span class="sxs-lookup"><span data-stu-id="e72ad-1374">For an ASP.NET Core app that targets the .NET Framework, OPTIONS requests aren't passed to the app by default in IIS.</span></span> <span data-ttu-id="e72ad-1375">Informace o konfiguraci obslužných rutin služby IIS aplikace v *souboru web.config* tak, aby předávály požadavky OPTIONS, naleznete v tématu [Povolení požadavků napříč původy v ASP.NET webovém rozhraní API 2: Jak funguje cors](/aspnet/web-api/overview/security/enabling-cross-origin-requests-in-web-api#how-cors-works).</span><span class="sxs-lookup"><span data-stu-id="e72ad-1375">To learn how to configure the app's IIS handlers in *web.config* to pass OPTIONS requests, see [Enable cross-origin requests in ASP.NET Web API 2: How CORS Works](/aspnet/web-api/overview/security/enabling-cross-origin-requests-in-web-api#how-cors-works).</span></span>

## <a name="deployment-resources-for-iis-administrators"></a><span data-ttu-id="e72ad-1376">Prostředky nasazení pro správce služby IIS</span><span class="sxs-lookup"><span data-stu-id="e72ad-1376">Deployment resources for IIS administrators</span></span>

* [<span data-ttu-id="e72ad-1377">Dokumentace iis</span><span class="sxs-lookup"><span data-stu-id="e72ad-1377">IIS documentation</span></span>](/iis)
* [<span data-ttu-id="e72ad-1378">Začínáme se Správcem služby IIS ve službách IIS</span><span class="sxs-lookup"><span data-stu-id="e72ad-1378">Getting Started with the IIS Manager in IIS</span></span>](/iis/get-started/getting-started-with-iis/getting-started-with-the-iis-manager-in-iis-7-and-iis-8)
* [<span data-ttu-id="e72ad-1379">Nasazení aplikace .NET Core</span><span class="sxs-lookup"><span data-stu-id="e72ad-1379">.NET Core application deployment</span></span>](/dotnet/core/deploying/)
* <xref:host-and-deploy/aspnet-core-module>
* <xref:host-and-deploy/directory-structure>
* <xref:host-and-deploy/iis/modules>
* <xref:test/troubleshoot-azure-iis>
* <xref:host-and-deploy/azure-iis-errors-reference>

## <a name="additional-resources"></a><span data-ttu-id="e72ad-1380">Další zdroje</span><span class="sxs-lookup"><span data-stu-id="e72ad-1380">Additional resources</span></span>

* <xref:test/troubleshoot>
* <xref:index>
* [<span data-ttu-id="e72ad-1381">Oficiální web služby Microsoft IIS</span><span class="sxs-lookup"><span data-stu-id="e72ad-1381">The Official Microsoft IIS Site</span></span>](https://www.iis.net/)
* [<span data-ttu-id="e72ad-1382">Knihovna technického obsahu systému Windows Server</span><span class="sxs-lookup"><span data-stu-id="e72ad-1382">Windows Server technical content library</span></span>](/windows-server/windows-server)
* [<span data-ttu-id="e72ad-1383">HTTP/2 ve službě IIS</span><span class="sxs-lookup"><span data-stu-id="e72ad-1383">HTTP/2 on IIS</span></span>](/iis/get-started/whats-new-in-iis-10/http2-on-iis)
* <xref:host-and-deploy/iis/transform-webconfig>

::: moniker-end
