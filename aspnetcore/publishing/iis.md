---
title: "Jádro ASP.NET hostitele v systému Windows pomocí služby IIS"
author: guardrex
description: "Konfigurace Windows serveru Internetové informační služby (IIS) a nasazení aplikací ASP.NET Core."
keywords: "Nasazení základní technologie ASP.NET, Internetové informační služby, služby iis, windows server, hostování bundle,asp.net základní modul, webové"
ms.author: riande
manager: wpickett
ms.date: 03/13/2017
ms.topic: article
ms.assetid: a4449ad3-5bad-410c-afa7-dc32d832b552
ms.technology: aspnet
ms.prod: asp.net-core
uid: publishing/iis
ms.openlocfilehash: 3dd2a744d2272e7ce01fbfed218d70a83cea46d1
ms.sourcegitcommit: 019e5a0342fd49a94056d14fc7a1a1d0f81d2a39
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/22/2017
---
# <a name="host-aspnet-core-on-windows-with-iis"></a><span data-ttu-id="5720f-104">Jádro ASP.NET hostitele v systému Windows pomocí služby IIS</span><span class="sxs-lookup"><span data-stu-id="5720f-104">Host ASP.NET Core on Windows with IIS</span></span>

<span data-ttu-id="5720f-105">Podle [Luke Latham](https://github.com/guardrex) a [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="5720f-105">By [Luke Latham](https://github.com/guardrex) and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

## <a name="supported-operating-systems"></a><span data-ttu-id="5720f-106">Podporované operační systémy</span><span class="sxs-lookup"><span data-stu-id="5720f-106">Supported operating systems</span></span>

<span data-ttu-id="5720f-107">Podporovány jsou následující operační systémy:</span><span class="sxs-lookup"><span data-stu-id="5720f-107">The following operating systems are supported:</span></span>

* <span data-ttu-id="5720f-108">Windows 7 a novější</span><span class="sxs-lookup"><span data-stu-id="5720f-108">Windows 7 and newer</span></span>
* <span data-ttu-id="5720f-109">Windows Server 2008 R2 a novějších &#8224;</span><span class="sxs-lookup"><span data-stu-id="5720f-109">Windows Server 2008 R2 and newer&#8224;</span></span>

<span data-ttu-id="5720f-110">&#8224; Koncepčně, konfigurace služby IIS, které jsou popsané v tomto dokumentu platí také pro hostování aplikací ASP.NET Core na Nano Server IIS, ale odkazovat na [ASP.NET Core pomocí služby IIS na serveru Nano](xref:tutorials/nano-server) konkrétní pokyny.</span><span class="sxs-lookup"><span data-stu-id="5720f-110">&#8224;Conceptually, the IIS configuration described in this document also applies to hosting ASP.NET Core applications on Nano Server IIS, but refer to [ASP.NET Core with IIS on Nano Server](xref:tutorials/nano-server) for specific instructions.</span></span>

<span data-ttu-id="5720f-111">[Ovladač HTTP.sys serveru](xref:fundamentals/servers/httpsys) (dříve se označovaly jako [WebListener](xref:fundamentals/servers/weblistener)) nebude fungovat v konfiguraci reverznímu proxy serveru se službou IIS.</span><span class="sxs-lookup"><span data-stu-id="5720f-111">[HTTP.sys server](xref:fundamentals/servers/httpsys) (formerly called [WebListener](xref:fundamentals/servers/weblistener)) won't work in a reverse-proxy configuration with IIS.</span></span> <span data-ttu-id="5720f-112">Je nutné použít [Kestrel server](xref:fundamentals/servers/kestrel).</span><span class="sxs-lookup"><span data-stu-id="5720f-112">You must use the [Kestrel server](xref:fundamentals/servers/kestrel).</span></span>

## <a name="iis-configuration"></a><span data-ttu-id="5720f-113">Konfigurace služby IIS</span><span class="sxs-lookup"><span data-stu-id="5720f-113">IIS configuration</span></span>

<span data-ttu-id="5720f-114">Povolit **webového serveru (IIS)** role a vytvořit služby rolí.</span><span class="sxs-lookup"><span data-stu-id="5720f-114">Enable the **Web Server (IIS)** role and establish role services.</span></span>

### <a name="windows-desktop-operating-systems"></a><span data-ttu-id="5720f-115">Operační systémy Windows</span><span class="sxs-lookup"><span data-stu-id="5720f-115">Windows desktop operating systems</span></span>

<span data-ttu-id="5720f-116">Přejděte na **ovládací panely** > **programy** > **programy a funkce** > **zapnout Windows funkce na nebo vypnout** (levé straně obrazovky).</span><span class="sxs-lookup"><span data-stu-id="5720f-116">Navigate to **Control Panel** > **Programs** > **Programs and Features** > **Turn Windows features on or off** (left side of the screen).</span></span> <span data-ttu-id="5720f-117">Otevřete skupinu, pro **Internetová informační služba** a **nástroje webové správy**.</span><span class="sxs-lookup"><span data-stu-id="5720f-117">Open the group for **Internet Information Services** and **Web Management Tools**.</span></span> <span data-ttu-id="5720f-118">Zaškrtněte políčko pro **konzoly pro správu služby IIS**.</span><span class="sxs-lookup"><span data-stu-id="5720f-118">Check the box for **IIS Management Console**.</span></span> <span data-ttu-id="5720f-119">Zaškrtněte políčko pro **webové služby**.</span><span class="sxs-lookup"><span data-stu-id="5720f-119">Check the box for **World Wide Web Services**.</span></span> <span data-ttu-id="5720f-120">Přijměte výchozí funkce pro **webové služby** nebo přizpůsobit funkce služby IIS tak, aby vyhovovala vašim potřebám.</span><span class="sxs-lookup"><span data-stu-id="5720f-120">Accept the default features for **World Wide Web Services** or customize the IIS features to suit your needs.</span></span>

![Konzola pro správu služby IIS a webové služby jsou vybrány v funkce systému Windows.](iis/_static/windows-features-win10.png)

### <a name="windows-server-operating-systems"></a><span data-ttu-id="5720f-122">Operační systémy Windows Server</span><span class="sxs-lookup"><span data-stu-id="5720f-122">Windows Server operating systems</span></span>

<span data-ttu-id="5720f-123">Serverové operační systémy, používat **přidat role a funkce** Průvodce prostřednictvím **spravovat** nabídky nebo na odkaz v **správce serveru**.</span><span class="sxs-lookup"><span data-stu-id="5720f-123">For server operating systems, use the **Add Roles and Features** wizard via the **Manage** menu or the link in **Server Manager**.</span></span> <span data-ttu-id="5720f-124">Na **role serveru** kroku, zaškrtněte políčko pro **webového serveru (IIS)**.</span><span class="sxs-lookup"><span data-stu-id="5720f-124">On the **Server Roles** step, check the box for **Web Server (IIS)**.</span></span>

![Role webového serveru IIS je vybrali v kroku rolí vyberte server.](iis/_static/server-roles-ws2016.png)

<span data-ttu-id="5720f-126">Na **služby rolí** kroku, vyberte služby rolí služby IIS požadavky nebo přijměte výchozí nastavení role služeb zadaný.</span><span class="sxs-lookup"><span data-stu-id="5720f-126">On the **Role services** step, select the IIS role services you desire or accept the default role services provided.</span></span>

![Výchozí služby rolí jsou vybrané v kroku vyberte role služeb.](iis/_static/role-services-ws2016.png)

<span data-ttu-id="5720f-128">Pokračujte **potvrzení** krok instalace role Webový server a služby.</span><span class="sxs-lookup"><span data-stu-id="5720f-128">Proceed through the **Confirmation** step to install the web server role and services.</span></span> <span data-ttu-id="5720f-129">Restartování serveru nebo IIS není povinné po instalaci role webového serveru (IIS).</span><span class="sxs-lookup"><span data-stu-id="5720f-129">A server/IIS restart isn't required after installing the Web Server (IIS) role.</span></span>

## <a name="install-the-net-core-windows-server-hosting-bundle"></a><span data-ttu-id="5720f-130">Instalaci sady hostování v rozhraní .NET Core systému Windows Server</span><span class="sxs-lookup"><span data-stu-id="5720f-130">Install the .NET Core Windows Server Hosting bundle</span></span>

1. <span data-ttu-id="5720f-131">Nainstalujte [.NET jádra Windows serveru, který hostuje sady](https://aka.ms/dotnetcore-2-windowshosting) v hostitelském systému.</span><span class="sxs-lookup"><span data-stu-id="5720f-131">Install the [.NET Core Windows Server Hosting bundle](https://aka.ms/dotnetcore-2-windowshosting) on the hosting system.</span></span> <span data-ttu-id="5720f-132">Sada nainstaluje rozhraní .NET Core Runtime, základní knihovny .NET a [ASP.NET Core modulu](xref:fundamentals/servers/aspnet-core-module).</span><span class="sxs-lookup"><span data-stu-id="5720f-132">The bundle installs the .NET Core Runtime, .NET Core Library, and the [ASP.NET Core Module](xref:fundamentals/servers/aspnet-core-module).</span></span> <span data-ttu-id="5720f-133">Modul vytvoří proxy zpětného mezi službou IIS a Kestrel server.</span><span class="sxs-lookup"><span data-stu-id="5720f-133">The module creates the reverse-proxy between IIS and the Kestrel server.</span></span> <span data-ttu-id="5720f-134">Pokud systém nemá připojení k Internetu, získejte a nainstalujte [Microsoft Visual C++ 2015 Redistributable](https://www.microsoft.com/download/details.aspx?id=53840) před instalací sady hostování v rozhraní .NET Core systému Windows Server.</span><span class="sxs-lookup"><span data-stu-id="5720f-134">If the system doesn't have an Internet connection, obtain and install the [Microsoft Visual C++ 2015 Redistributable](https://www.microsoft.com/download/details.aspx?id=53840) before installing the .NET Core Windows Server Hosting bundle.</span></span>

2. <span data-ttu-id="5720f-135">Restartování systému nebo spuštění **net stop byl /y** následuje **net start w3svc** z příkazového řádku a pokračovat tam ke změně systému CESTU.</span><span class="sxs-lookup"><span data-stu-id="5720f-135">Restart the system or execute **net stop was /y** followed by **net start w3svc** from a command prompt to pick up a change to the system PATH.</span></span>

> [!NOTE]
> <span data-ttu-id="5720f-136">Pokud používáte sdílenou konfiguraci IIS, najdete v části [ASP.NET Core modul s sdílenou konfiguraci IIS](xref:hosting/aspnet-core-module#aspnet-core-module-with-an-iis-shared-configuration).</span><span class="sxs-lookup"><span data-stu-id="5720f-136">If you use an IIS Shared Configuration, see [ASP.NET Core Module with IIS Shared Configuration](xref:hosting/aspnet-core-module#aspnet-core-module-with-an-iis-shared-configuration).</span></span>

## <a name="install-web-deploy-when-publishing-with-visual-studio"></a><span data-ttu-id="5720f-137">Nainstaluje Web Deploy při publikování pomocí sady Visual Studio</span><span class="sxs-lookup"><span data-stu-id="5720f-137">Install Web Deploy when publishing with Visual Studio</span></span>

<span data-ttu-id="5720f-138">Pokud chcete provést nasazení aplikací s [Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy) v [Visual Studio](https://www.visualstudio.com/vs/), nainstalujte nejnovější verzi nástroje nasazení webu v hostitelském systému.</span><span class="sxs-lookup"><span data-stu-id="5720f-138">If you intend to deploy your applications with [Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy) in [Visual Studio](https://www.visualstudio.com/vs/), install the latest version of Web Deploy on the hosting system.</span></span> <span data-ttu-id="5720f-139">Chcete-li nainstalovat nasazení webu, můžete použít [instalačního programu webové platformy (WebPI)](https://www.microsoft.com/web/downloads/platform.aspx) nebo získat instalační program přímo z [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=43717).</span><span class="sxs-lookup"><span data-stu-id="5720f-139">To install Web Deploy, you can use the [Web Platform Installer (WebPI)](https://www.microsoft.com/web/downloads/platform.aspx) or obtain an installer directly from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=43717).</span></span> <span data-ttu-id="5720f-140">Upřednostňuje se má používat službu WebPI.</span><span class="sxs-lookup"><span data-stu-id="5720f-140">The preferred method is to use WebPI.</span></span> <span data-ttu-id="5720f-141">WebPI nabízí samostatná instalace a konfigurace pro poskytovatele hostingových služeb.</span><span class="sxs-lookup"><span data-stu-id="5720f-141">WebPI offers a standalone setup and a configuration for hosting providers.</span></span>

## <a name="application-configuration"></a><span data-ttu-id="5720f-142">Konfigurace aplikace</span><span class="sxs-lookup"><span data-stu-id="5720f-142">Application configuration</span></span>

### <a name="enabling-the-iisintegration-components"></a><span data-ttu-id="5720f-143">Povolení IISIntegration součástí</span><span class="sxs-lookup"><span data-stu-id="5720f-143">Enabling the IISIntegration components</span></span>

# <a name="aspnet-core-2xtabaspnetcore2x"></a>[<span data-ttu-id="5720f-144">ASP.NET základní 2.x</span><span class="sxs-lookup"><span data-stu-id="5720f-144">ASP.NET Core 2.x</span></span>](#tab/aspnetcore2x)

<span data-ttu-id="5720f-145">Typické *Program.cs* volání [CreateDefaultBuilder](/dotnet/api/microsoft.aspnetcore.webhost.createdefaultbuilder) zahájíte nastavení hostitele.</span><span class="sxs-lookup"><span data-stu-id="5720f-145">A typical *Program.cs* calls [CreateDefaultBuilder](/dotnet/api/microsoft.aspnetcore.webhost.createdefaultbuilder) to begin setting up a host.</span></span> <span data-ttu-id="5720f-146">`CreateDefaultBuilder`nakonfiguruje [Kestrel](xref:fundamentals/servers/kestrel) jako integrace webového serveru a umožňuje služby IIS tak, že nakonfigurujete základní cesta a port pro [ASP.NET Core modulu](xref:fundamentals/servers/aspnet-core-module):</span><span class="sxs-lookup"><span data-stu-id="5720f-146">`CreateDefaultBuilder` configures [Kestrel](xref:fundamentals/servers/kestrel) as the web server and enables IIS integration by configuring the base path and port for the [ASP.NET Core Module](xref:fundamentals/servers/aspnet-core-module):</span></span>

```csharp
public static IWebHost BuildWebHost(string[] args) =>
    WebHost.CreateDefaultBuilder(args)
        ...
```

# <a name="aspnet-core-1xtabaspnetcore1x"></a>[<span data-ttu-id="5720f-147">ASP.NET základní 1.x</span><span class="sxs-lookup"><span data-stu-id="5720f-147">ASP.NET Core 1.x</span></span>](#tab/aspnetcore1x)

<span data-ttu-id="5720f-148">Zahrnout závislost na [Microsoft.AspNetCore.Server.IISIntegration](https://www.nuget.org/packages/Microsoft.AspNetCore.Server.IISIntegration/) balíček ve vaší aplikaci závislosti.</span><span class="sxs-lookup"><span data-stu-id="5720f-148">Include a dependency on the [Microsoft.AspNetCore.Server.IISIntegration](https://www.nuget.org/packages/Microsoft.AspNetCore.Server.IISIntegration/) package in your app dependencies.</span></span> <span data-ttu-id="5720f-149">Integrace služby IIS middleware začlenit do aplikace tak, že přidáte *UseIISIntegration* metody rozšíření pro *WebHostBuilder*:</span><span class="sxs-lookup"><span data-stu-id="5720f-149">Incorporate IIS Integration middleware into the app by adding the *UseIISIntegration* extension method to *WebHostBuilder*:</span></span>

```csharp
var host = new WebHostBuilder()
    .UseKestrel()
    .UseIISIntegration()
    ...
```

<span data-ttu-id="5720f-150">Obě `UseKestrel` a `UseIISIntegration` jsou povinné.</span><span class="sxs-lookup"><span data-stu-id="5720f-150">Both `UseKestrel` and `UseIISIntegration` are required.</span></span> <span data-ttu-id="5720f-151">Volání kódu *UseIISIntegration* nemá vliv přenositelnost kódu.</span><span class="sxs-lookup"><span data-stu-id="5720f-151">Code calling *UseIISIntegration* doesn't affect code portability.</span></span> <span data-ttu-id="5720f-152">Pokud aplikace není spuštěna za služby IIS (například spuštění aplikace přímo na Kestrel), `UseIISIntegration` ops ne.</span><span class="sxs-lookup"><span data-stu-id="5720f-152">If the app isn't run behind IIS (for example, the app is run directly on Kestrel), `UseIISIntegration` no-ops.</span></span>

---

<span data-ttu-id="5720f-153">Další informace o hostování najdete v tématu [hostování v ASP.NET Core](xref:fundamentals/hosting).</span><span class="sxs-lookup"><span data-stu-id="5720f-153">For more information on hosting, see [Hosting in ASP.NET Core](xref:fundamentals/hosting).</span></span>

### <a name="iis-options"></a><span data-ttu-id="5720f-154">Možnosti služby IIS</span><span class="sxs-lookup"><span data-stu-id="5720f-154">IIS options</span></span>

<span data-ttu-id="5720f-155">Ke konfiguraci *IISIntegration* služby možnosti, patří konfigurace služby pro *IISOptions* v *ConfigureServices*:</span><span class="sxs-lookup"><span data-stu-id="5720f-155">To configure *IISIntegration* service options, include a service configuration for *IISOptions* in *ConfigureServices*:</span></span>

```csharp
services.Configure<IISOptions>(options => 
{
    ...
});
```

| <span data-ttu-id="5720f-156">Možnost</span><span class="sxs-lookup"><span data-stu-id="5720f-156">Option</span></span>                         | <span data-ttu-id="5720f-157">Výchozí</span><span class="sxs-lookup"><span data-stu-id="5720f-157">Default</span></span> | <span data-ttu-id="5720f-158">Nastavení</span><span class="sxs-lookup"><span data-stu-id="5720f-158">Setting</span></span> |
| ------------------------------ | ------- | ------- |
| `AutomaticAuthentication`      | `true`  | <span data-ttu-id="5720f-159">Pokud `true`, nastaví middleware ověřování `HttpContext.User` a reaguje na obecné problémy.</span><span class="sxs-lookup"><span data-stu-id="5720f-159">If `true`, the authentication middleware sets the `HttpContext.User` and responds to generic challenges.</span></span> <span data-ttu-id="5720f-160">Pokud `false`, middleware ověřování se poskytuje pouze identity (`HttpContext.User`) a reaguje na výzvy explicitně žádost `AuthenticationScheme`.</span><span class="sxs-lookup"><span data-stu-id="5720f-160">If `false`, the authentication middleware only provides an identity (`HttpContext.User`) and responds to challenges when explicitly requested by the `AuthenticationScheme`.</span></span> <span data-ttu-id="5720f-161">Ověřování systému Windows musí být povolené ve službě IIS pro `AutomaticAuthentication` funkce.</span><span class="sxs-lookup"><span data-stu-id="5720f-161">Windows Authentication must be enabled in IIS for `AutomaticAuthentication` to function.</span></span> |
| `AuthenticationDisplayName`    | `null`  | <span data-ttu-id="5720f-162">Nastaví zobrazovaný název zobrazovat uživatelům na přihlašovací stránky.</span><span class="sxs-lookup"><span data-stu-id="5720f-162">Sets the display name shown to users on login pages.</span></span> |
| `ForwardClientCertificate`     | `true`  | <span data-ttu-id="5720f-163">Pokud `true` a `MS-ASPNETCORE-CLIENTCERT` nachází hlavička požadavku `HttpContext.Connection.ClientCertificate` se naplní.</span><span class="sxs-lookup"><span data-stu-id="5720f-163">If `true` and the `MS-ASPNETCORE-CLIENTCERT` request header is present, the `HttpContext.Connection.ClientCertificate` is populated.</span></span> |

### <a name="webconfig"></a><span data-ttu-id="5720f-164">soubor Web.config</span><span class="sxs-lookup"><span data-stu-id="5720f-164">web.config</span></span>

<span data-ttu-id="5720f-165">*Web.config* souboru především konfiguruje modul základní technologie ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="5720f-165">The *web.config* file primarily configures the ASP.NET Core Module.</span></span> <span data-ttu-id="5720f-166">Volitelně ji mohou zadat další nastavení konfigurace služby IIS.</span><span class="sxs-lookup"><span data-stu-id="5720f-166">It may optionally provide additional IIS configuration settings.</span></span> <span data-ttu-id="5720f-167">Vytváření, transformace a publikování *web.config* zpracováván pomocí .NET SDK webového jádra (`Microsoft.NET.Sdk.Web`).</span><span class="sxs-lookup"><span data-stu-id="5720f-167">Creating, transforming, and publishing *web.config* is handled by the .NET Core Web SDK (`Microsoft.NET.Sdk.Web`).</span></span> <span data-ttu-id="5720f-168">Sada SDK je nastavena v horní části souboru projektu (*.csproj*), `<Project Sdk="Microsoft.NET.Sdk.Web">`.</span><span class="sxs-lookup"><span data-stu-id="5720f-168">The SDK is set  at the top of the project file (*.csproj*), `<Project Sdk="Microsoft.NET.Sdk.Web">`.</span></span> <span data-ttu-id="5720f-169">Zabránit transformace sady SDK *web.config* soubor, přidejte  **\<IsTransformWebConfigDisabled >** vlastnost k souboru projektu s nastavením `true`:</span><span class="sxs-lookup"><span data-stu-id="5720f-169">To prevent the SDK from transforming the *web.config* file, add the **\<IsTransformWebConfigDisabled>** property to the project file with a setting of `true`:</span></span>

```xml
<PropertyGroup>
  <IsTransformWebConfigDisabled>true</IsTransformWebConfigDisabled>
</PropertyGroup>
```

<span data-ttu-id="5720f-170">Pokud nemáte *web.config* v projektu při publikování s *dotnet publikování* nebo pomocí sady Visual Studio publikovat, soubor se vytvoří pro vás v [publikovaná výstup](xref:hosting/directory-structure).</span><span class="sxs-lookup"><span data-stu-id="5720f-170">If you don't have a *web.config* file in the project when you publish with *dotnet publish* or with Visual Studio publish, the file is created for you in [published output](xref:hosting/directory-structure).</span></span> <span data-ttu-id="5720f-171">Pokud máte *web.config* soubor ve vašem projektu transformována s správný *processPath* a *argumenty* nakonfigurovat [ASP.NET Core modulu ](xref:fundamentals/servers/aspnet-core-module) a přesunut do publikované výstup.</span><span class="sxs-lookup"><span data-stu-id="5720f-171">If you have a *web.config* file in your project, it's transformed with the correct *processPath* and *arguments* to configure the [ASP.NET Core Module](xref:fundamentals/servers/aspnet-core-module) and moved to published output.</span></span> <span data-ttu-id="5720f-172">Transformace není touch nastavení konfigurace služby IIS, které jste zadali v souboru.</span><span class="sxs-lookup"><span data-stu-id="5720f-172">The transformation doesn't touch IIS configuration settings that you've included in the file.</span></span>

## <a name="create-the-iis-website"></a><span data-ttu-id="5720f-173">Vytvoření webu služby IIS</span><span class="sxs-lookup"><span data-stu-id="5720f-173">Create the IIS Website</span></span>

1. <span data-ttu-id="5720f-174">V cílovém systému služby IIS, vytvořte složku tak, aby obsahovala aplikace publikované složek a souborů, které jsou popsány v [adresářovou strukturu](xref:hosting/directory-structure).</span><span class="sxs-lookup"><span data-stu-id="5720f-174">On the target IIS system, create a folder to contain the app's published folders and files, which are described in [Directory Structure](xref:hosting/directory-structure).</span></span>

2. <span data-ttu-id="5720f-175">Ve složce, vytvoření *protokoly* složku pro uložení protokoly stdout, pokud je povoleno protokolování stdout.</span><span class="sxs-lookup"><span data-stu-id="5720f-175">Within the folder, create a *logs* folder to hold stdout logs when stdout logging is enabled.</span></span> <span data-ttu-id="5720f-176">Pokud je aplikace nasazena pomocí *protokoly* složku v datové části, tento krok přeskočit.</span><span class="sxs-lookup"><span data-stu-id="5720f-176">If the app is deployed with a *logs* folder in the payload, skip this step.</span></span> <span data-ttu-id="5720f-177">Pokyny pro provádění MSBuild vytvořit *protokoly* složky, najdete v článku [adresářovou strukturu](xref:hosting/directory-structure) tématu.</span><span class="sxs-lookup"><span data-stu-id="5720f-177">For instructions on making MSBuild create the *logs* folder, see the [Directory structure](xref:hosting/directory-structure) topic.</span></span>

3. <span data-ttu-id="5720f-178">V **Správce služby IIS**, vytvoření nového webu.</span><span class="sxs-lookup"><span data-stu-id="5720f-178">In **IIS Manager**, create a new website.</span></span> <span data-ttu-id="5720f-179">Zadejte **název lokality** a nastavte **fyzická cesta** do složky pro nasazení aplikace, kterou jste vytvořili.</span><span class="sxs-lookup"><span data-stu-id="5720f-179">Provide a **Site name** and set the **Physical path** to the app's deployment folder that you created.</span></span> <span data-ttu-id="5720f-180">Zadejte **vazby** konfigurace a vytvořit web.</span><span class="sxs-lookup"><span data-stu-id="5720f-180">Provide the **Binding** configuration and create the website.</span></span>

4. <span data-ttu-id="5720f-181">Nastavte fond aplikací **bez spravovaného kódu**.</span><span class="sxs-lookup"><span data-stu-id="5720f-181">Set the application pool to **No Managed Code**.</span></span> <span data-ttu-id="5720f-182">ASP.NET Core spouští v samostatném procesu a spravuje modulu runtime.</span><span class="sxs-lookup"><span data-stu-id="5720f-182">ASP.NET Core runs in a separate process and manages the runtime.</span></span>

5. <span data-ttu-id="5720f-183">Otevřete **přidat web** okno.</span><span class="sxs-lookup"><span data-stu-id="5720f-183">Open the **Add Website** window.</span></span>

   ![Klikněte na tlačítko Přidat web v kontextové nabídce lokalit.](iis/_static/add-website-context-menu-ws2016.png)

6. <span data-ttu-id="5720f-185">Konfigurace webu.</span><span class="sxs-lookup"><span data-stu-id="5720f-185">Configure the website.</span></span>

   ![Zadejte název lokality, fyzickou cestu a název hostitele v kroku přidat web.](iis/_static/add-website-ws2016.png)

7. <span data-ttu-id="5720f-187">V **fondy aplikací** panelech, otevřete **upravit fond aplikací** okno kliknutím pravým tlačítkem myši na fond aplikací webu a výběrem **základní nastavení...**  z místní nabídky.</span><span class="sxs-lookup"><span data-stu-id="5720f-187">In the **Application Pools** panel, open the **Edit Application Pool** window by right-clicking on the website's app pool and selecting **Basic Settings...** from the popup menu.</span></span>

   ![Vyberte základní nastavení v kontextové nabídce fondu aplikací.](iis/_static/apppools-basic-settings-ws2016.png)

8. <span data-ttu-id="5720f-189">Nastavte **verze modulu .NET CLR** k **bez spravovaného kódu**.</span><span class="sxs-lookup"><span data-stu-id="5720f-189">Set the **.NET CLR version** to **No Managed Code**.</span></span>

   ![Nastavit bez spravovaného kódu pro verze .NET CLR.](iis/_static/edit-apppool-ws2016.png)
     
    <span data-ttu-id="5720f-191">Poznámka: Nastavení **verze modulu .NET CLR** k **bez spravovaného kódu** je volitelný.</span><span class="sxs-lookup"><span data-stu-id="5720f-191">Note: Setting the **.NET CLR version** to **No Managed Code** is optional.</span></span> <span data-ttu-id="5720f-192">ASP.NET Core není spoléhají na načítání plochy CLR.</span><span class="sxs-lookup"><span data-stu-id="5720f-192">ASP.NET Core doesn't rely on loading the desktop CLR.</span></span>

9. <span data-ttu-id="5720f-193">Potvrďte, že identita procesu modelu má příslušná oprávnění.</span><span class="sxs-lookup"><span data-stu-id="5720f-193">Confirm the process model identity has the proper permissions.</span></span>

   <span data-ttu-id="5720f-194">Pokud změníte výchozí identitu fondu aplikací (**Model procesu** > **Identity**) z **ApplicationPoolIdentity** na jinou identitu, ověřte, zda novou identitu má požadovaná oprávnění k přístupu aplikace složka, databáze a další požadované prostředky.</span><span class="sxs-lookup"><span data-stu-id="5720f-194">If you change the default identity of the app pool (**Process Model** > **Identity**) from **ApplicationPoolIdentity** to another identity, verify that the new identity has the required permissions to access the app's folder, database, and other required resources.</span></span>
   
## <a name="deploy-the-application"></a><span data-ttu-id="5720f-195">Nasazení aplikace</span><span class="sxs-lookup"><span data-stu-id="5720f-195">Deploy the application</span></span>
<span data-ttu-id="5720f-196">Nasaďte aplikaci do složky, kterou jste vytvořili v cílovém systému služby IIS.</span><span class="sxs-lookup"><span data-stu-id="5720f-196">Deploy the application to the folder you created on the target IIS system.</span></span> <span data-ttu-id="5720f-197">[Nasazení webové](/iis/publish/using-web-deploy/introduction-to-web-deploy) je doporučené mechanismus pro nasazení.</span><span class="sxs-lookup"><span data-stu-id="5720f-197">[Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy) is the recommended mechanism for deployment.</span></span> <span data-ttu-id="5720f-198">Alternativy k nasazení webu jsou uvedeny níže.</span><span class="sxs-lookup"><span data-stu-id="5720f-198">Alternatives to Web Deploy are listed below.</span></span>

<span data-ttu-id="5720f-199">Potvrďte, že není spuštěn publikované aplikace pro nasazení.</span><span class="sxs-lookup"><span data-stu-id="5720f-199">Confirm that the published app for deployment isn't running.</span></span> <span data-ttu-id="5720f-200">Soubory *publikování* složky jsou zamčené, když aplikace běží.</span><span class="sxs-lookup"><span data-stu-id="5720f-200">Files in the *publish* folder are locked when the app is running.</span></span> <span data-ttu-id="5720f-201">Nasazení nemůže proběhnout, protože uzamčen, že soubory nelze kopírovat.</span><span class="sxs-lookup"><span data-stu-id="5720f-201">Deployment can't occur because locked files can't be copied.</span></span>

### <a name="web-deploy-with-visual-studio"></a><span data-ttu-id="5720f-202">Nasazení webu pomocí sady Visual Studio</span><span class="sxs-lookup"><span data-stu-id="5720f-202">Web Deploy with Visual Studio</span></span>
<span data-ttu-id="5720f-203">V tématu [vytvoření profilů publikování pro Visual Studio a nástroje MSBuild, jak nasadit aplikace ASP.NET Core](xref:publishing/web-publishing-vs#publish-profiles) tématu se dozvíte, jak vytvořit profil publikování pro použití pomocí nástroje nasazení webu.</span><span class="sxs-lookup"><span data-stu-id="5720f-203">See [Create publish profiles for Visual Studio and MSBuild, to deploy ASP.NET Core apps](xref:publishing/web-publishing-vs#publish-profiles) topic to learn how to create a publish profile for use with Web Deploy.</span></span> <span data-ttu-id="5720f-204">Pokud poskytovatel hostitelských poskytuje profilu publikování nebo podpora pro vytváření jeden, stáhněte si svůj profil a importujte jej pomocí sady Visual Studio **publikovat** dialogové okno.</span><span class="sxs-lookup"><span data-stu-id="5720f-204">If your hosting provider supplies a Publish Profile or support for creating one, download their profile and import it using the Visual Studio **Publish** dialog.</span></span>

![Dialogové okno stránky publikování](iis/_static/pub-dialog.png)

### <a name="web-deploy-outside-of-visual-studio"></a><span data-ttu-id="5720f-206">Nasazení webu mimo Visual Studio</span><span class="sxs-lookup"><span data-stu-id="5720f-206">Web Deploy outside of Visual Studio</span></span>
<span data-ttu-id="5720f-207">Můžete také použít [Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy) mimo sadu Visual Studio pomocí příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="5720f-207">You can also use [Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy) outside of Visual Studio from the command line.</span></span> <span data-ttu-id="5720f-208">Další informace najdete v tématu [nástroj pro nasazení webu](/iis/publish/using-web-deploy/use-the-web-deployment-tool).</span><span class="sxs-lookup"><span data-stu-id="5720f-208">For more information, see [Web Deployment Tool](/iis/publish/using-web-deploy/use-the-web-deployment-tool).</span></span>

### <a name="alternatives-to-web-deploy"></a><span data-ttu-id="5720f-209">Alternativy k webového nasazení</span><span class="sxs-lookup"><span data-stu-id="5720f-209">Alternatives to Web Deploy</span></span>
<span data-ttu-id="5720f-210">Pokud jste si jej nepřejete použít, Web Deploy nebo nejsou pomocí sady Visual Studio, může používat kterýkoli z několika metod přesunout aplikaci k hostování systému, třeba Xcopy, Robocopy nebo prostředí PowerShell.</span><span class="sxs-lookup"><span data-stu-id="5720f-210">If you don't wish to use Web Deploy or are not using Visual Studio, you may use any of several methods to move the application to the hosting system, such as Xcopy, Robocopy, or PowerShell.</span></span> <span data-ttu-id="5720f-211">Visual Studio uživatelé mohou využít [publikování ukázky](https://github.com/aspnet/vsweb-publish/blob/master/samples/samples.md).</span><span class="sxs-lookup"><span data-stu-id="5720f-211">Visual Studio users may use the [Publish Samples](https://github.com/aspnet/vsweb-publish/blob/master/samples/samples.md).</span></span>

## <a name="browse-the-website"></a><span data-ttu-id="5720f-212">Přejděte na web</span><span class="sxs-lookup"><span data-stu-id="5720f-212">Browse the website</span></span>
![V prohlížeči Microsoft Edge načetl úvodní stránce služby IIS.](iis/_static/browsewebsite.png)
   
> [!WARNING]
> <span data-ttu-id="5720f-214">Aplikace .NET core hostují přes proxy zpětného mezi službou IIS a Kestrel server.</span><span class="sxs-lookup"><span data-stu-id="5720f-214">.NET Core apps are hosted via a reverse-proxy between IIS and the Kestrel server.</span></span> <span data-ttu-id="5720f-215">Chcete-li vytvořit zpětného proxy *web.config* souboru musí být přítomné v obsahu kořenové cestě (obvykle aplikace základní cesta) nasazené aplikace, která je fyzická cesta web zadat do služby IIS.</span><span class="sxs-lookup"><span data-stu-id="5720f-215">In order to create the reverse-proxy, the *web.config* file must be present at the content root path (typically the app base path) of the deployed application, which is the website physical path provided to IIS.</span></span> <span data-ttu-id="5720f-216">Citlivé soubory existují na fyzickou cestu aplikace, včetně podsložek, jako například *my_application.runtimeconfig.json*, *my_application.xml* (komentáře dokumentace XML), a *my_ Application.deps.JSON*.</span><span class="sxs-lookup"><span data-stu-id="5720f-216">Sensitive files exist on the app's physical path, including subfolders, such as *my_application.runtimeconfig.json*, *my_application.xml* (XML Documentation comments), and *my_application.deps.json*.</span></span> <span data-ttu-id="5720f-217">*Web.config* soubor je vyžadován pro vytvoření reverzní proxy server na Kestrel, což zabrání obsluhující těchto a dalších citlivých souborů služby IIS.</span><span class="sxs-lookup"><span data-stu-id="5720f-217">The *web.config* file is required to create the reverse proxy to Kestrel, which prevents IIS from serving these and other sensitive files.</span></span> <span data-ttu-id="5720f-218">**Proto je důležité, který *web.config* soubor není ať už náhodně, přejmenovat nebo odebrat z nasazení.**</span><span class="sxs-lookup"><span data-stu-id="5720f-218">**Therefore, it's important that the *web.config* file isn't accidently renamed or removed from the deployment.**</span></span>

## <a name="data-protection"></a><span data-ttu-id="5720f-219">Ochrana dat</span><span class="sxs-lookup"><span data-stu-id="5720f-219">Data protection</span></span>

<span data-ttu-id="5720f-220">Aplikace ASP.NET Core ukládá Správce klíčů v paměti za následujících podmínek:</span><span class="sxs-lookup"><span data-stu-id="5720f-220">An ASP.NET Core application stores the keyring in memory under the following conditions:</span></span>

* <span data-ttu-id="5720f-221">Web je hostován za služby IIS.</span><span class="sxs-lookup"><span data-stu-id="5720f-221">A website is hosted behind IIS.</span></span>
* <span data-ttu-id="5720f-222">Zásobník ochrany dat nebyl nakonfigurován k uložení Správce klíčů v trvalém úložišti.</span><span class="sxs-lookup"><span data-stu-id="5720f-222">The Data Protection stack hasn't been configured to store the keyring in a persistent store.</span></span>

<span data-ttu-id="5720f-223">Pokud se Správce klíčů je uložené v paměti po restartování aplikace:</span><span class="sxs-lookup"><span data-stu-id="5720f-223">If the keyring is stored in memory when the app restarts:</span></span>

* <span data-ttu-id="5720f-224">Všechny forms ověřovací tokeny jsou zneplatněny.</span><span class="sxs-lookup"><span data-stu-id="5720f-224">All forms authentication tokens are invalidated.</span></span> 
* <span data-ttu-id="5720f-225">Uživatelé jsou požadovány k přihlášení na jejich další požadavek znovu.</span><span class="sxs-lookup"><span data-stu-id="5720f-225">Users are required to login again on their next request.</span></span> 
* <span data-ttu-id="5720f-226">Data, která můžete chránit pomocí Správce klíčů již nebudou chráněny.</span><span class="sxs-lookup"><span data-stu-id="5720f-226">Any data you protected with the keyring are no longer protected.</span></span>

> [!WARNING]
> <span data-ttu-id="5720f-227">Ochrana dat je využíván několika middlewares ASP.NET, včetně těch, které používané v ověřování.</span><span class="sxs-lookup"><span data-stu-id="5720f-227">Data Protection is used by several ASP.NET middlewares, including those used in authentication.</span></span> <span data-ttu-id="5720f-228">I v případě, že nemůžete volat rozhraní API ochrany dat z vlastního kódu, měli byste nakonfigurovat ochranu dat pomocí skriptu pro nasazení nebo v kódu.</span><span class="sxs-lookup"><span data-stu-id="5720f-228">Even if you don't call Data Protection APIs from your own code, you should configure Data Protection with a deployment script or in your code.</span></span> <span data-ttu-id="5720f-229">Pokud nenakonfigurujete ochranu dat, ve výchozím nastavení klíče jsou uložené v paměti a zahozené během restartování aplikace.</span><span class="sxs-lookup"><span data-stu-id="5720f-229">If you don't configure data protection, by default the keys are held in memory and discarded when your app restarts.</span></span> <span data-ttu-id="5720f-230">Restartování zruší se platnost souborů cookie zapsaných správcem middleware ověřování souborů cookie a uživatelé musí přihlásit znovu.</span><span class="sxs-lookup"><span data-stu-id="5720f-230">Restarting invalidates cookies written by the cookie authentication middleware and users must login again.</span></span>

<span data-ttu-id="5720f-231">Ke konfiguraci ochrany dat v rámci služby IIS, musíte použít jeden z následujících postupů:</span><span class="sxs-lookup"><span data-stu-id="5720f-231">To configure Data Protection under IIS, you must use one of the following approaches:</span></span>

* <span data-ttu-id="5720f-232">Spuštění [skript prostředí powershell](https://github.com/aspnet/DataProtection/blob/dev/Provision-AutoGenKeys.ps1) k vytvoření položky vhodný registru (například `.\Provision-AutoGenKeys.ps1 DefaultAppPool`).</span><span class="sxs-lookup"><span data-stu-id="5720f-232">Run a [powershell script](https://github.com/aspnet/DataProtection/blob/dev/Provision-AutoGenKeys.ps1) to create suitable registry entries (For example, `.\Provision-AutoGenKeys.ps1 DefaultAppPool`).</span></span> <span data-ttu-id="5720f-233">To ukládá klíče v registru, chráněné pomocí rozhraní DPAPI klíč celého systému.</span><span class="sxs-lookup"><span data-stu-id="5720f-233">This stores keys in the registry, protected using DPAPI with a machine-wide key.</span></span>
* <span data-ttu-id="5720f-234">Nakonfigurujte fond aplikací služby IIS načíst profil uživatele.</span><span class="sxs-lookup"><span data-stu-id="5720f-234">Configure the IIS Application Pool to load the user profile.</span></span> <span data-ttu-id="5720f-235">Toto nastavení je ve **Model procesu** oddílu pod **Upřesnit nastavení** pro fond aplikací.</span><span class="sxs-lookup"><span data-stu-id="5720f-235">This setting is in the **Process Model** section under the **Advanced Settings** for the application pool.</span></span> <span data-ttu-id="5720f-236">Nastavit **načíst profil uživatele** k `True`.</span><span class="sxs-lookup"><span data-stu-id="5720f-236">Set **Load User Profile** to `True`.</span></span> <span data-ttu-id="5720f-237">To ukládá klíče v adresáři profilu uživatele a chrání je pomocí rozhraní DPAPI klíčem specifické pro uživatelský účet použitý pro fond aplikací.</span><span class="sxs-lookup"><span data-stu-id="5720f-237">This stores keys under the user profile directory and protects them using DPAPI with a key specific to the user account used for the app pool.</span></span>
* <span data-ttu-id="5720f-238">Upravit kód aplikace a [pomocí systému souborů jako úložiště prstenec klíč](xref:security/data-protection/configuration/overview).</span><span class="sxs-lookup"><span data-stu-id="5720f-238">Adjust your app code to [use the file system as a key ring store](xref:security/data-protection/configuration/overview).</span></span> <span data-ttu-id="5720f-239">Použití na X509 certifikát k ochraně Správce klíčů a zda je certifikát důvěryhodný.</span><span class="sxs-lookup"><span data-stu-id="5720f-239">Use an X509 certificate to protect the keyring and ensure it's a trusted certificate.</span></span> <span data-ttu-id="5720f-240">Pokud je certifikát podepsaný sám sebou, je nutné umístit do úložiště důvěryhodných kořenových.</span><span class="sxs-lookup"><span data-stu-id="5720f-240">If it's a self signed certificate, you must place it in the Trusted Root store.</span></span>

<span data-ttu-id="5720f-241">Při použití IIS ve webové farmě:</span><span class="sxs-lookup"><span data-stu-id="5720f-241">When using IIS in a web farm:</span></span>

* <span data-ttu-id="5720f-242">Použijte sdílené složky, ke kterému mají přístup všechny počítače.</span><span class="sxs-lookup"><span data-stu-id="5720f-242">Use a file share that all machines can access.</span></span>
* <span data-ttu-id="5720f-243">Nasazení X509 certifikát pro každý počítač.</span><span class="sxs-lookup"><span data-stu-id="5720f-243">Deploy an X509 certificate to each machine.</span></span> <span data-ttu-id="5720f-244">Konfigurace [ochrany dat v kódu](https://docs.microsoft.com/aspnet/core/security/data-protection/configuration/overview).</span><span class="sxs-lookup"><span data-stu-id="5720f-244">Configure [data protection in code](https://docs.microsoft.com/aspnet/core/security/data-protection/configuration/overview).</span></span>

### <a name="1-create-a-data-protection-registry-hive"></a><span data-ttu-id="5720f-245">1. Vytvoření podregistr registru ochrany dat</span><span class="sxs-lookup"><span data-stu-id="5720f-245">1. Create a Data Protection Registry Hive</span></span>

<span data-ttu-id="5720f-246">Používané aplikacemi ASP.NET klíče ochrany dat jsou uloženy v registru podregistrů externí k aplikacím.</span><span class="sxs-lookup"><span data-stu-id="5720f-246">Data Protection keys used by ASP.NET applications are stored in registry hives external to the applications.</span></span> <span data-ttu-id="5720f-247">Udržení klíče pro danou aplikaci, musíte vytvořit podregistru pro fond aplikací aplikace.</span><span class="sxs-lookup"><span data-stu-id="5720f-247">To persist the keys for a given application, you must create a registry hive for the app's application pool.</span></span>

<span data-ttu-id="5720f-248">Pro samostatné instalace služby IIS, můžete použít [skript prostředí PowerShell AutoGenKeys.ps1 zřízení ochrany dat](https://github.com/aspnet/DataProtection/blob/dev/Provision-AutoGenKeys.ps1) pro každý fond aplikací používat s aplikací ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="5720f-248">For standalone IIS installations, you may use the [Data Protection Provision-AutoGenKeys.ps1 PowerShell script](https://github.com/aspnet/DataProtection/blob/dev/Provision-AutoGenKeys.ps1) for each app pool used with an ASP.NET Core app.</span></span> <span data-ttu-id="5720f-249">Tento skript vytvoří speciální klíč v registru HKLM, který je ACLed pouze pro účet pracovního procesu.</span><span class="sxs-lookup"><span data-stu-id="5720f-249">This script creates a special registry key in the HKLM registry that is ACLed only to the worker process account.</span></span> <span data-ttu-id="5720f-250">Klíče jsou zašifrovaná přinejmenším pomocí rozhraní DPAPI.</span><span class="sxs-lookup"><span data-stu-id="5720f-250">Keys are encrypted at rest using DPAPI.</span></span>

<span data-ttu-id="5720f-251">Ve scénářích webové farmy může být aplikace nakonfigurován pro použijte cestu UNC k ukládání klíčů ochrany jeho data.</span><span class="sxs-lookup"><span data-stu-id="5720f-251">In web farm scenarios, an app can be configured to use a UNC path to store its data protection keyring.</span></span> <span data-ttu-id="5720f-252">Ve výchozím nastavení nejsou klíče ochrany dat šifrována.</span><span class="sxs-lookup"><span data-stu-id="5720f-252">By default, the data protection keys are not encrypted.</span></span> <span data-ttu-id="5720f-253">Měli byste zajistit, že jsou omezeny na účet systému Windows, které aplikace běží jako soubor oprávnění pro tyto sdílené složky.</span><span class="sxs-lookup"><span data-stu-id="5720f-253">You should ensure that the file permissions for such a share are limited to the Windows account the app runs as.</span></span> <span data-ttu-id="5720f-254">Kromě toho můžete k ochraně klíče přinejmenším pomocí X509 certifikátu.</span><span class="sxs-lookup"><span data-stu-id="5720f-254">In addition, you may choose to protect keys at rest using an X509 certificate.</span></span> <span data-ttu-id="5720f-255">Pravděpodobně budete chtít zvážit mechanismus, aby uživatelé mohli nahrát certifikátů: místní certifikáty do důvěryhodného certifikátu uživatele, ukládání a ujistěte se, jsou k dispozici na všech počítačích, kde je spuštěna aplikace uživatele.</span><span class="sxs-lookup"><span data-stu-id="5720f-255">You may wish to consider a mechanism to allow users to upload certificates: Place certificates into the user's trusted certificate store and ensure they're available on all machines where the user's app runs.</span></span> <span data-ttu-id="5720f-256">V tématu [konfiguraci ochrany dat](xref:security/data-protection/configuration/overview) podrobnosti.</span><span class="sxs-lookup"><span data-stu-id="5720f-256">See [Configuring Data Protection](xref:security/data-protection/configuration/overview) for details.</span></span>

### <a name="2-configure-the-iis-application-pool-to-load-the-user-profile"></a><span data-ttu-id="5720f-257">2. Nakonfigurujte fond aplikací služby IIS načíst profil uživatele</span><span class="sxs-lookup"><span data-stu-id="5720f-257">2. Configure the IIS Application Pool to load the user profile</span></span>

<span data-ttu-id="5720f-258">Toto nastavení je ve **Model procesu** oddílu pod **Upřesnit nastavení** pro fond aplikací.</span><span class="sxs-lookup"><span data-stu-id="5720f-258">This setting is in the **Process Model** section under the **Advanced Settings** for the app pool.</span></span> <span data-ttu-id="5720f-259">Nastavit načíst profil uživatele na `True`.</span><span class="sxs-lookup"><span data-stu-id="5720f-259">Set Load User Profile to `True`.</span></span> <span data-ttu-id="5720f-260">To ukládá klíče v adresáři profilu uživatele a chrání je pomocí rozhraní DPAPI klíčem specifické pro uživatelský účet použitý pro fond aplikací.</span><span class="sxs-lookup"><span data-stu-id="5720f-260">This stores keys under the user profile directory and protects them using DPAPI with a key specific to the user account used for the app pool.</span></span>

### <a name="3-machine-wide-policy-for-data-protection"></a><span data-ttu-id="5720f-261">3. Celého systému zásady ochrany dat</span><span class="sxs-lookup"><span data-stu-id="5720f-261">3. Machine-wide policy for data protection</span></span>

<span data-ttu-id="5720f-262">Systém ochrany dat má omezenou podporu pro nastavení výchozí [celého zásad](xref:security/data-protection/configuration/machine-wide-policy) pro všechny aplikace, které využívají rozhraní Data Protection API.</span><span class="sxs-lookup"><span data-stu-id="5720f-262">The data protection system has limited support for setting a default [machine-wide policy](xref:security/data-protection/configuration/machine-wide-policy) for all apps that consume the Data Protection APIs.</span></span> <span data-ttu-id="5720f-263">Najdete v článku [ochrany dat](xref:security/data-protection/index) dokumentace pro další podrobnosti.</span><span class="sxs-lookup"><span data-stu-id="5720f-263">See the [data protection](xref:security/data-protection/index) documentation for more details.</span></span>

## <a name="configuration-of-sub-applications"></a><span data-ttu-id="5720f-264">Konfiguraci dílčí aplikací</span><span class="sxs-lookup"><span data-stu-id="5720f-264">Configuration of sub-applications</span></span>

<span data-ttu-id="5720f-265">Sub – aplikace, které přidají pod kořenová aplikace by neměla zahrnovat modul ASP.NET Core jako obslužná rutina.</span><span class="sxs-lookup"><span data-stu-id="5720f-265">Sub applications added under the root application shouldn't include the ASP.NET Core Module as a handler.</span></span> <span data-ttu-id="5720f-266">Když přidáte modul jako obslužná rutina dílčí-aplikace *web.config* souboru, obdržíte 500.19 (vnitřní chyba serveru), při pokusu o procházet aplikace dílčí odkazující na vadný konfiguračním souboru.</span><span class="sxs-lookup"><span data-stu-id="5720f-266">If you add the module as a handler in a sub-application's *web.config* file, you receive a 500.19 (Internal Server Error) referencing the faulty config file when you attempt to browse the sub-app.</span></span> <span data-ttu-id="5720f-267">Následující příklad ukazuje obsah publikovaný *web.config* soubor pro dílčí ASP.NET Core-aplikace:</span><span class="sxs-lookup"><span data-stu-id="5720f-267">The following example shows the contents of a published *web.config* file for an ASP.NET Core sub-app:</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.webServer>
    <aspNetCore processPath="dotnet" 
      arguments=".\MyApp.dll" 
      stdoutLogEnabled="false" 
      stdoutLogFile=".\logs\stdout" />
  </system.webServer>
</configuration>
```

<span data-ttu-id="5720f-268">Pokud máte v úmyslu hostitele ASP.NET Core dílčí aplikaci pod aplikace ASP.NET Core, je třeba explicitně odebrat zděděné obslužné rutiny v aplikaci dílčí *web.config* souboru:</span><span class="sxs-lookup"><span data-stu-id="5720f-268">If you intend to host a non-ASP.NET Core sub-app underneath an ASP.NET Core app, you must explicitly remove the inherited handler in the sub-app *web.config* file:</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.webServer>
    <handlers>
      <remove name="aspNetCore"/>
    </handlers>
    <aspNetCore processPath="dotnet" 
      arguments=".\MyApp.dll" 
      stdoutLogEnabled="false" 
      stdoutLogFile=".\logs\stdout" />
  </system.webServer>
</configuration>
```

<span data-ttu-id="5720f-269">Další informace o konfiguraci modulu ASP.NET Core s *web.config* souborů najdete v tématu [Úvod k modulu jádra ASP.NET](xref:fundamentals/servers/aspnet-core-module) tématu a [konfigurace modulu jádro ASP.NET referenční dokumentace](xref:hosting/aspnet-core-module).</span><span class="sxs-lookup"><span data-stu-id="5720f-269">For more information on configuring the ASP.NET Core Module with the *web.config* file, see the [Introduction to ASP.NET Core Module](xref:fundamentals/servers/aspnet-core-module) topic and the [ASP.NET Core Module configuration reference](xref:hosting/aspnet-core-module).</span></span>

## <a name="configuration-of-iis-with-webconfig"></a><span data-ttu-id="5720f-270">Konfigurace služby IIS pomocí souboru web.config</span><span class="sxs-lookup"><span data-stu-id="5720f-270">Configuration of IIS with web.config</span></span>

<span data-ttu-id="5720f-271">Konfigurace služby IIS je stále vliv `<system.webServer>` části *web.config* pro tyto funkce služby IIS, která se týkají konfigurace reverzní proxy server.</span><span class="sxs-lookup"><span data-stu-id="5720f-271">IIS configuration is still influenced by the `<system.webServer>` section of *web.config* for those IIS features that apply to a reverse proxy configuration.</span></span> <span data-ttu-id="5720f-272">Například můžete mít IIS konfigurována na úrovni systému použití dynamické komprese, ale je možné vypnout tohoto nastavení pro aplikace pomocí `<urlCompression>` element v dané aplikaci *web.config* souboru.</span><span class="sxs-lookup"><span data-stu-id="5720f-272">For example, you may have IIS configured at the system level to use dynamic compression, but you could disable that setting for an app with the `<urlCompression>` element in the app's *web.config* file.</span></span> <span data-ttu-id="5720f-273">Další informace najdete v tématu [odkaz Konfigurace pro `<system.webServer>` ](https://docs.microsoft.com/iis/configuration/system.webServer/), [odkazu na modul Konfigurace ASP.NET Core](xref:hosting/aspnet-core-module) a [pomocí modulů IIS s ASP.NET Core](xref:hosting/iis-modules).</span><span class="sxs-lookup"><span data-stu-id="5720f-273">For more information, see the [configuration reference for `<system.webServer>`](https://docs.microsoft.com/iis/configuration/system.webServer/), [ASP.NET Core Module Configuration Reference](xref:hosting/aspnet-core-module) and [Using IIS Modules with ASP.NET Core](xref:hosting/iis-modules).</span></span> <span data-ttu-id="5720f-274">Pokud je nutné nastavit proměnné prostředí pro jednotlivé aplikace běžící v izolované fondy aplikací (podporuje se ve službě IIS 10.0 +), najdete *příkazu AppCmd.exe* části [proměnné prostředí \< environmentVariables >](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) téma v IIS referenční dokumentace.</span><span class="sxs-lookup"><span data-stu-id="5720f-274">If you need to set environment variables for individual apps running in isolated Application Pools (supported on IIS 10.0+), see the *AppCmd.exe command* section of the [Environment Variables \<environmentVariables>](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) topic in the IIS reference documentation.</span></span>

## <a name="configuration-sections-of-webconfig"></a><span data-ttu-id="5720f-275">Konfigurační oddíly souboru Web.config</span><span class="sxs-lookup"><span data-stu-id="5720f-275">Configuration sections of web.config</span></span>

<span data-ttu-id="5720f-276">Na rozdíl od aplikací rozhraní .NET Framework, které jsou nakonfigurovány s `<system.web>`, `<appSettings>`, `<connectionStrings>`, a `<location>` elementů v *web.config*, aplikace ASP.NET Core jsou nakonfigurovány pomocí jiné konfigurace zprostředkovatelé.</span><span class="sxs-lookup"><span data-stu-id="5720f-276">Unlike .NET Framework applications that are configured with the `<system.web>`, `<appSettings>`, `<connectionStrings>`, and `<location>` elements in *web.config*, ASP.NET Core apps are configured using other configuration providers.</span></span> <span data-ttu-id="5720f-277">Další informace najdete v tématu [konfigurace](xref:fundamentals/configuration/index).</span><span class="sxs-lookup"><span data-stu-id="5720f-277">For more information, see [Configuration](xref:fundamentals/configuration/index).</span></span>

## <a name="application-pools"></a><span data-ttu-id="5720f-278">Fondy aplikací</span><span class="sxs-lookup"><span data-stu-id="5720f-278">Application Pools</span></span>

<span data-ttu-id="5720f-279">Při hostování více webů na jednom systému, by měl izolace aplikace od sebe navzájem spuštěním každou aplikaci ve vlastním fondu aplikací.</span><span class="sxs-lookup"><span data-stu-id="5720f-279">When hosting multiple websites on a single system, you should isolate the apps from each other by running each app in its own application pool.</span></span> <span data-ttu-id="5720f-280">Služby IIS **přidat web** dialogovém okně výchozí nastavení je toto chování.</span><span class="sxs-lookup"><span data-stu-id="5720f-280">The IIS **Add Website** dialog defaults to this behavior.</span></span> <span data-ttu-id="5720f-281">Když zadáte **název lokality**, textu je automaticky převeden do **fond aplikací** textové pole.</span><span class="sxs-lookup"><span data-stu-id="5720f-281">When you provide a **Site name**, the text is automatically transferred to the **Application pool** textbox.</span></span> <span data-ttu-id="5720f-282">Nový fond aplikací je vytvořený pomocí názvu serveru, když přidáte na web.</span><span class="sxs-lookup"><span data-stu-id="5720f-282">A new application pool is created using the site name when you add the website.</span></span>

## <a name="application-pool-identity"></a><span data-ttu-id="5720f-283">Identita fondu aplikací</span><span class="sxs-lookup"><span data-stu-id="5720f-283">Application Pool Identity</span></span>

<span data-ttu-id="5720f-284">Účet identity fondu aplikací umožňuje spustit aplikaci v části jedinečný účet bez nutnosti vytvářet a spravovat domény nebo místní účty.</span><span class="sxs-lookup"><span data-stu-id="5720f-284">An application pool identity account allows you to run an application under a unique account without having to create and manage domains or local accounts.</span></span> <span data-ttu-id="5720f-285">Ve službě IIS 8.0 + procesů Worker Správce služby IIS (WAS) vytvoří virtuální účet s názvem nového fondu aplikací a aplikace spouští pracovní procesy fondu pod tímto účtem ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="5720f-285">On IIS 8.0+, the IIS Admin Worker Process (WAS) creates a virtual account with the name of the new application pool and runs the app pool's worker processes under this account by default.</span></span> <span data-ttu-id="5720f-286">V konzole pro správu služby IIS v části **Upřesnit nastavení** pro fond aplikací, zkontrolujte, zda **Identity** je nastavený na použití **ApplicationPoolIdentity** jak je znázorněno na obrázku níže.</span><span class="sxs-lookup"><span data-stu-id="5720f-286">In the IIS Management Console under **Advanced Settings** for your app pool, ensure that the **Identity** is set to use **ApplicationPoolIdentity** as shown in the image below.</span></span>

![Dialogové okno Upřesnit nastavení fondu aplikací](iis/_static/apppool-identity.png)

<span data-ttu-id="5720f-288">Proces správy služby IIS vytvoří zabezpečeného identifikátoru se název fondu aplikací v zabezpečení systému Windows.</span><span class="sxs-lookup"><span data-stu-id="5720f-288">The IIS management process creates a secure identifier with the name of the app pool in the Windows Security System.</span></span> <span data-ttu-id="5720f-289">Prostředky lze zabezpečit pomocí tuto identitu; Tato identita však není skutečné uživatelský účet a nezobrazí v konzole pro správu uživatelů systému Windows.</span><span class="sxs-lookup"><span data-stu-id="5720f-289">Resources can be secured by using this identity; however, this identity isn't a real user account and won't show up in the Windows User Management Console.</span></span>

<span data-ttu-id="5720f-290">Pokud potřebujete udělit IIS pracovní proces se zvýšenými oprávněními přístup do vaší aplikace, musíte upravit seznam řízení přístupu (ACL) pro adresář obsahující aplikaci.</span><span class="sxs-lookup"><span data-stu-id="5720f-290">If you need to grant the IIS worker process elevated access to your app, you must modify the Access Control List (ACL) for the directory containing your application.</span></span>

1. <span data-ttu-id="5720f-291">Otevřete Průzkumníka Windows a přejděte do adresáře.</span><span class="sxs-lookup"><span data-stu-id="5720f-291">Open Windows Explorer and navigate to the directory.</span></span>

2. <span data-ttu-id="5720f-292">Klikněte pravým tlačítkem na adresář a klikněte na tlačítko **vlastnosti**.</span><span class="sxs-lookup"><span data-stu-id="5720f-292">Right click on the directory and click **Properties**.</span></span>

3. <span data-ttu-id="5720f-293">V části **zabezpečení** , klikněte na **upravit** tlačítko a potom **přidat** tlačítko.</span><span class="sxs-lookup"><span data-stu-id="5720f-293">Under the **Security** tab, click the **Edit** button and then the **Add** button.</span></span>

4. <span data-ttu-id="5720f-294">Klikněte **umístění** tlačítko a zkontrolujte, zda jste vybrali systému.</span><span class="sxs-lookup"><span data-stu-id="5720f-294">Click the **Locations** button and make sure you select your system.</span></span>

5. <span data-ttu-id="5720f-295">Zadejte **IIS AppPool\DefaultAppPool** v **zadejte názvy objektů k výběru** textové pole.</span><span class="sxs-lookup"><span data-stu-id="5720f-295">Enter **IIS AppPool\DefaultAppPool** in **Enter the object names to select** textbox.</span></span>

  ![Vyberte uživatele nebo skupiny dialogové okno pro složce aplikace](iis/_static/select-users-or-groups-1.png)

6. <span data-ttu-id="5720f-297">Klikněte **Kontrola názvů** tlačítko a pak klikněte na **OK**.</span><span class="sxs-lookup"><span data-stu-id="5720f-297">Click the **Check Names** button and then click **OK**.</span></span>

  ![Vyberte uživatele nebo skupiny dialogové okno pro složce aplikace](iis/_static/select-users-or-groups-2.png)

<span data-ttu-id="5720f-299">Můžete to provést taky pomocí příkazového řádku pomocí **ICACLS** nástroje:</span><span class="sxs-lookup"><span data-stu-id="5720f-299">You can also do this via a command prompt using **ICACLS** tool:</span></span>

```console
ICACLS C:\sites\MyWebApp /grant "IIS AppPool\DefaultAppPool":F
```

## <a name="troubleshooting-tips"></a><span data-ttu-id="5720f-300">Tipy k řešení potíží</span><span class="sxs-lookup"><span data-stu-id="5720f-300">Troubleshooting tips</span></span>

<span data-ttu-id="5720f-301">K diagnostikování problémů s nasazením služby IIS:</span><span class="sxs-lookup"><span data-stu-id="5720f-301">To diagnose problems with IIS deployments:</span></span>

* <span data-ttu-id="5720f-302">Studie výstup prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="5720f-302">Study browser output.</span></span>
* <span data-ttu-id="5720f-303">Zkontrolovat, zda systém **aplikace** protokolu prostřednictvím **Prohlížeč událostí**.</span><span class="sxs-lookup"><span data-stu-id="5720f-303">Examine the system's **Application** log through **Event Viewer**.</span></span>
* <span data-ttu-id="5720f-304">Povolit `stdout` protokolování.</span><span class="sxs-lookup"><span data-stu-id="5720f-304">Enable `stdout` logging.</span></span> <span data-ttu-id="5720f-305">**ASP.NET Core modulu** protokolu nachází na v zadané cestě *stdoutLogFile* atribut `<aspNetCore>` element v *web.config*. Všechny složky v cestě uvedené v hodnotě atributu musí existovat v nasazení.</span><span class="sxs-lookup"><span data-stu-id="5720f-305">The **ASP.NET Core Module** log is found on the path provided in the *stdoutLogFile* attribute of the `<aspNetCore>` element in *web.config*. Any folders on the path provided in the attribute value must exist in the deployment.</span></span> <span data-ttu-id="5720f-306">Musíte taky nastavit *stdoutLogEnabled = "true"*.</span><span class="sxs-lookup"><span data-stu-id="5720f-306">You must also set *stdoutLogEnabled="true"*.</span></span> <span data-ttu-id="5720f-307">Aplikace, které používají `Microsoft.NET.Sdk.Web` SDK k vytvoření *web.config* souboru výchozí *stdoutLogEnabled* nastavení *false*, takže musíte ručně zadat *web.config* souboru nebo upravte soubor. Chcete-li povolit `stdout` protokolování.</span><span class="sxs-lookup"><span data-stu-id="5720f-307">Apps that use the the `Microsoft.NET.Sdk.Web` SDK to create the *web.config* file default the *stdoutLogEnabled* setting to *false*, so you must manually provide the *web.config* file or modify the file in order to enable `stdout` logging.</span></span>

<span data-ttu-id="5720f-308">Několik běžných chyb, dokud modul nezobrazí v prohlížeči, protokolu aplikace a ASP.NET Core modulu protokolu *startupTimeLimit* (výchozí: 120 sekundách) a *startupRetryCount* (výchozí: 2) byly splněny.</span><span class="sxs-lookup"><span data-stu-id="5720f-308">Several of the common errors don't appear in the browser, Application Log, and ASP.NET Core Module Log until the module *startupTimeLimit* (default: 120 seconds) and *startupRetryCount* (default: 2) have passed.</span></span> <span data-ttu-id="5720f-309">Proto počkejte úplné šest minut před deducing které modulu se nepodařilo spustit proces pro aplikaci.</span><span class="sxs-lookup"><span data-stu-id="5720f-309">Therefore, wait a full six minutes before deducing that the module has failed to start a process for the app.</span></span>

<span data-ttu-id="5720f-310">A spusťte aplikaci přímo na Kestrel je jeden rychlý způsob, jak zjistit, zda aplikace funguje správně.</span><span class="sxs-lookup"><span data-stu-id="5720f-310">One quick way to determine if the app is working properly is to run the app directly on Kestrel.</span></span> <span data-ttu-id="5720f-311">Pokud aplikace byl publikován jako závislé na framework nasazení (disketové jednotky), spouštění `dotnet my_application.dll` ve složce nasazení, což je fyzická cesta k aplikaci služby IIS.</span><span class="sxs-lookup"><span data-stu-id="5720f-311">If the app was published as a framework-dependent deployment (FDD), execute `dotnet my_application.dll` in the deployment folder, which is the IIS physical path to the app.</span></span> <span data-ttu-id="5720f-312">Pokud byla aplikace publikována jako samostatná nasazení (SCD), spusťte aplikaci je spustitelný soubor přímo z příkazového řádku, `my_application.exe`, ve složce nasazení.</span><span class="sxs-lookup"><span data-stu-id="5720f-312">If the app was published as a self-contained deployment (SCD), run the app's executable directly from a command prompt, `my_application.exe`, in the deployment folder.</span></span> <span data-ttu-id="5720f-313">Pokud Kestrel naslouchá na výchozí port 5000, byste měli moct přejít aplikaci ve `http://localhost:5000/`.</span><span class="sxs-lookup"><span data-stu-id="5720f-313">If Kestrel is listening on default port 5000, you should be able to browse the app at `http://localhost:5000/`.</span></span> <span data-ttu-id="5720f-314">Pokud aplikace odpovídá za normálních okolností na adrese Kestrel koncový bod, problém se týká víc pravděpodobně ke konfiguraci služby IIS – ASP.NET Core modulu-Kestrel a méně pravděpodobně v rámci aplikace.</span><span class="sxs-lookup"><span data-stu-id="5720f-314">If the app responds normally at the Kestrel endpoint address, the problem is more likely related to the IIS-ASP.NET Core Module-Kestrel configuration and less likely within the app itself.</span></span>

<span data-ttu-id="5720f-315">Jeden způsob jak určit, jestli služby IIS reverzní proxy server a Kestrel server správně funguje je provést žádost o jednoduché statických souborů pro šablony stylů, skript nebo bitovou kopii z aplikace statické soubory v *wwwroot* pomocí [statických souborů Middleware](xref:fundamentals/static-files).</span><span class="sxs-lookup"><span data-stu-id="5720f-315">One way to determine if the IIS reverse proxy to the Kestrel server is working properly is to perform a simple static file request for a stylesheet, script, or image from the app's static files in *wwwroot* using [Static File middleware](xref:fundamentals/static-files).</span></span> <span data-ttu-id="5720f-316">Pokud aplikace může obsluhovat statické soubory, ale dochází k selhání zobrazení MVC a dalších koncových bodů, je ale problém menší pravděpodobně související ke konfiguraci služby IIS – ASP.NET Core modulu-Kestrel a více pravděpodobně v rámci aplikace (například směrování MVC nebo 500 – Vnitřní chyba serveru).</span><span class="sxs-lookup"><span data-stu-id="5720f-316">If the app can serve static files but MVC Views and other endpoints are failing, the problem is less likely related to the IIS-ASP.NET Core Module-Kestrel configuration and more likely within the app itself (for example, MVC routing or 500 Internal Server Error).</span></span>

<span data-ttu-id="5720f-317">Pokud Kestrel spustí běžným způsobem za služby IIS, ale aplikace se nespustí v systému po úspěšném spuštění místně, můžete dočasně přidat proměnnou prostředí pro *web.config* nastavit `ASPNETCORE_ENVIRONMENT` k `Development`.</span><span class="sxs-lookup"><span data-stu-id="5720f-317">When Kestrel starts normally behind IIS but the app won't run on the system after successfully running locally, you can temporarily add an environment variable to *web.config* to set the `ASPNETCORE_ENVIRONMENT` to `Development`.</span></span> <span data-ttu-id="5720f-318">Tak dlouho, dokud není přepsat prostředí v aplikaci při spuštění, to umožňuje [vývojáře výjimka stránky](xref:fundamentals/error-handling) zobrazí při spuštění aplikace v systému.</span><span class="sxs-lookup"><span data-stu-id="5720f-318">As long as you don't override the environment in app startup, this allows the [developer exception page](xref:fundamentals/error-handling) to appear when the app is run on the system.</span></span> <span data-ttu-id="5720f-319">Nastavení proměnné prostředí pro `ASPNETCORE_ENVIRONMENT` tímto způsobem doporučujeme pouze pro testování nebo pracovní systémy, které nejsou vystaveny k Internetu.</span><span class="sxs-lookup"><span data-stu-id="5720f-319">Setting the environment variable for `ASPNETCORE_ENVIRONMENT` in this way is only recommended for staging/testing systems that aren't exposed to the Internet.</span></span> <span data-ttu-id="5720f-320">Ujistěte se, odeberete z proměnné prostředí *web.config* souboru po dokončení.</span><span class="sxs-lookup"><span data-stu-id="5720f-320">Be sure you remove the environment variable from the *web.config* file when finished.</span></span> <span data-ttu-id="5720f-321">Informace o nastavení proměnné prostředí prostřednictvím *web.config* reverzní proxy server, najdete v části [environmentVariables podřízený element aspNetCore](xref:hosting/aspnet-core-module#setting-environment-variables).</span><span class="sxs-lookup"><span data-stu-id="5720f-321">For information on setting environment variables via *web.config* for the reverse proxy, see [environmentVariables child element of aspNetCore](xref:hosting/aspnet-core-module#setting-environment-variables).</span></span>

<span data-ttu-id="5720f-322">Ve většině případů povolení protokolování aplikací pomáhá při řešení potíží s aplikací nebo reverzní proxy server.</span><span class="sxs-lookup"><span data-stu-id="5720f-322">In most cases, enabling application logging assists in troubleshooting problems with the app or the reverse proxy.</span></span> <span data-ttu-id="5720f-323">V tématu [protokolování](xref:fundamentals/logging/index) Další informace.</span><span class="sxs-lookup"><span data-stu-id="5720f-323">See [Logging](xref:fundamentals/logging/index) for more information.</span></span>

<span data-ttu-id="5720f-324">Naše poslední tip pro odstraňování potíží se vztahují k aplikacím, které se nepodařilo spustit po upgradu buď .NET Core SDK na vývoj pro počítače nebo balíček verze v aplikaci.</span><span class="sxs-lookup"><span data-stu-id="5720f-324">Our last troubleshooting tip pertains to apps that fail to run after upgrading either the .NET Core SDK on the development machine or package versions within the app.</span></span> <span data-ttu-id="5720f-325">V některých případech je možné osamocené balíčky ukončit aplikaci při provádění hlavních aktualizací.</span><span class="sxs-lookup"><span data-stu-id="5720f-325">In some cases, incoherent packages may break an app when performing major upgrades.</span></span> <span data-ttu-id="5720f-326">Většinu tyto problémy můžete vyřešit odstraněním `bin` a `obj` balíček složek v projektu, vymazání mezipaměti na `%UserProfile%\.nuget\packages\` a `%LocalAppData%\Nuget\v3-cache`, obnovení projektu a potvrzení, že bylo předchozí nasazení v systému úplně odstranit před novým nasazením aplikace.</span><span class="sxs-lookup"><span data-stu-id="5720f-326">You can fix most of these issues by deleting the `bin` and `obj` folders in the project, clearing package caches at `%UserProfile%\.nuget\packages\` and `%LocalAppData%\Nuget\v3-cache`, restoring the project, and confirming that your prior deployment on the system has been completely deleted prior to re-deploying the app.</span></span>

> [!TIP]
> <span data-ttu-id="5720f-327">Vhodný způsob k vymazání mezipamětí balíčku je použít k získání *NuGet.exe* nástroje z [NuGet.org](https://www.nuget.org/), přidejte ho k vašemu systému CESTU a spouštět `nuget locals all -clear` z příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="5720f-327">A convenient way to clear package caches is to obtain the *NuGet.exe* tool from [NuGet.org](https://www.nuget.org/), add it to your system PATH, and execute `nuget locals all -clear` from a command prompt.</span></span> <span data-ttu-id="5720f-328">Můžete také provést `dotnet nuget locals all --clear` příkazu z příkazového řádku bez získání *NuGet.exe*.</span><span class="sxs-lookup"><span data-stu-id="5720f-328">You can also execute the `dotnet nuget locals all --clear` command from a command prompt without obtaining *NuGet.exe*.</span></span>

## <a name="common-errors"></a><span data-ttu-id="5720f-329">Běžné chyby</span><span class="sxs-lookup"><span data-stu-id="5720f-329">Common errors</span></span>

<span data-ttu-id="5720f-330">Následující není úplný seznam chyb.</span><span class="sxs-lookup"><span data-stu-id="5720f-330">The following isn't a complete list of errors.</span></span> <span data-ttu-id="5720f-331">Podrobná chybová zpráva se vyskytne chyba zde nejsou uvedeny, nechejte prosím komentáře níže v části.</span><span class="sxs-lookup"><span data-stu-id="5720f-331">Should you encounter an error not listed here, please leave a detailed error message in the comments section below.</span></span>

### <a name="installer-unable-to-obtain-vc-redistributable"></a><span data-ttu-id="5720f-332">Instalační program nemohl získat VC ++ Redistributable</span><span class="sxs-lookup"><span data-stu-id="5720f-332">Installer unable to obtain VC++ Redistributable</span></span>

* <span data-ttu-id="5720f-333">**Instalační program výjimka:** 0x80072efd nebo 0x80072f76 - Nespecifikovaná chyba</span><span class="sxs-lookup"><span data-stu-id="5720f-333">**Installer Exception:** 0x80072efd or 0x80072f76 - Unspecified error</span></span>

* <span data-ttu-id="5720f-334">**Instalační program protokolu výjimka &#8224;:** Chyba 0x80072efd nebo 0x80072f76: spuštění EXE balíčku se nezdařilo</span><span class="sxs-lookup"><span data-stu-id="5720f-334">**Installer Log Exception&#8224;:** Error 0x80072efd or 0x80072f76: Failed to execute EXE package</span></span>

  <span data-ttu-id="5720f-335">&#8224; V protokolu je umístěn v C:\Users\\{USER}\AppData\Local\Temp\dd_DotNetCoreWinSvrHosting__{timestamp}.log.</span><span class="sxs-lookup"><span data-stu-id="5720f-335">&#8224;The log is located at C:\Users\\{USER}\AppData\Local\Temp\dd_DotNetCoreWinSvrHosting__{timestamp}.log.</span></span>

<span data-ttu-id="5720f-336">Řešení potíží:</span><span class="sxs-lookup"><span data-stu-id="5720f-336">Troubleshooting:</span></span>

* <span data-ttu-id="5720f-337">Pokud systém nemá přístup k Internetu při instalaci serveru pro hostování sady, tato výjimka nastane, když se instalační program nemůže získat *Microsoft Visual C++ 2015 Redistributable*.</span><span class="sxs-lookup"><span data-stu-id="5720f-337">If the system doesn't have Internet access while installing the server hosting bundle, this exception occurs when the installer is prevented from obtaining the *Microsoft Visual C++ 2015 Redistributable*.</span></span> <span data-ttu-id="5720f-338">Můžete získat z instalačního programu [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=53840).</span><span class="sxs-lookup"><span data-stu-id="5720f-338">You may obtain an installer from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=53840).</span></span> <span data-ttu-id="5720f-339">Pokud instalační program selže, nemusíte dostávat na .NET Core runtime potřebná pro Hosting nasazení závislé na framework (chyba).</span><span class="sxs-lookup"><span data-stu-id="5720f-339">If the installer fails, you may not receive the .NET Core runtime required to host a framework-dependent deployment (FDD).</span></span> <span data-ttu-id="5720f-340">Pokud máte v plánu k hostování disketové jednotky, zkontrolujte, zda je modul runtime nainstalovány v programech &amp; funkce.</span><span class="sxs-lookup"><span data-stu-id="5720f-340">If you plan to host an FDD, confirm that the runtime is installed in Programs &amp; Features.</span></span> <span data-ttu-id="5720f-341">Můžete získat za běhu instalačního programu z [.NET stáhne](https://www.microsoft.com/net/download/core).</span><span class="sxs-lookup"><span data-stu-id="5720f-341">You may obtain a runtime installer from [.NET Downloads](https://www.microsoft.com/net/download/core).</span></span> <span data-ttu-id="5720f-342">Po instalaci modulu runtime, restartování systému nebo restartujte službu IIS tak, že spustíte **net stop byl /y** následuje **net start w3svc** z příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="5720f-342">After installing the runtime, restart the system or restart IIS by executing **net stop was /y** followed by **net start w3svc** from a command prompt.</span></span>

### <a name="os-upgrade-removed-the-32-bit-aspnet-core-module"></a><span data-ttu-id="5720f-343">Upgrade operačního systému odebrat modul 32-bit ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="5720f-343">OS upgrade removed the 32-bit ASP.NET Core Module</span></span>

* <span data-ttu-id="5720f-344">**Protokolu aplikace:** knihovnu DLL modulu **C:\WINDOWS\system32\inetsrv\aspnetcore.dll** se nepodařilo načíst.</span><span class="sxs-lookup"><span data-stu-id="5720f-344">**Application Log:** The Module DLL **C:\WINDOWS\system32\inetsrv\aspnetcore.dll** failed to load.</span></span> <span data-ttu-id="5720f-345">Data je chyba.</span><span class="sxs-lookup"><span data-stu-id="5720f-345">The data is the error.</span></span>

<span data-ttu-id="5720f-346">Řešení potíží:</span><span class="sxs-lookup"><span data-stu-id="5720f-346">Troubleshooting:</span></span>

* <span data-ttu-id="5720f-347">Soubory s non-OS **C:\Windows\SysWOW64\inetsrv** directory nezachovají se během operační systém upgradu.</span><span class="sxs-lookup"><span data-stu-id="5720f-347">Non-OS files in the **C:\Windows\SysWOW64\inetsrv** directory aren't preserved during an OS upgrade.</span></span> <span data-ttu-id="5720f-348">Pokud modul ASP.NET Core nainstalovaný před upgrade operačního systému a potom zkuste spustit všechny fondu aplikací v režimu 32-bit po upgradu operačního systému, narazíte na potíže.</span><span class="sxs-lookup"><span data-stu-id="5720f-348">If you have the ASP.NET Core Module installed prior to an OS upgrade and then try to run any AppPool in 32-bit mode after an OS upgrade, you encounter this issue.</span></span> <span data-ttu-id="5720f-349">Po upgradu operačního systému opravte modul ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="5720f-349">After an OS upgrade, repair the ASP.NET Core Module.</span></span> <span data-ttu-id="5720f-350">V tématu [instalaci sady .NET jádra Windows serveru, který hostuje](#install-the-net-core-windows-server-hosting-bundle).</span><span class="sxs-lookup"><span data-stu-id="5720f-350">See [Install the .NET Core Windows Server Hosting bundle](#install-the-net-core-windows-server-hosting-bundle).</span></span> <span data-ttu-id="5720f-351">Vyberte **Repair** při spuštění Instalační služby.</span><span class="sxs-lookup"><span data-stu-id="5720f-351">Select **Repair** when you run the installer.</span></span>

### <a name="platform-conflicts-with-rid"></a><span data-ttu-id="5720f-352">Platformy je v konfliktu s identifikátorů RID</span><span class="sxs-lookup"><span data-stu-id="5720f-352">Platform conflicts with RID</span></span>

* <span data-ttu-id="5720f-353">**Prohlížeč:** chyb HTTP 502.5 - selhání procesu</span><span class="sxs-lookup"><span data-stu-id="5720f-353">**Browser:** HTTP Error 502.5 - Process Failure</span></span>

* <span data-ttu-id="5720f-354">**Protokolu aplikace:** aplikaci ' Počítač/WEBROOT/APPHOST/MY_APPLICATION' s kořenem fyzické "C:\{cesta}\' Nepodařilo se spustit proces s commandline '" C:\\\my_application {umístění cesta}. { exe | dll} "", kód chyby = ' 0x80004005: ff.</span><span class="sxs-lookup"><span data-stu-id="5720f-354">**Application Log:** Application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' with physical root 'C:\{PATH}\' failed to start process with commandline '"C:\\{PATH}\my_application.{exe|dll}" ', ErrorCode = '0x80004005 : ff.</span></span>

* <span data-ttu-id="5720f-355">**ASP.NET Core modulu protokolu:** neošetřená výjimka: System.BadImageFormatException: Nepodařilo se načíst soubor nebo sestavení 'my_application.dll'.</span><span class="sxs-lookup"><span data-stu-id="5720f-355">**ASP.NET Core Module Log:** Unhandled Exception: System.BadImageFormatException: Could not load file or assembly 'my_application.dll'.</span></span> <span data-ttu-id="5720f-356">Byl proveden pokus o načtení program v nesprávném formátu.</span><span class="sxs-lookup"><span data-stu-id="5720f-356">An attempt was made to load a program with an incorrect format.</span></span>

<span data-ttu-id="5720f-357">Řešení potíží:</span><span class="sxs-lookup"><span data-stu-id="5720f-357">Troubleshooting:</span></span>

* <span data-ttu-id="5720f-358">Potvrďte, že je aplikace spuštěná místně na Kestrel.</span><span class="sxs-lookup"><span data-stu-id="5720f-358">Confirm that the application runs locally on Kestrel.</span></span> <span data-ttu-id="5720f-359">Selhání procesu může být výsledkem problému v aplikaci.</span><span class="sxs-lookup"><span data-stu-id="5720f-359">A process failure might be the result of a problem within the application.</span></span> <span data-ttu-id="5720f-360">Další informace najdete v tématu [tipy pro odstraňování potíží](#troubleshooting-tips).</span><span class="sxs-lookup"><span data-stu-id="5720f-360">For more information, see [Troubleshooting tips](#troubleshooting-tips).</span></span>

* <span data-ttu-id="5720f-361">Potvrďte, zda nebyla nastavena `<PlatformTarget>` ve vaší *.csproj* , je v konfliktu s identifikátor RID.</span><span class="sxs-lookup"><span data-stu-id="5720f-361">Confirm that you didn't set a `<PlatformTarget>` in your *.csproj* that conflicts with the RID.</span></span> <span data-ttu-id="5720f-362">Například nezadávejte `<PlatformTarget>` z `x86` a publikovat s identifikátorů RID z `win10-x64`, buď pomocí *dotnet publikování - c - r verzi win10-x64* nebo nastavením `<RuntimeIdentifiers>` ve vaší *.csproj*  k `win10-x64`.</span><span class="sxs-lookup"><span data-stu-id="5720f-362">For example, don't specify a `<PlatformTarget>` of `x86` and publish with an RID of `win10-x64`, either by using *dotnet publish -c Release -r win10-x64* or by setting the `<RuntimeIdentifiers>` in your *.csproj* to `win10-x64`.</span></span> <span data-ttu-id="5720f-363">Projekt publikuje bez upozornění nebo chyby, ale selže s výše zaznamenané výjimky v systému.</span><span class="sxs-lookup"><span data-stu-id="5720f-363">The project publishes without warning or error but fails with the above logged exceptions on the system.</span></span>

* <span data-ttu-id="5720f-364">Pokud tuto výjimku dojde k nasazení aplikace Azure při upgradu aplikace a nasazení novější sestavení, odstraňte ručně všechny soubory z předchozí nasazení.</span><span class="sxs-lookup"><span data-stu-id="5720f-364">If this exception occurs for an Azure Apps deployment when upgrading an application and deploying newer assemblies, manually delete all files from the prior deployment.</span></span> <span data-ttu-id="5720f-365">Přetrvávání odstraněných nekompatibilní sestavení může mít za následek `System.BadImageFormatException` výjimka při nasazení aplikace upgradovaný.</span><span class="sxs-lookup"><span data-stu-id="5720f-365">Lingering incompatible assemblies can result in a `System.BadImageFormatException` exception when deploying an upgraded app.</span></span>

### <a name="uri-endpoint-wrong-or-stopped-website"></a><span data-ttu-id="5720f-366">Identifikátor URI koncového bodu nesprávné nebo se zastavil webu</span><span class="sxs-lookup"><span data-stu-id="5720f-366">URI endpoint wrong or stopped website</span></span>

* <span data-ttu-id="5720f-367">**Prohlížeč:** ERR_CONNECTION_REFUSED</span><span class="sxs-lookup"><span data-stu-id="5720f-367">**Browser:** ERR_CONNECTION_REFUSED</span></span>

* <span data-ttu-id="5720f-368">**Protokolu aplikace:** žádná položka</span><span class="sxs-lookup"><span data-stu-id="5720f-368">**Application Log:** No entry</span></span>

* <span data-ttu-id="5720f-369">**ASP.NET Core modulu protokolu:** vytvoření souboru protokolu</span><span class="sxs-lookup"><span data-stu-id="5720f-369">**ASP.NET Core Module Log:** Log file not created</span></span>

<span data-ttu-id="5720f-370">Řešení potíží:</span><span class="sxs-lookup"><span data-stu-id="5720f-370">Troubleshooting:</span></span>

* <span data-ttu-id="5720f-371">Potvrďte, že používáte správný identifikátor URI koncového bodu pro aplikaci.</span><span class="sxs-lookup"><span data-stu-id="5720f-371">Confirm you are using the correct URI endpoint for the application.</span></span> <span data-ttu-id="5720f-372">Zkontrolujte vaše vazby.</span><span class="sxs-lookup"><span data-stu-id="5720f-372">Check your bindings.</span></span>

* <span data-ttu-id="5720f-373">Potvrďte, že na web služby IIS není v *Zastaveno* stavu.</span><span class="sxs-lookup"><span data-stu-id="5720f-373">Confirm that the IIS website is not in the *Stopped* state.</span></span>

### <a name="corewebengine-or-w3svc-server-features-disabled"></a><span data-ttu-id="5720f-374">Funkce serveru CoreWebEngine nebo W3SVC zakázána</span><span class="sxs-lookup"><span data-stu-id="5720f-374">CoreWebEngine or W3SVC server features disabled</span></span>

* <span data-ttu-id="5720f-375">**Výjimka operačního systému:** CoreWebEngine služby IIS 7.0 a W3SVC funkce musí být nainstalována na použít modul ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="5720f-375">**OS Exception:** The IIS 7.0 CoreWebEngine and W3SVC features must be installed to use the ASP.NET Core Module.</span></span>

<span data-ttu-id="5720f-376">Řešení potíží:</span><span class="sxs-lookup"><span data-stu-id="5720f-376">Troubleshooting:</span></span>

* <span data-ttu-id="5720f-377">Potvrďte, že je povoleno správné role a funkce.</span><span class="sxs-lookup"><span data-stu-id="5720f-377">Confirm that you have enabled the proper role and features.</span></span> <span data-ttu-id="5720f-378">V tématu [konfigurace služby IIS](#iis-configuration).</span><span class="sxs-lookup"><span data-stu-id="5720f-378">See [IIS Configuration](#iis-configuration).</span></span>

### <a name="incorrect-website-physical-path-or-application-missing"></a><span data-ttu-id="5720f-379">Fyzická cesta nesprávný webu nebo aplikace chybí</span><span class="sxs-lookup"><span data-stu-id="5720f-379">Incorrect website physical path or application missing</span></span>

* <span data-ttu-id="5720f-380">**Prohlížeč:** 403 Zakázáno – přístup byl odepřen. **--nebo--** 403.14 zakázáno – webový server je nakonfigurován tak, aby nezobrazovat obsah tohoto adresáře.</span><span class="sxs-lookup"><span data-stu-id="5720f-380">**Browser:** 403 Forbidden - Access is denied **--OR--** 403.14 Forbidden - The Web server is configured to not list the contents of this directory.</span></span>

* <span data-ttu-id="5720f-381">**Protokolu aplikace:** žádná položka</span><span class="sxs-lookup"><span data-stu-id="5720f-381">**Application Log:** No entry</span></span>

* <span data-ttu-id="5720f-382">**ASP.NET Core modulu protokolu:** vytvoření souboru protokolu</span><span class="sxs-lookup"><span data-stu-id="5720f-382">**ASP.NET Core Module Log:** Log file not created</span></span>

<span data-ttu-id="5720f-383">Řešení potíží:</span><span class="sxs-lookup"><span data-stu-id="5720f-383">Troubleshooting:</span></span>

* <span data-ttu-id="5720f-384">Zkontrolujte na web služby IIS **základní nastavení** a složce fyzické aplikace.</span><span class="sxs-lookup"><span data-stu-id="5720f-384">Check the IIS website **Basic Settings** and the physical application folder.</span></span> <span data-ttu-id="5720f-385">Potvrďte, že aplikace je ve složce na webu služby IIS **fyzická cesta**.</span><span class="sxs-lookup"><span data-stu-id="5720f-385">Confirm that the application is in the folder at the IIS website **Physical path**.</span></span>

### <a name="incorrect-role-module-not-installed-or-incorrect-permissions"></a><span data-ttu-id="5720f-386">Nesprávný role, modul není nainstalován nebo nesprávná oprávnění</span><span class="sxs-lookup"><span data-stu-id="5720f-386">Incorrect role, module not installed, or incorrect permissions</span></span>

* <span data-ttu-id="5720f-387">**Prohlížeč:** 500.19 vnitřní chyba serveru: K požadované stránce nelze přistupovat, protože související konfigurační data pro stránku nejsou platná.</span><span class="sxs-lookup"><span data-stu-id="5720f-387">**Browser:** 500.19 Internal Server Error - The requested page cannot be accessed because the related configuration data for the page is invalid.</span></span>

* <span data-ttu-id="5720f-388">**Protokolu aplikace:** žádná položka</span><span class="sxs-lookup"><span data-stu-id="5720f-388">**Application Log:** No entry</span></span>

* <span data-ttu-id="5720f-389">**ASP.NET Core modulu protokolu:** vytvoření souboru protokolu</span><span class="sxs-lookup"><span data-stu-id="5720f-389">**ASP.NET Core Module Log:** Log file not created</span></span>

<span data-ttu-id="5720f-390">Řešení potíží:</span><span class="sxs-lookup"><span data-stu-id="5720f-390">Troubleshooting:</span></span>

* <span data-ttu-id="5720f-391">Potvrďte, že jste povolili správné roli.</span><span class="sxs-lookup"><span data-stu-id="5720f-391">Confirm that you've enabled the proper role.</span></span> <span data-ttu-id="5720f-392">V tématu [konfigurace služby IIS](#iis-configuration).</span><span class="sxs-lookup"><span data-stu-id="5720f-392">See [IIS Configuration](#iis-configuration).</span></span>

* <span data-ttu-id="5720f-393">Zkontrolujte **programy &amp; funkce** a ověřte, že **Microsoft ASP.NET Core modulu** byl nainstalován.</span><span class="sxs-lookup"><span data-stu-id="5720f-393">Check **Programs &amp; Features** and confirm that the **Microsoft ASP.NET Core Module** has been installed.</span></span> <span data-ttu-id="5720f-394">Pokud **Microsoft ASP.NET Core modulu** není uvedena v seznamu nainstalovaných programů, nainstalujte modul.</span><span class="sxs-lookup"><span data-stu-id="5720f-394">If the **Microsoft ASP.NET Core Module** isn't present in the list of installed programs, install the module.</span></span> <span data-ttu-id="5720f-395">V tématu [instalaci sady .NET jádra Windows serveru, který hostuje](#install-the-net-core-windows-server-hosting-bundle).</span><span class="sxs-lookup"><span data-stu-id="5720f-395">See [Install the .NET Core Windows Server Hosting bundle](#install-the-net-core-windows-server-hosting-bundle).</span></span>

* <span data-ttu-id="5720f-396">Ujistěte se, že **fond aplikací** > **Model procesu** > **Identity** je nastaven na **ApplicationPoolIdentity** nebo vlastní identitu má správná oprávnění pro přístup do složky pro nasazení aplikace.</span><span class="sxs-lookup"><span data-stu-id="5720f-396">Make sure that the **Application Pool** > **Process Model** > **Identity** is set to **ApplicationPoolIdentity** or your custom identity has the correct permissions to access the app's deployment folder.</span></span>

### <a name="incorrect-processpath-missing-path-variable-hosting-bundle-not-installed-systemiis-not-restarted-vc-redistributable-not-installed-or-dotnetexe-access-violation"></a><span data-ttu-id="5720f-397">Nesprávný processPath chybějící proměnné PATH, hostování sady není nainstalován, není restartování systému nebo služby IIS, VC ++ Redistributable není nainstalovaný nebo dotnet.exe narušení přístupu</span><span class="sxs-lookup"><span data-stu-id="5720f-397">Incorrect processPath, missing PATH variable, hosting bundle not installed, system/IIS not restarted, VC++ Redistributable not installed, or dotnet.exe access violation</span></span>

* <span data-ttu-id="5720f-398">**Prohlížeč:** chyb HTTP 502.5 - selhání procesu</span><span class="sxs-lookup"><span data-stu-id="5720f-398">**Browser:** HTTP Error 502.5 - Process Failure</span></span>

* <span data-ttu-id="5720f-399">**Protokolu aplikace:** aplikaci ' Počítač/WEBROOT/APPHOST/MY_APPLICATION' s kořenem fyzické "C:\\{umístění cesta}\' Nepodařilo se spustit proces s commandline"".\my_application.exe" ' kód chyby = ' 0x80070002: 0.</span><span class="sxs-lookup"><span data-stu-id="5720f-399">**Application Log:** Application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' with physical root 'C:\\{PATH}\' failed to start process with commandline '".\my_application.exe" ', ErrorCode = '0x80070002 : 0.</span></span>

* <span data-ttu-id="5720f-400">**ASP.NET Core modulu protokolu:** vytvořit soubor protokolu, ale prázdný</span><span class="sxs-lookup"><span data-stu-id="5720f-400">**ASP.NET Core Module Log:** Log file created but empty</span></span>

<span data-ttu-id="5720f-401">Řešení potíží:</span><span class="sxs-lookup"><span data-stu-id="5720f-401">Troubleshooting:</span></span>

* <span data-ttu-id="5720f-402">Potvrďte, že je aplikace spuštěná místně na Kestrel.</span><span class="sxs-lookup"><span data-stu-id="5720f-402">Confirm that the application runs locally on Kestrel.</span></span> <span data-ttu-id="5720f-403">Selhání procesu může být výsledkem problému v aplikaci.</span><span class="sxs-lookup"><span data-stu-id="5720f-403">A process failure might be the result of a problem within the application.</span></span> <span data-ttu-id="5720f-404">Další informace najdete v tématu [tipy pro odstraňování potíží](#troubleshooting-tips).</span><span class="sxs-lookup"><span data-stu-id="5720f-404">For more information, see [Troubleshooting tips](#troubleshooting-tips).</span></span>

* <span data-ttu-id="5720f-405">Zkontrolujte *processPath* atributu u `<aspNetCore>` element v *web.config* potvrďte, že je *dotnet* pro nasazení závislé na framework (disketové jednotky) nebo *.\my_application.exe* samostatná nasazení (SCD).</span><span class="sxs-lookup"><span data-stu-id="5720f-405">Check the *processPath* attribute on the `<aspNetCore>` element in *web.config* to confirm that it's *dotnet* for a framework-dependent deployment (FDD) or *.\my_application.exe* for a self-contained deployment (SCD).</span></span>

* <span data-ttu-id="5720f-406">Pro disketové jednotky *dotnet.exe* nemusí být přístupné přes nastavení cesty.</span><span class="sxs-lookup"><span data-stu-id="5720f-406">For an FDD, *dotnet.exe* might not be accessible via the PATH settings.</span></span> <span data-ttu-id="5720f-407">Potvrďte, že * C:\Program Files\dotnet\* existuje v systémové CESTĚ nastavení.</span><span class="sxs-lookup"><span data-stu-id="5720f-407">Confirm that *C:\Program Files\dotnet\* exists in the System PATH settings.</span></span>

* <span data-ttu-id="5720f-408">Pro disketové jednotky *dotnet.exe* nemusí být dostupná pro identitu uživatele fondu aplikací.</span><span class="sxs-lookup"><span data-stu-id="5720f-408">For an FDD, *dotnet.exe* might not be accessible for the user identity of the Application Pool.</span></span> <span data-ttu-id="5720f-409">Zkontrolujte, jestli uživatel identita fondu aplikací má přístup k *C:\Program Files\dotnet* adresáře.</span><span class="sxs-lookup"><span data-stu-id="5720f-409">Confirm that the AppPool user identity has access to the *C:\Program Files\dotnet* directory.</span></span> <span data-ttu-id="5720f-410">Potvrďte, že neexistují žádná pravidla odepření nakonfigurované pro identitu fondu aplikací uživatele na *C:\Program Files\dotnet* a adresáře aplikace.</span><span class="sxs-lookup"><span data-stu-id="5720f-410">Confirm that there are no deny rules configured for the AppPool user identity on the *C:\Program Files\dotnet* and application directories.</span></span>

* <span data-ttu-id="5720f-411">Můžete mít nasazené disketové jednotky a nainstalovat .NET Core bez restartování služby IIS.</span><span class="sxs-lookup"><span data-stu-id="5720f-411">You may have deployed an FDD and installed .NET Core without restarting IIS.</span></span> <span data-ttu-id="5720f-412">Restartujte server, nebo restartujte službu IIS tak, že spustíte **net stop byl /y** následuje **net start w3svc** z příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="5720f-412">Either restart the server or restart IIS by executing **net stop was /y** followed by **net start w3svc** from a command prompt.</span></span>

* <span data-ttu-id="5720f-413">Může mít nasazenou disketové jednotky bez instalace na .NET Core runtime v hostitelském systému.</span><span class="sxs-lookup"><span data-stu-id="5720f-413">You may have deployed an FDD without installing the .NET Core runtime on the hosting system.</span></span> <span data-ttu-id="5720f-414">Pokud se pokus o nasazení disketové jednotky a nenainstalovali na .NET Core runtime, spusťte **hostování v rozhraní .NET Core systému Windows Server instalační program sady** v systému.</span><span class="sxs-lookup"><span data-stu-id="5720f-414">If you're attempting to deploy a FDD and haven't installed the .NET Core runtime, run the **.NET Core Windows Server Hosting bundle installer** on the system.</span></span> <span data-ttu-id="5720f-415">V tématu [instalaci sady .NET jádra Windows serveru, který hostuje](#install-the-net-core-windows-server-hosting-bundle).</span><span class="sxs-lookup"><span data-stu-id="5720f-415">See [Install the .NET Core Windows Server Hosting bundle](#install-the-net-core-windows-server-hosting-bundle).</span></span> <span data-ttu-id="5720f-416">Pokud se pokoušíte nainstalovat na .NET Core runtime v systému bez připojení k Internetu, získat modul runtime z [.NET stáhne](https://www.microsoft.com/net/download/core) a spusťte instalační program hostování sady nainstalovat modul ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="5720f-416">If you're attempting to install the .NET Core runtime on a system without an Internet connection, obtain the runtime from [.NET Downloads](https://www.microsoft.com/net/download/core) and run the hosting bundle installer to install the ASP.NET Core Module.</span></span> <span data-ttu-id="5720f-417">Dokončete instalaci restartováním systému nebo restartování služby IIS tak, že spustíte **net stop byl /y** následuje **net start w3svc** z příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="5720f-417">Complete the installation by restarting the system or restarting IIS by executing **net stop was /y** followed by **net start w3svc** from a command prompt.</span></span>

* <span data-ttu-id="5720f-418">Můžete mít nasazené disketové jednotky a bez restartování systému služby IIS nainstalovat .NET Core.</span><span class="sxs-lookup"><span data-stu-id="5720f-418">You may have deployed an FDD and installed .NET Core without restarting the system/IIS.</span></span> <span data-ttu-id="5720f-419">Restartování systému nebo restartujte službu IIS tak, že spustíte **net stop byl /y** následuje **net start w3svc** z příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="5720f-419">Either restart the system or restart IIS by executing **net stop was /y** followed by **net start w3svc** from a command prompt.</span></span>

* <span data-ttu-id="5720f-420">Jste nasadili disketové jednotky a *Microsoft Visual C++ 2015 Redistributable (x64)* není nainstalovaná v systému.</span><span class="sxs-lookup"><span data-stu-id="5720f-420">You may have deployed an FDD and the *Microsoft Visual C++ 2015 Redistributable (x64)* is not installed on the system.</span></span> <span data-ttu-id="5720f-421">Můžete získat z instalačního programu [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=53840).</span><span class="sxs-lookup"><span data-stu-id="5720f-421">You may obtain an installer from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=53840).</span></span>

### <a name="incorrect-arguments-of-aspnetcore-element"></a><span data-ttu-id="5720f-422">Nesprávný argumenty \<aspNetCore\> – element</span><span class="sxs-lookup"><span data-stu-id="5720f-422">Incorrect arguments of \<aspNetCore\> element</span></span>

* <span data-ttu-id="5720f-423">**Prohlížeč:** chyb HTTP 502.5 - selhání procesu</span><span class="sxs-lookup"><span data-stu-id="5720f-423">**Browser:** HTTP Error 502.5 - Process Failure</span></span>

* <span data-ttu-id="5720f-424">**Protokolu aplikace:** aplikaci ' Počítač/WEBROOT/APPHOST/MY_APPLICATION' s kořenem fyzické "C:\\{umístění cesta}\' Nepodařilo se spustit proces s commandline"dotnet".\my_application.dll, kód chyby = ' 0x80004005: 80008081.</span><span class="sxs-lookup"><span data-stu-id="5720f-424">**Application Log:** Application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' with physical root 'C:\\{PATH}\' failed to start process with commandline '"dotnet" .\my_application.dll', ErrorCode = '0x80004005 : 80008081.</span></span>

* <span data-ttu-id="5720f-425">**ASP.NET Core modulu protokolu:** aplikace provést neexistuje: "PATH\my_application.dll.</span><span class="sxs-lookup"><span data-stu-id="5720f-425">**ASP.NET Core Module Log:** The application to execute does not exist: 'PATH\my_application.dll'</span></span>

<span data-ttu-id="5720f-426">Řešení potíží:</span><span class="sxs-lookup"><span data-stu-id="5720f-426">Troubleshooting:</span></span>

* <span data-ttu-id="5720f-427">Potvrďte, že je aplikace spuštěná místně na Kestrel.</span><span class="sxs-lookup"><span data-stu-id="5720f-427">Confirm that the application runs locally on Kestrel.</span></span> <span data-ttu-id="5720f-428">Selhání procesu může být výsledkem problému v aplikaci.</span><span class="sxs-lookup"><span data-stu-id="5720f-428">A process failure might be the result of a problem within the application.</span></span> <span data-ttu-id="5720f-429">Další informace najdete v tématu [tipy pro odstraňování potíží](#troubleshooting-tips).</span><span class="sxs-lookup"><span data-stu-id="5720f-429">For more information, see [Troubleshooting tips](#troubleshooting-tips).</span></span>

* <span data-ttu-id="5720f-430">Zkontrolujte *argumenty* atributu u `<aspNetCore>` element v *web.config* potvrďte, že je buď (a) *.\my_application.dll* pro závislém framework nasazení (disketové jednotky); nebo (b) není k dispozici, prázdný řetězec (*argumenty = ""*), nebo seznam argumentů vaší aplikace (*argumenty = "arg1 arg2,..."*) pro samostatný nasazení (SCD).</span><span class="sxs-lookup"><span data-stu-id="5720f-430">Examine the *arguments* attribute on the `<aspNetCore>` element in *web.config* to confirm that it is either (a) *.\my_application.dll* for a framework-dependent deployment (FDD); or (b) not present, an empty string (*arguments=""*), or a list of your app's arguments (*arguments="arg1, arg2, ..."*) for a self-contained deployment (SCD).</span></span>

### <a name="missing-net-framework-version"></a><span data-ttu-id="5720f-431">Chybějící verze rozhraní .NET Framework</span><span class="sxs-lookup"><span data-stu-id="5720f-431">Missing .NET Framework version</span></span>

* <span data-ttu-id="5720f-432">**Prohlížeč:** 502.3 Chybná brána - došlo k chybě připojení při pokusu o pro směrování požadavku.</span><span class="sxs-lookup"><span data-stu-id="5720f-432">**Browser:** 502.3 Bad Gateway - There was a connection error while trying to route the request.</span></span>

* <span data-ttu-id="5720f-433">**Protokolu aplikace:** kód chyby = ' MACHINE/WEBROOT/APPHOST/MY_APPLICATION' aplikace s kořenem fyzické "C:\\{umístění cesta}\' Nepodařilo se spustit proces s commandline"dotnet".\my_application.dll, kód chyby = ' 0x80004005: 80008081.</span><span class="sxs-lookup"><span data-stu-id="5720f-433">**Application Log:** ErrorCode = Application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' with physical root 'C:\\{PATH}\' failed to start process with commandline '"dotnet" .\my_application.dll', ErrorCode = '0x80004005 : 80008081.</span></span>

* <span data-ttu-id="5720f-434">**ASP.NET Core modulu protokolu:** chybí výjimka metoda, soubor nebo sestavení.</span><span class="sxs-lookup"><span data-stu-id="5720f-434">**ASP.NET Core Module Log:** Missing method, file, or assembly exception.</span></span> <span data-ttu-id="5720f-435">Metoda, soubor nebo sestavení. výjimkou je metoda rozhraní .NET Framework, soubor nebo sestavení.</span><span class="sxs-lookup"><span data-stu-id="5720f-435">The method, file, or assembly specified in the exception is a .NET Framework method, file, or assembly.</span></span>

<span data-ttu-id="5720f-436">Řešení potíží:</span><span class="sxs-lookup"><span data-stu-id="5720f-436">Troubleshooting:</span></span>

* <span data-ttu-id="5720f-437">Nainstalujte verzi rozhraní .NET Framework chybí ze systému.</span><span class="sxs-lookup"><span data-stu-id="5720f-437">Install the .NET Framework version missing from the system.</span></span>

* <span data-ttu-id="5720f-438">Pro nasazení závislé na framework (disketové jednotky) potvrďte, že správné runtime v systému nainstalována.</span><span class="sxs-lookup"><span data-stu-id="5720f-438">For a framework-dependent deployment (FDD), confirm that you have the correct runtime installed on the system.</span></span> <span data-ttu-id="5720f-439">Pokud upgradujete z verze 1.1 projektu na 2.0, nasazení do hostujícího systému a přijímat výjimku, ujistěte se, že nainstalujte rozhraní framework 2.0 v hostitelském systému.</span><span class="sxs-lookup"><span data-stu-id="5720f-439">If you upgrade a project from 1.1 to 2.0, deploy to the hosting system, and receive this exception, ensure you install the 2.0 framework on the hosting system.</span></span>

### <a name="stopped-application-pool"></a><span data-ttu-id="5720f-440">Zastavený fond aplikací</span><span class="sxs-lookup"><span data-stu-id="5720f-440">Stopped Application Pool</span></span>

* <span data-ttu-id="5720f-441">**Prohlížeč:** 503 Služba nedostupná</span><span class="sxs-lookup"><span data-stu-id="5720f-441">**Browser:** 503 Service Unavailable</span></span>

* <span data-ttu-id="5720f-442">**Protokolu aplikace:** žádná položka</span><span class="sxs-lookup"><span data-stu-id="5720f-442">**Application Log:** No entry</span></span>

* <span data-ttu-id="5720f-443">**ASP.NET Core modulu protokolu:** vytvoření souboru protokolu</span><span class="sxs-lookup"><span data-stu-id="5720f-443">**ASP.NET Core Module Log:** Log file not created</span></span>

<span data-ttu-id="5720f-444">Poradce při potížích</span><span class="sxs-lookup"><span data-stu-id="5720f-444">Troubleshooting</span></span>

* <span data-ttu-id="5720f-445">Potvrďte, že není ve fondu aplikací *Zastaveno* stavu.</span><span class="sxs-lookup"><span data-stu-id="5720f-445">Confirm that the Application Pool is not in the *Stopped* state.</span></span>

### <a name="iis-integration-middleware-not-implemented"></a><span data-ttu-id="5720f-446">Middleware integrační služby IIS není implementováno</span><span class="sxs-lookup"><span data-stu-id="5720f-446">IIS Integration middleware not implemented</span></span>

* <span data-ttu-id="5720f-447">**Prohlížeč:** chyb HTTP 502.5 - selhání procesu</span><span class="sxs-lookup"><span data-stu-id="5720f-447">**Browser:** HTTP Error 502.5 - Process Failure</span></span>

* <span data-ttu-id="5720f-448">**Protokolu aplikace:** aplikaci ' Počítač/WEBROOT/APPHOST/MY_APPLICATION' s kořenem fyzické "C:\\{umístění cesta}\' vytvořené proces pomocí příkazového řádku se" C:\\\my_application {umístění cesta}. { exe | dll} ", ale buď došlo k chybě nebo nebyla odezvy nebo není naslouchat na zadaný port '{PORT}', kód chyby = '0x800705b4.</span><span class="sxs-lookup"><span data-stu-id="5720f-448">**Application Log:** Application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' with physical root 'C:\\{PATH}\' created process with commandline '"C:\\{PATH}\my_application.{exe|dll}" ' but either crashed or did not reponse or did not listen on the given port '{PORT}', ErrorCode = '0x800705b4'</span></span>

* <span data-ttu-id="5720f-449">**ASP.NET Core modulu protokolu:** vytvořit soubor protokolu a zobrazuje normálního provozu.</span><span class="sxs-lookup"><span data-stu-id="5720f-449">**ASP.NET Core Module Log:** Log file created and shows normal operation.</span></span>

<span data-ttu-id="5720f-450">Poradce při potížích</span><span class="sxs-lookup"><span data-stu-id="5720f-450">Troubleshooting</span></span>

* <span data-ttu-id="5720f-451">Potvrďte, že aplikace běží místně na Kestrel.</span><span class="sxs-lookup"><span data-stu-id="5720f-451">Confirm that the app runs locally on Kestrel.</span></span> <span data-ttu-id="5720f-452">Selhání procesu může být výsledkem problému v rámci aplikace.</span><span class="sxs-lookup"><span data-stu-id="5720f-452">A process failure might be the result of a problem within the app.</span></span> <span data-ttu-id="5720f-453">Další informace najdete v tématu [tipy pro odstraňování potíží](#troubleshooting-tips).</span><span class="sxs-lookup"><span data-stu-id="5720f-453">For more information, see [Troubleshooting tips](#troubleshooting-tips).</span></span>

* <span data-ttu-id="5720f-454">Potvrďte, že jste správně odkazuje middleware integrační služby IIS voláním *. UseIISIntegration()* metodu aplikace *WebHostBuilder()* (ASP.NET Core 1.x) nebo používat `CreateDefaultBuilder` – metoda (ASP.NET Core 2.x).</span><span class="sxs-lookup"><span data-stu-id="5720f-454">Confirm that you've correctly referenced the IIS Integration middleware by calling the *.UseIISIntegration()* method on the application's *WebHostBuilder()* (ASP.NET Core 1.x) or used the `CreateDefaultBuilder` method (ASP.NET Core 2.x).</span></span> <span data-ttu-id="5720f-455">V tématu [hostování v ASP.NET Core](xref:fundamentals/hosting) podrobnosti.</span><span class="sxs-lookup"><span data-stu-id="5720f-455">See [Hosting in ASP.NET Core](xref:fundamentals/hosting) for details.</span></span>

### <a name="sub-application-includes-a-handlers-section"></a><span data-ttu-id="5720f-456">Obsahuje dílčí aplikace \<obslužné rutiny\> části</span><span class="sxs-lookup"><span data-stu-id="5720f-456">Sub-application includes a \<handlers\> section</span></span>

* <span data-ttu-id="5720f-457">**Prohlížeč:** Chyba protokolu HTTP 500.19 – vnitřní chyba serveru</span><span class="sxs-lookup"><span data-stu-id="5720f-457">**Browser:** HTTP Error 500.19 - Internal Server Error</span></span>

* <span data-ttu-id="5720f-458">**Protokolu aplikace:** žádná položka</span><span class="sxs-lookup"><span data-stu-id="5720f-458">**Application Log:** No entry</span></span>

* <span data-ttu-id="5720f-459">**ASP.NET Core modulu protokolu:** vytvořit soubor protokolu a zobrazuje normálního provozu pro kořenové aplikace.</span><span class="sxs-lookup"><span data-stu-id="5720f-459">**ASP.NET Core Module Log:** Log file created and shows normal operation for the root application.</span></span> <span data-ttu-id="5720f-460">Soubor protokolu nebyl vytvořen pro dílčí aplikace.</span><span class="sxs-lookup"><span data-stu-id="5720f-460">Log file not created for the sub-application.</span></span>

<span data-ttu-id="5720f-461">Poradce při potížích</span><span class="sxs-lookup"><span data-stu-id="5720f-461">Troubleshooting</span></span>

* <span data-ttu-id="5720f-462">Potvrďte, že dílčí aplikace *web.config* soubor neobsahuje `<handlers>` části.</span><span class="sxs-lookup"><span data-stu-id="5720f-462">Confirm that the sub-app's *web.config* file doesn't include a `<handlers>` section.</span></span>

### <a name="application-configuration-general-issue"></a><span data-ttu-id="5720f-463">Obecné problém konfigurace aplikace</span><span class="sxs-lookup"><span data-stu-id="5720f-463">Application configuration general issue</span></span>

* <span data-ttu-id="5720f-464">**Prohlížeč:** chyb HTTP 502.5 - selhání procesu</span><span class="sxs-lookup"><span data-stu-id="5720f-464">**Browser:** HTTP Error 502.5 - Process Failure</span></span>

* <span data-ttu-id="5720f-465">**Protokolu aplikace:** aplikaci ' Počítač/WEBROOT/APPHOST/MY_APPLICATION' s kořenem fyzické "C:\\{umístění cesta}\' vytvořené proces pomocí příkazového řádku se" C:\\\my_application {umístění cesta}. { exe | dll} ", ale buď došlo k chybě nebo nebyla odezvy nebo není naslouchat na zadaný port '{PORT}', kód chyby = '0x800705b4.</span><span class="sxs-lookup"><span data-stu-id="5720f-465">**Application Log:** Application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' with physical root 'C:\\{PATH}\' created process with commandline '"C:\\{PATH}\my_application.{exe|dll}" ' but either crashed or did not reponse or did not listen on the given port '{PORT}', ErrorCode = '0x800705b4'</span></span>

* <span data-ttu-id="5720f-466">**ASP.NET Core modulu protokolu:** vytvořit soubor protokolu, ale prázdný</span><span class="sxs-lookup"><span data-stu-id="5720f-466">**ASP.NET Core Module Log:** Log file created but empty</span></span>

<span data-ttu-id="5720f-467">Poradce při potížích</span><span class="sxs-lookup"><span data-stu-id="5720f-467">Troubleshooting</span></span>

* <span data-ttu-id="5720f-468">Tato obecná výjimka označuje, že proces se nepodařilo spustit, pravděpodobně z důvodu chyby konfigurace aplikace.</span><span class="sxs-lookup"><span data-stu-id="5720f-468">This general exception indicates that the process failed to start, most likely due to an application configuration issue.</span></span> <span data-ttu-id="5720f-469">Odkazy na [adresářovou strukturu](xref:hosting/directory-structure), potvrďte, že vaše aplikace nasazená soubory a složky, které jsou vhodné, a zda jsou přítomné soubory konfigurace vaší aplikace a obsahovat správná nastavení pro aplikace a prostředí.</span><span class="sxs-lookup"><span data-stu-id="5720f-469">Referring to [Directory Structure](xref:hosting/directory-structure), confirm that your app's deployed files and folders are appropriate and that your app's configuration files are present and contain the correct settings for your app and environment.</span></span> <span data-ttu-id="5720f-470">Další informace najdete v tématu [tipy pro odstraňování potíží](#troubleshooting-tips).</span><span class="sxs-lookup"><span data-stu-id="5720f-470">For more information, see [Troubleshooting tips](#troubleshooting-tips).</span></span>

## <a name="resources"></a><span data-ttu-id="5720f-471">Prostředky</span><span class="sxs-lookup"><span data-stu-id="5720f-471">Resources</span></span>

* [<span data-ttu-id="5720f-472">Úvod do modulu ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="5720f-472">Introduction to ASP.NET Core Module</span></span>](xref:fundamentals/servers/aspnet-core-module)
* [<span data-ttu-id="5720f-473">Odkaz na konfiguraci základní modul ASP.NET</span><span class="sxs-lookup"><span data-stu-id="5720f-473">ASP.NET Core Module configuration reference</span></span>](xref:hosting/aspnet-core-module)
* [<span data-ttu-id="5720f-474">Moduly služby IIS pomocí ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="5720f-474">Using IIS Modules with ASP.NET Core</span></span>](xref:hosting/iis-modules)
* [<span data-ttu-id="5720f-475">Úvod do ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="5720f-475">Introduction to ASP.NET Core</span></span>](../index.md)
* [<span data-ttu-id="5720f-476">Lokality oficiální Microsoft IIS</span><span class="sxs-lookup"><span data-stu-id="5720f-476">The Official Microsoft IIS Site</span></span>](https://www.iis.net/)
* [<span data-ttu-id="5720f-477">Microsoft TechNet Library: Windows Server</span><span class="sxs-lookup"><span data-stu-id="5720f-477">Microsoft TechNet Library: Windows Server</span></span>](https://docs.microsoft.com/windows-server/windows-server-versions)
