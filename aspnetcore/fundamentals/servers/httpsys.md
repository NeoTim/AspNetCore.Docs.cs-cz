---
<span data-ttu-id="cc8c6-101">Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-101">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="cc8c6-102">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-102">'Blazor'</span></span>
- <span data-ttu-id="cc8c6-103">'Identity'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-103">'Identity'</span></span>
- <span data-ttu-id="cc8c6-104">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-104">'Let's Encrypt'</span></span>
- <span data-ttu-id="cc8c6-105">'Razor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-105">'Razor'</span></span>
- <span data-ttu-id="cc8c6-106">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-106">'SignalR' uid:</span></span> 

---
# <a name="httpsys-web-server-implementation-in-aspnet-core"></a><span data-ttu-id="cc8c6-107">Implementace webového serveru HTTP. sys v ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="cc8c6-107">HTTP.sys web server implementation in ASP.NET Core</span></span>

<span data-ttu-id="cc8c6-108">[Dykstra](https://github.com/tdykstra) a [Chris Rossův](https://github.com/Tratcher)</span><span class="sxs-lookup"><span data-stu-id="cc8c6-108">By [Tom Dykstra](https://github.com/tdykstra) and [Chris Ross](https://github.com/Tratcher)</span></span>

::: moniker range=">= aspnetcore-3.1"

<span data-ttu-id="cc8c6-109">[Http. sys](/iis/get-started/introduction-to-iis/introduction-to-iis-architecture#hypertext-transfer-protocol-stack-httpsys) je [webový server pro ASP.NET Core](xref:fundamentals/servers/index) , který běží pouze v systému Windows.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-109">[HTTP.sys](/iis/get-started/introduction-to-iis/introduction-to-iis-architecture#hypertext-transfer-protocol-stack-httpsys) is a [web server for ASP.NET Core](xref:fundamentals/servers/index) that only runs on Windows.</span></span> <span data-ttu-id="cc8c6-110">HTTP. sys je alternativou k serveru [Kestrel](xref:fundamentals/servers/kestrel) a nabízí některé funkce, které Kestrel neposkytuje.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-110">HTTP.sys is an alternative to [Kestrel](xref:fundamentals/servers/kestrel) server and offers some features that Kestrel doesn't provide.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="cc8c6-111">HTTP. sys není kompatibilní s [modulem ASP.NET Core](xref:host-and-deploy/aspnet-core-module) a nedá se použít se službou IIS nebo IIS Express.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-111">HTTP.sys isn't compatible with the [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module) and can't be used with IIS or IIS Express.</span></span>

<span data-ttu-id="cc8c6-112">HTTP. sys podporuje následující funkce:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-112">HTTP.sys supports the following features:</span></span>

* [<span data-ttu-id="cc8c6-113">Ověřování systému Windows</span><span class="sxs-lookup"><span data-stu-id="cc8c6-113">Windows Authentication</span></span>](xref:security/authentication/windowsauth)
* <span data-ttu-id="cc8c6-114">Sdílení portů</span><span class="sxs-lookup"><span data-stu-id="cc8c6-114">Port sharing</span></span>
* <span data-ttu-id="cc8c6-115">HTTPS s SNI</span><span class="sxs-lookup"><span data-stu-id="cc8c6-115">HTTPS with SNI</span></span>
* <span data-ttu-id="cc8c6-116">HTTP/2 přes TLS (Windows 10 nebo novější)</span><span class="sxs-lookup"><span data-stu-id="cc8c6-116">HTTP/2 over TLS (Windows 10 or later)</span></span>
* <span data-ttu-id="cc8c6-117">Přímý přenos souborů</span><span class="sxs-lookup"><span data-stu-id="cc8c6-117">Direct file transmission</span></span>
* <span data-ttu-id="cc8c6-118">Ukládání odpovědí do mezipaměti</span><span class="sxs-lookup"><span data-stu-id="cc8c6-118">Response caching</span></span>
* <span data-ttu-id="cc8c6-119">WebSockets (Windows 8 nebo novější)</span><span class="sxs-lookup"><span data-stu-id="cc8c6-119">WebSockets (Windows 8 or later)</span></span>

<span data-ttu-id="cc8c6-120">Podporované verze systému Windows:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-120">Supported Windows versions:</span></span>

* <span data-ttu-id="cc8c6-121">Windows 7 nebo novější</span><span class="sxs-lookup"><span data-stu-id="cc8c6-121">Windows 7 or later</span></span>
* <span data-ttu-id="cc8c6-122">Windows Server 2008 R2 nebo novější</span><span class="sxs-lookup"><span data-stu-id="cc8c6-122">Windows Server 2008 R2 or later</span></span>

<span data-ttu-id="cc8c6-123">[Zobrazit nebo stáhnout ukázkový kód](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/servers/httpsys/samples) ([Jak stáhnout](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="cc8c6-123">[View or download sample code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/servers/httpsys/samples) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="when-to-use-httpsys"></a><span data-ttu-id="cc8c6-124">Kdy použít protokol HTTP. sys</span><span class="sxs-lookup"><span data-stu-id="cc8c6-124">When to use HTTP.sys</span></span>

<span data-ttu-id="cc8c6-125">HTTP. sys je užitečné pro nasazení, kde:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-125">HTTP.sys is useful for deployments where:</span></span>

* <span data-ttu-id="cc8c6-126">Server je potřeba zveřejnit přímo na internetu bez použití IIS.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-126">There's a need to expose the server directly to the Internet without using IIS.</span></span>

  ![HTTP. sys komunikuje přímo s internetem.](httpsys/_static/httpsys-to-internet.png)

* <span data-ttu-id="cc8c6-128">Interní nasazení vyžaduje funkci, která není v Kestrel k dispozici, jako je například [ověřování systému Windows](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-128">An internal deployment requires a feature not available in Kestrel, such as [Windows Authentication](xref:security/authentication/windowsauth).</span></span>

  ![HTTP. sys komunikuje přímo s interní sítí.](httpsys/_static/httpsys-to-internal.png)

<span data-ttu-id="cc8c6-130">HTTP. sys je Vyspělá technologie, která chrání před mnoha typy útoků a poskytuje odolnost, zabezpečení a škálovatelnost plně funkčního webového serveru.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-130">HTTP.sys is mature technology that protects against many types of attacks and provides the robustness, security, and scalability of a full-featured web server.</span></span> <span data-ttu-id="cc8c6-131">Samotná služba IIS běží jako naslouchací proces HTTP nad HTTP. sys.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-131">IIS itself runs as an HTTP listener on top of HTTP.sys.</span></span>

## <a name="http2-support"></a><span data-ttu-id="cc8c6-132">Podpora HTTP/2</span><span class="sxs-lookup"><span data-stu-id="cc8c6-132">HTTP/2 support</span></span>

<span data-ttu-id="cc8c6-133">[Protokol HTTP/2](https://httpwg.org/specs/rfc7540.html) je povolený pro aplikace ASP.NET Core, pokud jsou splněné následující základní požadavky:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-133">[HTTP/2](https://httpwg.org/specs/rfc7540.html) is enabled for ASP.NET Core apps if the following base requirements are met:</span></span>

* <span data-ttu-id="cc8c6-134">Windows Server 2016/Windows 10 nebo novější</span><span class="sxs-lookup"><span data-stu-id="cc8c6-134">Windows Server 2016/Windows 10 or later</span></span>
* <span data-ttu-id="cc8c6-135">Připojení [ALPN (Application-Layer Protocol Negotiation)](https://tools.ietf.org/html/rfc7301#section-3)</span><span class="sxs-lookup"><span data-stu-id="cc8c6-135">[Application-Layer Protocol Negotiation (ALPN)](https://tools.ietf.org/html/rfc7301#section-3) connection</span></span>
* <span data-ttu-id="cc8c6-136">Připojení TLS 1,2 nebo novější</span><span class="sxs-lookup"><span data-stu-id="cc8c6-136">TLS 1.2 or later connection</span></span>

<span data-ttu-id="cc8c6-137">Pokud je vytvořeno připojení HTTP/2, sestavy [HttpRequest. Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) `HTTP/2` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-137">If an HTTP/2 connection is established, [HttpRequest.Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) reports `HTTP/2`.</span></span>

<span data-ttu-id="cc8c6-138">HTTP/2 je ve výchozím nastavení povolené.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-138">HTTP/2 is enabled by default.</span></span> <span data-ttu-id="cc8c6-139">Pokud připojení HTTP/2 není navázáno, připojení se vrátí k HTTP/1.1.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-139">If an HTTP/2 connection isn't established, the connection falls back to HTTP/1.1.</span></span> <span data-ttu-id="cc8c6-140">V budoucí verzi Windows budou k dispozici příznaky konfigurace protokolu HTTP/2, včetně možnosti zakázat protokol HTTP/2 s protokolem HTTP. sys.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-140">In a future release of Windows, HTTP/2 configuration flags will be available, including the ability to disable HTTP/2 with HTTP.sys.</span></span>

## <a name="kernel-mode-authentication-with-kerberos"></a><span data-ttu-id="cc8c6-141">Ověřování v režimu jádra pomocí protokolu Kerberos</span><span class="sxs-lookup"><span data-stu-id="cc8c6-141">Kernel mode authentication with Kerberos</span></span>

<span data-ttu-id="cc8c6-142">Delegáti HTTP. sys se připravují ověřování režimu jádra pomocí ověřovacího protokolu Kerberos.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-142">HTTP.sys delegates to kernel mode authentication with the Kerberos authentication protocol.</span></span> <span data-ttu-id="cc8c6-143">Ověřování v uživatelském režimu se v protokolech Kerberos a HTTP. sys nepodporuje.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-143">User mode authentication isn't supported with Kerberos and HTTP.sys.</span></span> <span data-ttu-id="cc8c6-144">Účet počítače se musí použít k dešifrování tokenu nebo lístku protokolu Kerberos, který je získaný ze služby Active Directory a který přesměruje klient na server za účelem ověření uživatele.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-144">The machine account must be used to decrypt the Kerberos token/ticket that's obtained from Active Directory and forwarded by the client to the server to authenticate the user.</span></span> <span data-ttu-id="cc8c6-145">Zaregistrujte hlavní název služby (SPN) pro hostitele, nikoli uživatele aplikace.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-145">Register the Service Principal Name (SPN) for the host, not the user of the app.</span></span>

## <a name="how-to-use-httpsys"></a><span data-ttu-id="cc8c6-146">Jak používat HTTP. sys</span><span class="sxs-lookup"><span data-stu-id="cc8c6-146">How to use HTTP.sys</span></span>

### <a name="configure-the-aspnet-core-app-to-use-httpsys"></a><span data-ttu-id="cc8c6-147">Konfigurace aplikace ASP.NET Core pro použití HTTP. sys</span><span class="sxs-lookup"><span data-stu-id="cc8c6-147">Configure the ASP.NET Core app to use HTTP.sys</span></span>

<span data-ttu-id="cc8c6-148"><xref:Microsoft.AspNetCore.Hosting.WebHostBuilderHttpSysExtensions.UseHttpSys*>Při sestavování hostitele zavolejte metodu rozšíření a určete požadované <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions> .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-148">Call the <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderHttpSysExtensions.UseHttpSys*> extension method when building the host, specifying any required <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions>.</span></span> <span data-ttu-id="cc8c6-149">Následující příklad nastaví možnosti na jejich výchozí hodnoty:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-149">The following example sets options to their default values:</span></span>

[!code-csharp[](httpsys/samples/3.x/SampleApp/Program.cs?name=snippet1&highlight=5-13)]

<span data-ttu-id="cc8c6-150">Další konfiguraci HTTP. sys bude zpracována prostřednictvím [nastavení registru](https://support.microsoft.com/help/820129/http-sys-registry-settings-for-windows).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-150">Additional HTTP.sys configuration is handled through [registry settings](https://support.microsoft.com/help/820129/http-sys-registry-settings-for-windows).</span></span>

<span data-ttu-id="cc8c6-151">**Možnosti HTTP. sys**</span><span class="sxs-lookup"><span data-stu-id="cc8c6-151">**HTTP.sys options**</span></span>

| <span data-ttu-id="cc8c6-152">Vlastnost</span><span class="sxs-lookup"><span data-stu-id="cc8c6-152">Property</span></span> | <span data-ttu-id="cc8c6-153">Description</span><span class="sxs-lookup"><span data-stu-id="cc8c6-153">Description</span></span> | <span data-ttu-id="cc8c6-154">Výchozí</span><span class="sxs-lookup"><span data-stu-id="cc8c6-154">Default</span></span> |
| ---
<span data-ttu-id="cc8c6-155">Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-155">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="cc8c6-156">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-156">'Blazor'</span></span>
- <span data-ttu-id="cc8c6-157">'Identity'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-157">'Identity'</span></span>
- <span data-ttu-id="cc8c6-158">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-158">'Let's Encrypt'</span></span>
- <span data-ttu-id="cc8c6-159">'Razor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-159">'Razor'</span></span>
- <span data-ttu-id="cc8c6-160">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-160">'SignalR' uid:</span></span> 

-
<span data-ttu-id="cc8c6-161">Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-161">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="cc8c6-162">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-162">'Blazor'</span></span>
- <span data-ttu-id="cc8c6-163">'Identity'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-163">'Identity'</span></span>
- <span data-ttu-id="cc8c6-164">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-164">'Let's Encrypt'</span></span>
- <span data-ttu-id="cc8c6-165">'Razor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-165">'Razor'</span></span>
- <span data-ttu-id="cc8c6-166">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-166">'SignalR' uid:</span></span> 

<span data-ttu-id="cc8c6-167">---- | ---Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-167">---- | --- title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="cc8c6-168">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-168">'Blazor'</span></span>
- <span data-ttu-id="cc8c6-169">'Identity'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-169">'Identity'</span></span>
- <span data-ttu-id="cc8c6-170">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-170">'Let's Encrypt'</span></span>
- <span data-ttu-id="cc8c6-171">'Razor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-171">'Razor'</span></span>
- <span data-ttu-id="cc8c6-172">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-172">'SignalR' uid:</span></span> 

-
<span data-ttu-id="cc8c6-173">Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-173">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="cc8c6-174">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-174">'Blazor'</span></span>
- <span data-ttu-id="cc8c6-175">'Identity'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-175">'Identity'</span></span>
- <span data-ttu-id="cc8c6-176">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-176">'Let's Encrypt'</span></span>
- <span data-ttu-id="cc8c6-177">'Razor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-177">'Razor'</span></span>
- <span data-ttu-id="cc8c6-178">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-178">'SignalR' uid:</span></span> 

-
<span data-ttu-id="cc8c6-179">Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-179">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="cc8c6-180">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-180">'Blazor'</span></span>
- <span data-ttu-id="cc8c6-181">'Identity'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-181">'Identity'</span></span>
- <span data-ttu-id="cc8c6-182">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-182">'Let's Encrypt'</span></span>
- <span data-ttu-id="cc8c6-183">'Razor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-183">'Razor'</span></span>
- <span data-ttu-id="cc8c6-184">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-184">'SignalR' uid:</span></span> 

<span data-ttu-id="cc8c6-185">------ | :-----: | | [AllowSynchronousIO](xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.AllowSynchronousIO) | Určuje, zda je povolen synchronní vstup/výstup pro `HttpContext.Request.Body` a `HttpContext.Response.Body` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-185">------ | :-----: | | [AllowSynchronousIO](xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.AllowSynchronousIO) | Control whether synchronous input/output is allowed for the `HttpContext.Request.Body` and `HttpContext.Response.Body`.</span></span><span data-ttu-id="cc8c6-186"> | `false`| | [Ověřování. AllowAnonymous](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationManager.AllowAnonymous) | Povoluje anonymní požadavky.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-186"> | `false` | | [Authentication.AllowAnonymous](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationManager.AllowAnonymous) | Allow anonymous requests.</span></span><span data-ttu-id="cc8c6-187"> | `true`| | [Ověřování. schémata](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationManager.Schemes) | Určete povolená schémata ověřování.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-187"> | `true` | | [Authentication.Schemes](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationManager.Schemes) | Specify the allowed authentication schemes.</span></span> <span data-ttu-id="cc8c6-188">Může být kdykoli změněno před vyřazením naslouchacího procesu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-188">May be modified at any time prior to disposing the listener.</span></span> <span data-ttu-id="cc8c6-189">Hodnoty jsou k dispozici ve [výčtu schémata AuthenticationSchemes](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationSchemes): `Basic` , `Kerberos` , `Negotiate` , `None` a `NTLM` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-189">Values are provided by the [AuthenticationSchemes enum](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationSchemes): `Basic`, `Kerberos`, `Negotiate`, `None`, and `NTLM`.</span></span><span data-ttu-id="cc8c6-190"> | `None`| | [EnableResponseCaching](xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.EnableResponseCaching) | Pokusit se o ukládání do mezipaměti v [režimu jádra](/windows-hardware/drivers/gettingstarted/user-mode-and-kernel-mode) pro odpovědi s oprávněnými záhlavími.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-190"> | `None` | | [EnableResponseCaching](xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.EnableResponseCaching) | Attempt [kernel-mode](/windows-hardware/drivers/gettingstarted/user-mode-and-kernel-mode) caching for responses with eligible headers.</span></span> <span data-ttu-id="cc8c6-191">Odpověď nesmí obsahovat `Set-Cookie` `Vary` hlavičky, ani `Pragma` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-191">The response may not include `Set-Cookie`, `Vary`, or `Pragma` headers.</span></span> <span data-ttu-id="cc8c6-192">Musí obsahovat `Cache-Control` hlavičku, která je `public` a buď `shared-max-age` `max-age` hodnota nebo, nebo `Expires` záhlaví.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-192">It must include a `Cache-Control` header that's `public` and either a `shared-max-age` or `max-age` value, or an `Expires` header.</span></span><span data-ttu-id="cc8c6-193"> | `true`| | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxAccepts> | Maximální počet souběžných přijetí.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-193"> | `true` | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxAccepts> | The maximum number of concurrent accepts.</span></span> <span data-ttu-id="cc8c6-194">| 5 &times; [prostředí. <br> ProcessorCount](xref:System.Environment.ProcessorCount) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxConnections> | Maximální počet souběžných připojení, která se mají přijmout</span><span class="sxs-lookup"><span data-stu-id="cc8c6-194">| 5 &times; [Environment.<br>ProcessorCount](xref:System.Environment.ProcessorCount) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxConnections> | The maximum number of concurrent connections to accept.</span></span> <span data-ttu-id="cc8c6-195">Použijte `-1` pro nekonečné.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-195">Use `-1` for infinite.</span></span> <span data-ttu-id="cc8c6-196">Použijte `null` k použití nastavení pro počítač v rámci registru.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-196">Use `null` to use the registry's machine-wide setting.</span></span> | `null`<br><span data-ttu-id="cc8c6-197">(počítačově v šířce</span><span class="sxs-lookup"><span data-stu-id="cc8c6-197">(machine-wide</span></span><br><span data-ttu-id="cc8c6-198">nastavení) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> | Viz část <a href="#maxrequestbodysize">MaxRequestBodySize</a> .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-198">setting) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> | See the <a href="#maxrequestbodysize">MaxRequestBodySize</a> section.</span></span> <span data-ttu-id="cc8c6-199">| 30000000 bajtů</span><span class="sxs-lookup"><span data-stu-id="cc8c6-199">| 30000000 bytes</span></span><br><span data-ttu-id="cc8c6-200">(~ 28,6 MB) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.RequestQueueLimit> | Maximální počet požadavků, které lze zařadit do fronty.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-200">(~28.6 MB) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.RequestQueueLimit> | The maximum number of requests that can be queued.</span></span> <span data-ttu-id="cc8c6-201">| 1000 | | `RequestQueueMode` | Označuje, zda je server zodpovědný za vytvoření a konfiguraci fronty požadavků nebo zda se má připojit k existující frontě.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-201">| 1000 | | `RequestQueueMode` | This indicates whether the server is responsible for creating and configuring the request queue, or if it should attach to an existing queue.</span></span><br><span data-ttu-id="cc8c6-202">Většina stávajících možností konfigurace se nedá použít při připojování k existující frontě.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-202">Most existing configuration options do not apply when attaching to an existing queue.</span></span><span data-ttu-id="cc8c6-203"> | `RequestQueueMode.Create`| | `RequestQueueName` | Název fronty požadavků HTTP. sys.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-203"> | `RequestQueueMode.Create` | | `RequestQueueName` | The name of the HTTP.sys request queue.</span></span><span data-ttu-id="cc8c6-204"> | `null`(Anonymní fronta) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.ThrowWriteExceptions> | Určuje, jestli tělo odpovědi zapisuje, které selhalo kvůli odpojení klienta, by mělo vyvolat výjimky nebo dokončit normálně.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-204"> | `null` (Anonymous queue) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.ThrowWriteExceptions> | Indicate if response body writes that fail due to client disconnects should throw exceptions or complete normally.</span></span> | `false`<br><span data-ttu-id="cc8c6-205">(normálně dokončit) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.Timeouts> | Vystavte konfiguraci HTTP. sys <xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager> , která může být v registru nakonfigurovaná taky.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-205">(complete normally) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.Timeouts> | Expose the HTTP.sys <xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager> configuration, which may also be configured in the registry.</span></span> <span data-ttu-id="cc8c6-206">Pomocí odkazů rozhraní API získáte další informace o jednotlivých nastaveních, včetně výchozích hodnot:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-206">Follow the API links to learn more about each setting, including default values:</span></span><ul><li><span data-ttu-id="cc8c6-207">[TimeoutManager. DrainEntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.DrainEntityBody): čas povolený pro rozhraní API serveru http, který má vyprázdnit tělo entity u připojení Keep-Alive.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-207">[TimeoutManager.DrainEntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.DrainEntityBody): Time allowed for the HTTP Server API to drain the entity body on a Keep-Alive connection.</span></span></li><li><span data-ttu-id="cc8c6-208">[TimeoutManager. EntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.EntityBody): čas povolený pro doručení těla entity požadavku.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-208">[TimeoutManager.EntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.EntityBody): Time allowed for the request entity body to arrive.</span></span></li><li><span data-ttu-id="cc8c6-209">[TimeoutManager. HeaderWait](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.HeaderWait): čas povolený pro rozhraní API serveru HTTP k analýze hlavičky žádosti.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-209">[TimeoutManager.HeaderWait](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.HeaderWait): Time allowed for the HTTP Server API to parse the request header.</span></span></li><li><span data-ttu-id="cc8c6-210">[TimeoutManager. IdleConnection](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.IdleConnection): čas povolený pro nečinné připojení.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-210">[TimeoutManager.IdleConnection](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.IdleConnection): Time allowed for an idle connection.</span></span></li><li><span data-ttu-id="cc8c6-211">[TimeoutManager. MinSendBytesPerSecond](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.MinSendBytesPerSecond): minimální rychlost odesílání odpovědi.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-211">[TimeoutManager.MinSendBytesPerSecond](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.MinSendBytesPerSecond): The minimum send rate for the response.</span></span></li><li><span data-ttu-id="cc8c6-212">[TimeoutManager. RequestQueue](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.RequestQueue): čas, který může požadavek zůstat ve frontě požadavků předtím, než ji aplikace vybere.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-212">[TimeoutManager.RequestQueue](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.RequestQueue): Time allowed for the request to remain in the request queue before the app picks it up.</span></span></li></ul> <span data-ttu-id="cc8c6-213">|  | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> | Zadejte, který se <xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection> má zaregistrovat v http. sys.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-213">|  | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> | Specify the <xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection> to register with HTTP.sys.</span></span> <span data-ttu-id="cc8c6-214">Nejužitečnější je [UrlPrefixCollection. Add](xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection.Add*), který se používá k přidání předpony do kolekce.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-214">The most useful is [UrlPrefixCollection.Add](xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection.Add*), which is used to add a prefix to the collection.</span></span> <span data-ttu-id="cc8c6-215">Ty mohou být kdykoliv změněny předtím, než se naslouchací proces vyřazuje.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-215">These may be modified at any time prior to disposing the listener.</span></span> <span data-ttu-id="cc8c6-216">|  |</span><span class="sxs-lookup"><span data-stu-id="cc8c6-216">|  |</span></span>

<a name="maxrequestbodysize"></a>

<span data-ttu-id="cc8c6-217">**MaxRequestBodySize**</span><span class="sxs-lookup"><span data-stu-id="cc8c6-217">**MaxRequestBodySize**</span></span>

<span data-ttu-id="cc8c6-218">Maximální povolená velikost libovolného textu žádosti v bajtech</span><span class="sxs-lookup"><span data-stu-id="cc8c6-218">The maximum allowed size of any request body in bytes.</span></span> <span data-ttu-id="cc8c6-219">Při nastavení na `null` je maximální velikost textu požadavku neomezená.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-219">When set to `null`, the maximum request body size is unlimited.</span></span> <span data-ttu-id="cc8c6-220">Toto omezení nemá žádný vliv na upgradovaná připojení, která jsou vždycky neomezená.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-220">This limit has no effect on upgraded connections, which are always unlimited.</span></span>

<span data-ttu-id="cc8c6-221">Doporučená metoda pro přepsání limitu v aplikaci ASP.NET Core MVC pro jeden `IActionResult` je použít <xref:Microsoft.AspNetCore.Mvc.RequestSizeLimitAttribute> atribut pro metodu akce:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-221">The recommended method to override the limit in an ASP.NET Core MVC app for a single `IActionResult` is to use the <xref:Microsoft.AspNetCore.Mvc.RequestSizeLimitAttribute> attribute on an action method:</span></span>

```csharp
[RequestSizeLimit(100000000)]
public IActionResult MyActionMethod()
```

<span data-ttu-id="cc8c6-222">Výjimka je vyvolána, pokud se aplikace pokusí nakonfigurovat limit žádosti poté, co aplikace začne číst požadavek.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-222">An exception is thrown if the app attempts to configure the limit on a request after the app has started reading the request.</span></span> <span data-ttu-id="cc8c6-223">`IsReadOnly`Vlastnost může být použita k označení `MaxRequestBodySize` , zda je vlastnost ve stavu jen pro čtení, což znamená, že je příliš pozdě pro konfiguraci limitu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-223">An `IsReadOnly` property can be used to indicate if the `MaxRequestBodySize` property is in a read-only state, meaning it's too late to configure the limit.</span></span>

<span data-ttu-id="cc8c6-224">Pokud by měla aplikace přepsat <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> jednotlivé požadavky, použijte <xref:Microsoft.AspNetCore.Http.Features.IHttpMaxRequestBodySizeFeature> :</span><span class="sxs-lookup"><span data-stu-id="cc8c6-224">If the app should override <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> per-request, use the <xref:Microsoft.AspNetCore.Http.Features.IHttpMaxRequestBodySizeFeature>:</span></span>

[!code-csharp[](httpsys/samples/3.x/SampleApp/Startup.cs?name=snippet1&highlight=6-7)]

<span data-ttu-id="cc8c6-225">Pokud používáte Visual Studio, ujistěte se, že aplikace není nakonfigurovaná tak, aby spouštěla službu IIS nebo IIS Express.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-225">If using Visual Studio, make sure the app isn't configured to run IIS or IIS Express.</span></span>

<span data-ttu-id="cc8c6-226">V aplikaci Visual Studio je výchozím spouštěcím profilem IIS Express.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-226">In Visual Studio, the default launch profile is for IIS Express.</span></span> <span data-ttu-id="cc8c6-227">Chcete-li spustit projekt jako konzolovou aplikaci, ručně změňte vybraný profil, jak je znázorněno na následujícím snímku obrazovky:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-227">To run the project as a console app, manually change the selected profile, as shown in the following screen shot:</span></span>

![Vybrat profil aplikace konzoly](httpsys/_static/vs-choose-profile.png)

### <a name="configure-windows-server"></a><span data-ttu-id="cc8c6-229">Konfigurace Windows serveru</span><span class="sxs-lookup"><span data-stu-id="cc8c6-229">Configure Windows Server</span></span>

1. <span data-ttu-id="cc8c6-230">Určete porty, které se mají otevřít pro aplikaci, a pomocí [brány Windows Firewall](/windows/security/threat-protection/windows-firewall/create-an-inbound-port-rule) nebo rutiny [New-NetFirewallRule](/powershell/module/netsecurity/new-netfirewallrule) prostředí PowerShell otevřete porty brány firewall, aby bylo možné provozovat přes protokol HTTP. sys.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-230">Determine the ports to open for the app and use [Windows Firewall](/windows/security/threat-protection/windows-firewall/create-an-inbound-port-rule) or the [New-NetFirewallRule](/powershell/module/netsecurity/new-netfirewallrule) PowerShell cmdlet to open firewall ports to allow traffic to reach HTTP.sys.</span></span> <span data-ttu-id="cc8c6-231">V následujících příkazech a konfiguraci aplikace se používá port 443.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-231">In the following commands and app configuration, port 443 is used.</span></span>

1. <span data-ttu-id="cc8c6-232">Při nasazování na virtuální počítač Azure otevřete porty ve [skupině zabezpečení sítě](/azure/virtual-machines/windows/nsg-quickstart-portal).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-232">When deploying to an Azure VM, open the ports in the [Network Security Group](/azure/virtual-machines/windows/nsg-quickstart-portal).</span></span> <span data-ttu-id="cc8c6-233">V následujících příkazech a konfiguraci aplikace se používá port 443.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-233">In the following commands and app configuration, port 443 is used.</span></span>

1. <span data-ttu-id="cc8c6-234">V případě potřeby Získejte a nainstalujte certifikáty X. 509.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-234">Obtain and install X.509 certificates, if required.</span></span>

   <span data-ttu-id="cc8c6-235">V systému Windows vytvořte pomocí [rutiny prostředí PowerShell New-SelfSignedCertificate](/powershell/module/pkiclient/new-selfsignedcertificate)certifikáty podepsané svým držitelem.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-235">On Windows, create self-signed certificates using the [New-SelfSignedCertificate PowerShell cmdlet](/powershell/module/pkiclient/new-selfsignedcertificate).</span></span> <span data-ttu-id="cc8c6-236">Nepodporovaný příklad naleznete v tématu [UpdateIISExpressSSLForChrome. ps1](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/includes/make-x509-cert/UpdateIISExpressSSLForChrome.ps1).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-236">For an unsupported example, see [UpdateIISExpressSSLForChrome.ps1](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/includes/make-x509-cert/UpdateIISExpressSSLForChrome.ps1).</span></span>

   <span data-ttu-id="cc8c6-237">Nainstalujte certifikáty podepsané svým držitelem nebo certifikátem podepsaným certifikační autoritou do osobního úložiště **místního počítače** serveru > **Personal** .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-237">Install either self-signed or CA-signed certificates in the server's **Local Machine** > **Personal** store.</span></span>

1. <span data-ttu-id="cc8c6-238">Pokud se jedná o [nasazení závislé na rozhraní](/dotnet/core/deploying/#framework-dependent-deployments-fdd), nainstalujte rozhraní .NET core, .NET Framework nebo obojí (Pokud je aplikace aplikace .NET Core cílící na .NET Framework).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-238">If the app is a [framework-dependent deployment](/dotnet/core/deploying/#framework-dependent-deployments-fdd), install .NET Core, .NET Framework, or both (if the app is a .NET Core app targeting the .NET Framework).</span></span>

   * <span data-ttu-id="cc8c6-239">**.NET Core**: Pokud aplikace vyžaduje .NET Core, Získejte a spusťte instalační program **modulu runtime .NET Core** ze [souborů ke stažení pro .NET Core](https://dotnet.microsoft.com/download).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-239">**.NET Core**: If the app requires .NET Core, obtain and run the **.NET Core Runtime** installer from [.NET Core Downloads](https://dotnet.microsoft.com/download).</span></span> <span data-ttu-id="cc8c6-240">Neinstalujte na server plnou sadu SDK.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-240">Don't install the full SDK on the server.</span></span>
   * <span data-ttu-id="cc8c6-241">**.NET Framework**: Pokud aplikace vyžaduje .NET Framework, přečtěte si téma [Průvodce instalací .NET Framework](/dotnet/framework/install/).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-241">**.NET Framework**: If the app requires .NET Framework, see the [.NET Framework installation guide](/dotnet/framework/install/).</span></span> <span data-ttu-id="cc8c6-242">Nainstalujte požadovanou .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-242">Install the required .NET Framework.</span></span> <span data-ttu-id="cc8c6-243">Instalační program pro nejnovější .NET Framework je k dispozici na stránce [soubory ke stažení pro .NET Core](https://dotnet.microsoft.com/download) .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-243">The installer for the latest .NET Framework is available from the [.NET Core Downloads](https://dotnet.microsoft.com/download) page.</span></span>

   <span data-ttu-id="cc8c6-244">Pokud je aplikace samostatným [nasazením](/dotnet/core/deploying/#self-contained-deployments-scd), aplikace zahrne modul runtime do svého nasazení.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-244">If the app is a [self-contained deployment](/dotnet/core/deploying/#self-contained-deployments-scd), the app includes the runtime in its deployment.</span></span> <span data-ttu-id="cc8c6-245">Na serveru není nutná žádná instalace rozhraní.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-245">No framework installation is required on the server.</span></span>

1. <span data-ttu-id="cc8c6-246">Konfigurace adres URL a portů v aplikaci</span><span class="sxs-lookup"><span data-stu-id="cc8c6-246">Configure URLs and ports in the app.</span></span>

   <span data-ttu-id="cc8c6-247">Ve výchozím nastavení ASP.NET Core váže `http://localhost:5000` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-247">By default, ASP.NET Core binds to `http://localhost:5000`.</span></span> <span data-ttu-id="cc8c6-248">Pokud chcete nakonfigurovat předpony a porty adresy URL, můžete použít tyto možnosti:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-248">To configure URL prefixes and ports, options include:</span></span>

   * <xref:Microsoft.AspNetCore.Hosting.HostingAbstractionsWebHostBuilderExtensions.UseUrls*>
   * <span data-ttu-id="cc8c6-249">`urls`argument příkazového řádku</span><span class="sxs-lookup"><span data-stu-id="cc8c6-249">`urls` command-line argument</span></span>
   * <span data-ttu-id="cc8c6-250">`ASPNETCORE_URLS`Proměnná prostředí</span><span class="sxs-lookup"><span data-stu-id="cc8c6-250">`ASPNETCORE_URLS` environment variable</span></span>
   * <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes>

   <span data-ttu-id="cc8c6-251">Následující příklad kódu ukazuje, jak používat <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> s místní IP adresou serveru `10.0.0.4` na portu 443:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-251">The following code example shows how to use <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> with the server's local IP address `10.0.0.4` on port 443:</span></span>

   [!code-csharp[](httpsys/samples_snapshot/3.x/Program.cs?highlight=7)]

   <span data-ttu-id="cc8c6-252">Výhodou `UrlPrefixes` je, že se okamžitě generuje chybová zpráva pro nesprávně naformátované předpony.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-252">An advantage of `UrlPrefixes` is that an error message is generated immediately for improperly formatted prefixes.</span></span>

   <span data-ttu-id="cc8c6-253">Nastavení v `UrlPrefixes` `UseUrls` / `urls` / `ASPNETCORE_URLS` Nastavení přepsání</span><span class="sxs-lookup"><span data-stu-id="cc8c6-253">The settings in `UrlPrefixes` override `UseUrls`/`urls`/`ASPNETCORE_URLS` settings.</span></span> <span data-ttu-id="cc8c6-254">Proto je výhodou `UseUrls` `urls` `ASPNETCORE_URLS` proměnné prostředí, a jednodušší přepínání mezi Kestrel a http. sys.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-254">Therefore, an advantage of `UseUrls`, `urls`, and the `ASPNETCORE_URLS` environment variable is that it's easier to switch between Kestrel and HTTP.sys.</span></span>

   <span data-ttu-id="cc8c6-255">HTTP. sys používá [formáty řetězce UrlPrefix HTTP serveru API](https://msdn.microsoft.com/library/windows/desktop/aa364698.aspx).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-255">HTTP.sys uses the [HTTP Server API UrlPrefix string formats](https://msdn.microsoft.com/library/windows/desktop/aa364698.aspx).</span></span>

   > [!WARNING]
   > <span data-ttu-id="cc8c6-256">Nelze použít vazby zástupných znaků na nejvyšší úrovni ( `http://*:80/` a `http://+:80` ). **not**</span><span class="sxs-lookup"><span data-stu-id="cc8c6-256">Top-level wildcard bindings (`http://*:80/` and `http://+:80`) should **not** be used.</span></span> <span data-ttu-id="cc8c6-257">Vazby na zástupné znaky na nejvyšší úrovni vytvoří chyby zabezpečení aplikace.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-257">Top-level wildcard bindings create app security vulnerabilities.</span></span> <span data-ttu-id="cc8c6-258">To platí pro silné i slabé zástupné znaky.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-258">This applies to both strong and weak wildcards.</span></span> <span data-ttu-id="cc8c6-259">Místo zástupných znaků použijte explicitní názvy hostitelů nebo IP adresy.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-259">Use explicit host names or IP addresses rather than wildcards.</span></span> <span data-ttu-id="cc8c6-260">Vazba zástupných znaků subdomény (například `*.mysub.com` ) není bezpečnostní riziko, pokud ovládáte celou nadřazenou doménu (na rozdíl od `*.com` , která je zranitelná).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-260">Subdomain wildcard binding (for example, `*.mysub.com`) isn't a security risk if you control the entire parent domain (as opposed to `*.com`, which is vulnerable).</span></span> <span data-ttu-id="cc8c6-261">Další informace najdete v [dokumentu RFC 7230: oddíl 5,4: Host](https://tools.ietf.org/html/rfc7230#section-5.4).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-261">For more information, see [RFC 7230: Section 5.4: Host](https://tools.ietf.org/html/rfc7230#section-5.4).</span></span>

1. <span data-ttu-id="cc8c6-262">Předregistrujte předpony adresy URL na serveru.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-262">Preregister URL prefixes on the server.</span></span>

   <span data-ttu-id="cc8c6-263">Integrovaný nástroj pro konfiguraci souboru HTTP. sys je *netsh. exe*.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-263">The built-in tool for configuring HTTP.sys is *netsh.exe*.</span></span> <span data-ttu-id="cc8c6-264">pomocí *nástroje Netsh. exe* můžete rezervovat PŘEDPONY adres URL a přiřazovat certifikáty X. 509.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-264">*netsh.exe* is used to reserve URL prefixes and assign X.509 certificates.</span></span> <span data-ttu-id="cc8c6-265">Nástroj vyžaduje oprávnění správce.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-265">The tool requires administrator privileges.</span></span>

   <span data-ttu-id="cc8c6-266">Registrace adres URL pro aplikaci pomocí nástroje *netsh. exe* :</span><span class="sxs-lookup"><span data-stu-id="cc8c6-266">Use the *netsh.exe* tool to register URLs for the app:</span></span>

   ```console
   netsh http add urlacl url=<URL> user=<USER>
   ```

   * <span data-ttu-id="cc8c6-267">`<URL>`: Plně kvalifikované adresy URL (Uniform Resource Locator).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-267">`<URL>`: The fully qualified Uniform Resource Locator (URL).</span></span> <span data-ttu-id="cc8c6-268">Nepoužívejte vazbu zástupných znaků.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-268">Don't use a wildcard binding.</span></span> <span data-ttu-id="cc8c6-269">Použijte platný název hostitele nebo místní IP adresu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-269">Use a valid hostname or local IP address.</span></span> <span data-ttu-id="cc8c6-270">*Adresa URL musí obsahovat koncové lomítko.*</span><span class="sxs-lookup"><span data-stu-id="cc8c6-270">*The URL must include a trailing slash.*</span></span>
   * <span data-ttu-id="cc8c6-271">`<USER>`: Určuje název uživatele nebo skupiny uživatelů.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-271">`<USER>`: Specifies the user or user-group name.</span></span>

   <span data-ttu-id="cc8c6-272">V následujícím příkladu je místní IP adresa serveru `10.0.0.4` :</span><span class="sxs-lookup"><span data-stu-id="cc8c6-272">In the following example, the local IP address of the server is `10.0.0.4`:</span></span>

   ```console
   netsh http add urlacl url=https://10.0.0.4:443/ user=Users
   ```

   <span data-ttu-id="cc8c6-273">Když je adresa URL registrována, nástroj odpoví `URL reservation successfully added` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-273">When a URL is registered, the tool responds with `URL reservation successfully added`.</span></span>

   <span data-ttu-id="cc8c6-274">Pokud chcete odstranit registrovanou adresu URL, použijte `delete urlacl` příkaz:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-274">To delete a registered URL, use the `delete urlacl` command:</span></span>

   ```console
   netsh http delete urlacl url=<URL>
   ```

1. <span data-ttu-id="cc8c6-275">Zaregistrujte certifikáty X. 509 na serveru.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-275">Register X.509 certificates on the server.</span></span>

   <span data-ttu-id="cc8c6-276">K registraci certifikátů pro aplikaci použijte nástroj *netsh. exe* :</span><span class="sxs-lookup"><span data-stu-id="cc8c6-276">Use the *netsh.exe* tool to register certificates for the app:</span></span>

   ```console
   netsh http add sslcert ipport=<IP>:<PORT> certhash=<THUMBPRINT> appid="{<GUID>}"
   ```

   * <span data-ttu-id="cc8c6-277">`<IP>`: Určuje místní IP adresu pro vazbu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-277">`<IP>`: Specifies the local IP address for the binding.</span></span> <span data-ttu-id="cc8c6-278">Nepoužívejte vazbu zástupných znaků.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-278">Don't use a wildcard binding.</span></span> <span data-ttu-id="cc8c6-279">Použijte platnou IP adresu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-279">Use a valid IP address.</span></span>
   * <span data-ttu-id="cc8c6-280">`<PORT>`: Určuje port pro vazbu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-280">`<PORT>`: Specifies the port for the binding.</span></span>
   * <span data-ttu-id="cc8c6-281">`<THUMBPRINT>`: Kryptografický otisk certifikátu X. 509.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-281">`<THUMBPRINT>`: The X.509 certificate thumbprint.</span></span>
   * <span data-ttu-id="cc8c6-282">`<GUID>`: Identifikátor GUID generovaný vývojářem, který představuje aplikaci pro informativní účely.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-282">`<GUID>`: A developer-generated GUID to represent the app for informational purposes.</span></span>

   <span data-ttu-id="cc8c6-283">Pro referenční účely uložte identifikátor GUID do aplikace jako značku balíčku:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-283">For reference purposes, store the GUID in the app as a package tag:</span></span>

   * <span data-ttu-id="cc8c6-284">V aplikaci Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-284">In Visual Studio:</span></span>
     * <span data-ttu-id="cc8c6-285">Otevřete vlastnosti projektu aplikace tak, že kliknete pravým tlačítkem na aplikaci v **Průzkumník řešení** a vyberete **vlastnosti**.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-285">Open the app's project properties by right-clicking on the app in **Solution Explorer** and selecting **Properties**.</span></span>
     * <span data-ttu-id="cc8c6-286">Vyberte kartu **balíček** .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-286">Select the **Package** tab.</span></span>
     * <span data-ttu-id="cc8c6-287">Zadejte identifikátor GUID, který jste vytvořili v poli **značky** .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-287">Enter the GUID that you created in the **Tags** field.</span></span>
   * <span data-ttu-id="cc8c6-288">Když nepoužíváte Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-288">When not using Visual Studio:</span></span>
     * <span data-ttu-id="cc8c6-289">Otevřete soubor projektu aplikace.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-289">Open the app's project file.</span></span>
     * <span data-ttu-id="cc8c6-290">Přidejte `<PackageTags>` vlastnost do nového nebo existujícího `<PropertyGroup>` s identifikátorem GUID, který jste vytvořili:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-290">Add a `<PackageTags>` property to a new or existing `<PropertyGroup>` with the GUID that you created:</span></span>

       ```xml
       <PropertyGroup>
         <PackageTags>9412ee86-c21b-4eb8-bd89-f650fbf44931</PackageTags>
       </PropertyGroup>
       ```

   <span data-ttu-id="cc8c6-291">V následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-291">In the following example:</span></span>

   * <span data-ttu-id="cc8c6-292">Místní IP adresa serveru je `10.0.0.4` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-292">The local IP address of the server is `10.0.0.4`.</span></span>
   * <span data-ttu-id="cc8c6-293">Generátor náhodných identifikátorů GUID online poskytuje `appid` hodnotu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-293">An online random GUID generator provides the `appid` value.</span></span>

   ```console
   netsh http add sslcert 
       ipport=10.0.0.4:443 
       certhash=b66ee04419d4ee37464ab8785ff02449980eae10 
       appid="{9412ee86-c21b-4eb8-bd89-f650fbf44931}"
   ```

   <span data-ttu-id="cc8c6-294">Když je certifikát zaregistrován, nástroj odpoví `SSL Certificate successfully added` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-294">When a certificate is registered, the tool responds with `SSL Certificate successfully added`.</span></span>

   <span data-ttu-id="cc8c6-295">K odstranění registrace certifikátu použijte `delete sslcert` příkaz:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-295">To delete a certificate registration, use the `delete sslcert` command:</span></span>

   ```console
   netsh http delete sslcert ipport=<IP>:<PORT>
   ```

   <span data-ttu-id="cc8c6-296">Referenční dokumentace k nástroji *netsh. exe*:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-296">Reference documentation for *netsh.exe*:</span></span>

   * [<span data-ttu-id="cc8c6-297">Příkazy Netsh pro protokol HTTP (Hypertext Transfer Protocol)</span><span class="sxs-lookup"><span data-stu-id="cc8c6-297">Netsh Commands for Hypertext Transfer Protocol (HTTP)</span></span>](https://technet.microsoft.com/library/cc725882.aspx)
   * [<span data-ttu-id="cc8c6-298">UrlPrefix řetězce</span><span class="sxs-lookup"><span data-stu-id="cc8c6-298">UrlPrefix Strings</span></span>](https://msdn.microsoft.com/library/windows/desktop/aa364698.aspx)

1. <span data-ttu-id="cc8c6-299">Spusťte aplikaci.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-299">Run the app.</span></span>

   <span data-ttu-id="cc8c6-300">Oprávnění správce nejsou nutná ke spuštění aplikace při vytváření vazby na localhost pomocí protokolu HTTP (ne HTTPS) s číslem portu větším než 1024.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-300">Administrator privileges aren't required to run the app when binding to localhost using HTTP (not HTTPS) with a port number greater than 1024.</span></span> <span data-ttu-id="cc8c6-301">U ostatních konfigurací (například pomocí místní IP adresy nebo vazby na port 443) spusťte aplikaci s oprávněními správce.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-301">For other configurations (for example, using a local IP address or binding to port 443), run the app with administrator privileges.</span></span>

   <span data-ttu-id="cc8c6-302">Aplikace odpoví na veřejnou IP adresu serveru.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-302">The app responds at the server's public IP address.</span></span> <span data-ttu-id="cc8c6-303">V tomto příkladu je server dosažitelný z Internetu na jeho veřejné IP adrese `104.214.79.47` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-303">In this example, the server is reached from the Internet at its public IP address of `104.214.79.47`.</span></span>

   <span data-ttu-id="cc8c6-304">V tomto příkladu se používá vývojový certifikát.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-304">A development certificate is used in this example.</span></span> <span data-ttu-id="cc8c6-305">Stránka se načte bezpečně po obejít upozornění na nedůvěryhodný certifikát v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-305">The page loads securely after bypassing the browser's untrusted certificate warning.</span></span>

   ![Okno prohlížeče zobrazující načtenou stránku indexu aplikace](httpsys/_static/browser.png)

## <a name="proxy-server-and-load-balancer-scenarios"></a><span data-ttu-id="cc8c6-307">Scénáře proxy serveru a nástroje pro vyrovnávání zatížení</span><span class="sxs-lookup"><span data-stu-id="cc8c6-307">Proxy server and load balancer scenarios</span></span>

<span data-ttu-id="cc8c6-308">Pro aplikace hostované souborem HTTP. sys, které komunikují s požadavky z Internetu nebo podnikové sítě, se může při hostování za proxy servery a nástroji pro vyrovnávání zatížení vyžadovat další konfigurace.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-308">For apps hosted by HTTP.sys that interact with requests from the Internet or a corporate network, additional configuration might be required when hosting behind proxy servers and load balancers.</span></span> <span data-ttu-id="cc8c6-309">Další informace najdete v tématu [konfigurace ASP.NET Core pro práci se servery proxy a nástroji pro vyrovnávání zatížení](xref:host-and-deploy/proxy-load-balancer).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-309">For more information, see [Configure ASP.NET Core to work with proxy servers and load balancers](xref:host-and-deploy/proxy-load-balancer).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="cc8c6-310">Další zdroje</span><span class="sxs-lookup"><span data-stu-id="cc8c6-310">Additional resources</span></span>

* [<span data-ttu-id="cc8c6-311">Povolit ověřování systému Windows pomocí HTTP. sys</span><span class="sxs-lookup"><span data-stu-id="cc8c6-311">Enable Windows Authentication with HTTP.sys</span></span>](xref:security/authentication/windowsauth#httpsys)
* [<span data-ttu-id="cc8c6-312">Rozhraní API serveru HTTP</span><span class="sxs-lookup"><span data-stu-id="cc8c6-312">HTTP Server API</span></span>](https://msdn.microsoft.com/library/windows/desktop/aa364510.aspx)
* [<span data-ttu-id="cc8c6-313">úložiště GitHubu ASPNET/HttpSysServer (zdrojový kód)</span><span class="sxs-lookup"><span data-stu-id="cc8c6-313">aspnet/HttpSysServer GitHub repository (source code)</span></span>](https://github.com/aspnet/HttpSysServer/)
* [<span data-ttu-id="cc8c6-314">Hostitel</span><span class="sxs-lookup"><span data-stu-id="cc8c6-314">The host</span></span>](xref:fundamentals/index#host)
* <xref:test/troubleshoot>

::: moniker-end

::: moniker range="= aspnetcore-3.0"

<span data-ttu-id="cc8c6-315">[Http. sys](/iis/get-started/introduction-to-iis/introduction-to-iis-architecture#hypertext-transfer-protocol-stack-httpsys) je [webový server pro ASP.NET Core](xref:fundamentals/servers/index) , který běží pouze v systému Windows.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-315">[HTTP.sys](/iis/get-started/introduction-to-iis/introduction-to-iis-architecture#hypertext-transfer-protocol-stack-httpsys) is a [web server for ASP.NET Core](xref:fundamentals/servers/index) that only runs on Windows.</span></span> <span data-ttu-id="cc8c6-316">HTTP. sys je alternativou k serveru [Kestrel](xref:fundamentals/servers/kestrel) a nabízí některé funkce, které Kestrel neposkytuje.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-316">HTTP.sys is an alternative to [Kestrel](xref:fundamentals/servers/kestrel) server and offers some features that Kestrel doesn't provide.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="cc8c6-317">HTTP. sys není kompatibilní s [modulem ASP.NET Core](xref:host-and-deploy/aspnet-core-module) a nedá se použít se službou IIS nebo IIS Express.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-317">HTTP.sys isn't compatible with the [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module) and can't be used with IIS or IIS Express.</span></span>

<span data-ttu-id="cc8c6-318">HTTP. sys podporuje následující funkce:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-318">HTTP.sys supports the following features:</span></span>

* [<span data-ttu-id="cc8c6-319">Ověřování systému Windows</span><span class="sxs-lookup"><span data-stu-id="cc8c6-319">Windows Authentication</span></span>](xref:security/authentication/windowsauth)
* <span data-ttu-id="cc8c6-320">Sdílení portů</span><span class="sxs-lookup"><span data-stu-id="cc8c6-320">Port sharing</span></span>
* <span data-ttu-id="cc8c6-321">HTTPS s SNI</span><span class="sxs-lookup"><span data-stu-id="cc8c6-321">HTTPS with SNI</span></span>
* <span data-ttu-id="cc8c6-322">HTTP/2 přes TLS (Windows 10 nebo novější)</span><span class="sxs-lookup"><span data-stu-id="cc8c6-322">HTTP/2 over TLS (Windows 10 or later)</span></span>
* <span data-ttu-id="cc8c6-323">Přímý přenos souborů</span><span class="sxs-lookup"><span data-stu-id="cc8c6-323">Direct file transmission</span></span>
* <span data-ttu-id="cc8c6-324">Ukládání odpovědí do mezipaměti</span><span class="sxs-lookup"><span data-stu-id="cc8c6-324">Response caching</span></span>
* <span data-ttu-id="cc8c6-325">WebSockets (Windows 8 nebo novější)</span><span class="sxs-lookup"><span data-stu-id="cc8c6-325">WebSockets (Windows 8 or later)</span></span>

<span data-ttu-id="cc8c6-326">Podporované verze systému Windows:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-326">Supported Windows versions:</span></span>

* <span data-ttu-id="cc8c6-327">Windows 7 nebo novější</span><span class="sxs-lookup"><span data-stu-id="cc8c6-327">Windows 7 or later</span></span>
* <span data-ttu-id="cc8c6-328">Windows Server 2008 R2 nebo novější</span><span class="sxs-lookup"><span data-stu-id="cc8c6-328">Windows Server 2008 R2 or later</span></span>

<span data-ttu-id="cc8c6-329">[Zobrazit nebo stáhnout ukázkový kód](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/servers/httpsys/samples) ([Jak stáhnout](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="cc8c6-329">[View or download sample code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/servers/httpsys/samples) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="when-to-use-httpsys"></a><span data-ttu-id="cc8c6-330">Kdy použít protokol HTTP. sys</span><span class="sxs-lookup"><span data-stu-id="cc8c6-330">When to use HTTP.sys</span></span>

<span data-ttu-id="cc8c6-331">HTTP. sys je užitečné pro nasazení, kde:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-331">HTTP.sys is useful for deployments where:</span></span>

* <span data-ttu-id="cc8c6-332">Server je potřeba zveřejnit přímo na internetu bez použití IIS.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-332">There's a need to expose the server directly to the Internet without using IIS.</span></span>

  ![HTTP. sys komunikuje přímo s internetem.](httpsys/_static/httpsys-to-internet.png)

* <span data-ttu-id="cc8c6-334">Interní nasazení vyžaduje funkci, která není v Kestrel k dispozici, jako je například [ověřování systému Windows](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-334">An internal deployment requires a feature not available in Kestrel, such as [Windows Authentication](xref:security/authentication/windowsauth).</span></span>

  ![HTTP. sys komunikuje přímo s interní sítí.](httpsys/_static/httpsys-to-internal.png)

<span data-ttu-id="cc8c6-336">HTTP. sys je Vyspělá technologie, která chrání před mnoha typy útoků a poskytuje odolnost, zabezpečení a škálovatelnost plně funkčního webového serveru.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-336">HTTP.sys is mature technology that protects against many types of attacks and provides the robustness, security, and scalability of a full-featured web server.</span></span> <span data-ttu-id="cc8c6-337">Samotná služba IIS běží jako naslouchací proces HTTP nad HTTP. sys.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-337">IIS itself runs as an HTTP listener on top of HTTP.sys.</span></span>

## <a name="http2-support"></a><span data-ttu-id="cc8c6-338">Podpora HTTP/2</span><span class="sxs-lookup"><span data-stu-id="cc8c6-338">HTTP/2 support</span></span>

<span data-ttu-id="cc8c6-339">[Protokol HTTP/2](https://httpwg.org/specs/rfc7540.html) je povolený pro aplikace ASP.NET Core, pokud jsou splněné následující základní požadavky:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-339">[HTTP/2](https://httpwg.org/specs/rfc7540.html) is enabled for ASP.NET Core apps if the following base requirements are met:</span></span>

* <span data-ttu-id="cc8c6-340">Windows Server 2016/Windows 10 nebo novější</span><span class="sxs-lookup"><span data-stu-id="cc8c6-340">Windows Server 2016/Windows 10 or later</span></span>
* <span data-ttu-id="cc8c6-341">Připojení [ALPN (Application-Layer Protocol Negotiation)](https://tools.ietf.org/html/rfc7301#section-3)</span><span class="sxs-lookup"><span data-stu-id="cc8c6-341">[Application-Layer Protocol Negotiation (ALPN)](https://tools.ietf.org/html/rfc7301#section-3) connection</span></span>
* <span data-ttu-id="cc8c6-342">Připojení TLS 1,2 nebo novější</span><span class="sxs-lookup"><span data-stu-id="cc8c6-342">TLS 1.2 or later connection</span></span>

<span data-ttu-id="cc8c6-343">Pokud je vytvořeno připojení HTTP/2, sestavy [HttpRequest. Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) `HTTP/2` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-343">If an HTTP/2 connection is established, [HttpRequest.Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) reports `HTTP/2`.</span></span>

<span data-ttu-id="cc8c6-344">HTTP/2 je ve výchozím nastavení povolené.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-344">HTTP/2 is enabled by default.</span></span> <span data-ttu-id="cc8c6-345">Pokud připojení HTTP/2 není navázáno, připojení se vrátí k HTTP/1.1.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-345">If an HTTP/2 connection isn't established, the connection falls back to HTTP/1.1.</span></span> <span data-ttu-id="cc8c6-346">V budoucí verzi Windows budou k dispozici příznaky konfigurace protokolu HTTP/2, včetně možnosti zakázat protokol HTTP/2 s protokolem HTTP. sys.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-346">In a future release of Windows, HTTP/2 configuration flags will be available, including the ability to disable HTTP/2 with HTTP.sys.</span></span>

## <a name="kernel-mode-authentication-with-kerberos"></a><span data-ttu-id="cc8c6-347">Ověřování v režimu jádra pomocí protokolu Kerberos</span><span class="sxs-lookup"><span data-stu-id="cc8c6-347">Kernel mode authentication with Kerberos</span></span>

<span data-ttu-id="cc8c6-348">Delegáti HTTP. sys se připravují ověřování režimu jádra pomocí ověřovacího protokolu Kerberos.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-348">HTTP.sys delegates to kernel mode authentication with the Kerberos authentication protocol.</span></span> <span data-ttu-id="cc8c6-349">Ověřování v uživatelském režimu se v protokolech Kerberos a HTTP. sys nepodporuje.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-349">User mode authentication isn't supported with Kerberos and HTTP.sys.</span></span> <span data-ttu-id="cc8c6-350">Účet počítače se musí použít k dešifrování tokenu nebo lístku protokolu Kerberos, který je získaný ze služby Active Directory a který přesměruje klient na server za účelem ověření uživatele.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-350">The machine account must be used to decrypt the Kerberos token/ticket that's obtained from Active Directory and forwarded by the client to the server to authenticate the user.</span></span> <span data-ttu-id="cc8c6-351">Zaregistrujte hlavní název služby (SPN) pro hostitele, nikoli uživatele aplikace.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-351">Register the Service Principal Name (SPN) for the host, not the user of the app.</span></span>

## <a name="how-to-use-httpsys"></a><span data-ttu-id="cc8c6-352">Jak používat HTTP. sys</span><span class="sxs-lookup"><span data-stu-id="cc8c6-352">How to use HTTP.sys</span></span>

### <a name="configure-the-aspnet-core-app-to-use-httpsys"></a><span data-ttu-id="cc8c6-353">Konfigurace aplikace ASP.NET Core pro použití HTTP. sys</span><span class="sxs-lookup"><span data-stu-id="cc8c6-353">Configure the ASP.NET Core app to use HTTP.sys</span></span>

<span data-ttu-id="cc8c6-354"><xref:Microsoft.AspNetCore.Hosting.WebHostBuilderHttpSysExtensions.UseHttpSys*>Při sestavování hostitele zavolejte metodu rozšíření a určete požadované <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions> .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-354">Call the <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderHttpSysExtensions.UseHttpSys*> extension method when building the host, specifying any required <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions>.</span></span> <span data-ttu-id="cc8c6-355">Následující příklad nastaví možnosti na jejich výchozí hodnoty:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-355">The following example sets options to their default values:</span></span>

[!code-csharp[](httpsys/samples/3.x/SampleApp/Program.cs?name=snippet1&highlight=5-13)]

<span data-ttu-id="cc8c6-356">Další konfiguraci HTTP. sys bude zpracována prostřednictvím [nastavení registru](https://support.microsoft.com/help/820129/http-sys-registry-settings-for-windows).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-356">Additional HTTP.sys configuration is handled through [registry settings](https://support.microsoft.com/help/820129/http-sys-registry-settings-for-windows).</span></span>

<span data-ttu-id="cc8c6-357">**Možnosti HTTP. sys**</span><span class="sxs-lookup"><span data-stu-id="cc8c6-357">**HTTP.sys options**</span></span>

| <span data-ttu-id="cc8c6-358">Vlastnost</span><span class="sxs-lookup"><span data-stu-id="cc8c6-358">Property</span></span> | <span data-ttu-id="cc8c6-359">Description</span><span class="sxs-lookup"><span data-stu-id="cc8c6-359">Description</span></span> | <span data-ttu-id="cc8c6-360">Výchozí</span><span class="sxs-lookup"><span data-stu-id="cc8c6-360">Default</span></span> |
| ---
<span data-ttu-id="cc8c6-361">Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-361">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="cc8c6-362">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-362">'Blazor'</span></span>
- <span data-ttu-id="cc8c6-363">'Identity'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-363">'Identity'</span></span>
- <span data-ttu-id="cc8c6-364">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-364">'Let's Encrypt'</span></span>
- <span data-ttu-id="cc8c6-365">'Razor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-365">'Razor'</span></span>
- <span data-ttu-id="cc8c6-366">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-366">'SignalR' uid:</span></span> 

-
<span data-ttu-id="cc8c6-367">Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-367">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="cc8c6-368">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-368">'Blazor'</span></span>
- <span data-ttu-id="cc8c6-369">'Identity'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-369">'Identity'</span></span>
- <span data-ttu-id="cc8c6-370">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-370">'Let's Encrypt'</span></span>
- <span data-ttu-id="cc8c6-371">'Razor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-371">'Razor'</span></span>
- <span data-ttu-id="cc8c6-372">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-372">'SignalR' uid:</span></span> 

<span data-ttu-id="cc8c6-373">---- | ---Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-373">---- | --- title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="cc8c6-374">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-374">'Blazor'</span></span>
- <span data-ttu-id="cc8c6-375">'Identity'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-375">'Identity'</span></span>
- <span data-ttu-id="cc8c6-376">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-376">'Let's Encrypt'</span></span>
- <span data-ttu-id="cc8c6-377">'Razor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-377">'Razor'</span></span>
- <span data-ttu-id="cc8c6-378">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-378">'SignalR' uid:</span></span> 

-
<span data-ttu-id="cc8c6-379">Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-379">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="cc8c6-380">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-380">'Blazor'</span></span>
- <span data-ttu-id="cc8c6-381">'Identity'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-381">'Identity'</span></span>
- <span data-ttu-id="cc8c6-382">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-382">'Let's Encrypt'</span></span>
- <span data-ttu-id="cc8c6-383">'Razor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-383">'Razor'</span></span>
- <span data-ttu-id="cc8c6-384">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-384">'SignalR' uid:</span></span> 

-
<span data-ttu-id="cc8c6-385">Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-385">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="cc8c6-386">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-386">'Blazor'</span></span>
- <span data-ttu-id="cc8c6-387">'Identity'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-387">'Identity'</span></span>
- <span data-ttu-id="cc8c6-388">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-388">'Let's Encrypt'</span></span>
- <span data-ttu-id="cc8c6-389">'Razor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-389">'Razor'</span></span>
- <span data-ttu-id="cc8c6-390">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-390">'SignalR' uid:</span></span> 

<span data-ttu-id="cc8c6-391">------ | :-----: | | [AllowSynchronousIO](xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.AllowSynchronousIO) | Určuje, zda je povolen synchronní vstup/výstup pro `HttpContext.Request.Body` a `HttpContext.Response.Body` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-391">------ | :-----: | | [AllowSynchronousIO](xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.AllowSynchronousIO) | Control whether synchronous input/output is allowed for the `HttpContext.Request.Body` and `HttpContext.Response.Body`.</span></span><span data-ttu-id="cc8c6-392"> | `false`| | [Ověřování. AllowAnonymous](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationManager.AllowAnonymous) | Povoluje anonymní požadavky.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-392"> | `false` | | [Authentication.AllowAnonymous](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationManager.AllowAnonymous) | Allow anonymous requests.</span></span><span data-ttu-id="cc8c6-393"> | `true`| | [Ověřování. schémata](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationManager.Schemes) | Určete povolená schémata ověřování.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-393"> | `true` | | [Authentication.Schemes](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationManager.Schemes) | Specify the allowed authentication schemes.</span></span> <span data-ttu-id="cc8c6-394">Může být kdykoli změněno před vyřazením naslouchacího procesu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-394">May be modified at any time prior to disposing the listener.</span></span> <span data-ttu-id="cc8c6-395">Hodnoty jsou k dispozici ve [výčtu schémata AuthenticationSchemes](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationSchemes): `Basic` , `Kerberos` , `Negotiate` , `None` a `NTLM` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-395">Values are provided by the [AuthenticationSchemes enum](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationSchemes): `Basic`, `Kerberos`, `Negotiate`, `None`, and `NTLM`.</span></span><span data-ttu-id="cc8c6-396"> | `None`| | [EnableResponseCaching](xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.EnableResponseCaching) | Pokusit se o ukládání do mezipaměti v [režimu jádra](/windows-hardware/drivers/gettingstarted/user-mode-and-kernel-mode) pro odpovědi s oprávněnými záhlavími.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-396"> | `None` | | [EnableResponseCaching](xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.EnableResponseCaching) | Attempt [kernel-mode](/windows-hardware/drivers/gettingstarted/user-mode-and-kernel-mode) caching for responses with eligible headers.</span></span> <span data-ttu-id="cc8c6-397">Odpověď nesmí obsahovat `Set-Cookie` `Vary` hlavičky, ani `Pragma` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-397">The response may not include `Set-Cookie`, `Vary`, or `Pragma` headers.</span></span> <span data-ttu-id="cc8c6-398">Musí obsahovat `Cache-Control` hlavičku, která je `public` a buď `shared-max-age` `max-age` hodnota nebo, nebo `Expires` záhlaví.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-398">It must include a `Cache-Control` header that's `public` and either a `shared-max-age` or `max-age` value, or an `Expires` header.</span></span><span data-ttu-id="cc8c6-399"> | `true`| | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxAccepts> | Maximální počet souběžných přijetí.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-399"> | `true` | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxAccepts> | The maximum number of concurrent accepts.</span></span> <span data-ttu-id="cc8c6-400">| 5 &times; [prostředí. <br> ProcessorCount](xref:System.Environment.ProcessorCount) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxConnections> | Maximální počet souběžných připojení, která se mají přijmout</span><span class="sxs-lookup"><span data-stu-id="cc8c6-400">| 5 &times; [Environment.<br>ProcessorCount](xref:System.Environment.ProcessorCount) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxConnections> | The maximum number of concurrent connections to accept.</span></span> <span data-ttu-id="cc8c6-401">Použijte `-1` pro nekonečné.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-401">Use `-1` for infinite.</span></span> <span data-ttu-id="cc8c6-402">Použijte `null` k použití nastavení pro počítač v rámci registru.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-402">Use `null` to use the registry's machine-wide setting.</span></span> | `null`<br><span data-ttu-id="cc8c6-403">(počítačově v šířce</span><span class="sxs-lookup"><span data-stu-id="cc8c6-403">(machine-wide</span></span><br><span data-ttu-id="cc8c6-404">nastavení) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> | Viz část <a href="#maxrequestbodysize">MaxRequestBodySize</a> .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-404">setting) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> | See the <a href="#maxrequestbodysize">MaxRequestBodySize</a> section.</span></span> <span data-ttu-id="cc8c6-405">| 30000000 bajtů</span><span class="sxs-lookup"><span data-stu-id="cc8c6-405">| 30000000 bytes</span></span><br><span data-ttu-id="cc8c6-406">(~ 28,6 MB) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.RequestQueueLimit> | Maximální počet požadavků, které lze zařadit do fronty.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-406">(~28.6 MB) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.RequestQueueLimit> | The maximum number of requests that can be queued.</span></span> <span data-ttu-id="cc8c6-407">| 1000 | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.ThrowWriteExceptions> | Určuje, jestli tělo odpovědi zapisuje, které selhalo kvůli odpojení klienta, by mělo vyvolat výjimky nebo dokončit normálně.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-407">| 1000 | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.ThrowWriteExceptions> | Indicate if response body writes that fail due to client disconnects should throw exceptions or complete normally.</span></span> | `false`<br><span data-ttu-id="cc8c6-408">(normálně dokončit) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.Timeouts> | Vystavte konfiguraci HTTP. sys <xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager> , která může být v registru nakonfigurovaná taky.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-408">(complete normally) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.Timeouts> | Expose the HTTP.sys <xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager> configuration, which may also be configured in the registry.</span></span> <span data-ttu-id="cc8c6-409">Pomocí odkazů rozhraní API získáte další informace o jednotlivých nastaveních, včetně výchozích hodnot:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-409">Follow the API links to learn more about each setting, including default values:</span></span><ul><li><span data-ttu-id="cc8c6-410">[TimeoutManager. DrainEntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.DrainEntityBody): čas povolený pro rozhraní API serveru http, který má vyprázdnit tělo entity u připojení Keep-Alive.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-410">[TimeoutManager.DrainEntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.DrainEntityBody): Time allowed for the HTTP Server API to drain the entity body on a Keep-Alive connection.</span></span></li><li><span data-ttu-id="cc8c6-411">[TimeoutManager. EntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.EntityBody): čas povolený pro doručení těla entity požadavku.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-411">[TimeoutManager.EntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.EntityBody): Time allowed for the request entity body to arrive.</span></span></li><li><span data-ttu-id="cc8c6-412">[TimeoutManager. HeaderWait](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.HeaderWait): čas povolený pro rozhraní API serveru HTTP k analýze hlavičky žádosti.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-412">[TimeoutManager.HeaderWait](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.HeaderWait): Time allowed for the HTTP Server API to parse the request header.</span></span></li><li><span data-ttu-id="cc8c6-413">[TimeoutManager. IdleConnection](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.IdleConnection): čas povolený pro nečinné připojení.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-413">[TimeoutManager.IdleConnection](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.IdleConnection): Time allowed for an idle connection.</span></span></li><li><span data-ttu-id="cc8c6-414">[TimeoutManager. MinSendBytesPerSecond](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.MinSendBytesPerSecond): minimální rychlost odesílání odpovědi.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-414">[TimeoutManager.MinSendBytesPerSecond](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.MinSendBytesPerSecond): The minimum send rate for the response.</span></span></li><li><span data-ttu-id="cc8c6-415">[TimeoutManager. RequestQueue](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.RequestQueue): čas, který může požadavek zůstat ve frontě požadavků předtím, než ji aplikace vybere.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-415">[TimeoutManager.RequestQueue](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.RequestQueue): Time allowed for the request to remain in the request queue before the app picks it up.</span></span></li></ul> <span data-ttu-id="cc8c6-416">|  | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> | Zadejte, který se <xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection> má zaregistrovat v http. sys.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-416">|  | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> | Specify the <xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection> to register with HTTP.sys.</span></span> <span data-ttu-id="cc8c6-417">Nejužitečnější je [UrlPrefixCollection. Add](xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection.Add*), který se používá k přidání předpony do kolekce.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-417">The most useful is [UrlPrefixCollection.Add](xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection.Add*), which is used to add a prefix to the collection.</span></span> <span data-ttu-id="cc8c6-418">Ty mohou být kdykoliv změněny předtím, než se naslouchací proces vyřazuje.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-418">These may be modified at any time prior to disposing the listener.</span></span> <span data-ttu-id="cc8c6-419">|  |</span><span class="sxs-lookup"><span data-stu-id="cc8c6-419">|  |</span></span>

<a name="maxrequestbodysize"></a>

<span data-ttu-id="cc8c6-420">**MaxRequestBodySize**</span><span class="sxs-lookup"><span data-stu-id="cc8c6-420">**MaxRequestBodySize**</span></span>

<span data-ttu-id="cc8c6-421">Maximální povolená velikost libovolného textu žádosti v bajtech</span><span class="sxs-lookup"><span data-stu-id="cc8c6-421">The maximum allowed size of any request body in bytes.</span></span> <span data-ttu-id="cc8c6-422">Při nastavení na `null` je maximální velikost textu požadavku neomezená.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-422">When set to `null`, the maximum request body size is unlimited.</span></span> <span data-ttu-id="cc8c6-423">Toto omezení nemá žádný vliv na upgradovaná připojení, která jsou vždycky neomezená.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-423">This limit has no effect on upgraded connections, which are always unlimited.</span></span>

<span data-ttu-id="cc8c6-424">Doporučená metoda pro přepsání limitu v aplikaci ASP.NET Core MVC pro jeden `IActionResult` je použít <xref:Microsoft.AspNetCore.Mvc.RequestSizeLimitAttribute> atribut pro metodu akce:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-424">The recommended method to override the limit in an ASP.NET Core MVC app for a single `IActionResult` is to use the <xref:Microsoft.AspNetCore.Mvc.RequestSizeLimitAttribute> attribute on an action method:</span></span>

```csharp
[RequestSizeLimit(100000000)]
public IActionResult MyActionMethod()
```

<span data-ttu-id="cc8c6-425">Výjimka je vyvolána, pokud se aplikace pokusí nakonfigurovat limit žádosti poté, co aplikace začne číst požadavek.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-425">An exception is thrown if the app attempts to configure the limit on a request after the app has started reading the request.</span></span> <span data-ttu-id="cc8c6-426">`IsReadOnly`Vlastnost může být použita k označení `MaxRequestBodySize` , zda je vlastnost ve stavu jen pro čtení, což znamená, že je příliš pozdě pro konfiguraci limitu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-426">An `IsReadOnly` property can be used to indicate if the `MaxRequestBodySize` property is in a read-only state, meaning it's too late to configure the limit.</span></span>

<span data-ttu-id="cc8c6-427">Pokud by měla aplikace přepsat <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> jednotlivé požadavky, použijte <xref:Microsoft.AspNetCore.Http.Features.IHttpMaxRequestBodySizeFeature> :</span><span class="sxs-lookup"><span data-stu-id="cc8c6-427">If the app should override <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> per-request, use the <xref:Microsoft.AspNetCore.Http.Features.IHttpMaxRequestBodySizeFeature>:</span></span>

[!code-csharp[](httpsys/samples/3.x/SampleApp/Startup.cs?name=snippet1&highlight=6-7)]

<span data-ttu-id="cc8c6-428">Pokud používáte Visual Studio, ujistěte se, že aplikace není nakonfigurovaná tak, aby spouštěla službu IIS nebo IIS Express.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-428">If using Visual Studio, make sure the app isn't configured to run IIS or IIS Express.</span></span>

<span data-ttu-id="cc8c6-429">V aplikaci Visual Studio je výchozím spouštěcím profilem IIS Express.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-429">In Visual Studio, the default launch profile is for IIS Express.</span></span> <span data-ttu-id="cc8c6-430">Chcete-li spustit projekt jako konzolovou aplikaci, ručně změňte vybraný profil, jak je znázorněno na následujícím snímku obrazovky:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-430">To run the project as a console app, manually change the selected profile, as shown in the following screen shot:</span></span>

![Vybrat profil aplikace konzoly](httpsys/_static/vs-choose-profile.png)

### <a name="configure-windows-server"></a><span data-ttu-id="cc8c6-432">Konfigurace Windows serveru</span><span class="sxs-lookup"><span data-stu-id="cc8c6-432">Configure Windows Server</span></span>

1. <span data-ttu-id="cc8c6-433">Určete porty, které se mají otevřít pro aplikaci, a pomocí [brány Windows Firewall](/windows/security/threat-protection/windows-firewall/create-an-inbound-port-rule) nebo rutiny [New-NetFirewallRule](/powershell/module/netsecurity/new-netfirewallrule) prostředí PowerShell otevřete porty brány firewall, aby bylo možné provozovat přes protokol HTTP. sys.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-433">Determine the ports to open for the app and use [Windows Firewall](/windows/security/threat-protection/windows-firewall/create-an-inbound-port-rule) or the [New-NetFirewallRule](/powershell/module/netsecurity/new-netfirewallrule) PowerShell cmdlet to open firewall ports to allow traffic to reach HTTP.sys.</span></span> <span data-ttu-id="cc8c6-434">V následujících příkazech a konfiguraci aplikace se používá port 443.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-434">In the following commands and app configuration, port 443 is used.</span></span>

1. <span data-ttu-id="cc8c6-435">Při nasazování na virtuální počítač Azure otevřete porty ve [skupině zabezpečení sítě](/azure/virtual-machines/windows/nsg-quickstart-portal).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-435">When deploying to an Azure VM, open the ports in the [Network Security Group](/azure/virtual-machines/windows/nsg-quickstart-portal).</span></span> <span data-ttu-id="cc8c6-436">V následujících příkazech a konfiguraci aplikace se používá port 443.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-436">In the following commands and app configuration, port 443 is used.</span></span>

1. <span data-ttu-id="cc8c6-437">V případě potřeby Získejte a nainstalujte certifikáty X. 509.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-437">Obtain and install X.509 certificates, if required.</span></span>

   <span data-ttu-id="cc8c6-438">V systému Windows vytvořte pomocí [rutiny prostředí PowerShell New-SelfSignedCertificate](/powershell/module/pkiclient/new-selfsignedcertificate)certifikáty podepsané svým držitelem.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-438">On Windows, create self-signed certificates using the [New-SelfSignedCertificate PowerShell cmdlet](/powershell/module/pkiclient/new-selfsignedcertificate).</span></span> <span data-ttu-id="cc8c6-439">Nepodporovaný příklad naleznete v tématu [UpdateIISExpressSSLForChrome. ps1](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/includes/make-x509-cert/UpdateIISExpressSSLForChrome.ps1).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-439">For an unsupported example, see [UpdateIISExpressSSLForChrome.ps1](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/includes/make-x509-cert/UpdateIISExpressSSLForChrome.ps1).</span></span>

   <span data-ttu-id="cc8c6-440">Nainstalujte certifikáty podepsané svým držitelem nebo certifikátem podepsaným certifikační autoritou do osobního úložiště **místního počítače** serveru > **Personal** .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-440">Install either self-signed or CA-signed certificates in the server's **Local Machine** > **Personal** store.</span></span>

1. <span data-ttu-id="cc8c6-441">Pokud se jedná o [nasazení závislé na rozhraní](/dotnet/core/deploying/#framework-dependent-deployments-fdd), nainstalujte rozhraní .NET core, .NET Framework nebo obojí (Pokud je aplikace aplikace .NET Core cílící na .NET Framework).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-441">If the app is a [framework-dependent deployment](/dotnet/core/deploying/#framework-dependent-deployments-fdd), install .NET Core, .NET Framework, or both (if the app is a .NET Core app targeting the .NET Framework).</span></span>

   * <span data-ttu-id="cc8c6-442">**.NET Core**: Pokud aplikace vyžaduje .NET Core, Získejte a spusťte instalační program **modulu runtime .NET Core** ze [souborů ke stažení pro .NET Core](https://dotnet.microsoft.com/download).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-442">**.NET Core**: If the app requires .NET Core, obtain and run the **.NET Core Runtime** installer from [.NET Core Downloads](https://dotnet.microsoft.com/download).</span></span> <span data-ttu-id="cc8c6-443">Neinstalujte na server plnou sadu SDK.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-443">Don't install the full SDK on the server.</span></span>
   * <span data-ttu-id="cc8c6-444">**.NET Framework**: Pokud aplikace vyžaduje .NET Framework, přečtěte si téma [Průvodce instalací .NET Framework](/dotnet/framework/install/).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-444">**.NET Framework**: If the app requires .NET Framework, see the [.NET Framework installation guide](/dotnet/framework/install/).</span></span> <span data-ttu-id="cc8c6-445">Nainstalujte požadovanou .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-445">Install the required .NET Framework.</span></span> <span data-ttu-id="cc8c6-446">Instalační program pro nejnovější .NET Framework je k dispozici na stránce [soubory ke stažení pro .NET Core](https://dotnet.microsoft.com/download) .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-446">The installer for the latest .NET Framework is available from the [.NET Core Downloads](https://dotnet.microsoft.com/download) page.</span></span>

   <span data-ttu-id="cc8c6-447">Pokud je aplikace samostatným [nasazením](/dotnet/core/deploying/#self-contained-deployments-scd), aplikace zahrne modul runtime do svého nasazení.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-447">If the app is a [self-contained deployment](/dotnet/core/deploying/#self-contained-deployments-scd), the app includes the runtime in its deployment.</span></span> <span data-ttu-id="cc8c6-448">Na serveru není nutná žádná instalace rozhraní.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-448">No framework installation is required on the server.</span></span>

1. <span data-ttu-id="cc8c6-449">Konfigurace adres URL a portů v aplikaci</span><span class="sxs-lookup"><span data-stu-id="cc8c6-449">Configure URLs and ports in the app.</span></span>

   <span data-ttu-id="cc8c6-450">Ve výchozím nastavení ASP.NET Core váže `http://localhost:5000` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-450">By default, ASP.NET Core binds to `http://localhost:5000`.</span></span> <span data-ttu-id="cc8c6-451">Pokud chcete nakonfigurovat předpony a porty adresy URL, můžete použít tyto možnosti:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-451">To configure URL prefixes and ports, options include:</span></span>

   * <xref:Microsoft.AspNetCore.Hosting.HostingAbstractionsWebHostBuilderExtensions.UseUrls*>
   * <span data-ttu-id="cc8c6-452">`urls`argument příkazového řádku</span><span class="sxs-lookup"><span data-stu-id="cc8c6-452">`urls` command-line argument</span></span>
   * <span data-ttu-id="cc8c6-453">`ASPNETCORE_URLS`Proměnná prostředí</span><span class="sxs-lookup"><span data-stu-id="cc8c6-453">`ASPNETCORE_URLS` environment variable</span></span>
   * <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes>

   <span data-ttu-id="cc8c6-454">Následující příklad kódu ukazuje, jak používat <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> s místní IP adresou serveru `10.0.0.4` na portu 443:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-454">The following code example shows how to use <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> with the server's local IP address `10.0.0.4` on port 443:</span></span>

   [!code-csharp[](httpsys/samples_snapshot/3.x/Program.cs?highlight=7)]

   <span data-ttu-id="cc8c6-455">Výhodou `UrlPrefixes` je, že se okamžitě generuje chybová zpráva pro nesprávně naformátované předpony.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-455">An advantage of `UrlPrefixes` is that an error message is generated immediately for improperly formatted prefixes.</span></span>

   <span data-ttu-id="cc8c6-456">Nastavení v `UrlPrefixes` `UseUrls` / `urls` / `ASPNETCORE_URLS` Nastavení přepsání</span><span class="sxs-lookup"><span data-stu-id="cc8c6-456">The settings in `UrlPrefixes` override `UseUrls`/`urls`/`ASPNETCORE_URLS` settings.</span></span> <span data-ttu-id="cc8c6-457">Proto je výhodou `UseUrls` `urls` `ASPNETCORE_URLS` proměnné prostředí, a jednodušší přepínání mezi Kestrel a http. sys.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-457">Therefore, an advantage of `UseUrls`, `urls`, and the `ASPNETCORE_URLS` environment variable is that it's easier to switch between Kestrel and HTTP.sys.</span></span>

   <span data-ttu-id="cc8c6-458">HTTP. sys používá [formáty řetězce UrlPrefix HTTP serveru API](https://msdn.microsoft.com/library/windows/desktop/aa364698.aspx).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-458">HTTP.sys uses the [HTTP Server API UrlPrefix string formats](https://msdn.microsoft.com/library/windows/desktop/aa364698.aspx).</span></span>

   > [!WARNING]
   > <span data-ttu-id="cc8c6-459">Nelze použít vazby zástupných znaků na nejvyšší úrovni ( `http://*:80/` a `http://+:80` ). **not**</span><span class="sxs-lookup"><span data-stu-id="cc8c6-459">Top-level wildcard bindings (`http://*:80/` and `http://+:80`) should **not** be used.</span></span> <span data-ttu-id="cc8c6-460">Vazby na zástupné znaky na nejvyšší úrovni vytvoří chyby zabezpečení aplikace.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-460">Top-level wildcard bindings create app security vulnerabilities.</span></span> <span data-ttu-id="cc8c6-461">To platí pro silné i slabé zástupné znaky.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-461">This applies to both strong and weak wildcards.</span></span> <span data-ttu-id="cc8c6-462">Místo zástupných znaků použijte explicitní názvy hostitelů nebo IP adresy.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-462">Use explicit host names or IP addresses rather than wildcards.</span></span> <span data-ttu-id="cc8c6-463">Vazba zástupných znaků subdomény (například `*.mysub.com` ) není bezpečnostní riziko, pokud ovládáte celou nadřazenou doménu (na rozdíl od `*.com` , která je zranitelná).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-463">Subdomain wildcard binding (for example, `*.mysub.com`) isn't a security risk if you control the entire parent domain (as opposed to `*.com`, which is vulnerable).</span></span> <span data-ttu-id="cc8c6-464">Další informace najdete v [dokumentu RFC 7230: oddíl 5,4: Host](https://tools.ietf.org/html/rfc7230#section-5.4).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-464">For more information, see [RFC 7230: Section 5.4: Host](https://tools.ietf.org/html/rfc7230#section-5.4).</span></span>

1. <span data-ttu-id="cc8c6-465">Předregistrujte předpony adresy URL na serveru.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-465">Preregister URL prefixes on the server.</span></span>

   <span data-ttu-id="cc8c6-466">Integrovaný nástroj pro konfiguraci souboru HTTP. sys je *netsh. exe*.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-466">The built-in tool for configuring HTTP.sys is *netsh.exe*.</span></span> <span data-ttu-id="cc8c6-467">pomocí *nástroje Netsh. exe* můžete rezervovat PŘEDPONY adres URL a přiřazovat certifikáty X. 509.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-467">*netsh.exe* is used to reserve URL prefixes and assign X.509 certificates.</span></span> <span data-ttu-id="cc8c6-468">Nástroj vyžaduje oprávnění správce.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-468">The tool requires administrator privileges.</span></span>

   <span data-ttu-id="cc8c6-469">Registrace adres URL pro aplikaci pomocí nástroje *netsh. exe* :</span><span class="sxs-lookup"><span data-stu-id="cc8c6-469">Use the *netsh.exe* tool to register URLs for the app:</span></span>

   ```console
   netsh http add urlacl url=<URL> user=<USER>
   ```

   * <span data-ttu-id="cc8c6-470">`<URL>`: Plně kvalifikované adresy URL (Uniform Resource Locator).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-470">`<URL>`: The fully qualified Uniform Resource Locator (URL).</span></span> <span data-ttu-id="cc8c6-471">Nepoužívejte vazbu zástupných znaků.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-471">Don't use a wildcard binding.</span></span> <span data-ttu-id="cc8c6-472">Použijte platný název hostitele nebo místní IP adresu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-472">Use a valid hostname or local IP address.</span></span> <span data-ttu-id="cc8c6-473">*Adresa URL musí obsahovat koncové lomítko.*</span><span class="sxs-lookup"><span data-stu-id="cc8c6-473">*The URL must include a trailing slash.*</span></span>
   * <span data-ttu-id="cc8c6-474">`<USER>`: Určuje název uživatele nebo skupiny uživatelů.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-474">`<USER>`: Specifies the user or user-group name.</span></span>

   <span data-ttu-id="cc8c6-475">V následujícím příkladu je místní IP adresa serveru `10.0.0.4` :</span><span class="sxs-lookup"><span data-stu-id="cc8c6-475">In the following example, the local IP address of the server is `10.0.0.4`:</span></span>

   ```console
   netsh http add urlacl url=https://10.0.0.4:443/ user=Users
   ```

   <span data-ttu-id="cc8c6-476">Když je adresa URL registrována, nástroj odpoví `URL reservation successfully added` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-476">When a URL is registered, the tool responds with `URL reservation successfully added`.</span></span>

   <span data-ttu-id="cc8c6-477">Pokud chcete odstranit registrovanou adresu URL, použijte `delete urlacl` příkaz:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-477">To delete a registered URL, use the `delete urlacl` command:</span></span>

   ```console
   netsh http delete urlacl url=<URL>
   ```

1. <span data-ttu-id="cc8c6-478">Zaregistrujte certifikáty X. 509 na serveru.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-478">Register X.509 certificates on the server.</span></span>

   <span data-ttu-id="cc8c6-479">K registraci certifikátů pro aplikaci použijte nástroj *netsh. exe* :</span><span class="sxs-lookup"><span data-stu-id="cc8c6-479">Use the *netsh.exe* tool to register certificates for the app:</span></span>

   ```console
   netsh http add sslcert ipport=<IP>:<PORT> certhash=<THUMBPRINT> appid="{<GUID>}"
   ```

   * <span data-ttu-id="cc8c6-480">`<IP>`: Určuje místní IP adresu pro vazbu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-480">`<IP>`: Specifies the local IP address for the binding.</span></span> <span data-ttu-id="cc8c6-481">Nepoužívejte vazbu zástupných znaků.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-481">Don't use a wildcard binding.</span></span> <span data-ttu-id="cc8c6-482">Použijte platnou IP adresu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-482">Use a valid IP address.</span></span>
   * <span data-ttu-id="cc8c6-483">`<PORT>`: Určuje port pro vazbu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-483">`<PORT>`: Specifies the port for the binding.</span></span>
   * <span data-ttu-id="cc8c6-484">`<THUMBPRINT>`: Kryptografický otisk certifikátu X. 509.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-484">`<THUMBPRINT>`: The X.509 certificate thumbprint.</span></span>
   * <span data-ttu-id="cc8c6-485">`<GUID>`: Identifikátor GUID generovaný vývojářem, který představuje aplikaci pro informativní účely.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-485">`<GUID>`: A developer-generated GUID to represent the app for informational purposes.</span></span>

   <span data-ttu-id="cc8c6-486">Pro referenční účely uložte identifikátor GUID do aplikace jako značku balíčku:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-486">For reference purposes, store the GUID in the app as a package tag:</span></span>

   * <span data-ttu-id="cc8c6-487">V aplikaci Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-487">In Visual Studio:</span></span>
     * <span data-ttu-id="cc8c6-488">Otevřete vlastnosti projektu aplikace tak, že kliknete pravým tlačítkem na aplikaci v **Průzkumník řešení** a vyberete **vlastnosti**.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-488">Open the app's project properties by right-clicking on the app in **Solution Explorer** and selecting **Properties**.</span></span>
     * <span data-ttu-id="cc8c6-489">Vyberte kartu **balíček** .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-489">Select the **Package** tab.</span></span>
     * <span data-ttu-id="cc8c6-490">Zadejte identifikátor GUID, který jste vytvořili v poli **značky** .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-490">Enter the GUID that you created in the **Tags** field.</span></span>
   * <span data-ttu-id="cc8c6-491">Když nepoužíváte Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-491">When not using Visual Studio:</span></span>
     * <span data-ttu-id="cc8c6-492">Otevřete soubor projektu aplikace.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-492">Open the app's project file.</span></span>
     * <span data-ttu-id="cc8c6-493">Přidejte `<PackageTags>` vlastnost do nového nebo existujícího `<PropertyGroup>` s identifikátorem GUID, který jste vytvořili:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-493">Add a `<PackageTags>` property to a new or existing `<PropertyGroup>` with the GUID that you created:</span></span>

       ```xml
       <PropertyGroup>
         <PackageTags>9412ee86-c21b-4eb8-bd89-f650fbf44931</PackageTags>
       </PropertyGroup>
       ```

   <span data-ttu-id="cc8c6-494">V následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-494">In the following example:</span></span>

   * <span data-ttu-id="cc8c6-495">Místní IP adresa serveru je `10.0.0.4` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-495">The local IP address of the server is `10.0.0.4`.</span></span>
   * <span data-ttu-id="cc8c6-496">Generátor náhodných identifikátorů GUID online poskytuje `appid` hodnotu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-496">An online random GUID generator provides the `appid` value.</span></span>

   ```console
   netsh http add sslcert 
       ipport=10.0.0.4:443 
       certhash=b66ee04419d4ee37464ab8785ff02449980eae10 
       appid="{9412ee86-c21b-4eb8-bd89-f650fbf44931}"
   ```

   <span data-ttu-id="cc8c6-497">Když je certifikát zaregistrován, nástroj odpoví `SSL Certificate successfully added` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-497">When a certificate is registered, the tool responds with `SSL Certificate successfully added`.</span></span>

   <span data-ttu-id="cc8c6-498">K odstranění registrace certifikátu použijte `delete sslcert` příkaz:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-498">To delete a certificate registration, use the `delete sslcert` command:</span></span>

   ```console
   netsh http delete sslcert ipport=<IP>:<PORT>
   ```

   <span data-ttu-id="cc8c6-499">Referenční dokumentace k nástroji *netsh. exe*:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-499">Reference documentation for *netsh.exe*:</span></span>

   * [<span data-ttu-id="cc8c6-500">Příkazy Netsh pro protokol HTTP (Hypertext Transfer Protocol)</span><span class="sxs-lookup"><span data-stu-id="cc8c6-500">Netsh Commands for Hypertext Transfer Protocol (HTTP)</span></span>](https://technet.microsoft.com/library/cc725882.aspx)
   * [<span data-ttu-id="cc8c6-501">UrlPrefix řetězce</span><span class="sxs-lookup"><span data-stu-id="cc8c6-501">UrlPrefix Strings</span></span>](https://msdn.microsoft.com/library/windows/desktop/aa364698.aspx)

1. <span data-ttu-id="cc8c6-502">Spusťte aplikaci.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-502">Run the app.</span></span>

   <span data-ttu-id="cc8c6-503">Oprávnění správce nejsou nutná ke spuštění aplikace při vytváření vazby na localhost pomocí protokolu HTTP (ne HTTPS) s číslem portu větším než 1024.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-503">Administrator privileges aren't required to run the app when binding to localhost using HTTP (not HTTPS) with a port number greater than 1024.</span></span> <span data-ttu-id="cc8c6-504">U ostatních konfigurací (například pomocí místní IP adresy nebo vazby na port 443) spusťte aplikaci s oprávněními správce.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-504">For other configurations (for example, using a local IP address or binding to port 443), run the app with administrator privileges.</span></span>

   <span data-ttu-id="cc8c6-505">Aplikace odpoví na veřejnou IP adresu serveru.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-505">The app responds at the server's public IP address.</span></span> <span data-ttu-id="cc8c6-506">V tomto příkladu je server dosažitelný z Internetu na jeho veřejné IP adrese `104.214.79.47` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-506">In this example, the server is reached from the Internet at its public IP address of `104.214.79.47`.</span></span>

   <span data-ttu-id="cc8c6-507">V tomto příkladu se používá vývojový certifikát.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-507">A development certificate is used in this example.</span></span> <span data-ttu-id="cc8c6-508">Stránka se načte bezpečně po obejít upozornění na nedůvěryhodný certifikát v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-508">The page loads securely after bypassing the browser's untrusted certificate warning.</span></span>

   ![Okno prohlížeče zobrazující načtenou stránku indexu aplikace](httpsys/_static/browser.png)

## <a name="proxy-server-and-load-balancer-scenarios"></a><span data-ttu-id="cc8c6-510">Scénáře proxy serveru a nástroje pro vyrovnávání zatížení</span><span class="sxs-lookup"><span data-stu-id="cc8c6-510">Proxy server and load balancer scenarios</span></span>

<span data-ttu-id="cc8c6-511">Pro aplikace hostované souborem HTTP. sys, které komunikují s požadavky z Internetu nebo podnikové sítě, se může při hostování za proxy servery a nástroji pro vyrovnávání zatížení vyžadovat další konfigurace.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-511">For apps hosted by HTTP.sys that interact with requests from the Internet or a corporate network, additional configuration might be required when hosting behind proxy servers and load balancers.</span></span> <span data-ttu-id="cc8c6-512">Další informace najdete v tématu [konfigurace ASP.NET Core pro práci se servery proxy a nástroji pro vyrovnávání zatížení](xref:host-and-deploy/proxy-load-balancer).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-512">For more information, see [Configure ASP.NET Core to work with proxy servers and load balancers](xref:host-and-deploy/proxy-load-balancer).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="cc8c6-513">Další zdroje</span><span class="sxs-lookup"><span data-stu-id="cc8c6-513">Additional resources</span></span>

* [<span data-ttu-id="cc8c6-514">Povolit ověřování systému Windows pomocí HTTP. sys</span><span class="sxs-lookup"><span data-stu-id="cc8c6-514">Enable Windows Authentication with HTTP.sys</span></span>](xref:security/authentication/windowsauth#httpsys)
* [<span data-ttu-id="cc8c6-515">Rozhraní API serveru HTTP</span><span class="sxs-lookup"><span data-stu-id="cc8c6-515">HTTP Server API</span></span>](https://msdn.microsoft.com/library/windows/desktop/aa364510.aspx)
* [<span data-ttu-id="cc8c6-516">úložiště GitHubu ASPNET/HttpSysServer (zdrojový kód)</span><span class="sxs-lookup"><span data-stu-id="cc8c6-516">aspnet/HttpSysServer GitHub repository (source code)</span></span>](https://github.com/aspnet/HttpSysServer/)
* [<span data-ttu-id="cc8c6-517">Hostitel</span><span class="sxs-lookup"><span data-stu-id="cc8c6-517">The host</span></span>](xref:fundamentals/index#host)
* <xref:test/troubleshoot>

::: moniker-end

::: moniker range="= aspnetcore-2.2"

<span data-ttu-id="cc8c6-518">[Http. sys](/iis/get-started/introduction-to-iis/introduction-to-iis-architecture#hypertext-transfer-protocol-stack-httpsys) je [webový server pro ASP.NET Core](xref:fundamentals/servers/index) , který běží pouze v systému Windows.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-518">[HTTP.sys](/iis/get-started/introduction-to-iis/introduction-to-iis-architecture#hypertext-transfer-protocol-stack-httpsys) is a [web server for ASP.NET Core](xref:fundamentals/servers/index) that only runs on Windows.</span></span> <span data-ttu-id="cc8c6-519">HTTP. sys je alternativou k serveru [Kestrel](xref:fundamentals/servers/kestrel) a nabízí některé funkce, které Kestrel neposkytuje.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-519">HTTP.sys is an alternative to [Kestrel](xref:fundamentals/servers/kestrel) server and offers some features that Kestrel doesn't provide.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="cc8c6-520">HTTP. sys není kompatibilní s [modulem ASP.NET Core](xref:host-and-deploy/aspnet-core-module) a nedá se použít se službou IIS nebo IIS Express.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-520">HTTP.sys isn't compatible with the [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module) and can't be used with IIS or IIS Express.</span></span>

<span data-ttu-id="cc8c6-521">HTTP. sys podporuje následující funkce:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-521">HTTP.sys supports the following features:</span></span>

* [<span data-ttu-id="cc8c6-522">Ověřování systému Windows</span><span class="sxs-lookup"><span data-stu-id="cc8c6-522">Windows Authentication</span></span>](xref:security/authentication/windowsauth)
* <span data-ttu-id="cc8c6-523">Sdílení portů</span><span class="sxs-lookup"><span data-stu-id="cc8c6-523">Port sharing</span></span>
* <span data-ttu-id="cc8c6-524">HTTPS s SNI</span><span class="sxs-lookup"><span data-stu-id="cc8c6-524">HTTPS with SNI</span></span>
* <span data-ttu-id="cc8c6-525">HTTP/2 přes TLS (Windows 10 nebo novější)</span><span class="sxs-lookup"><span data-stu-id="cc8c6-525">HTTP/2 over TLS (Windows 10 or later)</span></span>
* <span data-ttu-id="cc8c6-526">Přímý přenos souborů</span><span class="sxs-lookup"><span data-stu-id="cc8c6-526">Direct file transmission</span></span>
* <span data-ttu-id="cc8c6-527">Ukládání odpovědí do mezipaměti</span><span class="sxs-lookup"><span data-stu-id="cc8c6-527">Response caching</span></span>
* <span data-ttu-id="cc8c6-528">WebSockets (Windows 8 nebo novější)</span><span class="sxs-lookup"><span data-stu-id="cc8c6-528">WebSockets (Windows 8 or later)</span></span>

<span data-ttu-id="cc8c6-529">Podporované verze systému Windows:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-529">Supported Windows versions:</span></span>

* <span data-ttu-id="cc8c6-530">Windows 7 nebo novější</span><span class="sxs-lookup"><span data-stu-id="cc8c6-530">Windows 7 or later</span></span>
* <span data-ttu-id="cc8c6-531">Windows Server 2008 R2 nebo novější</span><span class="sxs-lookup"><span data-stu-id="cc8c6-531">Windows Server 2008 R2 or later</span></span>

<span data-ttu-id="cc8c6-532">[Zobrazit nebo stáhnout ukázkový kód](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/servers/httpsys/samples) ([Jak stáhnout](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="cc8c6-532">[View or download sample code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/servers/httpsys/samples) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="when-to-use-httpsys"></a><span data-ttu-id="cc8c6-533">Kdy použít protokol HTTP. sys</span><span class="sxs-lookup"><span data-stu-id="cc8c6-533">When to use HTTP.sys</span></span>

<span data-ttu-id="cc8c6-534">HTTP. sys je užitečné pro nasazení, kde:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-534">HTTP.sys is useful for deployments where:</span></span>

* <span data-ttu-id="cc8c6-535">Server je potřeba zveřejnit přímo na internetu bez použití IIS.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-535">There's a need to expose the server directly to the Internet without using IIS.</span></span>

  ![HTTP. sys komunikuje přímo s internetem.](httpsys/_static/httpsys-to-internet.png)

* <span data-ttu-id="cc8c6-537">Interní nasazení vyžaduje funkci, která není v Kestrel k dispozici, jako je například [ověřování systému Windows](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-537">An internal deployment requires a feature not available in Kestrel, such as [Windows Authentication](xref:security/authentication/windowsauth).</span></span>

  ![HTTP. sys komunikuje přímo s interní sítí.](httpsys/_static/httpsys-to-internal.png)

<span data-ttu-id="cc8c6-539">HTTP. sys je Vyspělá technologie, která chrání před mnoha typy útoků a poskytuje odolnost, zabezpečení a škálovatelnost plně funkčního webového serveru.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-539">HTTP.sys is mature technology that protects against many types of attacks and provides the robustness, security, and scalability of a full-featured web server.</span></span> <span data-ttu-id="cc8c6-540">Samotná služba IIS běží jako naslouchací proces HTTP nad HTTP. sys.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-540">IIS itself runs as an HTTP listener on top of HTTP.sys.</span></span>

## <a name="http2-support"></a><span data-ttu-id="cc8c6-541">Podpora HTTP/2</span><span class="sxs-lookup"><span data-stu-id="cc8c6-541">HTTP/2 support</span></span>

<span data-ttu-id="cc8c6-542">[Protokol HTTP/2](https://httpwg.org/specs/rfc7540.html) je povolený pro aplikace ASP.NET Core, pokud jsou splněné následující základní požadavky:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-542">[HTTP/2](https://httpwg.org/specs/rfc7540.html) is enabled for ASP.NET Core apps if the following base requirements are met:</span></span>

* <span data-ttu-id="cc8c6-543">Windows Server 2016/Windows 10 nebo novější</span><span class="sxs-lookup"><span data-stu-id="cc8c6-543">Windows Server 2016/Windows 10 or later</span></span>
* <span data-ttu-id="cc8c6-544">Připojení [ALPN (Application-Layer Protocol Negotiation)](https://tools.ietf.org/html/rfc7301#section-3)</span><span class="sxs-lookup"><span data-stu-id="cc8c6-544">[Application-Layer Protocol Negotiation (ALPN)](https://tools.ietf.org/html/rfc7301#section-3) connection</span></span>
* <span data-ttu-id="cc8c6-545">Připojení TLS 1,2 nebo novější</span><span class="sxs-lookup"><span data-stu-id="cc8c6-545">TLS 1.2 or later connection</span></span>

<span data-ttu-id="cc8c6-546">Pokud je vytvořeno připojení HTTP/2, sestavy [HttpRequest. Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) `HTTP/2` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-546">If an HTTP/2 connection is established, [HttpRequest.Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) reports `HTTP/2`.</span></span>

<span data-ttu-id="cc8c6-547">HTTP/2 je ve výchozím nastavení povolené.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-547">HTTP/2 is enabled by default.</span></span> <span data-ttu-id="cc8c6-548">Pokud připojení HTTP/2 není navázáno, připojení se vrátí k HTTP/1.1.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-548">If an HTTP/2 connection isn't established, the connection falls back to HTTP/1.1.</span></span> <span data-ttu-id="cc8c6-549">V budoucí verzi Windows budou k dispozici příznaky konfigurace protokolu HTTP/2, včetně možnosti zakázat protokol HTTP/2 s protokolem HTTP. sys.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-549">In a future release of Windows, HTTP/2 configuration flags will be available, including the ability to disable HTTP/2 with HTTP.sys.</span></span>

## <a name="kernel-mode-authentication-with-kerberos"></a><span data-ttu-id="cc8c6-550">Ověřování v režimu jádra pomocí protokolu Kerberos</span><span class="sxs-lookup"><span data-stu-id="cc8c6-550">Kernel mode authentication with Kerberos</span></span>

<span data-ttu-id="cc8c6-551">Delegáti HTTP. sys se připravují ověřování režimu jádra pomocí ověřovacího protokolu Kerberos.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-551">HTTP.sys delegates to kernel mode authentication with the Kerberos authentication protocol.</span></span> <span data-ttu-id="cc8c6-552">Ověřování v uživatelském režimu se v protokolech Kerberos a HTTP. sys nepodporuje.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-552">User mode authentication isn't supported with Kerberos and HTTP.sys.</span></span> <span data-ttu-id="cc8c6-553">Účet počítače se musí použít k dešifrování tokenu nebo lístku protokolu Kerberos, který je získaný ze služby Active Directory a který přesměruje klient na server za účelem ověření uživatele.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-553">The machine account must be used to decrypt the Kerberos token/ticket that's obtained from Active Directory and forwarded by the client to the server to authenticate the user.</span></span> <span data-ttu-id="cc8c6-554">Zaregistrujte hlavní název služby (SPN) pro hostitele, nikoli uživatele aplikace.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-554">Register the Service Principal Name (SPN) for the host, not the user of the app.</span></span>

## <a name="how-to-use-httpsys"></a><span data-ttu-id="cc8c6-555">Jak používat HTTP. sys</span><span class="sxs-lookup"><span data-stu-id="cc8c6-555">How to use HTTP.sys</span></span>

### <a name="configure-the-aspnet-core-app-to-use-httpsys"></a><span data-ttu-id="cc8c6-556">Konfigurace aplikace ASP.NET Core pro použití HTTP. sys</span><span class="sxs-lookup"><span data-stu-id="cc8c6-556">Configure the ASP.NET Core app to use HTTP.sys</span></span>

<span data-ttu-id="cc8c6-557">Odkaz na balíček v souboru projektu není vyžadován při použití [Microsoft. AspNetCore. app Metapackage](xref:fundamentals/metapackage-app) ([NuGet.org](https://www.nuget.org/packages/Microsoft.AspNetCore.App/)).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-557">A package reference in the project file isn't required when using the [Microsoft.AspNetCore.App metapackage](xref:fundamentals/metapackage-app) ([nuget.org](https://www.nuget.org/packages/Microsoft.AspNetCore.App/)).</span></span> <span data-ttu-id="cc8c6-558">Pokud nepoužíváte `Microsoft.AspNetCore.App` Metapackage, přidejte odkaz na balíček do [Microsoft. AspNetCore. Server. HttpSys](https://www.nuget.org/packages/Microsoft.AspNetCore.Server.HttpSys/).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-558">When not using the `Microsoft.AspNetCore.App` metapackage, add a package reference to [Microsoft.AspNetCore.Server.HttpSys](https://www.nuget.org/packages/Microsoft.AspNetCore.Server.HttpSys/).</span></span>

<span data-ttu-id="cc8c6-559"><xref:Microsoft.AspNetCore.Hosting.WebHostBuilderHttpSysExtensions.UseHttpSys*>Při sestavování hostitele zavolejte metodu rozšíření a určete požadované <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions> .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-559">Call the <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderHttpSysExtensions.UseHttpSys*> extension method when building the host, specifying any required <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions>.</span></span> <span data-ttu-id="cc8c6-560">Následující příklad nastaví možnosti na jejich výchozí hodnoty:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-560">The following example sets options to their default values:</span></span>

[!code-csharp[](httpsys/samples/2.x/SampleApp/Program.cs?name=snippet1&highlight=4-12)]

<span data-ttu-id="cc8c6-561">Další konfiguraci HTTP. sys bude zpracována prostřednictvím [nastavení registru](https://support.microsoft.com/help/820129/http-sys-registry-settings-for-windows).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-561">Additional HTTP.sys configuration is handled through [registry settings](https://support.microsoft.com/help/820129/http-sys-registry-settings-for-windows).</span></span>

<span data-ttu-id="cc8c6-562">**Možnosti HTTP. sys**</span><span class="sxs-lookup"><span data-stu-id="cc8c6-562">**HTTP.sys options**</span></span>

| <span data-ttu-id="cc8c6-563">Vlastnost</span><span class="sxs-lookup"><span data-stu-id="cc8c6-563">Property</span></span> | <span data-ttu-id="cc8c6-564">Description</span><span class="sxs-lookup"><span data-stu-id="cc8c6-564">Description</span></span> | <span data-ttu-id="cc8c6-565">Výchozí</span><span class="sxs-lookup"><span data-stu-id="cc8c6-565">Default</span></span> |
| ---
<span data-ttu-id="cc8c6-566">Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-566">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="cc8c6-567">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-567">'Blazor'</span></span>
- <span data-ttu-id="cc8c6-568">'Identity'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-568">'Identity'</span></span>
- <span data-ttu-id="cc8c6-569">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-569">'Let's Encrypt'</span></span>
- <span data-ttu-id="cc8c6-570">'Razor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-570">'Razor'</span></span>
- <span data-ttu-id="cc8c6-571">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-571">'SignalR' uid:</span></span> 

-
<span data-ttu-id="cc8c6-572">Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-572">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="cc8c6-573">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-573">'Blazor'</span></span>
- <span data-ttu-id="cc8c6-574">'Identity'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-574">'Identity'</span></span>
- <span data-ttu-id="cc8c6-575">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-575">'Let's Encrypt'</span></span>
- <span data-ttu-id="cc8c6-576">'Razor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-576">'Razor'</span></span>
- <span data-ttu-id="cc8c6-577">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-577">'SignalR' uid:</span></span> 

<span data-ttu-id="cc8c6-578">---- | ---Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-578">---- | --- title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="cc8c6-579">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-579">'Blazor'</span></span>
- <span data-ttu-id="cc8c6-580">'Identity'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-580">'Identity'</span></span>
- <span data-ttu-id="cc8c6-581">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-581">'Let's Encrypt'</span></span>
- <span data-ttu-id="cc8c6-582">'Razor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-582">'Razor'</span></span>
- <span data-ttu-id="cc8c6-583">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-583">'SignalR' uid:</span></span> 

-
<span data-ttu-id="cc8c6-584">Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-584">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="cc8c6-585">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-585">'Blazor'</span></span>
- <span data-ttu-id="cc8c6-586">'Identity'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-586">'Identity'</span></span>
- <span data-ttu-id="cc8c6-587">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-587">'Let's Encrypt'</span></span>
- <span data-ttu-id="cc8c6-588">'Razor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-588">'Razor'</span></span>
- <span data-ttu-id="cc8c6-589">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-589">'SignalR' uid:</span></span> 

-
<span data-ttu-id="cc8c6-590">Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-590">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="cc8c6-591">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-591">'Blazor'</span></span>
- <span data-ttu-id="cc8c6-592">'Identity'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-592">'Identity'</span></span>
- <span data-ttu-id="cc8c6-593">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-593">'Let's Encrypt'</span></span>
- <span data-ttu-id="cc8c6-594">'Razor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-594">'Razor'</span></span>
- <span data-ttu-id="cc8c6-595">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-595">'SignalR' uid:</span></span> 

<span data-ttu-id="cc8c6-596">------ | :-----: | | [AllowSynchronousIO](xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.AllowSynchronousIO) | Určuje, zda je povolen synchronní vstup/výstup pro `HttpContext.Request.Body` a `HttpContext.Response.Body` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-596">------ | :-----: | | [AllowSynchronousIO](xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.AllowSynchronousIO) | Control whether synchronous input/output is allowed for the `HttpContext.Request.Body` and `HttpContext.Response.Body`.</span></span><span data-ttu-id="cc8c6-597"> | `true`| | [Ověřování. AllowAnonymous](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationManager.AllowAnonymous) | Povoluje anonymní požadavky.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-597"> | `true` | | [Authentication.AllowAnonymous](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationManager.AllowAnonymous) | Allow anonymous requests.</span></span><span data-ttu-id="cc8c6-598"> | `true`| | [Ověřování. schémata](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationManager.Schemes) | Určete povolená schémata ověřování.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-598"> | `true` | | [Authentication.Schemes](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationManager.Schemes) | Specify the allowed authentication schemes.</span></span> <span data-ttu-id="cc8c6-599">Může být kdykoli změněno před vyřazením naslouchacího procesu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-599">May be modified at any time prior to disposing the listener.</span></span> <span data-ttu-id="cc8c6-600">Hodnoty jsou k dispozici ve [výčtu schémata AuthenticationSchemes](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationSchemes): `Basic` , `Kerberos` , `Negotiate` , `None` a `NTLM` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-600">Values are provided by the [AuthenticationSchemes enum](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationSchemes): `Basic`, `Kerberos`, `Negotiate`, `None`, and `NTLM`.</span></span><span data-ttu-id="cc8c6-601"> | `None`| | [EnableResponseCaching](xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.EnableResponseCaching) | Pokusit se o ukládání do mezipaměti v [režimu jádra](/windows-hardware/drivers/gettingstarted/user-mode-and-kernel-mode) pro odpovědi s oprávněnými záhlavími.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-601"> | `None` | | [EnableResponseCaching](xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.EnableResponseCaching) | Attempt [kernel-mode](/windows-hardware/drivers/gettingstarted/user-mode-and-kernel-mode) caching for responses with eligible headers.</span></span> <span data-ttu-id="cc8c6-602">Odpověď nesmí obsahovat `Set-Cookie` `Vary` hlavičky, ani `Pragma` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-602">The response may not include `Set-Cookie`, `Vary`, or `Pragma` headers.</span></span> <span data-ttu-id="cc8c6-603">Musí obsahovat `Cache-Control` hlavičku, která je `public` a buď `shared-max-age` `max-age` hodnota nebo, nebo `Expires` záhlaví.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-603">It must include a `Cache-Control` header that's `public` and either a `shared-max-age` or `max-age` value, or an `Expires` header.</span></span><span data-ttu-id="cc8c6-604"> | `true`| | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxAccepts> | Maximální počet souběžných přijetí.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-604"> | `true` | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxAccepts> | The maximum number of concurrent accepts.</span></span> <span data-ttu-id="cc8c6-605">| 5 &times; [prostředí. <br> ProcessorCount](xref:System.Environment.ProcessorCount) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxConnections> | Maximální počet souběžných připojení, která se mají přijmout</span><span class="sxs-lookup"><span data-stu-id="cc8c6-605">| 5 &times; [Environment.<br>ProcessorCount](xref:System.Environment.ProcessorCount) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxConnections> | The maximum number of concurrent connections to accept.</span></span> <span data-ttu-id="cc8c6-606">Použijte `-1` pro nekonečné.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-606">Use `-1` for infinite.</span></span> <span data-ttu-id="cc8c6-607">Použijte `null` k použití nastavení pro počítač v rámci registru.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-607">Use `null` to use the registry's machine-wide setting.</span></span> | `null`<br><span data-ttu-id="cc8c6-608">(počítačově v šířce</span><span class="sxs-lookup"><span data-stu-id="cc8c6-608">(machine-wide</span></span><br><span data-ttu-id="cc8c6-609">nastavení) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> | Viz část <a href="#maxrequestbodysize">MaxRequestBodySize</a> .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-609">setting) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> | See the <a href="#maxrequestbodysize">MaxRequestBodySize</a> section.</span></span> <span data-ttu-id="cc8c6-610">| 30000000 bajtů</span><span class="sxs-lookup"><span data-stu-id="cc8c6-610">| 30000000 bytes</span></span><br><span data-ttu-id="cc8c6-611">(~ 28,6 MB) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.RequestQueueLimit> | Maximální počet požadavků, které lze zařadit do fronty.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-611">(~28.6 MB) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.RequestQueueLimit> | The maximum number of requests that can be queued.</span></span> <span data-ttu-id="cc8c6-612">| 1000 | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.ThrowWriteExceptions> | Určuje, jestli tělo odpovědi zapisuje, které selhalo kvůli odpojení klienta, by mělo vyvolat výjimky nebo dokončit normálně.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-612">| 1000 | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.ThrowWriteExceptions> | Indicate if response body writes that fail due to client disconnects should throw exceptions or complete normally.</span></span> | `false`<br><span data-ttu-id="cc8c6-613">(normálně dokončit) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.Timeouts> | Vystavte konfiguraci HTTP. sys <xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager> , která může být v registru nakonfigurovaná taky.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-613">(complete normally) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.Timeouts> | Expose the HTTP.sys <xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager> configuration, which may also be configured in the registry.</span></span> <span data-ttu-id="cc8c6-614">Pomocí odkazů rozhraní API získáte další informace o jednotlivých nastaveních, včetně výchozích hodnot:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-614">Follow the API links to learn more about each setting, including default values:</span></span><ul><li><span data-ttu-id="cc8c6-615">[TimeoutManager. DrainEntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.DrainEntityBody): čas povolený pro rozhraní API serveru http, který má vyprázdnit tělo entity u připojení Keep-Alive.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-615">[TimeoutManager.DrainEntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.DrainEntityBody): Time allowed for the HTTP Server API to drain the entity body on a Keep-Alive connection.</span></span></li><li><span data-ttu-id="cc8c6-616">[TimeoutManager. EntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.EntityBody): čas povolený pro doručení těla entity požadavku.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-616">[TimeoutManager.EntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.EntityBody): Time allowed for the request entity body to arrive.</span></span></li><li><span data-ttu-id="cc8c6-617">[TimeoutManager. HeaderWait](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.HeaderWait): čas povolený pro rozhraní API serveru HTTP k analýze hlavičky žádosti.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-617">[TimeoutManager.HeaderWait](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.HeaderWait): Time allowed for the HTTP Server API to parse the request header.</span></span></li><li><span data-ttu-id="cc8c6-618">[TimeoutManager. IdleConnection](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.IdleConnection): čas povolený pro nečinné připojení.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-618">[TimeoutManager.IdleConnection](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.IdleConnection): Time allowed for an idle connection.</span></span></li><li><span data-ttu-id="cc8c6-619">[TimeoutManager. MinSendBytesPerSecond](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.MinSendBytesPerSecond): minimální rychlost odesílání odpovědi.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-619">[TimeoutManager.MinSendBytesPerSecond](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.MinSendBytesPerSecond): The minimum send rate for the response.</span></span></li><li><span data-ttu-id="cc8c6-620">[TimeoutManager. RequestQueue](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.RequestQueue): čas, který může požadavek zůstat ve frontě požadavků předtím, než ji aplikace vybere.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-620">[TimeoutManager.RequestQueue](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.RequestQueue): Time allowed for the request to remain in the request queue before the app picks it up.</span></span></li></ul> <span data-ttu-id="cc8c6-621">|  | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> | Zadejte, který se <xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection> má zaregistrovat v http. sys.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-621">|  | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> | Specify the <xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection> to register with HTTP.sys.</span></span> <span data-ttu-id="cc8c6-622">Nejužitečnější je [UrlPrefixCollection. Add](xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection.Add*), který se používá k přidání předpony do kolekce.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-622">The most useful is [UrlPrefixCollection.Add](xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection.Add*), which is used to add a prefix to the collection.</span></span> <span data-ttu-id="cc8c6-623">Ty mohou být kdykoliv změněny předtím, než se naslouchací proces vyřazuje.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-623">These may be modified at any time prior to disposing the listener.</span></span> <span data-ttu-id="cc8c6-624">|  |</span><span class="sxs-lookup"><span data-stu-id="cc8c6-624">|  |</span></span>

<a name="maxrequestbodysize"></a>

<span data-ttu-id="cc8c6-625">**MaxRequestBodySize**</span><span class="sxs-lookup"><span data-stu-id="cc8c6-625">**MaxRequestBodySize**</span></span>

<span data-ttu-id="cc8c6-626">Maximální povolená velikost libovolného textu žádosti v bajtech</span><span class="sxs-lookup"><span data-stu-id="cc8c6-626">The maximum allowed size of any request body in bytes.</span></span> <span data-ttu-id="cc8c6-627">Při nastavení na `null` je maximální velikost textu požadavku neomezená.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-627">When set to `null`, the maximum request body size is unlimited.</span></span> <span data-ttu-id="cc8c6-628">Toto omezení nemá žádný vliv na upgradovaná připojení, která jsou vždycky neomezená.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-628">This limit has no effect on upgraded connections, which are always unlimited.</span></span>

<span data-ttu-id="cc8c6-629">Doporučená metoda pro přepsání limitu v aplikaci ASP.NET Core MVC pro jeden `IActionResult` je použít <xref:Microsoft.AspNetCore.Mvc.RequestSizeLimitAttribute> atribut pro metodu akce:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-629">The recommended method to override the limit in an ASP.NET Core MVC app for a single `IActionResult` is to use the <xref:Microsoft.AspNetCore.Mvc.RequestSizeLimitAttribute> attribute on an action method:</span></span>

```csharp
[RequestSizeLimit(100000000)]
public IActionResult MyActionMethod()
```

<span data-ttu-id="cc8c6-630">Výjimka je vyvolána, pokud se aplikace pokusí nakonfigurovat limit žádosti poté, co aplikace začne číst požadavek.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-630">An exception is thrown if the app attempts to configure the limit on a request after the app has started reading the request.</span></span> <span data-ttu-id="cc8c6-631">`IsReadOnly`Vlastnost může být použita k označení `MaxRequestBodySize` , zda je vlastnost ve stavu jen pro čtení, což znamená, že je příliš pozdě pro konfiguraci limitu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-631">An `IsReadOnly` property can be used to indicate if the `MaxRequestBodySize` property is in a read-only state, meaning it's too late to configure the limit.</span></span>

<span data-ttu-id="cc8c6-632">Pokud by měla aplikace přepsat <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> jednotlivé požadavky, použijte <xref:Microsoft.AspNetCore.Http.Features.IHttpMaxRequestBodySizeFeature> :</span><span class="sxs-lookup"><span data-stu-id="cc8c6-632">If the app should override <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> per-request, use the <xref:Microsoft.AspNetCore.Http.Features.IHttpMaxRequestBodySizeFeature>:</span></span>

[!code-csharp[](httpsys/samples/2.x/SampleApp/Startup.cs?name=snippet1&highlight=6-7)]

<span data-ttu-id="cc8c6-633">Pokud používáte Visual Studio, ujistěte se, že aplikace není nakonfigurovaná tak, aby spouštěla službu IIS nebo IIS Express.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-633">If using Visual Studio, make sure the app isn't configured to run IIS or IIS Express.</span></span>

<span data-ttu-id="cc8c6-634">V aplikaci Visual Studio je výchozím spouštěcím profilem IIS Express.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-634">In Visual Studio, the default launch profile is for IIS Express.</span></span> <span data-ttu-id="cc8c6-635">Chcete-li spustit projekt jako konzolovou aplikaci, ručně změňte vybraný profil, jak je znázorněno na následujícím snímku obrazovky:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-635">To run the project as a console app, manually change the selected profile, as shown in the following screen shot:</span></span>

![Vybrat profil aplikace konzoly](httpsys/_static/vs-choose-profile.png)

### <a name="configure-windows-server"></a><span data-ttu-id="cc8c6-637">Konfigurace Windows serveru</span><span class="sxs-lookup"><span data-stu-id="cc8c6-637">Configure Windows Server</span></span>

1. <span data-ttu-id="cc8c6-638">Určete porty, které se mají otevřít pro aplikaci, a pomocí [brány Windows Firewall](/windows/security/threat-protection/windows-firewall/create-an-inbound-port-rule) nebo rutiny [New-NetFirewallRule](/powershell/module/netsecurity/new-netfirewallrule) prostředí PowerShell otevřete porty brány firewall, aby bylo možné provozovat přes protokol HTTP. sys.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-638">Determine the ports to open for the app and use [Windows Firewall](/windows/security/threat-protection/windows-firewall/create-an-inbound-port-rule) or the [New-NetFirewallRule](/powershell/module/netsecurity/new-netfirewallrule) PowerShell cmdlet to open firewall ports to allow traffic to reach HTTP.sys.</span></span> <span data-ttu-id="cc8c6-639">V následujících příkazech a konfiguraci aplikace se používá port 443.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-639">In the following commands and app configuration, port 443 is used.</span></span>

1. <span data-ttu-id="cc8c6-640">Při nasazování na virtuální počítač Azure otevřete porty ve [skupině zabezpečení sítě](/azure/virtual-machines/windows/nsg-quickstart-portal).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-640">When deploying to an Azure VM, open the ports in the [Network Security Group](/azure/virtual-machines/windows/nsg-quickstart-portal).</span></span> <span data-ttu-id="cc8c6-641">V následujících příkazech a konfiguraci aplikace se používá port 443.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-641">In the following commands and app configuration, port 443 is used.</span></span>

1. <span data-ttu-id="cc8c6-642">V případě potřeby Získejte a nainstalujte certifikáty X. 509.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-642">Obtain and install X.509 certificates, if required.</span></span>

   <span data-ttu-id="cc8c6-643">V systému Windows vytvořte pomocí [rutiny prostředí PowerShell New-SelfSignedCertificate](/powershell/module/pkiclient/new-selfsignedcertificate)certifikáty podepsané svým držitelem.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-643">On Windows, create self-signed certificates using the [New-SelfSignedCertificate PowerShell cmdlet](/powershell/module/pkiclient/new-selfsignedcertificate).</span></span> <span data-ttu-id="cc8c6-644">Nepodporovaný příklad naleznete v tématu [UpdateIISExpressSSLForChrome. ps1](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/includes/make-x509-cert/UpdateIISExpressSSLForChrome.ps1).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-644">For an unsupported example, see [UpdateIISExpressSSLForChrome.ps1](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/includes/make-x509-cert/UpdateIISExpressSSLForChrome.ps1).</span></span>

   <span data-ttu-id="cc8c6-645">Nainstalujte certifikáty podepsané svým držitelem nebo certifikátem podepsaným certifikační autoritou do osobního úložiště **místního počítače** serveru > **Personal** .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-645">Install either self-signed or CA-signed certificates in the server's **Local Machine** > **Personal** store.</span></span>

1. <span data-ttu-id="cc8c6-646">Pokud se jedná o [nasazení závislé na rozhraní](/dotnet/core/deploying/#framework-dependent-deployments-fdd), nainstalujte rozhraní .NET core, .NET Framework nebo obojí (Pokud je aplikace aplikace .NET Core cílící na .NET Framework).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-646">If the app is a [framework-dependent deployment](/dotnet/core/deploying/#framework-dependent-deployments-fdd), install .NET Core, .NET Framework, or both (if the app is a .NET Core app targeting the .NET Framework).</span></span>

   * <span data-ttu-id="cc8c6-647">**.NET Core**: Pokud aplikace vyžaduje .NET Core, Získejte a spusťte instalační program **modulu runtime .NET Core** ze [souborů ke stažení pro .NET Core](https://dotnet.microsoft.com/download).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-647">**.NET Core**: If the app requires .NET Core, obtain and run the **.NET Core Runtime** installer from [.NET Core Downloads](https://dotnet.microsoft.com/download).</span></span> <span data-ttu-id="cc8c6-648">Neinstalujte na server plnou sadu SDK.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-648">Don't install the full SDK on the server.</span></span>
   * <span data-ttu-id="cc8c6-649">**.NET Framework**: Pokud aplikace vyžaduje .NET Framework, přečtěte si téma [Průvodce instalací .NET Framework](/dotnet/framework/install/).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-649">**.NET Framework**: If the app requires .NET Framework, see the [.NET Framework installation guide](/dotnet/framework/install/).</span></span> <span data-ttu-id="cc8c6-650">Nainstalujte požadovanou .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-650">Install the required .NET Framework.</span></span> <span data-ttu-id="cc8c6-651">Instalační program pro nejnovější .NET Framework je k dispozici na stránce [soubory ke stažení pro .NET Core](https://dotnet.microsoft.com/download) .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-651">The installer for the latest .NET Framework is available from the [.NET Core Downloads](https://dotnet.microsoft.com/download) page.</span></span>

   <span data-ttu-id="cc8c6-652">Pokud je aplikace samostatným [nasazením](/dotnet/core/deploying/#self-contained-deployments-scd), aplikace zahrne modul runtime do svého nasazení.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-652">If the app is a [self-contained deployment](/dotnet/core/deploying/#self-contained-deployments-scd), the app includes the runtime in its deployment.</span></span> <span data-ttu-id="cc8c6-653">Na serveru není nutná žádná instalace rozhraní.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-653">No framework installation is required on the server.</span></span>

1. <span data-ttu-id="cc8c6-654">Konfigurace adres URL a portů v aplikaci</span><span class="sxs-lookup"><span data-stu-id="cc8c6-654">Configure URLs and ports in the app.</span></span>

   <span data-ttu-id="cc8c6-655">Ve výchozím nastavení ASP.NET Core váže `http://localhost:5000` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-655">By default, ASP.NET Core binds to `http://localhost:5000`.</span></span> <span data-ttu-id="cc8c6-656">Pokud chcete nakonfigurovat předpony a porty adresy URL, můžete použít tyto možnosti:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-656">To configure URL prefixes and ports, options include:</span></span>

   * <xref:Microsoft.AspNetCore.Hosting.HostingAbstractionsWebHostBuilderExtensions.UseUrls*>
   * <span data-ttu-id="cc8c6-657">`urls`argument příkazového řádku</span><span class="sxs-lookup"><span data-stu-id="cc8c6-657">`urls` command-line argument</span></span>
   * <span data-ttu-id="cc8c6-658">`ASPNETCORE_URLS`Proměnná prostředí</span><span class="sxs-lookup"><span data-stu-id="cc8c6-658">`ASPNETCORE_URLS` environment variable</span></span>
   * <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes>

   <span data-ttu-id="cc8c6-659">Následující příklad kódu ukazuje, jak používat <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> s místní IP adresou serveru `10.0.0.4` na portu 443:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-659">The following code example shows how to use <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> with the server's local IP address `10.0.0.4` on port 443:</span></span>

   [!code-csharp[](httpsys/samples_snapshot/2.x/Program.cs?highlight=6)]

   <span data-ttu-id="cc8c6-660">Výhodou `UrlPrefixes` je, že se okamžitě generuje chybová zpráva pro nesprávně naformátované předpony.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-660">An advantage of `UrlPrefixes` is that an error message is generated immediately for improperly formatted prefixes.</span></span>

   <span data-ttu-id="cc8c6-661">Nastavení v `UrlPrefixes` `UseUrls` / `urls` / `ASPNETCORE_URLS` Nastavení přepsání</span><span class="sxs-lookup"><span data-stu-id="cc8c6-661">The settings in `UrlPrefixes` override `UseUrls`/`urls`/`ASPNETCORE_URLS` settings.</span></span> <span data-ttu-id="cc8c6-662">Proto je výhodou `UseUrls` `urls` `ASPNETCORE_URLS` proměnné prostředí, a jednodušší přepínání mezi Kestrel a http. sys.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-662">Therefore, an advantage of `UseUrls`, `urls`, and the `ASPNETCORE_URLS` environment variable is that it's easier to switch between Kestrel and HTTP.sys.</span></span>

   <span data-ttu-id="cc8c6-663">HTTP. sys používá [formáty řetězce UrlPrefix HTTP serveru API](https://msdn.microsoft.com/library/windows/desktop/aa364698.aspx).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-663">HTTP.sys uses the [HTTP Server API UrlPrefix string formats](https://msdn.microsoft.com/library/windows/desktop/aa364698.aspx).</span></span>

   > [!WARNING]
   > <span data-ttu-id="cc8c6-664">Nelze použít vazby zástupných znaků na nejvyšší úrovni ( `http://*:80/` a `http://+:80` ). **not**</span><span class="sxs-lookup"><span data-stu-id="cc8c6-664">Top-level wildcard bindings (`http://*:80/` and `http://+:80`) should **not** be used.</span></span> <span data-ttu-id="cc8c6-665">Vazby na zástupné znaky na nejvyšší úrovni vytvoří chyby zabezpečení aplikace.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-665">Top-level wildcard bindings create app security vulnerabilities.</span></span> <span data-ttu-id="cc8c6-666">To platí pro silné i slabé zástupné znaky.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-666">This applies to both strong and weak wildcards.</span></span> <span data-ttu-id="cc8c6-667">Místo zástupných znaků použijte explicitní názvy hostitelů nebo IP adresy.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-667">Use explicit host names or IP addresses rather than wildcards.</span></span> <span data-ttu-id="cc8c6-668">Vazba zástupných znaků subdomény (například `*.mysub.com` ) není bezpečnostní riziko, pokud ovládáte celou nadřazenou doménu (na rozdíl od `*.com` , která je zranitelná).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-668">Subdomain wildcard binding (for example, `*.mysub.com`) isn't a security risk if you control the entire parent domain (as opposed to `*.com`, which is vulnerable).</span></span> <span data-ttu-id="cc8c6-669">Další informace najdete v [dokumentu RFC 7230: oddíl 5,4: Host](https://tools.ietf.org/html/rfc7230#section-5.4).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-669">For more information, see [RFC 7230: Section 5.4: Host](https://tools.ietf.org/html/rfc7230#section-5.4).</span></span>

1. <span data-ttu-id="cc8c6-670">Předregistrujte předpony adresy URL na serveru.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-670">Preregister URL prefixes on the server.</span></span>

   <span data-ttu-id="cc8c6-671">Integrovaný nástroj pro konfiguraci souboru HTTP. sys je *netsh. exe*.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-671">The built-in tool for configuring HTTP.sys is *netsh.exe*.</span></span> <span data-ttu-id="cc8c6-672">pomocí *nástroje Netsh. exe* můžete rezervovat PŘEDPONY adres URL a přiřazovat certifikáty X. 509.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-672">*netsh.exe* is used to reserve URL prefixes and assign X.509 certificates.</span></span> <span data-ttu-id="cc8c6-673">Nástroj vyžaduje oprávnění správce.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-673">The tool requires administrator privileges.</span></span>

   <span data-ttu-id="cc8c6-674">Registrace adres URL pro aplikaci pomocí nástroje *netsh. exe* :</span><span class="sxs-lookup"><span data-stu-id="cc8c6-674">Use the *netsh.exe* tool to register URLs for the app:</span></span>

   ```console
   netsh http add urlacl url=<URL> user=<USER>
   ```

   * <span data-ttu-id="cc8c6-675">`<URL>`: Plně kvalifikované adresy URL (Uniform Resource Locator).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-675">`<URL>`: The fully qualified Uniform Resource Locator (URL).</span></span> <span data-ttu-id="cc8c6-676">Nepoužívejte vazbu zástupných znaků.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-676">Don't use a wildcard binding.</span></span> <span data-ttu-id="cc8c6-677">Použijte platný název hostitele nebo místní IP adresu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-677">Use a valid hostname or local IP address.</span></span> <span data-ttu-id="cc8c6-678">*Adresa URL musí obsahovat koncové lomítko.*</span><span class="sxs-lookup"><span data-stu-id="cc8c6-678">*The URL must include a trailing slash.*</span></span>
   * <span data-ttu-id="cc8c6-679">`<USER>`: Určuje název uživatele nebo skupiny uživatelů.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-679">`<USER>`: Specifies the user or user-group name.</span></span>

   <span data-ttu-id="cc8c6-680">V následujícím příkladu je místní IP adresa serveru `10.0.0.4` :</span><span class="sxs-lookup"><span data-stu-id="cc8c6-680">In the following example, the local IP address of the server is `10.0.0.4`:</span></span>

   ```console
   netsh http add urlacl url=https://10.0.0.4:443/ user=Users
   ```

   <span data-ttu-id="cc8c6-681">Když je adresa URL registrována, nástroj odpoví `URL reservation successfully added` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-681">When a URL is registered, the tool responds with `URL reservation successfully added`.</span></span>

   <span data-ttu-id="cc8c6-682">Pokud chcete odstranit registrovanou adresu URL, použijte `delete urlacl` příkaz:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-682">To delete a registered URL, use the `delete urlacl` command:</span></span>

   ```console
   netsh http delete urlacl url=<URL>
   ```

1. <span data-ttu-id="cc8c6-683">Zaregistrujte certifikáty X. 509 na serveru.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-683">Register X.509 certificates on the server.</span></span>

   <span data-ttu-id="cc8c6-684">K registraci certifikátů pro aplikaci použijte nástroj *netsh. exe* :</span><span class="sxs-lookup"><span data-stu-id="cc8c6-684">Use the *netsh.exe* tool to register certificates for the app:</span></span>

   ```console
   netsh http add sslcert ipport=<IP>:<PORT> certhash=<THUMBPRINT> appid="{<GUID>}"
   ```

   * <span data-ttu-id="cc8c6-685">`<IP>`: Určuje místní IP adresu pro vazbu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-685">`<IP>`: Specifies the local IP address for the binding.</span></span> <span data-ttu-id="cc8c6-686">Nepoužívejte vazbu zástupných znaků.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-686">Don't use a wildcard binding.</span></span> <span data-ttu-id="cc8c6-687">Použijte platnou IP adresu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-687">Use a valid IP address.</span></span>
   * <span data-ttu-id="cc8c6-688">`<PORT>`: Určuje port pro vazbu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-688">`<PORT>`: Specifies the port for the binding.</span></span>
   * <span data-ttu-id="cc8c6-689">`<THUMBPRINT>`: Kryptografický otisk certifikátu X. 509.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-689">`<THUMBPRINT>`: The X.509 certificate thumbprint.</span></span>
   * <span data-ttu-id="cc8c6-690">`<GUID>`: Identifikátor GUID generovaný vývojářem, který představuje aplikaci pro informativní účely.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-690">`<GUID>`: A developer-generated GUID to represent the app for informational purposes.</span></span>

   <span data-ttu-id="cc8c6-691">Pro referenční účely uložte identifikátor GUID do aplikace jako značku balíčku:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-691">For reference purposes, store the GUID in the app as a package tag:</span></span>

   * <span data-ttu-id="cc8c6-692">V aplikaci Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-692">In Visual Studio:</span></span>
     * <span data-ttu-id="cc8c6-693">Otevřete vlastnosti projektu aplikace tak, že kliknete pravým tlačítkem na aplikaci v **Průzkumník řešení** a vyberete **vlastnosti**.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-693">Open the app's project properties by right-clicking on the app in **Solution Explorer** and selecting **Properties**.</span></span>
     * <span data-ttu-id="cc8c6-694">Vyberte kartu **balíček** .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-694">Select the **Package** tab.</span></span>
     * <span data-ttu-id="cc8c6-695">Zadejte identifikátor GUID, který jste vytvořili v poli **značky** .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-695">Enter the GUID that you created in the **Tags** field.</span></span>
   * <span data-ttu-id="cc8c6-696">Když nepoužíváte Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-696">When not using Visual Studio:</span></span>
     * <span data-ttu-id="cc8c6-697">Otevřete soubor projektu aplikace.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-697">Open the app's project file.</span></span>
     * <span data-ttu-id="cc8c6-698">Přidejte `<PackageTags>` vlastnost do nového nebo existujícího `<PropertyGroup>` s identifikátorem GUID, který jste vytvořili:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-698">Add a `<PackageTags>` property to a new or existing `<PropertyGroup>` with the GUID that you created:</span></span>

       ```xml
       <PropertyGroup>
         <PackageTags>9412ee86-c21b-4eb8-bd89-f650fbf44931</PackageTags>
       </PropertyGroup>
       ```

   <span data-ttu-id="cc8c6-699">V následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-699">In the following example:</span></span>

   * <span data-ttu-id="cc8c6-700">Místní IP adresa serveru je `10.0.0.4` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-700">The local IP address of the server is `10.0.0.4`.</span></span>
   * <span data-ttu-id="cc8c6-701">Generátor náhodných identifikátorů GUID online poskytuje `appid` hodnotu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-701">An online random GUID generator provides the `appid` value.</span></span>

   ```console
   netsh http add sslcert 
       ipport=10.0.0.4:443 
       certhash=b66ee04419d4ee37464ab8785ff02449980eae10 
       appid="{9412ee86-c21b-4eb8-bd89-f650fbf44931}"
   ```

   <span data-ttu-id="cc8c6-702">Když je certifikát zaregistrován, nástroj odpoví `SSL Certificate successfully added` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-702">When a certificate is registered, the tool responds with `SSL Certificate successfully added`.</span></span>

   <span data-ttu-id="cc8c6-703">K odstranění registrace certifikátu použijte `delete sslcert` příkaz:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-703">To delete a certificate registration, use the `delete sslcert` command:</span></span>

   ```console
   netsh http delete sslcert ipport=<IP>:<PORT>
   ```

   <span data-ttu-id="cc8c6-704">Referenční dokumentace k nástroji *netsh. exe*:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-704">Reference documentation for *netsh.exe*:</span></span>

   * [<span data-ttu-id="cc8c6-705">Příkazy Netsh pro protokol HTTP (Hypertext Transfer Protocol)</span><span class="sxs-lookup"><span data-stu-id="cc8c6-705">Netsh Commands for Hypertext Transfer Protocol (HTTP)</span></span>](https://technet.microsoft.com/library/cc725882.aspx)
   * [<span data-ttu-id="cc8c6-706">UrlPrefix řetězce</span><span class="sxs-lookup"><span data-stu-id="cc8c6-706">UrlPrefix Strings</span></span>](https://msdn.microsoft.com/library/windows/desktop/aa364698.aspx)

1. <span data-ttu-id="cc8c6-707">Spusťte aplikaci.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-707">Run the app.</span></span>

   <span data-ttu-id="cc8c6-708">Oprávnění správce nejsou nutná ke spuštění aplikace při vytváření vazby na localhost pomocí protokolu HTTP (ne HTTPS) s číslem portu větším než 1024.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-708">Administrator privileges aren't required to run the app when binding to localhost using HTTP (not HTTPS) with a port number greater than 1024.</span></span> <span data-ttu-id="cc8c6-709">U ostatních konfigurací (například pomocí místní IP adresy nebo vazby na port 443) spusťte aplikaci s oprávněními správce.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-709">For other configurations (for example, using a local IP address or binding to port 443), run the app with administrator privileges.</span></span>

   <span data-ttu-id="cc8c6-710">Aplikace odpoví na veřejnou IP adresu serveru.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-710">The app responds at the server's public IP address.</span></span> <span data-ttu-id="cc8c6-711">V tomto příkladu je server dosažitelný z Internetu na jeho veřejné IP adrese `104.214.79.47` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-711">In this example, the server is reached from the Internet at its public IP address of `104.214.79.47`.</span></span>

   <span data-ttu-id="cc8c6-712">V tomto příkladu se používá vývojový certifikát.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-712">A development certificate is used in this example.</span></span> <span data-ttu-id="cc8c6-713">Stránka se načte bezpečně po obejít upozornění na nedůvěryhodný certifikát v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-713">The page loads securely after bypassing the browser's untrusted certificate warning.</span></span>

   ![Okno prohlížeče zobrazující načtenou stránku indexu aplikace](httpsys/_static/browser.png)

## <a name="proxy-server-and-load-balancer-scenarios"></a><span data-ttu-id="cc8c6-715">Scénáře proxy serveru a nástroje pro vyrovnávání zatížení</span><span class="sxs-lookup"><span data-stu-id="cc8c6-715">Proxy server and load balancer scenarios</span></span>

<span data-ttu-id="cc8c6-716">Pro aplikace hostované souborem HTTP. sys, které komunikují s požadavky z Internetu nebo podnikové sítě, se může při hostování za proxy servery a nástroji pro vyrovnávání zatížení vyžadovat další konfigurace.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-716">For apps hosted by HTTP.sys that interact with requests from the Internet or a corporate network, additional configuration might be required when hosting behind proxy servers and load balancers.</span></span> <span data-ttu-id="cc8c6-717">Další informace najdete v tématu [konfigurace ASP.NET Core pro práci se servery proxy a nástroji pro vyrovnávání zatížení](xref:host-and-deploy/proxy-load-balancer).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-717">For more information, see [Configure ASP.NET Core to work with proxy servers and load balancers](xref:host-and-deploy/proxy-load-balancer).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="cc8c6-718">Další zdroje</span><span class="sxs-lookup"><span data-stu-id="cc8c6-718">Additional resources</span></span>

* [<span data-ttu-id="cc8c6-719">Povolit ověřování systému Windows pomocí HTTP. sys</span><span class="sxs-lookup"><span data-stu-id="cc8c6-719">Enable Windows Authentication with HTTP.sys</span></span>](xref:security/authentication/windowsauth#httpsys)
* [<span data-ttu-id="cc8c6-720">Rozhraní API serveru HTTP</span><span class="sxs-lookup"><span data-stu-id="cc8c6-720">HTTP Server API</span></span>](https://msdn.microsoft.com/library/windows/desktop/aa364510.aspx)
* [<span data-ttu-id="cc8c6-721">úložiště GitHubu ASPNET/HttpSysServer (zdrojový kód)</span><span class="sxs-lookup"><span data-stu-id="cc8c6-721">aspnet/HttpSysServer GitHub repository (source code)</span></span>](https://github.com/aspnet/HttpSysServer/)
* [<span data-ttu-id="cc8c6-722">Hostitel</span><span class="sxs-lookup"><span data-stu-id="cc8c6-722">The host</span></span>](xref:fundamentals/index#host)
* <xref:test/troubleshoot>

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="cc8c6-723">[Http. sys](/iis/get-started/introduction-to-iis/introduction-to-iis-architecture#hypertext-transfer-protocol-stack-httpsys) je [webový server pro ASP.NET Core](xref:fundamentals/servers/index) , který běží pouze v systému Windows.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-723">[HTTP.sys](/iis/get-started/introduction-to-iis/introduction-to-iis-architecture#hypertext-transfer-protocol-stack-httpsys) is a [web server for ASP.NET Core](xref:fundamentals/servers/index) that only runs on Windows.</span></span> <span data-ttu-id="cc8c6-724">HTTP. sys je alternativou k serveru [Kestrel](xref:fundamentals/servers/kestrel) a nabízí některé funkce, které Kestrel neposkytuje.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-724">HTTP.sys is an alternative to [Kestrel](xref:fundamentals/servers/kestrel) server and offers some features that Kestrel doesn't provide.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="cc8c6-725">HTTP. sys není kompatibilní s [modulem ASP.NET Core](xref:host-and-deploy/aspnet-core-module) a nedá se použít se službou IIS nebo IIS Express.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-725">HTTP.sys isn't compatible with the [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module) and can't be used with IIS or IIS Express.</span></span>

<span data-ttu-id="cc8c6-726">HTTP. sys podporuje následující funkce:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-726">HTTP.sys supports the following features:</span></span>

* [<span data-ttu-id="cc8c6-727">Ověřování systému Windows</span><span class="sxs-lookup"><span data-stu-id="cc8c6-727">Windows Authentication</span></span>](xref:security/authentication/windowsauth)
* <span data-ttu-id="cc8c6-728">Sdílení portů</span><span class="sxs-lookup"><span data-stu-id="cc8c6-728">Port sharing</span></span>
* <span data-ttu-id="cc8c6-729">HTTPS s SNI</span><span class="sxs-lookup"><span data-stu-id="cc8c6-729">HTTPS with SNI</span></span>
* <span data-ttu-id="cc8c6-730">HTTP/2 přes TLS (Windows 10 nebo novější)</span><span class="sxs-lookup"><span data-stu-id="cc8c6-730">HTTP/2 over TLS (Windows 10 or later)</span></span>
* <span data-ttu-id="cc8c6-731">Přímý přenos souborů</span><span class="sxs-lookup"><span data-stu-id="cc8c6-731">Direct file transmission</span></span>
* <span data-ttu-id="cc8c6-732">Ukládání odpovědí do mezipaměti</span><span class="sxs-lookup"><span data-stu-id="cc8c6-732">Response caching</span></span>
* <span data-ttu-id="cc8c6-733">WebSockets (Windows 8 nebo novější)</span><span class="sxs-lookup"><span data-stu-id="cc8c6-733">WebSockets (Windows 8 or later)</span></span>

<span data-ttu-id="cc8c6-734">Podporované verze systému Windows:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-734">Supported Windows versions:</span></span>

* <span data-ttu-id="cc8c6-735">Windows 7 nebo novější</span><span class="sxs-lookup"><span data-stu-id="cc8c6-735">Windows 7 or later</span></span>
* <span data-ttu-id="cc8c6-736">Windows Server 2008 R2 nebo novější</span><span class="sxs-lookup"><span data-stu-id="cc8c6-736">Windows Server 2008 R2 or later</span></span>

<span data-ttu-id="cc8c6-737">[Zobrazit nebo stáhnout ukázkový kód](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/servers/httpsys/samples) ([Jak stáhnout](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="cc8c6-737">[View or download sample code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/servers/httpsys/samples) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="when-to-use-httpsys"></a><span data-ttu-id="cc8c6-738">Kdy použít protokol HTTP. sys</span><span class="sxs-lookup"><span data-stu-id="cc8c6-738">When to use HTTP.sys</span></span>

<span data-ttu-id="cc8c6-739">HTTP. sys je užitečné pro nasazení, kde:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-739">HTTP.sys is useful for deployments where:</span></span>

* <span data-ttu-id="cc8c6-740">Server je potřeba zveřejnit přímo na internetu bez použití IIS.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-740">There's a need to expose the server directly to the Internet without using IIS.</span></span>

  ![HTTP. sys komunikuje přímo s internetem.](httpsys/_static/httpsys-to-internet.png)

* <span data-ttu-id="cc8c6-742">Interní nasazení vyžaduje funkci, která není v Kestrel k dispozici, jako je například [ověřování systému Windows](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-742">An internal deployment requires a feature not available in Kestrel, such as [Windows Authentication](xref:security/authentication/windowsauth).</span></span>

  ![HTTP. sys komunikuje přímo s interní sítí.](httpsys/_static/httpsys-to-internal.png)

<span data-ttu-id="cc8c6-744">HTTP. sys je Vyspělá technologie, která chrání před mnoha typy útoků a poskytuje odolnost, zabezpečení a škálovatelnost plně funkčního webového serveru.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-744">HTTP.sys is mature technology that protects against many types of attacks and provides the robustness, security, and scalability of a full-featured web server.</span></span> <span data-ttu-id="cc8c6-745">Samotná služba IIS běží jako naslouchací proces HTTP nad HTTP. sys.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-745">IIS itself runs as an HTTP listener on top of HTTP.sys.</span></span>

## <a name="http2-support"></a><span data-ttu-id="cc8c6-746">Podpora HTTP/2</span><span class="sxs-lookup"><span data-stu-id="cc8c6-746">HTTP/2 support</span></span>

<span data-ttu-id="cc8c6-747">[Protokol HTTP/2](https://httpwg.org/specs/rfc7540.html) je povolený pro aplikace ASP.NET Core, pokud jsou splněné následující základní požadavky:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-747">[HTTP/2](https://httpwg.org/specs/rfc7540.html) is enabled for ASP.NET Core apps if the following base requirements are met:</span></span>

* <span data-ttu-id="cc8c6-748">Windows Server 2016/Windows 10 nebo novější</span><span class="sxs-lookup"><span data-stu-id="cc8c6-748">Windows Server 2016/Windows 10 or later</span></span>
* <span data-ttu-id="cc8c6-749">Připojení [ALPN (Application-Layer Protocol Negotiation)](https://tools.ietf.org/html/rfc7301#section-3)</span><span class="sxs-lookup"><span data-stu-id="cc8c6-749">[Application-Layer Protocol Negotiation (ALPN)](https://tools.ietf.org/html/rfc7301#section-3) connection</span></span>
* <span data-ttu-id="cc8c6-750">Připojení TLS 1,2 nebo novější</span><span class="sxs-lookup"><span data-stu-id="cc8c6-750">TLS 1.2 or later connection</span></span>

<span data-ttu-id="cc8c6-751">Pokud je vytvořeno připojení HTTP/2, sestavy [HttpRequest. Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) `HTTP/1.1` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-751">If an HTTP/2 connection is established, [HttpRequest.Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) reports `HTTP/1.1`.</span></span>

<span data-ttu-id="cc8c6-752">HTTP/2 je ve výchozím nastavení povolené.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-752">HTTP/2 is enabled by default.</span></span> <span data-ttu-id="cc8c6-753">Pokud připojení HTTP/2 není navázáno, připojení se vrátí k HTTP/1.1.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-753">If an HTTP/2 connection isn't established, the connection falls back to HTTP/1.1.</span></span> <span data-ttu-id="cc8c6-754">V budoucí verzi Windows budou k dispozici příznaky konfigurace protokolu HTTP/2, včetně možnosti zakázat protokol HTTP/2 s protokolem HTTP. sys.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-754">In a future release of Windows, HTTP/2 configuration flags will be available, including the ability to disable HTTP/2 with HTTP.sys.</span></span>

## <a name="kernel-mode-authentication-with-kerberos"></a><span data-ttu-id="cc8c6-755">Ověřování v režimu jádra pomocí protokolu Kerberos</span><span class="sxs-lookup"><span data-stu-id="cc8c6-755">Kernel mode authentication with Kerberos</span></span>

<span data-ttu-id="cc8c6-756">Delegáti HTTP. sys se připravují ověřování režimu jádra pomocí ověřovacího protokolu Kerberos.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-756">HTTP.sys delegates to kernel mode authentication with the Kerberos authentication protocol.</span></span> <span data-ttu-id="cc8c6-757">Ověřování v uživatelském režimu se v protokolech Kerberos a HTTP. sys nepodporuje.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-757">User mode authentication isn't supported with Kerberos and HTTP.sys.</span></span> <span data-ttu-id="cc8c6-758">Účet počítače se musí použít k dešifrování tokenu nebo lístku protokolu Kerberos, který je získaný ze služby Active Directory a který přesměruje klient na server za účelem ověření uživatele.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-758">The machine account must be used to decrypt the Kerberos token/ticket that's obtained from Active Directory and forwarded by the client to the server to authenticate the user.</span></span> <span data-ttu-id="cc8c6-759">Zaregistrujte hlavní název služby (SPN) pro hostitele, nikoli uživatele aplikace.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-759">Register the Service Principal Name (SPN) for the host, not the user of the app.</span></span>

## <a name="how-to-use-httpsys"></a><span data-ttu-id="cc8c6-760">Jak používat HTTP. sys</span><span class="sxs-lookup"><span data-stu-id="cc8c6-760">How to use HTTP.sys</span></span>

### <a name="configure-the-aspnet-core-app-to-use-httpsys"></a><span data-ttu-id="cc8c6-761">Konfigurace aplikace ASP.NET Core pro použití HTTP. sys</span><span class="sxs-lookup"><span data-stu-id="cc8c6-761">Configure the ASP.NET Core app to use HTTP.sys</span></span>

<span data-ttu-id="cc8c6-762">Odkaz na balíček v souboru projektu není vyžadován při použití [Microsoft. AspNetCore. app Metapackage](xref:fundamentals/metapackage-app) ([NuGet.org](https://www.nuget.org/packages/Microsoft.AspNetCore.App/)).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-762">A package reference in the project file isn't required when using the [Microsoft.AspNetCore.App metapackage](xref:fundamentals/metapackage-app) ([nuget.org](https://www.nuget.org/packages/Microsoft.AspNetCore.App/)).</span></span> <span data-ttu-id="cc8c6-763">Pokud nepoužíváte `Microsoft.AspNetCore.App` Metapackage, přidejte odkaz na balíček do [Microsoft. AspNetCore. Server. HttpSys](https://www.nuget.org/packages/Microsoft.AspNetCore.Server.HttpSys/).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-763">When not using the `Microsoft.AspNetCore.App` metapackage, add a package reference to [Microsoft.AspNetCore.Server.HttpSys](https://www.nuget.org/packages/Microsoft.AspNetCore.Server.HttpSys/).</span></span>

<span data-ttu-id="cc8c6-764"><xref:Microsoft.AspNetCore.Hosting.WebHostBuilderHttpSysExtensions.UseHttpSys*>Při sestavování hostitele zavolejte metodu rozšíření a určete požadované <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions> .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-764">Call the <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderHttpSysExtensions.UseHttpSys*> extension method when building the host, specifying any required <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions>.</span></span> <span data-ttu-id="cc8c6-765">Následující příklad nastaví možnosti na jejich výchozí hodnoty:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-765">The following example sets options to their default values:</span></span>

[!code-csharp[](httpsys/samples/2.x/SampleApp/Program.cs?name=snippet1&highlight=4-12)]

<span data-ttu-id="cc8c6-766">Další konfiguraci HTTP. sys bude zpracována prostřednictvím [nastavení registru](https://support.microsoft.com/help/820129/http-sys-registry-settings-for-windows).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-766">Additional HTTP.sys configuration is handled through [registry settings](https://support.microsoft.com/help/820129/http-sys-registry-settings-for-windows).</span></span>

<span data-ttu-id="cc8c6-767">**Možnosti HTTP. sys**</span><span class="sxs-lookup"><span data-stu-id="cc8c6-767">**HTTP.sys options**</span></span>

| <span data-ttu-id="cc8c6-768">Vlastnost</span><span class="sxs-lookup"><span data-stu-id="cc8c6-768">Property</span></span> | <span data-ttu-id="cc8c6-769">Description</span><span class="sxs-lookup"><span data-stu-id="cc8c6-769">Description</span></span> | <span data-ttu-id="cc8c6-770">Výchozí</span><span class="sxs-lookup"><span data-stu-id="cc8c6-770">Default</span></span> |
| ---
<span data-ttu-id="cc8c6-771">Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-771">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="cc8c6-772">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-772">'Blazor'</span></span>
- <span data-ttu-id="cc8c6-773">'Identity'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-773">'Identity'</span></span>
- <span data-ttu-id="cc8c6-774">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-774">'Let's Encrypt'</span></span>
- <span data-ttu-id="cc8c6-775">'Razor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-775">'Razor'</span></span>
- <span data-ttu-id="cc8c6-776">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-776">'SignalR' uid:</span></span> 

-
<span data-ttu-id="cc8c6-777">Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-777">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="cc8c6-778">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-778">'Blazor'</span></span>
- <span data-ttu-id="cc8c6-779">'Identity'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-779">'Identity'</span></span>
- <span data-ttu-id="cc8c6-780">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-780">'Let's Encrypt'</span></span>
- <span data-ttu-id="cc8c6-781">'Razor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-781">'Razor'</span></span>
- <span data-ttu-id="cc8c6-782">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-782">'SignalR' uid:</span></span> 

<span data-ttu-id="cc8c6-783">---- | ---Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-783">---- | --- title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="cc8c6-784">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-784">'Blazor'</span></span>
- <span data-ttu-id="cc8c6-785">'Identity'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-785">'Identity'</span></span>
- <span data-ttu-id="cc8c6-786">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-786">'Let's Encrypt'</span></span>
- <span data-ttu-id="cc8c6-787">'Razor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-787">'Razor'</span></span>
- <span data-ttu-id="cc8c6-788">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-788">'SignalR' uid:</span></span> 

-
<span data-ttu-id="cc8c6-789">Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-789">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="cc8c6-790">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-790">'Blazor'</span></span>
- <span data-ttu-id="cc8c6-791">'Identity'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-791">'Identity'</span></span>
- <span data-ttu-id="cc8c6-792">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-792">'Let's Encrypt'</span></span>
- <span data-ttu-id="cc8c6-793">'Razor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-793">'Razor'</span></span>
- <span data-ttu-id="cc8c6-794">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-794">'SignalR' uid:</span></span> 

-
<span data-ttu-id="cc8c6-795">Název: Autor: Popis: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-795">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="cc8c6-796">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-796">'Blazor'</span></span>
- <span data-ttu-id="cc8c6-797">'Identity'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-797">'Identity'</span></span>
- <span data-ttu-id="cc8c6-798">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-798">'Let's Encrypt'</span></span>
- <span data-ttu-id="cc8c6-799">'Razor'</span><span class="sxs-lookup"><span data-stu-id="cc8c6-799">'Razor'</span></span>
- <span data-ttu-id="cc8c6-800">SignalRUID:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-800">'SignalR' uid:</span></span> 

<span data-ttu-id="cc8c6-801">------ | :-----: | | [AllowSynchronousIO](xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.AllowSynchronousIO) | Určuje, zda je povolen synchronní vstup/výstup pro `HttpContext.Request.Body` a `HttpContext.Response.Body` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-801">------ | :-----: | | [AllowSynchronousIO](xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.AllowSynchronousIO) | Control whether synchronous input/output is allowed for the `HttpContext.Request.Body` and `HttpContext.Response.Body`.</span></span><span data-ttu-id="cc8c6-802"> | `true`| | [Ověřování. AllowAnonymous](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationManager.AllowAnonymous) | Povoluje anonymní požadavky.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-802"> | `true` | | [Authentication.AllowAnonymous](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationManager.AllowAnonymous) | Allow anonymous requests.</span></span><span data-ttu-id="cc8c6-803"> | `true`| | [Ověřování. schémata](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationManager.Schemes) | Určete povolená schémata ověřování.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-803"> | `true` | | [Authentication.Schemes](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationManager.Schemes) | Specify the allowed authentication schemes.</span></span> <span data-ttu-id="cc8c6-804">Může být kdykoli změněno před vyřazením naslouchacího procesu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-804">May be modified at any time prior to disposing the listener.</span></span> <span data-ttu-id="cc8c6-805">Hodnoty jsou k dispozici ve [výčtu schémata AuthenticationSchemes](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationSchemes): `Basic` , `Kerberos` , `Negotiate` , `None` a `NTLM` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-805">Values are provided by the [AuthenticationSchemes enum](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationSchemes): `Basic`, `Kerberos`, `Negotiate`, `None`, and `NTLM`.</span></span><span data-ttu-id="cc8c6-806"> | `None`| | [EnableResponseCaching](xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.EnableResponseCaching) | Pokusit se o ukládání do mezipaměti v [režimu jádra](/windows-hardware/drivers/gettingstarted/user-mode-and-kernel-mode) pro odpovědi s oprávněnými záhlavími.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-806"> | `None` | | [EnableResponseCaching](xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.EnableResponseCaching) | Attempt [kernel-mode](/windows-hardware/drivers/gettingstarted/user-mode-and-kernel-mode) caching for responses with eligible headers.</span></span> <span data-ttu-id="cc8c6-807">Odpověď nesmí obsahovat `Set-Cookie` `Vary` hlavičky, ani `Pragma` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-807">The response may not include `Set-Cookie`, `Vary`, or `Pragma` headers.</span></span> <span data-ttu-id="cc8c6-808">Musí obsahovat `Cache-Control` hlavičku, která je `public` a buď `shared-max-age` `max-age` hodnota nebo, nebo `Expires` záhlaví.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-808">It must include a `Cache-Control` header that's `public` and either a `shared-max-age` or `max-age` value, or an `Expires` header.</span></span><span data-ttu-id="cc8c6-809"> | `true`| | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxAccepts> | Maximální počet souběžných přijetí.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-809"> | `true` | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxAccepts> | The maximum number of concurrent accepts.</span></span> <span data-ttu-id="cc8c6-810">| 5 &times; [prostředí. <br> ProcessorCount](xref:System.Environment.ProcessorCount) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxConnections> | Maximální počet souběžných připojení, která se mají přijmout</span><span class="sxs-lookup"><span data-stu-id="cc8c6-810">| 5 &times; [Environment.<br>ProcessorCount](xref:System.Environment.ProcessorCount) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxConnections> | The maximum number of concurrent connections to accept.</span></span> <span data-ttu-id="cc8c6-811">Použijte `-1` pro nekonečné.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-811">Use `-1` for infinite.</span></span> <span data-ttu-id="cc8c6-812">Použijte `null` k použití nastavení pro počítač v rámci registru.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-812">Use `null` to use the registry's machine-wide setting.</span></span> | `null`<br><span data-ttu-id="cc8c6-813">(počítačově v šířce</span><span class="sxs-lookup"><span data-stu-id="cc8c6-813">(machine-wide</span></span><br><span data-ttu-id="cc8c6-814">nastavení) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> | Viz část <a href="#maxrequestbodysize">MaxRequestBodySize</a> .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-814">setting) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> | See the <a href="#maxrequestbodysize">MaxRequestBodySize</a> section.</span></span> <span data-ttu-id="cc8c6-815">| 30000000 bajtů</span><span class="sxs-lookup"><span data-stu-id="cc8c6-815">| 30000000 bytes</span></span><br><span data-ttu-id="cc8c6-816">(~ 28,6 MB) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.RequestQueueLimit> | Maximální počet požadavků, které lze zařadit do fronty.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-816">(~28.6 MB) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.RequestQueueLimit> | The maximum number of requests that can be queued.</span></span> <span data-ttu-id="cc8c6-817">| 1000 | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.ThrowWriteExceptions> | Určuje, jestli tělo odpovědi zapisuje, které selhalo kvůli odpojení klienta, by mělo vyvolat výjimky nebo dokončit normálně.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-817">| 1000 | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.ThrowWriteExceptions> | Indicate if response body writes that fail due to client disconnects should throw exceptions or complete normally.</span></span> | `false`<br><span data-ttu-id="cc8c6-818">(normálně dokončit) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.Timeouts> | Vystavte konfiguraci HTTP. sys <xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager> , která může být v registru nakonfigurovaná taky.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-818">(complete normally) | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.Timeouts> | Expose the HTTP.sys <xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager> configuration, which may also be configured in the registry.</span></span> <span data-ttu-id="cc8c6-819">Pomocí odkazů rozhraní API získáte další informace o jednotlivých nastaveních, včetně výchozích hodnot:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-819">Follow the API links to learn more about each setting, including default values:</span></span><ul><li><span data-ttu-id="cc8c6-820">[TimeoutManager. DrainEntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.DrainEntityBody): čas povolený pro rozhraní API serveru http, který má vyprázdnit tělo entity u připojení Keep-Alive.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-820">[TimeoutManager.DrainEntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.DrainEntityBody): Time allowed for the HTTP Server API to drain the entity body on a Keep-Alive connection.</span></span></li><li><span data-ttu-id="cc8c6-821">[TimeoutManager. EntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.EntityBody): čas povolený pro doručení těla entity požadavku.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-821">[TimeoutManager.EntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.EntityBody): Time allowed for the request entity body to arrive.</span></span></li><li><span data-ttu-id="cc8c6-822">[TimeoutManager. HeaderWait](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.HeaderWait): čas povolený pro rozhraní API serveru HTTP k analýze hlavičky žádosti.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-822">[TimeoutManager.HeaderWait](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.HeaderWait): Time allowed for the HTTP Server API to parse the request header.</span></span></li><li><span data-ttu-id="cc8c6-823">[TimeoutManager. IdleConnection](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.IdleConnection): čas povolený pro nečinné připojení.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-823">[TimeoutManager.IdleConnection](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.IdleConnection): Time allowed for an idle connection.</span></span></li><li><span data-ttu-id="cc8c6-824">[TimeoutManager. MinSendBytesPerSecond](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.MinSendBytesPerSecond): minimální rychlost odesílání odpovědi.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-824">[TimeoutManager.MinSendBytesPerSecond](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.MinSendBytesPerSecond): The minimum send rate for the response.</span></span></li><li><span data-ttu-id="cc8c6-825">[TimeoutManager. RequestQueue](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.RequestQueue): čas, který může požadavek zůstat ve frontě požadavků předtím, než ji aplikace vybere.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-825">[TimeoutManager.RequestQueue](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.RequestQueue): Time allowed for the request to remain in the request queue before the app picks it up.</span></span></li></ul> <span data-ttu-id="cc8c6-826">|  | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> | Zadejte, který se <xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection> má zaregistrovat v http. sys.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-826">|  | | <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> | Specify the <xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection> to register with HTTP.sys.</span></span> <span data-ttu-id="cc8c6-827">Nejužitečnější je [UrlPrefixCollection. Add](xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection.Add*), který se používá k přidání předpony do kolekce.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-827">The most useful is [UrlPrefixCollection.Add](xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection.Add*), which is used to add a prefix to the collection.</span></span> <span data-ttu-id="cc8c6-828">Ty mohou být kdykoliv změněny předtím, než se naslouchací proces vyřazuje.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-828">These may be modified at any time prior to disposing the listener.</span></span> <span data-ttu-id="cc8c6-829">|  |</span><span class="sxs-lookup"><span data-stu-id="cc8c6-829">|  |</span></span>

<a name="maxrequestbodysize"></a>

<span data-ttu-id="cc8c6-830">**MaxRequestBodySize**</span><span class="sxs-lookup"><span data-stu-id="cc8c6-830">**MaxRequestBodySize**</span></span>

<span data-ttu-id="cc8c6-831">Maximální povolená velikost libovolného textu žádosti v bajtech</span><span class="sxs-lookup"><span data-stu-id="cc8c6-831">The maximum allowed size of any request body in bytes.</span></span> <span data-ttu-id="cc8c6-832">Při nastavení na `null` je maximální velikost textu požadavku neomezená.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-832">When set to `null`, the maximum request body size is unlimited.</span></span> <span data-ttu-id="cc8c6-833">Toto omezení nemá žádný vliv na upgradovaná připojení, která jsou vždycky neomezená.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-833">This limit has no effect on upgraded connections, which are always unlimited.</span></span>

<span data-ttu-id="cc8c6-834">Doporučená metoda pro přepsání limitu v aplikaci ASP.NET Core MVC pro jeden `IActionResult` je použít <xref:Microsoft.AspNetCore.Mvc.RequestSizeLimitAttribute> atribut pro metodu akce:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-834">The recommended method to override the limit in an ASP.NET Core MVC app for a single `IActionResult` is to use the <xref:Microsoft.AspNetCore.Mvc.RequestSizeLimitAttribute> attribute on an action method:</span></span>

```csharp
[RequestSizeLimit(100000000)]
public IActionResult MyActionMethod()
```

<span data-ttu-id="cc8c6-835">Výjimka je vyvolána, pokud se aplikace pokusí nakonfigurovat limit žádosti poté, co aplikace začne číst požadavek.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-835">An exception is thrown if the app attempts to configure the limit on a request after the app has started reading the request.</span></span> <span data-ttu-id="cc8c6-836">`IsReadOnly`Vlastnost může být použita k označení `MaxRequestBodySize` , zda je vlastnost ve stavu jen pro čtení, což znamená, že je příliš pozdě pro konfiguraci limitu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-836">An `IsReadOnly` property can be used to indicate if the `MaxRequestBodySize` property is in a read-only state, meaning it's too late to configure the limit.</span></span>

<span data-ttu-id="cc8c6-837">Pokud by měla aplikace přepsat <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> jednotlivé požadavky, použijte <xref:Microsoft.AspNetCore.Http.Features.IHttpMaxRequestBodySizeFeature> :</span><span class="sxs-lookup"><span data-stu-id="cc8c6-837">If the app should override <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> per-request, use the <xref:Microsoft.AspNetCore.Http.Features.IHttpMaxRequestBodySizeFeature>:</span></span>

[!code-csharp[](httpsys/samples/2.x/SampleApp/Startup.cs?name=snippet1&highlight=6-7)]

<span data-ttu-id="cc8c6-838">Pokud používáte Visual Studio, ujistěte se, že aplikace není nakonfigurovaná tak, aby spouštěla službu IIS nebo IIS Express.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-838">If using Visual Studio, make sure the app isn't configured to run IIS or IIS Express.</span></span>

<span data-ttu-id="cc8c6-839">V aplikaci Visual Studio je výchozím spouštěcím profilem IIS Express.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-839">In Visual Studio, the default launch profile is for IIS Express.</span></span> <span data-ttu-id="cc8c6-840">Chcete-li spustit projekt jako konzolovou aplikaci, ručně změňte vybraný profil, jak je znázorněno na následujícím snímku obrazovky:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-840">To run the project as a console app, manually change the selected profile, as shown in the following screen shot:</span></span>

![Vybrat profil aplikace konzoly](httpsys/_static/vs-choose-profile.png)

### <a name="configure-windows-server"></a><span data-ttu-id="cc8c6-842">Konfigurace Windows serveru</span><span class="sxs-lookup"><span data-stu-id="cc8c6-842">Configure Windows Server</span></span>

1. <span data-ttu-id="cc8c6-843">Určete porty, které se mají otevřít pro aplikaci, a pomocí [brány Windows Firewall](/windows/security/threat-protection/windows-firewall/create-an-inbound-port-rule) nebo rutiny [New-NetFirewallRule](/powershell/module/netsecurity/new-netfirewallrule) prostředí PowerShell otevřete porty brány firewall, aby bylo možné provozovat přes protokol HTTP. sys.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-843">Determine the ports to open for the app and use [Windows Firewall](/windows/security/threat-protection/windows-firewall/create-an-inbound-port-rule) or the [New-NetFirewallRule](/powershell/module/netsecurity/new-netfirewallrule) PowerShell cmdlet to open firewall ports to allow traffic to reach HTTP.sys.</span></span> <span data-ttu-id="cc8c6-844">V následujících příkazech a konfiguraci aplikace se používá port 443.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-844">In the following commands and app configuration, port 443 is used.</span></span>

1. <span data-ttu-id="cc8c6-845">Při nasazování na virtuální počítač Azure otevřete porty ve [skupině zabezpečení sítě](/azure/virtual-machines/windows/nsg-quickstart-portal).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-845">When deploying to an Azure VM, open the ports in the [Network Security Group](/azure/virtual-machines/windows/nsg-quickstart-portal).</span></span> <span data-ttu-id="cc8c6-846">V následujících příkazech a konfiguraci aplikace se používá port 443.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-846">In the following commands and app configuration, port 443 is used.</span></span>

1. <span data-ttu-id="cc8c6-847">V případě potřeby Získejte a nainstalujte certifikáty X. 509.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-847">Obtain and install X.509 certificates, if required.</span></span>

   <span data-ttu-id="cc8c6-848">V systému Windows vytvořte pomocí [rutiny prostředí PowerShell New-SelfSignedCertificate](/powershell/module/pkiclient/new-selfsignedcertificate)certifikáty podepsané svým držitelem.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-848">On Windows, create self-signed certificates using the [New-SelfSignedCertificate PowerShell cmdlet](/powershell/module/pkiclient/new-selfsignedcertificate).</span></span> <span data-ttu-id="cc8c6-849">Nepodporovaný příklad naleznete v tématu [UpdateIISExpressSSLForChrome. ps1](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/includes/make-x509-cert/UpdateIISExpressSSLForChrome.ps1).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-849">For an unsupported example, see [UpdateIISExpressSSLForChrome.ps1](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/includes/make-x509-cert/UpdateIISExpressSSLForChrome.ps1).</span></span>

   <span data-ttu-id="cc8c6-850">Nainstalujte certifikáty podepsané svým držitelem nebo certifikátem podepsaným certifikační autoritou do osobního úložiště **místního počítače** serveru > **Personal** .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-850">Install either self-signed or CA-signed certificates in the server's **Local Machine** > **Personal** store.</span></span>

1. <span data-ttu-id="cc8c6-851">Pokud se jedná o [nasazení závislé na rozhraní](/dotnet/core/deploying/#framework-dependent-deployments-fdd), nainstalujte rozhraní .NET core, .NET Framework nebo obojí (Pokud je aplikace aplikace .NET Core cílící na .NET Framework).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-851">If the app is a [framework-dependent deployment](/dotnet/core/deploying/#framework-dependent-deployments-fdd), install .NET Core, .NET Framework, or both (if the app is a .NET Core app targeting the .NET Framework).</span></span>

   * <span data-ttu-id="cc8c6-852">**.NET Core**: Pokud aplikace vyžaduje .NET Core, Získejte a spusťte instalační program **modulu runtime .NET Core** ze [souborů ke stažení pro .NET Core](https://dotnet.microsoft.com/download).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-852">**.NET Core**: If the app requires .NET Core, obtain and run the **.NET Core Runtime** installer from [.NET Core Downloads](https://dotnet.microsoft.com/download).</span></span> <span data-ttu-id="cc8c6-853">Neinstalujte na server plnou sadu SDK.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-853">Don't install the full SDK on the server.</span></span>
   * <span data-ttu-id="cc8c6-854">**.NET Framework**: Pokud aplikace vyžaduje .NET Framework, přečtěte si téma [Průvodce instalací .NET Framework](/dotnet/framework/install/).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-854">**.NET Framework**: If the app requires .NET Framework, see the [.NET Framework installation guide](/dotnet/framework/install/).</span></span> <span data-ttu-id="cc8c6-855">Nainstalujte požadovanou .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-855">Install the required .NET Framework.</span></span> <span data-ttu-id="cc8c6-856">Instalační program pro nejnovější .NET Framework je k dispozici na stránce [soubory ke stažení pro .NET Core](https://dotnet.microsoft.com/download) .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-856">The installer for the latest .NET Framework is available from the [.NET Core Downloads](https://dotnet.microsoft.com/download) page.</span></span>

   <span data-ttu-id="cc8c6-857">Pokud je aplikace samostatným [nasazením](/dotnet/core/deploying/#self-contained-deployments-scd), aplikace zahrne modul runtime do svého nasazení.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-857">If the app is a [self-contained deployment](/dotnet/core/deploying/#self-contained-deployments-scd), the app includes the runtime in its deployment.</span></span> <span data-ttu-id="cc8c6-858">Na serveru není nutná žádná instalace rozhraní.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-858">No framework installation is required on the server.</span></span>

1. <span data-ttu-id="cc8c6-859">Konfigurace adres URL a portů v aplikaci</span><span class="sxs-lookup"><span data-stu-id="cc8c6-859">Configure URLs and ports in the app.</span></span>

   <span data-ttu-id="cc8c6-860">Ve výchozím nastavení ASP.NET Core váže `http://localhost:5000` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-860">By default, ASP.NET Core binds to `http://localhost:5000`.</span></span> <span data-ttu-id="cc8c6-861">Pokud chcete nakonfigurovat předpony a porty adresy URL, můžete použít tyto možnosti:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-861">To configure URL prefixes and ports, options include:</span></span>

   * <xref:Microsoft.AspNetCore.Hosting.HostingAbstractionsWebHostBuilderExtensions.UseUrls*>
   * <span data-ttu-id="cc8c6-862">`urls`argument příkazového řádku</span><span class="sxs-lookup"><span data-stu-id="cc8c6-862">`urls` command-line argument</span></span>
   * <span data-ttu-id="cc8c6-863">`ASPNETCORE_URLS`Proměnná prostředí</span><span class="sxs-lookup"><span data-stu-id="cc8c6-863">`ASPNETCORE_URLS` environment variable</span></span>
   * <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes>

   <span data-ttu-id="cc8c6-864">Následující příklad kódu ukazuje, jak používat <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> s místní IP adresou serveru `10.0.0.4` na portu 443:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-864">The following code example shows how to use <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> with the server's local IP address `10.0.0.4` on port 443:</span></span>

   [!code-csharp[](httpsys/samples_snapshot/2.x/Program.cs?highlight=6)]

   <span data-ttu-id="cc8c6-865">Výhodou `UrlPrefixes` je, že se okamžitě generuje chybová zpráva pro nesprávně naformátované předpony.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-865">An advantage of `UrlPrefixes` is that an error message is generated immediately for improperly formatted prefixes.</span></span>

   <span data-ttu-id="cc8c6-866">Nastavení v `UrlPrefixes` `UseUrls` / `urls` / `ASPNETCORE_URLS` Nastavení přepsání</span><span class="sxs-lookup"><span data-stu-id="cc8c6-866">The settings in `UrlPrefixes` override `UseUrls`/`urls`/`ASPNETCORE_URLS` settings.</span></span> <span data-ttu-id="cc8c6-867">Proto je výhodou `UseUrls` `urls` `ASPNETCORE_URLS` proměnné prostředí, a jednodušší přepínání mezi Kestrel a http. sys.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-867">Therefore, an advantage of `UseUrls`, `urls`, and the `ASPNETCORE_URLS` environment variable is that it's easier to switch between Kestrel and HTTP.sys.</span></span>

   <span data-ttu-id="cc8c6-868">HTTP. sys používá [formáty řetězce UrlPrefix HTTP serveru API](https://msdn.microsoft.com/library/windows/desktop/aa364698.aspx).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-868">HTTP.sys uses the [HTTP Server API UrlPrefix string formats](https://msdn.microsoft.com/library/windows/desktop/aa364698.aspx).</span></span>

   > [!WARNING]
   > <span data-ttu-id="cc8c6-869">Nelze použít vazby zástupných znaků na nejvyšší úrovni ( `http://*:80/` a `http://+:80` ). **not**</span><span class="sxs-lookup"><span data-stu-id="cc8c6-869">Top-level wildcard bindings (`http://*:80/` and `http://+:80`) should **not** be used.</span></span> <span data-ttu-id="cc8c6-870">Vazby na zástupné znaky na nejvyšší úrovni vytvoří chyby zabezpečení aplikace.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-870">Top-level wildcard bindings create app security vulnerabilities.</span></span> <span data-ttu-id="cc8c6-871">To platí pro silné i slabé zástupné znaky.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-871">This applies to both strong and weak wildcards.</span></span> <span data-ttu-id="cc8c6-872">Místo zástupných znaků použijte explicitní názvy hostitelů nebo IP adresy.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-872">Use explicit host names or IP addresses rather than wildcards.</span></span> <span data-ttu-id="cc8c6-873">Vazba zástupných znaků subdomény (například `*.mysub.com` ) není bezpečnostní riziko, pokud ovládáte celou nadřazenou doménu (na rozdíl od `*.com` , která je zranitelná).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-873">Subdomain wildcard binding (for example, `*.mysub.com`) isn't a security risk if you control the entire parent domain (as opposed to `*.com`, which is vulnerable).</span></span> <span data-ttu-id="cc8c6-874">Další informace najdete v [dokumentu RFC 7230: oddíl 5,4: Host](https://tools.ietf.org/html/rfc7230#section-5.4).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-874">For more information, see [RFC 7230: Section 5.4: Host](https://tools.ietf.org/html/rfc7230#section-5.4).</span></span>

1. <span data-ttu-id="cc8c6-875">Předregistrujte předpony adresy URL na serveru.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-875">Preregister URL prefixes on the server.</span></span>

   <span data-ttu-id="cc8c6-876">Integrovaný nástroj pro konfiguraci souboru HTTP. sys je *netsh. exe*.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-876">The built-in tool for configuring HTTP.sys is *netsh.exe*.</span></span> <span data-ttu-id="cc8c6-877">pomocí *nástroje Netsh. exe* můžete rezervovat PŘEDPONY adres URL a přiřazovat certifikáty X. 509.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-877">*netsh.exe* is used to reserve URL prefixes and assign X.509 certificates.</span></span> <span data-ttu-id="cc8c6-878">Nástroj vyžaduje oprávnění správce.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-878">The tool requires administrator privileges.</span></span>

   <span data-ttu-id="cc8c6-879">Registrace adres URL pro aplikaci pomocí nástroje *netsh. exe* :</span><span class="sxs-lookup"><span data-stu-id="cc8c6-879">Use the *netsh.exe* tool to register URLs for the app:</span></span>

   ```console
   netsh http add urlacl url=<URL> user=<USER>
   ```

   * <span data-ttu-id="cc8c6-880">`<URL>`: Plně kvalifikované adresy URL (Uniform Resource Locator).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-880">`<URL>`: The fully qualified Uniform Resource Locator (URL).</span></span> <span data-ttu-id="cc8c6-881">Nepoužívejte vazbu zástupných znaků.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-881">Don't use a wildcard binding.</span></span> <span data-ttu-id="cc8c6-882">Použijte platný název hostitele nebo místní IP adresu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-882">Use a valid hostname or local IP address.</span></span> <span data-ttu-id="cc8c6-883">*Adresa URL musí obsahovat koncové lomítko.*</span><span class="sxs-lookup"><span data-stu-id="cc8c6-883">*The URL must include a trailing slash.*</span></span>
   * <span data-ttu-id="cc8c6-884">`<USER>`: Určuje název uživatele nebo skupiny uživatelů.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-884">`<USER>`: Specifies the user or user-group name.</span></span>

   <span data-ttu-id="cc8c6-885">V následujícím příkladu je místní IP adresa serveru `10.0.0.4` :</span><span class="sxs-lookup"><span data-stu-id="cc8c6-885">In the following example, the local IP address of the server is `10.0.0.4`:</span></span>

   ```console
   netsh http add urlacl url=https://10.0.0.4:443/ user=Users
   ```

   <span data-ttu-id="cc8c6-886">Když je adresa URL registrována, nástroj odpoví `URL reservation successfully added` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-886">When a URL is registered, the tool responds with `URL reservation successfully added`.</span></span>

   <span data-ttu-id="cc8c6-887">Pokud chcete odstranit registrovanou adresu URL, použijte `delete urlacl` příkaz:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-887">To delete a registered URL, use the `delete urlacl` command:</span></span>

   ```console
   netsh http delete urlacl url=<URL>
   ```

1. <span data-ttu-id="cc8c6-888">Zaregistrujte certifikáty X. 509 na serveru.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-888">Register X.509 certificates on the server.</span></span>

   <span data-ttu-id="cc8c6-889">K registraci certifikátů pro aplikaci použijte nástroj *netsh. exe* :</span><span class="sxs-lookup"><span data-stu-id="cc8c6-889">Use the *netsh.exe* tool to register certificates for the app:</span></span>

   ```console
   netsh http add sslcert ipport=<IP>:<PORT> certhash=<THUMBPRINT> appid="{<GUID>}"
   ```

   * <span data-ttu-id="cc8c6-890">`<IP>`: Určuje místní IP adresu pro vazbu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-890">`<IP>`: Specifies the local IP address for the binding.</span></span> <span data-ttu-id="cc8c6-891">Nepoužívejte vazbu zástupných znaků.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-891">Don't use a wildcard binding.</span></span> <span data-ttu-id="cc8c6-892">Použijte platnou IP adresu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-892">Use a valid IP address.</span></span>
   * <span data-ttu-id="cc8c6-893">`<PORT>`: Určuje port pro vazbu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-893">`<PORT>`: Specifies the port for the binding.</span></span>
   * <span data-ttu-id="cc8c6-894">`<THUMBPRINT>`: Kryptografický otisk certifikátu X. 509.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-894">`<THUMBPRINT>`: The X.509 certificate thumbprint.</span></span>
   * <span data-ttu-id="cc8c6-895">`<GUID>`: Identifikátor GUID generovaný vývojářem, který představuje aplikaci pro informativní účely.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-895">`<GUID>`: A developer-generated GUID to represent the app for informational purposes.</span></span>

   <span data-ttu-id="cc8c6-896">Pro referenční účely uložte identifikátor GUID do aplikace jako značku balíčku:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-896">For reference purposes, store the GUID in the app as a package tag:</span></span>

   * <span data-ttu-id="cc8c6-897">V aplikaci Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-897">In Visual Studio:</span></span>
     * <span data-ttu-id="cc8c6-898">Otevřete vlastnosti projektu aplikace tak, že kliknete pravým tlačítkem na aplikaci v **Průzkumník řešení** a vyberete **vlastnosti**.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-898">Open the app's project properties by right-clicking on the app in **Solution Explorer** and selecting **Properties**.</span></span>
     * <span data-ttu-id="cc8c6-899">Vyberte kartu **balíček** .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-899">Select the **Package** tab.</span></span>
     * <span data-ttu-id="cc8c6-900">Zadejte identifikátor GUID, který jste vytvořili v poli **značky** .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-900">Enter the GUID that you created in the **Tags** field.</span></span>
   * <span data-ttu-id="cc8c6-901">Když nepoužíváte Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-901">When not using Visual Studio:</span></span>
     * <span data-ttu-id="cc8c6-902">Otevřete soubor projektu aplikace.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-902">Open the app's project file.</span></span>
     * <span data-ttu-id="cc8c6-903">Přidejte `<PackageTags>` vlastnost do nového nebo existujícího `<PropertyGroup>` s identifikátorem GUID, který jste vytvořili:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-903">Add a `<PackageTags>` property to a new or existing `<PropertyGroup>` with the GUID that you created:</span></span>

       ```xml
       <PropertyGroup>
         <PackageTags>9412ee86-c21b-4eb8-bd89-f650fbf44931</PackageTags>
       </PropertyGroup>
       ```

   <span data-ttu-id="cc8c6-904">V následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-904">In the following example:</span></span>

   * <span data-ttu-id="cc8c6-905">Místní IP adresa serveru je `10.0.0.4` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-905">The local IP address of the server is `10.0.0.4`.</span></span>
   * <span data-ttu-id="cc8c6-906">Generátor náhodných identifikátorů GUID online poskytuje `appid` hodnotu.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-906">An online random GUID generator provides the `appid` value.</span></span>

   ```console
   netsh http add sslcert 
       ipport=10.0.0.4:443 
       certhash=b66ee04419d4ee37464ab8785ff02449980eae10 
       appid="{9412ee86-c21b-4eb8-bd89-f650fbf44931}"
   ```

   <span data-ttu-id="cc8c6-907">Když je certifikát zaregistrován, nástroj odpoví `SSL Certificate successfully added` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-907">When a certificate is registered, the tool responds with `SSL Certificate successfully added`.</span></span>

   <span data-ttu-id="cc8c6-908">K odstranění registrace certifikátu použijte `delete sslcert` příkaz:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-908">To delete a certificate registration, use the `delete sslcert` command:</span></span>

   ```console
   netsh http delete sslcert ipport=<IP>:<PORT>
   ```

   <span data-ttu-id="cc8c6-909">Referenční dokumentace k nástroji *netsh. exe*:</span><span class="sxs-lookup"><span data-stu-id="cc8c6-909">Reference documentation for *netsh.exe*:</span></span>

   * [<span data-ttu-id="cc8c6-910">Příkazy Netsh pro protokol HTTP (Hypertext Transfer Protocol)</span><span class="sxs-lookup"><span data-stu-id="cc8c6-910">Netsh Commands for Hypertext Transfer Protocol (HTTP)</span></span>](https://technet.microsoft.com/library/cc725882.aspx)
   * [<span data-ttu-id="cc8c6-911">UrlPrefix řetězce</span><span class="sxs-lookup"><span data-stu-id="cc8c6-911">UrlPrefix Strings</span></span>](https://msdn.microsoft.com/library/windows/desktop/aa364698.aspx)

1. <span data-ttu-id="cc8c6-912">Spusťte aplikaci.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-912">Run the app.</span></span>

   <span data-ttu-id="cc8c6-913">Oprávnění správce nejsou nutná ke spuštění aplikace při vytváření vazby na localhost pomocí protokolu HTTP (ne HTTPS) s číslem portu větším než 1024.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-913">Administrator privileges aren't required to run the app when binding to localhost using HTTP (not HTTPS) with a port number greater than 1024.</span></span> <span data-ttu-id="cc8c6-914">U ostatních konfigurací (například pomocí místní IP adresy nebo vazby na port 443) spusťte aplikaci s oprávněními správce.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-914">For other configurations (for example, using a local IP address or binding to port 443), run the app with administrator privileges.</span></span>

   <span data-ttu-id="cc8c6-915">Aplikace odpoví na veřejnou IP adresu serveru.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-915">The app responds at the server's public IP address.</span></span> <span data-ttu-id="cc8c6-916">V tomto příkladu je server dosažitelný z Internetu na jeho veřejné IP adrese `104.214.79.47` .</span><span class="sxs-lookup"><span data-stu-id="cc8c6-916">In this example, the server is reached from the Internet at its public IP address of `104.214.79.47`.</span></span>

   <span data-ttu-id="cc8c6-917">V tomto příkladu se používá vývojový certifikát.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-917">A development certificate is used in this example.</span></span> <span data-ttu-id="cc8c6-918">Stránka se načte bezpečně po obejít upozornění na nedůvěryhodný certifikát v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-918">The page loads securely after bypassing the browser's untrusted certificate warning.</span></span>

   ![Okno prohlížeče zobrazující načtenou stránku indexu aplikace](httpsys/_static/browser.png)

## <a name="proxy-server-and-load-balancer-scenarios"></a><span data-ttu-id="cc8c6-920">Scénáře proxy serveru a nástroje pro vyrovnávání zatížení</span><span class="sxs-lookup"><span data-stu-id="cc8c6-920">Proxy server and load balancer scenarios</span></span>

<span data-ttu-id="cc8c6-921">Pro aplikace hostované souborem HTTP. sys, které komunikují s požadavky z Internetu nebo podnikové sítě, se může při hostování za proxy servery a nástroji pro vyrovnávání zatížení vyžadovat další konfigurace.</span><span class="sxs-lookup"><span data-stu-id="cc8c6-921">For apps hosted by HTTP.sys that interact with requests from the Internet or a corporate network, additional configuration might be required when hosting behind proxy servers and load balancers.</span></span> <span data-ttu-id="cc8c6-922">Další informace najdete v tématu [konfigurace ASP.NET Core pro práci se servery proxy a nástroji pro vyrovnávání zatížení](xref:host-and-deploy/proxy-load-balancer).</span><span class="sxs-lookup"><span data-stu-id="cc8c6-922">For more information, see [Configure ASP.NET Core to work with proxy servers and load balancers](xref:host-and-deploy/proxy-load-balancer).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="cc8c6-923">Další zdroje</span><span class="sxs-lookup"><span data-stu-id="cc8c6-923">Additional resources</span></span>

* [<span data-ttu-id="cc8c6-924">Povolit ověřování systému Windows pomocí HTTP. sys</span><span class="sxs-lookup"><span data-stu-id="cc8c6-924">Enable Windows Authentication with HTTP.sys</span></span>](xref:security/authentication/windowsauth#httpsys)
* [<span data-ttu-id="cc8c6-925">Rozhraní API serveru HTTP</span><span class="sxs-lookup"><span data-stu-id="cc8c6-925">HTTP Server API</span></span>](https://msdn.microsoft.com/library/windows/desktop/aa364510.aspx)
* [<span data-ttu-id="cc8c6-926">úložiště GitHubu ASPNET/HttpSysServer (zdrojový kód)</span><span class="sxs-lookup"><span data-stu-id="cc8c6-926">aspnet/HttpSysServer GitHub repository (source code)</span></span>](https://github.com/aspnet/HttpSysServer/)
* [<span data-ttu-id="cc8c6-927">Hostitel</span><span class="sxs-lookup"><span data-stu-id="cc8c6-927">The host</span></span>](xref:fundamentals/index#host)
* <xref:test/troubleshoot>

::: moniker-end
