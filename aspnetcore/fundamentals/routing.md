---
title: Směrování v ASP.NET Core
author: ardalis
description: Zjistěte, jak je zodpovědný za mapování příchozího požadavku k obslužné rutině trasy funkci směrování ASP.NET Core.
ms.author: riande
ms.custom: mvc
ms.date: 10/01/2018
uid: fundamentals/routing
ms.openlocfilehash: 06059d720bd4444b1ec12e42d466ee54d1658203
ms.sourcegitcommit: 375e9a67f5e1f7b0faaa056b4b46294cc70f55b7
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/29/2018
ms.locfileid: "50207753"
---
# <a name="routing-in-aspnet-core"></a><span data-ttu-id="ef49d-103">Směrování v ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="ef49d-103">Routing in ASP.NET Core</span></span>

<span data-ttu-id="ef49d-104">Podle [Ryanem Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), a [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="ef49d-104">By [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

<span data-ttu-id="ef49d-105">Funkce směrování je zodpovědná za mapování příchozího požadavku k obslužné rutině trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-105">Routing functionality is responsible for mapping an incoming request to a route handler.</span></span> <span data-ttu-id="ef49d-106">Trasy jsou definovány v aplikaci a nakonfigurovaná při spuštění aplikace.</span><span class="sxs-lookup"><span data-stu-id="ef49d-106">Routes are defined in the app and configured when the app starts.</span></span> <span data-ttu-id="ef49d-107">Trasy můžete volitelně extrakci hodnot z adresy URL, obsaženy v požadavku a tyto hodnoty je pak možné pro zpracování požadavku.</span><span class="sxs-lookup"><span data-stu-id="ef49d-107">A route can optionally extract values from the URL contained in the request, and these values can then be used for request processing.</span></span> <span data-ttu-id="ef49d-108">Pomocí informací o směrování z aplikace, funkci směrování je také možnost k vygenerování adres URL, které se mapují k obslužné rutině trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-108">Using route information from the app, the routing functionality is also able to generate URLs that map to route handlers.</span></span> <span data-ttu-id="ef49d-109">Proto směrování můžete najít obslužná rutina trasy podle adresy URL, nebo najít adresu URL odpovídající obslužná rutina trasy na základě informací o obslužnou rutinu trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-109">Therefore, routing can find a route handler based on a URL, or find the URL corresponding to a given route handler based on route handler information.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ef49d-110">Tento dokument popisuje směrování nízké úrovně ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="ef49d-110">This document covers low-level ASP.NET Core routing.</span></span> <span data-ttu-id="ef49d-111">Informace o směrování ASP.NET Core MVC najdete v tématu <xref:mvc/controllers/routing>.</span><span class="sxs-lookup"><span data-stu-id="ef49d-111">For information on ASP.NET Core MVC routing, see <xref:mvc/controllers/routing>.</span></span>

<span data-ttu-id="ef49d-112">[Zobrazení nebo stažení ukázkového kódu](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples) ([stažení](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="ef49d-112">[View or download sample code](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="routing-basics"></a><span data-ttu-id="ef49d-113">Základní informace o směrování</span><span class="sxs-lookup"><span data-stu-id="ef49d-113">Routing basics</span></span>

<span data-ttu-id="ef49d-114">Směrování používá *trasy* (implementace <xref:Microsoft.AspNetCore.Routing.IRouter>) na:</span><span class="sxs-lookup"><span data-stu-id="ef49d-114">Routing uses *routes* (implementations of <xref:Microsoft.AspNetCore.Routing.IRouter>) to:</span></span>

* <span data-ttu-id="ef49d-115">Příchozí požadavky na mapování *trasy obslužné rutiny*.</span><span class="sxs-lookup"><span data-stu-id="ef49d-115">Map incoming requests to *route handlers*.</span></span>
* <span data-ttu-id="ef49d-116">Generování adresy URL použité v odpovědi.</span><span class="sxs-lookup"><span data-stu-id="ef49d-116">Generate URLs used in responses.</span></span>

<span data-ttu-id="ef49d-117">Obecně platí aplikace má jedné kolekce tras.</span><span class="sxs-lookup"><span data-stu-id="ef49d-117">Generally, an app has a single collection of routes.</span></span> <span data-ttu-id="ef49d-118">Když přijde požadavek, kolekce tras se zpracovávají v pořadí.</span><span class="sxs-lookup"><span data-stu-id="ef49d-118">When a request arrives, the route collection is processed in order.</span></span> <span data-ttu-id="ef49d-119">Příchozí žádost vypadá pro trasu, která odpovídá adrese URL požadavku voláním <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> metodu na každý postup k dispozici v kolekci tras.</span><span class="sxs-lookup"><span data-stu-id="ef49d-119">The incoming request looks for a route that matches the request URL by calling the <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> method on each available route in the route collection.</span></span> <span data-ttu-id="ef49d-120">Oproti tomu odpověď může využívat směrování k vygenerování adres URL (například pro přesměrování nebo odkazy) na základě informací o směrování a proto vyhnout se tak nutnosti pevně zakódovat adresy URL, která pomáhá udržovatelnost.</span><span class="sxs-lookup"><span data-stu-id="ef49d-120">By contrast, a response can use routing to generate URLs (for example, for redirection or links) based on route information and thus avoid having to hard-code URLs, which helps maintainability.</span></span>

<span data-ttu-id="ef49d-121">Směrování je připojen k [middleware](xref:fundamentals/middleware/index) profilace podle <xref:Microsoft.AspNetCore.Builder.RouterMiddleware> třídy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-121">Routing is connected to the [middleware](xref:fundamentals/middleware/index) pipeline by the <xref:Microsoft.AspNetCore.Builder.RouterMiddleware> class.</span></span> <span data-ttu-id="ef49d-122">[ASP.NET Core MVC](xref:mvc/overview) přidá do kanálu middleware směrování jako součást konfigurace.</span><span class="sxs-lookup"><span data-stu-id="ef49d-122">[ASP.NET Core MVC](xref:mvc/overview) adds routing to the middleware pipeline as part of its configuration.</span></span> <span data-ttu-id="ef49d-123">Další informace o použití směrování jako samostatné komponenty, naleznete v tématu [použití směrování Middleware](#use-routing-middleware) oddílu.</span><span class="sxs-lookup"><span data-stu-id="ef49d-123">To learn about using routing as a standalone component, see [Use Routing Middleware](#use-routing-middleware) section.</span></span>

### <a name="url-matching"></a><span data-ttu-id="ef49d-124">Adresa URL odpovídající</span><span class="sxs-lookup"><span data-stu-id="ef49d-124">URL matching</span></span>

<span data-ttu-id="ef49d-125">Adresa URL odpovídající je proces, ve které směrování odešle příchozí požadavek na *obslužná rutina*.</span><span class="sxs-lookup"><span data-stu-id="ef49d-125">URL matching is the process by which routing dispatches an incoming request to a *handler*.</span></span> <span data-ttu-id="ef49d-126">Tento proces je na základě dat v cestě adresy URL, ale je možné rozšířit na zvažte všechna data v žádosti.</span><span class="sxs-lookup"><span data-stu-id="ef49d-126">This process is based on data in the URL path but can be extended to consider any data in the request.</span></span> <span data-ttu-id="ef49d-127">Schopnost expedovat požadavky k oddělení obslužné rutiny je klíčem k škálování velikosti a složitosti aplikace.</span><span class="sxs-lookup"><span data-stu-id="ef49d-127">The ability to dispatch requests to separate handlers is key to scaling the size and complexity of an app.</span></span>

<span data-ttu-id="ef49d-128">Zadejte příchozí požadavky `RouterMiddleware`, který volá <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> metodu na každý postup v pořadí.</span><span class="sxs-lookup"><span data-stu-id="ef49d-128">Incoming requests enter the `RouterMiddleware`, which calls the <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> method on each route in sequence.</span></span> <span data-ttu-id="ef49d-129"><xref:Microsoft.AspNetCore.Routing.IRouter> Vybere instanci, jestli se má *zpracování* požadavku tak, že nastavíte [RouteContext.Handler](xref:Microsoft.AspNetCore.Routing.RouteContext.Handler*) na jinou hodnotu null <xref:Microsoft.AspNetCore.Http.RequestDelegate>.</span><span class="sxs-lookup"><span data-stu-id="ef49d-129">The <xref:Microsoft.AspNetCore.Routing.IRouter> instance chooses whether to *handle* the request by setting the [RouteContext.Handler](xref:Microsoft.AspNetCore.Routing.RouteContext.Handler*) to a non-null <xref:Microsoft.AspNetCore.Http.RequestDelegate>.</span></span> <span data-ttu-id="ef49d-130">Pokud trasa nastaví obslužnou rutinu pro žádosti, směrovat zastaví zpracování a zpracovat požadavek, je vyvolána obslužná rutina.</span><span class="sxs-lookup"><span data-stu-id="ef49d-130">If a route sets a handler for the request, route processing stops, and the handler is invoked to process the request.</span></span> <span data-ttu-id="ef49d-131">Pokud jsou použity všechny trasy a nenajde žádná obslužná rutina požadavku, middleware volá *Další*, a vyvolat další middleware v kanálu požadavku.</span><span class="sxs-lookup"><span data-stu-id="ef49d-131">If all routes are tried and no handler is found for the request, the middleware calls *next*, and the next middleware in the request pipeline is invoked.</span></span>

<span data-ttu-id="ef49d-132">Primární vstup do `RouteAsync` je [RouteContext.HttpContext](xref:Microsoft.AspNetCore.Routing.RouteContext.HttpContext*) přidruženého k aktuální žádosti.</span><span class="sxs-lookup"><span data-stu-id="ef49d-132">The primary input to `RouteAsync` is the [RouteContext.HttpContext](xref:Microsoft.AspNetCore.Routing.RouteContext.HttpContext*) associated with the current request.</span></span> <span data-ttu-id="ef49d-133">`RouteContext.Handler` a [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData*) jsou výstupy nastavit po trasa odpovídá.</span><span class="sxs-lookup"><span data-stu-id="ef49d-133">The `RouteContext.Handler` and [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData*) are outputs set after a route matches.</span></span>

<span data-ttu-id="ef49d-134">Shoda během `RouteAsync` také nastaví vlastnosti `RouteContext.RouteData` na odpovídající hodnoty podle doposud provádí zpracování žádostí.</span><span class="sxs-lookup"><span data-stu-id="ef49d-134">A match during `RouteAsync` also sets the properties of the `RouteContext.RouteData` to appropriate values based on the request processing performed thus far.</span></span> <span data-ttu-id="ef49d-135">Pokud trasa odpovídá žádosti `RouteContext.RouteData` obsahuje informace o stavu důležité o *výsledek*.</span><span class="sxs-lookup"><span data-stu-id="ef49d-135">If a route matches a request, the `RouteContext.RouteData` contains important state information about the *result*.</span></span>

<span data-ttu-id="ef49d-136">[RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values*) je slovník *hodnot trasy* vytvořenými trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-136">[RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values*) is a dictionary of *route values* produced from the route.</span></span> <span data-ttu-id="ef49d-137">Tyto hodnoty jsou obvykle určeny tokenizaci adresu URL a je možné přijímat uživatelský vstup nebo další dispatching rozhodnutí v aplikaci.</span><span class="sxs-lookup"><span data-stu-id="ef49d-137">These values are usually determined by tokenizing the URL and can be used to accept user input or to make further dispatching decisions inside the app.</span></span>

<span data-ttu-id="ef49d-138">[RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) je kontejner objektů a dat o další data související s porovnávané trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-138">[RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) is a property bag of additional data related to the matched route.</span></span> <span data-ttu-id="ef49d-139">`DataTokens` jsou k dispozici pro podporu přiřazování dat o stavu se každý postup tak, aby aplikace mohly rozhodnutí později založené na směrování, které odpovídá.</span><span class="sxs-lookup"><span data-stu-id="ef49d-139">`DataTokens` are provided to support associating state data with each route so that the app can make decisions later based on which route matched.</span></span> <span data-ttu-id="ef49d-140">Tyto hodnoty jsou definovány pro vývojáře a proveďte **není** ovlivňují chování směrování žádným způsobem.</span><span class="sxs-lookup"><span data-stu-id="ef49d-140">These values are developer-defined and do **not** affect the behavior of routing in any way.</span></span> <span data-ttu-id="ef49d-141">Kromě toho hodnoty dočasně uložily v `RouteData.DataTokens` může být libovolného typu, rozdíl od `RouteData.Values`, která musí být snadno převést do a z řetězce.</span><span class="sxs-lookup"><span data-stu-id="ef49d-141">Additionally, values stashed in `RouteData.DataTokens` can be of any type, in contrast to `RouteData.Values`, which must be easily convertible to and from strings.</span></span>

<span data-ttu-id="ef49d-142">[RouteData.Routers](xref:Microsoft.AspNetCore.Routing.RouteData.Routers*) je seznam tras, které účastnila úspěšně odpovídající požadavek.</span><span class="sxs-lookup"><span data-stu-id="ef49d-142">[RouteData.Routers](xref:Microsoft.AspNetCore.Routing.RouteData.Routers*) is a list of the routes that took part in successfully matching the request.</span></span> <span data-ttu-id="ef49d-143">Trasy můžete vnořit do mezi sebou.</span><span class="sxs-lookup"><span data-stu-id="ef49d-143">Routes can be nested inside of one another.</span></span> <span data-ttu-id="ef49d-144">`Routers` Vlastnost odpovídá cestě prostřednictvím logického stromu tras, z kterých vzniklo shoda.</span><span class="sxs-lookup"><span data-stu-id="ef49d-144">The `Routers` property reflects the path through the logical tree of routes that resulted in a match.</span></span> <span data-ttu-id="ef49d-145">Obecně platí, první položky v `Routers` je kolekce tras a byste měli použít pro generování adresy URL.</span><span class="sxs-lookup"><span data-stu-id="ef49d-145">Generally, the first item in `Routers` is the route collection and should be used for URL generation.</span></span> <span data-ttu-id="ef49d-146">Poslední položky v `Routers` je obslužná rutina trasy, který odpovídá.</span><span class="sxs-lookup"><span data-stu-id="ef49d-146">The last item in `Routers` is the route handler that matched.</span></span>

### <a name="url-generation"></a><span data-ttu-id="ef49d-147">Generování adresy URL</span><span class="sxs-lookup"><span data-stu-id="ef49d-147">URL generation</span></span>

<span data-ttu-id="ef49d-148">Generování adresy URL je proces, podle kterých směrování, můžete vytvořit cestu adresy URL na základě sady hodnot trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-148">URL generation is the process by which routing can create a URL path based on a set of route values.</span></span> <span data-ttu-id="ef49d-149">To umožňuje logické rozdělení mezi vaší obslužné rutiny a adresy URL, které k nim přístup.</span><span class="sxs-lookup"><span data-stu-id="ef49d-149">This allows for a logical separation between your handlers and the URLs that access them.</span></span>

<span data-ttu-id="ef49d-150">Generování adresy URL je iterativní probíhá podobně, ale začíná uživatele nebo architekturní kód volání do <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> metody kolekce tras.</span><span class="sxs-lookup"><span data-stu-id="ef49d-150">URL generation follows a similar iterative process, but it starts with user or framework code calling into the <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> method of the route collection.</span></span> <span data-ttu-id="ef49d-151">Každý *trasy* nemá jeho `GetVirtualPath` metodu volat v pořadí, dokud nebude nenulovým <xref:Microsoft.AspNetCore.Routing.VirtualPathData> je vrácena.</span><span class="sxs-lookup"><span data-stu-id="ef49d-151">Each *route* then has its `GetVirtualPath` method called in sequence until a non-null <xref:Microsoft.AspNetCore.Routing.VirtualPathData> is returned.</span></span>

<span data-ttu-id="ef49d-152">Primární vstupů na `GetVirtualPath` jsou:</span><span class="sxs-lookup"><span data-stu-id="ef49d-152">The primary inputs to `GetVirtualPath` are:</span></span>

* [<span data-ttu-id="ef49d-153">VirtualPathContext.HttpContext</span><span class="sxs-lookup"><span data-stu-id="ef49d-153">VirtualPathContext.HttpContext</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.HttpContext*)
* [<span data-ttu-id="ef49d-154">VirtualPathContext.Values</span><span class="sxs-lookup"><span data-stu-id="ef49d-154">VirtualPathContext.Values</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values*)
* [<span data-ttu-id="ef49d-155">VirtualPathContext.AmbientValues</span><span class="sxs-lookup"><span data-stu-id="ef49d-155">VirtualPathContext.AmbientValues</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues*)

<span data-ttu-id="ef49d-156">Trasy primárně používat hodnoty trasy poskytované `Values` a `AmbientValues` rozhodnout, jestli je možné generovat adresu URL a jaké hodnoty je třeba zahrnout.</span><span class="sxs-lookup"><span data-stu-id="ef49d-156">Routes primarily use the route values provided by the `Values` and `AmbientValues` to decide whether it's possible to generate a URL and what values to include.</span></span> <span data-ttu-id="ef49d-157">`AmbientValues` Sada hodnot trasy, které byly vytvořeny z odpovídajících aktuální požadavek systému směrování.</span><span class="sxs-lookup"><span data-stu-id="ef49d-157">The `AmbientValues` are the set of route values that were produced from matching the current request with the routing system.</span></span> <span data-ttu-id="ef49d-158">Naproti tomu `Values` jsou hodnoty trasy, které určují, jak generovat požadovanou adresu URL pro aktuální operaci.</span><span class="sxs-lookup"><span data-stu-id="ef49d-158">In contrast, `Values` are the route values that specify how to generate the desired URL for the current operation.</span></span> <span data-ttu-id="ef49d-159">`HttpContext` Je k dispozici v případě, že trasy je potřeba získat služby nebo další data související s aktuálním kontextu.</span><span class="sxs-lookup"><span data-stu-id="ef49d-159">The `HttpContext` is provided in case a route needs to obtain services or additional data associated with the current context.</span></span>

> [!TIP]
> <span data-ttu-id="ef49d-160">Představte si, že [VirtualPathContext.Values](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values*) jako přepsání pro sadu [VirtualPathContext.AmbientValues](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues*).</span><span class="sxs-lookup"><span data-stu-id="ef49d-160">Think of [VirtualPathContext.Values](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values*) as being a set of overrides for the [VirtualPathContext.AmbientValues](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues*).</span></span> <span data-ttu-id="ef49d-161">Generování adresy URL se pokusí znovu použít hodnoty trasy z aktuální žádosti k tomu, aby k vygenerování adres URL pro odkazů pomocí stejného postupu nebo hodnoty trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-161">URL generation attempts to reuse route values from the current request to make it easy to generate URLs for links using the same route or route values.</span></span>

<span data-ttu-id="ef49d-162">Výstup `GetVirtualPath` je `VirtualPathData`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-162">The output of `GetVirtualPath` is a `VirtualPathData`.</span></span> <span data-ttu-id="ef49d-163">`VirtualPathData` je paralelní z `RouteData`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-163">`VirtualPathData` is a parallel of `RouteData`.</span></span> <span data-ttu-id="ef49d-164">`VirtualPathData` obsahuje `VirtualPath` pro výstupní adresy URL a některé další vlastnosti, které by měl nastavit trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-164">`VirtualPathData` contains the `VirtualPath` for the output URL and some additional properties that should be set by the route.</span></span>

<span data-ttu-id="ef49d-165">[VirtualPathData.VirtualPath](xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath*) obsahuje vlastnost *virtuální cesta* vytvářených trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-165">The [VirtualPathData.VirtualPath](xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath*) property contains the *virtual path* produced by the route.</span></span> <span data-ttu-id="ef49d-166">V závislosti na potřebách budete muset cesta další zpracování.</span><span class="sxs-lookup"><span data-stu-id="ef49d-166">Depending on your needs, you may need to process the path further.</span></span> <span data-ttu-id="ef49d-167">Pokud chcete vykreslovat vygenerovaná adresa URL ve formátu HTML, předřaďte základní cesty aplikace.</span><span class="sxs-lookup"><span data-stu-id="ef49d-167">If you want to render the generated URL in HTML, prepend the base path of the app.</span></span>

<span data-ttu-id="ef49d-168">[VirtualPathData.Router](xref:Microsoft.AspNetCore.Routing.VirtualPathData.Router*) je odkaz na trasy, která adresa URL se úspěšně vygeneroval.</span><span class="sxs-lookup"><span data-stu-id="ef49d-168">The [VirtualPathData.Router](xref:Microsoft.AspNetCore.Routing.VirtualPathData.Router*) is a reference to the route that successfully generated the URL.</span></span>

<span data-ttu-id="ef49d-169">[VirtualPathData.DataTokens](xref:Microsoft.AspNetCore.Routing.VirtualPathData.DataTokens*) vlastnosti je slovník další data související s trasy, která vygenerovala adresa URL.</span><span class="sxs-lookup"><span data-stu-id="ef49d-169">The [VirtualPathData.DataTokens](xref:Microsoft.AspNetCore.Routing.VirtualPathData.DataTokens*) properties is a dictionary of additional data related to the route that generated the URL.</span></span> <span data-ttu-id="ef49d-170">Toto je rovnoběžky [RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*).</span><span class="sxs-lookup"><span data-stu-id="ef49d-170">This is the parallel of [RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*).</span></span>

### <a name="creating-routes"></a><span data-ttu-id="ef49d-171">Vytváření tras</span><span class="sxs-lookup"><span data-stu-id="ef49d-171">Creating routes</span></span>

<span data-ttu-id="ef49d-172">Směrování poskytuje <xref:Microsoft.AspNetCore.Routing.Route> třídu jako standardní implementace <xref:Microsoft.AspNetCore.Routing.IRouter>.</span><span class="sxs-lookup"><span data-stu-id="ef49d-172">Routing provides the <xref:Microsoft.AspNetCore.Routing.Route> class as the standard implementation of <xref:Microsoft.AspNetCore.Routing.IRouter>.</span></span> <span data-ttu-id="ef49d-173">`Route` používá *šablonu trasy* syntaxe pro definování vzory, které odpovídají vůči cestě adresy URL při <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> je volána.</span><span class="sxs-lookup"><span data-stu-id="ef49d-173">`Route` uses the *route template* syntax to define patterns that match against the URL path when <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> is called.</span></span> <span data-ttu-id="ef49d-174">`Route` používá stejnou šablonu trasy pro generování adresy URL při `GetVirtualPath` je volána.</span><span class="sxs-lookup"><span data-stu-id="ef49d-174">`Route` uses the same route template to generate a URL when `GetVirtualPath` is called.</span></span>

<span data-ttu-id="ef49d-175">Většina aplikací vytvářet trasy voláním <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> nebo některou z podobných rozšiřující metody definované v <xref:Microsoft.AspNetCore.Routing.IRouteBuilder>.</span><span class="sxs-lookup"><span data-stu-id="ef49d-175">Most apps create routes by calling <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> or one of the similar extension methods defined on <xref:Microsoft.AspNetCore.Routing.IRouteBuilder>.</span></span> <span data-ttu-id="ef49d-176">Všechny tyto metody vytvoření instance <xref:Microsoft.AspNetCore.Routing.Route> a přidejte ho do kolekce tras.</span><span class="sxs-lookup"><span data-stu-id="ef49d-176">All of these methods create an instance of <xref:Microsoft.AspNetCore.Routing.Route> and add it to the route collection.</span></span>

<span data-ttu-id="ef49d-177">`MapRoute` nepřijímá parametr obslužná rutina trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-177">`MapRoute` doesn't take a route handler parameter.</span></span> <span data-ttu-id="ef49d-178">`MapRoute` Přidá trasy, které jsou zpracovávány pouze <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span><span class="sxs-lookup"><span data-stu-id="ef49d-178">`MapRoute` only adds routes that are handled by the <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span></span> <span data-ttu-id="ef49d-179">Protože je výchozí obslužnou rutinu `IRouter`, může rozhodnout není pro zpracování požadavku.</span><span class="sxs-lookup"><span data-stu-id="ef49d-179">Since the default handler is an `IRouter`, it may decide not to handle the request.</span></span> <span data-ttu-id="ef49d-180">ASP.NET Core MVC je třeba typicky nakonfigurován jako výchozí popisovač, který zpracovává pouze požadavky, které odpovídají k dispozici kontroleru a akce.</span><span class="sxs-lookup"><span data-stu-id="ef49d-180">For example, ASP.NET Core MVC is typically configured as a default handler that only handles requests that match an available controller and action.</span></span> <span data-ttu-id="ef49d-181">Další informace o směrování MVC najdete v tématu <xref:mvc/controllers/routing>.</span><span class="sxs-lookup"><span data-stu-id="ef49d-181">To learn more about routing to MVC, see <xref:mvc/controllers/routing>.</span></span>

<span data-ttu-id="ef49d-182">Následující příklad kódu je příkladem `MapRoute` volání používá typické definice trasy ASP.NET Core MVC:</span><span class="sxs-lookup"><span data-stu-id="ef49d-182">The following code example is an example of a `MapRoute` call used by a typical ASP.NET Core MVC route definition:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="ef49d-183">Tato šablona odpovídá cesty adresy URL jako `/Products/Details/17` a extrahuje hodnoty trasy `{ controller = Products, action = Details, id = 17 }`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-183">This template matches a URL path like `/Products/Details/17` and extracts the route values `{ controller = Products, action = Details, id = 17 }`.</span></span> <span data-ttu-id="ef49d-184">Hodnoty trasy jsou určeny rozdělení cestě adresy URL do segmentů a odpovídající každý segment s *trasy parametr* název v šabloně trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-184">The route values are determined by splitting the URL path into segments and matching each segment with the *route parameter* name in the route template.</span></span> <span data-ttu-id="ef49d-185">Jsou pojmenované parametry trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-185">Route parameters are named.</span></span> <span data-ttu-id="ef49d-186">Máte definované uzavřením názvu parametru ve složených závorkách `{ ... }`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-186">They're defined by enclosing the parameter name in braces `{ ... }`.</span></span>

<span data-ttu-id="ef49d-187">Předchozí šablona může také odpovídat cesty URL `/` a mohlo by dojít hodnoty `{ controller = Home, action = Index }`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-187">The preceding template could also match the URL path `/` and would produce the values `{ controller = Home, action = Index }`.</span></span> <span data-ttu-id="ef49d-188">K tomu dochází, `{controller}` a `{action}` trasy parametry mají výchozí hodnoty a `id` trasy parametr je nepovinný.</span><span class="sxs-lookup"><span data-stu-id="ef49d-188">This occurs because the `{controller}` and `{action}` route parameters have default values and the `id` route parameter is optional.</span></span> <span data-ttu-id="ef49d-189">Je rovno `=` následovaného hodnotu po definuje výchozí hodnotu pro parametr název parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-189">An equals `=` sign followed by a value after the route parameter name defines a default value for the parameter.</span></span> <span data-ttu-id="ef49d-190">Otazník `?` po název parametru trasy definuje jako volitelný parametr.</span><span class="sxs-lookup"><span data-stu-id="ef49d-190">A question mark `?` after the route parameter name defines the parameter as optional.</span></span> <span data-ttu-id="ef49d-191">Parametry s výchozí hodnotou směrování *vždy* vygenerování hodnoty trasy, pokud trasa odpovídá.</span><span class="sxs-lookup"><span data-stu-id="ef49d-191">Route parameters with a default value *always* produce a route value when the route matches.</span></span> <span data-ttu-id="ef49d-192">Volitelné parametry není výsledkem hodnota trasy, pokud se žádný odpovídající segment cesty adresy URL.</span><span class="sxs-lookup"><span data-stu-id="ef49d-192">Optional parameters don't produce a route value if there was no corresponding URL path segment.</span></span>

<span data-ttu-id="ef49d-193">Zobrazit [trasy – – referenční informace k šablonám](#route-template-reference) důkladné popis funkcí šablonu trasy a syntaxe.</span><span class="sxs-lookup"><span data-stu-id="ef49d-193">See [route-template-reference](#route-template-reference) for a thorough description of route template features and syntax.</span></span>

<span data-ttu-id="ef49d-194">Tento příklad zahrnuje *trasy omezení*:</span><span class="sxs-lookup"><span data-stu-id="ef49d-194">This example includes a *route constraint*:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id:int}");
```

<span data-ttu-id="ef49d-195">Tato šablona odpovídá cesty adresy URL jako `/Products/Details/17` , ale ne `/Products/Details/Apples`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-195">This template matches a URL path like `/Products/Details/17` but not `/Products/Details/Apples`.</span></span> <span data-ttu-id="ef49d-196">Definice parametru trasy `{id:int}` definuje [trasy omezení](#route-constraint-reference) pro `id` parametr trasa.</span><span class="sxs-lookup"><span data-stu-id="ef49d-196">The route parameter definition `{id:int}` defines a [route constraint](#route-constraint-reference) for the `id` route parameter.</span></span> <span data-ttu-id="ef49d-197">Implementace omezení trasy <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> a hodnoty trasy k ověření je zkontrolovat.</span><span class="sxs-lookup"><span data-stu-id="ef49d-197">Route constraints implement <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> and inspect route values to verify them.</span></span> <span data-ttu-id="ef49d-198">V tomto příkladu je hodnota trasy `id` musí být převeditelný na celé číslo.</span><span class="sxs-lookup"><span data-stu-id="ef49d-198">In this example, the route value `id` must be convertible to an integer.</span></span> <span data-ttu-id="ef49d-199">Zobrazit [trasy omezení referenční](#route-constraint-reference) podrobnější vysvětlení omezení trasy, které jsou k dispozici v rámci rozhraní.</span><span class="sxs-lookup"><span data-stu-id="ef49d-199">See [route-constraint-reference](#route-constraint-reference) for a more detailed explanation of route constraints that are provided by the framework.</span></span>

<span data-ttu-id="ef49d-200">Další přetížení `MapRoute` přijmout hodnoty pro `constraints`, `dataTokens`, a `defaults`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-200">Additional overloads of `MapRoute` accept values for `constraints`, `dataTokens`, and `defaults`.</span></span> <span data-ttu-id="ef49d-201">Z těchto dalších parametrech `MapRoute` jsou definovány jako typ `object`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-201">These additional parameters of `MapRoute` are defined as type `object`.</span></span> <span data-ttu-id="ef49d-202">Typické použití těchto parametrů je předat anonymně typovaných objektů, kde názvy vlastností anonymních typů shody směrovat názvy parametrů.</span><span class="sxs-lookup"><span data-stu-id="ef49d-202">The typical usage of these parameters is to pass an anonymously typed object, where the property names of the anonymous type match route parameter names.</span></span>

<span data-ttu-id="ef49d-203">Následující dva příklady vytvoření ekvivalentní tras:</span><span class="sxs-lookup"><span data-stu-id="ef49d-203">The following two examples create equivalent routes:</span></span>

```csharp
routes.MapRoute(
    name: "default_route",
    template: "{controller}/{action}/{id?}",
    defaults: new { controller = "Home", action = "Index" });

routes.MapRoute(
    name: "default_route",
    template: "{controller=Home}/{action=Index}/{id?}");
```

> [!TIP]
> <span data-ttu-id="ef49d-204">Vložená syntaxe pro definování omezení a výchozích hodnot může být vhodné pro jednoduché trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-204">The inline syntax for defining constraints and defaults can be convenient for simple routes.</span></span> <span data-ttu-id="ef49d-205">Existují však funkce, jako jsou tokeny dat, nepodporované vložená syntaxe.</span><span class="sxs-lookup"><span data-stu-id="ef49d-205">However, there are features, such as data tokens, that aren't supported by inline syntax.</span></span>

<span data-ttu-id="ef49d-206">Následující příklad ukazuje několik více scénářů:</span><span class="sxs-lookup"><span data-stu-id="ef49d-206">The following example demonstrates a few more scenarios:</span></span>

```csharp
routes.MapRoute(
    name: "blog",
    template: "Blog/{*article}",
    defaults: new { controller = "Blog", action = "ReadArticle" });
```

<span data-ttu-id="ef49d-207">Tato šablona odpovídá cesty adresy URL jako `/Blog/All-About-Routing/Introduction` a extrahuje hodnoty `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-207">This template matches a URL path like `/Blog/All-About-Routing/Introduction` and extracts the values `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span></span> <span data-ttu-id="ef49d-208">Směrování výchozí hodnoty pro `controller` a `action` jsou vytvářeny trasy, i když neexistují žádné odpovídající trasy parametry v šabloně.</span><span class="sxs-lookup"><span data-stu-id="ef49d-208">The default route values for `controller` and `action` are produced by the route even though there are no corresponding route parameters in the template.</span></span> <span data-ttu-id="ef49d-209">V šabloně postupu lze zadat výchozí hodnoty.</span><span class="sxs-lookup"><span data-stu-id="ef49d-209">Default values can be specified in the route template.</span></span> <span data-ttu-id="ef49d-210">`article` Parametr trasa je definován jako *pokrývající vše* podle vzhledu hvězdičku `*` před název parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-210">The `article` route parameter is defined as a *catch-all* by the appearance of an asterisk `*` before the route parameter name.</span></span> <span data-ttu-id="ef49d-211">Parametry trasy pokrývající vše zachycení zbývající část cesty URL a můžete také hledat shody prázdný řetězec.</span><span class="sxs-lookup"><span data-stu-id="ef49d-211">Catch-all route parameters capture the remainder of the URL path and can also match the empty string.</span></span>

<span data-ttu-id="ef49d-212">V tomto příkladu přidá tokeny omezení a data trasy:</span><span class="sxs-lookup"><span data-stu-id="ef49d-212">This example adds route constraints and data tokens:</span></span>

```csharp
routes.MapRoute(
    name: "us_english_products",
    template: "en-US/Products/{id}",
    defaults: new { controller = "Products", action = "Details" },
    constraints: new { id = new IntRouteConstraint() },
    dataTokens: new { locale = "en-US" });
```

<span data-ttu-id="ef49d-213">Tato šablona odpovídá cesty adresy URL jako `/en-US/Products/5` a extrahuje hodnoty `{ controller = Products, action = Details, id = 5 }` a tokeny dat `{ locale = en-US }`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-213">This template matches a URL path like `/en-US/Products/5` and extracts the values `{ controller = Products, action = Details, id = 5 }` and the data tokens `{ locale = en-US }`.</span></span>

![Tokeny Windows místních hodnot](routing/_static/tokens.png)

### <a name="url-generation"></a><span data-ttu-id="ef49d-215">Generování adresy URL</span><span class="sxs-lookup"><span data-stu-id="ef49d-215">URL generation</span></span>

<span data-ttu-id="ef49d-216">`Route` Třídy můžete také provádět generování adresy URL kombinováním sadu hodnot trasy s jeho šablonu trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-216">The `Route` class can also perform URL generation by combining a set of route values with its route template.</span></span> <span data-ttu-id="ef49d-217">Toto je logicky procesu zpětné odpovídajících cestě adresy URL.</span><span class="sxs-lookup"><span data-stu-id="ef49d-217">This is logically the reverse process of matching the URL path.</span></span>

> [!TIP]
> <span data-ttu-id="ef49d-218">Abyste lépe pochopili generování adresy URL, představte si, jakou adresu URL, které chcete generovat a potom rozmyslete si, jak šablonu trasy odpovídají tuto adresu URL.</span><span class="sxs-lookup"><span data-stu-id="ef49d-218">To better understand URL generation, imagine what URL you want to generate and then think about how a route template would match that URL.</span></span> <span data-ttu-id="ef49d-219">Hodnoty by bylo vytvořeno?</span><span class="sxs-lookup"><span data-stu-id="ef49d-219">What values would be produced?</span></span> <span data-ttu-id="ef49d-220">Jedná se o ekvivalent hrubý fungování generování adresy URL `Route` třídy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-220">This is the rough equivalent of how URL generation works in the `Route` class.</span></span>

<span data-ttu-id="ef49d-221">Tento příklad používá základní styl směrování ASP.NET Core MVC:</span><span class="sxs-lookup"><span data-stu-id="ef49d-221">This example uses a basic ASP.NET Core MVC style route:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="ef49d-222">S hodnotami trasy `{ controller = Products, action = List }`, této trasy generuje adresu URL `/Products/List`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-222">With the route values `{ controller = Products, action = List }`, this route generates the URL `/Products/List`.</span></span> <span data-ttu-id="ef49d-223">Hodnoty trasy jsou substituovány za parametry odpovídající trasy k vytvoření cesty adresy URL.</span><span class="sxs-lookup"><span data-stu-id="ef49d-223">The route values are substituted for the corresponding route parameters to form the URL path.</span></span> <span data-ttu-id="ef49d-224">Protože `id` je volitelný parametr trasa, bez obav, že nemá žádnou hodnotu.</span><span class="sxs-lookup"><span data-stu-id="ef49d-224">Since `id` is an optional route parameter, it's no problem that it doesn't have a value.</span></span>

<span data-ttu-id="ef49d-225">S hodnotami trasy `{ controller = Home, action = Index }`, této trasy generuje adresu URL `/`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-225">With the route values `{ controller = Home, action = Index }`, this route generates the URL `/`.</span></span> <span data-ttu-id="ef49d-226">Hodnoty trasy, které byly poskytnuty odpovídat výchozím hodnotám tak, aby segmenty odpovídající tyto hodnoty lze bezpečně vynechat.</span><span class="sxs-lookup"><span data-stu-id="ef49d-226">The route values that were provided match the default values so that the segments corresponding to those values can be safely omitted.</span></span> <span data-ttu-id="ef49d-227">Obě adresy URL vygeneruje zpátečního převodu s touto definicí trasy a vytvářejí stejné hodnoty trasy, které byly použity k vytvoření adresy URL.</span><span class="sxs-lookup"><span data-stu-id="ef49d-227">Both URLs generated round-trip with this route definition and produce the same route values that were used to generate the URL.</span></span>

> [!TIP]
> <span data-ttu-id="ef49d-228">Používejte aplikace pomocí ASP.NET Core MVC <xref:Microsoft.AspNetCore.Mvc.Routing.UrlHelper> k vygenerování adres URL, bez volání do směrování přímo.</span><span class="sxs-lookup"><span data-stu-id="ef49d-228">An app using ASP.NET Core MVC should use <xref:Microsoft.AspNetCore.Mvc.Routing.UrlHelper> to generate URLs instead of calling into routing directly.</span></span>

<span data-ttu-id="ef49d-229">Další informace o generování adresy URL, najdete v části [odkazem generování url](#url-generation-reference).</span><span class="sxs-lookup"><span data-stu-id="ef49d-229">For more information about URL generation, see [url-generation-reference](#url-generation-reference).</span></span>

## <a name="use-routing-middleware"></a><span data-ttu-id="ef49d-230">Použití směrování middlewaru</span><span class="sxs-lookup"><span data-stu-id="ef49d-230">Use Routing Middleware</span></span>

::: moniker range=">= aspnetcore-2.1"

<span data-ttu-id="ef49d-231">Odkaz [Microsoft.AspNetCore.App Microsoft.aspnetcore.all](xref:fundamentals/metapackage-app) v souboru projektu vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="ef49d-231">Reference the [Microsoft.AspNetCore.App metapackage](xref:fundamentals/metapackage-app) in the app's project file.</span></span>

::: moniker-end

::: moniker range="= aspnetcore-2.0"

<span data-ttu-id="ef49d-232">Odkaz [metabalíček Microsoft.aspnetcore.all](xref:fundamentals/metapackage) v souboru projektu vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="ef49d-232">Reference the [Microsoft.AspNetCore.All metapackage](xref:fundamentals/metapackage) in the app's project file.</span></span>

::: moniker-end

::: moniker range="< aspnetcore-2.0"

<span data-ttu-id="ef49d-233">Odkaz [Microsoft.AspNetCore.Routing](https://www.nuget.org/packages/Microsoft.AspNetCore.Routing/) v souboru projektu vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="ef49d-233">Reference the [Microsoft.AspNetCore.Routing](https://www.nuget.org/packages/Microsoft.AspNetCore.Routing/) in the app's project file.</span></span>

::: moniker-end

<span data-ttu-id="ef49d-234">Přidání směrování do kontejneru služby v `Startup.ConfigureServices`:</span><span class="sxs-lookup"><span data-stu-id="ef49d-234">Add routing to the service container in `Startup.ConfigureServices`:</span></span>

::: moniker range=">= aspnetcore-2.0"

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_ConfigureServices&highlight=3)]

::: moniker-end

::: moniker range="< aspnetcore-2.0"

[!code-csharp[](routing/samples/1.x/RoutingSample/Startup.cs?name=snippet_ConfigureServices&highlight=3)]

::: moniker-end

<span data-ttu-id="ef49d-235">Musí být nakonfigurované trasy v `Startup.Configure` metody.</span><span class="sxs-lookup"><span data-stu-id="ef49d-235">Routes must be configured in the `Startup.Configure` method.</span></span> <span data-ttu-id="ef49d-236">Ukázková aplikace používá tato rozhraní API:</span><span class="sxs-lookup"><span data-stu-id="ef49d-236">The sample app uses these APIs:</span></span>

* `RouteBuilder`
* `Build`
* <span data-ttu-id="ef49d-237">`MapGet` &ndash; Odpovídá pouze požadavky HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="ef49d-237">`MapGet` &ndash; Matches only HTTP GET requests.</span></span>
* `UseRouter`

::: moniker range=">= aspnetcore-2.0"

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_RouteHandler)]

::: moniker-end

::: moniker range="< aspnetcore-2.0"

[!code-csharp[](routing/samples/1.x/RoutingSample/Startup.cs?name=snippet_RouteHandler)]

::: moniker-end

<span data-ttu-id="ef49d-238">V následující tabulce jsou uvedeny odpovědi s danou identifikátory URI.</span><span class="sxs-lookup"><span data-stu-id="ef49d-238">The following table shows the responses with the given URIs.</span></span>

| <span data-ttu-id="ef49d-239">Identifikátor URI</span><span class="sxs-lookup"><span data-stu-id="ef49d-239">URI</span></span>                  | <span data-ttu-id="ef49d-240">Odpověď</span><span class="sxs-lookup"><span data-stu-id="ef49d-240">Response</span></span>                                          |
| -------------------- | ------------------------------------------------- |
| <span data-ttu-id="ef49d-241">/Package/Create/3</span><span class="sxs-lookup"><span data-stu-id="ef49d-241">/package/create/3</span></span>    | <span data-ttu-id="ef49d-242">Dobrý den!</span><span class="sxs-lookup"><span data-stu-id="ef49d-242">Hello!</span></span> <span data-ttu-id="ef49d-243">Hodnoty trasy: [operace, vytvořit], [id, 3]</span><span class="sxs-lookup"><span data-stu-id="ef49d-243">Route values: [operation, create], [id, 3]</span></span> |
| <span data-ttu-id="ef49d-244">/ / 3 balíčku/sledování</span><span class="sxs-lookup"><span data-stu-id="ef49d-244">/package/track/-3</span></span>    | <span data-ttu-id="ef49d-245">Dobrý den!</span><span class="sxs-lookup"><span data-stu-id="ef49d-245">Hello!</span></span> <span data-ttu-id="ef49d-246">Hodnoty trasy: [operace, sledovat], [id, -3]</span><span class="sxs-lookup"><span data-stu-id="ef49d-246">Route values: [operation, track], [id, -3]</span></span> |
| <span data-ttu-id="ef49d-247">/ balíček/sledovat/3 /</span><span class="sxs-lookup"><span data-stu-id="ef49d-247">/package/track/-3/</span></span>   | <span data-ttu-id="ef49d-248">Dobrý den!</span><span class="sxs-lookup"><span data-stu-id="ef49d-248">Hello!</span></span> <span data-ttu-id="ef49d-249">Hodnoty trasy: [operace, sledovat], [id, -3]</span><span class="sxs-lookup"><span data-stu-id="ef49d-249">Route values: [operation, track], [id, -3]</span></span> |
| <span data-ttu-id="ef49d-250">/ Package/sledování /</span><span class="sxs-lookup"><span data-stu-id="ef49d-250">/package/track/</span></span>      | <span data-ttu-id="ef49d-251">&lt;Předáno, žádná shoda&gt;</span><span class="sxs-lookup"><span data-stu-id="ef49d-251">&lt;Fall through, no match&gt;</span></span>                    |
| <span data-ttu-id="ef49d-252">ZÍSKAT /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="ef49d-252">GET /hello/Joe</span></span>       | <span data-ttu-id="ef49d-253">Dobrý den, Joe!</span><span class="sxs-lookup"><span data-stu-id="ef49d-253">Hi, Joe!</span></span>                                          |
| <span data-ttu-id="ef49d-254">/Hello/Joe příspěvku</span><span class="sxs-lookup"><span data-stu-id="ef49d-254">POST /hello/Joe</span></span>      | <span data-ttu-id="ef49d-255">&lt;Předáno, odpovídá pouze HTTP GET&gt;</span><span class="sxs-lookup"><span data-stu-id="ef49d-255">&lt;Fall through, matches HTTP GET only&gt;</span></span>       |
| <span data-ttu-id="ef49d-256">ZÍSKAT /hello/Joe/Smith</span><span class="sxs-lookup"><span data-stu-id="ef49d-256">GET /hello/Joe/Smith</span></span> | <span data-ttu-id="ef49d-257">&lt;Předáno, žádná shoda&gt;</span><span class="sxs-lookup"><span data-stu-id="ef49d-257">&lt;Fall through, no match&gt;</span></span>                    |

<span data-ttu-id="ef49d-258">Pokud konfigurujete jednu trasu, zavolejte <xref:Microsoft.AspNetCore.Builder.RoutingBuilderExtensions.UseRouter*> předávajícího `IRouter` instance.</span><span class="sxs-lookup"><span data-stu-id="ef49d-258">If you're configuring a single route, call <xref:Microsoft.AspNetCore.Builder.RoutingBuilderExtensions.UseRouter*> passing in an `IRouter` instance.</span></span> <span data-ttu-id="ef49d-259">Nebudete muset použít <xref:Microsoft.AspNetCore.Routing.RouteBuilder>.</span><span class="sxs-lookup"><span data-stu-id="ef49d-259">You won't need to use <xref:Microsoft.AspNetCore.Routing.RouteBuilder>.</span></span>

<span data-ttu-id="ef49d-260">Rozhraní framework obsahuje sadu rozšiřujících metod pro vytváření tras, jako například:</span><span class="sxs-lookup"><span data-stu-id="ef49d-260">The framework provides a set of extension methods for creating routes, such as:</span></span>

* `MapRoute`
* `MapGet`
* `MapPost`
* `MapPut`
* `MapDelete`
* `MapVerb`

<span data-ttu-id="ef49d-261">Některé z těchto metod, jako například `MapGet`, vyžadují `RequestDelegate` poskytované.</span><span class="sxs-lookup"><span data-stu-id="ef49d-261">Some of these methods, such as `MapGet`, require a `RequestDelegate` to be provided.</span></span> <span data-ttu-id="ef49d-262">`RequestDelegate` Slouží jako *obslužná rutina trasy* při trasa odpovídá.</span><span class="sxs-lookup"><span data-stu-id="ef49d-262">The `RequestDelegate` is used as the *route handler* when the route matches.</span></span> <span data-ttu-id="ef49d-263">Jiné metody v této rodině povolit konfiguraci kanálu middleware pro použití jako obslužná rutina trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-263">Other methods in this family allow configuring a middleware pipeline for use as the route handler.</span></span> <span data-ttu-id="ef49d-264">Pokud *mapy* metoda nepřijme obslužnou rutinu, jako například `MapRoute`, potom použije <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span><span class="sxs-lookup"><span data-stu-id="ef49d-264">If the *Map* method doesn't accept a handler, such as `MapRoute`, then it uses the <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span></span>

<span data-ttu-id="ef49d-265">`Map[Verb]` Metody omezení trasy, která má v názvu metody akce HTTP pomocí omezení.</span><span class="sxs-lookup"><span data-stu-id="ef49d-265">The `Map[Verb]` methods use constraints to limit the route to the HTTP Verb in the method name.</span></span> <span data-ttu-id="ef49d-266">Viz například <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> a <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>.</span><span class="sxs-lookup"><span data-stu-id="ef49d-266">For example, see <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> and <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>.</span></span>

## <a name="route-template-reference"></a><span data-ttu-id="ef49d-267">Odkaz na šablonu trasy</span><span class="sxs-lookup"><span data-stu-id="ef49d-267">Route template reference</span></span>

<span data-ttu-id="ef49d-268">Tokeny ve složených závorkách (`{ ... }`) definovat *trasy parametry* , které jsou vázány, pokud je nalezen odpovídající trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-268">Tokens within curly braces (`{ ... }`) define *route parameters* that are bound if the route is matched.</span></span> <span data-ttu-id="ef49d-269">Můžete definovat více než jeden parametr trasa v segmentu směrování, ale musí být odděleny literálovou hodnotou.</span><span class="sxs-lookup"><span data-stu-id="ef49d-269">You can define more than one route parameter in a route segment, but they must be separated by a literal value.</span></span> <span data-ttu-id="ef49d-270">Například `{controller=Home}{action=Index}` není platné trasy, protože neexistuje žádná hodnota literálu mezi `{controller}` a `{action}`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-270">For example, `{controller=Home}{action=Index}` isn't a valid route, since there's no literal value between `{controller}` and `{action}`.</span></span> <span data-ttu-id="ef49d-271">Tyto parametry trasy musí mít název a může zadat další atributy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-271">These route parameters must have a name and may have additional attributes specified.</span></span>

<span data-ttu-id="ef49d-272">Prostý text než parametry trasy (například `{id}`) a oddělovač cesty `/` text v adrese URL se musí shodovat.</span><span class="sxs-lookup"><span data-stu-id="ef49d-272">Literal text other than route parameters (for example, `{id}`) and the path separator `/` must match the text in the URL.</span></span> <span data-ttu-id="ef49d-273">Odpovídající text je velká a malá písmena a podle dekódovaný reprezentace cesty adresy URL.</span><span class="sxs-lookup"><span data-stu-id="ef49d-273">Text matching is case-insensitive and based on the decoded representation of the URLs path.</span></span> <span data-ttu-id="ef49d-274">Tak, aby odpovídaly parametr oddělovače literálu trasy `{` nebo `}`, řídicí znak opakováním (`{{` nebo `}}`).</span><span class="sxs-lookup"><span data-stu-id="ef49d-274">To match the literal route parameter delimiter `{` or  `}`, escape it by repeating the character (`{{` or `}}`).</span></span>

<span data-ttu-id="ef49d-275">Vzory adres URL, které se pokusí zaznamenat název souboru s příponou volitelné mají další aspekty.</span><span class="sxs-lookup"><span data-stu-id="ef49d-275">URL patterns that attempt to capture a filename with an optional file extension have additional considerations.</span></span> <span data-ttu-id="ef49d-276">Představte si třeba šablona `files/{filename}.{ext?}`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-276">For example, consider the template `files/{filename}.{ext?}`.</span></span> <span data-ttu-id="ef49d-277">Pokud obě `filename` a `ext` existuje, naplní se obě hodnoty.</span><span class="sxs-lookup"><span data-stu-id="ef49d-277">When both `filename` and `ext` exist, both values are populated.</span></span> <span data-ttu-id="ef49d-278">Pokud pouze `filename` existuje v adrese URL trasy shody, protože koncové tečky `.` je volitelný.</span><span class="sxs-lookup"><span data-stu-id="ef49d-278">If only `filename` exists in the URL, the route matches because the trailing period `.` is  optional.</span></span> <span data-ttu-id="ef49d-279">Následující adresy URL, která odpovídá této trasy:</span><span class="sxs-lookup"><span data-stu-id="ef49d-279">The following URLs match this route:</span></span>

* `/files/myFile.txt`
* `/files/myFile`

<span data-ttu-id="ef49d-280">Můžete použít `*` znak jako předpona pro parametr trasy, aby vytvořit vazbu na celý URI.</span><span class="sxs-lookup"><span data-stu-id="ef49d-280">You can use the `*` character as a prefix to a route parameter to bind to the rest of the URI.</span></span> <span data-ttu-id="ef49d-281">Jedná se *pokrývající vše* parametru.</span><span class="sxs-lookup"><span data-stu-id="ef49d-281">This is called a *catch-all* parameter.</span></span> <span data-ttu-id="ef49d-282">Například `blog/{*slug}` odpovídá libovolný identifikátor URI, který začíná `/blog` a využili všechny hodnoty (která je přiřazená `slug` směrovat hodnota).</span><span class="sxs-lookup"><span data-stu-id="ef49d-282">For example, `blog/{*slug}` matches any URI that starts with `/blog` and had any value following it (which is assigned to the `slug` route value).</span></span> <span data-ttu-id="ef49d-283">Parametry catch – to všechno můžete také hledat shody prázdný řetězec.</span><span class="sxs-lookup"><span data-stu-id="ef49d-283">Catch-all parameters can also match the empty string.</span></span>

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="ef49d-284">Parametr pokrývající vše řídicí sekvence příslušných znaků při trasy se používá ke generování adresy URL, včetně oddělovač cesty (`/`) znaků.</span><span class="sxs-lookup"><span data-stu-id="ef49d-284">The catch-all parameter escapes the appropriate characters when the route is used to generate a URL, including path separator (`/`) characters.</span></span> <span data-ttu-id="ef49d-285">Například trasy `foo/{*path}` trasy hodnotami `{ path = "my/path" }` generuje `foo/my%2Fpath`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-285">For example, the route `foo/{*path}` with route values `{ path = "my/path" }` generates `foo/my%2Fpath`.</span></span> <span data-ttu-id="ef49d-286">Všimněte si uvozený uvozovacím znakem lomítka.</span><span class="sxs-lookup"><span data-stu-id="ef49d-286">Note the escaped forward slash.</span></span> <span data-ttu-id="ef49d-287">Operace round-trip cesta oddělovače, použijte `**` předpona parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-287">To round-trip path separator characters, use the `**` route parameter prefix.</span></span> <span data-ttu-id="ef49d-288">Trasa `foo/{**path}` s `{ path = "my/path" }` generuje `foo/my/path`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-288">The route `foo/{**path}` with `{ path = "my/path" }` generates `foo/my/path`.</span></span>

::: moniker-end

<span data-ttu-id="ef49d-289">Mohou mít parametry trasy *výchozí hodnoty*, navržené tak, že zadáte výchozí po názvu parametru, které jsou odděleny symbolem rovná se (`=`).</span><span class="sxs-lookup"><span data-stu-id="ef49d-289">Route parameters may have *default values*, designated by specifying the default after the parameter name, separated by an equals sign (`=`).</span></span> <span data-ttu-id="ef49d-290">Například `{controller=Home}` definuje `Home` jako výchozí hodnota pro `controller`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-290">For example, `{controller=Home}` defines `Home` as the default value for `controller`.</span></span> <span data-ttu-id="ef49d-291">Výchozí hodnota je použita, pokud je k dispozici v adrese URL pro parametr žádná hodnota.</span><span class="sxs-lookup"><span data-stu-id="ef49d-291">The default value is used if no value is present in the URL for the parameter.</span></span> <span data-ttu-id="ef49d-292">Kromě výchozí hodnoty, parametry trasy, může být volitelná, zadána přidáním otazník (`?`) na konec názvu parametru, jak v `id?`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-292">In addition to default values, route parameters may be optional, specified by appending a question mark (`?`) to the end of the parameter name, as in `id?`.</span></span> <span data-ttu-id="ef49d-293">Rozdíl mezi hodnotami nepovinný a výchozí parametry trasy je, že parametr trasa s výchozí hodnotou vždy vytváří hodnotu; Volitelný parametr má hodnotu pouze v případě, že je žádost o adresu URL zadat hodnotu.</span><span class="sxs-lookup"><span data-stu-id="ef49d-293">The difference between optional values and default route parameters is that a route parameter with a default value always produces a value; an optional parameter has a value only when a value is provided by the request URL.</span></span>

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="ef49d-294">Parametry trasy může mít omezení, které musí odpovídat hodnotě trasy vázán z adresy URL.</span><span class="sxs-lookup"><span data-stu-id="ef49d-294">Route parameters may have constraints, which must match the route value bound from the URL.</span></span> <span data-ttu-id="ef49d-295">Přidání dvojtečkou (`:`) a název omezení, určuje název parametru trasy *vložené omezení* na parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-295">Adding a colon (`:`) and constraint name after the route parameter name specifies an *inline constraint* on a route parameter.</span></span> <span data-ttu-id="ef49d-296">Pokud omezení vyžaduje argumenty, jsou uzavřeny v závorkách `( )` za název omezení.</span><span class="sxs-lookup"><span data-stu-id="ef49d-296">If the constraint requires arguments, they're enclosed in parentheses `( )` after the constraint name.</span></span> <span data-ttu-id="ef49d-297">Několik vložených omezení je možné zadat tak připojení jiného dvojtečka (`:`) a název omezení.</span><span class="sxs-lookup"><span data-stu-id="ef49d-297">Multiple inline constraints can be specified by appending another colon (`:`) and constraint name.</span></span> <span data-ttu-id="ef49d-298">Název omezení a argumenty jsou předány <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> služby k vytvoření instance <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> použít při zpracování adresy URL.</span><span class="sxs-lookup"><span data-stu-id="ef49d-298">The constraint name and arguments are passed to the <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> service to create an instance of <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> to use in URL processing.</span></span> <span data-ttu-id="ef49d-299">Vyžaduje-li konstruktoru omezení služby, se už přeložit injektáž závislostí aplikace služby.</span><span class="sxs-lookup"><span data-stu-id="ef49d-299">If the constraint constructor requires services, they're resolved from dependency injection's app services.</span></span> <span data-ttu-id="ef49d-300">Například šablona trasy `blog/{article:minlength(10)}` Určuje `minlength` omezení s argumentem `10`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-300">For example, the route template `blog/{article:minlength(10)}` specifies a `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="ef49d-301">Další informace o omezení trasy a seznam omezení poskytovaného rámcem, najdete v článku [trasy referenční omezení](#route-constraint-reference) části.</span><span class="sxs-lookup"><span data-stu-id="ef49d-301">For more information on route constraints and a listing of the constraints provided by the framework, see the [Route constraint reference](#route-constraint-reference) section.</span></span>

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="ef49d-302">Parametry trasy může mít omezení, které musí odpovídat hodnotě trasy vázán z adresy URL.</span><span class="sxs-lookup"><span data-stu-id="ef49d-302">Route parameters may have constraints, which must match the route value bound from the URL.</span></span> <span data-ttu-id="ef49d-303">Přidání dvojtečkou (`:`) a název omezení, určuje název parametru trasy *vložené omezení* na parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-303">Adding a colon (`:`) and constraint name after the route parameter name specifies an *inline constraint* on a route parameter.</span></span> <span data-ttu-id="ef49d-304">Pokud omezení vyžaduje argumenty, jsou uzavřeny v závorkách `( )` za název omezení.</span><span class="sxs-lookup"><span data-stu-id="ef49d-304">If the constraint requires arguments, they're enclosed in parentheses `( )` after the constraint name.</span></span> <span data-ttu-id="ef49d-305">Několik vložených omezení je možné zadat tak připojení jiného dvojtečka (`:`) a název omezení.</span><span class="sxs-lookup"><span data-stu-id="ef49d-305">Multiple inline constraints can be specified by appending another colon (`:`) and constraint name.</span></span> <span data-ttu-id="ef49d-306">Název omezení a argumenty jsou předány <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> služby k vytvoření instance <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> použít při zpracování adresy URL.</span><span class="sxs-lookup"><span data-stu-id="ef49d-306">The constraint name and arguments are passed to the <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> service to create an instance of <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> to use in URL processing.</span></span> <span data-ttu-id="ef49d-307">Například šablona trasy `blog/{article:minlength(10)}` Určuje `minlength` omezení s argumentem `10`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-307">For example, the route template `blog/{article:minlength(10)}` specifies a `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="ef49d-308">Další informace o omezení trasy a seznam omezení poskytovaného rámcem, najdete v článku [trasy referenční omezení](#route-constraint-reference) části.</span><span class="sxs-lookup"><span data-stu-id="ef49d-308">For more information on route constraints and a listing of the constraints provided by the framework, see the [Route constraint reference](#route-constraint-reference) section.</span></span>

::: moniker-end

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="ef49d-309">Parametr transformátory, které transformují parametr na hodnotu při generování odkazů a odpovídající akce a stránky pro identifikátory URI mohou mít i parametry trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-309">Route parameters may also have parameter transformers, which transform a parameter's value when generating links and matching actions and pages to URIs.</span></span> <span data-ttu-id="ef49d-310">Jako omezení, parametr transformátory jde přidat vložený parametr trasa přidáním dvojtečkou (`:`) a název transformer za název parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-310">Like constraints, parameter transformers can be added inline to a route parameter by adding a colon (`:`) and transformer name after the route parameter name.</span></span> <span data-ttu-id="ef49d-311">Například šablona trasy `blog/{article:slugify}` Určuje `slugify` transformátoru.</span><span class="sxs-lookup"><span data-stu-id="ef49d-311">For example, the route template `blog/{article:slugify}` specifies a `slugify` transformer.</span></span>

::: moniker-end

<span data-ttu-id="ef49d-312">Následující tabulka ukazuje některé šablony trasy a jejich chování.</span><span class="sxs-lookup"><span data-stu-id="ef49d-312">The following table demonstrates some route templates and their behavior.</span></span>

| <span data-ttu-id="ef49d-313">Šablona trasy</span><span class="sxs-lookup"><span data-stu-id="ef49d-313">Route Template</span></span>                         | <span data-ttu-id="ef49d-314">Příklad porovnávání adresy URL</span><span class="sxs-lookup"><span data-stu-id="ef49d-314">Example Matching URL</span></span>  | <span data-ttu-id="ef49d-315">Poznámky</span><span class="sxs-lookup"><span data-stu-id="ef49d-315">Notes</span></span>                                                                  |
| -------------------------------------- | --------------------- | ---------------------------------------------------------------------- |
| <span data-ttu-id="ef49d-316">Dobrý den</span><span class="sxs-lookup"><span data-stu-id="ef49d-316">hello</span></span>                                  | <span data-ttu-id="ef49d-317">řetězec Ahoj</span><span class="sxs-lookup"><span data-stu-id="ef49d-317">/hello</span></span>                | <span data-ttu-id="ef49d-318">Odpovídá jen jednu cestu `/hello`</span><span class="sxs-lookup"><span data-stu-id="ef49d-318">Only matches the single path `/hello`</span></span>                                  |
| <span data-ttu-id="ef49d-319">{Stránky = Home}</span><span class="sxs-lookup"><span data-stu-id="ef49d-319">{Page=Home}</span></span>                            | /                     | <span data-ttu-id="ef49d-320">Odpovídá a nastaví `Page` do `Home`</span><span class="sxs-lookup"><span data-stu-id="ef49d-320">Matches and sets `Page` to `Home`</span></span>                                      |
| <span data-ttu-id="ef49d-321">{Stránky = Home}</span><span class="sxs-lookup"><span data-stu-id="ef49d-321">{Page=Home}</span></span>                            | <span data-ttu-id="ef49d-322">/ Kontaktu</span><span class="sxs-lookup"><span data-stu-id="ef49d-322">/Contact</span></span>              | <span data-ttu-id="ef49d-323">Odpovídá a nastaví `Page` do `Contact`</span><span class="sxs-lookup"><span data-stu-id="ef49d-323">Matches and sets `Page` to `Contact`</span></span>                                   |
| <span data-ttu-id="ef49d-324">{controller} / {action} / {id}?</span><span class="sxs-lookup"><span data-stu-id="ef49d-324">{controller}/{action}/{id?}</span></span>            | <span data-ttu-id="ef49d-325">/ / Seznam produktů</span><span class="sxs-lookup"><span data-stu-id="ef49d-325">/Products/List</span></span>        | <span data-ttu-id="ef49d-326">Mapuje `Products` kontroleru a `List` akce</span><span class="sxs-lookup"><span data-stu-id="ef49d-326">Maps to `Products` controller and `List`  action</span></span>                       |
| <span data-ttu-id="ef49d-327">{controller} / {action} / {id}?</span><span class="sxs-lookup"><span data-stu-id="ef49d-327">{controller}/{action}/{id?}</span></span>            | <span data-ttu-id="ef49d-328">/ Produkty/podrobnosti/123</span><span class="sxs-lookup"><span data-stu-id="ef49d-328">/Products/Details/123</span></span> |  <span data-ttu-id="ef49d-329">Mapuje `Products` kontroleru a `Details` akce.</span><span class="sxs-lookup"><span data-stu-id="ef49d-329">Maps to `Products` controller and  `Details` action.</span></span>  <span data-ttu-id="ef49d-330">`id` Nastavte na 123</span><span class="sxs-lookup"><span data-stu-id="ef49d-330">`id` set to 123</span></span> |
| <span data-ttu-id="ef49d-331">{controller=Home}/{action=Index}/{id?}</span><span class="sxs-lookup"><span data-stu-id="ef49d-331">{controller=Home}/{action=Index}/{id?}</span></span> | /                     |  <span data-ttu-id="ef49d-332">Mapuje `Home` kontroleru a `Index` metody. `id` se ignoruje.</span><span class="sxs-lookup"><span data-stu-id="ef49d-332">Maps to `Home` controller and `Index`  method; `id` is ignored.</span></span>       |

<span data-ttu-id="ef49d-333">Pomocí šablony je obecně nejjednodušším přístupem při směrování.</span><span class="sxs-lookup"><span data-stu-id="ef49d-333">Using a template is generally the simplest approach to routing.</span></span> <span data-ttu-id="ef49d-334">Omezení a výchozí hodnoty lze také zadat mimo šablonu trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-334">Constraints and defaults can also be specified outside the route template.</span></span>

> [!TIP]
> <span data-ttu-id="ef49d-335">Povolit [protokolování](xref:fundamentals/logging/index) zobrazíte jak součástí směrování implementací, jako například `Route`, shodovat s požadavky.</span><span class="sxs-lookup"><span data-stu-id="ef49d-335">Enable [Logging](xref:fundamentals/logging/index) to see how the built in routing implementations, such as `Route`, match requests.</span></span>

## <a name="reserved-routing-names"></a><span data-ttu-id="ef49d-336">Vyhrazené názvy směrování</span><span class="sxs-lookup"><span data-stu-id="ef49d-336">Reserved routing names</span></span>

<span data-ttu-id="ef49d-337">Následující klíčová slova jsou vyhrazené názvy a nelze jej použít jako názvy tras nebo parametry:</span><span class="sxs-lookup"><span data-stu-id="ef49d-337">The following keywords are reserved names and can't be used as route names or parameters:</span></span>

* `action`
* `area`
* `controller`
* `handler`
* `page`

## <a name="route-constraint-reference"></a><span data-ttu-id="ef49d-338">Odkaz na omezení trasy</span><span class="sxs-lookup"><span data-stu-id="ef49d-338">Route constraint reference</span></span>

<span data-ttu-id="ef49d-339">Omezení trasy provést, když `Route` má odpovídající syntaxe adresy URL příchozích a tokenizovaného cestě adresy URL do hodnoty trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-339">Route constraints execute when a `Route` has matched the syntax of the incoming URL and tokenized the URL path into route values.</span></span> <span data-ttu-id="ef49d-340">Omezení trasy obecně zkontrolovat hodnoty trasy spojený přes šablonu trasy a ujistěte se, hodnota Ano/žádné rozhodnutí o, zda se hodnota je přijatelné.</span><span class="sxs-lookup"><span data-stu-id="ef49d-340">Route constraints generally inspect the route value associated via the route template and make a yes/no decision about whether or not the value is acceptable.</span></span> <span data-ttu-id="ef49d-341">Některá omezení trasy použít data mimo hodnota trasy vzít v úvahu, jestli je možné směrovat požadavek.</span><span class="sxs-lookup"><span data-stu-id="ef49d-341">Some route constraints use data outside the route value to consider whether the request can be routed.</span></span> <span data-ttu-id="ef49d-342">Například <xref:Microsoft.AspNetCore.Routing.Constraints.HttpMethodRouteConstraint> můžete přijmout nebo odmítnout žádost založené na jeho příkaz protokolu HTTP.</span><span class="sxs-lookup"><span data-stu-id="ef49d-342">For example, the <xref:Microsoft.AspNetCore.Routing.Constraints.HttpMethodRouteConstraint> can accept or reject a request based on its HTTP verb.</span></span>

> [!WARNING]
> <span data-ttu-id="ef49d-343">Vyhněte se použití omezení pro **ověřování vstupu** protože to znamená neplatný vstup vede *404 - Nenalezeno* odpovědi namísto *400 - Chybný požadavek* s příslušná chybová zpráva.</span><span class="sxs-lookup"><span data-stu-id="ef49d-343">Avoid using constraints for **input validation** because doing so means that invalid input results in a *404 - Not Found* response instead of a *400 - Bad Request* with an appropriate error message.</span></span> <span data-ttu-id="ef49d-344">Omezení trasy se používají pro **rozlišení** mezi podobné trasy, není k ověření vstupů pro konkrétní trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-344">Route constraints are used to **disambiguate** between similar routes, not to validate the inputs for a particular route.</span></span>

<span data-ttu-id="ef49d-345">Následující tabulka ukazuje některá omezení trasy a jejich očekávané chování.</span><span class="sxs-lookup"><span data-stu-id="ef49d-345">The following table demonstrates some route constraints and their expected behavior.</span></span>

| <span data-ttu-id="ef49d-346">omezení</span><span class="sxs-lookup"><span data-stu-id="ef49d-346">constraint</span></span> | <span data-ttu-id="ef49d-347">Příklad</span><span class="sxs-lookup"><span data-stu-id="ef49d-347">Example</span></span> | <span data-ttu-id="ef49d-348">Příklad shody</span><span class="sxs-lookup"><span data-stu-id="ef49d-348">Example Matches</span></span> | <span data-ttu-id="ef49d-349">Poznámky</span><span class="sxs-lookup"><span data-stu-id="ef49d-349">Notes</span></span> |
| ---------- | ------- | --------------- | ----- |
| `int` | `{id:int}` | <span data-ttu-id="ef49d-350">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="ef49d-350">`123456789`, `-123456789`</span></span>  | <span data-ttu-id="ef49d-351">Odpovídá jakémukoliv celému číslu</span><span class="sxs-lookup"><span data-stu-id="ef49d-351">Matches any integer</span></span> |
| `bool` | `{active:bool}` | <span data-ttu-id="ef49d-352">`true`, `FALSE`</span><span class="sxs-lookup"><span data-stu-id="ef49d-352">`true`, `FALSE`</span></span> | <span data-ttu-id="ef49d-353">Odpovídá `true` nebo `false` (velká a malá písmena)</span><span class="sxs-lookup"><span data-stu-id="ef49d-353">Matches `true` or `false` (case-insensitive)</span></span> |
| `datetime` | `{dob:datetime}` | <span data-ttu-id="ef49d-354">`2016-12-31`, `2016-12-31 7:32pm`</span><span class="sxs-lookup"><span data-stu-id="ef49d-354">`2016-12-31`, `2016-12-31 7:32pm`</span></span>  | <span data-ttu-id="ef49d-355">Odpovídá platný `DateTime` hodnotu (v invariantní jazykové verzi - zobrazí upozornění)</span><span class="sxs-lookup"><span data-stu-id="ef49d-355">Matches a valid `DateTime` value (in the invariant culture - see warning)</span></span> |
| `decimal` | `{price:decimal}` | <span data-ttu-id="ef49d-356">`49.99`, `-1,000.01`</span><span class="sxs-lookup"><span data-stu-id="ef49d-356">`49.99`, `-1,000.01`</span></span> | <span data-ttu-id="ef49d-357">Odpovídá platný `decimal` hodnotu (v invariantní jazykové verzi - zobrazí upozornění)</span><span class="sxs-lookup"><span data-stu-id="ef49d-357">Matches a valid `decimal` value (in the invariant culture - see warning)</span></span> |
| `double` | `{weight:double}` | <span data-ttu-id="ef49d-358">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="ef49d-358">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="ef49d-359">Odpovídá platný `double` hodnotu (v invariantní jazykové verzi - zobrazí upozornění)</span><span class="sxs-lookup"><span data-stu-id="ef49d-359">Matches a valid `double` value (in the invariant culture - see warning)</span></span> |
| `float` | `{weight:float}` | <span data-ttu-id="ef49d-360">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="ef49d-360">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="ef49d-361">Odpovídá platný `float` hodnotu (v invariantní jazykové verzi - zobrazí upozornění)</span><span class="sxs-lookup"><span data-stu-id="ef49d-361">Matches a valid `float` value (in the invariant culture - see warning)</span></span> |
| `guid` | `{id:guid}` | <span data-ttu-id="ef49d-362">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span><span class="sxs-lookup"><span data-stu-id="ef49d-362">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span></span> | <span data-ttu-id="ef49d-363">Odpovídá platný `Guid` hodnota</span><span class="sxs-lookup"><span data-stu-id="ef49d-363">Matches a valid `Guid` value</span></span> |
| `long` | `{ticks:long}` | <span data-ttu-id="ef49d-364">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="ef49d-364">`123456789`, `-123456789`</span></span> | <span data-ttu-id="ef49d-365">Odpovídá platný `long` hodnota</span><span class="sxs-lookup"><span data-stu-id="ef49d-365">Matches a valid `long` value</span></span> |
| `minlength(value)` | `{username:minlength(4)}` | `Rick` | <span data-ttu-id="ef49d-366">Řetězec musí mít aspoň 4 znaky</span><span class="sxs-lookup"><span data-stu-id="ef49d-366">String must be at least 4 characters</span></span> |
| `maxlength(value)` | `{filename:maxlength(8)}` | `Richard` | <span data-ttu-id="ef49d-367">Řetězec musí obsahovat více než 8 znaků</span><span class="sxs-lookup"><span data-stu-id="ef49d-367">String must be no more than 8 characters</span></span> |
| `length(length)` | `{filename:length(12)}` | `somefile.txt` | <span data-ttu-id="ef49d-368">Řetězec musí mít délku přesně 12 znaků.</span><span class="sxs-lookup"><span data-stu-id="ef49d-368">String must be exactly 12 characters long</span></span> |
| `length(min,max)` | `{filename:length(8,16)}` | `somefile.txt` | <span data-ttu-id="ef49d-369">Řetězec musí být aspoň 8 a ne více než 16 znaků</span><span class="sxs-lookup"><span data-stu-id="ef49d-369">String must be at least 8 and no more than 16 characters long</span></span> |
| `min(value)` | `{age:min(18)}` | `19` | <span data-ttu-id="ef49d-370">Celočíselná hodnota musí být alespoň 18</span><span class="sxs-lookup"><span data-stu-id="ef49d-370">Integer value must be at least 18</span></span> |
| `max(value)` | `{age:max(120)}` | `91` | <span data-ttu-id="ef49d-371">Celočíselná hodnota musí být více než 120</span><span class="sxs-lookup"><span data-stu-id="ef49d-371">Integer value must be no more than 120</span></span> |
| `range(min,max)` | `{age:range(18,120)}` | `91` | <span data-ttu-id="ef49d-372">Celočíselná hodnota musí být alespoň 18, ale ne více než 120</span><span class="sxs-lookup"><span data-stu-id="ef49d-372">Integer value must be at least 18 but no more than 120</span></span> |
| `alpha` | `{name:alpha}` | `Rick` | <span data-ttu-id="ef49d-373">Řetězec musí obsahovat minimálně jeden abecední znak (`a`-`z`, velká a malá písmena)</span><span class="sxs-lookup"><span data-stu-id="ef49d-373">String must consist of one or more alphabetical characters (`a`-`z`, case-insensitive)</span></span> |
| `regex(expression)` | `{ssn:regex(^\\d{{3}}-\\d{{2}}-\\d{{4}}$)}` | `123-45-6789` | <span data-ttu-id="ef49d-374">Řetězec musí odpovídat regulárnímu výrazu (viz tipy k definování regulárního výrazu)</span><span class="sxs-lookup"><span data-stu-id="ef49d-374">String must match the regular expression (see tips about defining a regular expression)</span></span> |
| `required` | `{name:required}` | `Rick` |  <span data-ttu-id="ef49d-375">Používá k vynucení, že parametr-hodnota je k dispozici během generování adresy URL</span><span class="sxs-lookup"><span data-stu-id="ef49d-375">Used to enforce that a non-parameter value is present during URL generation</span></span> |

<span data-ttu-id="ef49d-376">Více, oddělit středníkem omezení se můžou uplatnit na jeden parametr.</span><span class="sxs-lookup"><span data-stu-id="ef49d-376">Multiple, colon-delimited constraints can be applied to a single parameter.</span></span> <span data-ttu-id="ef49d-377">Například následující omezení omezuje parametr na celočíselnou hodnotu 1 nebo vyšší:</span><span class="sxs-lookup"><span data-stu-id="ef49d-377">For example, the following constraint restricts a parameter to an integer value of 1 or greater:</span></span>

```csharp
[Route("users/{id:int:min(1)}")]
public User GetUserById(int id) { }
```

> [!WARNING]
> <span data-ttu-id="ef49d-378">Směrovat omezení, která Ověřte adresu URL a jsou převedeny na typ CLR (například `int` nebo `DateTime`) vždy používejte neutrální jazykovou verzi.</span><span class="sxs-lookup"><span data-stu-id="ef49d-378">Route constraints that verify the URL and are converted to a CLR type (such as `int` or `DateTime`) always use the invariant culture.</span></span> <span data-ttu-id="ef49d-379">Tato omezení předpokládá, že adresa URL je nepřekládá.</span><span class="sxs-lookup"><span data-stu-id="ef49d-379">These constraints assume that the URL is non-localizable.</span></span> <span data-ttu-id="ef49d-380">Omezení trasy poskytované rozhraním neupravujte hodnoty uložené v hodnot trasy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-380">The framework-provided route constraints don't modify the values stored in route values.</span></span> <span data-ttu-id="ef49d-381">Všechny hodnoty trasy, které jsou analyzovány z adresy URL jsou uloženy jako řetězce.</span><span class="sxs-lookup"><span data-stu-id="ef49d-381">All route values parsed from the URL are stored as strings.</span></span> <span data-ttu-id="ef49d-382">Například `float` omezení pokusí převést hodnotu trasy na typ float, ale převedená hodnota se používá jenom k ověření, je možné převést na typ plovoucí.</span><span class="sxs-lookup"><span data-stu-id="ef49d-382">For example, the `float` constraint attempts to convert the route value to a float, but the converted value is used only to verify it can be converted to a float.</span></span>

## <a name="regular-expressions"></a><span data-ttu-id="ef49d-383">Regulární výrazy</span><span class="sxs-lookup"><span data-stu-id="ef49d-383">Regular expressions</span></span>

<span data-ttu-id="ef49d-384">Přidá rozhraní ASP.NET Core `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` regulárního výrazu konstruktoru.</span><span class="sxs-lookup"><span data-stu-id="ef49d-384">The ASP.NET Core framework adds `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` to the regular expression constructor.</span></span> <span data-ttu-id="ef49d-385">Zobrazit <xref:System.Text.RegularExpressions.RegexOptions> popis těchto členů.</span><span class="sxs-lookup"><span data-stu-id="ef49d-385">See <xref:System.Text.RegularExpressions.RegexOptions> for a description of these members.</span></span>

<span data-ttu-id="ef49d-386">Regulární výrazy pomocí oddělovače a tokeny, které jsou podobné těm, které používají služby Směrování a jazyka C#.</span><span class="sxs-lookup"><span data-stu-id="ef49d-386">Regular expressions use delimiters and tokens similar to those used by Routing and the C# language.</span></span> <span data-ttu-id="ef49d-387">Tokeny regulární výraz musí být uvozena.</span><span class="sxs-lookup"><span data-stu-id="ef49d-387">Regular expression tokens must be escaped.</span></span> <span data-ttu-id="ef49d-388">Použít regulární výraz `^\d{3}-\d{2}-\d{4}$` ve směrování, musí mít výraz `\` znaků jako zadané v `\\` v C# zdrojový soubor, který řídicí `\` řídicí znak řetězce (Pokud nepoužíváte [doslovný řetězec literály](/dotnet/csharp/language-reference/keywords/string).</span><span class="sxs-lookup"><span data-stu-id="ef49d-388">To use the regular expression `^\d{3}-\d{2}-\d{4}$` in Routing, the expression must have the `\` characters typed in as `\\` in the C# source file to escape the `\` string escape character (unless using [verbatim string literals](/dotnet/csharp/language-reference/keywords/string).</span></span> <span data-ttu-id="ef49d-389">`{`, `}`, `[`, A `]` znaků musí být uvozena zdvojeným je řídicí znaky oddělovače parametr směrování.</span><span class="sxs-lookup"><span data-stu-id="ef49d-389">The `{`, `}`, `[`, and `]` characters must be escaped by doubling them to escape the Routing parameter delimiter characters.</span></span> <span data-ttu-id="ef49d-390">Následující tabulka ukazuje regulárního výrazu a verze uvozený uvozovacím znakem.</span><span class="sxs-lookup"><span data-stu-id="ef49d-390">The table below shows a regular expression and the escaped version.</span></span>

| <span data-ttu-id="ef49d-391">Výraz</span><span class="sxs-lookup"><span data-stu-id="ef49d-391">Expression</span></span>            | <span data-ttu-id="ef49d-392">Uvozeny řídicími znaky</span><span class="sxs-lookup"><span data-stu-id="ef49d-392">Escaped</span></span>                        |
| --------------------- | ------------------------------ |
| `^\d{3}-\d{2}-\d{4}$` | `^\\d{{3}}-\\d{{2}}-\\d{{4}}$` |
| `^[a-z]{2}$`          | `^[[a-z]]{{2}}$`               |

<span data-ttu-id="ef49d-393">Regulární výrazy použité ve směrování často začínat `^` znak (shoda počáteční pozice tohoto řetězce) a končit `$` znak (shoda koncová pozice tohoto řetězce).</span><span class="sxs-lookup"><span data-stu-id="ef49d-393">Regular expressions used in routing often start with the `^` character (match starting position of the string) and end with the `$` character (match ending position of the string).</span></span> <span data-ttu-id="ef49d-394">`^` a `$` znaků Ujistěte se, že hodnota parametru celého postupu shoda s regulárním výrazem.</span><span class="sxs-lookup"><span data-stu-id="ef49d-394">The `^` and `$` characters ensure that the regular expression match the entire route parameter value.</span></span> <span data-ttu-id="ef49d-395">Bez `^` a `$` znaků, regulární výraz odpovídat jakýkoli podřetězec v rámci řetězce, který je často nežádoucí.</span><span class="sxs-lookup"><span data-stu-id="ef49d-395">Without the `^` and `$` characters, the regular expression match any substring within the string, which is often undesirable.</span></span> <span data-ttu-id="ef49d-396">Následující tabulka obsahuje příklady a vysvětluje, proč odpovídat nebo selhání tak, aby odpovídaly.</span><span class="sxs-lookup"><span data-stu-id="ef49d-396">The table below shows some examples and explains why they match or fail to match.</span></span>

| <span data-ttu-id="ef49d-397">Výraz</span><span class="sxs-lookup"><span data-stu-id="ef49d-397">Expression</span></span>   | <span data-ttu-id="ef49d-398">String</span><span class="sxs-lookup"><span data-stu-id="ef49d-398">String</span></span>    | <span data-ttu-id="ef49d-399">Shoda</span><span class="sxs-lookup"><span data-stu-id="ef49d-399">Match</span></span> | <span data-ttu-id="ef49d-400">Komentář</span><span class="sxs-lookup"><span data-stu-id="ef49d-400">Comment</span></span>               |
| ------------ | --------- |  ---- |  -------------------- |
| `[a-z]{2}`   | <span data-ttu-id="ef49d-401">Dobrý den</span><span class="sxs-lookup"><span data-stu-id="ef49d-401">hello</span></span>     | <span data-ttu-id="ef49d-402">Ano</span><span class="sxs-lookup"><span data-stu-id="ef49d-402">Yes</span></span>   | <span data-ttu-id="ef49d-403">shody podřetězců</span><span class="sxs-lookup"><span data-stu-id="ef49d-403">Substring matches</span></span>     |
| `[a-z]{2}`   | <span data-ttu-id="ef49d-404">123abc456</span><span class="sxs-lookup"><span data-stu-id="ef49d-404">123abc456</span></span> | <span data-ttu-id="ef49d-405">Ano</span><span class="sxs-lookup"><span data-stu-id="ef49d-405">Yes</span></span>   | <span data-ttu-id="ef49d-406">shody podřetězců</span><span class="sxs-lookup"><span data-stu-id="ef49d-406">Substring matches</span></span>     |
| `[a-z]{2}`   | <span data-ttu-id="ef49d-407">mz</span><span class="sxs-lookup"><span data-stu-id="ef49d-407">mz</span></span>        | <span data-ttu-id="ef49d-408">Ano</span><span class="sxs-lookup"><span data-stu-id="ef49d-408">Yes</span></span>   | <span data-ttu-id="ef49d-409">odpovídá výrazu</span><span class="sxs-lookup"><span data-stu-id="ef49d-409">Matches expression</span></span>    |
| `[a-z]{2}`   | <span data-ttu-id="ef49d-410">MZ</span><span class="sxs-lookup"><span data-stu-id="ef49d-410">MZ</span></span>        | <span data-ttu-id="ef49d-411">Ano</span><span class="sxs-lookup"><span data-stu-id="ef49d-411">Yes</span></span>   | <span data-ttu-id="ef49d-412">nerozlišuje velikost písmen</span><span class="sxs-lookup"><span data-stu-id="ef49d-412">Not case sensitive</span></span>    |
| `^[a-z]{2}$` |  <span data-ttu-id="ef49d-413">Dobrý den</span><span class="sxs-lookup"><span data-stu-id="ef49d-413">hello</span></span>    | <span data-ttu-id="ef49d-414">Ne</span><span class="sxs-lookup"><span data-stu-id="ef49d-414">No</span></span>    | <span data-ttu-id="ef49d-415">Zobrazit `^` a `$` výše</span><span class="sxs-lookup"><span data-stu-id="ef49d-415">See `^` and `$` above</span></span> |
| `^[a-z]{2}$` | <span data-ttu-id="ef49d-416">123abc456</span><span class="sxs-lookup"><span data-stu-id="ef49d-416">123abc456</span></span> | <span data-ttu-id="ef49d-417">Ne</span><span class="sxs-lookup"><span data-stu-id="ef49d-417">No</span></span>    | <span data-ttu-id="ef49d-418">Zobrazit `^` a `$` výše</span><span class="sxs-lookup"><span data-stu-id="ef49d-418">See `^` and `$` above</span></span> |

<span data-ttu-id="ef49d-419">Další informace o syntaxi regulárního výrazu, naleznete v tématu [regulárních výrazech .NET Frameworku](/dotnet/standard/base-types/regular-expression-language-quick-reference).</span><span class="sxs-lookup"><span data-stu-id="ef49d-419">For more information on regular expression syntax, see [.NET Framework Regular Expressions](/dotnet/standard/base-types/regular-expression-language-quick-reference).</span></span>

<span data-ttu-id="ef49d-420">Chcete-li omezit parametr se známou sadou možných hodnot, použijte regulární výraz.</span><span class="sxs-lookup"><span data-stu-id="ef49d-420">To constrain a parameter to a known set of possible values, use a regular expression.</span></span> <span data-ttu-id="ef49d-421">Například `{action:regex(^(list|get|create)$)}` odpovídá pouze `action` trasy hodnotu `list`, `get`, nebo `create`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-421">For example, `{action:regex(^(list|get|create)$)}` only matches the `action` route value to `list`, `get`, or `create`.</span></span> <span data-ttu-id="ef49d-422">Pokud předaná do slovníku omezení řetězec `^(list|get|create)$` je ekvivalentní.</span><span class="sxs-lookup"><span data-stu-id="ef49d-422">If passed into the constraints dictionary, the string `^(list|get|create)$` is equivalent.</span></span> <span data-ttu-id="ef49d-423">Omezení, předané ve slovníku omezení (ne vložené v rámci šablony), které neodpovídají jedno z známé omezení jsou také považovány za regulární výrazy.</span><span class="sxs-lookup"><span data-stu-id="ef49d-423">Constraints that are passed in the constraints dictionary (not inline within a template) that don't match one of the known constraints are also treated as regular expressions.</span></span>

::: moniker range=">= aspnetcore-2.2"

## <a name="parameter-transformer-reference"></a><span data-ttu-id="ef49d-424">Odkaz na parametr transformer</span><span class="sxs-lookup"><span data-stu-id="ef49d-424">Parameter transformer reference</span></span>

<span data-ttu-id="ef49d-425">Parametr transformátory:</span><span class="sxs-lookup"><span data-stu-id="ef49d-425">Parameter transformers:</span></span>

* <span data-ttu-id="ef49d-426">Při generování odkazu pro spuštění `Route`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-426">Execute when generating a link for a `Route`.</span></span>
* <span data-ttu-id="ef49d-427">Implementace `Microsoft.AspNetCore.Routing.IOutboundParameterTransformer`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-427">Implement `Microsoft.AspNetCore.Routing.IOutboundParameterTransformer`.</span></span>
* <span data-ttu-id="ef49d-428">Byli nakonfigurováni pomocí <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap>.</span><span class="sxs-lookup"><span data-stu-id="ef49d-428">Are configured using <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap>.</span></span>
* <span data-ttu-id="ef49d-429">Přijmout hodnoty trasy a transformovat ho do novou řetězcovou hodnotu.</span><span class="sxs-lookup"><span data-stu-id="ef49d-429">Take the parameter's route value and transform it to a new string value.</span></span>
* <span data-ttu-id="ef49d-430">Transformovanou hodnotou je používán vytvořený odkaz.</span><span class="sxs-lookup"><span data-stu-id="ef49d-430">The transformed value is used in the generated link.</span></span>

<span data-ttu-id="ef49d-431">Například vlastní `slugify` transformer parametr vzoru trasy `blog\{article:slugify}` s `Url.Action(new { article = "MyTestArticle" })` generuje `blog\my-test-article`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-431">For example, a custom `slugify` parameter transformer in route pattern `blog\{article:slugify}` with `Url.Action(new { article = "MyTestArticle" })` generates `blog\my-test-article`.</span></span>

<span data-ttu-id="ef49d-432">Parametr transformátory také používají rozhraní k transformaci identifikátor URI, na který se přeloží koncový bod.</span><span class="sxs-lookup"><span data-stu-id="ef49d-432">Parameter transformers are also used by frameworks to transform the URI to which an endpoint resolves.</span></span> <span data-ttu-id="ef49d-433">Například technologie ASP.NET Core MVC používá parametr transformátory Transformace hodnoty trasy slouží k přiřazení `area`, `controller`, `action`, a `page`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-433">For example, ASP.NET Core MVC uses parameter transformers to transform the route value used to match an `area`, `controller`, `action`, and `page`.</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home:slugify}/{action=Index:slugify}/{id?}");
```

<span data-ttu-id="ef49d-434">Pomocí předchozího postupu akce `SubscriptionManagementController.GetAll()` je nalezena shoda s identifikátorem URI `/subscription-management/get-all`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-434">With the preceding route, the action `SubscriptionManagementController.GetAll()` is matched with the URI `/subscription-management/get-all`.</span></span> <span data-ttu-id="ef49d-435">Parametr transformer nedojde ke změně hodnoty trasy sloužící ke generování odkazu.</span><span class="sxs-lookup"><span data-stu-id="ef49d-435">A parameter transformer doesn't change the route values used to generate a link.</span></span> <span data-ttu-id="ef49d-436">`Url.Action("GetAll", "SubscriptionManagement")` Vypíše `/subscription-management/get-all`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-436">`Url.Action("GetAll", "SubscriptionManagement")` outputs `/subscription-management/get-all`.</span></span>

<span data-ttu-id="ef49d-437">ASP.NET Core nabízí vytváření rozhraní API pro parametr transformátory pomocí generovaného trasy:</span><span class="sxs-lookup"><span data-stu-id="ef49d-437">ASP.NET Core provides API conventions for using a parameter transformers with generated routes:</span></span>

* <span data-ttu-id="ef49d-438">ASP.NET Core MVC má `Microsoft.AspNetCore.Mvc.ApplicationModels.RouteTokenTransformerConvention` konvence rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="ef49d-438">ASP.NET Core MVC has the `Microsoft.AspNetCore.Mvc.ApplicationModels.RouteTokenTransformerConvention` API convention.</span></span> <span data-ttu-id="ef49d-439">Tato konvence zadaný parametr transformer platí pro všechny trasy atributů v aplikaci.</span><span class="sxs-lookup"><span data-stu-id="ef49d-439">This convention applies a specified parameter transformer to all attribute routes in the app.</span></span> <span data-ttu-id="ef49d-440">Parametr transformer transformuje tokeny atribut trasy, jako se nahradí.</span><span class="sxs-lookup"><span data-stu-id="ef49d-440">The parameter transformer transforms attribute route tokens as they are replaced.</span></span> <span data-ttu-id="ef49d-441">Další informace najdete v tématu [transformátoru parametr použít k přizpůsobení náhradních tokenů](/aspnet/core/mvc/controllers/routing#use-a-parameter-transformer-to-customize-token-replacement).</span><span class="sxs-lookup"><span data-stu-id="ef49d-441">For more information, see [Use a parameter transformer to customize token replacement](/aspnet/core/mvc/controllers/routing#use-a-parameter-transformer-to-customize-token-replacement).</span></span>
* <span data-ttu-id="ef49d-442">Stránky Razor má `Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteTransformerConvention` konvence rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="ef49d-442">Razor pages has the `Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteTransformerConvention` API convention.</span></span> <span data-ttu-id="ef49d-443">Tato konvence zadaný parametr transformer platí pro všechny automaticky zjistí stránky Razor.</span><span class="sxs-lookup"><span data-stu-id="ef49d-443">This convention applies a specified parameter transformer to all automatically discovered Razor pages.</span></span> <span data-ttu-id="ef49d-444">Parametr transformer transformuje složku a název segmenty souborů tras stránky Razor.</span><span class="sxs-lookup"><span data-stu-id="ef49d-444">The parameter transformer transforms the folder and file name segments of Razor page routes.</span></span> <span data-ttu-id="ef49d-445">Další informace najdete v tématu [transformátoru parametr použít k přizpůsobení stránky trasy](/aspnet/core/razor-pages/razor-pages-conventions#use-a-parameter-transformer-to-customize-page-routes).</span><span class="sxs-lookup"><span data-stu-id="ef49d-445">For more information, see [Use a parameter transformer to customize page routes](/aspnet/core/razor-pages/razor-pages-conventions#use-a-parameter-transformer-to-customize-page-routes).</span></span>

::: moniker-end

## <a name="url-generation-reference"></a><span data-ttu-id="ef49d-446">Odkaz na generování adresy URL</span><span class="sxs-lookup"><span data-stu-id="ef49d-446">URL generation reference</span></span>

<span data-ttu-id="ef49d-447">Následující příklad ukazuje, jak ke generování odkazu pro trasu zadaný slovník hodnot trasy a <xref:Microsoft.AspNetCore.Routing.RouteCollection>.</span><span class="sxs-lookup"><span data-stu-id="ef49d-447">The following example shows how to generate a link to a route given a dictionary of route values and a <xref:Microsoft.AspNetCore.Routing.RouteCollection>.</span></span>

::: moniker range=">= aspnetcore-2.0"

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_Dictionary)]

::: moniker-end

::: moniker range="< aspnetcore-2.0"

[!code-csharp[](routing/samples/1.x/RoutingSample/Startup.cs?name=snippet_Dictionary)]

::: moniker-end

<span data-ttu-id="ef49d-448">`VirtualPath` Vygeneruje na konci předchozí ukázka je `/package/create/123`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-448">The `VirtualPath` generated at the end of the preceding sample is `/package/create/123`.</span></span> <span data-ttu-id="ef49d-449">Poskytuje slovníku `operation` a `id` hodnot "Sledovat balíček trasy" šablony trasy `package/{operation}/{id}`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-449">The dictionary supplies the `operation` and `id` route values of the "Track Package Route" template, `package/{operation}/{id}`.</span></span> <span data-ttu-id="ef49d-450">Podrobnosti najdete v tématu ukázkový kód v [použití směrování Middleware](#use-routing-middleware) části nebo [ukázkovou aplikaci](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples).</span><span class="sxs-lookup"><span data-stu-id="ef49d-450">For details, see the sample code in the [Use Routing Middleware](#use-routing-middleware) section or the [sample app](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples).</span></span>

<span data-ttu-id="ef49d-451">Druhý parametr `VirtualPathContext` konstruktor je kolekce *okolí hodnoty*.</span><span class="sxs-lookup"><span data-stu-id="ef49d-451">The second parameter to the `VirtualPathContext` constructor is a collection of *ambient values*.</span></span> <span data-ttu-id="ef49d-452">Ambientní hodnoty zajistí pohodlí tím, že omezíte počet hodnot, které vývojář musí zadat v rámci určité kontext požadavku.</span><span class="sxs-lookup"><span data-stu-id="ef49d-452">Ambient values provide convenience by limiting the number of values a developer must specify within a certain request context.</span></span> <span data-ttu-id="ef49d-453">Aktuální hodnoty trasy z aktuální požadavek jsou považovány za okolí hodnoty pro generování odkazů.</span><span class="sxs-lookup"><span data-stu-id="ef49d-453">The current route values of the current request are considered ambient values for link generation.</span></span> <span data-ttu-id="ef49d-454">V aplikaci ASP.NET Core MVC v `About` akce `HomeController`, není nutné zadat hodnotu trasy kontroleru propojení `Index` akce&mdash;okolí hodnotu `Home` se používá.</span><span class="sxs-lookup"><span data-stu-id="ef49d-454">In an ASP.NET Core MVC app if you are in the `About` action of the `HomeController`, you don't need to specify the controller route value to link to the `Index` action&mdash;the ambient value of `Home` is used.</span></span>

<span data-ttu-id="ef49d-455">Ambientní hodnoty, které neodpovídají parametru jsou ignorovány a okolí hodnoty jsou také ignorovány, pokud explicitně zadaná hodnota je přepsána, bude zleva doprava v adrese URL.</span><span class="sxs-lookup"><span data-stu-id="ef49d-455">Ambient values that don't match a parameter are ignored, and ambient values are also ignored when an explicitly provided value overrides it, going from left to right in the URL.</span></span>

<span data-ttu-id="ef49d-456">Hodnoty, které jsou explicitně zadat, ale které neodpovídají nic se přidají do řetězce dotazu.</span><span class="sxs-lookup"><span data-stu-id="ef49d-456">Values that are explicitly provided but which don't match anything are added to the query string.</span></span> <span data-ttu-id="ef49d-457">V následující tabulce jsou uvedeny výsledek při použití šablonu trasy `{controller}/{action}/{id?}`.</span><span class="sxs-lookup"><span data-stu-id="ef49d-457">The following table shows the result when using the route template `{controller}/{action}/{id?}`.</span></span>

| <span data-ttu-id="ef49d-458">Ambientní hodnoty</span><span class="sxs-lookup"><span data-stu-id="ef49d-458">Ambient Values</span></span>                | <span data-ttu-id="ef49d-459">Explicitní hodnoty</span><span class="sxs-lookup"><span data-stu-id="ef49d-459">Explicit Values</span></span>                   | <span data-ttu-id="ef49d-460">Výsledek</span><span class="sxs-lookup"><span data-stu-id="ef49d-460">Result</span></span>                  |
| ----------------------------- | --------------------------------- | ----------------------- |
| <span data-ttu-id="ef49d-461">kontroler = "Domů"</span><span class="sxs-lookup"><span data-stu-id="ef49d-461">controller="Home"</span></span>             | <span data-ttu-id="ef49d-462">akce = "O"</span><span class="sxs-lookup"><span data-stu-id="ef49d-462">action="About"</span></span>                    | `/Home/About`           |
| <span data-ttu-id="ef49d-463">kontroler = "Domů"</span><span class="sxs-lookup"><span data-stu-id="ef49d-463">controller="Home"</span></span>             | <span data-ttu-id="ef49d-464">kontroler = "Order", akce = "O"</span><span class="sxs-lookup"><span data-stu-id="ef49d-464">controller="Order",action="About"</span></span> | `/Order/About`          |
| <span data-ttu-id="ef49d-465">kontroler = "Home", color = "Red"</span><span class="sxs-lookup"><span data-stu-id="ef49d-465">controller="Home",color="Red"</span></span> | <span data-ttu-id="ef49d-466">akce = "O"</span><span class="sxs-lookup"><span data-stu-id="ef49d-466">action="About"</span></span>                    | `/Home/About`           |
| <span data-ttu-id="ef49d-467">kontroler = "Domů"</span><span class="sxs-lookup"><span data-stu-id="ef49d-467">controller="Home"</span></span>             | <span data-ttu-id="ef49d-468">akce = "O", barva = "Red"</span><span class="sxs-lookup"><span data-stu-id="ef49d-468">action="About",color="Red"</span></span>        | `/Home/About?color=Red` |

<span data-ttu-id="ef49d-469">Pokud trasa má výchozí hodnotu, která neodpovídá instalovanému parametr a explicitně zadat tuto hodnotu, musí odpovídat výchozí hodnota:</span><span class="sxs-lookup"><span data-stu-id="ef49d-469">If a route has a default value that doesn't correspond to a parameter and that value is explicitly provided, it must match the default value:</span></span>

```csharp
routes.MapRoute("blog_route", "blog/{*slug}",
    defaults: new { controller = "Blog", action = "ReadPost" });
```

<span data-ttu-id="ef49d-470">Generování odkazů pouze vytvoří odkaz pro tuto trasu, pokud jsou k dispozici odpovídající hodnoty pro kontroleru a akce.</span><span class="sxs-lookup"><span data-stu-id="ef49d-470">Link generation only generates a link for this route when the matching values for controller and action are provided.</span></span>
