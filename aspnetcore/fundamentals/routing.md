---
title: Směrování v ASP.NET Core
author: rick-anderson
description: Zjistěte, jak je zodpovědná za mapování požadavku identifikátory URI pro koncový bod selektory a dispatching příchozí požadavky do koncových bodů směrování ASP.NET Core.
ms.author: riande
ms.custom: mvc
ms.date: 02/13/2019
uid: fundamentals/routing
ms.openlocfilehash: 622f28f3b4348820c8781e0ba14ae5137136e797
ms.sourcegitcommit: 036d4b03fd86ca5bb378198e29ecf2704257f7b2
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/05/2019
ms.locfileid: "57346564"
---
# <a name="routing-in-aspnet-core"></a><span data-ttu-id="69269-103">Směrování v ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="69269-103">Routing in ASP.NET Core</span></span>

<span data-ttu-id="69269-104">Podle [Ryanem Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), a [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="69269-104">By [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

::: moniker range="<= aspnetcore-1.1"

<span data-ttu-id="69269-105">1.1 verzi tohoto tématu, stáhněte si [směrování v ASP.NET Core (verze 1.1, PDF)](https://webpifeed.blob.core.windows.net/webpifeed/Partners/Routing_1.x.pdf).</span><span class="sxs-lookup"><span data-stu-id="69269-105">For the 1.1 version of this topic, download [Routing in ASP.NET Core (version 1.1, PDF)](https://webpifeed.blob.core.windows.net/webpifeed/Partners/Routing_1.x.pdf).</span></span>

::: moniker-end

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="69269-106">Směrování je zodpovědná za mapování požadavku identifikátory URI pro koncový bod selektory a dispatching příchozí požadavky do koncových bodů.</span><span class="sxs-lookup"><span data-stu-id="69269-106">Routing is responsible for mapping request URIs to endpoint selectors and dispatching incoming requests to endpoints.</span></span> <span data-ttu-id="69269-107">Trasy jsou definovány v aplikaci a nakonfigurovaná při spuštění aplikace.</span><span class="sxs-lookup"><span data-stu-id="69269-107">Routes are defined in the app and configured when the app starts.</span></span> <span data-ttu-id="69269-108">Trasy můžete volitelně extrakci hodnot z adresy URL, obsaženy v požadavku a tyto hodnoty je pak možné pro zpracování požadavku.</span><span class="sxs-lookup"><span data-stu-id="69269-108">A route can optionally extract values from the URL contained in the request, and these values can then be used for request processing.</span></span> <span data-ttu-id="69269-109">Pomocí informací o směrování z aplikace, směrování je také možnost k vygenerování adres URL, které mapují na koncový bod selektorů.</span><span class="sxs-lookup"><span data-stu-id="69269-109">Using route information from the app, routing is also able to generate URLs that map to endpoint selectors.</span></span>

::: moniker-end

::: moniker range="= aspnetcore-2.2"

<span data-ttu-id="69269-110">Pokud chcete používat nejnovější směrování scénáře v ASP.NET Core 2.2, zadejte [verze kompatibility](xref:mvc/compatibility-version) MVC služby registrace v `Startup.ConfigureServices`:</span><span class="sxs-lookup"><span data-stu-id="69269-110">To use the latest routing scenarios in ASP.NET Core 2.2, specify the [compatibility version](xref:mvc/compatibility-version) to the MVC services registration in `Startup.ConfigureServices`:</span></span>

```csharp
services.AddMvc()
    .SetCompatibilityVersion(CompatibilityVersion.Version_2_2);
```

<span data-ttu-id="69269-111"><xref:Microsoft.AspNetCore.Mvc.MvcOptions.EnableEndpointRouting> Možnost určuje, pokud směrování interně používali logiky založené na koncový bod nebo <xref:Microsoft.AspNetCore.Routing.IRouter>– na základě logiky ASP.NET Core 2.1 nebo dřívější.</span><span class="sxs-lookup"><span data-stu-id="69269-111">The <xref:Microsoft.AspNetCore.Mvc.MvcOptions.EnableEndpointRouting> option determines if routing should internally use endpoint-based logic or the <xref:Microsoft.AspNetCore.Routing.IRouter>-based logic of ASP.NET Core 2.1 or earlier.</span></span> <span data-ttu-id="69269-112">Pokud je verze kompatibility nastavena na verzi 2.2 nebo vyšší, výchozí hodnota je `true`.</span><span class="sxs-lookup"><span data-stu-id="69269-112">When the compatibility version is set to 2.2 or later, the default value is `true`.</span></span> <span data-ttu-id="69269-113">Nastavte hodnotu na `false` používat předchozí logiku směrování:</span><span class="sxs-lookup"><span data-stu-id="69269-113">Set the value to `false` to use the prior routing logic:</span></span>

```csharp
// Use the routing logic of ASP.NET Core 2.1 or earlier:
services.AddMvc(options => options.EnableEndpointRouting = false)
    .SetCompatibilityVersion(CompatibilityVersion.Version_2_2);
```

<span data-ttu-id="69269-114">Další informace o <xref:Microsoft.AspNetCore.Routing.IRouter>– směrování, přečtěte si téma [ASP.NET Core 2.1 verzi tohoto tématu](/aspnet/core/fundamentals/routing?view=aspnetcore-2.1).</span><span class="sxs-lookup"><span data-stu-id="69269-114">For more information on <xref:Microsoft.AspNetCore.Routing.IRouter>-based routing, see the [ASP.NET Core 2.1 version of this topic](/aspnet/core/fundamentals/routing?view=aspnetcore-2.1).</span></span>

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="69269-115">Směrování je zodpovědná za požadavku mapování identifikátorů URI obslužné rutiny trasy a odeslání příchozích požadavků.</span><span class="sxs-lookup"><span data-stu-id="69269-115">Routing is responsible for mapping request URIs to route handlers and dispatching an incoming requests.</span></span> <span data-ttu-id="69269-116">Trasy jsou definovány v aplikaci a nakonfigurovaná při spuštění aplikace.</span><span class="sxs-lookup"><span data-stu-id="69269-116">Routes are defined in the app and configured when the app starts.</span></span> <span data-ttu-id="69269-117">Trasy můžete volitelně extrakci hodnot z adresy URL, obsaženy v požadavku a tyto hodnoty je pak možné pro zpracování požadavku.</span><span class="sxs-lookup"><span data-stu-id="69269-117">A route can optionally extract values from the URL contained in the request, and these values can then be used for request processing.</span></span> <span data-ttu-id="69269-118">Pomocí nakonfigurované trasy z aplikace, směrování je možné k vygenerování adres URL, které se mapují k obslužné rutině trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-118">Using configured routes from the app, routing is able to generate URLs that map to route handlers.</span></span>

::: moniker-end

::: moniker range="= aspnetcore-2.1"

<span data-ttu-id="69269-119">Chcete-li použít nejnovější směrování scénáře v ASP.NET Core 2.1, zadejte [verze kompatibility](xref:mvc/compatibility-version) MVC služby registrace v `Startup.ConfigureServices`:</span><span class="sxs-lookup"><span data-stu-id="69269-119">To use the latest routing scenarios in ASP.NET Core 2.1, specify the [compatibility version](xref:mvc/compatibility-version) to the MVC services registration in `Startup.ConfigureServices`:</span></span>

```csharp
services.AddMvc()
    .SetCompatibilityVersion(CompatibilityVersion.Version_2_1);
```

::: moniker-end

> [!IMPORTANT]
> <span data-ttu-id="69269-120">Tento dokument popisuje směrování nízké úrovně ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="69269-120">This document covers low-level ASP.NET Core routing.</span></span> <span data-ttu-id="69269-121">Informace o směrování ASP.NET Core MVC najdete v tématu <xref:mvc/controllers/routing>.</span><span class="sxs-lookup"><span data-stu-id="69269-121">For information on ASP.NET Core MVC routing, see <xref:mvc/controllers/routing>.</span></span> <span data-ttu-id="69269-122">Informace o konvence směrování ve stránky Razor, naleznete v tématu <xref:razor-pages/razor-pages-conventions>.</span><span class="sxs-lookup"><span data-stu-id="69269-122">For information on routing conventions in Razor Pages, see <xref:razor-pages/razor-pages-conventions>.</span></span>

<span data-ttu-id="69269-123">[Zobrazení nebo stažení ukázkového kódu](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples) ([stažení](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="69269-123">[View or download sample code](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="routing-basics"></a><span data-ttu-id="69269-124">Základní informace o směrování</span><span class="sxs-lookup"><span data-stu-id="69269-124">Routing basics</span></span>

<span data-ttu-id="69269-125">Většina aplikací by měl zvolte základní a popisný směrování schéma, tak, že jsou adresy URL čitelný a srozumitelný.</span><span class="sxs-lookup"><span data-stu-id="69269-125">Most apps should choose a basic and descriptive routing scheme so that URLs are readable and meaningful.</span></span> <span data-ttu-id="69269-126">Výchozí trasa konvenční `{controller=Home}/{action=Index}/{id?}`:</span><span class="sxs-lookup"><span data-stu-id="69269-126">The default conventional route `{controller=Home}/{action=Index}/{id?}`:</span></span>

* <span data-ttu-id="69269-127">Podporuje směrování plán basic a popisný.</span><span class="sxs-lookup"><span data-stu-id="69269-127">Supports a basic and descriptive routing scheme.</span></span>
* <span data-ttu-id="69269-128">Je vytvoření užitečného počátečního bodu pro aplikace založené na uživatelském rozhraní.</span><span class="sxs-lookup"><span data-stu-id="69269-128">Is a useful starting point for UI-based apps.</span></span>

<span data-ttu-id="69269-129">Vývojáři běžně přidat další stručném trasy k oblastem velkým provozem v specializované situacích (třeba blogu a elektronického obchodování koncových bodů) pomocí aplikace [směrováním atributů](xref:mvc/controllers/routing#attribute-routing) nebo vyhrazené konvenční trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-129">Developers commonly add additional terse routes to high-traffic areas of an app in specialized situations (for example, blog and ecommerce endpoints) using [attribute routing](xref:mvc/controllers/routing#attribute-routing) or dedicated conventional routes.</span></span>

<span data-ttu-id="69269-130">Webové rozhraní API používejte směrováním atributů pro model její funkce jako sada prostředků kde operace reprezentovány příkazy HTTP.</span><span class="sxs-lookup"><span data-stu-id="69269-130">Web APIs should use attribute routing to model the app's functionality as a set of resources where operations are represented by HTTP verbs.</span></span> <span data-ttu-id="69269-131">To znamená, že mnoho operací (například GET, POST) se stejným prostředkem logické bude používat stejnou adresu URL.</span><span class="sxs-lookup"><span data-stu-id="69269-131">This means that many operations (for example, GET, POST) on the same logical resource will use the same URL.</span></span> <span data-ttu-id="69269-132">Směrování atributů poskytuje úroveň ovládacího prvku, který je nezbytný pečlivě návrh rozložení veřejný koncový bod rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="69269-132">Attribute routing provides a level of control that's needed to carefully design an API's public endpoint layout.</span></span>

<span data-ttu-id="69269-133">Aplikace stránky Razor pomocí konvenční směrování pro obsluhu pojmenovaným prostředkům ve výchozím nastavení *stránky* složky aplikace.</span><span class="sxs-lookup"><span data-stu-id="69269-133">Razor Pages apps use default conventional routing to serve named resources in the *Pages* folder of an app.</span></span> <span data-ttu-id="69269-134">Další konvence jsou k dispozici, které umožňují přizpůsobit chování směrování pro stránky Razor.</span><span class="sxs-lookup"><span data-stu-id="69269-134">Additional conventions are available that allow you to customize Razor Pages routing behavior.</span></span> <span data-ttu-id="69269-135">Další informace naleznete v tématu <xref:razor-pages/index> a <xref:razor-pages/razor-pages-conventions>.</span><span class="sxs-lookup"><span data-stu-id="69269-135">For more information, see <xref:razor-pages/index> and <xref:razor-pages/razor-pages-conventions>.</span></span>

<span data-ttu-id="69269-136">Podpora generování adres URL umožňuje aplikaci byly vyvinuty bez pevně kódováno pomocí adres URL pro aplikaci se propojují.</span><span class="sxs-lookup"><span data-stu-id="69269-136">URL generation support allows the app to be developed without hard-coding URLs to link the app together.</span></span> <span data-ttu-id="69269-137">Tato podpora umožňuje počínaje základní konfigurace směrování a úprava směrování po aplikace prostředků rozložení je určeno.</span><span class="sxs-lookup"><span data-stu-id="69269-137">This support allows for starting with a basic routing configuration and modifying the routes after the app's resource layout is determined.</span></span>

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="69269-138">Směrování používá *koncové body* (`Endpoint`) pro reprezentaci logické koncové body v aplikaci.</span><span class="sxs-lookup"><span data-stu-id="69269-138">Routing uses *endpoints* (`Endpoint`) to represent logical endpoints in an app.</span></span>

<span data-ttu-id="69269-139">Koncový bod definuje delegáta pro zpracování požadavků a kolekci libovolného metadat.</span><span class="sxs-lookup"><span data-stu-id="69269-139">An endpoint defines a delegate to process requests and a collection of arbitrary metadata.</span></span> <span data-ttu-id="69269-140">Metadata se vyskytující aspekty používané implementovat na základě zásad a konfigurace, které jsou připojené k každý koncový bod.</span><span class="sxs-lookup"><span data-stu-id="69269-140">The metadata is used implement cross-cutting concerns based on policies and configuration attached to each endpoint.</span></span>

<span data-ttu-id="69269-141">Směrování systém má následující vlastnosti:</span><span class="sxs-lookup"><span data-stu-id="69269-141">The routing system has the following characteristics:</span></span>

* <span data-ttu-id="69269-142">Syntaxe šablony trasy se používá k definování tras s parametry tokenizovaná trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-142">Route template syntax is used to define routes with tokenized route parameters.</span></span>
* <span data-ttu-id="69269-143">Konfigurace koncového bodu konvenční – vizuální styl a atributu style je povolený.</span><span class="sxs-lookup"><span data-stu-id="69269-143">Conventional-style and attribute-style endpoint configuration is permitted.</span></span>
* <span data-ttu-id="69269-144"><xref:Microsoft.AspNetCore.Routing.IRouteConstraint> slouží k určení, zda parametr adresy URL obsahuje platnou hodnotu pro daný koncový bod omezení.</span><span class="sxs-lookup"><span data-stu-id="69269-144"><xref:Microsoft.AspNetCore.Routing.IRouteConstraint> is used to determine whether a URL parameter contains a valid value for a given endpoint constraint.</span></span>
* <span data-ttu-id="69269-145">Modely aplikace, jako jsou například stránky MVC a Razor, zaregistrujte všechny své koncové body, které mají předvídatelné provádění scénáře.</span><span class="sxs-lookup"><span data-stu-id="69269-145">App models, such as MVC/Razor Pages, register all of their endpoints, which have a predictable implementation of routing scenarios.</span></span>
* <span data-ttu-id="69269-146">Implementace směrování provádí rozhodnutí o směrování, bez ohledu na to požadovaného v kanálu middlewaru.</span><span class="sxs-lookup"><span data-stu-id="69269-146">The routing implementation makes routing decisions wherever desired in the middleware pipeline.</span></span>
* <span data-ttu-id="69269-147">Middleware, který se zobrazí po Middleware směrování, můžete si prohlédnout výsledek směrování Middleware rozhodnutí koncový bod pro daný identifikátor URI požadavku.</span><span class="sxs-lookup"><span data-stu-id="69269-147">Middleware that appears after a Routing Middleware can inspect the result of the Routing Middleware's endpoint decision for a given request URI.</span></span>
* <span data-ttu-id="69269-148">Je možné vytvořit výčet všech koncových bodů v aplikaci kdekoli v kanálu middlewaru.</span><span class="sxs-lookup"><span data-stu-id="69269-148">It's possible to enumerate all of the endpoints in the app anywhere in the middleware pipeline.</span></span>
* <span data-ttu-id="69269-149">Aplikaci můžete použít směrování k vygenerování adres URL (například pro přesměrování nebo odkazy) na základě informací o koncový bod a vyhnout pevně zakódované adresy URL, která pomáhá udržovatelnost.</span><span class="sxs-lookup"><span data-stu-id="69269-149">An app can use routing to generate URLs (for example, for redirection or links) based on endpoint information and thus avoid hard-coded URLs, which helps maintainability.</span></span>
* <span data-ttu-id="69269-150">Generování adresy URL je založená na adresy, které podporují libovolného rozšíření:</span><span class="sxs-lookup"><span data-stu-id="69269-150">URL generation is based on addresses, which support arbitrary extensibility:</span></span>

  * <span data-ttu-id="69269-151">Rozhraní API generátor odkaz (<xref:Microsoft.AspNetCore.Routing.LinkGenerator>) lze vyřešit odkudkoli pomocí [injektáž závislostí (DI)](xref:fundamentals/dependency-injection) k vygenerování adres URL.</span><span class="sxs-lookup"><span data-stu-id="69269-151">The Link Generator API (<xref:Microsoft.AspNetCore.Routing.LinkGenerator>) can be resolved anywhere using [dependency injection (DI)](xref:fundamentals/dependency-injection) to generate URLs.</span></span>
  * <span data-ttu-id="69269-152">Pokud není k dispozici prostřednictvím DI, rozhraní API odkazu generátor <xref:Microsoft.AspNetCore.Mvc.IUrlHelper> nabízí metody pro vytvoření adresy URL.</span><span class="sxs-lookup"><span data-stu-id="69269-152">Where the Link Generator API isn't available via DI, <xref:Microsoft.AspNetCore.Mvc.IUrlHelper> offers methods to build URLs.</span></span>

> [!NOTE]
> <span data-ttu-id="69269-153">S vydáním koncový bod směrování v ASP.NET Core 2.2 koncového bodu propojení je omezená na akce MVC/Razor Pages a stránky.</span><span class="sxs-lookup"><span data-stu-id="69269-153">With the release of endpoint routing in ASP.NET Core 2.2, endpoint linking is limited to MVC/Razor Pages actions and pages.</span></span> <span data-ttu-id="69269-154">Rozšíření koncového bodu propojení funkcí je plánované v budoucích verzích.</span><span class="sxs-lookup"><span data-stu-id="69269-154">The expansions of endpoint-linking capabilities is planned for future releases.</span></span>

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="69269-155">Směrování používá *trasy* (implementace <xref:Microsoft.AspNetCore.Routing.IRouter>) na:</span><span class="sxs-lookup"><span data-stu-id="69269-155">Routing uses *routes* (implementations of <xref:Microsoft.AspNetCore.Routing.IRouter>) to:</span></span>

* <span data-ttu-id="69269-156">Příchozí požadavky na mapování *trasy obslužné rutiny*.</span><span class="sxs-lookup"><span data-stu-id="69269-156">Map incoming requests to *route handlers*.</span></span>
* <span data-ttu-id="69269-157">Generování adresy URL použité v odpovědi.</span><span class="sxs-lookup"><span data-stu-id="69269-157">Generate the URLs used in responses.</span></span>

<span data-ttu-id="69269-158">Aplikace má ve výchozím nastavení jedné kolekce tras.</span><span class="sxs-lookup"><span data-stu-id="69269-158">By default, an app has a single collection of routes.</span></span> <span data-ttu-id="69269-159">Když přijde požadavek, trasy v kolekci se zpracovávají v pořadí, že existují v kolekci.</span><span class="sxs-lookup"><span data-stu-id="69269-159">When a request arrives, the routes in the collection are processed in the order that they exist in the collection.</span></span> <span data-ttu-id="69269-160">Rozhraní se pokusí porovnat adresy URL příchozích žádosti pro trasu v kolekci voláním <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> metodu na každý postup v kolekci.</span><span class="sxs-lookup"><span data-stu-id="69269-160">The framework attempts to match an incoming request URL to a route in the collection by calling the <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> method on each route in the collection.</span></span> <span data-ttu-id="69269-161">Odpověď může využívat směrování k vygenerování adres URL (například pro přesměrování nebo odkazy) na základě informací o směrování a vyhnout pevně zakódované adresy URL, která pomáhá udržovatelnost.</span><span class="sxs-lookup"><span data-stu-id="69269-161">A response can use routing to generate URLs (for example, for redirection or links) based on route information and thus avoid hard-coded URLs, which helps maintainability.</span></span>

<span data-ttu-id="69269-162">Směrování systém má následující vlastnosti:</span><span class="sxs-lookup"><span data-stu-id="69269-162">The routing system has the following characteristics:</span></span>

* <span data-ttu-id="69269-163">Syntaxe šablony trasy se používá k definování tras s parametry tokenizovaná trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-163">Route template syntax is used to define routes with tokenized route parameters.</span></span>
* <span data-ttu-id="69269-164">Konfigurace koncového bodu konvenční – vizuální styl a atributu style je povolený.</span><span class="sxs-lookup"><span data-stu-id="69269-164">Conventional-style and attribute-style endpoint configuration is permitted.</span></span>
* <span data-ttu-id="69269-165"><xref:Microsoft.AspNetCore.Routing.IRouteConstraint> slouží k určení, zda parametr adresy URL obsahuje platnou hodnotu pro daný koncový bod omezení.</span><span class="sxs-lookup"><span data-stu-id="69269-165"><xref:Microsoft.AspNetCore.Routing.IRouteConstraint> is used to determine whether a URL parameter contains a valid value for a given endpoint constraint.</span></span>
* <span data-ttu-id="69269-166">Modely aplikace, jako jsou například stránky MVC a Razor, zaregistrujte všechny jejich tras, které mají předvídatelné provádění scénáře.</span><span class="sxs-lookup"><span data-stu-id="69269-166">App models, such as MVC/Razor Pages, register all of their routes, which have a predictable implementation of routing scenarios.</span></span>
* <span data-ttu-id="69269-167">Odpověď může využívat směrování k vygenerování adres URL (například pro přesměrování nebo odkazy) na základě informací o směrování a vyhnout pevně zakódované adresy URL, která pomáhá udržovatelnost.</span><span class="sxs-lookup"><span data-stu-id="69269-167">A response can use routing to generate URLs (for example, for redirection or links) based on route information and thus avoid hard-coded URLs, which helps maintainability.</span></span>
* <span data-ttu-id="69269-168">Generování adresy URL je založená na trasy, které podporují libovolného rozšíření.</span><span class="sxs-lookup"><span data-stu-id="69269-168">URL generation is based on routes, which support arbitrary extensibility.</span></span> <span data-ttu-id="69269-169"><xref:Microsoft.AspNetCore.Mvc.IUrlHelper> poskytuje metody pro vytvoření adresy URL.</span><span class="sxs-lookup"><span data-stu-id="69269-169"><xref:Microsoft.AspNetCore.Mvc.IUrlHelper> offers methods to build URLs.</span></span>

::: moniker-end

<span data-ttu-id="69269-170">Směrování je připojen k [middleware](xref:fundamentals/middleware/index) profilace podle <xref:Microsoft.AspNetCore.Builder.RouterMiddleware> třídy.</span><span class="sxs-lookup"><span data-stu-id="69269-170">Routing is connected to the [middleware](xref:fundamentals/middleware/index) pipeline by the <xref:Microsoft.AspNetCore.Builder.RouterMiddleware> class.</span></span> <span data-ttu-id="69269-171">[ASP.NET Core MVC](xref:mvc/overview) přidá do kanálu middleware směrování jako součást konfigurace a zpracovává směrování v aplikacích MVC a stránky Razor.</span><span class="sxs-lookup"><span data-stu-id="69269-171">[ASP.NET Core MVC](xref:mvc/overview) adds routing to the middleware pipeline as part of its configuration and handles routing in MVC and Razor Pages apps.</span></span> <span data-ttu-id="69269-172">Další informace o použití směrování jako samostatné komponenty, najdete v článku [pomocí směrování Middleware](#use-routing-middleware) oddílu.</span><span class="sxs-lookup"><span data-stu-id="69269-172">To learn how to use routing as a standalone component, see the [Use Routing Middleware](#use-routing-middleware) section.</span></span>

### <a name="url-matching"></a><span data-ttu-id="69269-173">Adresa URL odpovídající</span><span class="sxs-lookup"><span data-stu-id="69269-173">URL matching</span></span>

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="69269-174">Adresa URL odpovídající je proces, ve které směrování odešle příchozí žádost o *koncový bod*.</span><span class="sxs-lookup"><span data-stu-id="69269-174">URL matching is the process by which routing dispatches an incoming request to an *endpoint*.</span></span> <span data-ttu-id="69269-175">Tento proces je na základě dat v cestě adresy URL, ale je možné rozšířit na zvažte všechna data v žádosti.</span><span class="sxs-lookup"><span data-stu-id="69269-175">This process is based on data in the URL path but can be extended to consider any data in the request.</span></span> <span data-ttu-id="69269-176">Schopnost expedovat požadavky k oddělení obslužné rutiny je klíčem k škálování velikosti a složitosti aplikace.</span><span class="sxs-lookup"><span data-stu-id="69269-176">The ability to dispatch requests to separate handlers is key to scaling the size and complexity of an app.</span></span>

<span data-ttu-id="69269-177">Směrování systému v směrování koncový bod je zodpovědná za všechny dispatching rozhodnutí.</span><span class="sxs-lookup"><span data-stu-id="69269-177">The routing system in endpoint routing is responsible for all dispatching decisions.</span></span> <span data-ttu-id="69269-178">Middleware použije zásady na základě vybraného koncového bodu, proto je důležité, že je uvnitř směrování systému k rozhodnutí může mít vliv na odesílání nebo uplatňování zásad zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="69269-178">Since the middleware applies policies based on the selected endpoint, it's important that any decision that can affect dispatching or the application of security policies is made inside the routing system.</span></span>

<span data-ttu-id="69269-179">Při provádění delegáta koncový bod, vlastnosti [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData) jsou nastaveny na odpovídající hodnoty, které jsou založené na zpracování požadavku provést doposud.</span><span class="sxs-lookup"><span data-stu-id="69269-179">When the endpoint delegate is executed, the properties of [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData) are set to appropriate values based on the request processing performed thus far.</span></span>

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="69269-180">Adresa URL odpovídající je proces, ve které směrování odešle příchozí požadavek na *obslužná rutina*.</span><span class="sxs-lookup"><span data-stu-id="69269-180">URL matching is the process by which routing dispatches an incoming request to a *handler*.</span></span> <span data-ttu-id="69269-181">Tento proces je na základě dat v cestě adresy URL, ale je možné rozšířit na zvažte všechna data v žádosti.</span><span class="sxs-lookup"><span data-stu-id="69269-181">This process is based on data in the URL path but can be extended to consider any data in the request.</span></span> <span data-ttu-id="69269-182">Schopnost expedovat požadavky k oddělení obslužné rutiny je klíčem k škálování velikosti a složitosti aplikace.</span><span class="sxs-lookup"><span data-stu-id="69269-182">The ability to dispatch requests to separate handlers is key to scaling the size and complexity of an app.</span></span>

<span data-ttu-id="69269-183">Zadejte příchozí požadavky <xref:Microsoft.AspNetCore.Builder.RouterMiddleware>, který volá <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> metodu na každý postup v pořadí.</span><span class="sxs-lookup"><span data-stu-id="69269-183">Incoming requests enter the <xref:Microsoft.AspNetCore.Builder.RouterMiddleware>, which calls the <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> method on each route in sequence.</span></span> <span data-ttu-id="69269-184"><xref:Microsoft.AspNetCore.Routing.IRouter> Vybere instanci, jestli se má *zpracování* požadavku tak, že nastavíte [RouteContext.Handler](xref:Microsoft.AspNetCore.Routing.RouteContext.Handler*) na jinou hodnotu null <xref:Microsoft.AspNetCore.Http.RequestDelegate>.</span><span class="sxs-lookup"><span data-stu-id="69269-184">The <xref:Microsoft.AspNetCore.Routing.IRouter> instance chooses whether to *handle* the request by setting the [RouteContext.Handler](xref:Microsoft.AspNetCore.Routing.RouteContext.Handler*) to a non-null <xref:Microsoft.AspNetCore.Http.RequestDelegate>.</span></span> <span data-ttu-id="69269-185">Pokud trasa nastaví obslužnou rutinu pro žádosti, směrovat zastaví zpracování a zpracovat požadavek, je vyvolána obslužná rutina.</span><span class="sxs-lookup"><span data-stu-id="69269-185">If a route sets a handler for the request, route processing stops, and the handler is invoked to process the request.</span></span> <span data-ttu-id="69269-186">Pokud se žádná obslužná rutina trasy nenajde zpracovat požadavek, middleware předá požadavek na další middleware v kanálu požadavku.</span><span class="sxs-lookup"><span data-stu-id="69269-186">If no route handler is found to process the request, the middleware hands the request off to the next middleware in the request pipeline.</span></span>

<span data-ttu-id="69269-187">Primární vstup do <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> je [RouteContext.HttpContext](xref:Microsoft.AspNetCore.Routing.RouteContext.HttpContext*) přidruženého k aktuální žádosti.</span><span class="sxs-lookup"><span data-stu-id="69269-187">The primary input to <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> is the [RouteContext.HttpContext](xref:Microsoft.AspNetCore.Routing.RouteContext.HttpContext*) associated with the current request.</span></span> <span data-ttu-id="69269-188">[RouteContext.Handler](xref:Microsoft.AspNetCore.Routing.RouteContext.Handler) a [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData*) jsou výstupy nastavit po odpovídající trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-188">The [RouteContext.Handler](xref:Microsoft.AspNetCore.Routing.RouteContext.Handler) and [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData*) are outputs set after a route is matched.</span></span>

<span data-ttu-id="69269-189">Shoda, která volá <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> také nastaví vlastnosti [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData) na odpovídající hodnoty podle doposud provádí zpracování žádostí.</span><span class="sxs-lookup"><span data-stu-id="69269-189">A match that calls <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> also sets the properties of the [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData) to appropriate values based on the request processing performed thus far.</span></span>

::: moniker-end

<span data-ttu-id="69269-190">[RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values*) je slovník *hodnot trasy* vytvořenými trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-190">[RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values*) is a dictionary of *route values* produced from the route.</span></span> <span data-ttu-id="69269-191">Tyto hodnoty jsou obvykle určeny tokenizaci adresu URL a je možné přijímat uživatelský vstup nebo další dispatching rozhodnutí v aplikaci.</span><span class="sxs-lookup"><span data-stu-id="69269-191">These values are usually determined by tokenizing the URL and can be used to accept user input or to make further dispatching decisions inside the app.</span></span>

<span data-ttu-id="69269-192">[RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) je kontejner objektů a dat o další data související s porovnávané trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-192">[RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) is a property bag of additional data related to the matched route.</span></span> <span data-ttu-id="69269-193"><xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*> jsou k dispozici pro podporu přiřazování dat o stavu se každý postup tak, aby aplikace mohly rozhodnutí založené na směrování, které odpovídá.</span><span class="sxs-lookup"><span data-stu-id="69269-193"><xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*> are provided to support associating state data with each route so that the app can make decisions based on which route matched.</span></span> <span data-ttu-id="69269-194">Tyto hodnoty jsou definovány pro vývojáře a proveďte **není** ovlivňují chování směrování žádným způsobem.</span><span class="sxs-lookup"><span data-stu-id="69269-194">These values are developer-defined and do **not** affect the behavior of routing in any way.</span></span> <span data-ttu-id="69269-195">Kromě toho hodnoty dočasně uložily v [RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) může být libovolného typu, rozdíl od [RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values), která musí být převeditelný na a z řetězce.</span><span class="sxs-lookup"><span data-stu-id="69269-195">Additionally, values stashed in [RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) can be of any type, in contrast to [RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values), which must be convertible to and from strings.</span></span>

<span data-ttu-id="69269-196">[RouteData.Routers](xref:Microsoft.AspNetCore.Routing.RouteData.Routers) je seznam tras, které účastnila úspěšně odpovídající požadavek.</span><span class="sxs-lookup"><span data-stu-id="69269-196">[RouteData.Routers](xref:Microsoft.AspNetCore.Routing.RouteData.Routers) is a list of the routes that took part in successfully matching the request.</span></span> <span data-ttu-id="69269-197">Trasy můžete vnořit do mezi sebou.</span><span class="sxs-lookup"><span data-stu-id="69269-197">Routes can be nested inside of one another.</span></span> <span data-ttu-id="69269-198"><xref:Microsoft.AspNetCore.Routing.RouteData.Routers> Vlastnost odpovídá cestě prostřednictvím logického stromu tras, z kterých vzniklo shoda.</span><span class="sxs-lookup"><span data-stu-id="69269-198">The <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> property reflects the path through the logical tree of routes that resulted in a match.</span></span> <span data-ttu-id="69269-199">Obecně platí, první položky v <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> je kolekce tras a byste měli použít pro generování adresy URL.</span><span class="sxs-lookup"><span data-stu-id="69269-199">Generally, the first item in <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> is the route collection and should be used for URL generation.</span></span> <span data-ttu-id="69269-200">Poslední položky v <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> je obslužná rutina trasy, který odpovídá.</span><span class="sxs-lookup"><span data-stu-id="69269-200">The last item in <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> is the route handler that matched.</span></span>

### <a name="url-generation"></a><span data-ttu-id="69269-201">Generování adresy URL</span><span class="sxs-lookup"><span data-stu-id="69269-201">URL generation</span></span>

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="69269-202">Generování adresy URL je proces, podle kterých směrování, můžete vytvořit cestu adresy URL na základě sady hodnot trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-202">URL generation is the process by which routing can create a URL path based on a set of route values.</span></span> <span data-ttu-id="69269-203">To umožňuje logické rozdělení mezi koncové body a adresy URL, které k nim přístup.</span><span class="sxs-lookup"><span data-stu-id="69269-203">This allows for a logical separation between your endpoints and the URLs that access them.</span></span>

<span data-ttu-id="69269-204">Koncový bod směrování zahrnuje rozhraní API generátor odkaz (<xref:Microsoft.AspNetCore.Routing.LinkGenerator>).</span><span class="sxs-lookup"><span data-stu-id="69269-204">Endpoint routing includes the Link Generator API (<xref:Microsoft.AspNetCore.Routing.LinkGenerator>).</span></span> <span data-ttu-id="69269-205"><xref:Microsoft.AspNetCore.Routing.LinkGenerator> je služba jednotlivý prvek, který můžete získat z DI.</span><span class="sxs-lookup"><span data-stu-id="69269-205"><xref:Microsoft.AspNetCore.Routing.LinkGenerator> is a singleton service that can be retrieved from DI.</span></span> <span data-ttu-id="69269-206">Rozhraní API můžete použít mimo kontext provádění požadavku.</span><span class="sxs-lookup"><span data-stu-id="69269-206">The API can be used outside of the context of an executing request.</span></span> <span data-ttu-id="69269-207">MVC <xref:Microsoft.AspNetCore.Mvc.IUrlHelper> a scénáře, které spoléhají na <xref:Microsoft.AspNetCore.Mvc.IUrlHelper>, například [pomocných rutin značek](xref:mvc/views/tag-helpers/intro), pomocné rutiny HTML, a [výsledky akce](xref:mvc/controllers/actions), pomocí generátoru odkaz lze zadat odkaz generování možností.</span><span class="sxs-lookup"><span data-stu-id="69269-207">MVC's <xref:Microsoft.AspNetCore.Mvc.IUrlHelper> and scenarios that rely on <xref:Microsoft.AspNetCore.Mvc.IUrlHelper>, such as [Tag Helpers](xref:mvc/views/tag-helpers/intro), HTML Helpers, and [Action Results](xref:mvc/controllers/actions), use the link generator to provide link generating capabilities.</span></span>

<span data-ttu-id="69269-208">Generátor odkaz je založená na konceptu *adresu* a *adres schémata*.</span><span class="sxs-lookup"><span data-stu-id="69269-208">The link generator is backed by the concept of an *address* and *address schemes*.</span></span> <span data-ttu-id="69269-209">Režim adresy je způsob určení koncových bodů, které by měly být považovány za pro generování odkazů.</span><span class="sxs-lookup"><span data-stu-id="69269-209">An address scheme is a way of determining the endpoints that should be considered for link generation.</span></span> <span data-ttu-id="69269-210">Názvu trasy a scénáře hodnoty trasy, které mnoho uživatelů znají z MVC/Razor Pages jsou implementovány jako schéma adres.</span><span class="sxs-lookup"><span data-stu-id="69269-210">For example, the route name and route values scenarios many users are familiar with from MVC/Razor Pages are implemented as an address scheme.</span></span>

<span data-ttu-id="69269-211">Generátor odkaz můžete propojit s akce MVC/Razor Pages a stránky pomocí následujících metod rozšíření:</span><span class="sxs-lookup"><span data-stu-id="69269-211">The link generator can link to MVC/Razor Pages actions and pages via the following extension methods:</span></span>

* <xref:Microsoft.AspNetCore.Routing.ControllerLinkGeneratorExtensions.GetPathByAction*>
* <xref:Microsoft.AspNetCore.Routing.ControllerLinkGeneratorExtensions.GetUriByAction*>
* <xref:Microsoft.AspNetCore.Routing.PageLinkGeneratorExtensions.GetPathByPage*>
* <xref:Microsoft.AspNetCore.Routing.PageLinkGeneratorExtensions.GetUriByPage*>

<span data-ttu-id="69269-212">Přetížení metody přijímá argumenty, které zahrnují `HttpContext`.</span><span class="sxs-lookup"><span data-stu-id="69269-212">An overload of these methods accepts arguments that include the `HttpContext`.</span></span> <span data-ttu-id="69269-213">Tyto metody jsou funkčně ekvivalentní `Url.Action` a `Url.Page` ale nabízí vyšší flexibilitu a možnosti.</span><span class="sxs-lookup"><span data-stu-id="69269-213">These methods are functionally equivalent to `Url.Action` and `Url.Page` but offer additional flexibility and options.</span></span>

<span data-ttu-id="69269-214">`GetPath*` Metody jsou nejvíc podobný `Url.Action` a `Url.Page` v tom, že se vygenerovat identifikátor URI obsahující absolutní cestu.</span><span class="sxs-lookup"><span data-stu-id="69269-214">The `GetPath*` methods are most similar to `Url.Action` and `Url.Page` in that they generate a URI containing an absolute path.</span></span> <span data-ttu-id="69269-215">`GetUri*` Metody vždy generovat absolutní identifikátor URI obsahující schématu a hostitele.</span><span class="sxs-lookup"><span data-stu-id="69269-215">The `GetUri*` methods always generate an absolute URI containing a scheme and host.</span></span> <span data-ttu-id="69269-216">Metody, které přijímají `HttpContext` vygenerovat identifikátor URI v kontextu provádění požadavku.</span><span class="sxs-lookup"><span data-stu-id="69269-216">The methods that accept an `HttpContext` generate a URI in the context of the executing request.</span></span> <span data-ttu-id="69269-217">Hodnoty okolí trasy, základní cesta adresy URL, schéma a hostitele ze žádosti o provádění se používají, pokud nejsou přepsány.</span><span class="sxs-lookup"><span data-stu-id="69269-217">The ambient route values, URL base path, scheme, and host from the executing request are used unless overridden.</span></span>

<span data-ttu-id="69269-218"><xref:Microsoft.AspNetCore.Routing.LinkGenerator> je volána s adresou.</span><span class="sxs-lookup"><span data-stu-id="69269-218"><xref:Microsoft.AspNetCore.Routing.LinkGenerator> is called with an address.</span></span> <span data-ttu-id="69269-219">Generování identifikátoru URI dojde ve dvou krocích:</span><span class="sxs-lookup"><span data-stu-id="69269-219">Generating a URI occurs in two steps:</span></span>

1. <span data-ttu-id="69269-220">Adresa je vázán na seznam koncových bodů, které odpovídají adresu.</span><span class="sxs-lookup"><span data-stu-id="69269-220">An address is bound to a list of endpoints that match the address.</span></span>
1. <span data-ttu-id="69269-221">Každý koncový bod `RoutePattern` je vyhodnocen, dokud nebude nalezen vzor cesty, který odpovídá zadané hodnoty.</span><span class="sxs-lookup"><span data-stu-id="69269-221">Each endpoint's `RoutePattern` is evaluated until a route pattern that matches the supplied values is found.</span></span> <span data-ttu-id="69269-222">Výsledný výstup je kombinovat s jinými URI částmi předaná generátoru odkaz a vrácena.</span><span class="sxs-lookup"><span data-stu-id="69269-222">The resulting output is combined with the other URI parts supplied to the link generator and returned.</span></span>

<span data-ttu-id="69269-223">Metody, které poskytuje <xref:Microsoft.AspNetCore.Routing.LinkGenerator> podporují možnosti generování standardní odkaz pro jakýkoli typ adresy.</span><span class="sxs-lookup"><span data-stu-id="69269-223">The methods provided by <xref:Microsoft.AspNetCore.Routing.LinkGenerator> support standard link generation capabilities for any type of address.</span></span> <span data-ttu-id="69269-224">Nejpohodlnější způsob použití generátoru odkaz je prostřednictvím metody rozšíření, které provádějí operace pro typ konkrétní adresu.</span><span class="sxs-lookup"><span data-stu-id="69269-224">The most convenient way to use the link generator is through extension methods that perform operations for a specific address type.</span></span>

| <span data-ttu-id="69269-225">Metody rozšíření</span><span class="sxs-lookup"><span data-stu-id="69269-225">Extension Method</span></span>   | <span data-ttu-id="69269-226">Popis</span><span class="sxs-lookup"><span data-stu-id="69269-226">Description</span></span>                                                         |
| ------------------ | ------------------------------------------------------------------- |
| <xref:Microsoft.AspNetCore.Routing.LinkGenerator.GetPathByAddress*> | <span data-ttu-id="69269-227">Vygeneruje URI absolutní cestu podle zadané hodnoty.</span><span class="sxs-lookup"><span data-stu-id="69269-227">Generates a URI with an absolute path based on the provided values.</span></span> |
| <xref:Microsoft.AspNetCore.Routing.LinkGenerator.GetUriByAddress*> | <span data-ttu-id="69269-228">Generuje absolutní identifikátor URI podle zadané hodnoty.</span><span class="sxs-lookup"><span data-stu-id="69269-228">Generates an absolute URI based on the provided values.</span></span>             |

> [!WARNING]
> <span data-ttu-id="69269-229">Věnujte pozornost následujícím důsledkům volání <xref:Microsoft.AspNetCore.Routing.LinkGenerator> metody:</span><span class="sxs-lookup"><span data-stu-id="69269-229">Pay attention to the following implications of calling <xref:Microsoft.AspNetCore.Routing.LinkGenerator> methods:</span></span>
>
> * <span data-ttu-id="69269-230">Použití `GetUri*` metody rozšíření opatrně v konfiguraci aplikace, která neověřuje `Host` záhlaví příchozích požadavků.</span><span class="sxs-lookup"><span data-stu-id="69269-230">Use `GetUri*` extension methods with caution in an app configuration that doesn't validate the `Host` header of incoming requests.</span></span> <span data-ttu-id="69269-231">Pokud `Host` neověří záhlaví příchozích požadavků, vstup nedůvěryhodné požadavku je odeslat zpět klientovi identifikátory URI v zobrazení/stránky.</span><span class="sxs-lookup"><span data-stu-id="69269-231">If the `Host` header of incoming requests isn't validated, untrusted request input can be sent back to the client in URIs in a view/page.</span></span> <span data-ttu-id="69269-232">Doporučujeme vám, že všechny aplikace v produkčním prostředí nakonfigurovat svůj server k ověření `Host` záhlaví proti známé platné hodnoty.</span><span class="sxs-lookup"><span data-stu-id="69269-232">We recommend that all production apps configure their server to validate the `Host` header against known valid values.</span></span>
>
> * <span data-ttu-id="69269-233">Použití <xref:Microsoft.AspNetCore.Routing.LinkGenerator> opatrně v middlewaru v kombinaci s `Map` nebo `MapWhen`.</span><span class="sxs-lookup"><span data-stu-id="69269-233">Use <xref:Microsoft.AspNetCore.Routing.LinkGenerator> with caution in middleware in combination with `Map` or `MapWhen`.</span></span> <span data-ttu-id="69269-234">`Map*` změní základní cesta provádění požadavku, který má vliv výstup generování odkazů.</span><span class="sxs-lookup"><span data-stu-id="69269-234">`Map*` changes the base path of the executing request, which affects the output of link generation.</span></span> <span data-ttu-id="69269-235">Všechny <xref:Microsoft.AspNetCore.Routing.LinkGenerator> rozhraní API umožňují určit základní cesta.</span><span class="sxs-lookup"><span data-stu-id="69269-235">All of the <xref:Microsoft.AspNetCore.Routing.LinkGenerator> APIs allow specifying a base path.</span></span> <span data-ttu-id="69269-236">Vždy zadejte prázdný základní cestu k vrácení zpět `Map*`uživatele vliv na generování odkazů.</span><span class="sxs-lookup"><span data-stu-id="69269-236">Always specify an empty base path to undo `Map*`'s affect on link generation.</span></span>

## <a name="differences-from-earlier-versions-of-routing"></a><span data-ttu-id="69269-237">Rozdíl oproti dřívější verze směrování</span><span class="sxs-lookup"><span data-stu-id="69269-237">Differences from earlier versions of routing</span></span>

<span data-ttu-id="69269-238">Existuje několik rozdílů mezi koncovým bodem směrování v ASP.NET Core 2.2 nebo vyšší a dřívějších verzích směrování v ASP.NET Core:</span><span class="sxs-lookup"><span data-stu-id="69269-238">A few differences exist between endpoint routing in ASP.NET Core 2.2 or later and earlier versions of routing in ASP.NET Core:</span></span>

* <span data-ttu-id="69269-239">Směrování systém koncový bod nepodporuje <xref:Microsoft.AspNetCore.Routing.IRouter>– na základě rozšíření, včetně dědění z <xref:Microsoft.AspNetCore.Routing.Route>.</span><span class="sxs-lookup"><span data-stu-id="69269-239">The endpoint routing system doesn't support <xref:Microsoft.AspNetCore.Routing.IRouter>-based extensibility, including inheriting from <xref:Microsoft.AspNetCore.Routing.Route>.</span></span>

* <span data-ttu-id="69269-240">Směrování koncový bod nepodporuje [WebApiCompatShim](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.WebApiCompatShim).</span><span class="sxs-lookup"><span data-stu-id="69269-240">Endpoint routing doesn't support [WebApiCompatShim](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.WebApiCompatShim).</span></span> <span data-ttu-id="69269-241">Použití sady 2.1 [verze kompatibility](xref:mvc/compatibility-version) (`.SetCompatibilityVersion(CompatibilityVersion.Version_2_1)`) Chcete-li pokračovat pomocí shimu kompatibility.</span><span class="sxs-lookup"><span data-stu-id="69269-241">Use the 2.1 [compatibility version](xref:mvc/compatibility-version) (`.SetCompatibilityVersion(CompatibilityVersion.Version_2_1)`) to continue using the compatibility shim.</span></span>

* <span data-ttu-id="69269-242">Koncový bod směrování s jiným chováním pro použití malých a velkých generované identifikátory URI, při použití konvenční trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-242">Endpoint Routing has different behavior for the casing of generated URIs when using conventional routes.</span></span>

  <span data-ttu-id="69269-243">Vezměte v úvahu následující výchozí šablonou trasy:</span><span class="sxs-lookup"><span data-stu-id="69269-243">Consider the following default route template:</span></span>

  ```csharp
  app.UseMvc(routes =>
  {
      routes.MapRoute("default", "{controller=Home}/{action=Index}/{id?}");
  });
  ```

  <span data-ttu-id="69269-244">Předpokládejme, že vygenerování odkazu na akci s použitím následujícího postupu:</span><span class="sxs-lookup"><span data-stu-id="69269-244">Suppose you generate a link to an action using the following route:</span></span>

  ```csharp
  var link = Url.Action("ReadPost", "blog", new { id = 17, });
  ```

  <span data-ttu-id="69269-245">S <xref:Microsoft.AspNetCore.Routing.IRouter>– směrování na základě, tento kód vygeneruje identifikátor URI sady `/blog/ReadPost/17`, který respektuje malých a velkých písmen hodnoty zadané trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-245">With <xref:Microsoft.AspNetCore.Routing.IRouter>-based routing, this code generates a URI of `/blog/ReadPost/17`, which respects the casing of the provided route value.</span></span> <span data-ttu-id="69269-246">Vytvoří koncový bod směrování v ASP.NET Core 2.2 nebo vyšší `/Blog/ReadPost/17` ("Blogu" je velkými písmeny).</span><span class="sxs-lookup"><span data-stu-id="69269-246">Endpoint routing in ASP.NET Core 2.2 or later produces `/Blog/ReadPost/17` ("Blog" is capitalized).</span></span> <span data-ttu-id="69269-247">Poskytuje koncový bod směrování `IOutboundParameterTransformer` rozhraní, které lze použít k přizpůsobení tohoto chování globálně nebo použít jiné konvence pro mapování adres URL.</span><span class="sxs-lookup"><span data-stu-id="69269-247">Endpoint routing provides the `IOutboundParameterTransformer` interface that can be used to customize this behavior globally or to apply different conventions for mapping URLs.</span></span>

  <span data-ttu-id="69269-248">Další informace najdete v tématu [odkaz na parametr transformer](#parameter-transformer-reference) oddílu.</span><span class="sxs-lookup"><span data-stu-id="69269-248">For more information, see the [Parameter transformer reference](#parameter-transformer-reference) section.</span></span>

* <span data-ttu-id="69269-249">Generování odkazů, které jsou používány MVC/Razor Pages s konvenčním trasy chová odlišně při pokusu o odkaz na kontroler nebo akce nebo stránka, která neexistuje.</span><span class="sxs-lookup"><span data-stu-id="69269-249">Link Generation used by MVC/Razor Pages with conventional routes behaves differently when attempting to link to an controller/action or page that doesn't exist.</span></span>

  <span data-ttu-id="69269-250">Vezměte v úvahu následující výchozí šablonou trasy:</span><span class="sxs-lookup"><span data-stu-id="69269-250">Consider the following default route template:</span></span>

  ```csharp
  app.UseMvc(routes =>
  {
      routes.MapRoute("default", "{controller=Home}/{action=Index}/{id?}");
  });
  ```

  <span data-ttu-id="69269-251">Předpokládejme, že vygenerování odkazu na akci s použitím výchozí šablony s následujícími možnostmi:</span><span class="sxs-lookup"><span data-stu-id="69269-251">Suppose you generate a link to an action using the default template with the following:</span></span>

  ```csharp
  var link = Url.Action("ReadPost", "Blog", new { id = 17, });
  ```

  <span data-ttu-id="69269-252">S `IRouter`– směrování na základě, výsledek je vždy `/Blog/ReadPost/17`, i když `BlogController` neexistuje nebo nemá `ReadPost` metody akce.</span><span class="sxs-lookup"><span data-stu-id="69269-252">With `IRouter`-based routing, the result is always `/Blog/ReadPost/17`, even if the `BlogController` doesn't exist or doesn't have a `ReadPost` action method.</span></span> <span data-ttu-id="69269-253">Koncový bod směrování v ASP.NET Core 2.2 nebo vyšší vytvoří podle očekávání, `/Blog/ReadPost/17` pokud existuje metoda akce.</span><span class="sxs-lookup"><span data-stu-id="69269-253">As expected, endpoint routing in ASP.NET Core 2.2 or later produces `/Blog/ReadPost/17` if the action method exists.</span></span> <span data-ttu-id="69269-254">*Ale směrování koncový bod vytvoří prázdný řetězec Pokud akce neexistuje.*</span><span class="sxs-lookup"><span data-stu-id="69269-254">*However, endpoint routing produces an empty string if the action doesn't exist.*</span></span> <span data-ttu-id="69269-255">Koncepčně koncový bod směrování nepředpokládá, že koncový bod existuje, pokud neexistuje, akce.</span><span class="sxs-lookup"><span data-stu-id="69269-255">Conceptually, endpoint routing doesn't assume that the endpoint exists if the action doesn't exist.</span></span>

* <span data-ttu-id="69269-256">Generování odkazů *okolí hodnotu zneplatnění algoritmus* při použití s směrování koncový bod chová odlišně.</span><span class="sxs-lookup"><span data-stu-id="69269-256">The link generation *ambient value invalidation algorithm* behaves differently when used with endpoint routing.</span></span>

  <span data-ttu-id="69269-257">*Zrušení okolí hodnotu* je algoritmus, který určuje, jaké hodnoty trasy z aktuálně prováděné požadavku (okolí hodnoty) lze použít v operace generování odkazů.</span><span class="sxs-lookup"><span data-stu-id="69269-257">*Ambient value invalidation* is the algorithm that decides which route values from the currently executing request (the ambient values) can be used in link generation operations.</span></span> <span data-ttu-id="69269-258">Konvenční směrování vždy neplatné hodnoty dodatečné trasy, při odkazování na různé akce.</span><span class="sxs-lookup"><span data-stu-id="69269-258">Conventional routing always invalidated extra route values when linking to a different action.</span></span> <span data-ttu-id="69269-259">Směrování atributů neměli toto chování před verzí 2.2 technologie ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="69269-259">Attribute routing didn't have this behavior prior to the release of ASP.NET Core 2.2.</span></span> <span data-ttu-id="69269-260">V dřívějších verzích sady ASP.NET Core odkazy na další akci, použijte stejné názvy parametrů trasy výsledkem chyby generování odkazu.</span><span class="sxs-lookup"><span data-stu-id="69269-260">In earlier versions of ASP.NET Core, links to another action that use the same route parameter names resulted in link generation errors.</span></span> <span data-ttu-id="69269-261">V ASP.NET Core 2.2 nebo vyšší obě formy směrování zneplatnit hodnoty při připojování ke další akci.</span><span class="sxs-lookup"><span data-stu-id="69269-261">In ASP.NET Core 2.2 or later, both forms of routing invalidate values when linking to another action.</span></span>

  <span data-ttu-id="69269-262">Zvažte následující příklad v ASP.NET Core 2.1 nebo dřívější.</span><span class="sxs-lookup"><span data-stu-id="69269-262">Consider the following example in ASP.NET Core 2.1 or earlier.</span></span> <span data-ttu-id="69269-263">Při připojování ke jinou akci (nebo jiné stránky), hodnoty trasy je možné využít v nežádoucí způsoby.</span><span class="sxs-lookup"><span data-stu-id="69269-263">When linking to another action (or another page), route values can be reused in undesirable ways.</span></span>

  <span data-ttu-id="69269-264">V */Pages/Store/Product.cshtml*:</span><span class="sxs-lookup"><span data-stu-id="69269-264">In */Pages/Store/Product.cshtml*:</span></span>

  ```cshtml
  @page "{id}"
  @Url.Page("/Login")
  ```

  <span data-ttu-id="69269-265">V */Pages/Login.cshtml*:</span><span class="sxs-lookup"><span data-stu-id="69269-265">In */Pages/Login.cshtml*:</span></span>

  ```cshtml
  @page "{id?}"
  ```

  <span data-ttu-id="69269-266">Pokud je identifikátor URI `/Store/Product/18` v ASP.NET Core 2.1 nebo starší, odkaz generovaným na stránce Store/informace podle `@Url.Page("/Login")` je `/Login/18`.</span><span class="sxs-lookup"><span data-stu-id="69269-266">If the URI is `/Store/Product/18` in ASP.NET Core 2.1 or earlier, the link generated on the Store/Info page by `@Url.Page("/Login")` is `/Login/18`.</span></span> <span data-ttu-id="69269-267">`id` Hodnotu 18 je znovu použít, i když cíl odkazu je úplně jiné části aplikace.</span><span class="sxs-lookup"><span data-stu-id="69269-267">The `id` value of 18 is reused, even though the link destination is different part of the app entirely.</span></span> <span data-ttu-id="69269-268">`id` Trasy hodnotu v kontextu `/Login` stránky je pravděpodobně hodnotu ID uživatele není hodnotou ID úložiště produktu.</span><span class="sxs-lookup"><span data-stu-id="69269-268">The `id` route value in the context of the `/Login` page is probably a user ID value, not a store product ID value.</span></span>

  <span data-ttu-id="69269-269">V koncovém bodě směrování ASP.NET Core 2.2 nebo vyšší, výsledkem je `/Login`.</span><span class="sxs-lookup"><span data-stu-id="69269-269">In endpoint routing with ASP.NET Core 2.2 or later, the result is `/Login`.</span></span> <span data-ttu-id="69269-270">Ambientní hodnoty nebudou znovu po odkazovaný cíl jinou akci nebo stránky.</span><span class="sxs-lookup"><span data-stu-id="69269-270">Ambient values aren't reused when the linked destination is a different action or page.</span></span>

* <span data-ttu-id="69269-271">Syntaxe parametru verzemi trasy: Lomítka nejsou kódování při použití double – hvězdičku (`**`) syntaxe parametr pokrývající vše.</span><span class="sxs-lookup"><span data-stu-id="69269-271">Round-tripping route parameter syntax: Forward slashes aren't encoded when using a double-asterisk (`**`) catch-all parameter syntax.</span></span>

  <span data-ttu-id="69269-272">Při generování odkazů směrování systému zakóduje hodnotu zachycené double hvězdičku (`**`) parametr pokrývající vše (například `{**myparametername}`) s výjimkou lomítka.</span><span class="sxs-lookup"><span data-stu-id="69269-272">During link generation, the routing system encodes the value captured in a double-asterisk (`**`) catch-all parameter (for example, `{**myparametername}`) except the forward slashes.</span></span> <span data-ttu-id="69269-273">Hvězdička double pokrývající vše se podporuje s `IRouter`– na základě směrování v ASP.NET Core 2.2 nebo vyšší.</span><span class="sxs-lookup"><span data-stu-id="69269-273">The double-asterisk catch-all is supported with `IRouter`-based routing in ASP.NET Core 2.2 or later.</span></span>

  <span data-ttu-id="69269-274">Parametr pokrývající vše syntaxe jednu hvězdičku v předchozích verzích technologie ASP.NET Core (`{*myparametername}`) je nadále podporován a jsou kódovány lomítka.</span><span class="sxs-lookup"><span data-stu-id="69269-274">The single asterisk catch-all parameter syntax in prior versions of ASP.NET Core (`{*myparametername}`) remains supported, and forward slashes are encoded.</span></span>

  | <span data-ttu-id="69269-275">trasy</span><span class="sxs-lookup"><span data-stu-id="69269-275">Route</span></span>              | <span data-ttu-id="69269-276">Generuje s použitím odkazu</span><span class="sxs-lookup"><span data-stu-id="69269-276">Link generated with</span></span><br>`Url.Action(new { category = "admin/products" })`&hellip; |
  | ------------------ | --------------------------------------------------------------------- |
  | `/search/{*page}`  | <span data-ttu-id="69269-277">`/search/admin%2Fproducts` (lomítko kódováním)</span><span class="sxs-lookup"><span data-stu-id="69269-277">`/search/admin%2Fproducts` (the forward slash is encoded)</span></span>             |
  | `/search/{**page}` | `/search/admin/products`                                              |

### <a name="middleware-example"></a><span data-ttu-id="69269-278">Příklad middlewaru</span><span class="sxs-lookup"><span data-stu-id="69269-278">Middleware example</span></span>

<span data-ttu-id="69269-279">V následujícím příkladu se využívá middleware <xref:Microsoft.AspNetCore.Routing.LinkGenerator> uložení rozhraní API pro vytvoření odkazu na metodu akce, která obsahuje seznam produktů.</span><span class="sxs-lookup"><span data-stu-id="69269-279">In the following example, a middleware uses the <xref:Microsoft.AspNetCore.Routing.LinkGenerator> API to create link to an action method that lists store products.</span></span> <span data-ttu-id="69269-280">Pomocí generátoru odkaz vložením do třídy a volání `GenerateLink` je k dispozici pro jakoukoli třídu v aplikaci.</span><span class="sxs-lookup"><span data-stu-id="69269-280">Using the link generator by injecting it into a class and calling `GenerateLink` is available to any class in an app.</span></span>

```csharp
using Microsoft.AspNetCore.Routing;

public class ProductsLinkMiddleware
{
    private readonly LinkGenerator _linkGenerator;

    public ProductsLinkMiddleware(RequestDelegate next, LinkGenerator linkGenerator)
    {
        _linkGenerator = linkGenerator;
    }

    public async Task InvokeAsync(HttpContext httpContext)
    {
        var url = _linkGenerator.GetPathByAction("ListProducts", "Store");

        httpContext.Response.ContentType = "text/plain";

        await httpContext.Response.WriteAsync($"Go to {url} to see our products.");
    }
}
```

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="69269-281">Generování adresy URL je proces, podle kterých směrování, můžete vytvořit cestu adresy URL na základě sady hodnot trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-281">URL generation is the process by which routing can create a URL path based on a set of route values.</span></span> <span data-ttu-id="69269-282">To umožňuje logické rozdělení mezi obslužné rutiny trasy a adresy URL, které k nim přístup.</span><span class="sxs-lookup"><span data-stu-id="69269-282">This allows for a logical separation between route handlers and the URLs that access them.</span></span>

<span data-ttu-id="69269-283">Generování adresy URL je iterativní probíhá podobně, ale začíná uživatele nebo architekturní kód volání do <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> metody kolekce tras.</span><span class="sxs-lookup"><span data-stu-id="69269-283">URL generation follows a similar iterative process, but it starts with user or framework code calling into the <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> method of the route collection.</span></span> <span data-ttu-id="69269-284">Každý *trasy* má jeho <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> metodu volat v pořadí, dokud nebude nenulovým <xref:Microsoft.AspNetCore.Routing.VirtualPathData> je vrácena.</span><span class="sxs-lookup"><span data-stu-id="69269-284">Each *route* has its <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> method called in sequence until a non-null <xref:Microsoft.AspNetCore.Routing.VirtualPathData> is returned.</span></span>

<span data-ttu-id="69269-285">Primární vstupů na <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> jsou:</span><span class="sxs-lookup"><span data-stu-id="69269-285">The primary inputs to <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> are:</span></span>

* [<span data-ttu-id="69269-286">VirtualPathContext.HttpContext</span><span class="sxs-lookup"><span data-stu-id="69269-286">VirtualPathContext.HttpContext</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.HttpContext)
* [<span data-ttu-id="69269-287">VirtualPathContext.Values</span><span class="sxs-lookup"><span data-stu-id="69269-287">VirtualPathContext.Values</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values)
* [<span data-ttu-id="69269-288">VirtualPathContext.AmbientValues</span><span class="sxs-lookup"><span data-stu-id="69269-288">VirtualPathContext.AmbientValues</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues)

<span data-ttu-id="69269-289">Trasy primárně používat hodnoty trasy podle <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values> a <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues> rozhodnout, jestli je možné generovat adresu URL a jaké hodnoty je třeba zahrnout.</span><span class="sxs-lookup"><span data-stu-id="69269-289">Routes primarily use the route values provided by <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values> and <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues> to decide whether it's possible to generate a URL and what values to include.</span></span> <span data-ttu-id="69269-290"><xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues> Sada hodnot trasy, které byly vytvořeny z odpovídajících aktuálního požadavku.</span><span class="sxs-lookup"><span data-stu-id="69269-290">The <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues> are the set of route values that were produced from matching the current request.</span></span> <span data-ttu-id="69269-291">Naproti tomu <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values> jsou hodnoty trasy, které určují, jak generovat požadovanou adresu URL pro aktuální operaci.</span><span class="sxs-lookup"><span data-stu-id="69269-291">In contrast, <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values> are the route values that specify how to generate the desired URL for the current operation.</span></span> <span data-ttu-id="69269-292"><xref:Microsoft.AspNetCore.Routing.VirtualPathContext.HttpContext> Je k dispozici v případě, že směrování by si měly opatřit služby nebo další data související s aktuálním kontextu.</span><span class="sxs-lookup"><span data-stu-id="69269-292">The <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.HttpContext> is provided in case a route should obtain services or additional data associated with the current context.</span></span>

> [!TIP]
> <span data-ttu-id="69269-293">Představte si, že [VirtualPathContext.Values](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values*) jako přepsání pro sadu [VirtualPathContext.AmbientValues](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues*).</span><span class="sxs-lookup"><span data-stu-id="69269-293">Think of [VirtualPathContext.Values](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values*) as a set of overrides for the [VirtualPathContext.AmbientValues](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues*).</span></span> <span data-ttu-id="69269-294">Generování adresy URL se pokusí znovu použít hodnoty trasy z aktuální žádosti k vygenerování adres URL pro odkazů pomocí stejného postupu nebo hodnoty trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-294">URL generation attempts to reuse route values from the current request to generate URLs for links using the same route or route values.</span></span>

<span data-ttu-id="69269-295">Výstup <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> je <xref:Microsoft.AspNetCore.Routing.VirtualPathData>.</span><span class="sxs-lookup"><span data-stu-id="69269-295">The output of <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> is a <xref:Microsoft.AspNetCore.Routing.VirtualPathData>.</span></span> <span data-ttu-id="69269-296"><xref:Microsoft.AspNetCore.Routing.VirtualPathData> je paralelní z <xref:Microsoft.AspNetCore.Routing.RouteData>.</span><span class="sxs-lookup"><span data-stu-id="69269-296"><xref:Microsoft.AspNetCore.Routing.VirtualPathData> is a parallel of <xref:Microsoft.AspNetCore.Routing.RouteData>.</span></span> <span data-ttu-id="69269-297"><xref:Microsoft.AspNetCore.Routing.VirtualPathData> obsahuje <xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath> pro výstupní adresy URL a některé další vlastnosti, které by měl nastavit trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-297"><xref:Microsoft.AspNetCore.Routing.VirtualPathData> contains the <xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath> for the output URL and some additional properties that should be set by the route.</span></span>

<span data-ttu-id="69269-298">[VirtualPathData.VirtualPath](xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath*) obsahuje vlastnost *virtuální cesta* vytvářených trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-298">The [VirtualPathData.VirtualPath](xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath*) property contains the *virtual path* produced by the route.</span></span> <span data-ttu-id="69269-299">V závislosti na potřebách budete muset cesta další zpracování.</span><span class="sxs-lookup"><span data-stu-id="69269-299">Depending on your needs, you may need to process the path further.</span></span> <span data-ttu-id="69269-300">Pokud chcete vykreslovat vygenerovaná adresa URL ve formátu HTML, předřaďte základní cesty aplikace.</span><span class="sxs-lookup"><span data-stu-id="69269-300">If you want to render the generated URL in HTML, prepend the base path of the app.</span></span>

<span data-ttu-id="69269-301">[VirtualPathData.Router](xref:Microsoft.AspNetCore.Routing.VirtualPathData.Router*) je odkaz na trasy, která adresa URL se úspěšně vygeneroval.</span><span class="sxs-lookup"><span data-stu-id="69269-301">The [VirtualPathData.Router](xref:Microsoft.AspNetCore.Routing.VirtualPathData.Router*) is a reference to the route that successfully generated the URL.</span></span>

<span data-ttu-id="69269-302">[VirtualPathData.DataTokens](xref:Microsoft.AspNetCore.Routing.VirtualPathData.DataTokens*) vlastnosti je slovník další data související s trasy, která vygenerovala adresa URL.</span><span class="sxs-lookup"><span data-stu-id="69269-302">The [VirtualPathData.DataTokens](xref:Microsoft.AspNetCore.Routing.VirtualPathData.DataTokens*) properties is a dictionary of additional data related to the route that generated the URL.</span></span> <span data-ttu-id="69269-303">Toto je rovnoběžky [RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*).</span><span class="sxs-lookup"><span data-stu-id="69269-303">This is the parallel of [RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*).</span></span>

::: moniker-end

### <a name="create-routes"></a><span data-ttu-id="69269-304">Vytvoření tras</span><span class="sxs-lookup"><span data-stu-id="69269-304">Create routes</span></span>

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="69269-305">Směrování poskytuje <xref:Microsoft.AspNetCore.Routing.Route> třídu jako standardní implementace <xref:Microsoft.AspNetCore.Routing.IRouter>.</span><span class="sxs-lookup"><span data-stu-id="69269-305">Routing provides the <xref:Microsoft.AspNetCore.Routing.Route> class as the standard implementation of <xref:Microsoft.AspNetCore.Routing.IRouter>.</span></span> <span data-ttu-id="69269-306"><xref:Microsoft.AspNetCore.Routing.Route> používá *šablonu trasy* syntaxe pro definování vzory tak, aby odpovídala cestě adresy URL při <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> je volána.</span><span class="sxs-lookup"><span data-stu-id="69269-306"><xref:Microsoft.AspNetCore.Routing.Route> uses the *route template* syntax to define patterns to match against the URL path when <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> is called.</span></span> <span data-ttu-id="69269-307"><xref:Microsoft.AspNetCore.Routing.Route> používá stejnou šablonu trasy pro generování adresy URL při <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> je volána.</span><span class="sxs-lookup"><span data-stu-id="69269-307"><xref:Microsoft.AspNetCore.Routing.Route> uses the same route template to generate a URL when <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> is called.</span></span>

::: moniker-end

<span data-ttu-id="69269-308">Většina aplikací vytvářet trasy voláním <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> nebo některou z podobných rozšiřující metody definované v <xref:Microsoft.AspNetCore.Routing.IRouteBuilder>.</span><span class="sxs-lookup"><span data-stu-id="69269-308">Most apps create routes by calling <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> or one of the similar extension methods defined on <xref:Microsoft.AspNetCore.Routing.IRouteBuilder>.</span></span> <span data-ttu-id="69269-309">Některé z <xref:Microsoft.AspNetCore.Routing.IRouteBuilder> rozšiřující metody vytvoření instance <xref:Microsoft.AspNetCore.Routing.Route> a přidejte ho do kolekce tras.</span><span class="sxs-lookup"><span data-stu-id="69269-309">Any of the <xref:Microsoft.AspNetCore.Routing.IRouteBuilder> extension methods create an instance of <xref:Microsoft.AspNetCore.Routing.Route> and add it to the route collection.</span></span>

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="69269-310"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> nepřijímá parametr obslužná rutina trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-310"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> doesn't accept a route handler parameter.</span></span> <span data-ttu-id="69269-311"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> Přidá trasy, které jsou zpracovávány pouze <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span><span class="sxs-lookup"><span data-stu-id="69269-311"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> only adds routes that are handled by the <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span></span> <span data-ttu-id="69269-312">Další informace o směrování v aplikaci MVC najdete v tématu <xref:mvc/controllers/routing>.</span><span class="sxs-lookup"><span data-stu-id="69269-312">To learn more about routing in MVC, see <xref:mvc/controllers/routing>.</span></span>

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="69269-313"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> nepřijímá parametr obslužná rutina trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-313"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> doesn't accept a route handler parameter.</span></span> <span data-ttu-id="69269-314"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> Přidá trasy, které jsou zpracovávány pouze <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span><span class="sxs-lookup"><span data-stu-id="69269-314"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> only adds routes that are handled by the <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span></span> <span data-ttu-id="69269-315">Je výchozí obslužnou rutinu `IRouter`, a obslužnou rutinu nemusí zpracovávat žádosti.</span><span class="sxs-lookup"><span data-stu-id="69269-315">The default handler is an `IRouter`, and the handler might not handle the request.</span></span> <span data-ttu-id="69269-316">ASP.NET Core MVC je třeba typicky nakonfigurován jako výchozí popisovač, který zpracovává pouze požadavky, které odpovídají k dispozici kontroleru a akce.</span><span class="sxs-lookup"><span data-stu-id="69269-316">For example, ASP.NET Core MVC is typically configured as a default handler that only handles requests that match an available controller and action.</span></span> <span data-ttu-id="69269-317">Další informace o směrování v aplikaci MVC najdete v tématu <xref:mvc/controllers/routing>.</span><span class="sxs-lookup"><span data-stu-id="69269-317">To learn more about routing in MVC, see <xref:mvc/controllers/routing>.</span></span>

::: moniker-end

<span data-ttu-id="69269-318">Následující příklad kódu je příkladem <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> volání používá typické definice trasy ASP.NET Core MVC:</span><span class="sxs-lookup"><span data-stu-id="69269-318">The following code example is an example of a <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> call used by a typical ASP.NET Core MVC route definition:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="69269-319">Tato šablona odpovídá cesty adresy URL a extrahuje hodnoty trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-319">This template matches a URL path and extracts the route values.</span></span> <span data-ttu-id="69269-320">Například cesta `/Products/Details/17` následující hodnoty trasy generuje: `{ controller = Products, action = Details, id = 17 }`.</span><span class="sxs-lookup"><span data-stu-id="69269-320">For example, the path `/Products/Details/17` generates the following route values: `{ controller = Products, action = Details, id = 17 }`.</span></span>

<span data-ttu-id="69269-321">Hodnoty trasy jsou určeny rozdělení cestě adresy URL do segmentů a odpovídající každý segment s *trasy parametr* název v šabloně trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-321">Route values are determined by splitting the URL path into segments and matching each segment with the *route parameter* name in the route template.</span></span> <span data-ttu-id="69269-322">Jsou pojmenované parametry trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-322">Route parameters are named.</span></span> <span data-ttu-id="69269-323">Parametry definované uzavřením názvu parametru ve složených závorkách `{ ... }`.</span><span class="sxs-lookup"><span data-stu-id="69269-323">The parameters defined by enclosing the parameter name in braces `{ ... }`.</span></span>

<span data-ttu-id="69269-324">Předchozí šablona může také odpovídat cesty URL `/` a vytvářet hodnoty `{ controller = Home, action = Index }`.</span><span class="sxs-lookup"><span data-stu-id="69269-324">The preceding template could also match the URL path `/` and produce the values `{ controller = Home, action = Index }`.</span></span> <span data-ttu-id="69269-325">K tomu dochází, `{controller}` a `{action}` trasy parametry mají výchozí hodnoty a `id` trasy parametr je nepovinný.</span><span class="sxs-lookup"><span data-stu-id="69269-325">This occurs because the `{controller}` and `{action}` route parameters have default values and the `id` route parameter is optional.</span></span> <span data-ttu-id="69269-326">Znaménko rovná se (`=`) následován hodnotou po definuje výchozí hodnotu pro parametr název parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-326">An equals sign (`=`) followed by a value after the route parameter name defines a default value for the parameter.</span></span> <span data-ttu-id="69269-327">Otazník (`?`) po definuje volitelný parametr název parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-327">A question mark (`?`) after the route parameter name defines an optional parameter.</span></span>

<span data-ttu-id="69269-328">Parametry s výchozí hodnotou směrování *vždy* vygenerování hodnoty trasy, pokud trasa odpovídá.</span><span class="sxs-lookup"><span data-stu-id="69269-328">Route parameters with a default value *always* produce a route value when the route matches.</span></span> <span data-ttu-id="69269-329">Volitelné parametry není výsledkem hodnota trasy, pokud se žádný odpovídající segment cesty adresy URL.</span><span class="sxs-lookup"><span data-stu-id="69269-329">Optional parameters don't produce a route value if there was no corresponding URL path segment.</span></span> <span data-ttu-id="69269-330">Najdete v článku [trasy referenčními informacemi k šablonám](#route-template-reference) najdete důkladné popis scénáře šablonu trasy a syntaxe.</span><span class="sxs-lookup"><span data-stu-id="69269-330">See the [Route template reference](#route-template-reference) section for a thorough description of route template scenarios and syntax.</span></span>

<span data-ttu-id="69269-331">V následujícím příkladu, definice parametru trasy `{id:int}` definuje [trasy omezení](#route-constraint-reference) pro `id` směrování parametru:</span><span class="sxs-lookup"><span data-stu-id="69269-331">In the following example, the route parameter definition `{id:int}` defines a [route constraint](#route-constraint-reference) for the `id` route parameter:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id:int}");
```

<span data-ttu-id="69269-332">Tato šablona odpovídá cesty adresy URL jako `/Products/Details/17` , ale ne `/Products/Details/Apples`.</span><span class="sxs-lookup"><span data-stu-id="69269-332">This template matches a URL path like `/Products/Details/17` but not `/Products/Details/Apples`.</span></span> <span data-ttu-id="69269-333">Implementace omezení trasy <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> a hodnoty trasy k ověření je zkontrolovat.</span><span class="sxs-lookup"><span data-stu-id="69269-333">Route constraints implement <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> and inspect route values to verify them.</span></span> <span data-ttu-id="69269-334">V tomto příkladu je hodnota trasy `id` musí být převeditelný na celé číslo.</span><span class="sxs-lookup"><span data-stu-id="69269-334">In this example, the route value `id` must be convertible to an integer.</span></span> <span data-ttu-id="69269-335">V tématu [trasy omezení referenční](#route-constraint-reference) vysvětlení poskytovaného rámcem omezení trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-335">See [route-constraint-reference](#route-constraint-reference) for an explanation of route constraints provided by the framework.</span></span>

<span data-ttu-id="69269-336">Další přetížení <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> přijmout hodnoty pro `constraints`, `dataTokens`, a `defaults`.</span><span class="sxs-lookup"><span data-stu-id="69269-336">Additional overloads of <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> accept values for `constraints`, `dataTokens`, and `defaults`.</span></span> <span data-ttu-id="69269-337">Typické použití těchto parametrů je předat anonymně typovaných objektů, kde názvy vlastností anonymních typů shody směrovat názvy parametrů.</span><span class="sxs-lookup"><span data-stu-id="69269-337">The typical usage of these parameters is to pass an anonymously typed object, where the property names of the anonymous type match route parameter names.</span></span>

<span data-ttu-id="69269-338">Následující <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> příklady vytvořit ekvivalentní trasy:</span><span class="sxs-lookup"><span data-stu-id="69269-338">The following <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> examples create equivalent routes:</span></span>

```csharp
routes.MapRoute(
    name: "default_route",
    template: "{controller}/{action}/{id?}",
    defaults: new { controller = "Home", action = "Index" });

routes.MapRoute(
    name: "default_route",
    template: "{controller=Home}/{action=Index}/{id?}");
```

> [!TIP]
> <span data-ttu-id="69269-339">Vložená syntaxe pro definování omezení a výchozích hodnot může být vhodné pro jednoduché trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-339">The inline syntax for defining constraints and defaults can be convenient for simple routes.</span></span> <span data-ttu-id="69269-340">Existují ale scénáře, jako jsou tokeny dat, nepodporované vložená syntaxe.</span><span class="sxs-lookup"><span data-stu-id="69269-340">However, there are scenarios, such as data tokens, that aren't supported by inline syntax.</span></span>

<span data-ttu-id="69269-341">Následující příklad ukazuje několik dalších scénářů:</span><span class="sxs-lookup"><span data-stu-id="69269-341">The following example demonstrates a few additional scenarios:</span></span>

::: moniker range=">= aspnetcore-2.2"

```csharp
routes.MapRoute(
    name: "blog",
    template: "Blog/{**article}",
    defaults: new { controller = "Blog", action = "ReadArticle" });
```

<span data-ttu-id="69269-342">Odpovídá předchozí šablonu cesty adresy URL jako `/Blog/All-About-Routing/Introduction` a extrahuje hodnoty `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span><span class="sxs-lookup"><span data-stu-id="69269-342">The preceding template matches a URL path like `/Blog/All-About-Routing/Introduction` and extracts the values `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span></span> <span data-ttu-id="69269-343">Směrování výchozí hodnoty pro `controller` a `action` jsou vytvářeny trasy, i když neexistují žádné odpovídající trasy parametry v šabloně.</span><span class="sxs-lookup"><span data-stu-id="69269-343">The default route values for `controller` and `action` are produced by the route even though there are no corresponding route parameters in the template.</span></span> <span data-ttu-id="69269-344">V šabloně postupu lze zadat výchozí hodnoty.</span><span class="sxs-lookup"><span data-stu-id="69269-344">Default values can be specified in the route template.</span></span> <span data-ttu-id="69269-345">`article` Parametr trasa je definován jako *pokrývající vše* podle vzhledu hvězdičku double (`**`) před název parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-345">The `article` route parameter is defined as a *catch-all* by the appearance of an double asterisk (`**`) before the route parameter name.</span></span> <span data-ttu-id="69269-346">Parametry trasy pokrývající vše zachycení zbývající část cesty URL a můžete také hledat shody prázdný řetězec.</span><span class="sxs-lookup"><span data-stu-id="69269-346">Catch-all route parameters capture the remainder of the URL path and can also match the empty string.</span></span>

::: moniker-end

::: moniker range="< aspnetcore-2.2"

```csharp
routes.MapRoute(
    name: "blog",
    template: "Blog/{*article}",
    defaults: new { controller = "Blog", action = "ReadArticle" });
```

<span data-ttu-id="69269-347">Odpovídá předchozí šablonu cesty adresy URL jako `/Blog/All-About-Routing/Introduction` a extrahuje hodnoty `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span><span class="sxs-lookup"><span data-stu-id="69269-347">The preceding template matches a URL path like `/Blog/All-About-Routing/Introduction` and extracts the values `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span></span> <span data-ttu-id="69269-348">Směrování výchozí hodnoty pro `controller` a `action` jsou vytvářeny trasy, i když neexistují žádné odpovídající trasy parametry v šabloně.</span><span class="sxs-lookup"><span data-stu-id="69269-348">The default route values for `controller` and `action` are produced by the route even though there are no corresponding route parameters in the template.</span></span> <span data-ttu-id="69269-349">V šabloně postupu lze zadat výchozí hodnoty.</span><span class="sxs-lookup"><span data-stu-id="69269-349">Default values can be specified in the route template.</span></span> <span data-ttu-id="69269-350">`article` Parametr trasa je definován jako *pokrývající vše* podle vzhledu hvězdičku (`*`) před název parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-350">The `article` route parameter is defined as a *catch-all* by the appearance of an asterisk (`*`) before the route parameter name.</span></span> <span data-ttu-id="69269-351">Parametry trasy pokrývající vše zachycení zbývající část cesty URL a můžete také hledat shody prázdný řetězec.</span><span class="sxs-lookup"><span data-stu-id="69269-351">Catch-all route parameters capture the remainder of the URL path and can also match the empty string.</span></span>

::: moniker-end

<span data-ttu-id="69269-352">Následující příklad přidá tokeny omezení a data trasy:</span><span class="sxs-lookup"><span data-stu-id="69269-352">The following example adds route constraints and data tokens:</span></span>

```csharp
routes.MapRoute(
    name: "us_english_products",
    template: "en-US/Products/{id}",
    defaults: new { controller = "Products", action = "Details" },
    constraints: new { id = new IntRouteConstraint() },
    dataTokens: new { locale = "en-US" });
```

<span data-ttu-id="69269-353">Odpovídá předchozí šablonu cesty adresy URL jako `/en-US/Products/5` a extrahuje hodnoty `{ controller = Products, action = Details, id = 5 }` a tokeny dat `{ locale = en-US }`.</span><span class="sxs-lookup"><span data-stu-id="69269-353">The preceding template matches a URL path like `/en-US/Products/5` and extracts the values `{ controller = Products, action = Details, id = 5 }` and the data tokens `{ locale = en-US }`.</span></span>

![Tokeny Windows místních hodnot](routing/_static/tokens.png)

### <a name="route-class-url-generation"></a><span data-ttu-id="69269-355">Generování adresy URL trasy třídy</span><span class="sxs-lookup"><span data-stu-id="69269-355">Route class URL generation</span></span>

<span data-ttu-id="69269-356"><xref:Microsoft.AspNetCore.Routing.Route> Třídy můžete také provádět generování adresy URL kombinováním sadu hodnot trasy s jeho šablonu trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-356">The <xref:Microsoft.AspNetCore.Routing.Route> class can also perform URL generation by combining a set of route values with its route template.</span></span> <span data-ttu-id="69269-357">Toto je logicky procesu zpětné odpovídajících cestě adresy URL.</span><span class="sxs-lookup"><span data-stu-id="69269-357">This is logically the reverse process of matching the URL path.</span></span>

> [!TIP]
> <span data-ttu-id="69269-358">Abyste lépe pochopili generování adresy URL, představte si, jakou adresu URL, které chcete generovat a potom rozmyslete si, jak šablonu trasy odpovídají tuto adresu URL.</span><span class="sxs-lookup"><span data-stu-id="69269-358">To better understand URL generation, imagine what URL you want to generate and then think about how a route template would match that URL.</span></span> <span data-ttu-id="69269-359">Hodnoty by bylo vytvořeno?</span><span class="sxs-lookup"><span data-stu-id="69269-359">What values would be produced?</span></span> <span data-ttu-id="69269-360">Jedná se o ekvivalent hrubý fungování generování adresy URL <xref:Microsoft.AspNetCore.Routing.Route> třídy.</span><span class="sxs-lookup"><span data-stu-id="69269-360">This is the rough equivalent of how URL generation works in the <xref:Microsoft.AspNetCore.Routing.Route> class.</span></span>

<span data-ttu-id="69269-361">Následující příklad používá obecné výchozí trasa ASP.NET Core MVC:</span><span class="sxs-lookup"><span data-stu-id="69269-361">The following example uses a general ASP.NET Core MVC default route:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="69269-362">S hodnotami trasy `{ controller = Products, action = List }`, adresu URL `/Products/List` je generován.</span><span class="sxs-lookup"><span data-stu-id="69269-362">With the route values `{ controller = Products, action = List }`, the URL `/Products/List` is generated.</span></span> <span data-ttu-id="69269-363">Hodnoty trasy jsou substituovány za parametry odpovídající trasy k vytvoření cesty adresy URL.</span><span class="sxs-lookup"><span data-stu-id="69269-363">The route values are substituted for the corresponding route parameters to form the URL path.</span></span> <span data-ttu-id="69269-364">Protože `id` je volitelný parametr trasa, adresa URL se úspěšně vygeneroval bez hodnoty pro `id`.</span><span class="sxs-lookup"><span data-stu-id="69269-364">Since `id` is an optional route parameter, the URL is successfully generated without a value for `id`.</span></span>

<span data-ttu-id="69269-365">S hodnotami trasy `{ controller = Home, action = Index }`, adresu URL `/` je generován.</span><span class="sxs-lookup"><span data-stu-id="69269-365">With the route values `{ controller = Home, action = Index }`, the URL `/` is generated.</span></span> <span data-ttu-id="69269-366">Hodnoty zadané trasy odpovídat výchozím hodnotám a segmentů odpovídající výchozí hodnoty jsou bezpečně vynechány.</span><span class="sxs-lookup"><span data-stu-id="69269-366">The provided route values match the default values, and the segments corresponding to the default values are safely omitted.</span></span>

<span data-ttu-id="69269-367">Obě adresy URL generované zpátečního převodu s následující definice trasy (`/Home/Index` a `/`) vytvářet stejné hodnoty trasy, které byly použity k vytvoření adresy URL.</span><span class="sxs-lookup"><span data-stu-id="69269-367">Both URLs generated round-trip with the following route definition (`/Home/Index` and `/`) produce the same route values that were used to generate the URL.</span></span>

> [!NOTE]
> <span data-ttu-id="69269-368">Používejte aplikace pomocí ASP.NET Core MVC <xref:Microsoft.AspNetCore.Mvc.Routing.UrlHelper> k vygenerování adres URL, bez volání do směrování přímo.</span><span class="sxs-lookup"><span data-stu-id="69269-368">An app using ASP.NET Core MVC should use <xref:Microsoft.AspNetCore.Mvc.Routing.UrlHelper> to generate URLs instead of calling into routing directly.</span></span>

<span data-ttu-id="69269-369">Další informace o generování adresy URL, najdete v článku [odkaz generování adresy Url](#url-generation-reference) oddílu.</span><span class="sxs-lookup"><span data-stu-id="69269-369">For more information on URL generation, see the [Url generation reference](#url-generation-reference) section.</span></span>

## <a name="use-routing-middleware"></a><span data-ttu-id="69269-370">Použití směrování middlewaru</span><span class="sxs-lookup"><span data-stu-id="69269-370">Use Routing Middleware</span></span>

<span data-ttu-id="69269-371">Odkaz [Microsoft.AspNetCore.App Microsoft.aspnetcore.all](xref:fundamentals/metapackage-app) v souboru projektu vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="69269-371">Reference the [Microsoft.AspNetCore.App metapackage](xref:fundamentals/metapackage-app) in the app's project file.</span></span>

<span data-ttu-id="69269-372">Přidání směrování do kontejneru služby v `Startup.ConfigureServices`:</span><span class="sxs-lookup"><span data-stu-id="69269-372">Add routing to the service container in `Startup.ConfigureServices`:</span></span>

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_ConfigureServices&highlight=3)]

<span data-ttu-id="69269-373">Musí být nakonfigurované trasy v `Startup.Configure` metody.</span><span class="sxs-lookup"><span data-stu-id="69269-373">Routes must be configured in the `Startup.Configure` method.</span></span> <span data-ttu-id="69269-374">Ukázková aplikace používá následující rozhraní API:</span><span class="sxs-lookup"><span data-stu-id="69269-374">The sample app uses the following APIs:</span></span>

* <xref:Microsoft.AspNetCore.Routing.RouteBuilder>
* <span data-ttu-id="69269-375"><xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> &ndash; Odpovídá pouze požadavky HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="69269-375"><xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> &ndash; Matches only HTTP GET requests.</span></span>
* <xref:Microsoft.AspNetCore.Builder.RoutingBuilderExtensions.UseRouter*>

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_RouteHandler)]

<span data-ttu-id="69269-376">V následující tabulce jsou uvedeny odpovědi s danou identifikátory URI.</span><span class="sxs-lookup"><span data-stu-id="69269-376">The following table shows the responses with the given URIs.</span></span>

| <span data-ttu-id="69269-377">Identifikátor URI</span><span class="sxs-lookup"><span data-stu-id="69269-377">URI</span></span>                    | <span data-ttu-id="69269-378">Odpověď</span><span class="sxs-lookup"><span data-stu-id="69269-378">Response</span></span>                                          |
| ---------------------- | ------------------------------------------------- |
| `/package/create/3`    | <span data-ttu-id="69269-379">Dobrý den!</span><span class="sxs-lookup"><span data-stu-id="69269-379">Hello!</span></span> <span data-ttu-id="69269-380">Hodnoty trasy: [operace, vytvořit], [id, 3]</span><span class="sxs-lookup"><span data-stu-id="69269-380">Route values: [operation, create], [id, 3]</span></span> |
| `/package/track/-3`    | <span data-ttu-id="69269-381">Dobrý den!</span><span class="sxs-lookup"><span data-stu-id="69269-381">Hello!</span></span> <span data-ttu-id="69269-382">Hodnoty trasy: [operace, sledovat], [id, -3]</span><span class="sxs-lookup"><span data-stu-id="69269-382">Route values: [operation, track], [id, -3]</span></span> |
| `/package/track/-3/`   | <span data-ttu-id="69269-383">Dobrý den!</span><span class="sxs-lookup"><span data-stu-id="69269-383">Hello!</span></span> <span data-ttu-id="69269-384">Hodnoty trasy: [operace, sledovat], [id, -3]</span><span class="sxs-lookup"><span data-stu-id="69269-384">Route values: [operation, track], [id, -3]</span></span> |
| `/package/track/`      | <span data-ttu-id="69269-385">Požadavek rozsahu prostřednictvím žádná shoda.</span><span class="sxs-lookup"><span data-stu-id="69269-385">The request falls through, no match.</span></span>              |
| `GET /hello/Joe`       | <span data-ttu-id="69269-386">Dobrý den, Joe!</span><span class="sxs-lookup"><span data-stu-id="69269-386">Hi, Joe!</span></span>                                          |
| `POST /hello/Joe`      | <span data-ttu-id="69269-387">Požadavek nepropadla, odpovídá pouze HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="69269-387">The request falls through, matches HTTP GET only.</span></span> |
| `GET /hello/Joe/Smith` | <span data-ttu-id="69269-388">Požadavek rozsahu prostřednictvím žádná shoda.</span><span class="sxs-lookup"><span data-stu-id="69269-388">The request falls through, no match.</span></span>              |

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="69269-389">Pokud konfigurujete jednu trasu, zavolejte <xref:Microsoft.AspNetCore.Builder.RoutingBuilderExtensions.UseRouter*> předávajícího `IRouter` instance.</span><span class="sxs-lookup"><span data-stu-id="69269-389">If you're configuring a single route, call <xref:Microsoft.AspNetCore.Builder.RoutingBuilderExtensions.UseRouter*> passing in an `IRouter` instance.</span></span> <span data-ttu-id="69269-390">Nebudete muset použít <xref:Microsoft.AspNetCore.Routing.RouteBuilder>.</span><span class="sxs-lookup"><span data-stu-id="69269-390">You won't need to use <xref:Microsoft.AspNetCore.Routing.RouteBuilder>.</span></span>

::: moniker-end

<span data-ttu-id="69269-391">Rozhraní framework obsahuje sadu rozšiřujících metod pro vytváření tras (<xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions>):</span><span class="sxs-lookup"><span data-stu-id="69269-391">The framework provides a set of extension methods for creating routes (<xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions>):</span></span>

* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapDelete*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareDelete*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareGet*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewarePost*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewarePut*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareRoute*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareVerb*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapPost*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapPut*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapRoute*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="69269-392">Některé uvedené metody, jako například <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*>, požadovat <xref:Microsoft.AspNetCore.Http.RequestDelegate>.</span><span class="sxs-lookup"><span data-stu-id="69269-392">Some of listed methods, such as <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*>, require a <xref:Microsoft.AspNetCore.Http.RequestDelegate>.</span></span> <span data-ttu-id="69269-393"><xref:Microsoft.AspNetCore.Http.RequestDelegate> Slouží jako *obslužná rutina trasy* při trasa odpovídá.</span><span class="sxs-lookup"><span data-stu-id="69269-393">The <xref:Microsoft.AspNetCore.Http.RequestDelegate> is used as the *route handler* when the route matches.</span></span> <span data-ttu-id="69269-394">Jiné metody v této rodině povolit konfiguraci kanálu middleware pro použití jako obslužná rutina trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-394">Other methods in this family allow configuring a middleware pipeline for use as the route handler.</span></span> <span data-ttu-id="69269-395">Pokud `Map*` metoda nepřijme obslužnou rutinu, jako například <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapRoute*>, použije <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span><span class="sxs-lookup"><span data-stu-id="69269-395">If the `Map*` method doesn't accept a handler, such as <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapRoute*>, it uses the <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span></span>

::: moniker-end

<span data-ttu-id="69269-396">`Map[Verb]` Metody omezení trasy, která má v názvu metody akce HTTP pomocí omezení.</span><span class="sxs-lookup"><span data-stu-id="69269-396">The `Map[Verb]` methods use constraints to limit the route to the HTTP Verb in the method name.</span></span> <span data-ttu-id="69269-397">Viz například <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> a <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>.</span><span class="sxs-lookup"><span data-stu-id="69269-397">For example, see <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> and <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>.</span></span>

## <a name="route-template-reference"></a><span data-ttu-id="69269-398">Odkaz na šablonu trasy</span><span class="sxs-lookup"><span data-stu-id="69269-398">Route template reference</span></span>

<span data-ttu-id="69269-399">Tokeny ve složených závorkách (`{ ... }`) definovat *trasy parametry* , které jsou vázány, pokud je nalezen odpovídající trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-399">Tokens within curly braces (`{ ... }`) define *route parameters* that are bound if the route is matched.</span></span> <span data-ttu-id="69269-400">Můžete definovat více než jeden parametr trasa v segmentu směrování, ale musí být odděleny literálovou hodnotou.</span><span class="sxs-lookup"><span data-stu-id="69269-400">You can define more than one route parameter in a route segment, but they must be separated by a literal value.</span></span> <span data-ttu-id="69269-401">Například `{controller=Home}{action=Index}` není platné trasy, protože neexistuje žádná hodnota literálu mezi `{controller}` a `{action}`.</span><span class="sxs-lookup"><span data-stu-id="69269-401">For example, `{controller=Home}{action=Index}` isn't a valid route, since there's no literal value between `{controller}` and `{action}`.</span></span> <span data-ttu-id="69269-402">Tyto parametry trasy musí mít název a může zadat další atributy.</span><span class="sxs-lookup"><span data-stu-id="69269-402">These route parameters must have a name and may have additional attributes specified.</span></span>

<span data-ttu-id="69269-403">Prostý text než parametry trasy (například `{id}`) a oddělovač cesty `/` text v adrese URL se musí shodovat.</span><span class="sxs-lookup"><span data-stu-id="69269-403">Literal text other than route parameters (for example, `{id}`) and the path separator `/` must match the text in the URL.</span></span> <span data-ttu-id="69269-404">Odpovídající text je velká a malá písmena a podle dekódovaný reprezentace cesty adresy URL.</span><span class="sxs-lookup"><span data-stu-id="69269-404">Text matching is case-insensitive and based on the decoded representation of the URLs path.</span></span> <span data-ttu-id="69269-405">Tak, aby odpovídaly oddělovač parametr literálu trasy (`{` nebo `}`), oddělovač řídicí znak opakováním (`{{` nebo `}}`).</span><span class="sxs-lookup"><span data-stu-id="69269-405">To match a literal route parameter delimiter (`{` or `}`), escape the delimiter by repeating the character (`{{` or `}}`).</span></span>

<span data-ttu-id="69269-406">Vzory adres URL, které se pokusí zaznamenat název souboru s příponou volitelné mají další aspekty.</span><span class="sxs-lookup"><span data-stu-id="69269-406">URL patterns that attempt to capture a file name with an optional file extension have additional considerations.</span></span> <span data-ttu-id="69269-407">Představte si třeba šablona `files/{filename}.{ext?}`.</span><span class="sxs-lookup"><span data-stu-id="69269-407">For example, consider the template `files/{filename}.{ext?}`.</span></span> <span data-ttu-id="69269-408">Když hodnoty pro oba `filename` a `ext` existuje, naplní se obě hodnoty.</span><span class="sxs-lookup"><span data-stu-id="69269-408">When values for both `filename` and `ext` exist, both values are populated.</span></span> <span data-ttu-id="69269-409">Pokud pouze hodnotu `filename` existuje v adrese URL trasy shody, protože koncové tečky (`.`) je volitelný.</span><span class="sxs-lookup"><span data-stu-id="69269-409">If only a value for `filename` exists in the URL, the route matches because the trailing period (`.`) is  optional.</span></span> <span data-ttu-id="69269-410">Následující adresy URL, která odpovídá této trasy:</span><span class="sxs-lookup"><span data-stu-id="69269-410">The following URLs match this route:</span></span>

* `/files/myFile.txt`
* `/files/myFile`

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="69269-411">Můžete použít hvězdičku (`*`) nebo dvojitou hvězdičku (`**`) jako předponu pro parametr trasy, aby vytvořit vazbu na celý URI.</span><span class="sxs-lookup"><span data-stu-id="69269-411">You can use an asterisk (`*`) or double asterisk (`**`) as a prefix to a route parameter to bind to the rest of the URI.</span></span> <span data-ttu-id="69269-412">Toto nastavení se nazývá *pokrývající vše* parametry.</span><span class="sxs-lookup"><span data-stu-id="69269-412">These are called a *catch-all* parameters.</span></span> <span data-ttu-id="69269-413">Například `blog/{**slug}` odpovídá libovolný identifikátor URI, který začíná `/blog` a nemá žádné hodnoty, které je přiřazeno k `slug` trasy hodnotu.</span><span class="sxs-lookup"><span data-stu-id="69269-413">For example, `blog/{**slug}` matches any URI that starts with `/blog` and has any value following it, which is assigned to the `slug` route value.</span></span> <span data-ttu-id="69269-414">Parametry catch – to všechno můžete také hledat shody prázdný řetězec.</span><span class="sxs-lookup"><span data-stu-id="69269-414">Catch-all parameters can also match the empty string.</span></span>

<span data-ttu-id="69269-415">Parametr pokrývající vše řídicí sekvence příslušných znaků při trasy se používá ke generování adresy URL, včetně oddělovač cesty (`/`) znaků.</span><span class="sxs-lookup"><span data-stu-id="69269-415">The catch-all parameter escapes the appropriate characters when the route is used to generate a URL, including path separator (`/`) characters.</span></span> <span data-ttu-id="69269-416">Například trasy `foo/{*path}` trasy hodnotami `{ path = "my/path" }` generuje `foo/my%2Fpath`.</span><span class="sxs-lookup"><span data-stu-id="69269-416">For example, the route `foo/{*path}` with route values `{ path = "my/path" }` generates `foo/my%2Fpath`.</span></span> <span data-ttu-id="69269-417">Všimněte si uvozený uvozovacím znakem lomítka.</span><span class="sxs-lookup"><span data-stu-id="69269-417">Note the escaped forward slash.</span></span> <span data-ttu-id="69269-418">Operace round-trip cesta oddělovače, použijte `**` předpona parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-418">To round-trip path separator characters, use the `**` route parameter prefix.</span></span> <span data-ttu-id="69269-419">Trasa `foo/{**path}` s `{ path = "my/path" }` generuje `foo/my/path`.</span><span class="sxs-lookup"><span data-stu-id="69269-419">The route `foo/{**path}` with `{ path = "my/path" }` generates `foo/my/path`.</span></span>

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="69269-420">Můžete použít hvězdičku (`*`) jako předponu pro parametr trasy, aby vytvořit vazbu na celý URI.</span><span class="sxs-lookup"><span data-stu-id="69269-420">You can use the asterisk (`*`) as a prefix to a route parameter to bind to the rest of the URI.</span></span> <span data-ttu-id="69269-421">Jedná se *pokrývající vše* parametru.</span><span class="sxs-lookup"><span data-stu-id="69269-421">This is called a *catch-all* parameter.</span></span> <span data-ttu-id="69269-422">Například `blog/{*slug}` odpovídá libovolný identifikátor URI, který začíná `/blog` a nemá žádné hodnoty, které je přiřazeno k `slug` trasy hodnotu.</span><span class="sxs-lookup"><span data-stu-id="69269-422">For example, `blog/{*slug}` matches any URI that starts with `/blog` and has any value following it, which is assigned to the `slug` route value.</span></span> <span data-ttu-id="69269-423">Parametry catch – to všechno můžete také hledat shody prázdný řetězec.</span><span class="sxs-lookup"><span data-stu-id="69269-423">Catch-all parameters can also match the empty string.</span></span>

<span data-ttu-id="69269-424">Parametr pokrývající vše řídicí sekvence příslušných znaků při trasy se používá ke generování adresy URL, včetně oddělovač cesty (`/`) znaků.</span><span class="sxs-lookup"><span data-stu-id="69269-424">The catch-all parameter escapes the appropriate characters when the route is used to generate a URL, including path separator (`/`) characters.</span></span> <span data-ttu-id="69269-425">Například trasy `foo/{*path}` trasy hodnotami `{ path = "my/path" }` generuje `foo/my%2Fpath`.</span><span class="sxs-lookup"><span data-stu-id="69269-425">For example, the route `foo/{*path}` with route values `{ path = "my/path" }` generates `foo/my%2Fpath`.</span></span> <span data-ttu-id="69269-426">Všimněte si uvozený uvozovacím znakem lomítka.</span><span class="sxs-lookup"><span data-stu-id="69269-426">Note the escaped forward slash.</span></span>

::: moniker-end

<span data-ttu-id="69269-427">Mohou mít parametry trasy *výchozí hodnoty* určený specifikuje výchozí hodnotu za název parametru odděleny symbolem rovná se (`=`).</span><span class="sxs-lookup"><span data-stu-id="69269-427">Route parameters may have *default values* designated by specifying the default value after the parameter name separated by an equals sign (`=`).</span></span> <span data-ttu-id="69269-428">Například `{controller=Home}` definuje `Home` jako výchozí hodnota pro `controller`.</span><span class="sxs-lookup"><span data-stu-id="69269-428">For example, `{controller=Home}` defines `Home` as the default value for `controller`.</span></span> <span data-ttu-id="69269-429">Výchozí hodnota je použita, pokud je k dispozici v adrese URL pro parametr žádná hodnota.</span><span class="sxs-lookup"><span data-stu-id="69269-429">The default value is used if no value is present in the URL for the parameter.</span></span> <span data-ttu-id="69269-430">Parametry trasy, která jsou teď volitelné přidáním otazník (`?`) na konec názvu parametru, jak v `id?`.</span><span class="sxs-lookup"><span data-stu-id="69269-430">Route parameters are made optional by appending a question mark (`?`) to the end of the parameter name, as in `id?`.</span></span> <span data-ttu-id="69269-431">Rozdíl mezi hodnotami nepovinný a výchozí parametry trasy je, že parametr trasa s výchozí hodnotou vždy vytváří hodnotu&mdash;volitelný parametr má hodnotu pouze v případě, že je žádost o adresu URL zadat hodnotu.</span><span class="sxs-lookup"><span data-stu-id="69269-431">The difference between optional values and default route parameters is that a route parameter with a default value always produces a value&mdash;an optional parameter has a value only when a value is provided by the request URL.</span></span>

<span data-ttu-id="69269-432">Parametry trasy může mít omezení, která musí odpovídat hodnotě trasy vázán z adresy URL.</span><span class="sxs-lookup"><span data-stu-id="69269-432">Route parameters may have constraints that must match the route value bound from the URL.</span></span> <span data-ttu-id="69269-433">Přidání dvojtečkou (`:`) a název omezení, určuje název parametru trasy *vložené omezení* na parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-433">Adding a colon (`:`) and constraint name after the route parameter name specifies an *inline constraint* on a route parameter.</span></span> <span data-ttu-id="69269-434">Pokud omezení vyžaduje argumenty, jsou uzavřeny v závorkách (`(...)`) za názvem omezení.</span><span class="sxs-lookup"><span data-stu-id="69269-434">If the constraint requires arguments, they're enclosed in parentheses (`(...)`) after the constraint name.</span></span> <span data-ttu-id="69269-435">Několik vložených omezení je možné zadat tak připojení jiného dvojtečka (`:`) a název omezení.</span><span class="sxs-lookup"><span data-stu-id="69269-435">Multiple inline constraints can be specified by appending another colon (`:`) and constraint name.</span></span>

<span data-ttu-id="69269-436">Název omezení a argumenty jsou předány <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> služby k vytvoření instance <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> použít při zpracování adresy URL.</span><span class="sxs-lookup"><span data-stu-id="69269-436">The constraint name and arguments are passed to the <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> service to create an instance of <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> to use in URL processing.</span></span> <span data-ttu-id="69269-437">Například šablona trasy `blog/{article:minlength(10)}` Určuje `minlength` omezení s argumentem `10`.</span><span class="sxs-lookup"><span data-stu-id="69269-437">For example, the route template `blog/{article:minlength(10)}` specifies a `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="69269-438">Další informace o omezení trasy a seznam omezení poskytovaného rámcem, najdete v článku [trasy referenční omezení](#route-constraint-reference) části.</span><span class="sxs-lookup"><span data-stu-id="69269-438">For more information on route constraints and a list of the constraints provided by the framework, see the [Route constraint reference](#route-constraint-reference) section.</span></span>

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="69269-439">Parametry trasy mohou mít i transformátory parametrů, které transformují parametr na hodnotu při generování odkazů a odpovídající akce a stránky pro adresy URL.</span><span class="sxs-lookup"><span data-stu-id="69269-439">Route parameters may also have parameter transformers, which transform a parameter's value when generating links and matching actions and pages to URLs.</span></span> <span data-ttu-id="69269-440">Jako omezení, parametr transformátory jde přidat vložený parametr trasa přidáním dvojtečkou (`:`) a název transformer za název parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-440">Like constraints, parameter transformers can be added inline to a route parameter by adding a colon (`:`) and transformer name after the route parameter name.</span></span> <span data-ttu-id="69269-441">Například šablona trasy `blog/{article:slugify}` Určuje `slugify` transformátoru.</span><span class="sxs-lookup"><span data-stu-id="69269-441">For example, the route template `blog/{article:slugify}` specifies a `slugify` transformer.</span></span> <span data-ttu-id="69269-442">Další informace o parametru transformátory, najdete v článku [odkaz na parametr transformer](#parameter-transformer-reference) oddílu.</span><span class="sxs-lookup"><span data-stu-id="69269-442">For more information on parameter transformers, see the [Parameter transformer reference](#parameter-transformer-reference) section.</span></span>

::: moniker-end

<span data-ttu-id="69269-443">Následující tabulka ukazuje příklad šablony trasy a jejich chování.</span><span class="sxs-lookup"><span data-stu-id="69269-443">The following table demonstrates example route templates and their behavior.</span></span>

| <span data-ttu-id="69269-444">Šablona trasy</span><span class="sxs-lookup"><span data-stu-id="69269-444">Route Template</span></span>                           | <span data-ttu-id="69269-445">Příklad odpovídající identifikátor URI</span><span class="sxs-lookup"><span data-stu-id="69269-445">Example Matching URI</span></span>    | <span data-ttu-id="69269-446">Identifikátor URI požadavku&hellip;</span><span class="sxs-lookup"><span data-stu-id="69269-446">The request URI&hellip;</span></span>                                                    |
| ---------------------------------------- | ----------------------- | -------------------------------------------------------------------------- |
| `hello`                                  | `/hello`                | <span data-ttu-id="69269-447">Odpovídá jen jednu cestu `/hello`.</span><span class="sxs-lookup"><span data-stu-id="69269-447">Only matches the single path `/hello`.</span></span>                                     |
| `{Page=Home}`                            | `/`                     | <span data-ttu-id="69269-448">Odpovídá a nastaví `Page` k `Home`.</span><span class="sxs-lookup"><span data-stu-id="69269-448">Matches and sets `Page` to `Home`.</span></span>                                         |
| `{Page=Home}`                            | `/Contact`              | <span data-ttu-id="69269-449">Odpovídá a nastaví `Page` k `Contact`.</span><span class="sxs-lookup"><span data-stu-id="69269-449">Matches and sets `Page` to `Contact`.</span></span>                                      |
| `{controller}/{action}/{id?}`            | `/Products/List`        | <span data-ttu-id="69269-450">Mapuje `Products` kontroleru a `List` akce.</span><span class="sxs-lookup"><span data-stu-id="69269-450">Maps to the `Products` controller and `List` action.</span></span>                       |
| `{controller}/{action}/{id?}`            | `/Products/Details/123` | <span data-ttu-id="69269-451">Mapuje `Products` kontroleru a `Details` akce (`id` hodnotu 123).</span><span class="sxs-lookup"><span data-stu-id="69269-451">Maps to the `Products` controller and  `Details` action (`id` set to 123).</span></span> |
| `{controller=Home}/{action=Index}/{id?}` | `/`                     | <span data-ttu-id="69269-452">Mapuje `Home` kontroleru a `Index` – metoda (`id` ignorováno).</span><span class="sxs-lookup"><span data-stu-id="69269-452">Maps to the `Home` controller and `Index` method (`id` is ignored).</span></span>        |

<span data-ttu-id="69269-453">Pomocí šablony je obecně nejjednodušším přístupem při směrování.</span><span class="sxs-lookup"><span data-stu-id="69269-453">Using a template is generally the simplest approach to routing.</span></span> <span data-ttu-id="69269-454">Omezení a výchozí hodnoty lze také zadat mimo šablonu trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-454">Constraints and defaults can also be specified outside the route template.</span></span>

> [!TIP]
> <span data-ttu-id="69269-455">Povolit [protokolování](xref:fundamentals/logging/index) zobrazíte jak předdefinovaných implementací, jako například směrování <xref:Microsoft.AspNetCore.Routing.Route>, shodovat s požadavky.</span><span class="sxs-lookup"><span data-stu-id="69269-455">Enable [Logging](xref:fundamentals/logging/index) to see how the built-in routing implementations, such as <xref:Microsoft.AspNetCore.Routing.Route>, match requests.</span></span>

## <a name="reserved-routing-names"></a><span data-ttu-id="69269-456">Vyhrazené názvy směrování</span><span class="sxs-lookup"><span data-stu-id="69269-456">Reserved routing names</span></span>

<span data-ttu-id="69269-457">Následující klíčová slova jsou vyhrazené názvy a nelze jej použít jako názvy tras nebo parametry:</span><span class="sxs-lookup"><span data-stu-id="69269-457">The following keywords are reserved names and can't be used as route names or parameters:</span></span>

* `action`
* `area`
* `controller`
* `handler`
* `page`

## <a name="route-constraint-reference"></a><span data-ttu-id="69269-458">Odkaz na omezení trasy</span><span class="sxs-lookup"><span data-stu-id="69269-458">Route constraint reference</span></span>

<span data-ttu-id="69269-459">Omezení trasy spustit, když shoda vedoucí k adresy URL příchozích a cesta URL je tokenizovaného do hodnoty trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-459">Route constraints execute when a match has occurred to the incoming URL and the URL path is tokenized into route values.</span></span> <span data-ttu-id="69269-460">Omezení trasy obecně zkontrolovat hodnoty trasy spojený přes šablonu trasy a ujistěte se, hodnota Ano/žádné rozhodnutí o, zda se hodnota je přijatelné.</span><span class="sxs-lookup"><span data-stu-id="69269-460">Route constraints generally inspect the route value associated via the route template and make a yes/no decision about whether or not the value is acceptable.</span></span> <span data-ttu-id="69269-461">Některá omezení trasy použít data mimo hodnota trasy vzít v úvahu, jestli je možné směrovat požadavek.</span><span class="sxs-lookup"><span data-stu-id="69269-461">Some route constraints use data outside the route value to consider whether the request can be routed.</span></span> <span data-ttu-id="69269-462">Například <xref:Microsoft.AspNetCore.Routing.Constraints.HttpMethodRouteConstraint> můžete přijmout nebo odmítnout žádost založené na jeho příkaz protokolu HTTP.</span><span class="sxs-lookup"><span data-stu-id="69269-462">For example, the <xref:Microsoft.AspNetCore.Routing.Constraints.HttpMethodRouteConstraint> can accept or reject a request based on its HTTP verb.</span></span> <span data-ttu-id="69269-463">Omezení se používají v směrování požadavků a propojit generace.</span><span class="sxs-lookup"><span data-stu-id="69269-463">Constraints are used in routing requests and link generation.</span></span>

> [!WARNING]
> <span data-ttu-id="69269-464">Nepoužívejte omezení pro **ověřování vstupu**.</span><span class="sxs-lookup"><span data-stu-id="69269-464">Don't use constraints for **input validation**.</span></span> <span data-ttu-id="69269-465">Pokud omezení se používají pro **ověřování vstupu**, neplatný vstup výsledky v *404 - Nenalezeno* odpovědi namísto *400 - Chybný požadavek* s příslušnou chybovou zprávu.</span><span class="sxs-lookup"><span data-stu-id="69269-465">If constraints are used for **input validation**, invalid input results in a *404 - Not Found* response instead of a *400 - Bad Request* with an appropriate error message.</span></span> <span data-ttu-id="69269-466">Omezení trasy se používají pro **rozlišení** podobné trasy, není k ověření vstupů pro konkrétní trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-466">Route constraints are used to **disambiguate** similar routes, not to validate the inputs for a particular route.</span></span>

<span data-ttu-id="69269-467">Následující tabulka ukazuje příklad omezení trasy a jejich očekávané chování.</span><span class="sxs-lookup"><span data-stu-id="69269-467">The following table demonstrates example route constraints and their expected behavior.</span></span>

| <span data-ttu-id="69269-468">omezení</span><span class="sxs-lookup"><span data-stu-id="69269-468">constraint</span></span> | <span data-ttu-id="69269-469">Příklad</span><span class="sxs-lookup"><span data-stu-id="69269-469">Example</span></span> | <span data-ttu-id="69269-470">Příklad shody</span><span class="sxs-lookup"><span data-stu-id="69269-470">Example Matches</span></span> | <span data-ttu-id="69269-471">Poznámky</span><span class="sxs-lookup"><span data-stu-id="69269-471">Notes</span></span> |
| ---------- | ------- | --------------- | ----- |
| `int` | `{id:int}` | <span data-ttu-id="69269-472">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="69269-472">`123456789`, `-123456789`</span></span> | <span data-ttu-id="69269-473">Odpovídá jakémukoliv celému číslu</span><span class="sxs-lookup"><span data-stu-id="69269-473">Matches any integer</span></span> |
| `bool` | `{active:bool}` | <span data-ttu-id="69269-474">`true`, `FALSE`</span><span class="sxs-lookup"><span data-stu-id="69269-474">`true`, `FALSE`</span></span> | <span data-ttu-id="69269-475">Odpovídá `true` nebo `false` (velká a malá písmena)</span><span class="sxs-lookup"><span data-stu-id="69269-475">Matches `true` or `false` (case-insensitive)</span></span> |
| `datetime` | `{dob:datetime}` | <span data-ttu-id="69269-476">`2016-12-31`, `2016-12-31 7:32pm`</span><span class="sxs-lookup"><span data-stu-id="69269-476">`2016-12-31`, `2016-12-31 7:32pm`</span></span> | <span data-ttu-id="69269-477">Odpovídá platný `DateTime` hodnotu (v invariantní jazykové verzi - zobrazí upozornění)</span><span class="sxs-lookup"><span data-stu-id="69269-477">Matches a valid `DateTime` value (in the invariant culture - see warning)</span></span> |
| `decimal` | `{price:decimal}` | <span data-ttu-id="69269-478">`49.99`, `-1,000.01`</span><span class="sxs-lookup"><span data-stu-id="69269-478">`49.99`, `-1,000.01`</span></span> | <span data-ttu-id="69269-479">Odpovídá platný `decimal` hodnotu (v invariantní jazykové verzi - zobrazí upozornění)</span><span class="sxs-lookup"><span data-stu-id="69269-479">Matches a valid `decimal` value (in the invariant culture - see warning)</span></span> |
| `double` | `{weight:double}` | <span data-ttu-id="69269-480">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="69269-480">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="69269-481">Odpovídá platný `double` hodnotu (v invariantní jazykové verzi - zobrazí upozornění)</span><span class="sxs-lookup"><span data-stu-id="69269-481">Matches a valid `double` value (in the invariant culture - see warning)</span></span> |
| `float` | `{weight:float}` | <span data-ttu-id="69269-482">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="69269-482">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="69269-483">Odpovídá platný `float` hodnotu (v invariantní jazykové verzi - zobrazí upozornění)</span><span class="sxs-lookup"><span data-stu-id="69269-483">Matches a valid `float` value (in the invariant culture - see warning)</span></span> |
| `guid` | `{id:guid}` | <span data-ttu-id="69269-484">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span><span class="sxs-lookup"><span data-stu-id="69269-484">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span></span> | <span data-ttu-id="69269-485">Odpovídá platný `Guid` hodnota</span><span class="sxs-lookup"><span data-stu-id="69269-485">Matches a valid `Guid` value</span></span> |
| `long` | `{ticks:long}` | <span data-ttu-id="69269-486">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="69269-486">`123456789`, `-123456789`</span></span> | <span data-ttu-id="69269-487">Odpovídá platný `long` hodnota</span><span class="sxs-lookup"><span data-stu-id="69269-487">Matches a valid `long` value</span></span> |
| `minlength(value)` | `{username:minlength(4)}` | `Rick` | <span data-ttu-id="69269-488">Řetězec musí mít aspoň 4 znaky</span><span class="sxs-lookup"><span data-stu-id="69269-488">String must be at least 4 characters</span></span> |
| `maxlength(value)` | `{filename:maxlength(8)}` | `Richard` | <span data-ttu-id="69269-489">Řetězec musí obsahovat více než 8 znaků</span><span class="sxs-lookup"><span data-stu-id="69269-489">String must be no more than 8 characters</span></span> |
| `length(length)` | `{filename:length(12)}` | `somefile.txt` | <span data-ttu-id="69269-490">Řetězec musí mít délku přesně 12 znaků.</span><span class="sxs-lookup"><span data-stu-id="69269-490">String must be exactly 12 characters long</span></span> |
| `length(min,max)` | `{filename:length(8,16)}` | `somefile.txt` | <span data-ttu-id="69269-491">Řetězec musí být aspoň 8 a ne více než 16 znaků</span><span class="sxs-lookup"><span data-stu-id="69269-491">String must be at least 8 and no more than 16 characters long</span></span> |
| `min(value)` | `{age:min(18)}` | `19` | <span data-ttu-id="69269-492">Celočíselná hodnota musí být alespoň 18</span><span class="sxs-lookup"><span data-stu-id="69269-492">Integer value must be at least 18</span></span> |
| `max(value)` | `{age:max(120)}` | `91` | <span data-ttu-id="69269-493">Celočíselná hodnota musí být více než 120</span><span class="sxs-lookup"><span data-stu-id="69269-493">Integer value must be no more than 120</span></span> |
| `range(min,max)` | `{age:range(18,120)}` | `91` | <span data-ttu-id="69269-494">Celočíselná hodnota musí být alespoň 18, ale ne více než 120</span><span class="sxs-lookup"><span data-stu-id="69269-494">Integer value must be at least 18 but no more than 120</span></span> |
| `alpha` | `{name:alpha}` | `Rick` | <span data-ttu-id="69269-495">Řetězec musí obsahovat minimálně jeden abecední znak (`a`-`z`, velká a malá písmena)</span><span class="sxs-lookup"><span data-stu-id="69269-495">String must consist of one or more alphabetical characters (`a`-`z`, case-insensitive)</span></span> |
| `regex(expression)` | `{ssn:regex(^\\d{{3}}-\\d{{2}}-\\d{{4}}$)}` | `123-45-6789` | <span data-ttu-id="69269-496">Řetězec musí odpovídat regulárnímu výrazu (viz tipy k definování regulárního výrazu)</span><span class="sxs-lookup"><span data-stu-id="69269-496">String must match the regular expression (see tips about defining a regular expression)</span></span> |
| `required` | `{name:required}` | `Rick` | <span data-ttu-id="69269-497">Používá k vynucení, že parametr-hodnota je k dispozici během generování adresy URL</span><span class="sxs-lookup"><span data-stu-id="69269-497">Used to enforce that a non-parameter value is present during URL generation</span></span> |

<span data-ttu-id="69269-498">Více, oddělit středníkem omezení se můžou uplatnit na jeden parametr.</span><span class="sxs-lookup"><span data-stu-id="69269-498">Multiple, colon-delimited constraints can be applied to a single parameter.</span></span> <span data-ttu-id="69269-499">Například následující omezení omezuje parametr na celočíselnou hodnotu 1 nebo vyšší:</span><span class="sxs-lookup"><span data-stu-id="69269-499">For example, the following constraint restricts a parameter to an integer value of 1 or greater:</span></span>

```csharp
[Route("users/{id:int:min(1)}")]
public User GetUserById(int id) { }
```

> [!WARNING]
> <span data-ttu-id="69269-500">Směrovat omezení, která Ověřte adresu URL a jsou převedeny na typ CLR (například `int` nebo `DateTime`) vždy používejte neutrální jazykovou verzi.</span><span class="sxs-lookup"><span data-stu-id="69269-500">Route constraints that verify the URL and are converted to a CLR type (such as `int` or `DateTime`) always use the invariant culture.</span></span> <span data-ttu-id="69269-501">Tato omezení předpokládá, že adresa URL je nepřekládá.</span><span class="sxs-lookup"><span data-stu-id="69269-501">These constraints assume that the URL is non-localizable.</span></span> <span data-ttu-id="69269-502">Omezení trasy poskytované rozhraním neupravujte hodnoty uložené v hodnot trasy.</span><span class="sxs-lookup"><span data-stu-id="69269-502">The framework-provided route constraints don't modify the values stored in route values.</span></span> <span data-ttu-id="69269-503">Všechny hodnoty trasy, které jsou analyzovány z adresy URL jsou uloženy jako řetězce.</span><span class="sxs-lookup"><span data-stu-id="69269-503">All route values parsed from the URL are stored as strings.</span></span> <span data-ttu-id="69269-504">Například `float` omezení pokusí převést hodnotu trasy na typ float, ale převedená hodnota se používá jenom k ověření, je možné převést na typ plovoucí.</span><span class="sxs-lookup"><span data-stu-id="69269-504">For example, the `float` constraint attempts to convert the route value to a float, but the converted value is used only to verify it can be converted to a float.</span></span>

## <a name="regular-expressions"></a><span data-ttu-id="69269-505">Regulární výrazy</span><span class="sxs-lookup"><span data-stu-id="69269-505">Regular expressions</span></span>

<span data-ttu-id="69269-506">Přidá rozhraní ASP.NET Core `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` regulárního výrazu konstruktoru.</span><span class="sxs-lookup"><span data-stu-id="69269-506">The ASP.NET Core framework adds `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` to the regular expression constructor.</span></span> <span data-ttu-id="69269-507">Zobrazit <xref:System.Text.RegularExpressions.RegexOptions> popis těchto členů.</span><span class="sxs-lookup"><span data-stu-id="69269-507">See <xref:System.Text.RegularExpressions.RegexOptions> for a description of these members.</span></span>

<span data-ttu-id="69269-508">Regulární výrazy pomocí oddělovače a tokeny, které jsou podobné těm, které používají služby Směrování a jazyka C#.</span><span class="sxs-lookup"><span data-stu-id="69269-508">Regular expressions use delimiters and tokens similar to those used by Routing and the C# language.</span></span> <span data-ttu-id="69269-509">Tokeny regulární výraz musí být uvozena.</span><span class="sxs-lookup"><span data-stu-id="69269-509">Regular expression tokens must be escaped.</span></span> <span data-ttu-id="69269-510">Použít regulární výraz `^\d{3}-\d{2}-\d{4}$` ve směrování, musí mít výraz `\` znaků (jedno zpětné lomítko) zadaná v řetězci jako `\\` (dvojité zpětné lomítko) znaky v C# zdrojového souboru, aby bylo možné escape `\` řídicí znak řetězce (Pokud nepoužíváte [doslovný řetězec literálů](/dotnet/csharp/language-reference/keywords/string)).</span><span class="sxs-lookup"><span data-stu-id="69269-510">To use the regular expression `^\d{3}-\d{2}-\d{4}$` in routing, the expression must have the `\` (single backslash) characters provided in the string as `\\` (double backslash) characters in the C# source file in order to escape the `\` string escape character (unless using [verbatim string literals](/dotnet/csharp/language-reference/keywords/string)).</span></span> <span data-ttu-id="69269-511">Řídicí znaky oddělovače směrování parametru (`{`, `}`, `[`, `]`), dvojité znaků ve výrazu (`{{`, `}`, `[[`, `]]`).</span><span class="sxs-lookup"><span data-stu-id="69269-511">To escape routing parameter delimiter characters (`{`, `}`, `[`, `]`), double the characters in the expression (`{{`, `}`, `[[`, `]]`).</span></span> <span data-ttu-id="69269-512">Následující tabulka uvádí regulárního výrazu a verze uvozený uvozovacím znakem.</span><span class="sxs-lookup"><span data-stu-id="69269-512">The following table shows a regular expression and the escaped version.</span></span>

| <span data-ttu-id="69269-513">Regulární výraz</span><span class="sxs-lookup"><span data-stu-id="69269-513">Regular Expression</span></span>    | <span data-ttu-id="69269-514">Uvozený uvozovacím znakem regulárního výrazu</span><span class="sxs-lookup"><span data-stu-id="69269-514">Escaped Regular Expression</span></span>     |
| --------------------- | ------------------------------ |
| `^\d{3}-\d{2}-\d{4}$` | `^\\d{{3}}-\\d{{2}}-\\d{{4}}$` |
| `^[a-z]{2}$`          | `^[[a-z]]{{2}}$`               |

<span data-ttu-id="69269-515">Regulární výrazy použité ve směrování často začínají znak stříšky (`^`) znak a odpovídají počáteční pozice tohoto řetězce.</span><span class="sxs-lookup"><span data-stu-id="69269-515">Regular expressions used in routing often start with the caret (`^`) character and match starting position of the string.</span></span> <span data-ttu-id="69269-516">Výrazy často končit znak dolaru (`$`) znaků a shoda konec řetězce.</span><span class="sxs-lookup"><span data-stu-id="69269-516">The expressions often end with the dollar sign (`$`) character and match end of the string.</span></span> <span data-ttu-id="69269-517">`^` a `$` znaků Ujistěte se, že hodnota parametru celého postupu shoda s regulárním výrazem.</span><span class="sxs-lookup"><span data-stu-id="69269-517">The `^` and `$` characters ensure that the regular expression match the entire route parameter value.</span></span> <span data-ttu-id="69269-518">Bez `^` a `$` znaků, regulární výraz odpovídat jakýkoli podřetězec v rámci řetězce, který je často nežádoucí.</span><span class="sxs-lookup"><span data-stu-id="69269-518">Without the `^` and `$` characters, the regular expression match any substring within the string, which is often undesirable.</span></span> <span data-ttu-id="69269-519">Následující tabulka obsahuje příklady a vysvětluje, proč odpovídat nebo selhání tak, aby odpovídaly.</span><span class="sxs-lookup"><span data-stu-id="69269-519">The following table provides examples and explains why they match or fail to match.</span></span>

| <span data-ttu-id="69269-520">Výraz</span><span class="sxs-lookup"><span data-stu-id="69269-520">Expression</span></span>   | <span data-ttu-id="69269-521">String</span><span class="sxs-lookup"><span data-stu-id="69269-521">String</span></span>    | <span data-ttu-id="69269-522">Shoda</span><span class="sxs-lookup"><span data-stu-id="69269-522">Match</span></span> | <span data-ttu-id="69269-523">Komentář</span><span class="sxs-lookup"><span data-stu-id="69269-523">Comment</span></span>               |
| ------------ | --------- | :---: |  -------------------- |
| `[a-z]{2}`   | <span data-ttu-id="69269-524">Dobrý den</span><span class="sxs-lookup"><span data-stu-id="69269-524">hello</span></span>     | <span data-ttu-id="69269-525">Ano</span><span class="sxs-lookup"><span data-stu-id="69269-525">Yes</span></span>   | <span data-ttu-id="69269-526">shody podřetězců</span><span class="sxs-lookup"><span data-stu-id="69269-526">Substring matches</span></span>     |
| `[a-z]{2}`   | <span data-ttu-id="69269-527">123abc456</span><span class="sxs-lookup"><span data-stu-id="69269-527">123abc456</span></span> | <span data-ttu-id="69269-528">Ano</span><span class="sxs-lookup"><span data-stu-id="69269-528">Yes</span></span>   | <span data-ttu-id="69269-529">shody podřetězců</span><span class="sxs-lookup"><span data-stu-id="69269-529">Substring matches</span></span>     |
| `[a-z]{2}`   | <span data-ttu-id="69269-530">mz</span><span class="sxs-lookup"><span data-stu-id="69269-530">mz</span></span>        | <span data-ttu-id="69269-531">Ano</span><span class="sxs-lookup"><span data-stu-id="69269-531">Yes</span></span>   | <span data-ttu-id="69269-532">odpovídá výrazu</span><span class="sxs-lookup"><span data-stu-id="69269-532">Matches expression</span></span>    |
| `[a-z]{2}`   | <span data-ttu-id="69269-533">MZ</span><span class="sxs-lookup"><span data-stu-id="69269-533">MZ</span></span>        | <span data-ttu-id="69269-534">Ano</span><span class="sxs-lookup"><span data-stu-id="69269-534">Yes</span></span>   | <span data-ttu-id="69269-535">nerozlišuje velikost písmen</span><span class="sxs-lookup"><span data-stu-id="69269-535">Not case sensitive</span></span>    |
| `^[a-z]{2}$` | <span data-ttu-id="69269-536">Dobrý den</span><span class="sxs-lookup"><span data-stu-id="69269-536">hello</span></span>     | <span data-ttu-id="69269-537">Ne</span><span class="sxs-lookup"><span data-stu-id="69269-537">No</span></span>    | <span data-ttu-id="69269-538">Zobrazit `^` a `$` výše</span><span class="sxs-lookup"><span data-stu-id="69269-538">See `^` and `$` above</span></span> |
| `^[a-z]{2}$` | <span data-ttu-id="69269-539">123abc456</span><span class="sxs-lookup"><span data-stu-id="69269-539">123abc456</span></span> | <span data-ttu-id="69269-540">Ne</span><span class="sxs-lookup"><span data-stu-id="69269-540">No</span></span>    | <span data-ttu-id="69269-541">Zobrazit `^` a `$` výše</span><span class="sxs-lookup"><span data-stu-id="69269-541">See `^` and `$` above</span></span> |

<span data-ttu-id="69269-542">Další informace o syntaxi regulárního výrazu, naleznete v tématu [regulárních výrazech .NET Frameworku](/dotnet/standard/base-types/regular-expression-language-quick-reference).</span><span class="sxs-lookup"><span data-stu-id="69269-542">For more information on regular expression syntax, see [.NET Framework Regular Expressions](/dotnet/standard/base-types/regular-expression-language-quick-reference).</span></span>

<span data-ttu-id="69269-543">Chcete-li omezit parametr se známou sadou možných hodnot, použijte regulární výraz.</span><span class="sxs-lookup"><span data-stu-id="69269-543">To constrain a parameter to a known set of possible values, use a regular expression.</span></span> <span data-ttu-id="69269-544">Například `{action:regex(^(list|get|create)$)}` odpovídá pouze `action` trasy hodnotu `list`, `get`, nebo `create`.</span><span class="sxs-lookup"><span data-stu-id="69269-544">For example, `{action:regex(^(list|get|create)$)}` only matches the `action` route value to `list`, `get`, or `create`.</span></span> <span data-ttu-id="69269-545">Pokud předaná do slovníku omezení řetězec `^(list|get|create)$` je ekvivalentní.</span><span class="sxs-lookup"><span data-stu-id="69269-545">If passed into the constraints dictionary, the string `^(list|get|create)$` is equivalent.</span></span> <span data-ttu-id="69269-546">Omezení, předané ve slovníku omezení (ne vložené v rámci šablony), které neodpovídají jedno z známé omezení jsou také považovány za regulární výrazy.</span><span class="sxs-lookup"><span data-stu-id="69269-546">Constraints that are passed in the constraints dictionary (not inline within a template) that don't match one of the known constraints are also treated as regular expressions.</span></span>

## <a name="custom-route-constraints"></a><span data-ttu-id="69269-547">Omezení vlastní trasy</span><span class="sxs-lookup"><span data-stu-id="69269-547">Custom Route Constraints</span></span>

<span data-ttu-id="69269-548">Kromě omezení integrované trasy, je možné vytvořit vlastní trasy omezení implementací <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> rozhraní.</span><span class="sxs-lookup"><span data-stu-id="69269-548">In addition to the built-in route constraints, custom route constraints can be created by implementing the <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> interface.</span></span> <span data-ttu-id="69269-549"><xref:Microsoft.AspNetCore.Routing.IRouteConstraint> Rozhraní obsahuje jedinou metodu `Match`, která vrací `true` splnění omezení a `false` jinak.</span><span class="sxs-lookup"><span data-stu-id="69269-549">The <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> interface contains a single method, `Match`, which returns `true` if the constraint is satisfied and `false` otherwise.</span></span>

<span data-ttu-id="69269-550">Chcete-li použít vlastní <xref:Microsoft.AspNetCore.Routing.IRouteConstraint>, typ omezení trasy musí být zaregistrovaný v aplikaci <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> v kontejneru aplikace služby.</span><span class="sxs-lookup"><span data-stu-id="69269-550">To use a custom <xref:Microsoft.AspNetCore.Routing.IRouteConstraint>, the route constraint type must be registered with the app's <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> in the app's service container.</span></span> <span data-ttu-id="69269-551">A <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> je slovník, který mapy směrovat klíče omezení na <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> implementace, které byly ověřeny těchto omezení.</span><span class="sxs-lookup"><span data-stu-id="69269-551">A <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> is a dictionary that maps route constraint keys to <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> implementations that validate those constraints.</span></span> <span data-ttu-id="69269-552">Aplikace <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> je aktualizovat v `Startup.ConfigureServices` jako součást [služby. AddRouting](xref:Microsoft.Extensions.DependencyInjection.RoutingServiceCollectionExtensions.AddRouting*) volání nebo podle konfigurace <xref:Microsoft.AspNetCore.Routing.RouteOptions> přímo s `services.Configure<RouteOptions>`.</span><span class="sxs-lookup"><span data-stu-id="69269-552">An app's <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> can be updated in `Startup.ConfigureServices` either as part of a [services.AddRouting](xref:Microsoft.Extensions.DependencyInjection.RoutingServiceCollectionExtensions.AddRouting*) call or by configuring <xref:Microsoft.AspNetCore.Routing.RouteOptions> directly with `services.Configure<RouteOptions>`.</span></span> <span data-ttu-id="69269-553">Příklad:</span><span class="sxs-lookup"><span data-stu-id="69269-553">For example:</span></span>

```csharp
services.AddRouting(options =>
{
    options.ConstraintMap.Add("customName", typeof(MyCustomConstraint));
});
```

<span data-ttu-id="69269-554">Omezení lze pak použít trasy obvyklým způsobem, pomocí názvu zadanému při registraci typu omezení.</span><span class="sxs-lookup"><span data-stu-id="69269-554">The constraint can then be applied to routes in the usual manner, using the name specified when registering the constraint type.</span></span> <span data-ttu-id="69269-555">Příklad:</span><span class="sxs-lookup"><span data-stu-id="69269-555">For example:</span></span>

```csharp
[HttpGet("{id:customName}")]
public ActionResult<string> Get(string id)
```

::: moniker range=">= aspnetcore-2.2"

## <a name="parameter-transformer-reference"></a><span data-ttu-id="69269-556">Odkaz na parametr transformer</span><span class="sxs-lookup"><span data-stu-id="69269-556">Parameter transformer reference</span></span>

<span data-ttu-id="69269-557">Parametr transformátory:</span><span class="sxs-lookup"><span data-stu-id="69269-557">Parameter transformers:</span></span>

* <span data-ttu-id="69269-558">Při generování odkazu pro spuštění <xref:Microsoft.AspNetCore.Routing.Route>.</span><span class="sxs-lookup"><span data-stu-id="69269-558">Execute when generating a link for a <xref:Microsoft.AspNetCore.Routing.Route>.</span></span>
* <span data-ttu-id="69269-559">Implementace `Microsoft.AspNetCore.Routing.IOutboundParameterTransformer`.</span><span class="sxs-lookup"><span data-stu-id="69269-559">Implement `Microsoft.AspNetCore.Routing.IOutboundParameterTransformer`.</span></span>
* <span data-ttu-id="69269-560">Byli nakonfigurováni pomocí <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap>.</span><span class="sxs-lookup"><span data-stu-id="69269-560">Are configured using <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap>.</span></span>
* <span data-ttu-id="69269-561">Přijmout hodnoty trasy a transformovat ho do novou řetězcovou hodnotu.</span><span class="sxs-lookup"><span data-stu-id="69269-561">Take the parameter's route value and transform it to a new string value.</span></span>
* <span data-ttu-id="69269-562">Výsledkem použití transformovanou hodnotou v vytvořený odkaz.</span><span class="sxs-lookup"><span data-stu-id="69269-562">Result in using the transformed value in the generated link.</span></span>

<span data-ttu-id="69269-563">Například vlastní `slugify` transformer parametr vzoru trasy `blog\{article:slugify}` s `Url.Action(new { article = "MyTestArticle" })` generuje `blog\my-test-article`.</span><span class="sxs-lookup"><span data-stu-id="69269-563">For example, a custom `slugify` parameter transformer in route pattern `blog\{article:slugify}` with `Url.Action(new { article = "MyTestArticle" })` generates `blog\my-test-article`.</span></span>

<span data-ttu-id="69269-564">Transformer parametr vzoru trasy, nakonfigurovat ji nejdřív pomocí <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> v `Startup.ConfigureServices`:</span><span class="sxs-lookup"><span data-stu-id="69269-564">To use a parameter transformer in a route pattern, configure it first using <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> in `Startup.ConfigureServices`:</span></span>

```csharp
services.AddRouting(options =>
{
    // Replace the type and the name used to refer to it with your own
    // IOutboundParameterTransformer implementation
    options.ConstraintMap["slugify"] = typeof(SlugifyParameterTransformer);
});
```

<span data-ttu-id="69269-565">Parametr transformátory se rozhraním, slouží k transformaci identifikátor URI, kde se řeší koncový bod.</span><span class="sxs-lookup"><span data-stu-id="69269-565">Parameter transformers are used by the framework to transform the URI where an endpoint resolves.</span></span> <span data-ttu-id="69269-566">Například technologie ASP.NET Core MVC používá parametr transformátory Transformace hodnoty trasy slouží k přiřazení `area`, `controller`, `action`, a `page`.</span><span class="sxs-lookup"><span data-stu-id="69269-566">For example, ASP.NET Core MVC uses parameter transformers to transform the route value used to match an `area`, `controller`, `action`, and `page`.</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller:slugify=Home}/{action:slugify=Index}/{id?}");
```

<span data-ttu-id="69269-567">Pomocí předchozího postupu akce `SubscriptionManagementController.GetAll()` je nalezena shoda s identifikátorem URI `/subscription-management/get-all`.</span><span class="sxs-lookup"><span data-stu-id="69269-567">With the preceding route, the action `SubscriptionManagementController.GetAll()` is matched with the URI `/subscription-management/get-all`.</span></span> <span data-ttu-id="69269-568">Parametr transformer nedojde ke změně hodnoty trasy sloužící ke generování odkazu.</span><span class="sxs-lookup"><span data-stu-id="69269-568">A parameter transformer doesn't change the route values used to generate a link.</span></span> <span data-ttu-id="69269-569">Například `Url.Action("GetAll", "SubscriptionManagement")` výstupy `/subscription-management/get-all`.</span><span class="sxs-lookup"><span data-stu-id="69269-569">For example, `Url.Action("GetAll", "SubscriptionManagement")` outputs `/subscription-management/get-all`.</span></span>

<span data-ttu-id="69269-570">ASP.NET Core nabízí vytváření rozhraní API pro parametr transformátory pomocí generovaného trasy:</span><span class="sxs-lookup"><span data-stu-id="69269-570">ASP.NET Core provides API conventions for using a parameter transformers with generated routes:</span></span>

* <span data-ttu-id="69269-571">ASP.NET Core MVC má `Microsoft.AspNetCore.Mvc.ApplicationModels.RouteTokenTransformerConvention` konvence rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="69269-571">ASP.NET Core MVC has the `Microsoft.AspNetCore.Mvc.ApplicationModels.RouteTokenTransformerConvention` API convention.</span></span> <span data-ttu-id="69269-572">Tato konvence zadaný parametr transformer platí pro všechny trasy atributů v aplikaci.</span><span class="sxs-lookup"><span data-stu-id="69269-572">This convention applies a specified parameter transformer to all attribute routes in the app.</span></span> <span data-ttu-id="69269-573">Parametr transformer transformuje tokeny atribut trasy, jako se nahradí.</span><span class="sxs-lookup"><span data-stu-id="69269-573">The parameter transformer transforms attribute route tokens as they are replaced.</span></span> <span data-ttu-id="69269-574">Další informace najdete v tématu [transformátoru parametr použít k přizpůsobení náhradních tokenů](/aspnet/core/mvc/controllers/routing#use-a-parameter-transformer-to-customize-token-replacement).</span><span class="sxs-lookup"><span data-stu-id="69269-574">For more information, see [Use a parameter transformer to customize token replacement](/aspnet/core/mvc/controllers/routing#use-a-parameter-transformer-to-customize-token-replacement).</span></span>
* <span data-ttu-id="69269-575">Má Razor Pages `Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteTransformerConvention` konvence rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="69269-575">Razor Pages has the `Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteTransformerConvention` API convention.</span></span> <span data-ttu-id="69269-576">Tato konvence zadaný parametr transformer platí pro všechny automaticky zjistí stránky Razor.</span><span class="sxs-lookup"><span data-stu-id="69269-576">This convention applies a specified parameter transformer to all automatically discovered Razor Pages.</span></span> <span data-ttu-id="69269-577">Parametr transformer transformuje složku a název segmenty souborů tras pro stránky Razor.</span><span class="sxs-lookup"><span data-stu-id="69269-577">The parameter transformer transforms the folder and file name segments of Razor Pages routes.</span></span> <span data-ttu-id="69269-578">Další informace najdete v tématu [transformátoru parametr použít k přizpůsobení stránky trasy](/aspnet/core/razor-pages/razor-pages-conventions#use-a-parameter-transformer-to-customize-page-routes).</span><span class="sxs-lookup"><span data-stu-id="69269-578">For more information, see [Use a parameter transformer to customize page routes](/aspnet/core/razor-pages/razor-pages-conventions#use-a-parameter-transformer-to-customize-page-routes).</span></span>

::: moniker-end

## <a name="url-generation-reference"></a><span data-ttu-id="69269-579">Odkaz na generování adresy URL</span><span class="sxs-lookup"><span data-stu-id="69269-579">URL generation reference</span></span>

<span data-ttu-id="69269-580">Následující příklad ukazuje, jak ke generování odkazu pro trasu zadaný slovník hodnot trasy a <xref:Microsoft.AspNetCore.Routing.RouteCollection>.</span><span class="sxs-lookup"><span data-stu-id="69269-580">The following example shows how to generate a link to a route given a dictionary of route values and a <xref:Microsoft.AspNetCore.Routing.RouteCollection>.</span></span>

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_Dictionary)]

<span data-ttu-id="69269-581"><xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath> Vygeneruje na konci předchozí ukázka je `/package/create/123`.</span><span class="sxs-lookup"><span data-stu-id="69269-581">The <xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath> generated at the end of the preceding sample is `/package/create/123`.</span></span> <span data-ttu-id="69269-582">Poskytuje slovníku `operation` a `id` hodnot "Sledovat balíček trasy" šablony trasy `package/{operation}/{id}`.</span><span class="sxs-lookup"><span data-stu-id="69269-582">The dictionary supplies the `operation` and `id` route values of the "Track Package Route" template, `package/{operation}/{id}`.</span></span> <span data-ttu-id="69269-583">Podrobnosti najdete v tématu ukázkový kód v [použití směrování Middleware](#use-routing-middleware) části nebo [ukázkovou aplikaci](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples).</span><span class="sxs-lookup"><span data-stu-id="69269-583">For details, see the sample code in the [Use Routing Middleware](#use-routing-middleware) section or the [sample app](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples).</span></span>

<span data-ttu-id="69269-584">Druhý parametr <xref:Microsoft.AspNetCore.Routing.VirtualPathContext> konstruktor je kolekce *okolí hodnoty*.</span><span class="sxs-lookup"><span data-stu-id="69269-584">The second parameter to the <xref:Microsoft.AspNetCore.Routing.VirtualPathContext> constructor is a collection of *ambient values*.</span></span> <span data-ttu-id="69269-585">Ambientní hodnoty jsou vhodné použít, protože omezují počet hodnot, které vývojář musí zadat v rámci kontextu požadavku.</span><span class="sxs-lookup"><span data-stu-id="69269-585">Ambient values are convenient to use because they limit the number of values a developer must specify within a request context.</span></span> <span data-ttu-id="69269-586">Aktuální hodnoty trasy z aktuální požadavek jsou považovány za okolí hodnoty pro generování odkazů.</span><span class="sxs-lookup"><span data-stu-id="69269-586">The current route values of the current request are considered ambient values for link generation.</span></span> <span data-ttu-id="69269-587">V aplikaci ASP.NET Core MVC `About` akce `HomeController`, není nutné zadat hodnotu trasy kontroleru propojení `Index` akce&mdash;okolí hodnotu `Home` se používá.</span><span class="sxs-lookup"><span data-stu-id="69269-587">In an ASP.NET Core MVC app's `About` action of the `HomeController`, you don't need to specify the controller route value to link to the `Index` action&mdash;the ambient value of `Home` is used.</span></span>

<span data-ttu-id="69269-588">Ambientní hodnoty, které neodpovídají parametru jsou ignorovány.</span><span class="sxs-lookup"><span data-stu-id="69269-588">Ambient values that don't match a parameter are ignored.</span></span> <span data-ttu-id="69269-589">Okolí hodnoty jsou ignorovány, i když explicitně zadaná hodnota přepíše hodnotu okolí.</span><span class="sxs-lookup"><span data-stu-id="69269-589">Ambient values are also ignored when an explicitly provided value overrides the ambient value.</span></span> <span data-ttu-id="69269-590">Odpovídající vyvolá zleva doprava v adrese URL.</span><span class="sxs-lookup"><span data-stu-id="69269-590">Matching occurs from left to right in the URL.</span></span>

<span data-ttu-id="69269-591">Explicitně zadanými hodnotami, ale které se neshodují. segment trasy, která jsou přidány do řetězce dotazu.</span><span class="sxs-lookup"><span data-stu-id="69269-591">Values explicitly provided but that don't match a segment of the route are added to the query string.</span></span> <span data-ttu-id="69269-592">V následující tabulce jsou uvedeny výsledek při použití šablonu trasy `{controller}/{action}/{id?}`.</span><span class="sxs-lookup"><span data-stu-id="69269-592">The following table shows the result when using the route template `{controller}/{action}/{id?}`.</span></span>

| <span data-ttu-id="69269-593">Ambientní hodnoty</span><span class="sxs-lookup"><span data-stu-id="69269-593">Ambient Values</span></span>                     | <span data-ttu-id="69269-594">Explicitní hodnoty</span><span class="sxs-lookup"><span data-stu-id="69269-594">Explicit Values</span></span>                        | <span data-ttu-id="69269-595">Výsledek</span><span class="sxs-lookup"><span data-stu-id="69269-595">Result</span></span>                  |
| ---------------------------------- | -------------------------------------- | ----------------------- |
| <span data-ttu-id="69269-596">kontroler = "Domů"</span><span class="sxs-lookup"><span data-stu-id="69269-596">controller = "Home"</span></span>                | <span data-ttu-id="69269-597">akce = "O"</span><span class="sxs-lookup"><span data-stu-id="69269-597">action = "About"</span></span>                       | `/Home/About`           |
| <span data-ttu-id="69269-598">kontroler = "Domů"</span><span class="sxs-lookup"><span data-stu-id="69269-598">controller = "Home"</span></span>                | <span data-ttu-id="69269-599">kontroler = "Order", akce = "O"</span><span class="sxs-lookup"><span data-stu-id="69269-599">controller = "Order", action = "About"</span></span> | `/Order/About`          |
| <span data-ttu-id="69269-600">kontroler = "Home", color = "Red"</span><span class="sxs-lookup"><span data-stu-id="69269-600">controller = "Home", color = "Red"</span></span> | <span data-ttu-id="69269-601">akce = "O"</span><span class="sxs-lookup"><span data-stu-id="69269-601">action = "About"</span></span>                       | `/Home/About`           |
| <span data-ttu-id="69269-602">kontroler = "Domů"</span><span class="sxs-lookup"><span data-stu-id="69269-602">controller = "Home"</span></span>                | <span data-ttu-id="69269-603">akce = "O", barva = "Red"</span><span class="sxs-lookup"><span data-stu-id="69269-603">action = "About", color = "Red"</span></span>        | `/Home/About?color=Red` |

<span data-ttu-id="69269-604">Pokud trasa má výchozí hodnotu, která neodpovídá instalovanému parametr a explicitně zadat tuto hodnotu, musí odpovídat výchozí hodnota:</span><span class="sxs-lookup"><span data-stu-id="69269-604">If a route has a default value that doesn't correspond to a parameter and that value is explicitly provided, it must match the default value:</span></span>

```csharp
routes.MapRoute("blog_route", "blog/{*slug}",
    defaults: new { controller = "Blog", action = "ReadPost" });
```

<span data-ttu-id="69269-605">Pokud odpovídající hodnoty pro generování odkazů pouze vytvoří odkaz pro tuto trasu `controller` a `action` jsou k dispozici.</span><span class="sxs-lookup"><span data-stu-id="69269-605">Link generation only generates a link for this route when the matching values for `controller` and `action` are provided.</span></span>

## <a name="complex-segments"></a><span data-ttu-id="69269-606">Komplexní segmenty</span><span class="sxs-lookup"><span data-stu-id="69269-606">Complex segments</span></span>

<span data-ttu-id="69269-607">Komplexní segmentech (například `[Route("/x{token}y")]`) jsou zpracovány odpovídající nahoru literály zprava doleva bez metody greedy způsobem.</span><span class="sxs-lookup"><span data-stu-id="69269-607">Complex segments (for example `[Route("/x{token}y")]`) are processed by matching up literals from right to left in a non-greedy way.</span></span> <span data-ttu-id="69269-608">Zobrazit [tento kód](https://github.com/aspnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) podrobné vysvětlení toho, jak jsou porovnány komplexní segmenty.</span><span class="sxs-lookup"><span data-stu-id="69269-608">See [this code](https://github.com/aspnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) for a detailed explanation of how complex segments are matched.</span></span> <span data-ttu-id="69269-609">[Vzorový kód](https://github.com/aspnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) se nepoužije, ASP.NET Core, ale poskytuje dobré vysvětlení komplexní segmentů.</span><span class="sxs-lookup"><span data-stu-id="69269-609">The [code sample](https://github.com/aspnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) is not used by ASP.NET Core, but it provides a good explanation of complex segments.</span></span>
<!-- While that code is no longer used by ASP.NET Core for complex segment matching, it provides a good match to the current algorithm. The [current code](https://github.com/aspnet/AspNetCore/blob/91514c9af7e0f4c44029b51f05a01c6fe4c96e4c/src/Http/Routing/src/Matching/DfaMatcherBuilder.cs#L227-L244) is too abstracted from matching to be useful for understanding complex segment matching.
-->
