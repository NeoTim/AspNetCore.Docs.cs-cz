---
title: Směrování v ASP.NET Core
author: ardalis
description: Zjistit, jak je zodpovědná za mapování příchozího požadavku na obslužnou rutinu trasy funkci směrování ASP.NET Core.
ms.author: riande
ms.date: 10/14/2016
uid: fundamentals/routing
ms.openlocfilehash: 0bb62cad0dcf54d593171d6a40eb1510a88eb6b3
ms.sourcegitcommit: a1afd04758e663d7062a5bfa8a0d4dca38f42afc
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/20/2018
ms.locfileid: "36274892"
---
# <a name="routing-in-aspnet-core"></a><span data-ttu-id="ca0b1-103">Směrování v ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="ca0b1-103">Routing in ASP.NET Core</span></span>

<span data-ttu-id="ca0b1-104">Podle [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), a [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="ca0b1-104">By [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

<span data-ttu-id="ca0b1-105">Funkci směrování je zodpovědná za mapování příchozího požadavku na obslužnou rutinu trasy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-105">Routing functionality is responsible for mapping an incoming request to a route handler.</span></span> <span data-ttu-id="ca0b1-106">Trasy definované v aplikaci ASP.NET a nakonfiguruje při spuštění aplikace.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-106">Routes are defined in the ASP.NET app and configured when the app starts up.</span></span> <span data-ttu-id="ca0b1-107">Trasa může volitelně získat hodnoty z adresy URL obsažené v požadavku a potom tyto hodnoty lze použít pro zpracování požadavku.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-107">A route can optionally extract values from the URL contained in the request, and these values can then be used for request processing.</span></span> <span data-ttu-id="ca0b1-108">Pomocí informací trasy z aplikace ASP.NET, funkci směrování je také možné k vygenerování adres URL, které mapují na obslužné rutiny trasy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-108">Using route information from the ASP.NET app, the routing functionality is also able to generate URLs that map to route handlers.</span></span> <span data-ttu-id="ca0b1-109">Proto směrování najdete na základě adresy URL nebo adresa URL odpovídající obslužná rutina trasy na základě informací o směrování obslužné rutiny obslužná rutina trasy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-109">Therefore, routing can find a route handler based on a URL, or the URL corresponding to a given route handler based on route handler information.</span></span>

>[!IMPORTANT]
> <span data-ttu-id="ca0b1-110">Tento dokument popisuje nízké úrovni ASP.NET Core směrování.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-110">This document covers the low level ASP.NET Core routing.</span></span> <span data-ttu-id="ca0b1-111">ASP.NET MVC základní směrování, najdete v části [trasy, která má akce kontroleru](../mvc/controllers/routing.md)</span><span class="sxs-lookup"><span data-stu-id="ca0b1-111">For ASP.NET Core MVC routing, see [Route to controller actions](../mvc/controllers/routing.md)</span></span>

<span data-ttu-id="ca0b1-112">[Zobrazit nebo stáhnout ukázkový kód](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/sample) ([stažení](xref:tutorials/index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="ca0b1-112">[View or download sample code](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/sample) ([how to download](xref:tutorials/index#how-to-download-a-sample))</span></span>

## <a name="routing-basics"></a><span data-ttu-id="ca0b1-113">Směrování – základy</span><span class="sxs-lookup"><span data-stu-id="ca0b1-113">Routing basics</span></span>

<span data-ttu-id="ca0b1-114">Směrování používá *trasy* (implementace [IRouter](/dotnet/api/microsoft.aspnetcore.routing.irouter)) na:</span><span class="sxs-lookup"><span data-stu-id="ca0b1-114">Routing uses *routes* (implementations of [IRouter](/dotnet/api/microsoft.aspnetcore.routing.irouter)) to:</span></span>

* <span data-ttu-id="ca0b1-115">mapování příchozích požadavků do *směrovat obslužné rutiny*</span><span class="sxs-lookup"><span data-stu-id="ca0b1-115">map incoming requests to *route handlers*</span></span>

* <span data-ttu-id="ca0b1-116">vygenerování adres URL použít v odpovědi</span><span class="sxs-lookup"><span data-stu-id="ca0b1-116">generate URLs used in responses</span></span>

<span data-ttu-id="ca0b1-117">Obecně platí aplikace má jedinou kolekci tras.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-117">Generally, an app has a single collection of routes.</span></span> <span data-ttu-id="ca0b1-118">Pokud dorazí požadavek, je v pořadí zpracování kolekce tras.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-118">When a request arrives, the route collection is processed in order.</span></span> <span data-ttu-id="ca0b1-119">Příchozí požadavek vypadá pro trasu, která odpovídá adrese URL žádosti voláním `RouteAsync` metodu na každý postup k dispozici v kolekci trasy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-119">The incoming request looks for a route that matches the request URL by calling the `RouteAsync` method on each available route in the route collection.</span></span> <span data-ttu-id="ca0b1-120">Naopak odpověď můžete používat směrování k vygenerování adres URL (například pro přesměrování nebo odkazy) na základě informací o směrování a proto vyhnout se nutnosti pevně adresy URL, která pomáhá udržovatelnosti.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-120">By contrast, a response can use routing to generate URLs (for example, for redirection or links) based on route information, and thus avoid having to hard-code URLs, which helps maintainability.</span></span>

<span data-ttu-id="ca0b1-121">Směrování je připojený k [middleware](xref:fundamentals/middleware/index) kanálu pomocí `RouterMiddleware` třídy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-121">Routing is connected to the [middleware](xref:fundamentals/middleware/index) pipeline by the `RouterMiddleware` class.</span></span> <span data-ttu-id="ca0b1-122">[Jádro ASP.NET MVC](xref:mvc/overview) přidá směrování do middlewaru v řadě jako součást její konfiguraci.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-122">[ASP.NET Core MVC](xref:mvc/overview) adds routing to the middleware pipeline as part of its configuration.</span></span> <span data-ttu-id="ca0b1-123">Další informace o použití směrování jako samostatná součást najdete v tématu [pomocí směrování middleware](#using-routing-middleware).</span><span class="sxs-lookup"><span data-stu-id="ca0b1-123">To learn about using routing as a standalone component, see [Using routing middleware](#using-routing-middleware).</span></span>

<a name="url-matching-ref"></a>

### <a name="url-matching"></a><span data-ttu-id="ca0b1-124">Adresa URL odpovídající</span><span class="sxs-lookup"><span data-stu-id="ca0b1-124">URL matching</span></span>

<span data-ttu-id="ca0b1-125">Adresa URL odpovídající je proces, podle které směrování odešle příchozí požadavek na *obslužná rutina*.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-125">URL matching is the process by which routing dispatches an incoming request to a *handler*.</span></span> <span data-ttu-id="ca0b1-126">Tento proces se obecně na základě dat cesty URL, ale lze rozšířit vzít v úvahu všechna data v požadavku.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-126">This process is generally based on data in the URL path, but can be extended to consider any data in the request.</span></span> <span data-ttu-id="ca0b1-127">Možnost Expedovat požadavky k oddělení obslužné rutiny je klíčová pro škálování velikost a složitost aplikace.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-127">The ability to dispatch requests to separate handlers is key to scaling the size and complexity of an application.</span></span>

<span data-ttu-id="ca0b1-128">Zadejte příchozí požadavky `RouterMiddleware`, který volá `RouteAsync` metodu na každý postup v pořadí.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-128">Incoming requests enter the `RouterMiddleware`, which calls the `RouteAsync` method on each route in sequence.</span></span> <span data-ttu-id="ca0b1-129">`IRouter` Zvolí instancí ohledně *zpracování* požadavek nastavením `RouteContext.Handler` na hodnotu null `RequestDelegate`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-129">The `IRouter` instance chooses whether to *handle* the request by setting the `RouteContext.Handler` to a non-null `RequestDelegate`.</span></span> <span data-ttu-id="ca0b1-130">Pokud trasu nastaví obslužnou rutinu pro požadavek, bude volána trasy zpracování zastaví a obslužné rutiny pro zpracování požadavku.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-130">If a route sets a handler for the request, route processing stops and the handler will be invoked to process the request.</span></span> <span data-ttu-id="ca0b1-131">Pokud se pokusil všechny trasy a pro požadavek nebyl nalezen žádná obslužná rutina, middleware volá *Další* a je vyvolat další middleware v kanálu požadavku.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-131">If all routes are tried and no handler is found for the request, the middleware calls *next* and the next middleware in the request pipeline is invoked.</span></span>

<span data-ttu-id="ca0b1-132">Primární vstup `RouteAsync` je `RouteContext.HttpContext` přidružené k aktuální žádosti.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-132">The primary input to `RouteAsync` is the `RouteContext.HttpContext` associated with the current request.</span></span> <span data-ttu-id="ca0b1-133">`RouteContext.Handler` a `RouteContext.RouteData` jsou výstupů, které budou nastaveny po trasa odpovídá.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-133">The `RouteContext.Handler` and `RouteContext.RouteData` are outputs that will be set after a route matches.</span></span>

<span data-ttu-id="ca0b1-134">Shoda během `RouteAsync` bude také nastavit vlastnosti `RouteContext.RouteData` odpovídající hodnoty, podle dosud provedené zpracování žádostí.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-134">A match during `RouteAsync` will also set the properties of the `RouteContext.RouteData` to appropriate values based on the request processing done so far.</span></span> <span data-ttu-id="ca0b1-135">Pokud trasa odpovídá žádosti `RouteContext.RouteData` bude obsahovat informace o stavu důležité o *výsledek*.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-135">If a route matches a request, the `RouteContext.RouteData` will contain important state information about the *result*.</span></span>

<span data-ttu-id="ca0b1-136">`RouteData.Values` je slovník *hodnot trasy* vytváří na základě trasy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-136">`RouteData.Values` is a dictionary of *route values* produced from the route.</span></span> <span data-ttu-id="ca0b1-137">Tyto hodnoty jsou obvykle určen tokenizaci adresu URL a použít tak, aby přijímal uživatelský vstup, nebo pokud chcete udělat další odesílající rozhodnutích uvnitř aplikace.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-137">These values are usually determined by tokenizing the URL, and can be used to accept user input, or to make further dispatching decisions inside the application.</span></span>

<span data-ttu-id="ca0b1-138">`RouteData.DataTokens`  je kontejner objektů a dat o další data související s porovnávané trasy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-138">`RouteData.DataTokens`  is a property bag of additional data related to the matched route.</span></span> <span data-ttu-id="ca0b1-139">`DataTokens` jsou k dispozici pro podporu přiřadit stavu, ve kterém data s každou trasy, aby aplikace mohla provést rozhodnutí o později založené na směrování, která odpovídá.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-139">`DataTokens` are provided to support associating state data with each route so the application can make decisions later based on which route matched.</span></span> <span data-ttu-id="ca0b1-140">Tyto hodnoty jsou definované na vývojáře a proveďte **není** ovlivnit chování směrování žádným způsobem.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-140">These values are developer-defined and do **not** affect the behavior of routing in any way.</span></span> <span data-ttu-id="ca0b1-141">Kromě toho hodnoty, které jsou schované na okraji v datové tokeny, jež mohou být jakéhokoli typu, na rozdíl od hodnoty trasy, které musí být snadno převést do a z řetězce.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-141">Additionally, values stashed in data tokens can be of any type, in contrast to route values, which must be easily convertible to and from strings.</span></span>

<span data-ttu-id="ca0b1-142">`RouteData.Routers` je seznam tras, které trvalo součástí úspěšně odpovídající požadavku.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-142">`RouteData.Routers` is a list of the routes that took part in successfully matching the request.</span></span> <span data-ttu-id="ca0b1-143">Trasy lze vnořit do sebe navzájem a `Routers` vlastnost odráží cestu prostřednictvím logického stromu trasy, jejichž výsledkem shody.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-143">Routes can be nested inside one another, and the `Routers` property reflects the path through the logical tree of routes that resulted in a match.</span></span> <span data-ttu-id="ca0b1-144">Obecně první položky v `Routers` je kolekce tras a má být použita pro generování adresy URL.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-144">Generally the first item in `Routers` is the route collection, and should be used for URL generation.</span></span> <span data-ttu-id="ca0b1-145">Poslední položky v `Routers` je obslužné rutině trasy, který odpovídá.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-145">The last item in `Routers` is the route handler that matched.</span></span>

### <a name="url-generation"></a><span data-ttu-id="ca0b1-146">Generování adresy URL</span><span class="sxs-lookup"><span data-stu-id="ca0b1-146">URL generation</span></span>

<span data-ttu-id="ca0b1-147">Generování adresy URL je proces, pomocí které směrování, můžete vytvořit cestu adresy URL na základě sady hodnot trasy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-147">URL generation is the process by which routing can create a URL path based on a set of route values.</span></span> <span data-ttu-id="ca0b1-148">To umožňuje logického oddělení mezi vaší obslužné rutiny a v adresách URL, které k nim přístup.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-148">This allows for a logical separation between your handlers and the URLs that access them.</span></span>

<span data-ttu-id="ca0b1-149">Probíhá podobně iterativní generování adresy URL, ale začíná uživatele nebo framework kód volání do `GetVirtualPath` metoda kolekce tras.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-149">URL generation follows a similar iterative process, but starts with user or framework code calling into the `GetVirtualPath` method of the route collection.</span></span> <span data-ttu-id="ca0b1-150">Každý *trasy* pak bude mít jeho `GetVirtualPath` metoda volána v pořadí, až jinou hodnotu než null `VirtualPathData` je vrácen.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-150">Each *route* will then have its `GetVirtualPath` method called in sequence until a non-null `VirtualPathData` is returned.</span></span>

<span data-ttu-id="ca0b1-151">Primární vstup do `GetVirtualPath` jsou:</span><span class="sxs-lookup"><span data-stu-id="ca0b1-151">The primary inputs to `GetVirtualPath` are:</span></span>

* `VirtualPathContext.HttpContext`

* `VirtualPathContext.Values`

* `VirtualPathContext.AmbientValues`

<span data-ttu-id="ca0b1-152">Trasy především používat hodnoty trasy poskytované `Values` a `AmbientValues` rozhodnout, kdy je možné ke generování adresy URL a jaké hodnoty Pokud chcete zahrnout.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-152">Routes primarily use the route values provided by the `Values` and `AmbientValues` to decide where it's possible to generate a URL and what values to include.</span></span> <span data-ttu-id="ca0b1-153">`AmbientValues` Jsou sadu hodnot trasy, které byly vytvořeny z odpovídající aktuální požadavek s směrování systému.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-153">The `AmbientValues` are the set of route values that were produced from matching the current request with the routing system.</span></span> <span data-ttu-id="ca0b1-154">Naproti tomu `Values` jsou hodnoty trasy, které určují, jak vygenerovat požadovanou adresu URL pro aktuální operaci.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-154">In contrast, `Values` are the route values that specify how to generate the desired URL for the current operation.</span></span> <span data-ttu-id="ca0b1-155">`HttpContext` Je k dispozici v případě, že trasu potřeba získat služeb nebo další data související s aktuálním kontextu.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-155">The `HttpContext` is provided in case a route needs to get services or additional data associated with the current context.</span></span>

<span data-ttu-id="ca0b1-156">Tip: Zamyslet nad `Values` jako sadu přepsání `AmbientValues`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-156">Tip: Think of `Values` as being a set of overrides for the `AmbientValues`.</span></span> <span data-ttu-id="ca0b1-157">Generování adresy URL se pokusí znovu použít hodnoty trasy z aktuální žádosti, abyste usnadnili snadnou k vygenerování adres URL pro odkazy pomocí stejného postupu nebo hodnoty trasy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-157">URL generation tries to reuse route values from the current request to make it easy to generate URLs for links using the same route or route values.</span></span>

<span data-ttu-id="ca0b1-158">Výstup `GetVirtualPath` je `VirtualPathData`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-158">The output of `GetVirtualPath` is a `VirtualPathData`.</span></span> <span data-ttu-id="ca0b1-159">`VirtualPathData` je paralelní z `RouteData`; obsahuje `VirtualPath` pro adresu URL výstup a některé další vlastnosti, které by měla být nastavena trasy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-159">`VirtualPathData` is a parallel of `RouteData`; it contains the `VirtualPath` for the output URL and some additional properties that should be set by the route.</span></span>

<span data-ttu-id="ca0b1-160">`VirtualPathData.VirtualPath` Vlastnost obsahuje *virtuální cestu* vyprodukované trasy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-160">The `VirtualPathData.VirtualPath` property contains the *virtual path* produced by the route.</span></span> <span data-ttu-id="ca0b1-161">Podle potřeby můžete zpracovat další cestu.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-161">Depending on your needs you may need to process the path further.</span></span> <span data-ttu-id="ca0b1-162">Například pokud chcete vykreslit vygenerovaná adresa URL ve formátu HTML budete muset předřazení základní cesta aplikace.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-162">For instance, if you want to render the generated URL in HTML you need to prepend the base path of the application.</span></span>

<span data-ttu-id="ca0b1-163">`VirtualPathData.Router` Je odkaz na trasy, která se úspěšně vygeneroval. adresa URL.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-163">The `VirtualPathData.Router` is a reference to the route that successfully generated the URL.</span></span>

<span data-ttu-id="ca0b1-164">`VirtualPathData.DataTokens` Vlastnosti je slovník další data související s trasy, která generuje adresu URL.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-164">The `VirtualPathData.DataTokens` properties is a dictionary of additional data related to the route that generated the URL.</span></span> <span data-ttu-id="ca0b1-165">Toto je paralelní z `RouteData.DataTokens`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-165">This is the parallel of `RouteData.DataTokens`.</span></span>

### <a name="creating-routes"></a><span data-ttu-id="ca0b1-166">Vytváření tras</span><span class="sxs-lookup"><span data-stu-id="ca0b1-166">Creating routes</span></span>

<span data-ttu-id="ca0b1-167">Směrování poskytuje `Route` třída jako standardní implementace `IRouter`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-167">Routing provides the `Route` class as the standard implementation of `IRouter`.</span></span> <span data-ttu-id="ca0b1-168">`Route` používá *šablonu trasy* syntaxe k definování vzorů, které bude odpovídat proti cestu adresy URL při `RouteAsync` je volána.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-168">`Route` uses the *route template* syntax to define patterns that will match against the URL path when `RouteAsync` is called.</span></span> <span data-ttu-id="ca0b1-169">`Route` použije stejnou šablonu trasy k vygenerování adresy URL při `GetVirtualPath` je volána.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-169">`Route` will use the same route template to generate a URL when `GetVirtualPath` is called.</span></span>

<span data-ttu-id="ca0b1-170">Většina aplikací bude vytvářet trasy voláním `MapRoute` nebo jeden z podobné rozšiřující metody definované na `IRouteBuilder`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-170">Most applications will create routes by calling `MapRoute` or one of the similar extension methods defined on `IRouteBuilder`.</span></span> <span data-ttu-id="ca0b1-171">Všechny tyto metody se vytvořit instanci `Route` a přidat jej do kolekce tras.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-171">All of these methods will create an instance of `Route` and add it to the route collection.</span></span>

<span data-ttu-id="ca0b1-172">Poznámka: `MapRoute` neberou parametr obslužná rutina trasy – přidá jenom trasy, která bude zpracovávat `DefaultHandler`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-172">Note: `MapRoute` doesn't take a route handler parameter - it only adds routes that will be handled by the `DefaultHandler`.</span></span> <span data-ttu-id="ca0b1-173">Vzhledem k tomu, že je výchozí obslužnou rutinu `IRouter`, mohou rozhodnout není pro zpracování požadavku.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-173">Since the default handler is an `IRouter`, it may decide not to handle the request.</span></span> <span data-ttu-id="ca0b1-174">ASP.NET MVC je například typicky nakonfigurován jako výchozí obslužnou rutinu, která zpracovává jenom požadavky které odpovídají k dispozici kontroleru a akce.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-174">For example, ASP.NET MVC is typically configured as a default handler that only handles requests that match an available controller and action.</span></span> <span data-ttu-id="ca0b1-175">Další informace o směrování do MVC naleznete v tématu [trasy, která má akce kontroleru](../mvc/controllers/routing.md).</span><span class="sxs-lookup"><span data-stu-id="ca0b1-175">To learn more about routing to MVC, see [Route to controller actions](../mvc/controllers/routing.md).</span></span>

<span data-ttu-id="ca0b1-176">Toto je příklad `MapRoute` volání používané typické definice trasy ASP.NET MVC:</span><span class="sxs-lookup"><span data-stu-id="ca0b1-176">This is an example of a `MapRoute` call used by a typical ASP.NET MVC route definition:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="ca0b1-177">Tato šablona bude shodovat s cestu adresy URL jako `/Products/Details/17` a hodnoty trasy pro extrahování `{ controller = Products, action = Details, id = 17 }`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-177">This template will match a URL path like `/Products/Details/17` and extract the route values `{ controller = Products, action = Details, id = 17 }`.</span></span> <span data-ttu-id="ca0b1-178">Hodnoty trasy jsou určeny rozdělení do segmentů cesty URL a odpovídající každý segment se *směrovat parametr* název v šabloně trasy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-178">The route values are determined by splitting the URL path into segments, and matching each segment with the *route parameter* name in the route template.</span></span> <span data-ttu-id="ca0b1-179">Jsou pojmenované parametry trasy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-179">Route parameters are named.</span></span> <span data-ttu-id="ca0b1-180">Jste definované uzavřením název parametru do složených závorek `{ }`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-180">They're defined by enclosing the parameter name in braces `{ }`.</span></span>

<span data-ttu-id="ca0b1-181">Výše uvedené šablony může také odpovídat cesty URL `/` a vytvoří hodnoty `{ controller = Home, action = Index }`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-181">The template above could also match the URL path `/` and would produce the values `{ controller = Home, action = Index }`.</span></span> <span data-ttu-id="ca0b1-182">K tomu dojde, protože `{controller}` a `{action}` parametry trasy mají výchozí hodnoty a `id` je volitelný parametr trasy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-182">This happens because the `{controller}` and `{action}` route parameters have default values, and the `id` route parameter is optional.</span></span> <span data-ttu-id="ca0b1-183">Je rovno `=` přihlašovací následuje hodnotu po parametr název trasy, která definuje výchozí hodnotu pro parametr.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-183">An equals `=` sign followed by a value after the route parameter name defines a default value for the parameter.</span></span> <span data-ttu-id="ca0b1-184">Otazník `?` po parametr název trasy, která definuje jako volitelný parametr.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-184">A question mark `?` after the route parameter name defines the parameter as optional.</span></span> <span data-ttu-id="ca0b1-185">Parametry s hodnotou výchozí směrování *vždy* vytvoření hodnoty trasy, pokud trasa odpovídá – volitelné parametry nebude vytvoření hodnoty trasy, pokud se žádné odpovídající segment cesty adresy URL.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-185">Route parameters with a default value *always* produce a route value when the route matches - optional parameters won't produce a route value if there was no corresponding URL path segment.</span></span>

<span data-ttu-id="ca0b1-186">V tématu [odkaz šablonu trasy](#route-template-reference) důkladné popis funkcí šablonu trasy a syntaxe.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-186">See [route-template-reference](#route-template-reference) for a thorough description of route template features and syntax.</span></span>

<span data-ttu-id="ca0b1-187">Tento příklad obsahuje *směrovat omezení*:</span><span class="sxs-lookup"><span data-stu-id="ca0b1-187">This example includes a *route constraint*:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id:int}");
```

<span data-ttu-id="ca0b1-188">Tato šablona bude shodovat s cestu adresy URL jako `/Products/Details/17`, ale ne `/Products/Details/Apples`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-188">This template will match a URL path like `/Products/Details/17`, but not `/Products/Details/Apples`.</span></span> <span data-ttu-id="ca0b1-189">Definici parametru trasy `{id:int}` definuje *směrovat omezení* pro `id` parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-189">The route parameter definition `{id:int}` defines a *route constraint* for the `id` route parameter.</span></span> <span data-ttu-id="ca0b1-190">Implementace omezení trasy `IRouteConstraint` a hodnoty trasy k ověření je zkontrolovat.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-190">Route constraints implement `IRouteConstraint` and inspect route values to verify them.</span></span> <span data-ttu-id="ca0b1-191">V tomto příkladu hodnota trasy `id` se musí dát převést na celé číslo.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-191">In this example the route value `id` must be convertible to an integer.</span></span> <span data-ttu-id="ca0b1-192">V tématu [odkaz omezení trasy](#route-constraint-reference) podrobnější vysvětlení omezení trasy, které jsou poskytovány rozhraní.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-192">See [route-constraint-reference](#route-constraint-reference) for a more detailed explanation of route constraints that are provided by the framework.</span></span>

<span data-ttu-id="ca0b1-193">Další přetížení `MapRoute` přijmout hodnoty pro `constraints`, `dataTokens`, a `defaults`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-193">Additional overloads of `MapRoute` accept values for `constraints`, `dataTokens`, and `defaults`.</span></span> <span data-ttu-id="ca0b1-194">Tyto další parametry `MapRoute` jsou definovány jako typ `object`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-194">These additional parameters of `MapRoute` are defined as type `object`.</span></span> <span data-ttu-id="ca0b1-195">Typické použití těchto parametrů je předat anonymně typu objektu, kde názvy vlastností anonymního typu odpovídal směrovat názvy parametrů.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-195">The typical usage of these parameters is to pass an anonymously typed object, where the property names of the anonymous type match route parameter names.</span></span>

<span data-ttu-id="ca0b1-196">Následující dva příklady vytvořit ekvivalentní trasy:</span><span class="sxs-lookup"><span data-stu-id="ca0b1-196">The following two examples create equivalent routes:</span></span>

```csharp
routes.MapRoute(
    name: "default_route",
    template: "{controller}/{action}/{id?}",
    defaults: new { controller = "Home", action = "Index" });

routes.MapRoute(
    name: "default_route",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="ca0b1-197">Tip: Vložené syntaxi pro definování omezení a výchozích hodnot může být vhodnější pro jednoduché trasy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-197">Tip: The inline syntax for defining constraints and defaults can be more convenient for simple routes.</span></span> <span data-ttu-id="ca0b1-198">Existují však funkce, jako je tokeny dat, které nepodporuje vložené syntaxe.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-198">However, there are features such as data tokens which are not supported by inline syntax.</span></span>

<span data-ttu-id="ca0b1-199">Tento příklad ukazuje několik další funkce:</span><span class="sxs-lookup"><span data-stu-id="ca0b1-199">This example demonstrates a few more features:</span></span>

```csharp
routes.MapRoute(
  name: "blog",
  template: "Blog/{*article}",
  defaults: new { controller = "Blog", action = "ReadArticle" });
```

<span data-ttu-id="ca0b1-200">Tato šablona bude shodovat s cestu adresy URL jako `/Blog/All-About-Routing/Introduction` , který extrahuje hodnoty `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-200">This template will match a URL path like `/Blog/All-About-Routing/Introduction` and will extract the values `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span></span> <span data-ttu-id="ca0b1-201">Výchozí trasu hodnoty pro `controller` a `action` vznikají pomocí funkcí trasy, i když neexistují žádné odpovídající parametry trasy v šabloně.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-201">The default route values for `controller` and `action` are produced by the route even though there are no corresponding route parameters in the template.</span></span> <span data-ttu-id="ca0b1-202">Výchozí hodnoty lze zadat v šabloně trasy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-202">Default values can be specified in the route template.</span></span> <span data-ttu-id="ca0b1-203">`article` Parametr trasy je definován jako *catch-all* podle vzhled hvězdičku `*` před název parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-203">The `article` route parameter is defined as a *catch-all* by the appearance of an asterisk `*` before the route parameter name.</span></span> <span data-ttu-id="ca0b1-204">Parametry trasy catch-all zaznamenat zbývající část cesty URL a také můžete přiřadit prázdný řetězec.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-204">Catch-all route parameters capture the remainder of the URL path, and can also match the empty string.</span></span>

<span data-ttu-id="ca0b1-205">Tento příklad přidá tokeny omezení a data trasy:</span><span class="sxs-lookup"><span data-stu-id="ca0b1-205">This example adds route constraints and data tokens:</span></span>

```csharp
routes.MapRoute(
    name: "us_english_products",
    template: "en-US/Products/{id}",
    defaults: new { controller = "Products", action = "Details" },
    constraints: new { id = new IntRouteConstraint() },
    dataTokens: new { locale = "en-US" });
```

<span data-ttu-id="ca0b1-206">Tato šablona bude shodovat s cestu adresy URL jako `/Products/5` , který extrahuje hodnoty `{ controller = Products, action = Details, id = 5 }` a tokeny dat `{ locale = en-US }`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-206">This template will match a URL path like `/Products/5` and will extract the values `{ controller = Products, action = Details, id = 5 }` and the data tokens `{ locale = en-US }`.</span></span>

![Místní hodnoty – tokenů systému Windows](routing/_static/tokens.png)

<a name="id1"></a>

### <a name="url-generation"></a><span data-ttu-id="ca0b1-208">Generování adresy URL</span><span class="sxs-lookup"><span data-stu-id="ca0b1-208">URL generation</span></span>

<span data-ttu-id="ca0b1-209">`Route` Třídy můžete také provádět generování adresy URL pomocí kombinace sady hodnot trasy s jeho šablonu trasy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-209">The `Route` class can also perform URL generation by combining a set of route values with its route template.</span></span> <span data-ttu-id="ca0b1-210">Toto je logicky procesu zpětné odpovídajících cesty URL.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-210">This is logically the reverse process of matching the URL path.</span></span>

<span data-ttu-id="ca0b1-211">Tip: Abyste lépe pochopili generování adresy URL, představte si, jaké adresy URL, kterou chcete vygenerovat a pak myslíte o tom, jak šablonu trasy odpovídá tuto adresu URL.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-211">Tip: To better understand URL generation, imagine what URL you want to generate and then think about how a route template would match that URL.</span></span> <span data-ttu-id="ca0b1-212">Co hodnoty by vytvořeného?</span><span class="sxs-lookup"><span data-stu-id="ca0b1-212">What values would be produced?</span></span> <span data-ttu-id="ca0b1-213">Jedná se o ekvivalent hrubý toho, jak funguje generování adresy URL `Route` třídy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-213">This is the rough equivalent of how URL generation works in the `Route` class.</span></span>

<span data-ttu-id="ca0b1-214">Tento příklad používá základní trasy styl rozhraní ASP.NET MVC:</span><span class="sxs-lookup"><span data-stu-id="ca0b1-214">This example uses a basic ASP.NET MVC style route:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="ca0b1-215">S hodnotami trasy `{ controller = Products, action = List }`, bude tato trasa generování adresy URL `/Products/List`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-215">With the route values `{ controller = Products, action = List }`, this route will generate the URL `/Products/List`.</span></span> <span data-ttu-id="ca0b1-216">Hodnoty trasy jsou nahrazena pro odpovídající parametry trasy k vytvoření cesty URL.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-216">The route values are substituted for the corresponding route parameters to form the URL path.</span></span> <span data-ttu-id="ca0b1-217">Protože `id` je volitelný parametr trasy, je žádný problém, že nemá žádnou hodnotu.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-217">Since `id` is an optional route parameter, it's no problem that it doesn't have a value.</span></span>

<span data-ttu-id="ca0b1-218">S hodnotami trasy `{ controller = Home, action = Index }`, bude tato trasa generování adresy URL `/`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-218">With the route values `{ controller = Home, action = Index }`, this route will generate the URL `/`.</span></span> <span data-ttu-id="ca0b1-219">Hodnoty trasy, které byly poskytnuty shodovala výchozí hodnoty, takže segmenty odpovídající tyto hodnoty lze bezpečně vynechat.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-219">The route values that were provided match the default values so the segments corresponding to those values can be safely omitted.</span></span> <span data-ttu-id="ca0b1-220">Upozorňujeme, že obě adresy URL generované by odezvy s tuto definici trasy a vytvořit stejné hodnoty trasy, které jste použili k vytvoření adresy URL.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-220">Note that both URLs generated would round-trip with this route definition and produce the same route values that were used to generate the URL.</span></span>

<span data-ttu-id="ca0b1-221">Tip: By měla použít aplikace pomocí ASP.NET MVC `UrlHelper` k vygenerování adres URL namísto volání do směrování přímo.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-221">Tip: An app using ASP.NET MVC should use `UrlHelper` to generate URLs instead of calling into routing directly.</span></span>

<span data-ttu-id="ca0b1-222">Další podrobnosti o procesu generování adresy URL najdete v tématu [odkaz generování adresu url](#url-generation-reference).</span><span class="sxs-lookup"><span data-stu-id="ca0b1-222">For more details about the URL generation process, see [url-generation-reference](#url-generation-reference).</span></span>

## <a name="using-routing-middleware"></a><span data-ttu-id="ca0b1-223">Pomocí směrování middlewaru</span><span class="sxs-lookup"><span data-stu-id="ca0b1-223">Using Routing Middleware</span></span>

<span data-ttu-id="ca0b1-224">Přidejte balíček NuGet "Microsoft.AspNetCore.Routing".</span><span class="sxs-lookup"><span data-stu-id="ca0b1-224">Add the NuGet package "Microsoft.AspNetCore.Routing".</span></span>

<span data-ttu-id="ca0b1-225">Přidání směrování do kontejneru služby v *Startup.cs*:</span><span class="sxs-lookup"><span data-stu-id="ca0b1-225">Add routing to the service container in *Startup.cs*:</span></span>

[!code-csharp[](../fundamentals/routing/sample/RoutingSample/Startup.cs?highlight=3&start=11&end=14)]

<span data-ttu-id="ca0b1-226">Musí být nakonfigurované trasy v `Configure` metoda v `Startup` třídy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-226">Routes must be configured in the `Configure` method in the `Startup` class.</span></span> <span data-ttu-id="ca0b1-227">Následující ukázka používá tato rozhraní API:</span><span class="sxs-lookup"><span data-stu-id="ca0b1-227">The sample below uses these APIs:</span></span>

* `RouteBuilder`
* `Build`
* <span data-ttu-id="ca0b1-228">`MapGet`  Odpovídá pouze požadavky HTTP GET</span><span class="sxs-lookup"><span data-stu-id="ca0b1-228">`MapGet`  Matches only HTTP GET requests</span></span>
* `UseRouter`

```csharp
public void Configure(IApplicationBuilder app, ILoggerFactory loggerFactory)
{
    var trackPackageRouteHandler = new RouteHandler(context =>
    {
        var routeValues = context.GetRouteData().Values;
        return context.Response.WriteAsync(
            $"Hello! Route values: {string.Join(", ", routeValues)}");
    });

    var routeBuilder = new RouteBuilder(app, trackPackageRouteHandler);

    routeBuilder.MapRoute(
        "Track Package Route",
        "package/{operation:regex(^(track|create|detonate)$)}/{id:int}");

    routeBuilder.MapGet("hello/{name}", context =>
    {
        var name = context.GetRouteValue("name");
        // This is the route handler when HTTP GET "hello/<anything>"  matches
        // To match HTTP GET "hello/<anything>/<anything>,
        // use routeBuilder.MapGet("hello/{*name}"
        return context.Response.WriteAsync($"Hi, {name}!");
    });

    var routes = routeBuilder.Build();
    app.UseRouter(routes);
}
```

<span data-ttu-id="ca0b1-229">Následující tabulka obsahuje odpovědi s danou identifikátory URI.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-229">The table below shows the responses with the given URIs.</span></span>

| <span data-ttu-id="ca0b1-230">Identifikátor URI</span><span class="sxs-lookup"><span data-stu-id="ca0b1-230">URI</span></span> | <span data-ttu-id="ca0b1-231">Odpověď</span><span class="sxs-lookup"><span data-stu-id="ca0b1-231">Response</span></span>  |
| ------- | -------- |
| <span data-ttu-id="ca0b1-232">/Package/Create/3</span><span class="sxs-lookup"><span data-stu-id="ca0b1-232">/package/create/3</span></span>  | <span data-ttu-id="ca0b1-233">Dobrý den!</span><span class="sxs-lookup"><span data-stu-id="ca0b1-233">Hello!</span></span> <span data-ttu-id="ca0b1-234">Hodnoty trasy: [operaci vytvoření], [id, 3]</span><span class="sxs-lookup"><span data-stu-id="ca0b1-234">Route values: [operation, create], [id, 3]</span></span> |
| <span data-ttu-id="ca0b1-235">/ balíček nebo sledovat/3</span><span class="sxs-lookup"><span data-stu-id="ca0b1-235">/package/track/-3</span></span>  | <span data-ttu-id="ca0b1-236">Dobrý den!</span><span class="sxs-lookup"><span data-stu-id="ca0b1-236">Hello!</span></span> <span data-ttu-id="ca0b1-237">Hodnoty trasy: [operace, sledovat], [id, -3]</span><span class="sxs-lookup"><span data-stu-id="ca0b1-237">Route values: [operation, track], [id, -3]</span></span> |
| <span data-ttu-id="ca0b1-238">/ balíček/sledovat/3 nebo</span><span class="sxs-lookup"><span data-stu-id="ca0b1-238">/package/track/-3/</span></span> | <span data-ttu-id="ca0b1-239">Dobrý den!</span><span class="sxs-lookup"><span data-stu-id="ca0b1-239">Hello!</span></span> <span data-ttu-id="ca0b1-240">Hodnoty trasy: [operace, sledovat], [id, -3]</span><span class="sxs-lookup"><span data-stu-id="ca0b1-240">Route values: [operation, track], [id, -3]</span></span>  |
| <span data-ttu-id="ca0b1-241">/Package/sledovat /</span><span class="sxs-lookup"><span data-stu-id="ca0b1-241">/package/track/</span></span> | <span data-ttu-id="ca0b1-242">\<Přejít, nebyla zjištěna shoda ></span><span class="sxs-lookup"><span data-stu-id="ca0b1-242">\<Fall through, no match></span></span> |
| <span data-ttu-id="ca0b1-243">ZÍSKAT /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="ca0b1-243">GET /hello/Joe</span></span> | <span data-ttu-id="ca0b1-244">Dobrý den, Jan!</span><span class="sxs-lookup"><span data-stu-id="ca0b1-244">Hi, Joe!</span></span> |
| <span data-ttu-id="ca0b1-245">POST /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="ca0b1-245">POST /hello/Joe</span></span> | <span data-ttu-id="ca0b1-246">\<Přejít, odpovídá jenom metody GET protokolu HTTP ></span><span class="sxs-lookup"><span data-stu-id="ca0b1-246">\<Fall through, matches HTTP GET only></span></span> |
| <span data-ttu-id="ca0b1-247">ZÍSKAT /hello/Joe/Smith</span><span class="sxs-lookup"><span data-stu-id="ca0b1-247">GET /hello/Joe/Smith</span></span> | <span data-ttu-id="ca0b1-248">\<Přejít, nebyla zjištěna shoda ></span><span class="sxs-lookup"><span data-stu-id="ca0b1-248">\<Fall through, no match></span></span> |

<span data-ttu-id="ca0b1-249">Pokud konfigurujete jednu trasu, zavolejte `app.UseRouter` předávání v `IRouter` instance.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-249">If you are configuring a single route, call `app.UseRouter` passing in an `IRouter` instance.</span></span> <span data-ttu-id="ca0b1-250">Nebudete muset volat `RouteBuilder`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-250">You won't need to call `RouteBuilder`.</span></span>

<span data-ttu-id="ca0b1-251">Rozhraní framework poskytuje sadu rozšiřující metody pro vytváření tras, jako:</span><span class="sxs-lookup"><span data-stu-id="ca0b1-251">The framework provides a set of extension methods for creating routes such as:</span></span>

* `MapRoute`
* `MapGet`
* `MapPost`
* `MapPut`
* `MapDelete`
* `MapVerb`

<span data-ttu-id="ca0b1-252">Některé z těchto metod, jako `MapGet` vyžadují `RequestDelegate` , musíte zadat.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-252">Some of these methods such as `MapGet` require a `RequestDelegate` to be provided.</span></span> <span data-ttu-id="ca0b1-253">`RequestDelegate` Se použije jako *obslužná rutina trasy* Pokud trasa odpovídá.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-253">The `RequestDelegate` will be used as the *route handler* when the route matches.</span></span> <span data-ttu-id="ca0b1-254">Jiné metody v této rodině povolit konfiguraci middlewaru kanálu, který bude použit jako obslužné rutině trasy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-254">Other methods in this family allow configuring a middleware pipeline which will be used as the route handler.</span></span> <span data-ttu-id="ca0b1-255">Pokud *mapy* metoda není přijímat obslužnou rutinu, jako například `MapRoute`, pak se bude používat `DefaultHandler`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-255">If the *Map* method doesn't accept a handler, such as `MapRoute`, then it will use the `DefaultHandler`.</span></span>

<span data-ttu-id="ca0b1-256">`Map[Verb]` Metody použití omezení k omezení trasy, která má v názvu metody akce HTTP.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-256">The `Map[Verb]` methods use constraints to limit the route to the HTTP Verb in the method name.</span></span> <span data-ttu-id="ca0b1-257">Například v tématu [MapGet](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L85-L88) a [MapVerb](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L156-L180).</span><span class="sxs-lookup"><span data-stu-id="ca0b1-257">For example, see [MapGet](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L85-L88) and [MapVerb](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L156-L180).</span></span>

## <a name="route-template-reference"></a><span data-ttu-id="ca0b1-258">Odkaz na šablonu trasy</span><span class="sxs-lookup"><span data-stu-id="ca0b1-258">Route Template Reference</span></span>

<span data-ttu-id="ca0b1-259">Tokeny do složených závorek (`{ }`) definovat *směrovat parametry* který bude vázán, pokud je nalezena shoda trasy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-259">Tokens within curly braces (`{ }`) define *route parameters* which will be bound if the route is matched.</span></span> <span data-ttu-id="ca0b1-260">Můžete definovat více než jeden parametr trasy v segmentu trasy, ale musí být odděleny literálovou hodnotou.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-260">You can define more than one route parameter in a route segment, but they must be separated by a literal value.</span></span> <span data-ttu-id="ca0b1-261">Například `{controller=Home}{action=Index}` nebude platnou trasu, protože není hodnota literálu mezi `{controller}` a `{action}`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-261">For example `{controller=Home}{action=Index}` wouldn't be a valid route, since there's no literal value between `{controller}` and `{action}`.</span></span> <span data-ttu-id="ca0b1-262">Tyto parametry trasy musí mít název, a může zadat další atributy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-262">These route parameters must have a name, and may have additional attributes specified.</span></span>

<span data-ttu-id="ca0b1-263">Literál text než parametry trasy (například `{id}`) a oddělovač cesty `/` text v adrese URL se musí shodovat.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-263">Literal text other than route parameters (for example, `{id}`) and the path separator `/` must match the text in the URL.</span></span> <span data-ttu-id="ca0b1-264">Odpovídající text je velká a malá písmena a podle dekódované reprezentace cesty adresy URL.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-264">Text matching is case-insensitive and based on the decoded representation of the URLs path.</span></span> <span data-ttu-id="ca0b1-265">Tak, aby odpovídaly oddělovač parametr literálu trasy `{` nebo `}`, vyhnuli opakováním znak (`{{` nebo `}}`).</span><span class="sxs-lookup"><span data-stu-id="ca0b1-265">To match the literal route parameter delimiter `{` or  `}`, escape it by repeating the character (`{{` or `}}`).</span></span>

<span data-ttu-id="ca0b1-266">Vzory adres URL, které se pokoušejí o zachycení název souboru s příponou volitelný soubor mít další aspekty.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-266">URL patterns that attempt to capture a filename with an optional file extension have additional considerations.</span></span> <span data-ttu-id="ca0b1-267">Například pomocí šablony `files/{filename}.{ext?}` – když oba `filename` a `ext` neexistuje, vyplní obě hodnoty.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-267">For example, using the template `files/{filename}.{ext?}` - When both `filename` and `ext` exist, both values will be populated.</span></span> <span data-ttu-id="ca0b1-268">Pokud jenom `filename` existuje v adrese URL odpovídá trasy, protože koncové tečky `.` je volitelný.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-268">If only `filename` exists in the URL, the route matches because the trailing period `.` is  optional.</span></span> <span data-ttu-id="ca0b1-269">Následující adresy URL odpovídá této trase:</span><span class="sxs-lookup"><span data-stu-id="ca0b1-269">The following URLs would match this route:</span></span>

* `/files/myFile.txt`
* `/files/myFile`

<span data-ttu-id="ca0b1-270">Můžete použít `*` znak jako předpona k parametr trasy pro vazbu s ostatními identifikátor URI – tento postup se nazývá *catch-all* parametr.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-270">You can use the `*` character as a prefix to a route parameter to bind to the rest of the URI - this is called a *catch-all* parameter.</span></span> <span data-ttu-id="ca0b1-271">Například `blog/{*slug}` odpovídá žádné identifikátor URI, který je spuštěn s `/blog` a měl žádné hodnoty (které bude přiřazeno k `slug` směrování hodnotu).</span><span class="sxs-lookup"><span data-stu-id="ca0b1-271">For example, `blog/{*slug}` would match any URI that started with `/blog` and had any value following it (which would be assigned to the `slug` route value).</span></span> <span data-ttu-id="ca0b1-272">Catch – všechny parametry můžete také odpovídaly prázdný řetězec.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-272">Catch-all parameters can also match the empty string.</span></span>

<span data-ttu-id="ca0b1-273">Může mít parametry trasy *výchozí hodnoty*, navržené tak, že zadáte výchozí po názvu parametru, oddělených `=`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-273">Route parameters may have *default values*, designated by specifying the default after the parameter name, separated by an `=`.</span></span> <span data-ttu-id="ca0b1-274">Například `{controller=Home}` nadefinovat `Home` jako výchozí hodnota pro `controller`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-274">For example, `{controller=Home}` would define `Home` as the default value for `controller`.</span></span> <span data-ttu-id="ca0b1-275">Výchozí hodnota je použita, pokud je přítomen v adrese URL pro parametr žádná hodnota.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-275">The default value is used if no value is present in the URL for the parameter.</span></span> <span data-ttu-id="ca0b1-276">Kromě výchozí hodnoty, může být volitelné parametry trasy (zadaný připojením `?` na konec názvu parametru, jako v `id?`).</span><span class="sxs-lookup"><span data-stu-id="ca0b1-276">In addition to default values, route parameters may be optional (specified by appending a `?` to the end of the parameter name, as in `id?`).</span></span> <span data-ttu-id="ca0b1-277">Rozdíl mezi volitelné a "má výchozí" je, že parametr trasy výchozí hodnotu vždy vrátí hodnotu; Volitelný parametr obsahuje hodnotu, pouze pokud je k dispozici.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-277">The difference between optional and "has default" is that a route parameter with a default value always produces a value; an optional parameter has a value only when one is provided.</span></span>

<span data-ttu-id="ca0b1-278">Parametry trasy může mít také omezení, které se musí shodovat s hodnotou trasy vázaný z adresy URL.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-278">Route parameters may also have constraints, which must match the route value bound from the URL.</span></span> <span data-ttu-id="ca0b1-279">Přidání dvojtečkou `:` a název omezení po Určuje název parametru trasy *vložené omezení* v parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-279">Adding a colon `:` and constraint name after the route parameter name specifies an *inline constraint* on a route parameter.</span></span> <span data-ttu-id="ca0b1-280">Pokud omezení vyžaduje argumenty těch, které jsou k dispozici uzavřený v závorkách `( )` po název omezení.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-280">If the constraint requires arguments those are provided enclosed in parentheses `( )` after the constraint name.</span></span> <span data-ttu-id="ca0b1-281">Několik vložených omezení lze zadat připojením jiné dvojtečkou `:` a název omezení.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-281">Multiple inline constraints can be specified by appending another colon `:` and constraint name.</span></span> <span data-ttu-id="ca0b1-282">Předaný název omezení `IInlineConstraintResolver` služby k vytvoření instance `IRouteConstraint` použít při zpracování adresy URL.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-282">The constraint name is passed to the `IInlineConstraintResolver` service to create an instance of `IRouteConstraint` to use in URL processing.</span></span> <span data-ttu-id="ca0b1-283">Například šablona trasy `blog/{article:minlength(10)}` Určuje `minlength` omezení s argumentem `10`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-283">For example, the route template `blog/{article:minlength(10)}` specifies the `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="ca0b1-284">Další omezení trasy popis a seznam omezení poskytované rozhraní najdete v tématu [odkaz omezení trasy](#route-constraint-reference).</span><span class="sxs-lookup"><span data-stu-id="ca0b1-284">For more description route constraints, and a listing of the constraints provided by the framework, see [route-constraint-reference](#route-constraint-reference).</span></span>

<span data-ttu-id="ca0b1-285">Následující tabulka ukazuje některé šablony trasy a jejich chování.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-285">The following table demonstrates some route templates and their behavior.</span></span>

| <span data-ttu-id="ca0b1-286">Šablona trasy</span><span class="sxs-lookup"><span data-stu-id="ca0b1-286">Route Template</span></span> | <span data-ttu-id="ca0b1-287">Příklad odpovídající adresy URL</span><span class="sxs-lookup"><span data-stu-id="ca0b1-287">Example Matching URL</span></span> | <span data-ttu-id="ca0b1-288">Poznámky</span><span class="sxs-lookup"><span data-stu-id="ca0b1-288">Notes</span></span> |
| -------- | -------- | ------- |
| <span data-ttu-id="ca0b1-289">Dobrý den</span><span class="sxs-lookup"><span data-stu-id="ca0b1-289">hello</span></span>  | <span data-ttu-id="ca0b1-290">řetězec Ahoj</span><span class="sxs-lookup"><span data-stu-id="ca0b1-290">/hello</span></span>  | <span data-ttu-id="ca0b1-291">Odpovídá jen jednu cestu `/hello`</span><span class="sxs-lookup"><span data-stu-id="ca0b1-291">Only matches the single path `/hello`</span></span> |
| <span data-ttu-id="ca0b1-292">{Stránky = Domů}</span><span class="sxs-lookup"><span data-stu-id="ca0b1-292">{Page=Home}</span></span> | / | <span data-ttu-id="ca0b1-293">Odpovídá a nastaví `Page` na `Home`</span><span class="sxs-lookup"><span data-stu-id="ca0b1-293">Matches and sets `Page` to `Home`</span></span> |
| <span data-ttu-id="ca0b1-294">{Stránky = Domů}</span><span class="sxs-lookup"><span data-stu-id="ca0b1-294">{Page=Home}</span></span>  | <span data-ttu-id="ca0b1-295">/ Kontakt</span><span class="sxs-lookup"><span data-stu-id="ca0b1-295">/Contact</span></span>  | <span data-ttu-id="ca0b1-296">Odpovídá a nastaví `Page` na `Contact`</span><span class="sxs-lookup"><span data-stu-id="ca0b1-296">Matches and sets `Page` to `Contact`</span></span> |
| <span data-ttu-id="ca0b1-297">{controller} / {action} / {id}?</span><span class="sxs-lookup"><span data-stu-id="ca0b1-297">{controller}/{action}/{id?}</span></span> | <span data-ttu-id="ca0b1-298">/ / Seznam produktů</span><span class="sxs-lookup"><span data-stu-id="ca0b1-298">/Products/List</span></span> | <span data-ttu-id="ca0b1-299">Se mapuje na `Products` řadiče a `List` akce</span><span class="sxs-lookup"><span data-stu-id="ca0b1-299">Maps to `Products` controller and `List`  action</span></span> |
| <span data-ttu-id="ca0b1-300">{controller} / {action} / {id}?</span><span class="sxs-lookup"><span data-stu-id="ca0b1-300">{controller}/{action}/{id?}</span></span> | <span data-ttu-id="ca0b1-301">/ Produkty/podrobnosti/123</span><span class="sxs-lookup"><span data-stu-id="ca0b1-301">/Products/Details/123</span></span>  |  <span data-ttu-id="ca0b1-302">Se mapuje na `Products` řadiče a `Details` akce.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-302">Maps to `Products` controller and  `Details` action.</span></span>  <span data-ttu-id="ca0b1-303">`id` Nastavte na 123</span><span class="sxs-lookup"><span data-stu-id="ca0b1-303">`id` set to 123</span></span> |
| <span data-ttu-id="ca0b1-304">{controller=Home}/{action=Index}/{id?}</span><span class="sxs-lookup"><span data-stu-id="ca0b1-304">{controller=Home}/{action=Index}/{id?}</span></span> | /  |  <span data-ttu-id="ca0b1-305">Se mapuje na `Home` řadiče a `Index` metoda; `id` je ignorována.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-305">Maps to `Home` controller and `Index`  method; `id` is ignored.</span></span> |

<span data-ttu-id="ca0b1-306">Pomocí šablony je obecně nejjednodušším přístupem při směrování.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-306">Using a template is generally the simplest approach to routing.</span></span> <span data-ttu-id="ca0b1-307">Omezení a výchozí nastavení můžete také uvést mimo šablonu trasy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-307">Constraints and defaults can also be specified outside the route template.</span></span>

<span data-ttu-id="ca0b1-308">Tip: Povolit [protokolování](xref:fundamentals/logging/index) zobrazíte jak součástí směrování implementace, jako například `Route`, shodovat s požadavky.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-308">Tip: Enable [Logging](xref:fundamentals/logging/index) to see how the built in routing implementations, such as `Route`, match requests.</span></span>

## <a name="reserved-routing-names"></a><span data-ttu-id="ca0b1-309">Názvy vyhrazené směrování</span><span class="sxs-lookup"><span data-stu-id="ca0b1-309">Reserved routing names</span></span>

<span data-ttu-id="ca0b1-310">Následující klíčová slova jsou názvy vyhrazené a nelze použít jako názvy tras nebo parametry:</span><span class="sxs-lookup"><span data-stu-id="ca0b1-310">The following keywords are reserved names and can't be used as route names or parameters:</span></span>

* `action`
* `area`
* `controller`
* `handler`
* `page`

## <a name="route-constraint-reference"></a><span data-ttu-id="ca0b1-311">Odkaz na omezení trasy</span><span class="sxs-lookup"><span data-stu-id="ca0b1-311">Route constraint reference</span></span>

<span data-ttu-id="ca0b1-312">Omezení trasy při spuštění `Route` má shodná syntaxe adresy URL příchozích a tokenizovaného cestu adresy URL do hodnoty trasy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-312">Route constraints execute when a `Route` has matched the syntax of the incoming URL and tokenized the URL path into route values.</span></span> <span data-ttu-id="ca0b1-313">Omezení trasy obecně zkontrolovat hodnota trasy přidružené prostřednictvím šablonu trasy a proveďte jednoduchou Ano/ne rozhodnutí o tom, zda je přijatelnou hodnotu.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-313">Route constraints generally inspect the route value associated via the route template and make a simple yes/no decision about whether or not the value is acceptable.</span></span> <span data-ttu-id="ca0b1-314">Některá omezení trasy pomocí dat mimo hodnota trasy zvažte, zda lze ho směrovat žádosti.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-314">Some route constraints use data outside the route value to consider whether the request can be routed.</span></span> <span data-ttu-id="ca0b1-315">Například `HttpMethodRouteConstraint` můžete přijmout nebo odmítnout žádost o založené na jeho příkaz HTTP.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-315">For example, the `HttpMethodRouteConstraint` can accept or reject a request based on its HTTP verb.</span></span>

>[!WARNING]
> <span data-ttu-id="ca0b1-316">Vyhněte se použití omezení pro **ověřování vstupu**, protože to znamená, že neplatný vstup bude mít za následek 404 (není nalezena) namísto 400 se příslušná chybová zpráva.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-316">Avoid using constraints for **input validation**, because doing so means that invalid input will result in a 404 (Not Found) instead of a 400 with an appropriate error message.</span></span> <span data-ttu-id="ca0b1-317">Omezení trasy by měla být slouží jako **rozlišení** mezi podobné trasy Neověřovat vstupy pro daný postup.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-317">Route constraints should be used to **disambiguate** between similar routes, not to validate the inputs for a particular route.</span></span>

<span data-ttu-id="ca0b1-318">Následující tabulka ukazuje některé omezení trasy a jejich očekávané chování.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-318">The following table demonstrates some route constraints and their expected behavior.</span></span>

| <span data-ttu-id="ca0b1-319">omezení</span><span class="sxs-lookup"><span data-stu-id="ca0b1-319">constraint</span></span> | <span data-ttu-id="ca0b1-320">Příklad</span><span class="sxs-lookup"><span data-stu-id="ca0b1-320">Example</span></span> | <span data-ttu-id="ca0b1-321">Příklad odpovídá</span><span class="sxs-lookup"><span data-stu-id="ca0b1-321">Example Matches</span></span> | <span data-ttu-id="ca0b1-322">Poznámky</span><span class="sxs-lookup"><span data-stu-id="ca0b1-322">Notes</span></span> |
| --------   | ------- | ------------- | ----- |
| `int` | `{id:int}` | <span data-ttu-id="ca0b1-323">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="ca0b1-323">`123456789`, `-123456789`</span></span>  | <span data-ttu-id="ca0b1-324">Odpovídá jakémukoliv celému číslu</span><span class="sxs-lookup"><span data-stu-id="ca0b1-324">Matches any integer</span></span> |
| `bool`  | `{active:bool}` | <span data-ttu-id="ca0b1-325">`true`, `FALSE`</span><span class="sxs-lookup"><span data-stu-id="ca0b1-325">`true`, `FALSE`</span></span> | <span data-ttu-id="ca0b1-326">Odpovídá `true` nebo `false` (velká a malá písmena)</span><span class="sxs-lookup"><span data-stu-id="ca0b1-326">Matches `true` or `false` (case-insensitive)</span></span> |
| `datetime` | `{dob:datetime}` | <span data-ttu-id="ca0b1-327">`2016-12-31`, `2016-12-31 7:32pm`</span><span class="sxs-lookup"><span data-stu-id="ca0b1-327">`2016-12-31`, `2016-12-31 7:32pm`</span></span>  | <span data-ttu-id="ca0b1-328">Odpovídá platná `DateTime` hodnotu (v neutrální jazykovou verzi - zobrazí upozornění)</span><span class="sxs-lookup"><span data-stu-id="ca0b1-328">Matches a valid `DateTime` value (in the invariant culture - see warning)</span></span> |
| `decimal` | `{price:decimal}` | <span data-ttu-id="ca0b1-329">`49.99`, `-1,000.01`</span><span class="sxs-lookup"><span data-stu-id="ca0b1-329">`49.99`, `-1,000.01`</span></span> | <span data-ttu-id="ca0b1-330">Odpovídá platná `decimal` hodnotu (v neutrální jazykovou verzi - zobrazí upozornění)</span><span class="sxs-lookup"><span data-stu-id="ca0b1-330">Matches a valid `decimal` value (in the invariant culture - see warning)</span></span> |
| `double`  | `{weight:double}` | <span data-ttu-id="ca0b1-331">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="ca0b1-331">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="ca0b1-332">Odpovídá platná `double` hodnotu (v neutrální jazykovou verzi - zobrazí upozornění)</span><span class="sxs-lookup"><span data-stu-id="ca0b1-332">Matches a valid `double` value (in the invariant culture - see warning)</span></span> |
| `float`  | `{weight:float}` | <span data-ttu-id="ca0b1-333">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="ca0b1-333">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="ca0b1-334">Odpovídá platná `float` hodnotu (v neutrální jazykovou verzi - zobrazí upozornění)</span><span class="sxs-lookup"><span data-stu-id="ca0b1-334">Matches a valid `float` value (in the invariant culture - see warning)</span></span> |
| `guid`  | `{id:guid}` | <span data-ttu-id="ca0b1-335">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span><span class="sxs-lookup"><span data-stu-id="ca0b1-335">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span></span> | <span data-ttu-id="ca0b1-336">Odpovídá platná `Guid` hodnota</span><span class="sxs-lookup"><span data-stu-id="ca0b1-336">Matches a valid `Guid` value</span></span> |
| `long` | `{ticks:long}` | <span data-ttu-id="ca0b1-337">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="ca0b1-337">`123456789`, `-123456789`</span></span> | <span data-ttu-id="ca0b1-338">Odpovídá platná `long` hodnota</span><span class="sxs-lookup"><span data-stu-id="ca0b1-338">Matches a valid `long` value</span></span> |
| `minlength(value)` | `{username:minlength(4)}` | `Rick` | <span data-ttu-id="ca0b1-339">Řetězec musí mít délku minimálně 4 znaky</span><span class="sxs-lookup"><span data-stu-id="ca0b1-339">String must be at least 4 characters</span></span> |
| `maxlength(value)` | `{filename:maxlength(8)}` | `Richard` | <span data-ttu-id="ca0b1-340">Řetězec musí obsahovat více než 8 znaků</span><span class="sxs-lookup"><span data-stu-id="ca0b1-340">String must be no more than 8 characters</span></span> |
| `length(length)` | `{filename:length(12)}` | `somefile.txt` | <span data-ttu-id="ca0b1-341">Řetězec musí mít přesně 12 znaků.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-341">String must be exactly 12 characters long</span></span> |
| `length(min,max)` | `{filename:length(8,16)}` | `somefile.txt` | <span data-ttu-id="ca0b1-342">Řetězec musí mít alespoň 8 a ne víc než 16 znaků.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-342">String must be at least 8 and no more than 16 characters long</span></span> |
| `min(value)` | `{age:min(18)}` | `19` | <span data-ttu-id="ca0b1-343">Celočíselná hodnota musí být alespoň 18</span><span class="sxs-lookup"><span data-stu-id="ca0b1-343">Integer value must be at least 18</span></span> |
| `max(value)` | `{age:max(120)}` |  `91` | <span data-ttu-id="ca0b1-344">Celočíselná hodnota musí být delší než 120</span><span class="sxs-lookup"><span data-stu-id="ca0b1-344">Integer value must be no more than 120</span></span> |
| `range(min,max)` | `{age:range(18,120)}` | `91` | <span data-ttu-id="ca0b1-345">Celočíselná hodnota musí být alespoň 18, ale ne víc než 120</span><span class="sxs-lookup"><span data-stu-id="ca0b1-345">Integer value must be at least 18 but no more than 120</span></span> |
| `alpha` | `{name:alpha}` | `Rick` | <span data-ttu-id="ca0b1-346">Řetězec musí obsahovat jeden nebo více abecedních znaků (`a`-`z`, velká a malá písmena)</span><span class="sxs-lookup"><span data-stu-id="ca0b1-346">String must consist of one or more alphabetical characters (`a`-`z`, case-insensitive)</span></span> |
| `regex(expression)` | `{ssn:regex(^\\d{{3}}-\\d{{2}}-\\d{{4}}$)}` | `123-45-6789` | <span data-ttu-id="ca0b1-347">Řetězec musí odpovídat regulárnímu výrazu (viz tipy k definování regulární výraz)</span><span class="sxs-lookup"><span data-stu-id="ca0b1-347">String must match the regular expression (see tips about defining a regular expression)</span></span> |
| `required`  | `{name:required}` | `Rick` |  <span data-ttu-id="ca0b1-348">Slouží k vynucení, že hodnota bez parametru je dostupný při generování adresy URL</span><span class="sxs-lookup"><span data-stu-id="ca0b1-348">Used to enforce that a non-parameter value is present during URL generation</span></span> |

>[!WARNING]
> <span data-ttu-id="ca0b1-349">Omezení trasy, které Ověřte adresu URL můžete převést na typ CLR (například `int` nebo `DateTime`) vždy používat neutrální jazykovou verzi – se předpokládá, že adresa URL je nepřekládá.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-349">Route constraints that verify the URL can be converted to a CLR type (such as `int` or `DateTime`) always use the invariant culture - they assume the URL is non-localizable.</span></span> <span data-ttu-id="ca0b1-350">Omezení trasy zadaný framework neupravujte hodnotami uloženými v hodnoty trasy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-350">The framework-provided route constraints don't modify the values stored in route values.</span></span> <span data-ttu-id="ca0b1-351">Všechny hodnoty trasy, které jsou analyzovány z adresy URL se uloží jako řetězce.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-351">All route values parsed from the URL will be stored as strings.</span></span> <span data-ttu-id="ca0b1-352">Například [omezení trasy Float](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/Constraints/FloatRouteConstraint.cs#L44-L60) se pokusí převést hodnotu trasy na typ float, ale převedenou hodnotu slouží pouze k ověření, je možné ji převést na typ float.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-352">For example, the [Float route constraint](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/Constraints/FloatRouteConstraint.cs#L44-L60) will attempt to convert the route value to a float, but the converted value is used only to verify it can be converted to a float.</span></span>

## <a name="regular-expressions"></a><span data-ttu-id="ca0b1-353">Regulární výrazy</span><span class="sxs-lookup"><span data-stu-id="ca0b1-353">Regular expressions</span></span> 

<span data-ttu-id="ca0b1-354">Přidá rozhraní ASP.NET Core `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` konstruktoru regulární výraz.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-354">The ASP.NET Core framework adds `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` to the regular expression constructor.</span></span> <span data-ttu-id="ca0b1-355">V tématu [výčtu RegexOptions](/dotnet/api/system.text.regularexpressions.regexoptions) popis těchto členů.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-355">See [RegexOptions Enumeration](/dotnet/api/system.text.regularexpressions.regexoptions) for a description of these members.</span></span>

<span data-ttu-id="ca0b1-356">Regulární výrazy použít oddělovače a tokeny, které jsou podobné těm, které jsou používané směrování a jazyka C#.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-356">Regular expressions use delimiters and tokens similar to those used by Routing and the C# language.</span></span> <span data-ttu-id="ca0b1-357">Regulární výraz tokeny, je nutné uvést.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-357">Regular expression tokens must be escaped.</span></span> <span data-ttu-id="ca0b1-358">Například použijte regulární výraz `^\d{3}-\d{2}-\d{4}$` ve směrování, musí mít `\` znaků zadali jako `\\` v C# zdrojový soubor, který vyhnuli `\` řídicí znak řetězce (Pokud používáte [typu verbatim textové literály](https://docs.microsoft.com/dotnet/csharp/language-reference/keywords/string).</span><span class="sxs-lookup"><span data-stu-id="ca0b1-358">For example, to use the regular expression `^\d{3}-\d{2}-\d{4}$` in Routing, it needs to have the `\` characters typed in as `\\` in the C# source file to escape the `\` string escape character (unless using [verbatim string literals](https://docs.microsoft.com/dotnet/csharp/language-reference/keywords/string).</span></span> <span data-ttu-id="ca0b1-359">`{` , `}` , ' [' A ']' znaky musí být uvozena předchozího je řídicí znaky oddělovač parametr směrování.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-359">The `{` , `}` , '[' and ']' characters need to be escaped by doubling them to escape the Routing parameter delimiter characters.</span></span>  <span data-ttu-id="ca0b1-360">Následující tabulka uvádí regulární výraz a uvozený verze.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-360">The table below shows a regular expression and the escaped version.</span></span>

| <span data-ttu-id="ca0b1-361">Výraz</span><span class="sxs-lookup"><span data-stu-id="ca0b1-361">Expression</span></span>               | <span data-ttu-id="ca0b1-362">Poznámka</span><span class="sxs-lookup"><span data-stu-id="ca0b1-362">Note</span></span> |
| ----------------- | ------------ | 
| `^\d{3}-\d{2}-\d{4}$` | <span data-ttu-id="ca0b1-363">Regulární výraz</span><span class="sxs-lookup"><span data-stu-id="ca0b1-363">Regular expression</span></span> |
| `^\\d{{3}}-\\d{{2}}-\\d{{4}}$` | <span data-ttu-id="ca0b1-364">Uvozený</span><span class="sxs-lookup"><span data-stu-id="ca0b1-364">Escaped</span></span>  |
| `^[a-z]{2}$` | <span data-ttu-id="ca0b1-365">Regulární výraz</span><span class="sxs-lookup"><span data-stu-id="ca0b1-365">Regular expression</span></span> |
| `^[[a-z]]{{2}}$` | <span data-ttu-id="ca0b1-366">Uvozený</span><span class="sxs-lookup"><span data-stu-id="ca0b1-366">Escaped</span></span>  |

<span data-ttu-id="ca0b1-367">Regulární výrazy použité ve směrování se často začínat `^` znak (odpovídají počáteční pozice řetězce) a končit `$` znak (odpovídají koncová pozice řetězce).</span><span class="sxs-lookup"><span data-stu-id="ca0b1-367">Regular expressions used in routing will often start with the `^` character (match starting position of the string) and end with the `$` character (match ending position of the string).</span></span> <span data-ttu-id="ca0b1-368">`^` a `$` znaků zajistěte, aby hodnota parametru trasy celý shoda s regulárním výrazem.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-368">The `^` and `$` characters ensure that the regular expression match the entire route parameter value.</span></span> <span data-ttu-id="ca0b1-369">Bez `^` a `$` znaků s regulárním výrazem se shoda s libovolným řetězcem dílčí v rámci řetězce, který je často nechcete.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-369">Without the `^` and `$` characters the regular expression will match any sub-string within the string, which is often not what you want.</span></span> <span data-ttu-id="ca0b1-370">Následující tabulka obsahuje některé příklady a vysvětluje, proč odpovídat nebo selhání tak, aby odpovídaly.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-370">The table below shows some examples and explains why they match or fail to match.</span></span>

| <span data-ttu-id="ca0b1-371">Výraz</span><span class="sxs-lookup"><span data-stu-id="ca0b1-371">Expression</span></span>               | <span data-ttu-id="ca0b1-372">String</span><span class="sxs-lookup"><span data-stu-id="ca0b1-372">String</span></span> | <span data-ttu-id="ca0b1-373">Shoda</span><span class="sxs-lookup"><span data-stu-id="ca0b1-373">Match</span></span> | <span data-ttu-id="ca0b1-374">Komentář</span><span class="sxs-lookup"><span data-stu-id="ca0b1-374">Comment</span></span> |
| ----------------- | ------------ |  ------------ |  ------------ | 
| `[a-z]{2}` | <span data-ttu-id="ca0b1-375">Dobrý den</span><span class="sxs-lookup"><span data-stu-id="ca0b1-375">hello</span></span> | <span data-ttu-id="ca0b1-376">Ano</span><span class="sxs-lookup"><span data-stu-id="ca0b1-376">yes</span></span> | <span data-ttu-id="ca0b1-377">shody podřetězců</span><span class="sxs-lookup"><span data-stu-id="ca0b1-377">substring matches</span></span> |
| `[a-z]{2}` | <span data-ttu-id="ca0b1-378">123abc456</span><span class="sxs-lookup"><span data-stu-id="ca0b1-378">123abc456</span></span> | <span data-ttu-id="ca0b1-379">Ano</span><span class="sxs-lookup"><span data-stu-id="ca0b1-379">yes</span></span> | <span data-ttu-id="ca0b1-380">shody podřetězců</span><span class="sxs-lookup"><span data-stu-id="ca0b1-380">substring matches</span></span> |
| `[a-z]{2}` | <span data-ttu-id="ca0b1-381">mz</span><span class="sxs-lookup"><span data-stu-id="ca0b1-381">mz</span></span> | <span data-ttu-id="ca0b1-382">Ano</span><span class="sxs-lookup"><span data-stu-id="ca0b1-382">yes</span></span> | <span data-ttu-id="ca0b1-383">odpovídá výrazu</span><span class="sxs-lookup"><span data-stu-id="ca0b1-383">matches expression</span></span> |
| `[a-z]{2}` | <span data-ttu-id="ca0b1-384">MZ</span><span class="sxs-lookup"><span data-stu-id="ca0b1-384">MZ</span></span> | <span data-ttu-id="ca0b1-385">Ano</span><span class="sxs-lookup"><span data-stu-id="ca0b1-385">yes</span></span> | <span data-ttu-id="ca0b1-386">není malá a velká písmena</span><span class="sxs-lookup"><span data-stu-id="ca0b1-386">not case sensitive</span></span> |
| `^[a-z]{2}$` |  <span data-ttu-id="ca0b1-387">Dobrý den</span><span class="sxs-lookup"><span data-stu-id="ca0b1-387">hello</span></span> | <span data-ttu-id="ca0b1-388">Ne</span><span class="sxs-lookup"><span data-stu-id="ca0b1-388">no</span></span> | <span data-ttu-id="ca0b1-389">v tématu `^` a `$` výše</span><span class="sxs-lookup"><span data-stu-id="ca0b1-389">see `^` and `$` above</span></span> |
| `^[a-z]{2}$` |  <span data-ttu-id="ca0b1-390">123abc456</span><span class="sxs-lookup"><span data-stu-id="ca0b1-390">123abc456</span></span> | <span data-ttu-id="ca0b1-391">Ne</span><span class="sxs-lookup"><span data-stu-id="ca0b1-391">no</span></span> | <span data-ttu-id="ca0b1-392">v tématu `^` a `$` výše</span><span class="sxs-lookup"><span data-stu-id="ca0b1-392">see `^` and `$` above</span></span> |

<span data-ttu-id="ca0b1-393">Odkazovat na [regulární výrazy rozhraní .NET Framework](https://docs.microsoft.com/dotnet/standard/base-types/regular-expression-language-quick-reference) Další informace o syntaxi regulárního výrazu.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-393">Refer to [.NET Framework Regular Expressions](https://docs.microsoft.com/dotnet/standard/base-types/regular-expression-language-quick-reference) for more information on regular expression syntax.</span></span>

<span data-ttu-id="ca0b1-394">Chcete-li omezit parametr, který se známou sadou možných hodnot, použijte regulární výraz.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-394">To constrain a parameter to a known set of possible values, use a regular expression.</span></span> <span data-ttu-id="ca0b1-395">Například `{action:regex(^(list|get|create)$)}` odpovídá jen `action` směrování hodnotu `list`, `get`, nebo `create`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-395">For example `{action:regex(^(list|get|create)$)}` only matches the `action` route value to `list`, `get`, or `create`.</span></span> <span data-ttu-id="ca0b1-396">Pokud předaný do slovníku omezení řetězec "^ (seznamu | get | vytvořit) $" by ekvivalentní.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-396">If passed into the constraints dictionary, the string "^(list|get|create)$" would be equivalent.</span></span> <span data-ttu-id="ca0b1-397">Omezení, která se předávají ve slovníku omezení (ne vložené v šabloně na), které si odpovídají jedné ze známé omezení jsou také považovány za regulární výrazy.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-397">Constraints that are passed in the constraints dictionary (not inline within a template) that don't match one of the known constraints are also treated as regular expressions.</span></span>

## <a name="url-generation-reference"></a><span data-ttu-id="ca0b1-398">Odkaz na generování adresy URL</span><span class="sxs-lookup"><span data-stu-id="ca0b1-398">URL Generation Reference</span></span>

<span data-ttu-id="ca0b1-399">Následující příklad ukazuje, jak pro vygenerování odkazu trasu zadaný slovník hodnot trasy a `RouteCollection`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-399">The example below shows how to generate a link to a route given a dictionary of route values and a `RouteCollection`.</span></span>

[!code-csharp[](../fundamentals/routing/sample/RoutingSample/Startup.cs?range=45-59)]

<span data-ttu-id="ca0b1-400">`VirtualPath` Vygeneruje na konci ukázkové výše je `/package/create/123`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-400">The `VirtualPath` generated at the end of the sample above is `/package/create/123`.</span></span>

<span data-ttu-id="ca0b1-401">Druhý parametr `VirtualPathContext` konstruktor je kolekce *vedlejším hodnoty*.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-401">The second parameter to the `VirtualPathContext` constructor is a collection of *ambient values*.</span></span> <span data-ttu-id="ca0b1-402">Vedlejším hodnoty zajistí pohodlí omezením počet hodnot, které vývojář musí zadat v rámci určitých kontext požadavku.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-402">Ambient values provide convenience by limiting the number of values a developer must specify within a certain request context.</span></span> <span data-ttu-id="ca0b1-403">Aktuální hodnoty trasy aktuální požadavek jsou považovány za vedlejším hodnoty pro generování odkazů.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-403">The current route values of the current request are considered ambient values for link generation.</span></span> <span data-ttu-id="ca0b1-404">Například v aplikaci ASP.NET MVC, pokud jste v `About` akce `HomeController`, nepotřebujete k určení hodnoty trasy řadiče propojení `Index` akce (vedlejším hodnotu `Home` se použije).</span><span class="sxs-lookup"><span data-stu-id="ca0b1-404">For example, in an ASP.NET MVC app if you are in the `About` action of the `HomeController`, you don't need to specify the controller route value to link to the `Index` action (the ambient value of `Home` will be used).</span></span>

<span data-ttu-id="ca0b1-405">Vedlejším hodnoty, které neodpovídají parametr ignorovány a vedlejším hodnoty v potaz při hodnotou explicitně poskytuje přepsání, budete zleva doprava v adrese URL.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-405">Ambient values that don't match a parameter are ignored, and ambient values are also ignored when an explicitly-provided value overrides it, going from left to right in the URL.</span></span>

<span data-ttu-id="ca0b1-406">Hodnoty explicitně nezadá, ale které se neshodují. nic se přidají do řetězce dotazu.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-406">Values that are explicitly provided but which don't match anything are added to the query string.</span></span> <span data-ttu-id="ca0b1-407">V následující tabulce jsou uvedeny výsledek při použití šablonu trasy `{controller}/{action}/{id?}`.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-407">The following table shows the result when using the route template `{controller}/{action}/{id?}`.</span></span>

| <span data-ttu-id="ca0b1-408">Vedlejším hodnoty</span><span class="sxs-lookup"><span data-stu-id="ca0b1-408">Ambient Values</span></span> | <span data-ttu-id="ca0b1-409">Explicitní hodnoty</span><span class="sxs-lookup"><span data-stu-id="ca0b1-409">Explicit Values</span></span> | <span data-ttu-id="ca0b1-410">Výsledek</span><span class="sxs-lookup"><span data-stu-id="ca0b1-410">Result</span></span> |
| -------------   | -------------- | ------ |
| <span data-ttu-id="ca0b1-411">Řadič = "Domů"</span><span class="sxs-lookup"><span data-stu-id="ca0b1-411">controller="Home"</span></span> | <span data-ttu-id="ca0b1-412">akce = "O"</span><span class="sxs-lookup"><span data-stu-id="ca0b1-412">action="About"</span></span> | `/Home/About` |
| <span data-ttu-id="ca0b1-413">Řadič = "Domů"</span><span class="sxs-lookup"><span data-stu-id="ca0b1-413">controller="Home"</span></span> | <span data-ttu-id="ca0b1-414">Řadič = "Order", akce = "O"</span><span class="sxs-lookup"><span data-stu-id="ca0b1-414">controller="Order",action="About"</span></span> | `/Order/About` |
| <span data-ttu-id="ca0b1-415">Řadič = "Domů", color = "Red"</span><span class="sxs-lookup"><span data-stu-id="ca0b1-415">controller="Home",color="Red"</span></span> | <span data-ttu-id="ca0b1-416">akce = "O"</span><span class="sxs-lookup"><span data-stu-id="ca0b1-416">action="About"</span></span> | `/Home/About` |
| <span data-ttu-id="ca0b1-417">Řadič = "Domů"</span><span class="sxs-lookup"><span data-stu-id="ca0b1-417">controller="Home"</span></span> | <span data-ttu-id="ca0b1-418">akce = "O", barva = "Red"</span><span class="sxs-lookup"><span data-stu-id="ca0b1-418">action="About",color="Red"</span></span> | `/Home/About?color=Red`

<span data-ttu-id="ca0b1-419">Pokud trasa má výchozí hodnotu, která neodpovídá parametr a explicitně zadat tuto hodnotu, musí se shodovat výchozí hodnota.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-419">If a route has a default value that doesn't correspond to a parameter and that value is explicitly provided, it must match the default value.</span></span> <span data-ttu-id="ca0b1-420">Příklad:</span><span class="sxs-lookup"><span data-stu-id="ca0b1-420">For example:</span></span>

```csharp
routes.MapRoute("blog_route", "blog/{*slug}",
  defaults: new { controller = "Blog", action = "ReadPost" });
```

<span data-ttu-id="ca0b1-421">Generování odkazů by pouze vygenerování odkazu pro tuto trasu, pokud jsou k dispozici odpovídající hodnoty pro kontroleru a akce.</span><span class="sxs-lookup"><span data-stu-id="ca0b1-421">Link generation would only generate a link for this route when the matching values for controller and action are provided.</span></span>
