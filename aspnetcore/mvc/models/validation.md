---
title: "Ověření modelu v aplikaci ASP.NET MVC jádra"
author: rachelappel
description: "Další informace o ověření modelu v aplikaci ASP.NET MVC jádra."
manager: wpickett
ms.author: riande
ms.date: 12/18/2016
ms.prod: asp.net-core
ms.technology: aspnet
ms.topic: article
uid: mvc/models/validation
ms.openlocfilehash: dfb24a4c72b15737295b7aea406be24160fc6674
ms.sourcegitcommit: a510f38930abc84c4b302029d019a34dfe76823b
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 01/30/2018
---
# <a name="introduction-to-model-validation-in-aspnet-core-mvc"></a><span data-ttu-id="3ac42-103">Úvod k ověření modelu v aplikaci ASP.NET MVC jádra</span><span class="sxs-lookup"><span data-stu-id="3ac42-103">Introduction to model validation in ASP.NET Core MVC</span></span>

<span data-ttu-id="3ac42-104">Podle [Rachel Appel](https://github.com/rachelappel)</span><span class="sxs-lookup"><span data-stu-id="3ac42-104">By [Rachel Appel](https://github.com/rachelappel)</span></span>

## <a name="introduction-to-model-validation"></a><span data-ttu-id="3ac42-105">Úvod k ověření modelu</span><span class="sxs-lookup"><span data-stu-id="3ac42-105">Introduction to model validation</span></span>

<span data-ttu-id="3ac42-106">Než se aplikace ukládá data do databáze, aplikace musí ověřit data.</span><span class="sxs-lookup"><span data-stu-id="3ac42-106">Before an app stores data in a database, the app must validate the data.</span></span> <span data-ttu-id="3ac42-107">Data se musí kontrolovat potenciální bezpečnostní hrozby ověřili, že je správně naformátovaný podle typu a velikosti a musí odpovídat pravidel.</span><span class="sxs-lookup"><span data-stu-id="3ac42-107">Data must be checked for potential security threats, verified that it's appropriately formatted by type and size, and it must conform to your rules.</span></span> <span data-ttu-id="3ac42-108">Ověření je nutné, i když může být redundantní a zdlouhavé pro implementaci.</span><span class="sxs-lookup"><span data-stu-id="3ac42-108">Validation is necessary although it can be redundant and tedious to implement.</span></span> <span data-ttu-id="3ac42-109">Ověření dochází v MVC, klient i server.</span><span class="sxs-lookup"><span data-stu-id="3ac42-109">In MVC, validation happens on both the client and server.</span></span>

<span data-ttu-id="3ac42-110">Naštěstí má .NET abstrahované ověření do atributů ověření.</span><span class="sxs-lookup"><span data-stu-id="3ac42-110">Fortunately, .NET has abstracted validation into validation attributes.</span></span> <span data-ttu-id="3ac42-111">Tyto atributy obsahovat kód pro ověření, a snižují množství kód, který musíte napsat.</span><span class="sxs-lookup"><span data-stu-id="3ac42-111">These attributes contain validation code, thereby reducing the amount of code you must write.</span></span>

<span data-ttu-id="3ac42-112">[Zobrazení nebo stažení ukázky z webu GitHub](https://github.com/aspnet/Docs/tree/master/aspnetcore/mvc/models/validation/sample).</span><span class="sxs-lookup"><span data-stu-id="3ac42-112">[View or download sample from GitHub](https://github.com/aspnet/Docs/tree/master/aspnetcore/mvc/models/validation/sample).</span></span>

## <a name="validation-attributes"></a><span data-ttu-id="3ac42-113">Atributy ověření</span><span class="sxs-lookup"><span data-stu-id="3ac42-113">Validation Attributes</span></span>

<span data-ttu-id="3ac42-114">Atributy ověření představují způsob, jak nakonfigurovat ověření modelu tak, aby byl koncepčně podobá ověření na pole v tabulkách databáze.</span><span class="sxs-lookup"><span data-stu-id="3ac42-114">Validation attributes are a way to configure model validation so it's similar conceptually to validation on fields in database tables.</span></span> <span data-ttu-id="3ac42-115">To zahrnuje omezení, jako je například přiřazení datových typů nebo povinná pole.</span><span class="sxs-lookup"><span data-stu-id="3ac42-115">This includes constraints such as assigning data types or required fields.</span></span> <span data-ttu-id="3ac42-116">Ostatní typy ověření, které zahrnuje použití vzorce k datům a vynutit obchodních pravidel, jako je například platební karty, telefonní číslo nebo e-mailovou adresu.</span><span class="sxs-lookup"><span data-stu-id="3ac42-116">Other types of validation include applying patterns to data to enforce business rules, such as a credit card, phone number, or email address.</span></span> <span data-ttu-id="3ac42-117">Atributy ověření proveďte vynucování tyto požadavky mnohem jednodušší a snadněji použitelná.</span><span class="sxs-lookup"><span data-stu-id="3ac42-117">Validation attributes make enforcing these requirements much simpler and easier to use.</span></span>

<span data-ttu-id="3ac42-118">Níže je poznámkami `Movie` modelu z aplikace, která uchovává informace o filmy a televizní pořady.</span><span class="sxs-lookup"><span data-stu-id="3ac42-118">Below is an annotated `Movie` model from an app that stores information about movies and TV shows.</span></span> <span data-ttu-id="3ac42-119">Většinu vlastností jsou vyžadované a několik vlastností řetězec mít požadavky na délku.</span><span class="sxs-lookup"><span data-stu-id="3ac42-119">Most of the properties are required and several string properties have length requirements.</span></span> <span data-ttu-id="3ac42-120">Kromě toho je číselný rozsah omezení nastavené pro `Price` vlastnost od 0 do $999,99, spolu s vlastní ověřovací atribut.</span><span class="sxs-lookup"><span data-stu-id="3ac42-120">Additionally, there's a numeric range restriction in place for the `Price` property from 0 to $999.99, along with a custom validation attribute.</span></span>

[!code-csharp[Main](validation/sample/Movie.cs?range=6-29)]

<span data-ttu-id="3ac42-121">Pravidla týkající se dat pro tuto aplikaci, usnadnit zachování kód jednoduše čtení prostřednictvím modelu zjistí.</span><span class="sxs-lookup"><span data-stu-id="3ac42-121">Simply reading through the model reveals the rules about data for this app, making it easier to maintain the code.</span></span> <span data-ttu-id="3ac42-122">Níže jsou několik atributů oblíbených integrované ověření:</span><span class="sxs-lookup"><span data-stu-id="3ac42-122">Below are several popular built-in validation attributes:</span></span>

* <span data-ttu-id="3ac42-123">`[CreditCard]`: Ověří vlastnost má formát platební karty.</span><span class="sxs-lookup"><span data-stu-id="3ac42-123">`[CreditCard]`: Validates the property has a credit card format.</span></span>

* <span data-ttu-id="3ac42-124">`[Compare]`: Ověří dvě vlastnosti v modelu shody.</span><span class="sxs-lookup"><span data-stu-id="3ac42-124">`[Compare]`: Validates two properties in a model match.</span></span>

* <span data-ttu-id="3ac42-125">`[EmailAddress]`: Ověří vlastnost má formát e-mailu.</span><span class="sxs-lookup"><span data-stu-id="3ac42-125">`[EmailAddress]`: Validates the property has an email format.</span></span>

* <span data-ttu-id="3ac42-126">`[Phone]`: Ověří vlastnost má formát telefonu.</span><span class="sxs-lookup"><span data-stu-id="3ac42-126">`[Phone]`: Validates the property has a telephone format.</span></span>

* <span data-ttu-id="3ac42-127">`[Range]`: Ověří spadá hodnotu vlastnosti v daném rozsahu.</span><span class="sxs-lookup"><span data-stu-id="3ac42-127">`[Range]`: Validates the property value falls within the given range.</span></span>

* <span data-ttu-id="3ac42-128">`[RegularExpression]`: Ověří, že data odpovídá zadanému regulárnímu výrazu.</span><span class="sxs-lookup"><span data-stu-id="3ac42-128">`[RegularExpression]`: Validates that the data matches the specified regular expression.</span></span>

* <span data-ttu-id="3ac42-129">`[Required]`: Provede vyžaduje vlastnost.</span><span class="sxs-lookup"><span data-stu-id="3ac42-129">`[Required]`: Makes a property required.</span></span>

* <span data-ttu-id="3ac42-130">`[StringLength]`: Ověří, že ve vlastnosti string. má nejvíce dané maximální délku.</span><span class="sxs-lookup"><span data-stu-id="3ac42-130">`[StringLength]`: Validates that a string property has at most the given maximum length.</span></span>

* <span data-ttu-id="3ac42-131">`[Url]`: Ověří vlastnost má formát adresy URL.</span><span class="sxs-lookup"><span data-stu-id="3ac42-131">`[Url]`: Validates the property has a URL format.</span></span>

<span data-ttu-id="3ac42-132">MVC podporuje všechny atributy, které je odvozena z `ValidationAttribute` pro účely ověření.</span><span class="sxs-lookup"><span data-stu-id="3ac42-132">MVC supports any attribute that derives from `ValidationAttribute` for validation purposes.</span></span> <span data-ttu-id="3ac42-133">Mnoho atributů užitečné ověření najdete v [System.ComponentModel.DataAnnotations](https://docs.microsoft.com/dotnet/api/system.componentmodel.dataannotations) oboru názvů.</span><span class="sxs-lookup"><span data-stu-id="3ac42-133">Many useful validation attributes can be found in the [System.ComponentModel.DataAnnotations](https://docs.microsoft.com/dotnet/api/system.componentmodel.dataannotations) namespace.</span></span>

<span data-ttu-id="3ac42-134">Mohou existovat instance, kde je nutné více funkcí než nabízejí integrované atributy.</span><span class="sxs-lookup"><span data-stu-id="3ac42-134">There may be instances where you need more features than built-in attributes provide.</span></span> <span data-ttu-id="3ac42-135">Pro tyto dobu, můžete vytvořit vlastního ověřování atributy odvozené z `ValidationAttribute` nebo změna modelu k implementaci `IValidatableObject`.</span><span class="sxs-lookup"><span data-stu-id="3ac42-135">For those times, you can create custom validation attributes by deriving from `ValidationAttribute` or changing your model to implement `IValidatableObject`.</span></span>

## <a name="notes-on-the-use-of-the-required-attribute"></a><span data-ttu-id="3ac42-136">Poznámky k použití požadovaný atribut</span><span class="sxs-lookup"><span data-stu-id="3ac42-136">Notes on the use of the Required attribute</span></span>

<span data-ttu-id="3ac42-137">Hodnotu Null [typů hodnot](/dotnet/csharp/language-reference/keywords/value-types) (například `decimal`, `int`, `float`, a `DateTime`) jsou ze své podstaty potřeba a nepotřebujete `Required` atribut.</span><span class="sxs-lookup"><span data-stu-id="3ac42-137">Non-nullable [value types](/dotnet/csharp/language-reference/keywords/value-types) (such as `decimal`, `int`, `float`, and `DateTime`) are inherently required and don't need the `Required` attribute.</span></span> <span data-ttu-id="3ac42-138">Aplikace provádí žádné kontroly ověřování na straně serveru pro použití hodnot Null typy, které jsou označené `Required`.</span><span class="sxs-lookup"><span data-stu-id="3ac42-138">The app performs no server-side validation checks for non-nullable types that are marked `Required`.</span></span>

<span data-ttu-id="3ac42-139">Vazby modelu MVC, která není problémem ověření a atributů ověření, odmítne odeslání formuláře pole obsahující chybějící hodnoty nebo prázdných znaků pro hodnotu Null typu.</span><span class="sxs-lookup"><span data-stu-id="3ac42-139">MVC model binding, which isn't concerned with validation and validation attributes, rejects a form field submission containing a missing value or whitespace for a non-nullable type.</span></span> <span data-ttu-id="3ac42-140">Chybí `BindRequired` atributu pro vlastnost target vazby modelu ignoruje chybějící data pro použití hodnot Null typy, kde chybí pole formuláře z příchozích dat formuláře.</span><span class="sxs-lookup"><span data-stu-id="3ac42-140">In the absence of a `BindRequired` attribute on the target property, model binding ignores missing data for non-nullable types, where the form field is absent from the incoming form data.</span></span>

<span data-ttu-id="3ac42-141">[BindRequired atribut](/aspnet/core/api/microsoft.aspnetcore.mvc.modelbinding.bindrequiredattribute) (viz také [přizpůsobit chování vazby modelu s atributy](xref:mvc/models/model-binding#customize-model-binding-behavior-with-attributes)) je užitečné pro zajištění dokončení dat formuláře.</span><span class="sxs-lookup"><span data-stu-id="3ac42-141">The [BindRequired attribute](/aspnet/core/api/microsoft.aspnetcore.mvc.modelbinding.bindrequiredattribute) (also see [Customize model binding behavior with attributes](xref:mvc/models/model-binding#customize-model-binding-behavior-with-attributes)) is useful to ensure form data is complete.</span></span> <span data-ttu-id="3ac42-142">Při použití na vlastnost, systém vazba modelu vyžaduje hodnotu pro tuto vlastnost.</span><span class="sxs-lookup"><span data-stu-id="3ac42-142">When applied to a property, the model binding system requires a value for that property.</span></span> <span data-ttu-id="3ac42-143">Při použití typu, systém vazba modelu vyžaduje hodnoty pro všechny vlastnosti tohoto typu.</span><span class="sxs-lookup"><span data-stu-id="3ac42-143">When applied to a type, the model binding system requires values for all of the properties of that type.</span></span>

<span data-ttu-id="3ac42-144">Při použití [Nullable\<T > typ](/dotnet/csharp/programming-guide/nullable-types/) (například `decimal?` nebo `System.Nullable<decimal>`) a označte ji `Required`, se provádí kontrolu ověření na straně serveru, jako kdyby měla vlastnost standardní typ s možnou hodnotou Null (pro Příklad, `string`).</span><span class="sxs-lookup"><span data-stu-id="3ac42-144">When you use a [Nullable\<T> type](/dotnet/csharp/programming-guide/nullable-types/) (for example, `decimal?` or `System.Nullable<decimal>`) and mark it `Required`, a server-side validation check is performed as if the property were a standard nullable type (for example, a `string`).</span></span>

<span data-ttu-id="3ac42-145">Ověřování na straně klienta vyžaduje hodnotu pro pole formuláře, který odpovídá vlastnosti modelu, které jste označili `Required` a pro vlastnost neumožňující hodnotu Null typu, které nejsou označeny jako `Required`.</span><span class="sxs-lookup"><span data-stu-id="3ac42-145">Client-side validation requires a value for a form field that corresponds to a model property that you've marked `Required` and for a non-nullable type property that you haven't marked `Required`.</span></span> <span data-ttu-id="3ac42-146">`Required`slouží k řízení chybové zprávy ověření na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="3ac42-146">`Required` can be used to control the client-side validation error message.</span></span>

## <a name="model-state"></a><span data-ttu-id="3ac42-147">Stav modelu</span><span class="sxs-lookup"><span data-stu-id="3ac42-147">Model State</span></span>

<span data-ttu-id="3ac42-148">Stav modelu, který představuje chyb při ověřování v odeslaných hodnot formuláře HTML.</span><span class="sxs-lookup"><span data-stu-id="3ac42-148">Model state represents validation errors in submitted HTML form values.</span></span>

<span data-ttu-id="3ac42-149">MVC bude pokračovat až dosáhnou ověřování polí maximálního počtu chyb (200 ve výchozím nastavení).</span><span class="sxs-lookup"><span data-stu-id="3ac42-149">MVC will continue validating fields until reaches the maximum number of errors (200 by default).</span></span> <span data-ttu-id="3ac42-150">Toto číslo můžete nakonfigurovat vložením následující kód do `ConfigureServices` metoda v *Startup.cs* souboru:</span><span class="sxs-lookup"><span data-stu-id="3ac42-150">You can configure this number by inserting the following code into the `ConfigureServices` method in the *Startup.cs* file:</span></span>

[!code-csharp[Main](validation/sample/Startup.cs?range=27)]

## <a name="handling-model-state-errors"></a><span data-ttu-id="3ac42-151">Stav modelu zpracování chyb</span><span class="sxs-lookup"><span data-stu-id="3ac42-151">Handling Model State Errors</span></span>

<span data-ttu-id="3ac42-152">Před každou akci kontroleru volané dojde k ověření modelu a metoda akce odpovídá kontrola `ModelState.IsValid` a náležitě reagovat.</span><span class="sxs-lookup"><span data-stu-id="3ac42-152">Model validation occurs prior to each controller action being invoked, and it's the action method's responsibility to inspect `ModelState.IsValid` and react appropriately.</span></span> <span data-ttu-id="3ac42-153">V mnoha případech je vhodné reakce vrátit chybnou odpověď, ideálně s podrobnostmi o důvod, proč se nezdařilo ověření modelu.</span><span class="sxs-lookup"><span data-stu-id="3ac42-153">In many cases, the appropriate reaction is to return an error response, ideally detailing the reason why model validation failed.</span></span>

<span data-ttu-id="3ac42-154">Některé aplikace vybere podle standardní konvence pro řešení chyb při ověřování modelu, ve kterých může být případ filtr příslušné místo pro implementaci tato zásada.</span><span class="sxs-lookup"><span data-stu-id="3ac42-154">Some apps will choose to follow a standard convention for dealing with model validation errors, in which case a filter may be an appropriate place to implement such a policy.</span></span> <span data-ttu-id="3ac42-155">Měli byste otestovat chování vaše akce s stavů modelu platný a je neplatný.</span><span class="sxs-lookup"><span data-stu-id="3ac42-155">You should test how your actions behave with valid and invalid model states.</span></span>

## <a name="manual-validation"></a><span data-ttu-id="3ac42-156">Ruční ověřování</span><span class="sxs-lookup"><span data-stu-id="3ac42-156">Manual validation</span></span>

<span data-ttu-id="3ac42-157">Po dokončení se vazby modelu a ověření, můžete opakovat části.</span><span class="sxs-lookup"><span data-stu-id="3ac42-157">After model binding and validation are complete, you may want to repeat parts of it.</span></span> <span data-ttu-id="3ac42-158">Například uživatele zadali text v poli očekává celé číslo, nebo budete muset výpočtu hodnoty pro vlastnosti modelu.</span><span class="sxs-lookup"><span data-stu-id="3ac42-158">For example, a user may have entered text in a field expecting an integer, or you may need to compute a value for a model's property.</span></span>

<span data-ttu-id="3ac42-159">Musíte ručně spusťte ověření.</span><span class="sxs-lookup"><span data-stu-id="3ac42-159">You may need to run validation manually.</span></span> <span data-ttu-id="3ac42-160">Chcete-li tak učinit, zavolejte `TryValidateModel` metoda, jak je vidět tady:</span><span class="sxs-lookup"><span data-stu-id="3ac42-160">To do so, call the `TryValidateModel` method, as shown here:</span></span>

[!code-csharp[Main](validation/sample/MoviesController.cs?range=52)]

## <a name="custom-validation"></a><span data-ttu-id="3ac42-161">Vlastního ověřování</span><span class="sxs-lookup"><span data-stu-id="3ac42-161">Custom validation</span></span>

<span data-ttu-id="3ac42-162">Atributy ověření fungovat pro většinu potřeb ověření.</span><span class="sxs-lookup"><span data-stu-id="3ac42-162">Validation attributes work for most validation needs.</span></span> <span data-ttu-id="3ac42-163">Některé ověřovací pravidla jsou však specifické pro vaši firmu.</span><span class="sxs-lookup"><span data-stu-id="3ac42-163">However, some validation rules are specific to your business.</span></span> <span data-ttu-id="3ac42-164">Pravidla nemusí být běžné techniky ověření dat, jako je zajištění pole je vyžadován, nebo že vyhovuje rozsah hodnot.</span><span class="sxs-lookup"><span data-stu-id="3ac42-164">Your rules might not be common data validation techniques such as ensuring a field is required or that it conforms to a range of values.</span></span> <span data-ttu-id="3ac42-165">Atributy vlastního ověřování pro tyto scénáře jsou vynikající řešení.</span><span class="sxs-lookup"><span data-stu-id="3ac42-165">For these scenarios, custom validation attributes are a great solution.</span></span> <span data-ttu-id="3ac42-166">Vytváření vlastních atributů vlastní ověření v MVC je snadné.</span><span class="sxs-lookup"><span data-stu-id="3ac42-166">Creating your own custom validation attributes in MVC is easy.</span></span> <span data-ttu-id="3ac42-167">Právě dědí `ValidationAttribute`a přepsat `IsValid` metoda.</span><span class="sxs-lookup"><span data-stu-id="3ac42-167">Just inherit from the `ValidationAttribute`, and override the `IsValid` method.</span></span> <span data-ttu-id="3ac42-168">`IsValid` Metoda přijímá dva parametry, je první objekt s názvem *hodnotu* a druhá `ValidationContext` objekt s názvem *validationContext*.</span><span class="sxs-lookup"><span data-stu-id="3ac42-168">The `IsValid` method accepts two parameters, the first is an object named *value* and the second is a `ValidationContext` object named *validationContext*.</span></span> <span data-ttu-id="3ac42-169">*Hodnota* odkazuje na skutečnou hodnotu z pole, které je vlastní validátor ověřování.</span><span class="sxs-lookup"><span data-stu-id="3ac42-169">*Value* refers to the actual value from the field that your custom validator is validating.</span></span>

<span data-ttu-id="3ac42-170">V následující ukázce stavy obchodní pravidlo, že uživatelé nemusí nastavená genre na *Classic* pro film vydanou po 1960.</span><span class="sxs-lookup"><span data-stu-id="3ac42-170">In the following sample, a business rule states that users may not set the genre to *Classic* for a movie released after 1960.</span></span> <span data-ttu-id="3ac42-171">`[ClassicMovie]` Atribut nejprve hledá genre, a pokud je klasický, pak zkontroluje datum vydání a zkontrolujte, že je novější než 1960.</span><span class="sxs-lookup"><span data-stu-id="3ac42-171">The `[ClassicMovie]` attribute checks the genre first, and if it's a classic, then it checks the release date to see that it's later than 1960.</span></span> <span data-ttu-id="3ac42-172">Pokud vydání po 1960, ověření se nezdaří.</span><span class="sxs-lookup"><span data-stu-id="3ac42-172">If it's released after 1960, validation fails.</span></span> <span data-ttu-id="3ac42-173">Atribut přijme parametrem celé číslo představující rok, můžete ověřit data.</span><span class="sxs-lookup"><span data-stu-id="3ac42-173">The attribute accepts an integer parameter representing the year that you can use to validate data.</span></span> <span data-ttu-id="3ac42-174">Hodnota parametru v konstruktoru atributu můžete zaznamenat, jak je vidět tady:</span><span class="sxs-lookup"><span data-stu-id="3ac42-174">You can capture the value of the parameter in the attribute's constructor, as shown here:</span></span>

[!code-csharp[Main](validation/sample/ClassicMovieAttribute.cs?range=9-29)]

<span data-ttu-id="3ac42-175">`movie` Proměnné výše představuje `Movie` objekt, který obsahuje data z odeslání formuláře k ověření.</span><span class="sxs-lookup"><span data-stu-id="3ac42-175">The `movie` variable above represents a `Movie` object that contains the data from the form submission to validate.</span></span> <span data-ttu-id="3ac42-176">V tomto případě kód ověření ověří datum a genre v `IsValid` metodu `ClassicMovieAttribute` třída podle pravidla.</span><span class="sxs-lookup"><span data-stu-id="3ac42-176">In this case, the validation code checks the date and genre in the `IsValid` method of the `ClassicMovieAttribute` class as per the rules.</span></span> <span data-ttu-id="3ac42-177">Po úspěšném ověření `IsValid` vrátí `ValidationResult.Success` kód, a když se ověřování nezdaří, `ValidationResult` s chybovou zprávou.</span><span class="sxs-lookup"><span data-stu-id="3ac42-177">Upon successful validation `IsValid` returns a `ValidationResult.Success` code, and when validation fails, a `ValidationResult` with an error message.</span></span> <span data-ttu-id="3ac42-178">Když uživatel změní `Genre` pole a formulář odešle, `IsValid` metodu `ClassicMovieAttribute` bude ověřte, zda se na video klasický.</span><span class="sxs-lookup"><span data-stu-id="3ac42-178">When a user modifies the `Genre` field and submits the form, the `IsValid` method of the `ClassicMovieAttribute` will verify whether the movie is a classic.</span></span> <span data-ttu-id="3ac42-179">Podobně jako všechny předdefinované atribut použít `ClassicMovieAttribute` vlastnosti, jako třeba `ReleaseDate` zajistit, ověření se stane, jak je znázorněno v předchozí ukázce kódu.</span><span class="sxs-lookup"><span data-stu-id="3ac42-179">Like any built-in attribute, apply the `ClassicMovieAttribute` to a property such as `ReleaseDate` to ensure validation happens, as shown in the previous code sample.</span></span> <span data-ttu-id="3ac42-180">Vzhledem k tomu, že v příkladu pracuje pouze s `Movie` typy, lepší možností je používat `IValidatableObject` jak je znázorněno v následujícím odstavci.</span><span class="sxs-lookup"><span data-stu-id="3ac42-180">Since the example works only with `Movie` types, a better option is to use `IValidatableObject` as shown in the following paragraph.</span></span>

<span data-ttu-id="3ac42-181">Alternativně může umístit tento stejný kód v modelu tím, že implementujete `Validate` metodu `IValidatableObject` rozhraní.</span><span class="sxs-lookup"><span data-stu-id="3ac42-181">Alternatively, this same code could be placed in the model by implementing the `Validate` method on the `IValidatableObject` interface.</span></span> <span data-ttu-id="3ac42-182">Při ověřování vlastní atributy fungují dobře u ověřování jednotlivé vlastnosti, implementace `IValidatableObject` lze použít k implementaci ověření na úrovni třídy, jak je vidět tady.</span><span class="sxs-lookup"><span data-stu-id="3ac42-182">While custom validation attributes work well for validating individual properties, implementing `IValidatableObject` can be used to implement class-level validation as seen here.</span></span>

[!code-csharp[Main](validation/sample/MovieIValidatable.cs?range=32-40)]

## <a name="client-side-validation"></a><span data-ttu-id="3ac42-183">Ověřování na straně klienta</span><span class="sxs-lookup"><span data-stu-id="3ac42-183">Client side validation</span></span>

<span data-ttu-id="3ac42-184">Ověřování na straně klienta je velmi užitečný pro uživatele.</span><span class="sxs-lookup"><span data-stu-id="3ac42-184">Client side validation is a great convenience for users.</span></span> <span data-ttu-id="3ac42-185">Ho šetří čas, které by jinak věnovat čekání na dobu odezvy na server.</span><span class="sxs-lookup"><span data-stu-id="3ac42-185">It saves time they would otherwise spend waiting for a round trip to the server.</span></span> <span data-ttu-id="3ac42-186">V obchodní podmínky dokonce i pár zlomků sekund násobí stokrát každý den přidá až velké množství času, náklady a před.</span><span class="sxs-lookup"><span data-stu-id="3ac42-186">In business terms, even a few fractions of seconds multiplied hundreds of times each day adds up to be a lot of time, expense, and frustration.</span></span> <span data-ttu-id="3ac42-187">Snadný a okamžitou ověření umožňuje uživatelům vyšší efektivity práce a vytvořit lepší kvalitu vstup a výstup.</span><span class="sxs-lookup"><span data-stu-id="3ac42-187">Straightforward and immediate validation enables users to work more efficiently and produce better quality input and output.</span></span>

<span data-ttu-id="3ac42-188">Zobrazení s správné odkazům na skript JavaScript musí mít zavedené pro ověřování na straně klienta pro práci jak kterou tady vidíte.</span><span class="sxs-lookup"><span data-stu-id="3ac42-188">You must have a view with the proper JavaScript script references in place for client side validation to work as you see here.</span></span>

[!code-cshtml[Main](validation/sample/Views/Shared/_Layout.cshtml?range=37)]

[!code-cshtml[Main](validation/sample/Views/Shared/_ValidationScriptsPartial.cshtml)]

<span data-ttu-id="3ac42-189">[JQuery Nerušivý ověření](https://github.com/aspnet/jquery-validation-unobtrusive) skript je vlastní front-end knihovna Microsoft, který je založený na oblíbených [jQuery ověřením](https://jqueryvalidation.org/) modulu plug-in.</span><span class="sxs-lookup"><span data-stu-id="3ac42-189">The [jQuery Unobtrusive Validation](https://github.com/aspnet/jquery-validation-unobtrusive) script is a custom Microsoft front-end library that builds on the popular [jQuery Validate](https://jqueryvalidation.org/) plugin.</span></span> <span data-ttu-id="3ac42-190">Bez jQuery Nerušivý ověření, budete muset code stejnou ověřovací logiku na dvou místech: jednou v atributech straně ověření serveru na vlastnosti modelu a poté znovu v skripty na straně klienta (příklady pro architekturu jQuery ověřit na [ `validate()` ](https://jqueryvalidation.org/validate/) metoda ukazuje, jak komplexní to může být).</span><span class="sxs-lookup"><span data-stu-id="3ac42-190">Without jQuery Unobtrusive Validation, you would have to code the same validation logic in two places: once in the server side validation attributes on model properties, and then again in client side scripts (the examples for jQuery Validate's [`validate()`](https://jqueryvalidation.org/validate/) method shows how complex this could become).</span></span> <span data-ttu-id="3ac42-191">Místo toho MVC [značky Pomocníci](xref:mvc/views/tag-helpers/intro) a [pomocné objekty HTML](xref:mvc/views/overview) mohli použít atributy ověření a metadata z vlastnosti modelu k vykreslení HTML 5 typu [atributy datového](http://w3c.github.io/html/dom.html#embedding-custom-non-visible-data-with-the-data-attributes) v elementy form vyžadující ověření.</span><span class="sxs-lookup"><span data-stu-id="3ac42-191">Instead, MVC's [Tag Helpers](xref:mvc/views/tag-helpers/intro) and [HTML helpers](xref:mvc/views/overview) are able to use the validation attributes and type metadata from model properties to render HTML 5 [data- attributes](http://w3c.github.io/html/dom.html#embedding-custom-non-visible-data-with-the-data-attributes) in the form elements that need validation.</span></span> <span data-ttu-id="3ac42-192">Generuje MVC `data-` atributy pro předdefinované a vlastní atributy.</span><span class="sxs-lookup"><span data-stu-id="3ac42-192">MVC generates the `data-` attributes for both built-in and custom attributes.</span></span> <span data-ttu-id="3ac42-193">jQuery Nerušivý ověření pak analyzuje tez `data-` atributy a předá logiku jQuery ověřením, efektivně "kopírování" logiku ověření straně serveru do klienta.</span><span class="sxs-lookup"><span data-stu-id="3ac42-193">jQuery Unobtrusive Validation then parses thes `data-` attributes and passes the logic to jQuery Validate, effectively "copying" the server side validation logic to the client.</span></span> <span data-ttu-id="3ac42-194">Můžete zobrazit chyby ověření na straně klienta pomocí pomocné rutiny relevantní značky, jak je vidět tady:</span><span class="sxs-lookup"><span data-stu-id="3ac42-194">You can display validation errors on the client using the relevant tag helpers as shown here:</span></span>

[!code-cshtml[Main](validation/sample/Views/Movies/Create.cshtml?highlight=4,5&range=19-25)]

<span data-ttu-id="3ac42-195">Výše uvedené značky Pomocníci vykreslení HTML níže.</span><span class="sxs-lookup"><span data-stu-id="3ac42-195">The tag helpers above render the HTML below.</span></span> <span data-ttu-id="3ac42-196">Všimněte si, že `data-` atributy v kódu HTML výstup odpovídají atributů ověření pro `ReleaseDate` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="3ac42-196">Notice that the `data-` attributes in the HTML output correspond to the validation attributes for the `ReleaseDate` property.</span></span> <span data-ttu-id="3ac42-197">`data-val-required` Atribut níže obsahuje chybovou zprávu, pokud uživatel není vyplnit pole Datum verze se má zobrazit.</span><span class="sxs-lookup"><span data-stu-id="3ac42-197">The `data-val-required` attribute below contains an error message to display if the user doesn't fill in the release date field.</span></span> <span data-ttu-id="3ac42-198">jQuery Nerušivý ověření předá tuto hodnotu jQuery ověřením [ `required()` ](https://jqueryvalidation.org/required-method/) metodu, která pak zobrazí zprávy z odpovídajícího  **\<span >** element.</span><span class="sxs-lookup"><span data-stu-id="3ac42-198">jQuery Unobtrusive Validation passes this value to the jQuery Validate [`required()`](https://jqueryvalidation.org/required-method/) method, which then displays that message in the accompanying **\<span>** element.</span></span>

```html
<form action="/Movies/Create" method="post">
    <div class="form-horizontal">
        <h4>Movie</h4>
        <div class="text-danger"></div>
        <div class="form-group">
            <label class="col-md-2 control-label" for="ReleaseDate">ReleaseDate</label>
            <div class="col-md-10">
                <input class="form-control" type="datetime"
                data-val="true" data-val-required="The ReleaseDate field is required."
                id="ReleaseDate" name="ReleaseDate" value="" />
                <span class="text-danger field-validation-valid"
                data-valmsg-for="ReleaseDate" data-valmsg-replace="true"></span>
            </div>
        </div>
    </div>
</form>
```

<span data-ttu-id="3ac42-199">Ověřování na straně klienta brání odeslání, dokud formulář je platný.</span><span class="sxs-lookup"><span data-stu-id="3ac42-199">Client-side validation prevents submission until the form is valid.</span></span> <span data-ttu-id="3ac42-200">Tlačítko pro odeslání spustí JavaScript, která buď formulář odešle, nebo zobrazí chybové zprávy.</span><span class="sxs-lookup"><span data-stu-id="3ac42-200">The Submit button runs JavaScript that either submits the form or displays error messages.</span></span>

<span data-ttu-id="3ac42-201">MVC určuje na základě typu dat .NET vlastnosti, které by mohly mít přepsat pomocí hodnoty atributu typu `[DataType]` atributy.</span><span class="sxs-lookup"><span data-stu-id="3ac42-201">MVC determines type attribute values based on the .NET data type of a property, possibly overridden using `[DataType]` attributes.</span></span> <span data-ttu-id="3ac42-202">Základní `[DataType]` atribut nemá žádné skutečných serverovou ověření.</span><span class="sxs-lookup"><span data-stu-id="3ac42-202">The base `[DataType]` attribute does no real server-side validation.</span></span> <span data-ttu-id="3ac42-203">Prohlížeče zvolte vlastní chybové zprávy a zobrazit tyto chyby, ale chtějí, ale ověření Nerušivého balíček jQuery můžete přepsat zprávy a zobrazit konzistentní s ostatními.</span><span class="sxs-lookup"><span data-stu-id="3ac42-203">Browsers choose their own error messages and display those errors however they wish, however the jQuery Validation Unobtrusive package can override the messages and display them consistently with others.</span></span> <span data-ttu-id="3ac42-204">To se stane, když uživatelé nejvíce samozřejmě použít `[DataType]` podtřídy jako `[EmailAddress]`.</span><span class="sxs-lookup"><span data-stu-id="3ac42-204">This happens most obviously when users apply `[DataType]` subclasses such as `[EmailAddress]`.</span></span>

### <a name="add-validation-to-dynamic-forms"></a><span data-ttu-id="3ac42-205">Přidávání ověření do dynamické formulářů</span><span class="sxs-lookup"><span data-stu-id="3ac42-205">Add Validation to Dynamic Forms</span></span>

<span data-ttu-id="3ac42-206">Protože jQuery Nerušivý ověření předá logiku ověření a parametry jQuery ověřením při prvním načtení stránky, nebude dynamicky generovaném forms automaticky vykazovat ověření.</span><span class="sxs-lookup"><span data-stu-id="3ac42-206">Because jQuery Unobtrusive Validation passes validation logic and parameters to jQuery Validate when the page first loads, dynamically generated forms won't automatically exhibit validation.</span></span> <span data-ttu-id="3ac42-207">Místo toho se musí zjistit jQuery Nerušivý ověření analyzovat dynamické formuláře ihned po jeho vytvoření.</span><span class="sxs-lookup"><span data-stu-id="3ac42-207">Instead, you must tell jQuery Unobtrusive Validation to parse the dynamic form immediately after creating it.</span></span> <span data-ttu-id="3ac42-208">Například následující kód ukazuje, jak může nastavit ověřování na straně klienta ve formuláři přidané prostřednictvím AJAX.</span><span class="sxs-lookup"><span data-stu-id="3ac42-208">For example, the code below shows how you might set up client side validation on a form added via AJAX.</span></span>

```js
$.get({
    url: "https://url/that/returns/a/form",
    dataType: "html",
    error: function(jqXHR, textStatus, errorThrown) {
        alert(textStatus + ": Couldn't add form. " + errorThrown);
    },
    success: function(newFormHTML) {
        var container = document.getElementById("form-container");
        container.insertAdjacentHTML("beforeend", newFormHTML);
        var forms = container.getElementsByTagName("form");
        var newForm = forms[forms.length - 1];
        $.validator.unobtrusive.parse(newForm);
    }
})
```

<span data-ttu-id="3ac42-209">`$.validator.unobtrusive.parse()` Metoda přijímá jQuery selektor pro jeho jeden argument.</span><span class="sxs-lookup"><span data-stu-id="3ac42-209">The `$.validator.unobtrusive.parse()` method accepts a jQuery selector for its one argument.</span></span> <span data-ttu-id="3ac42-210">Tato metoda informuje jQuery Nerušivý ověření analyzovat `data-` atributy formulářů v rámci tohoto selektoru.</span><span class="sxs-lookup"><span data-stu-id="3ac42-210">This method tells jQuery Unobtrusive Validation to parse the `data-` attributes of forms within that selector.</span></span> <span data-ttu-id="3ac42-211">Hodnoty těchto atributů jsou předána do modulu plug-in jQuery ověřit tak, aby formuláře jádro vykazuje ověřovací pravidla klienta požadované straně.</span><span class="sxs-lookup"><span data-stu-id="3ac42-211">The values of those attributes are then passed to the jQuery Validate plugin so that the form exhibits the desired client side validation rules.</span></span>

### <a name="add-validation-to-dynamic-controls"></a><span data-ttu-id="3ac42-212">Přidání ověření do dynamických ovládacích prvků</span><span class="sxs-lookup"><span data-stu-id="3ac42-212">Add Validation to Dynamic Controls</span></span>

<span data-ttu-id="3ac42-213">Můžete také aktualizovat pravidla ověřování ve formuláři, pokud jednotlivé prvky, jako například `<input/>`s a `<select/>`s, jsou generována dynamicky.</span><span class="sxs-lookup"><span data-stu-id="3ac42-213">You can also update the validation rules on a form when individual controls, such as `<input/>`s and `<select/>`s, are dynamically generated.</span></span> <span data-ttu-id="3ac42-214">Nelze předat selektory pro tyto prvky, aby `parse()` metoda přímo protože okolního formulář již byla analyzovat a nebude aktualizovat.</span><span class="sxs-lookup"><span data-stu-id="3ac42-214">You cannot pass selectors for these elements to the `parse()` method directly because the surrounding form has already been parsed and won't update.</span></span> <span data-ttu-id="3ac42-215">Místo toho nejprve odstranit existující data ověření, pak rozboru celý formulář, jak je uvedeno níže:</span><span class="sxs-lookup"><span data-stu-id="3ac42-215">Instead, you first remove the existing validation data, then reparse the entire form, as shown below:</span></span>

```js
$.get({
    url: "https://url/that/returns/a/control",
    dataType: "html",
    error: function(jqXHR, textStatus, errorThrown) {
        alert(textStatus + ": Couldn't add form. " + errorThrown);
    },
    success: function(newInputHTML) {
        var form = document.getElementById("my-form");
        form.insertAdjacentHTML("beforeend", newInputHTML);
        form.removeData("validator")    // Added by the raw jQuery Validate
            .removeData("unobtrusiveValidation");   // Added by jQuery Unobtrusive Validation
        $.validator.unobtrusive.parse(form);
    }
})
```

## <a name="iclientmodelvalidator"></a><span data-ttu-id="3ac42-216">IClientModelValidator</span><span class="sxs-lookup"><span data-stu-id="3ac42-216">IClientModelValidator</span></span>

<span data-ttu-id="3ac42-217">Můžete vytvořit logiku straně klienta pro vaše vlastní atribut a [nerušivý ověření](http://jqueryvalidation.org/documentation/) se spustí na klienta pro vás automaticky jako součást ověření.</span><span class="sxs-lookup"><span data-stu-id="3ac42-217">You may create client side logic for your custom attribute, and [unobtrusive validation](http://jqueryvalidation.org/documentation/) will execute it on the client for you automatically as part of validation.</span></span> <span data-ttu-id="3ac42-218">Prvním krokem je řídí, jaké atributy datového přidají implementací `IClientModelValidator` rozhraní, jak je vidět tady:</span><span class="sxs-lookup"><span data-stu-id="3ac42-218">The first step is to control what data- attributes are added by implementing the `IClientModelValidator` interface as shown here:</span></span>

[!code-csharp[Main](validation/sample/ClassicMovieAttribute.cs?range=30-42)]

<span data-ttu-id="3ac42-219">Atributy, které toto rozhraní implementovat můžete přidat atributy HTML generovaného pole.</span><span class="sxs-lookup"><span data-stu-id="3ac42-219">Attributes that implement this interface can add HTML attributes to generated fields.</span></span> <span data-ttu-id="3ac42-220">Zkoumání výstup `ReleaseDate` element zjistí HTML, který je podobný na předchozí příklad, s výjimkou teď není `data-val-classicmovie` atribut, který byl definován v `AddValidation` metodu `IClientModelValidator`.</span><span class="sxs-lookup"><span data-stu-id="3ac42-220">Examining the output for the `ReleaseDate` element reveals HTML that's similar to the previous example, except now there's a `data-val-classicmovie` attribute that was defined in the `AddValidation` method of `IClientModelValidator`.</span></span>

```html
<input class="form-control" type="datetime"
    data-val="true"
    data-val-classicmovie="Classic movies must have a release year earlier than 1960."
    data-val-classicmovie-year="1960"
    data-val-required="The ReleaseDate field is required."
    id="ReleaseDate" name="ReleaseDate" value="" />
```

<span data-ttu-id="3ac42-221">Nerušivý ověření používá data v `data-` atributy, které mají zobrazovat chybové zprávy.</span><span class="sxs-lookup"><span data-stu-id="3ac42-221">Unobtrusive validation uses the data in the `data-` attributes to display error messages.</span></span> <span data-ttu-id="3ac42-222">Ale jQuery nebude vědět o pravidlech nebo zprávy, dokud je nepřidáte do jQuery na `validator` objektu.</span><span class="sxs-lookup"><span data-stu-id="3ac42-222">However, jQuery doesn't know about rules or messages until you add them to jQuery's `validator` object.</span></span> <span data-ttu-id="3ac42-223">To je znázorněno v následujícím příkladu, který přidává metodu s názvem `classicmovie` obsahující vlastního ověřovacího kódu do jQuery `validator` objektu.</span><span class="sxs-lookup"><span data-stu-id="3ac42-223">This is shown in the example below that adds a method named `classicmovie` containing custom client validation code to the jQuery `validator` object.</span></span>

[!code-javascript[Main](validation/sample/Views/Movies/Create.cshtml?range=71-93)]

<span data-ttu-id="3ac42-224">JQuery má teď informace o spuštění vlastního ověřování jazyka JavaScript, jakož i chybovou zprávu zobrazena v případě, že ověřovací kód vrátí hodnotu false.</span><span class="sxs-lookup"><span data-stu-id="3ac42-224">Now jQuery has the information to execute the custom JavaScript validation as well as the error message to display if that validation code returns false.</span></span>

## <a name="remote-validation"></a><span data-ttu-id="3ac42-225">Vzdálené ověření</span><span class="sxs-lookup"><span data-stu-id="3ac42-225">Remote validation</span></span>

<span data-ttu-id="3ac42-226">Vzdálené ověření je skvělé funkce, která použijte, pokud je nutné ověřit data v klientovi s daty na serveru.</span><span class="sxs-lookup"><span data-stu-id="3ac42-226">Remote validation is a great feature to use when you need to validate data on the client against data on the server.</span></span> <span data-ttu-id="3ac42-227">Aplikace může například muset ověřte, jestli e-mailu nebo uživatelské jméno je již používán, a je nutné dotaz velké množství dat. Uděláte to tak.</span><span class="sxs-lookup"><span data-stu-id="3ac42-227">For example, your app may need to verify whether an email or user name is already in use, and it must query a large amount of data to do so.</span></span> <span data-ttu-id="3ac42-228">Stahování velké nastaví dat pro ověřování jednu nebo několik polí využívá příliš mnoho prostředků.</span><span class="sxs-lookup"><span data-stu-id="3ac42-228">Downloading large sets of data for validating one or a few fields consumes too many resources.</span></span> <span data-ttu-id="3ac42-229">Může také nabízet citlivé informace.</span><span class="sxs-lookup"><span data-stu-id="3ac42-229">It may also expose sensitive information.</span></span> <span data-ttu-id="3ac42-230">Alternativou je vytvořte žádost na operace round-trip pro ověření pole.</span><span class="sxs-lookup"><span data-stu-id="3ac42-230">An alternative is to make a round-trip request to validate a field.</span></span>

<span data-ttu-id="3ac42-231">Vzdálené ověření můžete implementovat ve dvou krocích.</span><span class="sxs-lookup"><span data-stu-id="3ac42-231">You can implement remote validation in a two step process.</span></span> <span data-ttu-id="3ac42-232">Nejdřív musíte označit modelu pomocí `[Remote]` atribut.</span><span class="sxs-lookup"><span data-stu-id="3ac42-232">First, you must annotate your model with the `[Remote]` attribute.</span></span> <span data-ttu-id="3ac42-233">`[Remote]` Atribut přijímá několik přetížení, které můžete použít k přímé JavaScript na straně klienta pro příslušný kód volat.</span><span class="sxs-lookup"><span data-stu-id="3ac42-233">The `[Remote]` attribute accepts multiple overloads you can use to direct client side JavaScript to the appropriate code to call.</span></span> <span data-ttu-id="3ac42-234">Následující příklad ukazuje na `VerifyEmail` metody akce `Users` řadiče.</span><span class="sxs-lookup"><span data-stu-id="3ac42-234">The example below points to the `VerifyEmail` action method of the `Users` controller.</span></span>

[!code-csharp[Main](validation/sample/User.cs?range=7-8)]

<span data-ttu-id="3ac42-235">Druhým krokem je uvedení ověřovacího kódu v odpovídající metodu akce, jak jsou definovány v `[Remote]` atribut.</span><span class="sxs-lookup"><span data-stu-id="3ac42-235">The second step is putting the validation code in the corresponding action method as defined in the `[Remote]` attribute.</span></span> <span data-ttu-id="3ac42-236">Podle jQuery ověřením [ `remote()` ](https://jqueryvalidation.org/remote-method/) metoda dokumentaci:</span><span class="sxs-lookup"><span data-stu-id="3ac42-236">According to the jQuery Validate [`remote()`](https://jqueryvalidation.org/remote-method/) method documentation:</span></span>

> <span data-ttu-id="3ac42-237">Serverside odpovědi musí být řetězec formátu JSON, který musí být `"true"` pro platné prvky a může být `"false"`, `undefined`, nebo `null` neplatný elementy, používá výchozí chybová zpráva.</span><span class="sxs-lookup"><span data-stu-id="3ac42-237">The serverside response must be a JSON string that must be `"true"` for valid elements, and can be `"false"`, `undefined`, or `null` for invalid elements, using the default error message.</span></span> <span data-ttu-id="3ac42-238">Pokud odpověď serverside je řetězec, např.</span><span class="sxs-lookup"><span data-stu-id="3ac42-238">If the serverside response is a string, eg.</span></span> <span data-ttu-id="3ac42-239">`"That name is already taken, try peter123 instead"`, zobrazí se tento řetězec jako vlastní chybová zpráva místo výchozího.</span><span class="sxs-lookup"><span data-stu-id="3ac42-239">`"That name is already taken, try peter123 instead"`, this string will be displayed as a custom error message in place of the default.</span></span>

<span data-ttu-id="3ac42-240">Definice `VerifyEmail()` metoda řídí následujícími pravidly, jak je uvedeno níže.</span><span class="sxs-lookup"><span data-stu-id="3ac42-240">The definition of the `VerifyEmail()` method follows these rules, as shown below.</span></span> <span data-ttu-id="3ac42-241">Vrátí chybu ověření zpráv, pokud nedojde k e-mailu, nebo `true` Pokud e-mailu je zdarma a zabalí výsledek v `JsonResult` objektu.</span><span class="sxs-lookup"><span data-stu-id="3ac42-241">It returns a validation error message if the email is taken, or `true` if the email is free, and wraps the result in a `JsonResult` object.</span></span> <span data-ttu-id="3ac42-242">Na straně klienta pak můžete použít vrácená hodnota pokračovat nebo zobrazit chyba v případě potřeby.</span><span class="sxs-lookup"><span data-stu-id="3ac42-242">The client side can then use the returned value to proceed or display the error if needed.</span></span>

[!code-csharp[Main](validation/sample/UsersController.cs?range=19-28)]

<span data-ttu-id="3ac42-243">Nyní když uživatelé zadají e-mailu, JavaScript v zobrazení umožňuje vzdálené volání zda že e-mailové byla přijata, a pokud ano, zobrazí se chybová zpráva.</span><span class="sxs-lookup"><span data-stu-id="3ac42-243">Now when users enter an email, JavaScript in the view makes a remote call to see if that email has been taken and, if so, displays the error message.</span></span> <span data-ttu-id="3ac42-244">Uživatel, jinak můžete odeslat formuláře jako obvykle.</span><span class="sxs-lookup"><span data-stu-id="3ac42-244">Otherwise, the user can submit the form as usual.</span></span>

<span data-ttu-id="3ac42-245">`AdditionalFields` Vlastnost `[Remote]` atribut je užitečný pro ověření kombinace pole s daty na serveru.</span><span class="sxs-lookup"><span data-stu-id="3ac42-245">The `AdditionalFields` property of the `[Remote]` attribute is useful for validating combinations of fields against data on the server.</span></span> <span data-ttu-id="3ac42-246">Například pokud `User` modelu z výše měl dva další vlastnosti názvem `FirstName` a `LastName`, můžete chtít ověřit, že žádné stávající uživatelé již mají tuto dvojici názvy.</span><span class="sxs-lookup"><span data-stu-id="3ac42-246">For example, if the `User` model from above had two additional properties called `FirstName` and `LastName`, you might want to verify that no existing users already have that pair of names.</span></span> <span data-ttu-id="3ac42-247">Můžete definovat nové vlastnosti, jak je znázorněno v následujícím kódu:</span><span class="sxs-lookup"><span data-stu-id="3ac42-247">You define the new properties as shown in the following code:</span></span>

[!code-csharp[Main](validation/sample/User.cs?range=10-13)]

<span data-ttu-id="3ac42-248">`AdditionalFields`může jste explicitně nastavena na řetězce `"FirstName"` a `"LastName"`, ale pomocí [ `nameof` ](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/nameof) operátor takto zjednodušuje refaktoring později.</span><span class="sxs-lookup"><span data-stu-id="3ac42-248">`AdditionalFields` could've been set explicitly to the strings `"FirstName"` and `"LastName"`, but using the [`nameof`](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/nameof) operator like this simplifies later refactoring.</span></span> <span data-ttu-id="3ac42-249">Metody akce k provedení ověření musí přijměte dva argumenty, jeden pro hodnotu `FirstName` a jeden pro hodnotu `LastName`.</span><span class="sxs-lookup"><span data-stu-id="3ac42-249">The action method to perform the validation must then accept two arguments, one for the value of `FirstName` and one for the value of `LastName`.</span></span>

[!code-csharp[Main](validation/sample/UsersController.cs?range=30-39)]

<span data-ttu-id="3ac42-250">Nyní když uživatelé zadat název první a poslední, JavaScript:</span><span class="sxs-lookup"><span data-stu-id="3ac42-250">Now when users enter a first and last name, JavaScript:</span></span>

* <span data-ttu-id="3ac42-251">Díky vzdálené volání chcete zobrazit, pokud je už zabraný této dvojice názvů.</span><span class="sxs-lookup"><span data-stu-id="3ac42-251">Makes a remote call to see if that pair of names has been taken.</span></span>
* <span data-ttu-id="3ac42-252">Pokud byly převzaty dvojici, se zobrazí chybová zpráva.</span><span class="sxs-lookup"><span data-stu-id="3ac42-252">If the pair has been taken, an error message is displayed.</span></span> 
* <span data-ttu-id="3ac42-253">Pokud nebyla provedena, uživatel odešle formulář.</span><span class="sxs-lookup"><span data-stu-id="3ac42-253">If not taken, the user can submit the form.</span></span>

<span data-ttu-id="3ac42-254">Pokud budete muset ověřit minimálně dva další pole s `[Remote]` atribut jim poskytujete jako seznam oddělený čárkami.</span><span class="sxs-lookup"><span data-stu-id="3ac42-254">If you need to validate two or more additional fields with the `[Remote]` attribute, you provide them as a comma-delimited list.</span></span> <span data-ttu-id="3ac42-255">Chcete-li například přidat `MiddleName` nastavena pro model `[Remote]` atributu, jak je znázorněno v následujícím kódu:</span><span class="sxs-lookup"><span data-stu-id="3ac42-255">For example, to add a `MiddleName` property to the model, set the `[Remote]` attribute as shown in the following code:</span></span>

```cs
[Remote(action: "VerifyName", controller: "Users", AdditionalFields = nameof(FirstName) + "," + nameof(LastName))]
public string MiddleName { get; set; }
```

<span data-ttu-id="3ac42-256">`AdditionalFields`, jako jsou všechny argumenty atributu musí být konstantní výraz.</span><span class="sxs-lookup"><span data-stu-id="3ac42-256">`AdditionalFields`, like all attribute arguments, must be a constant expression.</span></span> <span data-ttu-id="3ac42-257">Proto nesmí používat [interpolované řetězce](https://docs.microsoft.com/dotnet/csharp/language-reference/keywords/interpolated-strings) nebo volání [ `string.Join()` ](https://msdn.microsoft.com/library/system.string.join(v=vs.110).aspx) k chybě při inicializaci `AdditionalFields`.</span><span class="sxs-lookup"><span data-stu-id="3ac42-257">Therefore, you must not use an [interpolated string](https://docs.microsoft.com/dotnet/csharp/language-reference/keywords/interpolated-strings) or call [`string.Join()`](https://msdn.microsoft.com/library/system.string.join(v=vs.110).aspx) to initialize `AdditionalFields`.</span></span> <span data-ttu-id="3ac42-258">Pro každý další pole, která přidáte do `[Remote]` atribut, musíte přidat jiné argument odpovídající metoda akce kontroleru.</span><span class="sxs-lookup"><span data-stu-id="3ac42-258">For every additional field that you add to the `[Remote]` attribute, you must add another argument to the corresponding controller action method.</span></span>
