---
title: "Práce s několika prostředí v ASP.NET Core"
author: ardalis
description: "Zjistěte, jak ASP.NET Core poskytuje podporu pro řízení chování aplikace ve více prostředích."
keywords: "ASP.NET Core, nastavení prostředí, ASPNETCORE_ENVIRONMENT"
ms.author: riande
manager: wpickett
ms.date: 10/14/2016
ms.topic: article
ms.assetid: b5bba985-be12-4464-9a01-df3599b2a6f1
ms.technology: aspnet
ms.prod: asp.net-core
uid: fundamentals/environments
ms.openlocfilehash: 9127c3d7180422c0e3dbd813340dd485bf360c81
ms.sourcegitcommit: 12e5194936b7e820efc5505a2d5d4f84e88eb5ef
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 01/11/2018
---
# <a name="working-with-multiple-environments"></a><span data-ttu-id="8d9ab-104">Práce s několika prostředí</span><span class="sxs-lookup"><span data-stu-id="8d9ab-104">Working with multiple environments</span></span>

<span data-ttu-id="8d9ab-105">Podle [Steve Smith](https://ardalis.com/)</span><span class="sxs-lookup"><span data-stu-id="8d9ab-105">By [Steve Smith](https://ardalis.com/)</span></span>

<span data-ttu-id="8d9ab-106">Základní technologie ASP.NET poskytuje podporu pro řízení chování aplikace ve více prostředích, jako je například vývoj, pracovní a provozní.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-106">ASP.NET Core provides support for controlling app behavior across multiple environments, such as development, staging, and production.</span></span> <span data-ttu-id="8d9ab-107">Proměnné prostředí jsou slouží k určení běhové prostředí, umožňuje aplikaci nakonfigurovat pro prostředí.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-107">Environment variables are used to indicate the runtime environment, allowing the app to be configured for that environment.</span></span>

<span data-ttu-id="8d9ab-108">[Zobrazit nebo stáhnout ukázkový kód](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/environments/sample) ([stažení](xref:tutorials/index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="8d9ab-108">[View or download sample code](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/environments/sample) ([how to download](xref:tutorials/index#how-to-download-a-sample))</span></span>

## <a name="development-staging-production"></a><span data-ttu-id="8d9ab-109">Vývoj, pracovní, výroby</span><span class="sxs-lookup"><span data-stu-id="8d9ab-109">Development, Staging, Production</span></span>

<span data-ttu-id="8d9ab-110">ASP.NET Core odkazuje na dané proměnné prostředí, `ASPNETCORE_ENVIRONMENT` k popisu aplikace je aktuálně spuštěna v prostředí.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-110">ASP.NET Core references a particular environment variable, `ASPNETCORE_ENVIRONMENT` to describe the environment the application is currently running in.</span></span> <span data-ttu-id="8d9ab-111">Tuto proměnnou lze nastavit na jakoukoli hodnotu se vám líbí, ale tří hodnot používají konvence: `Development`, `Staging`, a `Production`.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-111">This variable can be set to any value you like, but three values are used by convention: `Development`, `Staging`, and `Production`.</span></span> <span data-ttu-id="8d9ab-112">Zjistíte, tyto hodnoty použité v ukázkách a šablony, které jsou součástí ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-112">You will find these values used in the samples and templates provided with ASP.NET Core.</span></span>

<span data-ttu-id="8d9ab-113">Aktuální nastavení prostředí zjistit prostřednictvím kódu programu z v rámci vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-113">The current environment setting can be detected programmatically from within your application.</span></span> <span data-ttu-id="8d9ab-114">Kromě toho můžete použít prostředí [značky pomocná](../mvc/views/tag-helpers/index.md) zahrnout určité části vaší [zobrazení](../mvc/views/index.md) na základě aktuální prostředí aplikace.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-114">In addition, you can use the Environment [tag helper](../mvc/views/tag-helpers/index.md) to include certain sections in your [view](../mvc/views/index.md) based on the current application environment.</span></span>

<span data-ttu-id="8d9ab-115">Poznámka: V systémech Windows a systému macOS prostředí zadaný název je malá a velká písmena.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-115">Note: On Windows and macOS, the specified environment name is case insensitive.</span></span> <span data-ttu-id="8d9ab-116">Jestli nastavte proměnnou na `Development` nebo `development` nebo `DEVELOPMENT` výsledky budou stejné.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-116">Whether you set the variable to `Development` or `development` or `DEVELOPMENT` the results will be the same.</span></span> <span data-ttu-id="8d9ab-117">Je však Linux **velká a malá písmena** operačního systému ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-117">However, Linux is a **case sensitive** OS by default.</span></span> <span data-ttu-id="8d9ab-118">Proměnné prostředí, názvy souborů a nastavení vyžadují malá a velká písmena.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-118">Environment variables, file names and settings require case sensitivity.</span></span>

### <a name="development"></a><span data-ttu-id="8d9ab-119">Vývoj</span><span class="sxs-lookup"><span data-stu-id="8d9ab-119">Development</span></span>

<span data-ttu-id="8d9ab-120">To by měl být prostředí používá při vývoji aplikace.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-120">This should be the environment used when developing an application.</span></span> <span data-ttu-id="8d9ab-121">Obvykle se používá k povolení funkcí, které chcete by být k dispozici při spuštění aplikace v provozním prostředí, například [vývojáře výjimka stránky](xref:fundamentals/error-handling#the-developer-exception-page).</span><span class="sxs-lookup"><span data-stu-id="8d9ab-121">It is typically used to enable features that you wouldn't want to be available when the app runs in production, such as the [developer exception page](xref:fundamentals/error-handling#the-developer-exception-page).</span></span>

<span data-ttu-id="8d9ab-122">Pokud používáte Visual Studio, prostředí se dá nakonfigurovat v projektu na ladicí profily.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-122">If you're using Visual Studio, the environment can be configured in your project's debug profiles.</span></span> <span data-ttu-id="8d9ab-123">Ladění profily zadejte [server](xref:fundamentals/servers/index) nastavit pomocí při spuštění aplikace a proměnných prostředí.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-123">Debug profiles specify the [server](xref:fundamentals/servers/index) to use when launching the application and any environment variables to be set.</span></span> <span data-ttu-id="8d9ab-124">Projekt může mít více ladicí profily, které jinak nastavení proměnných prostředí.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-124">Your project can have multiple debug profiles that set environment variables differently.</span></span> <span data-ttu-id="8d9ab-125">Správy těchto profilů pomocí **ladění** kartě projektu webové aplikace **vlastnosti** nabídky.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-125">You manage these profiles by using the **Debug** tab of your web application project's **Properties** menu.</span></span> <span data-ttu-id="8d9ab-126">S hodnotami nastavenými v okně Vlastnosti projektu zůstávají v *launchSettings.json* soubor a také můžete konfigurovat profily přímou úpravou tohoto souboru.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-126">The values you set in project properties are persisted in the *launchSettings.json* file, and you can also configure profiles by editing that file directly.</span></span>

<span data-ttu-id="8d9ab-127">Profil pro službu IIS Express je znázorněno zde:</span><span class="sxs-lookup"><span data-stu-id="8d9ab-127">The profile for IIS Express is shown here:</span></span>

![Proměnné prostředí nastavení vlastností projektu](environments/_static/project-properties-debug.png)

<span data-ttu-id="8d9ab-129">Tady je `launchSettings.json` soubor, který zahrnuje profily pro `Development` a `Staging`:</span><span class="sxs-lookup"><span data-stu-id="8d9ab-129">Here is a `launchSettings.json` file that includes profiles for `Development` and `Staging`:</span></span>

[!code-json[Main](../fundamentals/environments/sample/src/Environments/Properties/launchSettings.json?highlight=15,22)]

<span data-ttu-id="8d9ab-130">Změny provedené v projektu profily pravděpodobně se projeví až po restartu webového serveru používá (konkrétně Kestrel musí být restartován zjistí změny provedené v jeho prostředí).</span><span class="sxs-lookup"><span data-stu-id="8d9ab-130">Changes made to project profiles may not take effect until the web server used is restarted (in particular, Kestrel must be restarted before it will detect changes made to its environment).</span></span>

>[!WARNING]
> <span data-ttu-id="8d9ab-131">Proměnné prostředí uložené v *launchSettings.json* nejsou zabezpečené jakýmkoli způsobem a bude součástí úložiště zdrojového kódu pro svůj projekt, pokud použijete jeden.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-131">Environment variables stored in *launchSettings.json* are not secured in any way and will be part of the source code repository for your project, if you use one.</span></span> <span data-ttu-id="8d9ab-132">**Nikdy neukládají přihlašovací údaje nebo jiné tajné údaje v tomto souboru.**</span><span class="sxs-lookup"><span data-stu-id="8d9ab-132">**Never store credentials or other secret data in this file.**</span></span> <span data-ttu-id="8d9ab-133">Pokud budete potřebovat místo, kam můžete ukládat taková data, použijte *tajný klíč správce* nástroje popsané v [bezpečného úložiště tajné klíče aplikace během vývoje](xref:security/app-secrets).</span><span class="sxs-lookup"><span data-stu-id="8d9ab-133">If you need a place to store such data, use the *Secret Manager* tool described in [Safe storage of app secrets during development](xref:security/app-secrets).</span></span>

### <a name="staging"></a><span data-ttu-id="8d9ab-134">Pracovní</span><span class="sxs-lookup"><span data-stu-id="8d9ab-134">Staging</span></span>

<span data-ttu-id="8d9ab-135">Podle konvence `Staging` prostředí je předprodukční prostředí pro konečné testování před nasazením do produkčního prostředí.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-135">By convention, a `Staging` environment is a pre-production environment used for final testing before deployment to production.</span></span> <span data-ttu-id="8d9ab-136">V ideálním případě by jeho fyzické charakteristiky by měl zrcadlení, výroby, tak, aby všechny problémy, které může způsobit v produkčním prostředí objevit jako první v testovacím prostředí, kde lze řešit bez dopadu na uživatele.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-136">Ideally, its physical characteristics should mirror that of production, so that any issues that may arise in production occur first in the staging environment, where they can be addressed without impact to users.</span></span>

### <a name="production"></a><span data-ttu-id="8d9ab-137">Produkční</span><span class="sxs-lookup"><span data-stu-id="8d9ab-137">Production</span></span>

<span data-ttu-id="8d9ab-138">`Production` Prostředí je prostředí, ve kterém je aplikace spuštěná, pokud je za provozu a používán koncovým uživatelům.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-138">The `Production` environment is the environment in which the application runs when it is live and being used by end users.</span></span> <span data-ttu-id="8d9ab-139">Toto prostředí musí být nakonfigurovaný pro maximalizaci zabezpečení, výkonu a odolnosti aplikace.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-139">This environment should be configured to maximize security, performance, and application robustness.</span></span> <span data-ttu-id="8d9ab-140">Některé běžné nastavení, která může mít provozním prostředí které by se liší od vývoj patří:</span><span class="sxs-lookup"><span data-stu-id="8d9ab-140">Some common settings that a production environment might have that would differ from development include:</span></span>

* <span data-ttu-id="8d9ab-141">Zapnutí ukládání do mezipaměti</span><span class="sxs-lookup"><span data-stu-id="8d9ab-141">Turn on caching</span></span>

* <span data-ttu-id="8d9ab-142">Ujistěte se, všechny prostředky na straně klienta jsou seskupeny, minifikovaný a potenciálně zpracovat z název CDN</span><span class="sxs-lookup"><span data-stu-id="8d9ab-142">Ensure all client-side resources are bundled, minified, and potentially served from a CDN</span></span>

* <span data-ttu-id="8d9ab-143">Vypnout diagnostické ErrorPages</span><span class="sxs-lookup"><span data-stu-id="8d9ab-143">Turn off diagnostic ErrorPages</span></span>

* <span data-ttu-id="8d9ab-144">Zapnout popisný chybové stránky</span><span class="sxs-lookup"><span data-stu-id="8d9ab-144">Turn on friendly error pages</span></span>

* <span data-ttu-id="8d9ab-145">Povolit produkční protokolování a monitorování (například [Application Insights](https://azure.microsoft.com/documentation/articles/app-insights-asp-net-five/))</span><span class="sxs-lookup"><span data-stu-id="8d9ab-145">Enable production logging and monitoring (for example, [Application Insights](https://azure.microsoft.com/documentation/articles/app-insights-asp-net-five/))</span></span>

<span data-ttu-id="8d9ab-146">To se rozhodně není určená být úplný seznam.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-146">This is by no means meant to be a complete list.</span></span> <span data-ttu-id="8d9ab-147">Je vhodné se vyhnout rozptylu kontroly prostředí v mnoha částí aplikace.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-147">It's best to avoid scattering environment checks in many parts of your application.</span></span> <span data-ttu-id="8d9ab-148">Místo toho doporučuje se provést tyto kontroly v rámci aplikace `Startup` třídy je to možné</span><span class="sxs-lookup"><span data-stu-id="8d9ab-148">Instead, the recommended approach is to perform such checks within the application's `Startup` class(es) wherever possible</span></span>

## <a name="setting-the-environment"></a><span data-ttu-id="8d9ab-149">Nastavení prostředí</span><span class="sxs-lookup"><span data-stu-id="8d9ab-149">Setting the environment</span></span>

<span data-ttu-id="8d9ab-150">Metoda pro nastavení prostředí závisí na operačním systému.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-150">The method for setting the environment depends on the operating system.</span></span>

### <a name="windows"></a><span data-ttu-id="8d9ab-151">Windows</span><span class="sxs-lookup"><span data-stu-id="8d9ab-151">Windows</span></span>
<span data-ttu-id="8d9ab-152">Chcete-li nastavit `ASPNETCORE_ENVIRONMENT` pro aktuální relaci, pokud je aplikace spuštěná pomocí `dotnet run`, se používají následující příkazy</span><span class="sxs-lookup"><span data-stu-id="8d9ab-152">To set the `ASPNETCORE_ENVIRONMENT` for the current session, if the app is started using `dotnet run`, the following commands are used</span></span>

<span data-ttu-id="8d9ab-153">**Příkazový řádek**</span><span class="sxs-lookup"><span data-stu-id="8d9ab-153">**Command line**</span></span>
```
set ASPNETCORE_ENVIRONMENT=Development
```
<span data-ttu-id="8d9ab-154">**Prostředí PowerShell**</span><span class="sxs-lookup"><span data-stu-id="8d9ab-154">**PowerShell**</span></span>
```
$Env:ASPNETCORE_ENVIRONMENT = "Development"
```

<span data-ttu-id="8d9ab-155">Tyto příkazy se projeví pouze pro aktuální okno.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-155">These commands take effect only for the current window.</span></span> <span data-ttu-id="8d9ab-156">Při zavření okna nastavení ASPNETCORE_ENVIRONMENT obnoví výchozí nastavení nebo počítač hodnotu.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-156">When the window is closed, the ASPNETCORE_ENVIRONMENT setting reverts to the default setting or machine value.</span></span> <span data-ttu-id="8d9ab-157">Chcete-li nastavit hodnotu globálně při otevření Windows **ovládací panely** > **systému** > **Upřesnit nastavení systému** a přidat nebo upravit `ASPNETCORE_ENVIRONMENT` hodnotu.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-157">In order to set the value globally on Windows open the **Control Panel** > **System** > **Advanced system settings** and add or edit the `ASPNETCORE_ENVIRONMENT` value.</span></span>

![Rozšířené vlastnosti systému](environments/_static/systemsetting_environment.png)

![Proměnné prostředí základní ASPNET](environments/_static/windows_aspnetcore_environment.png) 

<span data-ttu-id="8d9ab-160">**soubor Web.config**</span><span class="sxs-lookup"><span data-stu-id="8d9ab-160">**web.config**</span></span>

<span data-ttu-id="8d9ab-161">Najdete v článku *nastavení proměnných prostředí* části [odkazu na modul jádro ASP.NET konfigurace](xref:host-and-deploy/aspnet-core-module#setting-environment-variables) tématu.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-161">See the *Setting environment variables* section of the [ASP.NET Core Module configuration reference](xref:host-and-deploy/aspnet-core-module#setting-environment-variables) topic.</span></span>

<span data-ttu-id="8d9ab-162">**Fondy aplikací služby IIS**</span><span class="sxs-lookup"><span data-stu-id="8d9ab-162">**Per IIS Application Pool**</span></span>

<span data-ttu-id="8d9ab-163">Pokud je nutné nastavit proměnné prostředí pro jednotlivé aplikace běžící v izolované fondy aplikací (podporuje se ve službě IIS 10.0 +), najdete *příkazu AppCmd.exe* části [proměnné prostředí \< environmentVariables >](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) téma v IIS referenční dokumentace.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-163">If you need to set environment variables for individual apps running in isolated Application Pools (supported on IIS 10.0+), see the *AppCmd.exe command* section of the [Environment Variables \<environmentVariables>](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) topic in the IIS reference documentation.</span></span>

### <a name="macos"></a><span data-ttu-id="8d9ab-164">systému macOS</span><span class="sxs-lookup"><span data-stu-id="8d9ab-164">macOS</span></span>
<span data-ttu-id="8d9ab-165">Nastavení aktuální prostředí pro systému macOS lze provést v řádku při spuštění aplikace;</span><span class="sxs-lookup"><span data-stu-id="8d9ab-165">Setting the current environment for macOS can be done in-line when running the application;</span></span>

```bash
ASPNETCORE_ENVIRONMENT=Development dotnet run
```
<span data-ttu-id="8d9ab-166">nebo pomocí `export` pro ni nastavit před spuštěním aplikace.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-166">or using `export` to set it prior to running the app.</span></span>

```bash
export ASPNETCORE_ENVIRONMENT=Development
``` 
<span data-ttu-id="8d9ab-167">Proměnné prostředí úrovni počítače jsou nastaveny v *.bashrc* nebo *.bash_profile* souboru.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-167">Machine level environment variables are set in the *.bashrc*  or *.bash_profile* file.</span></span> <span data-ttu-id="8d9ab-168">Upravte soubor pomocí libovolného textového editoru a přidejte následující příkaz.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-168">Edit the file using any text editor and add the following statment.</span></span>

```
export ASPNETCORE_ENVIRONMENT=Development
```  

### <a name="linux"></a><span data-ttu-id="8d9ab-169">Linux</span><span class="sxs-lookup"><span data-stu-id="8d9ab-169">Linux</span></span>
<span data-ttu-id="8d9ab-170">Pro distribucích systému Linux, použijte `export` příkaz na příkazovém řádku pro relace na základě nastavení proměnné a *bash_profile* soubor pro nastavení úrovně prostředí počítače.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-170">For Linux distros, use the `export` command at the command line for session based variable settings and *bash_profile* file for machine level environment settings.</span></span>

## <a name="determining-the-environment-at-runtime"></a><span data-ttu-id="8d9ab-171">Určení prostředí za běhu</span><span class="sxs-lookup"><span data-stu-id="8d9ab-171">Determining the environment at runtime</span></span>

<span data-ttu-id="8d9ab-172">`IHostingEnvironment` Služba poskytuje základní abstrakci pro práci s prostředími.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-172">The `IHostingEnvironment` service provides the core abstraction for working with environments.</span></span> <span data-ttu-id="8d9ab-173">Tato služba je zadaný pomocí technologie ASP.NET hostování vrstvy a může být vloženy do logika spuštění prostřednictvím [vkládání závislostí](dependency-injection.md).</span><span class="sxs-lookup"><span data-stu-id="8d9ab-173">This service is provided by the ASP.NET hosting layer, and can be injected into your startup logic via [Dependency Injection](dependency-injection.md).</span></span> <span data-ttu-id="8d9ab-174">Šablona webové stránky ASP.NET Core v sadě Visual Studio používá tento přístup načíst konfigurační soubory specifické pro prostředí (pokud existuje) a chcete-li přizpůsobit nastavení pro zpracování chyb aplikace.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-174">The ASP.NET Core web site template in Visual Studio uses this approach to load environment-specific configuration files (if present) and to customize the app's error handling settings.</span></span> <span data-ttu-id="8d9ab-175">V obou případech toto chování je dosaženo tím, že odkazuje na aktuálně zadané prostředí voláním `EnvironmentName` nebo `IsEnvironment` na instanci `IHostingEnvironment` předaný do odpovídající metodu.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-175">In both cases, this behavior is achieved by referring to the currently specified environment by calling `EnvironmentName` or `IsEnvironment` on the instance of `IHostingEnvironment` passed into the appropriate method.</span></span>

> [!NOTE]
> <span data-ttu-id="8d9ab-176">Pokud je potřeba zkontrolovat, zda je aplikace spuštěna v konkrétním prostředí, použijte `env.IsEnvironment("environmentname")` vzhledem k tomu, že bude správně můžete ignorovat případ (místo kontrole, jestli se `env.EnvironmentName == "Development"` třeba).</span><span class="sxs-lookup"><span data-stu-id="8d9ab-176">If you need to check whether the application is running in a particular environment, use `env.IsEnvironment("environmentname")` since it will correctly ignore case (instead of checking if `env.EnvironmentName == "Development"` for example).</span></span>

<span data-ttu-id="8d9ab-177">Můžete například použít následující kód v způsob konfigurace nastavení zpracování chyb konkrétní prostředí:</span><span class="sxs-lookup"><span data-stu-id="8d9ab-177">For example, you can use the following code in your Configure method to setup environment specific error handling:</span></span>

[!code-csharp[Main](environments/sample/src/Environments/Startup.cs?range=19-30)]

<span data-ttu-id="8d9ab-178">Pokud aplikace běží v `Development` prostředí a potom Povolí podporu runtime nezbytných k používání funkce "BrowserLink" v sadě Visual Studio, vývoj specifické chybové stránky, (které obvykle by neměl být spuštění v produkčním prostředí) a chyba speciální databáze stránky (které poskytnout způsob, jak použít migrace a proto lze používat pouze v vývoj).</span><span class="sxs-lookup"><span data-stu-id="8d9ab-178">If the app is running in a `Development` environment, then it enables the runtime support necessary to use the "BrowserLink" feature in Visual Studio, development-specific error pages (which typically should not be run in production) and special database error pages (which provide a way to apply migrations and should therefore only be used in development).</span></span> <span data-ttu-id="8d9ab-179">Jinak Pokud není aplikace spuštěna v prostředí pro vývoj, standardní chyba zpracování stránky je nakonfigurovaná zobrazený v reakci na jakékoli neošetřené výjimky.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-179">Otherwise, if the app is not running in a development environment, a standard error handling page is configured to be displayed in response to any unhandled exceptions.</span></span>

<span data-ttu-id="8d9ab-180">Musíte určit, které obsah odeslat do klienta v době běhu v závislosti na aktuálním prostředí.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-180">You may need to determine which content to send to the client at runtime, depending on the current environment.</span></span> <span data-ttu-id="8d9ab-181">Například ve vývojovém prostředí je obecně sloužit-minimalizaci skriptů a stylů, které umožňuje snazší ladění.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-181">For example, in a development environment you generally serve non-minimized scripts and style sheets, which makes debugging easier.</span></span> <span data-ttu-id="8d9ab-182">Produkční a testovací prostředí by měla sloužit minifikovaný verze a obecně z název CDN.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-182">Production and test environments should serve the minified versions and generally from a CDN.</span></span> <span data-ttu-id="8d9ab-183">Můžete provést pomocí prostředí [značky pomocná](../mvc/views/tag-helpers/intro.md).</span><span class="sxs-lookup"><span data-stu-id="8d9ab-183">You can do this using the Environment [tag helper](../mvc/views/tag-helpers/intro.md).</span></span> <span data-ttu-id="8d9ab-184">Pomocník značky prostředí pouze vykreslí obsah Pokud aktuální prostředí odpovídá jednomu z prostředí zadat pomocí `names` atribut.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-184">The Environment tag helper will only render its contents if the current environment matches one of the environments specified using the `names` attribute.</span></span>

[!code-html[Main](environments/sample/src/Environments/Views/Shared/_Layout.cshtml?range=13-22)]

<span data-ttu-id="8d9ab-185">Chcete-li začít s použitím značky Pomocníci najdete v tématu vaše aplikace [Úvod do pomocné rutiny značky](../mvc/views/tag-helpers/intro.md).</span><span class="sxs-lookup"><span data-stu-id="8d9ab-185">To get started with using tag helpers in your application see [Introduction to Tag Helpers](../mvc/views/tag-helpers/intro.md).</span></span>

## <a name="startup-conventions"></a><span data-ttu-id="8d9ab-186">Spuštění konvence</span><span class="sxs-lookup"><span data-stu-id="8d9ab-186">Startup conventions</span></span>

<span data-ttu-id="8d9ab-187">Jádro ASP.NET podporuje založené na konvenci přístup k nastavení konfigurace spuštění aplikace na základě aktuálního prostředí.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-187">ASP.NET Core supports a convention-based approach to configuring an application's startup based on the current environment.</span></span> <span data-ttu-id="8d9ab-188">Můžete také programově řídit chování aplikací na podle do prostředí, ve kterém je v, což umožňuje vytvářet a spravovat vlastní konvence.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-188">You can also programmatically control how your application behaves according to which environment it is in, allowing you to create and manage your own conventions.</span></span>

<span data-ttu-id="8d9ab-189">Při spuštění aplikace ASP.NET Core, `Startup` třída se používá k bootstrap aplikace a načtěte jeho nastavení atd ([Další informace o spouštění ASP.NET](startup.md)).</span><span class="sxs-lookup"><span data-stu-id="8d9ab-189">When an ASP.NET Core application starts, the `Startup` class is used to bootstrap the application, load its configuration settings, etc. ([learn more about ASP.NET startup](startup.md)).</span></span> <span data-ttu-id="8d9ab-190">Však s názvem pokud existuje třída `Startup{EnvironmentName}` (například `StartupDevelopment`) a `ASPNETCORE_ENVIRONMENT` proměnnou prostředí shoduje s tímto názvem a pak `Startup` třída se používá místo.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-190">However, if a class exists named `Startup{EnvironmentName}` (for example `StartupDevelopment`), and the `ASPNETCORE_ENVIRONMENT` environment variable matches that name, then that `Startup` class is used instead.</span></span> <span data-ttu-id="8d9ab-191">Proto může nakonfigurovat `Startup` pro vývoj, ale mít samostatnou `StartupProduction` který se použije při spuštění aplikace v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-191">Thus, you could configure `Startup` for development, but have a separate `StartupProduction` that would be used when the app is run in production.</span></span> <span data-ttu-id="8d9ab-192">Nebo naopak.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-192">Or vice versa.</span></span>

> [!NOTE]
> <span data-ttu-id="8d9ab-193">Volání metody `WebHostBuilder.UseStartup<TStartup>()` přepsání konfigurační oddíly.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-193">Calling `WebHostBuilder.UseStartup<TStartup>()` overrides configuration sections.</span></span>

<span data-ttu-id="8d9ab-194">Kromě použití zcela samostatné `Startup` třídy založené na aktuálním prostředí, můžete také provádět úpravy konfigurace aplikace v rámci `Startup` třídy.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-194">In addition to using an entirely separate `Startup` class based on the current environment, you can also make adjustments to how the application is configured within a `Startup` class.</span></span> <span data-ttu-id="8d9ab-195">`Configure()` a `ConfigureServices()` metody podporují konkrétní prostředí verze, podobně jako `Startup` třídy samostatně, formuláře `Configure{EnvironmentName}()` a `Configure{EnvironmentName}Services()`.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-195">The `Configure()` and `ConfigureServices()` methods support environment-specific versions similar to the `Startup` class itself, of the form `Configure{EnvironmentName}()` and `Configure{EnvironmentName}Services()`.</span></span> <span data-ttu-id="8d9ab-196">Pokud definujete metodu `ConfigureDevelopment()` nezavolá se místo `Configure()` když prostředí je nastavená na vývoj.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-196">If you define a method `ConfigureDevelopment()` it will be called instead of `Configure()` when the environment is set to development.</span></span> <span data-ttu-id="8d9ab-197">Podobně `ConfigureDevelopmentServices()` by být volána místo `ConfigureServices()` ve stejném prostředí.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-197">Likewise, `ConfigureDevelopmentServices()` would be called instead of `ConfigureServices()` in the same environment.</span></span>

## <a name="summary"></a><span data-ttu-id="8d9ab-198">Souhrn</span><span class="sxs-lookup"><span data-stu-id="8d9ab-198">Summary</span></span>

<span data-ttu-id="8d9ab-199">Základní technologie ASP.NET poskytuje několik funkcí a konvence, které umožňují vývojářům snadno řídit chování svých aplikací v různých prostředích.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-199">ASP.NET Core provides a number of features and conventions that allow developers to easily control how their applications behave in different environments.</span></span> <span data-ttu-id="8d9ab-200">Při publikování aplikace z vývojového do pracovní do produkčního prostředí, proměnným prostředí nastaveným správně pro prostředí povolit pro optimalizaci aplikace pro ladění, testování nebo produkční použití, podle potřeby.</span><span class="sxs-lookup"><span data-stu-id="8d9ab-200">When publishing an application from development to staging to production, environment variables set appropriately for the environment allow for optimization of the application for debugging, testing, or production use, as appropriate.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="8d9ab-201">Další prostředky</span><span class="sxs-lookup"><span data-stu-id="8d9ab-201">Additional Resources</span></span>

* [<span data-ttu-id="8d9ab-202">Konfigurace</span><span class="sxs-lookup"><span data-stu-id="8d9ab-202">Configuration</span></span>](xref:fundamentals/configuration/index)

* [<span data-ttu-id="8d9ab-203">Úvod do pomocné rutiny značky</span><span class="sxs-lookup"><span data-stu-id="8d9ab-203">Introduction to Tag Helpers</span></span>](../mvc/views/tag-helpers/intro.md)
