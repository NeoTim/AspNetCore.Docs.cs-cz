---
uid: web-forms/overview/data-access/caching-data/caching-data-with-the-objectdatasource-vb
title: "Ukládání dat pomocí ObjectDataSource (VB) | Microsoft Docs"
author: rick-anderson
description: "Ukládání do mezipaměti může znamenat, že rozdíl mezi pomalou a rychlé webové aplikace. V tomto kurzu je první čtyři, prohlédněte si podrobné ukládání do mezipaměti technologie ASP.NET..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/30/2007
ms.topic: article
ms.assetid: 2e56a733-5512-48a6-9276-70a65bbe4d5d
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/caching-data/caching-data-with-the-objectdatasource-vb
msc.type: authoredcontent
ms.openlocfilehash: fa0a0f1f80a407f8f68d5fe081b5b144e2945700
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 11/10/2017
---
<a name="caching-data-with-the-objectdatasource-vb"></a><span data-ttu-id="326d7-104">Ukládání dat do mezipaměti s ObjectDataSource (VB)</span><span class="sxs-lookup"><span data-stu-id="326d7-104">Caching Data with the ObjectDataSource (VB)</span></span>
====================
<span data-ttu-id="326d7-105">podle [Scott Meisnerová](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="326d7-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="326d7-106">[Stáhněte si ukázkovou aplikaci](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_58_VB.exe) nebo [stáhnout PDF](caching-data-with-the-objectdatasource-vb/_static/datatutorial58vb1.pdf)</span><span class="sxs-lookup"><span data-stu-id="326d7-106">[Download Sample App](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_58_VB.exe) or [Download PDF](caching-data-with-the-objectdatasource-vb/_static/datatutorial58vb1.pdf)</span></span>

> <span data-ttu-id="326d7-107">Ukládání do mezipaměti může znamenat, že rozdíl mezi pomalou a rychlé webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="326d7-107">Caching can mean the difference between a slow and a fast Web application.</span></span> <span data-ttu-id="326d7-108">V tomto kurzu je první čtyři, prohlédněte si podrobné ukládání do mezipaměti technologie ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="326d7-108">This tutorial is the first of four that take a detailed look at caching in ASP.NET.</span></span> <span data-ttu-id="326d7-109">Zjistěte, klíčové koncepty ukládání do mezipaměti a jak se má použít na prezentační vrstvu prostřednictvím ovládacího prvku ObjectDataSource ukládání do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="326d7-109">Learn the key concepts of caching and how to apply caching to the Presentation Layer through the ObjectDataSource control.</span></span>


## <a name="introduction"></a><span data-ttu-id="326d7-110">Úvod</span><span class="sxs-lookup"><span data-stu-id="326d7-110">Introduction</span></span>

<span data-ttu-id="326d7-111">V oblasti vědy *ukládání do mezipaměti* je proces trvá data nebo informace, která je nákladná, získání a ukládání jeho kopii v umístění, které je rychlejší přístup.</span><span class="sxs-lookup"><span data-stu-id="326d7-111">In computer science, *caching* is the process of taking data or information that is expensive to obtain and storing a copy of it in a location that is quicker to access.</span></span> <span data-ttu-id="326d7-112">Pro datové aplikace spotřebovávat velký a komplexní dotazy běžně většinu doby spuštění aplikace s.</span><span class="sxs-lookup"><span data-stu-id="326d7-112">For data-driven applications, large and complex queries commonly consume the majority of the application s execution time.</span></span> <span data-ttu-id="326d7-113">Tyto s výkonu aplikace, pak je možné zlepšit často uloží výsledky dotazů nákladné databázi v paměti s aplikací.</span><span class="sxs-lookup"><span data-stu-id="326d7-113">Such an application s performance, then, can often be improved by storing the results of expensive database queries in the application s memory.</span></span>

<span data-ttu-id="326d7-114">Technologie ASP.NET 2.0 nabízí celou řadu možností ukládání do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="326d7-114">ASP.NET 2.0 offers a variety of caching options.</span></span> <span data-ttu-id="326d7-115">Celou webovou stránku nebo uživatelský ovládací prvek s vykreslení značek můžete uložit do mezipaměti, prostřednictvím *ukládání výstupu do mezipaměti*.</span><span class="sxs-lookup"><span data-stu-id="326d7-115">An entire web page or User Control s rendered markup can be cached through *output caching*.</span></span> <span data-ttu-id="326d7-116">Ovládací prvky ObjectDataSource a SqlDataSource nabízí ukládání do mezipaměti možnosti i, a tím umožní data do mezipaměti na úrovni ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="326d7-116">The ObjectDataSource and SqlDataSource controls provide caching capabilities as well, thereby allowing data to be cached at the control level.</span></span> <span data-ttu-id="326d7-117">A ASP.NET s *datové mezipaměti* poskytuje bohaté rozhraní API ukládání do mezipaměti, která umožňuje vývojářům stránku prostřednictvím kódu programu mezipaměti objektů.</span><span class="sxs-lookup"><span data-stu-id="326d7-117">And ASP.NET s *data cache* provides a rich caching API that enables page developers to programmatically cache objects.</span></span> <span data-ttu-id="326d7-118">V tomto kurzu a další tři, které podíváme pomocí ObjectDataSource s ukládání do mezipaměti funkcí, jakož i datové mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="326d7-118">In this tutorial and the next three we'll examine using the ObjectDataSource s caching features as well as the data cache.</span></span> <span data-ttu-id="326d7-119">Také jsme budete prozkoumejte jak pro ukládání do mezipaměti data celou aplikaci při spuštění a jak chcete zachovat data uložená v mezipaměti novou prostřednictvím závislosti mezipaměti SQL.</span><span class="sxs-lookup"><span data-stu-id="326d7-119">We'll also explore how to cache application-wide data at startup and how to keep cached data fresh through the use of SQL cache dependencies.</span></span> <span data-ttu-id="326d7-120">Tyto kurzy není prozkoumejte ukládání výstupu do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="326d7-120">These tutorials do not explore output caching.</span></span> <span data-ttu-id="326d7-121">Podrobný pohled ukládání výstupu do mezipaměti, najdete v části [ukládání výstupu do mezipaměti v technologii ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/121306-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="326d7-121">For a detailed look at output caching, see [Output Caching in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/121306-1.aspx).</span></span>

<span data-ttu-id="326d7-122">Ukládání do mezipaměti se dá použít na libovolné místo v architektuře, z Data Access Layer až prostřednictvím prezentační vrstvy.</span><span class="sxs-lookup"><span data-stu-id="326d7-122">Caching can be applied at any place in the architecture, from the Data Access Layer up through the Presentation Layer.</span></span> <span data-ttu-id="326d7-123">V tomto kurzu budeme zabývat použití ukládání do mezipaměti na prezentační vrstvu prostřednictvím ovládacího prvku ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="326d7-123">In this tutorial we'll look at applying caching to the Presentation Layer through the ObjectDataSource control.</span></span> <span data-ttu-id="326d7-124">V dalším kurzu, které podíváme ukládání do mezipaměti data na vrstvu obchodní logiky.</span><span class="sxs-lookup"><span data-stu-id="326d7-124">In the next tutorial we'll examine caching data at the Business Logic Layer.</span></span>

## <a name="key-caching-concepts"></a><span data-ttu-id="326d7-125">Klíč ukládání do mezipaměti koncepty</span><span class="sxs-lookup"><span data-stu-id="326d7-125">Key Caching Concepts</span></span>

<span data-ttu-id="326d7-126">Ukládání do mezipaměti může výrazně zlepšit aplikaci s celkový výkon a škálovatelnost převzetím data, která je nákladná, ke generování a ukládání jeho kopii v umístění, které mají efektivnější přístup.</span><span class="sxs-lookup"><span data-stu-id="326d7-126">Caching can greatly improve an application s overall performance and scalability by taking data that is expensive to generate and storing a copy of it in a location that can be more efficiently accessed.</span></span> <span data-ttu-id="326d7-127">Vzhledem k tomu, že mezipaměť obsahuje pouze kopie skutečný, zdrojová data, můžete začnou být zastaralé, nebo *zastaralé*, pokud se změní v základních datech.</span><span class="sxs-lookup"><span data-stu-id="326d7-127">Since the cache holds just a copy of the actual, underlying data, it can become outdated, or *stale*, if the underlying data changes.</span></span> <span data-ttu-id="326d7-128">Boje proti to, vývojář stránky může naznačovat kritéria, podle kterých bude možné položku mezipaměti *vyřazování* z mezipaměti, buď pomocí:</span><span class="sxs-lookup"><span data-stu-id="326d7-128">To combat this, a page developer can indicate criteria by which the cache item will be *evicted* from the cache, using either:</span></span>

- <span data-ttu-id="326d7-129">**Založené na čase kritéria** položky mohou být přidány do mezipaměti pro absolutní nebo klouzavé doby trvání.</span><span class="sxs-lookup"><span data-stu-id="326d7-129">**Time-based criteria** an item may be added to the cache for an absolute or sliding duration.</span></span> <span data-ttu-id="326d7-130">Třeba vývojář stránky může znamenat trvání, například 60 sekund.</span><span class="sxs-lookup"><span data-stu-id="326d7-130">For example, a page developer may indicate a duration of, say, 60 seconds.</span></span> <span data-ttu-id="326d7-131">S absolutní dobou trvání položky v mezipaměti vyřazování 60 sekund poté, co byl přidán do mezipaměti, bez ohledu na to, jak často se používají.</span><span class="sxs-lookup"><span data-stu-id="326d7-131">With an absolute duration, the cached item is evicted 60 seconds after it was added to cache, regardless of how frequently it was accessed.</span></span> <span data-ttu-id="326d7-132">S určitou dobou trvání klouzavou položce v mezipaměti vyřazování 60 sekund po posledním přístupu.</span><span class="sxs-lookup"><span data-stu-id="326d7-132">With a sliding duration, the cached item is evicted 60 seconds after the last access.</span></span>
- <span data-ttu-id="326d7-133">**Na základě závislostí kritéria** závislost může být přidružený položce při přidány do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="326d7-133">**Dependency-based criteria** a dependency can be associated with an item when added to the cache.</span></span> <span data-ttu-id="326d7-134">Když se změní položky s závislost je vyřazena z mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="326d7-134">When the item s dependency changes it is evicted from the cache.</span></span> <span data-ttu-id="326d7-135">Závislost může být soubor, další položky mezipaměti nebo kombinaci obojího.</span><span class="sxs-lookup"><span data-stu-id="326d7-135">The dependency may be a file, another cache item, or a combination of the two.</span></span> <span data-ttu-id="326d7-136">ASP.NET 2.0 umožňuje také závislosti mezipaměti SQL, které umožňuje vývojářům přidání položky do mezipaměti a mějte ho vyřazování při změně podkladového dat databáze.</span><span class="sxs-lookup"><span data-stu-id="326d7-136">ASP.NET 2.0 also allows SQL cache dependencies, which enable developers to add an item to the cache and have it evicted when the underlying database data changes.</span></span> <span data-ttu-id="326d7-137">Vyzkoušíme závislosti mezipaměti SQL v nadcházející akce [pomocí závislosti mezipaměti SQL](using-sql-cache-dependencies-vb.md) kurzu.</span><span class="sxs-lookup"><span data-stu-id="326d7-137">We will examine SQL cache dependencies in the upcoming [Using SQL Cache Dependencies](using-sql-cache-dependencies-vb.md) tutorial.</span></span>

<span data-ttu-id="326d7-138">Bez ohledu na zadaných kritériích vyřazení, může být položky v mezipaměti *úklid* předtím, než byla splněna kritéria založené na čase nebo na základě závislostí.</span><span class="sxs-lookup"><span data-stu-id="326d7-138">Regardless of the eviction criteria specified, an item in the cache may be *scavenged* before the time-based or dependency-based criteria has been met.</span></span> <span data-ttu-id="326d7-139">Pokud mezipaměti již dosáhl maximálního, musíte před přidáním nové odstranit existující položky.</span><span class="sxs-lookup"><span data-stu-id="326d7-139">If the cache has reached its capacity, existing items must be removed before new ones can be added.</span></span> <span data-ttu-id="326d7-140">V důsledku toho při prostřednictvím kódu programu práci se službou data uložená v mezipaměti ho s důležitých, že jste vždy předpokládáme, že data uložená v mezipaměti nemohou být obsaženy.</span><span class="sxs-lookup"><span data-stu-id="326d7-140">Consequently, when programmatically working with cached data it s vital that you always assume that the cached data may not be present.</span></span> <span data-ttu-id="326d7-141">Podíváme vzor při přístupu k datům z mezipaměti prostřednictvím kódu programu v našem kurzu Další *ukládání dat v architektuře*.</span><span class="sxs-lookup"><span data-stu-id="326d7-141">We'll look at the pattern to use when accessing data from the cache programmatically in our next tutorial, *Caching Data in the Architecture*.</span></span>

<span data-ttu-id="326d7-142">Ukládání do mezipaměti poskytuje ekonomické prostředky pro stlačení další výkonu z aplikace.</span><span class="sxs-lookup"><span data-stu-id="326d7-142">Caching provides an economical means for squeezing more performance from an application.</span></span> <span data-ttu-id="326d7-143">Jako [Steven Smith](http://aspadvice.com/blogs/ssmith/) articulates v jeho článku [ukládání do mezipaměti ASP.NET: technik a nejlepších postupů](https://msdn.microsoft.com/en-us/library/aa478965.aspx):</span><span class="sxs-lookup"><span data-stu-id="326d7-143">As [Steven Smith](http://aspadvice.com/blogs/ssmith/) articulates in his article [ASP.NET Caching: Techniques and Best Practices](https://msdn.microsoft.com/en-us/library/aa478965.aspx):</span></span>

<span data-ttu-id="326d7-144">Ukládání do mezipaměti, může být dobrým způsobem, jak získat dobrý dostatečný výkon bez náročné na čas a analýzy.</span><span class="sxs-lookup"><span data-stu-id="326d7-144">Caching can be a good way to get good enough performance without requiring a lot of time and analysis.</span></span> <span data-ttu-id="326d7-145">Paměť je levných, takže pokud získáte výkonu, je nutné pomocí ukládání výstupu do mezipaměti pro 30 sekund místo výdaje denně nebo týdně pokusu optimalizovat kód nebo databáze, proveďte řešení ukládání do mezipaměti (za předpokladu, že 30 - stará sekundu data je ok) a přesunutí na.</span><span class="sxs-lookup"><span data-stu-id="326d7-145">Memory is cheap, so if you can get the performance you need by caching the output for 30 seconds instead of spending a day or a week trying to optimize your code or database, do the caching solution (assuming 30-second old data is ok) and move on.</span></span> <span data-ttu-id="326d7-146">Nakonec nízký návrhu bude pravděpodobně nezaznamenaly, takže kurzu, že byste měli zkusit návrhu aplikace správně.</span><span class="sxs-lookup"><span data-stu-id="326d7-146">Eventually, poor design will probably catch up to you, so of course you should try to design your applications correctly.</span></span> <span data-ttu-id="326d7-147">Ale pokud potřebujete získat dobrý dnes dostatečný výkon, ukládání do mezipaměti může být vynikající [přístup], kdybyste kupovali času na Refaktorovat aplikace později, kdy máte čas Uděláte to tak.</span><span class="sxs-lookup"><span data-stu-id="326d7-147">But if you just need to get good enough performance today, caching can be an excellent [approach], buying you time to refactor your application at a later date when you have the time to do so.</span></span>

<span data-ttu-id="326d7-148">Při ukládání do mezipaměti může poskytnout výrazné vylepšení, není použitelný ve všech situacích, například s aplikacemi, které využívají v reálném čase, často aktualizace dat, nebo kde je zastaralá data i krátce žít nepřijatelné.</span><span class="sxs-lookup"><span data-stu-id="326d7-148">While caching can provide appreciable performance enhancements, it is not applicable in all situations, such as with applications that use real-time, frequently-updating data, or where even shortly-lived stale data is unacceptable.</span></span> <span data-ttu-id="326d7-149">Ale pro většinu aplikací, musí používat ukládání do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="326d7-149">But for the majority of applications, caching should be used.</span></span> <span data-ttu-id="326d7-150">Pro další informace o ukládání do mezipaměti v technologii ASP.NET 2.0, naleznete [ukládání do mezipaměti pro výkon](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/caching/default.aspx) části [ASP.NET 2.0 rychlý start kurzy](https://quickstarts.asp.net/QuickStartv20/aspnet/).</span><span class="sxs-lookup"><span data-stu-id="326d7-150">For more background on caching in ASP.NET 2.0, refer to the [Caching for Performance](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/caching/default.aspx) section of the [ASP.NET 2.0 QuickStart Tutorials](https://quickstarts.asp.net/QuickStartv20/aspnet/).</span></span>

## <a name="step-1-creating-the-caching-web-pages"></a><span data-ttu-id="326d7-151">Krok 1: Vytvoření ukládání do mezipaměti webové stránky</span><span class="sxs-lookup"><span data-stu-id="326d7-151">Step 1: Creating the Caching Web Pages</span></span>

<span data-ttu-id="326d7-152">Než začneme naše zkoumání funkce ukládání do mezipaměti s ObjectDataSource, umožní s nejprve vytváření stránek ASP.NET v našem webu projekt, který budeme potřebovat pro tento kurz a další tři chvíli trvat.</span><span class="sxs-lookup"><span data-stu-id="326d7-152">Before we start our exploration of the ObjectDataSource s caching features, let s first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial and the next three.</span></span> <span data-ttu-id="326d7-153">Nejprve přidejte novou složku s názvem `Caching`.</span><span class="sxs-lookup"><span data-stu-id="326d7-153">Start by adding a new folder named `Caching`.</span></span> <span data-ttu-id="326d7-154">Dál přidejte následující stránky ASP.NET do této složky, a zkontrolujte, zda přidružit každou stránku s `Site.master` hlavní stránky:</span><span class="sxs-lookup"><span data-stu-id="326d7-154">Next, add the following ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `ObjectDataSource.aspx`
- `FromTheArchitecture.aspx`
- `AtApplicationStartup.aspx`
- `SqlCacheDependencies.aspx`


![Přidání stránky ASP.NET pro kurzy související s ukládání do mezipaměti](caching-data-with-the-objectdatasource-vb/_static/image1.png)

<span data-ttu-id="326d7-156">**Obrázek 1**: Přidání stránky ASP.NET pro kurzy související s ukládání do mezipaměti</span><span class="sxs-lookup"><span data-stu-id="326d7-156">**Figure 1**: Add the ASP.NET Pages for the Caching-Related Tutorials</span></span>


<span data-ttu-id="326d7-157">V jiných složkách, jako `Default.aspx` v `Caching` složky zobrazí seznam kurzů k v jeho části.</span><span class="sxs-lookup"><span data-stu-id="326d7-157">Like in the other folders, `Default.aspx` in the `Caching` folder will list the tutorials in its section.</span></span> <span data-ttu-id="326d7-158">Odvolat, který `SectionLevelTutorialListing.ascx` tuto funkci zajišťuje uživatelský ovládací prvek.</span><span class="sxs-lookup"><span data-stu-id="326d7-158">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="326d7-159">Proto přidat tento uživatelský ovládací prvek pro `Default.aspx` přetažením z Průzkumníka řešení na stránku s zobrazení návrhu.</span><span class="sxs-lookup"><span data-stu-id="326d7-159">Therefore, add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page s Design view.</span></span>


<span data-ttu-id="326d7-160">[![Obrázek 2: Přidání SectionLevelTutorialListing.ascx uživatelského ovládacího prvku do Default.aspx](caching-data-with-the-objectdatasource-vb/_static/image3.png)](caching-data-with-the-objectdatasource-vb/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="326d7-160">[![Figure 2: Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](caching-data-with-the-objectdatasource-vb/_static/image3.png)](caching-data-with-the-objectdatasource-vb/_static/image2.png)</span></span>

<span data-ttu-id="326d7-161">**Obrázek 2**: obrázek 2: Přidat `SectionLevelTutorialListing.ascx` uživatelského ovládacího prvku na `Default.aspx` ([Kliknutím zobrazit obrázek v plné velikosti](caching-data-with-the-objectdatasource-vb/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="326d7-161">**Figure 2**: Figure 2: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](caching-data-with-the-objectdatasource-vb/_static/image4.png))</span></span>


<span data-ttu-id="326d7-162">Nakonec přidejte tyto stránek jako položky na `Web.sitemap` souboru.</span><span class="sxs-lookup"><span data-stu-id="326d7-162">Lastly, add these pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="326d7-163">Konkrétně, přidejte následující kód po práci s binární Data `<siteMapNode>`:</span><span class="sxs-lookup"><span data-stu-id="326d7-163">Specifically, add the following markup after the Working with Binary Data `<siteMapNode>`:</span></span>


[!code-xml[Main](caching-data-with-the-objectdatasource-vb/samples/sample1.xml)]

<span data-ttu-id="326d7-164">Po aktualizaci `Web.sitemap`, pozorně Zobrazit kurzy web prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="326d7-164">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="326d7-165">V nabídce na levé straně teď obsahuje položky pro kurzů k ukládání do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="326d7-165">The menu on the left now includes items for the caching tutorials.</span></span>


![Mapy webu nyní obsahuje položky pro ukládání do mezipaměti kurzy](caching-data-with-the-objectdatasource-vb/_static/image5.png)

<span data-ttu-id="326d7-167">**Obrázek 3**: mapy webu nyní obsahuje položky pro ukládání do mezipaměti kurzy</span><span class="sxs-lookup"><span data-stu-id="326d7-167">**Figure 3**: The Site Map Now Includes Entries for the Caching Tutorials</span></span>


## <a name="step-2-displaying-a-list-of-products-in-a-web-page"></a><span data-ttu-id="326d7-168">Krok 2: Zobrazení Seznam produktů na webové stránce</span><span class="sxs-lookup"><span data-stu-id="326d7-168">Step 2: Displaying a List of Products in a Web Page</span></span>

<span data-ttu-id="326d7-169">Tento tento kurz popisuje, jak používat ObjectDataSource funkcí ovládacího prvku s integrovanou ukládání do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="326d7-169">This tutorial explores how to use the ObjectDataSource control s built-in caching features.</span></span> <span data-ttu-id="326d7-170">Než můžete podíváme na tyto funkce, ale nejdřív potřebujeme stránku, kterou chcete pracovat.</span><span class="sxs-lookup"><span data-stu-id="326d7-170">Before we can look at these features, though, we first need a page to work from.</span></span> <span data-ttu-id="326d7-171">Umožňují s vytvořit webovou stránku, která používá rutina GridView načíst ObjectDataSource z seznam informací o produktech `ProductsBLL` třídy.</span><span class="sxs-lookup"><span data-stu-id="326d7-171">Let s create a web page that uses a GridView to list product information retrieved by an ObjectDataSource from the `ProductsBLL` class.</span></span>

<span data-ttu-id="326d7-172">Začněte otevřením `ObjectDataSource.aspx` stránku `Caching` složky.</span><span class="sxs-lookup"><span data-stu-id="326d7-172">Start by opening the `ObjectDataSource.aspx` page in the `Caching` folder.</span></span> <span data-ttu-id="326d7-173">Přetáhněte GridView z panelu nástrojů na návrháře, nastavte jeho `ID` vlastnost `Products`a od jeho inteligentních značek, vyberte pro vytvoření vazby do ovládacího prvku ObjectDataSource nové s názvem `ProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="326d7-173">Drag a GridView from the Toolbox onto the Designer, set its `ID` property to `Products`, and, from its smart tag, choose to bind it to a new ObjectDataSource control named `ProductsDataSource`.</span></span> <span data-ttu-id="326d7-174">Konfigurace ObjectDataSource pro práci s `ProductsBLL` třídy.</span><span class="sxs-lookup"><span data-stu-id="326d7-174">Configure the ObjectDataSource to work with the `ProductsBLL` class.</span></span>


<span data-ttu-id="326d7-175">[![Konfigurace ObjectDataSource použití třídy ProductsBLL](caching-data-with-the-objectdatasource-vb/_static/image7.png)](caching-data-with-the-objectdatasource-vb/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="326d7-175">[![Configure the ObjectDataSource to Use the ProductsBLL Class](caching-data-with-the-objectdatasource-vb/_static/image7.png)](caching-data-with-the-objectdatasource-vb/_static/image6.png)</span></span>

<span data-ttu-id="326d7-176">**Obrázek 4**: Konfigurace ObjectDataSource pro použití `ProductsBLL` – třída ([Kliknutím zobrazit obrázek v plné velikosti](caching-data-with-the-objectdatasource-vb/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="326d7-176">**Figure 4**: Configure the ObjectDataSource to Use the `ProductsBLL` Class ([Click to view full-size image](caching-data-with-the-objectdatasource-vb/_static/image8.png))</span></span>


<span data-ttu-id="326d7-177">Pro tuto stránku umožní s vytvoří upravitelné GridView, takže jsme můžete zkontrolovat, co se stane, když dojde k úpravě dat uložených v mezipaměti v ObjectDataSource přes rozhraní s GridView.</span><span class="sxs-lookup"><span data-stu-id="326d7-177">For this page, let s create an editable GridView so that we can examine what happens when data cached in the ObjectDataSource is modified through the GridView s interface.</span></span> <span data-ttu-id="326d7-178">Ponechejte rozevíracím seznamu na kartě vyberte nastavení na svou výchozí `GetProducts()`, ale změnit vybrané položky v kartě aktualizace tak, aby `UpdateProduct` přetížení, které přijímá `productName`, `unitPrice`, a `productID` jako jeho vstupní parametry.</span><span class="sxs-lookup"><span data-stu-id="326d7-178">Leave the drop-down list in the SELECT tab set to its default, `GetProducts()`, but change the selected item in the UPDATE tab to the `UpdateProduct` overload that accepts `productName`, `unitPrice`, and `productID` as its input parameters.</span></span>


<span data-ttu-id="326d7-179">[![Nastavte aktualizace karta s rozevíracím seznamu příslušné UpdateProduct přetížení](caching-data-with-the-objectdatasource-vb/_static/image10.png)](caching-data-with-the-objectdatasource-vb/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="326d7-179">[![Set the UPDATE Tab s Drop-Down List to the Appropriate UpdateProduct Overload](caching-data-with-the-objectdatasource-vb/_static/image10.png)](caching-data-with-the-objectdatasource-vb/_static/image9.png)</span></span>

<span data-ttu-id="326d7-180">**Obrázek 5**: nastavte aktualizace karta s rozevíracím seznamu na vhodná `UpdateProduct` přetížení ([Kliknutím zobrazit obrázek v plné velikosti](caching-data-with-the-objectdatasource-vb/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="326d7-180">**Figure 5**: Set the UPDATE Tab s Drop-Down List to the Appropriate `UpdateProduct` Overload ([Click to view full-size image](caching-data-with-the-objectdatasource-vb/_static/image11.png))</span></span>


<span data-ttu-id="326d7-181">Nakonec nastavte rozevírací seznamy na kartách INSERT a DELETE (None) a klikněte na tlačítko Dokončit.</span><span class="sxs-lookup"><span data-stu-id="326d7-181">Finally, set the drop-down lists in the INSERT and DELETE tabs to (None) and click Finish.</span></span> <span data-ttu-id="326d7-182">Po dokončení průvodce Konfigurace zdroje dat, nastaví Visual Studio ObjectDataSource s `OldValuesParameterFormatString` vlastnost `original_{0}`.</span><span class="sxs-lookup"><span data-stu-id="326d7-182">Upon completing the Configure Data Source wizard, Visual Studio sets the ObjectDataSource s `OldValuesParameterFormatString` property to `original_{0}`.</span></span> <span data-ttu-id="326d7-183">Jak je popsáno v [přehled o vložení, aktualizace a odstranění dat](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-vb.md) kurzu, tato vlastnost je nutné odebrat z deklarativní syntaxi nebo nastavit zpět na výchozí hodnotu, `{0}`, aby naše pracovního postupu aktualizace Pokračujte bez chyby.</span><span class="sxs-lookup"><span data-stu-id="326d7-183">As discussed in the [An Overview of Inserting, Updating, and Deleting Data](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-vb.md) tutorial, this property needs to be removed from the declarative syntax or set back to its default value, `{0}`, in order for our update workflow to proceed without error.</span></span>

<span data-ttu-id="326d7-184">Kromě toho po dokončení průvodce Visual Studio přidá pole do GridView pro každé pole data produktu.</span><span class="sxs-lookup"><span data-stu-id="326d7-184">Furthermore, at the completion of the wizard Visual Studio adds a field to the GridView for each of the product data fields.</span></span> <span data-ttu-id="326d7-185">Odeberte všechny ale na `ProductName`, `CategoryName`, a `UnitPrice` BoundFields.</span><span class="sxs-lookup"><span data-stu-id="326d7-185">Remove all but the `ProductName`, `CategoryName`, and `UnitPrice` BoundFields.</span></span> <span data-ttu-id="326d7-186">Potom aktualizujte `HeaderText` vlastnosti každého z těchto BoundFields na produkt, kategorie a cenu v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="326d7-186">Next, update the `HeaderText` properties of each of these BoundFields to Product, Category, and Price, respectively.</span></span> <span data-ttu-id="326d7-187">Vzhledem k tomu `ProductName` pole je povinné, převést BoundField TemplateField a přidejte RequiredFieldValidator k `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="326d7-187">Since the `ProductName` field is required, convert the BoundField into a TemplateField and add a RequiredFieldValidator to the `EditItemTemplate`.</span></span> <span data-ttu-id="326d7-188">Podobně, převést `UnitPrice` BoundField do TemplateField a přidejte CompareValidator pro zajištění platný měny hodnotu této s větší než nebo rovna hodnotě nula. hodnota zadaná uživatelem.</span><span class="sxs-lookup"><span data-stu-id="326d7-188">Similarly, convert the `UnitPrice` BoundField into a TemplateField and add a CompareValidator to ensure that the value entered by the user is a valid currency value that s greater than or equal to zero.</span></span> <span data-ttu-id="326d7-189">Kromě tyto úpravy Nebojte se provádět změny estetické například zarovnání doprava `UnitPrice` hodnotu, nebo zadáte formátování pro `UnitPrice` textu v jeho rozhraní jen pro čtení a úpravy.</span><span class="sxs-lookup"><span data-stu-id="326d7-189">In addition to these modifications, feel free to perform any aesthetic changes, such as right-aligning the `UnitPrice` value, or specifying the formatting for the `UnitPrice` text in its read-only and editing interfaces.</span></span>

<span data-ttu-id="326d7-190">Zkontrolujte GridView zaškrtnutím políčka Povolit úpravy v GridView s inteligentním, upravovat.</span><span class="sxs-lookup"><span data-stu-id="326d7-190">Make the GridView editable by checking the Enable Editing checkbox in the GridView s smart tag.</span></span> <span data-ttu-id="326d7-191">Také zkontrolujte zaškrtávací políčka Povolit stránkování a Povolit řazení.</span><span class="sxs-lookup"><span data-stu-id="326d7-191">Also check the Enable Paging and Enable Sorting checkboxes.</span></span>

> [!NOTE]
> <span data-ttu-id="326d7-192">Potřebujete o tom, jak přizpůsobit rozhraní GridView s úpravy?</span><span class="sxs-lookup"><span data-stu-id="326d7-192">Need a review of how to customize the GridView s editing interface?</span></span> <span data-ttu-id="326d7-193">Pokud ano, přečtěte si téma zpět [přizpůsobení rozhraní pro úpravu dat](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-vb.md) kurzu.</span><span class="sxs-lookup"><span data-stu-id="326d7-193">If so, refer back to the [Customizing the Data Modification Interface](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-vb.md) tutorial.</span></span>


<span data-ttu-id="326d7-194">[![Povolte podporu GridView pro úpravy, řazení a stránkování](caching-data-with-the-objectdatasource-vb/_static/image13.png)](caching-data-with-the-objectdatasource-vb/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="326d7-194">[![Enable GridView Support for Editing, Sorting, and Paging](caching-data-with-the-objectdatasource-vb/_static/image13.png)](caching-data-with-the-objectdatasource-vb/_static/image12.png)</span></span>

<span data-ttu-id="326d7-195">**Obrázek 6**: Povolení podpory GridView pro úpravy, řazení a stránkování ([Kliknutím zobrazit obrázek v plné velikosti](caching-data-with-the-objectdatasource-vb/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="326d7-195">**Figure 6**: Enable GridView Support for Editing, Sorting, and Paging ([Click to view full-size image](caching-data-with-the-objectdatasource-vb/_static/image14.png))</span></span>


<span data-ttu-id="326d7-196">Po provedení změny GridView, rutina GridView a ObjectDataSource s deklarativní by měl vypadat podobně jako následující:</span><span class="sxs-lookup"><span data-stu-id="326d7-196">After making these GridView modifications, the GridView and ObjectDataSource s declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](caching-data-with-the-objectdatasource-vb/samples/sample2.aspx)]

<span data-ttu-id="326d7-197">Jak je vidět na obrázku 7, upravovat GridView uvádí název, kategorie a cena jednotlivých produktů v databázi.</span><span class="sxs-lookup"><span data-stu-id="326d7-197">As Figure 7 shows, the editable GridView lists the name, category, and price of each of the products in the database.</span></span> <span data-ttu-id="326d7-198">Za chvíli k otestování řazení funkce stránky s výsledky, procházet a úpravy záznamů.</span><span class="sxs-lookup"><span data-stu-id="326d7-198">Take a moment to test out the page s functionality sort the results, page through them, and edit a record.</span></span>


<span data-ttu-id="326d7-199">[![Každý produkt s název, kategorie a cena je uveden v Sortable, Pageable, upravovat GridView](caching-data-with-the-objectdatasource-vb/_static/image16.png)](caching-data-with-the-objectdatasource-vb/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="326d7-199">[![Each Product s Name, Category, and Price is Listed in a Sortable, Pageable, Editable GridView](caching-data-with-the-objectdatasource-vb/_static/image16.png)](caching-data-with-the-objectdatasource-vb/_static/image15.png)</span></span>

<span data-ttu-id="326d7-200">**Obrázek 7**: každý produkt s název, kategorie a cena je uveden v Sortable, Pageable, upravovat GridView ([Kliknutím zobrazit obrázek v plné velikosti](caching-data-with-the-objectdatasource-vb/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="326d7-200">**Figure 7**: Each Product s Name, Category, and Price is Listed in a Sortable, Pageable, Editable GridView ([Click to view full-size image](caching-data-with-the-objectdatasource-vb/_static/image17.png))</span></span>


## <a name="step-3-examining-when-the-objectdatasource-is-requesting-data"></a><span data-ttu-id="326d7-201">Krok 3: Prozkoumání při the ObjectDataSource se požaduje Data</span><span class="sxs-lookup"><span data-stu-id="326d7-201">Step 3: Examining When the ObjectDataSource is Requesting Data</span></span>

<span data-ttu-id="326d7-202">`Products` GridView načte data pro zobrazení vyvoláním `Select` metodu `ProductsDataSource` ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="326d7-202">The `Products` GridView retrieves its data to display by invoking the `Select` method of the `ProductsDataSource` ObjectDataSource.</span></span> <span data-ttu-id="326d7-203">Tato ObjectDataSource vytvoří instanci s vrstvu obchodní logiky `ProductsBLL` třídy a volání jeho `GetProducts()` metoda, která volá Data Access Layer s `ProductsTableAdapter` s `GetProducts()` metoda.</span><span class="sxs-lookup"><span data-stu-id="326d7-203">This ObjectDataSource creates an instance of the Business Logic Layer s `ProductsBLL` class and calls its `GetProducts()` method, which in turn calls the Data Access Layer s `ProductsTableAdapter` s `GetProducts()` method.</span></span> <span data-ttu-id="326d7-204">Metoda DAL připojuje k databázi Northwind a vydá konfigurovaného `SELECT` dotazu.</span><span class="sxs-lookup"><span data-stu-id="326d7-204">The DAL method connects to the Northwind database and issues the configured `SELECT` query.</span></span> <span data-ttu-id="326d7-205">Tato data se pak vrátí DAL, který zabalí v `NorthwindDataTable`.</span><span class="sxs-lookup"><span data-stu-id="326d7-205">This data is then returned to the DAL, which packages it up in a `NorthwindDataTable`.</span></span> <span data-ttu-id="326d7-206">Objekt DataTable je vrácen do BLL, který vrátí ji do ObjectDataSource, který vrátí ji do GridView.</span><span class="sxs-lookup"><span data-stu-id="326d7-206">The DataTable object is returned to the BLL, which returns it to the ObjectDataSource, which returns it to the GridView.</span></span> <span data-ttu-id="326d7-207">Vytvoří GridView `GridViewRow` objekt pro každou `DataRow` DataTable a pro každou `GridViewRow` nakonec vykreslením do kódu HTML, který je vrácen do klienta a zobrazit v prohlížeči návštěvníka s.</span><span class="sxs-lookup"><span data-stu-id="326d7-207">The GridView then creates a `GridViewRow` object for each `DataRow` in the DataTable, and each `GridViewRow` is eventually rendered into the HTML that is returned to the client and displayed on the visitor s browser.</span></span>

<span data-ttu-id="326d7-208">Toto pořadí událostí dojde každé době GridView potřebuje k vytvoření vazby. jeho základní data.</span><span class="sxs-lookup"><span data-stu-id="326d7-208">This sequence of events happens each and every time the GridView needs to bind to its underlying data.</span></span> <span data-ttu-id="326d7-209">K tomu dojde, když je je nejdřív navštívené stránky, při přesouvání z jedné stránky dat na jiný, při řazení GridView nebo při změně dat s GridView prostřednictvím jeho vestavěné úpravy nebo odstranění rozhraní.</span><span class="sxs-lookup"><span data-stu-id="326d7-209">That happens when the page is first visited, when moving from one page of data to another, when sorting the GridView, or when modifying the GridView s data through its built-in editing or deleting interfaces.</span></span> <span data-ttu-id="326d7-210">Pokud je stav zobrazení s GridView vypnutá, GridView bude odrážejí na každé zpětné volání.</span><span class="sxs-lookup"><span data-stu-id="326d7-210">If the GridView s view state is disabled, the GridView will be rebound on each and every postback as well.</span></span> <span data-ttu-id="326d7-211">GridView můžete také být explicitně odrážejí na svá data pomocí volání jeho `DataBind()` metoda.</span><span class="sxs-lookup"><span data-stu-id="326d7-211">The GridView can also be explicitly rebound to its data by calling its `DataBind()` method.</span></span>

<span data-ttu-id="326d7-212">Plně vyhodnotit četnost, se kterým jsou načtena data z databáze, umožní s zobrazí zprávu s upozorněním, když se znovu načtena data.</span><span class="sxs-lookup"><span data-stu-id="326d7-212">To fully appreciate the frequency with which the data is retrieved from the database, let s display a message indicating when the data is being re-retrieved.</span></span> <span data-ttu-id="326d7-213">Přidání ovládacího prvku popisek webové výše GridView s názvem `ODSEvents`.</span><span class="sxs-lookup"><span data-stu-id="326d7-213">Add a Label Web control above the GridView named `ODSEvents`.</span></span> <span data-ttu-id="326d7-214">Vymažte jeho `Text` vlastnost a sadu jeho `EnableViewState` vlastnost `False`.</span><span class="sxs-lookup"><span data-stu-id="326d7-214">Clear out its `Text` property and set its `EnableViewState` property to `False`.</span></span> <span data-ttu-id="326d7-215">Pod štítku, přidání ovládacího prvku tlačítko a nastavit jeho `Text` vlastnost na zpětné volání.</span><span class="sxs-lookup"><span data-stu-id="326d7-215">Underneath the Label, add a Button Web control and set its `Text` property to Postback .</span></span>


<span data-ttu-id="326d7-216">[![Přidání popisku a tlačítko na stránku výše GridView](caching-data-with-the-objectdatasource-vb/_static/image19.png)](caching-data-with-the-objectdatasource-vb/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="326d7-216">[![Add a Label and Button to the Page Above the GridView](caching-data-with-the-objectdatasource-vb/_static/image19.png)](caching-data-with-the-objectdatasource-vb/_static/image18.png)</span></span>

<span data-ttu-id="326d7-217">**Obrázek 8**: Přidání popisku a tlačítko na stránce nahoře GridView ([Kliknutím zobrazit obrázek v plné velikosti](caching-data-with-the-objectdatasource-vb/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="326d7-217">**Figure 8**: Add a Label and Button to the Page Above the GridView ([Click to view full-size image](caching-data-with-the-objectdatasource-vb/_static/image20.png))</span></span>


<span data-ttu-id="326d7-218">Během přístupu pracovního postupu systému dat, ObjectDataSource s `Selecting` aktivuje událost před vytvořením základní objekt a jeho nakonfigurovaná metoda volána.</span><span class="sxs-lookup"><span data-stu-id="326d7-218">During the data access workflow, the ObjectDataSource s `Selecting` event fires before the underlying object is created and its configured method invoked.</span></span> <span data-ttu-id="326d7-219">Vytvoření obslužné rutiny události pro tuto událost a přidejte následující kód:</span><span class="sxs-lookup"><span data-stu-id="326d7-219">Create an event handler for this event and add the following code:</span></span>


[!code-vb[Main](caching-data-with-the-objectdatasource-vb/samples/sample3.vb)]

<span data-ttu-id="326d7-220">Pokaždé, když ObjectDataSource odešle požadavek architekturu pro data, zobrazí popisek aktivována událost zvolíte textu.</span><span class="sxs-lookup"><span data-stu-id="326d7-220">Each time the ObjectDataSource makes a request to the architecture for data, the Label will display the text Selecting event fired .</span></span>

<span data-ttu-id="326d7-221">Navštivte tuto stránku v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="326d7-221">Visit this page in a browser.</span></span> <span data-ttu-id="326d7-222">Při první je navštívené stránky, je aktivována událost zvolíte textu zobrazí.</span><span class="sxs-lookup"><span data-stu-id="326d7-222">When the page is first visited, the text Selecting event fired is shown.</span></span> <span data-ttu-id="326d7-223">Klikněte na tlačítko zpětného volání a poznamenejte si, že text zmizí (za předpokladu, že rutina GridView s `EnableViewState` je nastavena na `True`, výchozí hodnota).</span><span class="sxs-lookup"><span data-stu-id="326d7-223">Click the Postback button and note that the text disappears (assuming that the GridView s `EnableViewState` property is set to `True`, the default).</span></span> <span data-ttu-id="326d7-224">Je to proto, že na zpětné volání, GridView je znovu vytvořena z svůj stav zobrazení, a proto nemá t zapněte k ObjectDataSource pro svoje data.</span><span class="sxs-lookup"><span data-stu-id="326d7-224">This is because, on postback, the GridView is reconstructed from its view state and therefore doesn t turn to the ObjectDataSource for its data.</span></span> <span data-ttu-id="326d7-225">Řazení, stránkování, nebo úpravě dat, ale způsobí, že rutina GridView se svázat svůj zdroj dat, a proto zvolíte událost aktivována se bude zobrazovat text.</span><span class="sxs-lookup"><span data-stu-id="326d7-225">Sorting, paging, or editing the data, however, causes the GridView to rebind to its data source, and therefore the Selecting event fired text reappears.</span></span>


<span data-ttu-id="326d7-226">[![Vždy, když je GridView odrážejí svůj zdroj dat, zobrazí se události zvolíte aktivováno](caching-data-with-the-objectdatasource-vb/_static/image22.png)](caching-data-with-the-objectdatasource-vb/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="326d7-226">[![Whenever the GridView is Rebound to its Data Source, Selecting event fired is Displayed](caching-data-with-the-objectdatasource-vb/_static/image22.png)](caching-data-with-the-objectdatasource-vb/_static/image21.png)</span></span>

<span data-ttu-id="326d7-227">**Obrázek 9**: je vždy, když GridView odrážejí svůj zdroj dat, se zobrazí události zvolíte aktivováno ([Kliknutím zobrazit obrázek v plné velikosti](caching-data-with-the-objectdatasource-vb/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="326d7-227">**Figure 9**: Whenever the GridView is Rebound to its Data Source, Selecting event fired is Displayed ([Click to view full-size image](caching-data-with-the-objectdatasource-vb/_static/image23.png))</span></span>


<span data-ttu-id="326d7-228">[![Kliknutím na tlačítko Postback způsobí GridView k znovu vytvořena z svůj stav zobrazení](caching-data-with-the-objectdatasource-vb/_static/image25.png)](caching-data-with-the-objectdatasource-vb/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="326d7-228">[![Clicking the Postback Button Causes the GridView to be Reconstructed from its View State](caching-data-with-the-objectdatasource-vb/_static/image25.png)](caching-data-with-the-objectdatasource-vb/_static/image24.png)</span></span>

<span data-ttu-id="326d7-229">**Obrázek 10**: Klepnutím na tlačítko Postback způsobí, že rutina GridView k znovu vytvořena z svůj stav zobrazení ([Kliknutím zobrazit obrázek v plné velikosti](caching-data-with-the-objectdatasource-vb/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="326d7-229">**Figure 10**: Clicking the Postback Button Causes the GridView to be Reconstructed from its View State ([Click to view full-size image](caching-data-with-the-objectdatasource-vb/_static/image26.png))</span></span>


<span data-ttu-id="326d7-230">To nemusí připadat plýtvání k načtení dat databáze pokaždé, když je stránkovaného prostřednictvím nebo seřazená data.</span><span class="sxs-lookup"><span data-stu-id="326d7-230">It may seem wasteful to retrieve the database data each time the data is paged through or sorted.</span></span> <span data-ttu-id="326d7-231">Po všech od jsme znovu pomocí výchozího stránkování ObjectDataSource má načíst všechny záznamy při zobrazení na první stránku.</span><span class="sxs-lookup"><span data-stu-id="326d7-231">After all, since we re using default paging, the ObjectDataSource has retrieved all of the records when displaying the first page.</span></span> <span data-ttu-id="326d7-232">I v případě, že GridView neposkytuje řazení a stránkování podpory, data musí být načíst z databáze pokaždé, když je je nejdřív navštívené stránky žádný uživatel (a na každý zpětné volání, pokud je stav zobrazení zakázán).</span><span class="sxs-lookup"><span data-stu-id="326d7-232">Even if the GridView does not provide sorting and paging support, the data must be retrieved from the database each time the page is first visited by any user (and on every postback, if view state is disabled).</span></span> <span data-ttu-id="326d7-233">Ale pokud GridView se zobrazuje stejná data pro všechny uživatele, jsou tyto požadavky navíc databáze nadbytečné.</span><span class="sxs-lookup"><span data-stu-id="326d7-233">But if the GridView is showing the same data to all users, these extra database requests are superfluous.</span></span> <span data-ttu-id="326d7-234">Proč ne výsledky vrácené z mezipaměti `GetProducts()` metoda a vazby GridView těm, které do mezipaměti výsledky?</span><span class="sxs-lookup"><span data-stu-id="326d7-234">Why not cache the results returned from the `GetProducts()` method and bind the GridView to those cached results?</span></span>

## <a name="step-4-caching-the-data-using-the-objectdatasource"></a><span data-ttu-id="326d7-235">Krok 4: Ukládání dat pomocí ObjectDataSource</span><span class="sxs-lookup"><span data-stu-id="326d7-235">Step 4: Caching the Data Using the ObjectDataSource</span></span>

<span data-ttu-id="326d7-236">Nastavením jednoduše několik vlastností, můžete nakonfigurovat ObjectDataSource automaticky data do mezipaměti na jeho načtené v datové mezipaměti technologie ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="326d7-236">By simply setting a few properties, the ObjectDataSource can be configured to automatically cache its retrieved data in the ASP.NET data cache.</span></span> <span data-ttu-id="326d7-237">Následující seznam shrnuje vlastnosti související s mezipamětí ObjectDataSource:</span><span class="sxs-lookup"><span data-stu-id="326d7-237">The following list summarizes the cache-related properties of the ObjectDataSource:</span></span>

- <span data-ttu-id="326d7-238">[EnableCaching](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasource.enablecaching.aspx) musí být nastavena na `True` povolení ukládání do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="326d7-238">[EnableCaching](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasource.enablecaching.aspx) must be set to `True` to enable caching.</span></span> <span data-ttu-id="326d7-239">Výchozí hodnota je `False`.</span><span class="sxs-lookup"><span data-stu-id="326d7-239">The default is `False`.</span></span>
- <span data-ttu-id="326d7-240">[CacheDuration](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasource.cacheduration.aspx) množství času v sekundách, který je uložen v mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="326d7-240">[CacheDuration](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasource.cacheduration.aspx) the amount of time, in seconds, that the data is cached.</span></span> <span data-ttu-id="326d7-241">Výchozí hodnota je 0.</span><span class="sxs-lookup"><span data-stu-id="326d7-241">The default is 0.</span></span> <span data-ttu-id="326d7-242">ObjectDataSource bude pouze mezipaměti dat, pokud `EnableCaching` je `True` a `CacheDuration` je nastaven na hodnotu větší než nula.</span><span class="sxs-lookup"><span data-stu-id="326d7-242">The ObjectDataSource will only cache data if `EnableCaching` is `True` and `CacheDuration` is set to a value greater than zero.</span></span>
- <span data-ttu-id="326d7-243">[CacheExpirationPolicy](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasource.cacheexpirationpolicy.aspx) může být nastaven na `Absolute` nebo `Sliding`.</span><span class="sxs-lookup"><span data-stu-id="326d7-243">[CacheExpirationPolicy](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasource.cacheexpirationpolicy.aspx) can be set to `Absolute` or `Sliding`.</span></span> <span data-ttu-id="326d7-244">Pokud `Absolute`, ObjectDataSource ukládá do mezipaměti jeho načtená data pro `CacheDuration` sekund; Pokud `Sliding`, vyprší platnost dat pouze po nebyl byly přístupné pro `CacheDuration` sekund.</span><span class="sxs-lookup"><span data-stu-id="326d7-244">If `Absolute`, the ObjectDataSource caches its retrieved data for `CacheDuration` seconds; if `Sliding`, the data expires only after it has not been accessed for `CacheDuration` seconds.</span></span> <span data-ttu-id="326d7-245">Výchozí hodnota je `Absolute`.</span><span class="sxs-lookup"><span data-stu-id="326d7-245">The default is `Absolute`.</span></span>
- <span data-ttu-id="326d7-246">[CacheKeyDependency](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasource.cachekeydependency.aspx) pomocí této vlastnosti můžete přidružit existující závislost mezipaměti položky mezipaměti s ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="326d7-246">[CacheKeyDependency](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasource.cachekeydependency.aspx) use this property to associate the ObjectDataSource s cache entries with an existing cache dependency.</span></span> <span data-ttu-id="326d7-247">Položky dat s ObjectDataSource můžete předčasně vyloučena z mezipaměti zneplatněním přidružené `CacheKeyDependency`.</span><span class="sxs-lookup"><span data-stu-id="326d7-247">The ObjectDataSource s data entries can be prematurely evicted from the cache by expiring its associated `CacheKeyDependency`.</span></span> <span data-ttu-id="326d7-248">Tato vlastnost se nejčastěji používá přidružit mezipaměti s ObjectDataSource mezipaměti závislost SQL, téma jsme budete prozkoumat v budoucnu [pomocí závislosti mezipaměti SQL](using-sql-cache-dependencies-vb.md) kurzu.</span><span class="sxs-lookup"><span data-stu-id="326d7-248">This property is most commonly used to associate a SQL cache dependency with the ObjectDataSource s cache, a topic we'll explore in the future [Using SQL Cache Dependencies](using-sql-cache-dependencies-vb.md) tutorial.</span></span>

<span data-ttu-id="326d7-249">Umožní s nakonfigurovat `ProductsDataSource` ObjectDataSource pro ukládání do mezipaměti po dobu 30 sekund v měřítku absolutní jeho data.</span><span class="sxs-lookup"><span data-stu-id="326d7-249">Let s configure the `ProductsDataSource` ObjectDataSource to cache its data for 30 seconds on an absolute scale.</span></span> <span data-ttu-id="326d7-250">Nastavit ObjectDataSource s `EnableCaching` vlastnost `True` a jeho `CacheDuration` vlastnost do 30.</span><span class="sxs-lookup"><span data-stu-id="326d7-250">Set the ObjectDataSource s `EnableCaching` property to `True` and its `CacheDuration` property to 30.</span></span> <span data-ttu-id="326d7-251">Ponechte `CacheExpirationPolicy` vlastností nastavenou na výchozí `Absolute`.</span><span class="sxs-lookup"><span data-stu-id="326d7-251">Leave the `CacheExpirationPolicy` property set to its default, `Absolute`.</span></span>


<span data-ttu-id="326d7-252">[![Konfigurace ObjectDataSource pro ukládání do mezipaměti jeho Data po dobu 30 sekund.](caching-data-with-the-objectdatasource-vb/_static/image28.png)](caching-data-with-the-objectdatasource-vb/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="326d7-252">[![Configure the ObjectDataSource to Cache its Data for 30 Seconds](caching-data-with-the-objectdatasource-vb/_static/image28.png)](caching-data-with-the-objectdatasource-vb/_static/image27.png)</span></span>

<span data-ttu-id="326d7-253">**Obrázek 11**: Konfigurace ObjectDataSource pro ukládání do mezipaměti jeho Data po dobu 30 sekund ([Kliknutím zobrazit obrázek v plné velikosti](caching-data-with-the-objectdatasource-vb/_static/image29.png))</span><span class="sxs-lookup"><span data-stu-id="326d7-253">**Figure 11**: Configure the ObjectDataSource to Cache its Data for 30 Seconds ([Click to view full-size image](caching-data-with-the-objectdatasource-vb/_static/image29.png))</span></span>


<span data-ttu-id="326d7-254">Uložte změny a pokroku tuto stránku v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="326d7-254">Save your changes and revisit this page in a browser.</span></span> <span data-ttu-id="326d7-255">Výběr textu je aktivována událost se zobrazí při první návštěvě stránky, protože původně dat není v mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="326d7-255">The Selecting event fired text will appear when you first visit the page, as initially the data is not in the cache.</span></span> <span data-ttu-id="326d7-256">Ale následné postback aktivovány klepnutím na tlačítko zpětného volání, řazení, stránkování, nebo kliknutím na tlačítko Upravit nebo zrušit *není* redisplay zvolíte událost je aktivována text.</span><span class="sxs-lookup"><span data-stu-id="326d7-256">But subsequent postbacks triggered by clicking the Postback button, sorting, paging, or clicking the Edit or Cancel buttons does *not* redisplay the Selecting event fired text.</span></span> <span data-ttu-id="326d7-257">Důvodem je, že `Selecting` událostí pouze aktivuje se v případě ObjectDataSource získává data z jeho základní objekt; `Selecting` událost neaktivuje, pokud jsou získávány z datové mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="326d7-257">This is because the `Selecting` event only fires when the ObjectDataSource gets its data from its underlying object; the `Selecting` event does not fire if the data is pulled from the data cache.</span></span>

<span data-ttu-id="326d7-258">Po 30 sekund bude vyloučena data z mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="326d7-258">After 30 seconds, the data will be evicted from the cache.</span></span> <span data-ttu-id="326d7-259">Data budou odstraněna také z mezipaměti, pokud ObjectDataSource s `Insert`, `Update`, nebo `Delete` jsou vyvolány metody.</span><span class="sxs-lookup"><span data-stu-id="326d7-259">The data will also be evicted from the cache if the ObjectDataSource s `Insert`, `Update`, or `Delete` methods are invoked.</span></span> <span data-ttu-id="326d7-260">V důsledku toho zobrazení událostí zvolíte text aktivováno po 30 sekund předané bylo stisknuto tlačítko aktualizace, řazení, stránkování, nebo kliknutím na tlačítko Upravit nebo zrušit způsobí, že ObjectDataSource pro získání dat z jeho základní objekt, když `Selecting` je aktivována událost.</span><span class="sxs-lookup"><span data-stu-id="326d7-260">Consequently, after 30 seconds have passed or the Update button has been clicked, sorting, paging, or clicking the Edit or Cancel buttons will cause the ObjectDataSource to get its data from its underlying object, displaying the Selecting event fired text when the `Selecting` event fires.</span></span> <span data-ttu-id="326d7-261">Tyto vrácených výsledků jsou umístěny zpět do datové mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="326d7-261">These returned results are placed back into the data cache.</span></span>

> [!NOTE]
> <span data-ttu-id="326d7-262">Pokud se zobrazí výběr textu událost je aktivována často, i v případě, že byste měli ObjectDataSource pracujete data uložená v mezipaměti, může být z důvodu omezení paměti.</span><span class="sxs-lookup"><span data-stu-id="326d7-262">If you see the Selecting event fired text frequently, even when you expect the ObjectDataSource to be working with cached data, it may be due to memory constraints.</span></span> <span data-ttu-id="326d7-263">Pokud není k dispozici dostatek volné paměti, dat přidaných do mezipaměti ObjectDataSource může mít byla úklid.</span><span class="sxs-lookup"><span data-stu-id="326d7-263">If there is not enough free memory, the data added to the cache by the ObjectDataSource may have been scavenged.</span></span> <span data-ttu-id="326d7-264">Pokud se zdá být správně ukládání do mezipaměti data nebo pouze mezipamětí t nemá ObjectDataSource data k, zavřete některé aplikace a volné paměti a zkuste to znovu.</span><span class="sxs-lookup"><span data-stu-id="326d7-264">If the ObjectDataSource doesn t appear to be correctly caching the data or only caches the data sporadically, close some applications to free memory and try again.</span></span>


<span data-ttu-id="326d7-265">Obrázek 12 znázorňuje s ObjectDataSource ukládání do mezipaměti pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="326d7-265">Figure 12 illustrates the ObjectDataSource s caching workflow.</span></span> <span data-ttu-id="326d7-266">Když zvolíte událost aktivována text se zobrazí na obrazovce, že se data nebyla v mezipaměti a museli být načtena z podkladových objektů.</span><span class="sxs-lookup"><span data-stu-id="326d7-266">When the Selecting event fired text appears on your screen, it is because the data was not in the cache and had to be retrieved from the underlying object.</span></span> <span data-ttu-id="326d7-267">Když tento text nebyl nalezen, ale je s protože dat nebyly k dispozici z mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="326d7-267">When this text is missing, however, it s because the data was available from the cache.</span></span> <span data-ttu-id="326d7-268">Pokud je vrácen data z mezipaměti zde s bez volání základní objekt a proto žádné databázový dotaz spustit.</span><span class="sxs-lookup"><span data-stu-id="326d7-268">When the data is returned from the cache there s no call to the underlying object and, therefore, no database query executed.</span></span>


![ObjectDataSource úložiště a načte Data z datové mezipaměti](caching-data-with-the-objectdatasource-vb/_static/image30.png)

<span data-ttu-id="326d7-270">**Obrázek 12**: ObjectDataSource ukládá a načte Data z datové mezipaměti</span><span class="sxs-lookup"><span data-stu-id="326d7-270">**Figure 12**: The ObjectDataSource Stores and Retrieves its Data from the Data Cache</span></span>


<span data-ttu-id="326d7-271">Každá aplikace technologie ASP.NET má svou vlastní datové mezipaměti instance této s sdílet všech stránek a návštěvníky.</span><span class="sxs-lookup"><span data-stu-id="326d7-271">Each ASP.NET application has its own data cache instance that s shared across all pages and visitors.</span></span> <span data-ttu-id="326d7-272">To znamená, že data uložená v mezipaměti dat pomocí ObjectDataSource podobně sdílet všichni uživatelé, kteří najdete na stránce.</span><span class="sxs-lookup"><span data-stu-id="326d7-272">That means that the data stored in the data cache by the ObjectDataSource is likewise shared across all users who visit the page.</span></span> <span data-ttu-id="326d7-273">Chcete-li to ověřit, otevřete `ObjectDataSource.aspx` stránku v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="326d7-273">To verify this, open the `ObjectDataSource.aspx` page in a browser.</span></span> <span data-ttu-id="326d7-274">Při první návštěvě stránky se zobrazí výběr textu událost je aktivována (za předpokladu, že data přidány do mezipaměti podle předchozích testů, nyní by byla odebrána).</span><span class="sxs-lookup"><span data-stu-id="326d7-274">When first visiting the page, the Selecting event fired text will appear (assuming that the data added to the cache by previous tests has, by now, been evicted).</span></span> <span data-ttu-id="326d7-275">Otevřít druhou instanci prohlížeče a zkopírujte a vložte adresu URL z první instance prohlížeče na druhý.</span><span class="sxs-lookup"><span data-stu-id="326d7-275">Open a second browser instance and copy and paste the URL from the first browser instance to the second.</span></span> <span data-ttu-id="326d7-276">Ve druhé instance prohlížeč není zobrazen výběr textu událostí aktivováno, protože ho používají stejné mezipaměti data jako první.</span><span class="sxs-lookup"><span data-stu-id="326d7-276">In the second browser instance, the Selecting event fired text is not shown because it s using the same cached data as the first.</span></span>

<span data-ttu-id="326d7-277">Při vkládání jeho načtená data do mezipaměti, ObjectDataSource používá hodnotu klíče mezipaměti, která zahrnuje: `CacheDuration` a `CacheExpirationPolicy` hodnoty vlastností; typ podkladového objektu obchodní používá ObjectDataSource, který je určený prostřednictvím [ `TypeName` vlastnost](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasource.typename.aspx) (`ProductsBLL`, v tomto příkladu); hodnota `SelectMethod` vlastnost a názvu a hodnot parametrů v `SelectParameters` kolekce; a hodnoty jeho `StartRowIndex`a `MaximumRows` vlastnosti, které se používají při implementaci [vlastní stránkování](../paging-and-sorting/paging-and-sorting-report-data-vb.md).</span><span class="sxs-lookup"><span data-stu-id="326d7-277">When inserting its retrieved data into the cache, the ObjectDataSource uses a cache key value that includes: the `CacheDuration` and `CacheExpirationPolicy` property values; the type of the underlying business object being used by the ObjectDataSource, which is specified via the [`TypeName` property](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasource.typename.aspx) (`ProductsBLL`, in this example); the value of the `SelectMethod` property and the name and values of the parameters in the `SelectParameters` collection; and the values of its `StartRowIndex` and `MaximumRows` properties, which are used when implementing [custom paging](../paging-and-sorting/paging-and-sorting-report-data-vb.md).</span></span>

<span data-ttu-id="326d7-278">Položka jedinečný mezipaměti věnujte hodnota klíče mezipaměti jako kombinaci těchto vlastností zajišťuje, jak tyto hodnoty změnit.</span><span class="sxs-lookup"><span data-stu-id="326d7-278">Crafting the cache key value as a combination of these properties ensures a unique cache entry as these values change.</span></span> <span data-ttu-id="326d7-279">Například v posledních kurzy jsme sunout hledá pomocí `ProductsBLL` třídu s `GetProductsByCategoryID(categoryID)`, která vrací všechny produkty, pro zadané kategorii.</span><span class="sxs-lookup"><span data-stu-id="326d7-279">For example, in past tutorials we ve looked at using the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)`, which returns all products for a specified category.</span></span> <span data-ttu-id="326d7-280">Jeden uživatel by mohl pocházet na stránku a zobrazení nápoje, který má `CategoryID` 1.</span><span class="sxs-lookup"><span data-stu-id="326d7-280">One user might come to the page and view beverages, which has a `CategoryID` of 1.</span></span> <span data-ttu-id="326d7-281">Pokud ObjectDataSource mezipaměti své výsledky bez ohledu na `SelectParameters` hodnoty, když byla přijata jiného uživatele na stránku zobrazíte přísady při produkty nápoje byly v mezipaměti, zobrazí se jim d přísady produktů uloženou v mezipaměti nápoj spíše než.</span><span class="sxs-lookup"><span data-stu-id="326d7-281">If the ObjectDataSource cached its results without regard for the `SelectParameters` values, when another user came to the page to view condiments while the beverages products were in the cache, they d see the cached beverage products rather than condiments.</span></span> <span data-ttu-id="326d7-282">Pomocí různých klíče mezipaměti podle těchto vlastností, které obsahují hodnoty `SelectParameters`, ObjectDataSource udržuje samostatné položky v mezipaměti pro nápoje a přísady.</span><span class="sxs-lookup"><span data-stu-id="326d7-282">By varying the cache key by these properties, which include the values of the `SelectParameters`, the ObjectDataSource maintains a separate cache entry for beverages and condiments.</span></span>

## <a name="stale-data-concerns"></a><span data-ttu-id="326d7-283">Zastaralá Data otázky</span><span class="sxs-lookup"><span data-stu-id="326d7-283">Stale Data Concerns</span></span>

<span data-ttu-id="326d7-284">ObjectDataSource automaticky vyloučí jeho položky z mezipaměti, pokud jeden z jeho `Insert`, `Update`, nebo `Delete` vyvolání metody.</span><span class="sxs-lookup"><span data-stu-id="326d7-284">The ObjectDataSource automatically evicts its items from the cache when any one of its `Insert`, `Update`, or `Delete` methods is invoked.</span></span> <span data-ttu-id="326d7-285">Tato funkce pomáhá chránit proti zastaralá data tak, že smažete se položky v mezipaměti při změně dat prostřednictvím stránky.</span><span class="sxs-lookup"><span data-stu-id="326d7-285">This helps protect against stale data by clearing out the cache entries when the data is modified through the page.</span></span> <span data-ttu-id="326d7-286">Je však možné ObjectDataSource stále zobrazení zastaralých dat pomocí ukládání do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="326d7-286">However, it is possible for an ObjectDataSource using caching to still display stale data.</span></span> <span data-ttu-id="326d7-287">V nejjednodušším případě může být z důvodu data změna přímo v databázi.</span><span class="sxs-lookup"><span data-stu-id="326d7-287">In the simplest case, it can be due to the data changing directly within the database.</span></span> <span data-ttu-id="326d7-288">Správce databáze možná právě spustili skript, který změní některé záznamy v databázi.</span><span class="sxs-lookup"><span data-stu-id="326d7-288">Perhaps a database administrator just ran a script that modifies some of the records in the database.</span></span>

<span data-ttu-id="326d7-289">Tento scénář může také unfold více jemně způsobem.</span><span class="sxs-lookup"><span data-stu-id="326d7-289">This scenario could also unfold in a more subtle way.</span></span> <span data-ttu-id="326d7-290">Když ObjectDataSource vyloučí jeho položky z mezipaměti, pokud jeden z jeho metod úpravy dat se nazývá, položek v mezipaměti odebrat jsou pro ObjectDataSource s určitou kombinaci hodnot vlastností (`CacheDuration`, `TypeName`, `SelectMethod`, a tak dále).</span><span class="sxs-lookup"><span data-stu-id="326d7-290">While the ObjectDataSource evicts its items from the cache when one of its data modification methods is called, the cached items removed are for the ObjectDataSource s particular combination of property values (`CacheDuration`, `TypeName`, `SelectMethod`, and so on).</span></span> <span data-ttu-id="326d7-291">Pokud máte dva ObjectDataSources, které používají různé `SelectMethods` nebo `SelectParameters`, ale stále můžete aktualizovat stejná data, pak může aktualizovat řádek a zneplatnit vlastní položky mezipaměti, ale odpovídající řádek pro druhý ObjectDataSource jeden ObjectDataSource se stále zpracuje z uložená v mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="326d7-291">If you have two ObjectDataSources that use different `SelectMethods` or `SelectParameters`, but still can update the same data, then one ObjectDataSource may update a row and invalidate its own cache entries, but the corresponding row for the second ObjectDataSource will still be served from the cached.</span></span> <span data-ttu-id="326d7-292">I doporučujeme vytvářet stránky vykazovat tuto funkci.</span><span class="sxs-lookup"><span data-stu-id="326d7-292">I encourage you to create pages to exhibit this functionality.</span></span> <span data-ttu-id="326d7-293">Vytvořte stránku, která zobrazuje upravitelný GridView, který žádá o jeho data ze ObjectDataSource, který používá ukládání do mezipaměti a je nakonfigurován k získání dat z `ProductsBLL` třídu s `GetProducts()` metoda.</span><span class="sxs-lookup"><span data-stu-id="326d7-293">Create a page that displays an editable GridView that pulls its data from an ObjectDataSource that uses caching and is configured to get data from the `ProductsBLL` class s `GetProducts()` method.</span></span> <span data-ttu-id="326d7-294">Přidejte další upravitelné GridView a ObjectDataSource na této stránce (nebo jinou), ale pro tento druhý ObjectDataSource mají ho používat `GetProductsByCategoryID(categoryID)` metoda.</span><span class="sxs-lookup"><span data-stu-id="326d7-294">Add another editable GridView and ObjectDataSource to this page (or another one), but for this second ObjectDataSource have it use the `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="326d7-295">Od dvě ObjectDataSources `SelectMethod` vlastnosti liší, budou všechny každý mají své vlastní uložené v mezipaměti hodnoty.</span><span class="sxs-lookup"><span data-stu-id="326d7-295">Since the two ObjectDataSources `SelectMethod` properties differ, they ll each have their own cached values.</span></span> <span data-ttu-id="326d7-296">Pokud chcete upravit produktu v jedné mřížky, při příštím vytvoření vazby dat zpět do jiných mřížky (podle stránkování, řazení a tak dále), bude i nadále odesílat data starý, uložené v mezipaměti a změny, která byla vytvořená z jiných mřížky v úvahu.</span><span class="sxs-lookup"><span data-stu-id="326d7-296">If you edit a product in one grid, the next time you bind the data back to the other grid (by paging, sorting, and so forth), it will still serve the old, cached data and not reflect the change that was made from the other grid.</span></span>

<span data-ttu-id="326d7-297">Stručně řečeno použijte pouze založené na čase expiries Pokud chcete mít potenciálně zastaralá data a použijte kratší expiries pro scénáře, kde je důležité aktuálnosti dat.</span><span class="sxs-lookup"><span data-stu-id="326d7-297">In short, only use time-based expiries if you are willing to have the potential of stale data, and use shorter expiries for scenarios where the freshness of data is important.</span></span> <span data-ttu-id="326d7-298">Pokud zastaralá data není přijatelné, buď forgo ukládání do mezipaměti, nebo použijte závislosti mezipaměti SQL (za předpokladu, že je databáze data níž ukládání do mezipaměti).</span><span class="sxs-lookup"><span data-stu-id="326d7-298">If stale data is not acceptable, either forgo caching or use SQL cache dependencies (assuming it is database data you re caching).</span></span> <span data-ttu-id="326d7-299">V budoucích kurzu jsme budete prozkoumejte závislosti mezipaměti SQL.</span><span class="sxs-lookup"><span data-stu-id="326d7-299">We'll explore SQL cache dependencies in a future tutorial.</span></span>

## <a name="summary"></a><span data-ttu-id="326d7-300">Souhrn</span><span class="sxs-lookup"><span data-stu-id="326d7-300">Summary</span></span>

<span data-ttu-id="326d7-301">V tomto kurzu jsme se zaměřili ObjectDataSource s integrované ukládání do mezipaměti funkce.</span><span class="sxs-lookup"><span data-stu-id="326d7-301">In this tutorial we examined the ObjectDataSource s built-in caching capabilities.</span></span> <span data-ttu-id="326d7-302">Nastavením jednoduše několik vlastností, jsme určit, aby ObjectDataSource pro ukládání do mezipaměti výsledky vrácené z určeného `SelectMethod` do mezipaměti data technologie ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="326d7-302">By simply setting a few properties, we can instruct the ObjectDataSource to cache the results returned from the specified `SelectMethod` into the ASP.NET data cache.</span></span> <span data-ttu-id="326d7-303">`CacheDuration` a `CacheExpirationPolicy` vlastnosti určují dobu trvání položka se uloží do mezipaměti a zda je absolutní nebo klouzavé vypršení platnosti.</span><span class="sxs-lookup"><span data-stu-id="326d7-303">The `CacheDuration` and `CacheExpirationPolicy` properties indicate the duration the item is cached and whether it is an absolute or sliding expiration.</span></span> <span data-ttu-id="326d7-304">`CacheKeyDependency` Vlastnost všechny položky mezipaměti s ObjectDataSource Přidruží existující závislost mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="326d7-304">The `CacheKeyDependency` property associates all of the ObjectDataSource s cache entries with an existing cache dependency.</span></span> <span data-ttu-id="326d7-305">Tímto lze vyřazení ObjectDataSource s položky z mezipaměti před vypršením platnosti na základě času je dosaženo a se obvykle používá s závislosti mezipaměti SQL.</span><span class="sxs-lookup"><span data-stu-id="326d7-305">This can be used to evict the ObjectDataSource s entries from the cache before the time-based expiration is reached, and is typically used with SQL cache dependencies.</span></span>

<span data-ttu-id="326d7-306">Vzhledem k tomu, že ObjectDataSource jednoduše ukládá do mezipaměti jeho hodnoty do mezipaměti dat, můžeme může replikovat integrovanou funkci s ObjectDataSource prostřednictvím kódu programu.</span><span class="sxs-lookup"><span data-stu-id="326d7-306">Since the ObjectDataSource simply caches its values to the data cache, we could replicate the ObjectDataSource s built-in functionality programmatically.</span></span> <span data-ttu-id="326d7-307">Ho t nemá smysl to udělat na prezentační vrstvy, vzhledem k tomu, že ObjectDataSource nabízí tuto funkci mimo pole, ale můžeme implementovat možnosti ukládání do mezipaměti v samostatné vrstvě architektury.</span><span class="sxs-lookup"><span data-stu-id="326d7-307">It doesn t make sense to do this at the Presentation Layer, since the ObjectDataSource offers this functionality out of the box, but we can implement caching capabilities in a separate layer of the architecture.</span></span> <span data-ttu-id="326d7-308">To pokud chcete udělat, budeme potřebovat opakování stejné logiky, která používá ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="326d7-308">To do so, we'll need to repeat the same logic used by the ObjectDataSource.</span></span> <span data-ttu-id="326d7-309">Jak programově pracovat s datovou mezipaměť z v architektuře v našem kurzu další jsme budete prozkoumat.</span><span class="sxs-lookup"><span data-stu-id="326d7-309">We'll explore how to programmatically work with the data cache from within the architecture in our next tutorial.</span></span>

<span data-ttu-id="326d7-310">Radostí programování!</span><span class="sxs-lookup"><span data-stu-id="326d7-310">Happy Programming!</span></span>

## <a name="further-reading"></a><span data-ttu-id="326d7-311">Další čtení</span><span class="sxs-lookup"><span data-stu-id="326d7-311">Further Reading</span></span>

<span data-ttu-id="326d7-312">Další informace o tématech popsané v tomto kurzu najdete v následujících zdrojích informací:</span><span class="sxs-lookup"><span data-stu-id="326d7-312">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="326d7-313">Ukládání do mezipaměti ASP.NET: Technik a nejlepších postupů</span><span class="sxs-lookup"><span data-stu-id="326d7-313">ASP.NET Caching: Techniques and Best Practices</span></span>](https://msdn.microsoft.com/en-us/library/aa478965.aspx)
- [<span data-ttu-id="326d7-314">Ukládání do mezipaměti Průvodce architekturou pro aplikace .NET Framework</span><span class="sxs-lookup"><span data-stu-id="326d7-314">Caching Architecture Guide for .NET Framework Applications</span></span>](https://msdn.microsoft.com/en-us/library/ee817645.aspx)
- [<span data-ttu-id="326d7-315">Výstupní mezipaměti technologie ASP.NET 2.0</span><span class="sxs-lookup"><span data-stu-id="326d7-315">Output Caching in ASP.NET 2.0</span></span>](http://aspnet.4guysfromrolla.com/articles/121306-1.aspx)

## <a name="about-the-author"></a><span data-ttu-id="326d7-316">O autorovi</span><span class="sxs-lookup"><span data-stu-id="326d7-316">About the Author</span></span>

<span data-ttu-id="326d7-317">[Scott Meisnerová](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor sedm ASP/ASP.NET knih a zakladatele z [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracuje s technologií Microsoft Web od 1998.</span><span class="sxs-lookup"><span data-stu-id="326d7-317">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="326d7-318">Scott funguje jako nezávislé poradce, trainer a zapisovače.</span><span class="sxs-lookup"><span data-stu-id="326d7-318">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="326d7-319">Jeho nejnovější seznam k [ *Edice nakladatelství Sams naučit sami technologii ASP.NET 2.0 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="326d7-319">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="326d7-320">Dosažitelný v [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) nebo prostřednictvím svého blogu, který najdete na [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="326d7-320">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="326d7-321">Zvláštní poděkování</span><span class="sxs-lookup"><span data-stu-id="326d7-321">Special Thanks To</span></span>

<span data-ttu-id="326d7-322">Tento kurz řady byla zkontrolovány uživatelem mnoho užitečné kontrolorů.</span><span class="sxs-lookup"><span data-stu-id="326d7-322">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="326d7-323">Vést kontrolorem pro tento kurz byl Teresy Murphy.</span><span class="sxs-lookup"><span data-stu-id="326d7-323">Lead reviewer for this tutorial was Teresa Murphy.</span></span> <span data-ttu-id="326d7-324">Kontrola Moje nadcházející články MSDN máte zájem?</span><span class="sxs-lookup"><span data-stu-id="326d7-324">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="326d7-325">Pokud ano, vyřaďte mi řádek v [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="326d7-325">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="326d7-326">[Předchozí](using-sql-cache-dependencies-cs.md)
[další](caching-data-in-the-architecture-vb.md)</span><span class="sxs-lookup"><span data-stu-id="326d7-326">[Previous](using-sql-cache-dependencies-cs.md)
[Next](caching-data-in-the-architecture-vb.md)</span></span>
